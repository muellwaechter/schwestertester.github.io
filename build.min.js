
ï»¿window.layoutCSS="body#werwolf{background:#000 !important;background-image:url(https://schwestertester.github.io/img/streamers/werwolf_background.jpg) !important;background-repeat:no-repeat !important;background-position:right 0 !important}body#kuhlmann{background-image:url(https://schwestertester.github.io/img/streamers/kuhlmann_background.jpg) !important;background-size:cover !important;background-attachment:fixed}#flames{display:none}#drachenlord #flames{display:block !important}#flames{background:url(https://schwestertester.github.io/img/streamers/drachenlord_flames.gif) repeat-x;position:fixed;bottom:0;background-size:100px 60px;left:0;pointer-events:none;width:100%;height:60px;z-index:2000;mix-blend-mode:screen}.dancing{display:none}#drachenlord .dancing{display:block}.dancing{background:url(https://schwestertester.github.io/img/streamers/drachenlord_item.gif) no-repeat;bottom:-1px;pointer-events:none;background-position:bottom center;background-size:50% 50%;width:195px;height:270px;z-index:1999;position:fixed}.left{left:10px}.right{right:10px}#addSession{padding:10px}#addSession input{width:180px;border:0;height:26px}#addSession btn{borer:none;height:26px;margin-top:-3px !important}#sessions-dropdown li{padding:10px 0}#sessions-dropdown li .name span{font-weight:bold}#sessions-dropdown li .circle-thumb{margin-right:10px}.end-of-broadcast-container .eob-header .broadcast-info .broadcaster-setup-description{top:10px !important}.end-of-broadcast-container .eob-header .broadcast-info .broadcaster-setup-description .short-text{margin-top:0 !important}#update{width:100%;padding:20px;height:100%;text-align:center;position:fixed;top:0;left:0;z-index:10000}button.btn-fan{border:1px solid !important}.main-content-right .mini-player{margin:-11px -11px 12px -11px !important}.social-panel{border-bottom:2px solid}.main-content-right{padding:10px !important;border-radius:3px !important;border:1px solid !important}#leftsidebar{width:256px !important;padding-left:0 !important;top:6px !important;border:0 !important;background:transparent !important}#leftsidebar .trending-users{height:210px !important;margin-left:-5px !important;margin-right:-5px !important;padding-right:4px !important;width:226px !important}#leftsidebar .trending-users a{width:226px !important;padding-left:5px !important}#leftsidebar .trending-tags-list{width:226px !important}#main .main-left{width:222px !important;display:inline-block !important}#main .main-left .channel-menu-content{padding:0 !important;margin-left:0;width:226px;height:100%;border:0 !important;border-right:1px solid !important}#leftsidebar .panel-title{padding:10px 10px !important;margin-bottom:0 !important;margin-top:0 !important;width:225px !important}#leftsidebar .panel-body{padding:0 5px !important}#leftsidebar .left-panel{margin:0 0 !important;padding-bottom:0 !important}#leftsidebar .see-more{display:none !important}#leftsidebar .friends-list h1{margin-top:6px;padding-left:10px}#leftsidebar .friends-list{width:226px !important;margin-left:-5px !important}#leftsidebar .trending-tags-list{width:226px !important;padding:0 5px !important;margin-bottom:0 !important}#leftsidebar .trending-tags-list a{margin-left:-5px !important;padding-left:5px !important;width:220px !important}.activity-panel,[activity-panel]{margin:0 !important}.activity-panel .activity,[activity-panel] .activity{margin-left:-5px;padding-left:5px;width:231px !important}div.main-player,div.mini-player{border:0 solid !important}.result{border:1px solid !important;margin-right:10px !important;border-radius:6px;margin-bottom:10px;width:164px}div.audience-summary,.guest-nav,.modal-header{border-bottom:1px solid !important}.player-overlay{width:643px;height:502px}.modal-content .actions{border-top:1px solid !important;padding-top:5px}#sidebar-container{border:1px solid !important}div div button.btn-fanned{border:1px solid !important}button.btn-cancel{border:1px solid !important}.chat-mention{border-top:1px solid !important;border-bottom:1px solid !important}button.btn-primary,div button.edit-profile,.explore_more,.settings-link,.alert,div.typeahead-container .tag,.connect,.nav-pills li a,.total-views,.comment-actions button.btn-cancel,.searchResult-more{border:1px solid !important}div#chatinput{border:none !important;border-top:1px solid !important}#settinguppanel .snapshot-description{width:258px !important}#update img{position:fixed;bottom:0;height:60%;right:0}form.chat_input_row{margin-top:6px !important}mentio-menu[mentio-for=\"'commentInput'\"]{margin-left:2px !important}#sidebar-container #gifttray .premium-gift-desc{width:410px !important}#sidebar-container #gifttray .fanmail-count{right:35px}img.premium-gift,div.premium-gift{display:none !important}#sidebar-container #gifttray .fanmail-desc{margin-bottom:10px !important}div #sidebar-container .gift-tray-open .gift{margin-top:2px !important}div #sidebar-container .gift-tray-open .gifttray-extension{display:none !important}.gifttray-wallet{display:none !important}.fanmail-name{margin-top:10px !important}#playersystem{width:592px;word-wrap:break-word;white-space:normal;padding:5px;font-size:11px !important;text-align:center;height:30px;border-top:1px solid}#playerheader{padding-bottom:0 !important;height:70px !important;border-bottom:1px solid}.tab-icon .ynicon-broadcast{color:#fff !important}.chat_input_row .circle-thumb{width:25px;height:25px}.chat_input_row .selfie-container .ynicon-icon-selfie{font-size:25px !important}.top-fan .circle-thumb{width:25px !important;height:25px !important}#sidebar-container #topfan-slider .top-fan:last-child .see-text{width:120px !important;line-height:11px !important;font-size:8px !important}a.circle-thumb span{margin-top:14px;margin-right:0;float:right;font-weight:bold;text-shadow:1px 1px 1px black,1px -1px 1px black,-1px 1px 1px black,-1px -1px 1px black}.moment-urge{display:none !important}#sidebar-container{height:604px !important}#sidebar-container .sidebar-tab{height:100% !important}#sidebar-container .sidebar-header{height:35px !important;line-height:35px !important;height:43px !important;line-height:0 !important;border-bottom:1px solid !important}#sidebar-container .chatContent{height:100%}#sidebar-container .sidebar-header .tab-icon{font-size:12px !important;padding-top:12px !important}#sidebar-container .sidebar-header .tab-icon i{font-size:18px !important}#sidebar-container #chatinput{height:36px !important}#sidebar-container #topfan-slider .top-fan>*{vertical-align:top !important}#sidebar-container #topfan-slider .top-fan .circle-thumb{margin-right:0 !important}#sidebar-container #topfan-slider .top-fan{height:37px !important;width:120px !important;margin-top:10px !important}#sidebar-container #topfan-slider .top-fan .fan-name{max-width:98px !important}#sidebar-container #topfan-slider{font-size:11px !important;padding:0 20px 0 5px !important}#sidebar-container #chatinput button{margin:0 0 5px 5px !important;height:20px !important;font-size:10px !important}#sidebar-container #chatinput .characterCount{margin:0 !important}#sidebar-container #chatinput input{height:20px !important}#sidebar-container #chatinput .ynicon-icon-selfie{font-size:25px !important}#sidebar-container .selfie-container .ynicon-icon-selfie{left:-4.5px !important;font-size:33px !important}#sidebar-container .selfie-container{width:35px !important;height:33px !important}#sidebar-container #chatinput input[type=text]{top:0 !important;width:230px !important;padding-left:5px!important}#sidebar-container #chatinput .chat_input_darkMode input[type=text]{top:-12px !important}#sidebar-container .chat_input_darkMode .characterCount{top:-7px !important}#sidebar-container #chatinput .chat_input_darkMode button{margin:0 0 15px 5px !important}#sidebar-container #chatinput .ynicon-icon-selfie{position:absolute}#sidebar-container #globalchatcomments .chatcomment,#sidebar-container #chatcomments .chatcomment{padding:1px 10px !important;font-size:12px !important}#sidebar-container .characterCount{visibility:visible !important;top:-2px !important}#sidebar-container #globalchatcomments .chatcomment img,#sidebar-container #chatcomments .chatcomment img{height:33px}#sidebar-container #globalchatcomments .chatcomment .selfie-container,#sidebar-container #chatcomments .chatcomment .selfie-container{margin-left:-5px !important;width:40px !important}#sidebar-container #globalchatcomments .chatcomment .circle-thumb,#sidebar-container #chatcomments .chatcomment .circle-thumb{width:33px !important;height:33px !important;border-width:0 !important;margin-left:5px !important;position:absolute}#sidebar-container #globalchatcomments .chatcomment .emoji,#sidebar-container #chatcomments .chatcomment .emoji{height:14px !important;width:14px !important}#sidebar-container #globalchatcomments .chatcomment .userBox,#sidebar-container #chatcomments .chatcomment .userBox{width:105px;float:left}#sidebar-container #globalchatcomments .chatcomment .messageBox,#sidebar-container #chatcomments .chatcomment .messageBox{width:225px;float:left !important}#sidebar-container #globalchatcomments .old{opacity:.5}#sidebar-container #globalchatcomments .chatcomment a.chat-name,#sidebar-container #chatcomments .chatcomment a.chat-name{width:100px;float:left !important;white-space:nowrap !important;overflow:hidden !important;text-overflow:ellipsis !important;display:block !important}#sidebar-container #globalchatcomments .chatcomment .comment-content,#sidebar-container #chatcomments .chatcomment .comment-content{width:341px !important}#sidebar-container #globalchatcomments .chatcomment span.ynicon-icon-check,#sidebar-container #chatcomments .chatcomment span.ynicon-icon-check{float:right;display:inline-block}#sidebar-container #globalchatcomments .chatcomment.chat-mention .ynicon-icon-reply,#sidebar-container #chatcomments .chatcomment.chat-mention .ynicon-icon-reply{margin-top:8px}#sidebar-container #globalchatcomments .chatcomment .comment-content{display:inline-block}#sidebar-container #globalchatcomments .chatcomment .circle-thumb{margin-right:5px;vertical-align:top}#sidebar-container #globalchatcomments .chatcomment{-ms-word-break:break-all;word-break:break-all;width:400px;word-break:break-word;overflow:hidden;hyphens:auto;min-height:40px}.tab-icon span.unread{left:15px;position:absolute;margin-top:3px;background:red;padding:0 4px;height:14px;font-weight:bold !important;line-height:12px;font-size:9px;border-radius:5px}.gifttray-premium.premium-selected{height:163px !important}.gifttray-premium{border:none !important;width:398px !important}#sidebar-container #gifttray .gifttray-premium .btn-confirm{margin-top:5px !important}.gifttray-extension{padding-right:0 !important;padding-left:0 !important;height:90px !important;bottom:0 !important}#gifttray{padding:5px !important;height:95px !important}img.gift{width:24px !important;height:24px !important;margin:2px !important}#chatInput{margin-top:5px}.gifttray-basic{display:none}#globalchatcomments{position:relative;overflow-y:hidden;overflow-x:hidden !important;transition:height .7s ease;z-index:998;background-color:#fff;padding:0}#audiencepanel .audience{height:calc(100% - 74px) !important}#audiencepanel .viewer{height:37px !important}#sidebar-container .sidebar-tab>div{padding:0 0 !important}.audience-page{padding-left:10px !important;padding-right:10px !important;padding-top:5px !important;padding-bottom:5px !important}#audiencepanel div.audience-summary{padding:6px 10px !important}#audiencepanel .viewer .viewer-information{margin:0 !important}#audiencepanel .viewer .circle-thumb{width:32px !important;margin-top:2px !important;height:32px !important}#sidebar-container{margin-left:0 !important;height:100% !important}#sidebar-container #globalchatcomments .chat-name{font-weight:600;cursor:pointer}#sidebar-container #globalchatcomments:hover{overflow:auto;overflow-y:auto}#sidebar-container #gifttray{padding-left:0 !important}#sidebar-container .chatcomments-global{height:100% !important}#sidebar-container .chatcomments-mediumlarge{height:100% !important}#sidebar-container .chatcomments-mediumlarge #chatcomments{height:calc(100% - 224px) !important}#sidebar-container .chatcomments-global #globalchatcomments{height:calc(100% - 110px) !important}#sidebar-container .chatcomments-mediumlarge #chatinput{bottom:97px !important}#sidebar-container .chatcomments-large #chatcomments{height:calc(100% - 176px) !important}#sidebar-container .chatcomments-large #chatinput{bottom:97px !important}#sidebar-container .chatcomments-medium #chatcomments{height:calc(100% - 249px) !important}#sidebar-container .chatcomments-medium #chatinput{bottom:170px !important}#sidebar-container .chatcomments-small #chatcomments{height:calc(100% - 297px) !important}#sidebar-container .chatcomments-small #chatinput{bottom:170px !important}.fans-tab-fan a:hover,.comment-container a:hover{background:transparent !important}.selfie-chat-view .semi-prog-1{background:transparent !important}.end-of-broadcast-container .social-panel{margin-top:8px;margin-left:8px}.end-of-broadcast-container .stats-container{margin-top:8px;margin-left:7px}.end-of-broadcast-container .stats-container .details{width:280px !important}.main-channel-detail{width:1045px !important}.player-main object{width:643px !important;height:482px !important}.main-chat{height:calc(100% - 40px);position:fixed;margin-left:643px;top:40px !important}.main-channel-detail{width:644px !important}.player-chat{height:100%}div div#playerheader,div div#playerfooter,div div.player-toolbar,div div.player-toolbar-right,div.player-footer,#settingup-toolbar{background-color:transparent !important}#playerheader .broadcaster-name,#playerheader .broadcaster-name span{padding-top:5px !important}#playerheader,#playerfooter,#playerfooter .player-toolbar{width:645px !important}#playerheader{height:44px !important;padding:5px 10px !important}#playerheader .circle-thumb{width:30px !important;height:30px !important}.broadcast-info{width:}.main-content .main-player{border-radius:0 !important;width:643px !important}button.next-fan,button.prev-fan{top:45px !important;height:39px !important}button.next-fan{right:1px !important}button.prev-fan{left:1px !important}.giftImg{float:left;margin-right:5px}div div.connected{border:none !important;background:transparent !important}.end-of-broadcast-container .stats-container .details .detail-container{width:280px !important;padding-left:15px !important;padding-right:15px !important}img.circle-thumb{visibility:hidden !important}div img.circle-thumb[src*=\"http\"]{visibility:visible !important}a:hover{text-decoration:none !important}div.audience-summary.refresh i.ynicon{height:12px !important;width:12px !important}.line-clamp:after{display:none}.newFooter{margin-top:15px;clear:both;bottom:0}.main-left{display:block !important;clear:both !important}.main-right{display:block !important;clear:both !important}#guestpanel .guest,.guest-nav{width:calc(100% - 2px) !important}#main{width:1265px !important;clear:both !important;display:block !important;margin:41px auto 0 !important}.tag .result{width:222px !important}.overlay{background-color:rgba(50,50,50,0.5) !important}.navbar-content .nav-logo{line-height:35px !important;margin-right:26px !important}.navbar{height:42px !important;min-height:42px !important;border-bottom:1px solid !important}.search-box{margin-top:0 !important}.main-channel-detail{margin-left:0 !important}.navbar-content{height:40px !important;padding-right:0 !important}.search-box .ynicon-search{right:unset !important;top:8px !important;left:-30px !important;font-size:20px !important}.searchResult .userInfo,.searchResult .description{width:270px !important}.searchResult .userInfo .description,.searchResult .description .description{width:265px !important}.searchResult .userInfo .short-text,.searchResult .description .short-text{width:225px !important}.search-title{margin:0 0 4px !important}.navbar-content .search-box .dropdown-menu{margin-top:29px !important;width:365px !important}.tiny-search-bar .search-field{padding:0 !important}.navbar-content .tiny-search-active .search-field{padding:6px 12px !important}.tiny-search-active .ynicon-close{top:12px !important;right:3px !important}.search-box{height:35px !important;margin-left:10px !important}.search-box .search-field:focus{border-bottom:none !important}.search-box .search-field{margin-left:0 !important;height:39px !important;border-bottom:none !important;margin-top:0 !important}.navbar-content .user-actions{margin-top:5px;!important}.explore-text.pull-left{margin-left:10px !important;margin-top:6px !important}.user-menu{margin-top:5px !important}.user-menu .circle-thumb{width:30px !important;height:30px !important}#notifications-dropdown{margin-top:3px !important}#notifications-dropdown .ynicon{font-size:26px !important}.notifications{margin-right:5px !important}.notifications .dropdown-menu{margin-top:35px !important;margin-right:-10px !important}.notifications .ynicon-carrot-up{margin-top:-6px !important}.user-menu .ynicon-carrot-up{margin-top:-1px !important}.user-menu .dropdown-menu{margin-top:30px !important;margin-right:-20px !important}.navbar-content .user-actions{margin-top:4px !important}.navbar .gradient-accent,.navbar .progress-buffer{height:2px !important}.main-content .main-content-left{margin-left:0 !important}.main-content.main-async .main-content-left .user-cover{width:645px !important;height:254px !important}.main-content .main-content-left{width:645px !important;margin-left:0 !important}#playerheader .broadcaster-tag{margin-top:3px !important}.nav-absolute .header-nav-text{padding-top:2px !important;padding-bottom:2px !important;font-size:14px !important}.nav-absolute{left:270px !important}#momentpanel{padding-left:20px !important;padding-right:20px !important}#sharepanel{border-bottom-left-radius:0 !important;border-bottom-right-radius:0 !important}.main-content{width:1039px !important}#main .main-content.main-async .main-content-right{margin-left:-2px !important}.main-content .main-content-right{margin-left:-2px !important;width:400px !important;position:fixed}#playerfooter{height:35px !important}.player-toolbar-left{padding-top:7px !important;padding-left:6px !important}#toolbar-like-button img{width:24px !important;margin-top:-2px !important}.player-toolbar-left .ynicon{font-size:14px !important}#broadcast-moment .ynicon{font-size:14px !important}.player-toolbar-right{padding:2px 10px 0 0 !important}#tasks{height:100%}#tasks .headline{height:25px;line-height:25px;text-align:center;border-bottom:1px solid}#tasks .list{height:calc(100% - 67px)}#tasks .task{clear:both}#tasks .task .title{padding-left:5px;padding-right:5px;font-size:11px;height:20px;line-height:20px}#tasks .task .progress{height:20px;border-top:1px solid;border-bottom:1px solid;background:transparent !important;border-radius:0;margin:0 !important;margin-bottom:3px}#tasks .task .progress .fill{clear:both;float:left;background:#111466;height:18px;border:0;border-radius:0}#tasks .task .progress .label{clear:both;float:left;text-align:center;width:100%;margin-top:-16px;height:18px;font-weight:bold}#tasks .task .progress .cancel{float:right;height:13px;width:13px;cursor:pointer;margin-top:-18px;margin-right:12px;background:url(https://schwestertester.github.io/img/cancel.png)}#tasks .task .property{float:left}#tasks .task .property:nth-child(odd){clear:both}#tasks .task .property .key{padding-left:5px;float:left;width:100px;font-weight:bold;font-size:11px}#tasks .task .property .value{float:left;width:95px;font-size:11px}.playerfooterExtra{height:15px;line-height:10px;padding-left:10px;padding-right:10px;font-size:11px;border-bottom:1px solid}.playerfooterExtra .left{float:left}.playerfooterExtra .right{float:right}.playerfooterControl{padding-top:5px;padding-bottom:5px;border-bottom:1px solid;float:left;width:100%}.playerfooterControl div{float:left}.playerfooterControl .header{padding-left:10px;padding-right:10px;float:left;clear:both;font-size:12px;height:25px;width:100%;line-height:25px;border-bottom:1px solid;margin-bottom:5px;padding-right:10px;padding-left:10px}.playerfooterControl .header div{padding-right:10px;font-weight:bold;cursor:pointer;padding-left:10px;border:0 solid;margin-right:5px;border-radius:5px 5px 0 0}.playerfooterControl .header div img{height:20px}.playerfooterControl .content{float:left;clear:both;width:100%;padding-left:10px;padding-right:10px}.playerfooterControl .content div{padding-right:10px}.playerfooterControl .content div .label{float:left;clear:both;font-size:11px;width:100px;text-align:right !important;height:22px;margin-right:0 !important;line-height:22px;padding-right:0 !important;margin-right:5px !important}.playerfooterControl .content div .input{float:left;width:195px;padding-right:0 !important;margin-right:5px}.playerfooterControl .content div .notice{font-size:11px;width:305px;float:left;padding-top:5px}.playerfooterControl .content div .text{float:left;clear:both;font-size:11px}.playerfooterControl .content div .error{float:left;clear:both;margin-left:105px;font-size:10px;color:#f66 !important}.playerfooterControl .content div .submit{width:300px;padding-right:0 !important;margin-top:5px}.playerfooterControl .content div .submit button{float:right}.playerfooterControl .content div .input input{border:1px solid;width:195px;font-size:12px;height:20px}.playerfooterControl .content div .input textarea{border:1px solid;width:195px;border:1px solid #fff;font-size:12px;height:50px;float:left;clear:both}.playerfooterStats{padding-left:10px;padding-top:5px}.playerfooterStats .container{margin-right:10px;float:left;width:148px}.playerfooterStats .container .left{float:left;font-size:11px;width:68px;font-weight:bold}.playerfooterStats .container .right{font-size:11px;float:right;text-align:right;width:80px}.playerfooterStats .container canvas{clear:both;float:left}.chat-input select,.playerfooterControl .input select{border:1px solid;width:70px}.playerfooterControl .input select{width:195px}.switchHeader{float:left;clear:both;width:100%}.switchHeader div{float:left;height:23px;width:37.5px;cursor:pointer;text-align:center}.identities>div{float:left;width:120px;height:150px}.identities div img{width:120px;height:120px}.identities div .name span{margin-right:5px}.identities div .name{font-size:11px;float:left;clear:both;padding:0}.identities div .coins{float:left;clear:both;padding:0;font-weight:bold;font-size:12px}";function getTheCookie(regex){var i,cs=document.cookie.split(/;\s*/),ret=[];for(i=0;i<cs.length;i++)cs[i].match(regex)&&(ret=cs[i].split("=")[1]);return ret}function trace(text){if("\n"===text[text.length-1]&&(text=text.substring(0,text.length-1)),window.performance){var now=(window.performance.now()/1e3).toFixed(3);webrtcUtils.log(now+": "+text)}else webrtcUtils.log(text)}function requestUserMedia(constraints){return new Promise(function(resolve,reject){getUserMedia(constraints,resolve,reject)})}window.YouNow||(window.YouNow={}),window.YouNow.Bootstrap={},YouNow.Bootstrap.genTmId=function(){YouNow.Bootstrap.tmId=getTheCookie("PHPSESSID").toString()+"_"+Math.round((new Date).getTime()).toString()+"_"+parseInt(1e16*Math.random()).toString()},YouNow.Bootstrap.images1=function(){var oldScript=document.getElementById("images1");oldScript&&oldScript.parentNode.removeChild(oldScript);var imagesScript=document.createElement("script");imagesScript.id="images1",imagesScript.src="https://images1.younow.com/fp/tags.js?org_id=7jnw4jh4&session_id="+window.YouNow.Bootstrap.tmId+"&pageid=1",document.body.appendChild(imagesScript)},YouNow.Bootstrap.genTmId(),window.onload=function(){window.YouNow.Bootstrap.images1()},"/"===window.location.pathname&&(window.quickHash=window.location.hash),function(){function l(){var s=d.createElement("script");s.type="text/javascript",s.async=!0,s.src="https://widget.intercom.io/widget/o21fg3nl";var x=d.getElementsByTagName("script")[0];x.parentNode.insertBefore(s,x)}var w=window,ic=w.Intercom;if("function"==typeof ic)ic("reattach_activator"),ic("update",intercomSettings);else{var d=document,i=function(){i.c(arguments)};i.q=[],i.c=function(args){i.q.push(args)},w.Intercom=i,w.attachEvent?w.attachEvent("onload",l):w.addEventListener("load",l,!1)}}(),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.videojs=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){(function(global){var topLevel="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},minDoc=_dereq_("min-document");if("undefined"!=typeof document)module.exports=document;else{var doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"];doccy||(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc),module.exports=doccy}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":3}],2:[function(_dereq_,module,exports){(function(global){"undefined"!=typeof window?module.exports=window:"undefined"!=typeof global?module.exports=global:"undefined"!=typeof self?module.exports=self:module.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(_dereq_,module,exports){},{}],4:[function(_dereq_,module,exports){var getNative=_dereq_("../internal/getNative"),nativeNow=getNative(Date,"now"),now=nativeNow||function(){return(new Date).getTime()};module.exports=now},{"../internal/getNative":20}],5:[function(_dereq_,module,exports){function debounce(func,wait,options){function cancel(){timeoutId&&clearTimeout(timeoutId),maxTimeoutId&&clearTimeout(maxTimeoutId),lastCalled=0,maxTimeoutId=timeoutId=trailingCall=void 0}function complete(isCalled,id){id&&clearTimeout(id),maxTimeoutId=timeoutId=trailingCall=void 0,isCalled&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=void 0))}function delayed(){var remaining=wait-(now()-stamp);remaining<=0||remaining>wait?complete(trailingCall,maxTimeoutId):timeoutId=setTimeout(delayed,remaining)}function maxDelayed(){complete(trailing,timeoutId)}function debounced(){if(args=arguments,stamp=now(),thisArg=this,trailingCall=trailing&&(timeoutId||!leading),maxWait===!1)var leadingCall=leading&&!timeoutId;else{maxTimeoutId||leading||(lastCalled=stamp);var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;isCalled?(maxTimeoutId&&(maxTimeoutId=clearTimeout(maxTimeoutId)),lastCalled=stamp,result=func.apply(thisArg,args)):maxTimeoutId||(maxTimeoutId=setTimeout(maxDelayed,remaining))}return isCalled&&timeoutId?timeoutId=clearTimeout(timeoutId):timeoutId||wait===maxWait||(timeoutId=setTimeout(delayed,wait)),leadingCall&&(isCalled=!0,result=func.apply(thisArg,args)),!isCalled||timeoutId||maxTimeoutId||(args=thisArg=void 0),result}var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);if(wait=wait<0?0:+wait||0,options===!0){var leading=!0;trailing=!1}else isObject(options)&&(leading=!!options.leading,maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait),trailing="trailing"in options?!!options.trailing:trailing);return debounced.cancel=cancel,debounced}var isObject=_dereq_("../lang/isObject"),now=_dereq_("../date/now"),FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max;module.exports=debounce},{"../date/now":4,"../lang/isObject":33}],6:[function(_dereq_,module,exports){function restParam(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=nativeMax(void 0===start?func.length-1:+start||0,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);++index<length;)rest[index]=args[start+index];switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);for(index=-1;++index<start;)otherArgs[index]=args[index];return otherArgs[start]=rest,func.apply(this,otherArgs)}}var FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max;module.exports=restParam},{}],7:[function(_dereq_,module,exports){function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return options===!1?leading=!1:isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:+wait,trailing:trailing})}var debounce=_dereq_("./debounce"),isObject=_dereq_("../lang/isObject"),FUNC_ERROR_TEXT="Expected a function";module.exports=throttle},{"../lang/isObject":33,"./debounce":5}],8:[function(_dereq_,module,exports){function arrayCopy(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}module.exports=arrayCopy},{}],9:[function(_dereq_,module,exports){function arrayEach(array,iteratee){for(var index=-1,length=array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}module.exports=arrayEach},{}],10:[function(_dereq_,module,exports){function baseCopy(source,props,object){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index];object[key]=source[key]}return object}module.exports=baseCopy},{}],11:[function(_dereq_,module,exports){var createBaseFor=_dereq_("./createBaseFor"),baseFor=createBaseFor();module.exports=baseFor},{"./createBaseFor":18}],12:[function(_dereq_,module,exports){function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}var baseFor=_dereq_("./baseFor"),keysIn=_dereq_("../object/keysIn");module.exports=baseForIn},{"../object/keysIn":39,"./baseFor":11}],13:[function(_dereq_,module,exports){function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object))return object;var isSrcArr=isArrayLike(source)&&(isArray(source)||isTypedArray(source)),props=isSrcArr?void 0:keys(source);return arrayEach(props||source,function(srcValue,key){if(props&&(key=srcValue,srcValue=source[key]),isObjectLike(srcValue))stackA||(stackA=[]),stackB||(stackB=[]),baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB);else{var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):void 0,isCommon=void 0===result;isCommon&&(result=srcValue),void 0===result&&(!isSrcArr||key in object)||!isCommon&&(result===result?result===value:value!==value)||(object[key]=result)}}),object}var arrayEach=_dereq_("./arrayEach"),baseMergeDeep=_dereq_("./baseMergeDeep"),isArray=_dereq_("../lang/isArray"),isArrayLike=_dereq_("./isArrayLike"),isObject=_dereq_("../lang/isObject"),isObjectLike=_dereq_("./isObjectLike"),isTypedArray=_dereq_("../lang/isTypedArray"),keys=_dereq_("../object/keys");module.exports=baseMerge},{"../lang/isArray":30,"../lang/isObject":33,"../lang/isTypedArray":36,"../object/keys":38,"./arrayEach":9,"./baseMergeDeep":14,"./isArrayLike":21,"./isObjectLike":26}],14:[function(_dereq_,module,exports){function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){for(var length=stackA.length,srcValue=source[key];length--;)if(stackA[length]==srcValue)return void(object[key]=stackB[length]);var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):void 0,isCommon=void 0===result;isCommon&&(result=srcValue,isArrayLike(srcValue)&&(isArray(srcValue)||isTypedArray(srcValue))?result=isArray(value)?value:isArrayLike(value)?arrayCopy(value):[]:isPlainObject(srcValue)||isArguments(srcValue)?result=isArguments(value)?toPlainObject(value):isPlainObject(value)?value:{}:isCommon=!1),stackA.push(srcValue),stackB.push(result),isCommon?object[key]=mergeFunc(result,srcValue,customizer,stackA,stackB):(result===result?result!==value:value===value)&&(object[key]=result)}var arrayCopy=_dereq_("./arrayCopy"),isArguments=_dereq_("../lang/isArguments"),isArray=_dereq_("../lang/isArray"),isArrayLike=_dereq_("./isArrayLike"),isPlainObject=_dereq_("../lang/isPlainObject"),isTypedArray=_dereq_("../lang/isTypedArray"),toPlainObject=_dereq_("../lang/toPlainObject");module.exports=baseMergeDeep},{"../lang/isArguments":29,"../lang/isArray":30,"../lang/isPlainObject":34,"../lang/isTypedArray":36,"../lang/toPlainObject":37,"./arrayCopy":8,"./isArrayLike":21}],15:[function(_dereq_,module,exports){function baseProperty(key){return function(object){return null==object?void 0:toObject(object)[key]}}var toObject=_dereq_("./toObject");module.exports=baseProperty},{"./toObject":28}],16:[function(_dereq_,module,exports){function bindCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if(void 0===thisArg)return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}var identity=_dereq_("../utility/identity");module.exports=bindCallback},{"../utility/identity":42}],17:[function(_dereq_,module,exports){function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=null==object?0:sources.length,customizer=length>2?sources[length-2]:void 0,guard=length>2?sources[2]:void 0,thisArg=length>1?sources[length-1]:void 0;for("function"==typeof customizer?(customizer=bindCallback(customizer,thisArg,5),length-=2):(customizer="function"==typeof thisArg?thisArg:void 0,length-=customizer?1:0),guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1);++index<length;){var source=sources[index];source&&assigner(object,source,customizer)}return object})}var bindCallback=_dereq_("./bindCallback"),isIterateeCall=_dereq_("./isIterateeCall"),restParam=_dereq_("../function/restParam");module.exports=createAssigner},{"../function/restParam":6,"./bindCallback":16,"./isIterateeCall":24}],18:[function(_dereq_,module,exports){function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;fromRight?index--:++index<length;){var key=props[index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}var toObject=_dereq_("./toObject");module.exports=createBaseFor},{"./toObject":28}],19:[function(_dereq_,module,exports){var baseProperty=_dereq_("./baseProperty"),getLength=baseProperty("length");module.exports=getLength},{"./baseProperty":15}],20:[function(_dereq_,module,exports){function getNative(object,key){var value=null==object?void 0:object[key];return isNative(value)?value:void 0}var isNative=_dereq_("../lang/isNative");module.exports=getNative},{"../lang/isNative":32}],21:[function(_dereq_,module,exports){function isArrayLike(value){return null!=value&&isLength(getLength(value))}var getLength=_dereq_("./getLength"),isLength=_dereq_("./isLength");module.exports=isArrayLike},{"./getLength":19,"./isLength":25}],22:[function(_dereq_,module,exports){var isHostObject=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(value){return"function"!=typeof value.toString&&"string"==typeof(value+"")}}();module.exports=isHostObject},{}],23:[function(_dereq_,module,exports){function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&value<length}var reIsUint=/^\d+$/,MAX_SAFE_INTEGER=9007199254740991;module.exports=isIndex},{}],24:[function(_dereq_,module,exports){function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;if("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object){var other=object[index];return value===value?value===other:other!==other}return!1}var isArrayLike=_dereq_("./isArrayLike"),isIndex=_dereq_("./isIndex"),isObject=_dereq_("../lang/isObject");module.exports=isIterateeCall},{"../lang/isObject":33,"./isArrayLike":21,"./isIndex":23}],25:[function(_dereq_,module,exports){function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}var MAX_SAFE_INTEGER=9007199254740991;module.exports=isLength},{}],26:[function(_dereq_,module,exports){function isObjectLike(value){return!!value&&"object"==typeof value}module.exports=isObjectLike},{}],27:[function(_dereq_,module,exports){function shimKeys(object){for(var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length,allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object)||isString(object)),index=-1,result=[];++index<propsLength;){var key=props[index];(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key))&&result.push(key)}return result}var isArguments=_dereq_("../lang/isArguments"),isArray=_dereq_("../lang/isArray"),isIndex=_dereq_("./isIndex"),isLength=_dereq_("./isLength"),isString=_dereq_("../lang/isString"),keysIn=_dereq_("../object/keysIn"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=shimKeys},{"../lang/isArguments":29,"../lang/isArray":30,"../lang/isString":35,"../object/keysIn":39,"./isIndex":23,"./isLength":25}],28:[function(_dereq_,module,exports){function toObject(value){if(support.unindexedChars&&isString(value)){for(var index=-1,length=value.length,result=Object(value);++index<length;)result[index]=value.charAt(index);return result}return isObject(value)?value:Object(value)}var isObject=_dereq_("../lang/isObject"),isString=_dereq_("../lang/isString"),support=_dereq_("../support");module.exports=toObject},{"../lang/isObject":33,"../lang/isString":35,"../support":41}],29:[function(_dereq_,module,exports){function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")}var isArrayLike=_dereq_("../internal/isArrayLike"),isObjectLike=_dereq_("../internal/isObjectLike"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable;module.exports=isArguments},{"../internal/isArrayLike":21,"../internal/isObjectLike":26}],30:[function(_dereq_,module,exports){var getNative=_dereq_("../internal/getNative"),isLength=_dereq_("../internal/isLength"),isObjectLike=_dereq_("../internal/isObjectLike"),arrayTag="[object Array]",objectProto=Object.prototype,objToString=objectProto.toString,nativeIsArray=getNative(Array,"isArray"),isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};module.exports=isArray},{"../internal/getNative":20,"../internal/isLength":25,"../internal/isObjectLike":26}],31:[function(_dereq_,module,exports){function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}var isObject=_dereq_("./isObject"),funcTag="[object Function]",objectProto=Object.prototype,objToString=objectProto.toString;module.exports=isFunction},{"./isObject":33}],32:[function(_dereq_,module,exports){function isNative(value){return null!=value&&(isFunction(value)?reIsNative.test(fnToString.call(value)):isObjectLike(value)&&(isHostObject(value)?reIsNative:reIsHostCtor).test(value))}var isFunction=_dereq_("./isFunction"),isHostObject=_dereq_("../internal/isHostObject"),isObjectLike=_dereq_("../internal/isObjectLike"),reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=isNative},{"../internal/isHostObject":22,"../internal/isObjectLike":26,"./isFunction":31}],33:[function(_dereq_,module,exports){function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}module.exports=isObject},{}],34:[function(_dereq_,module,exports){function isPlainObject(value){var Ctor;if(!isObjectLike(value)||objToString.call(value)!=objectTag||isHostObject(value)||isArguments(value)||!hasOwnProperty.call(value,"constructor")&&(Ctor=value.constructor,"function"==typeof Ctor&&!(Ctor instanceof Ctor)))return!1;var result;return support.ownLast?(baseForIn(value,function(subValue,key,object){return result=hasOwnProperty.call(object,key),!1}),result!==!1):(baseForIn(value,function(subValue,key){result=key}),void 0===result||hasOwnProperty.call(value,result))}var baseForIn=_dereq_("../internal/baseForIn"),isArguments=_dereq_("./isArguments"),isHostObject=_dereq_("../internal/isHostObject"),isObjectLike=_dereq_("../internal/isObjectLike"),support=_dereq_("../support"),objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString;module.exports=isPlainObject},{"../internal/baseForIn":12,"../internal/isHostObject":22,"../internal/isObjectLike":26,"../support":41,"./isArguments":29}],35:[function(_dereq_,module,exports){function isString(value){return"string"==typeof value||isObjectLike(value)&&objToString.call(value)==stringTag}var isObjectLike=_dereq_("../internal/isObjectLike"),stringTag="[object String]",objectProto=Object.prototype,objToString=objectProto.toString;module.exports=isString},{"../internal/isObjectLike":26}],36:[function(_dereq_,module,exports){function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}var isLength=_dereq_("../internal/isLength"),isObjectLike=_dereq_("../internal/isObjectLike"),argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var objectProto=Object.prototype,objToString=objectProto.toString;module.exports=isTypedArray},{"../internal/isLength":25,"../internal/isObjectLike":26}],37:[function(_dereq_,module,exports){function toPlainObject(value){return baseCopy(value,keysIn(value))}var baseCopy=_dereq_("../internal/baseCopy"),keysIn=_dereq_("../object/keysIn");module.exports=toPlainObject},{"../internal/baseCopy":10,"../object/keysIn":39}],38:[function(_dereq_,module,exports){var getNative=_dereq_("../internal/getNative"),isArrayLike=_dereq_("../internal/isArrayLike"),isObject=_dereq_("../lang/isObject"),shimKeys=_dereq_("../internal/shimKeys"),support=_dereq_("../support"),nativeKeys=getNative(Object,"keys"),keys=nativeKeys?function(object){var Ctor=null==object?void 0:object.constructor;return"function"==typeof Ctor&&Ctor.prototype===object||("function"==typeof object?support.enumPrototypes:isArrayLike(object))?shimKeys(object):isObject(object)?nativeKeys(object):[]}:shimKeys;module.exports=keys},{"../internal/getNative":20,"../internal/isArrayLike":21,"../internal/shimKeys":27,"../lang/isObject":33,"../support":41}],39:[function(_dereq_,module,exports){function keysIn(object){if(null==object)return[];isObject(object)||(object=Object(object));var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object)||isString(object))&&length||0;for(var Ctor=object.constructor,index=-1,proto=isFunction(Ctor)&&Ctor.prototype||objectProto,isProto=proto===object,result=Array(length),skipIndexes=length>0,skipErrorProps=support.enumErrorProps&&(object===errorProto||object instanceof Error),skipProto=support.enumPrototypes&&isFunction(object);++index<length;)result[index]=index+"";for(var key in object)skipProto&&"prototype"==key||skipErrorProps&&("message"==key||"name"==key)||skipIndexes&&isIndex(key,length)||"constructor"==key&&(isProto||!hasOwnProperty.call(object,key))||result.push(key);if(support.nonEnumShadows&&object!==objectProto){var tag=object===stringProto?stringTag:object===errorProto?errorTag:objToString.call(object),nonEnums=nonEnumProps[tag]||nonEnumProps[objectTag];for(tag==objectTag&&(proto=objectProto),length=shadowProps.length;length--;){key=shadowProps[length];var nonEnum=nonEnums[key];isProto&&nonEnum||(nonEnum?!hasOwnProperty.call(object,key):object[key]===proto[key])||result.push(key)}}return result}var arrayEach=_dereq_("../internal/arrayEach"),isArguments=_dereq_("../lang/isArguments"),isArray=_dereq_("../lang/isArray"),isFunction=_dereq_("../lang/isFunction"),isIndex=_dereq_("../internal/isIndex"),isLength=_dereq_("../internal/isLength"),isObject=_dereq_("../lang/isObject"),isString=_dereq_("../lang/isString"),support=_dereq_("../support"),arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",stringTag="[object String]",shadowProps=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],errorProto=Error.prototype,objectProto=Object.prototype,stringProto=String.prototype,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,nonEnumProps={};nonEnumProps[arrayTag]=nonEnumProps[dateTag]=nonEnumProps[numberTag]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},nonEnumProps[boolTag]=nonEnumProps[stringTag]={constructor:!0,toString:!0,valueOf:!0},nonEnumProps[errorTag]=nonEnumProps[funcTag]=nonEnumProps[regexpTag]={constructor:!0,toString:!0},nonEnumProps[objectTag]={constructor:!0},arrayEach(shadowProps,function(key){for(var tag in nonEnumProps)if(hasOwnProperty.call(nonEnumProps,tag)){var props=nonEnumProps[tag];props[key]=hasOwnProperty.call(props,key)}}),module.exports=keysIn},{"../internal/arrayEach":9,"../internal/isIndex":23,"../internal/isLength":25,"../lang/isArguments":29,"../lang/isArray":30,"../lang/isFunction":31,"../lang/isObject":33,"../lang/isString":35,"../support":41}],40:[function(_dereq_,module,exports){var baseMerge=_dereq_("../internal/baseMerge"),createAssigner=_dereq_("../internal/createAssigner"),merge=createAssigner(baseMerge);module.exports=merge},{"../internal/baseMerge":13,"../internal/createAssigner":17}],41:[function(_dereq_,module,exports){var arrayProto=Array.prototype,errorProto=Error.prototype,objectProto=Object.prototype,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,support={};!function(x){var Ctor=function(){this.x=x},object={0:x,length:x},props=[];Ctor.prototype={valueOf:x,y:x};for(var key in new Ctor)props.push(key);support.enumErrorProps=propertyIsEnumerable.call(errorProto,"message")||propertyIsEnumerable.call(errorProto,"name"),support.enumPrototypes=propertyIsEnumerable.call(Ctor,"prototype"),support.nonEnumShadows=!/valueOf/.test(props),support.ownLast="x"!=props[0],support.spliceObjects=(splice.call(object,0,1),!object[0]),support.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0),module.exports=support},{}],42:[function(_dereq_,module,exports){function identity(value){return value}module.exports=identity},{}],43:[function(_dereq_,module,exports){"use strict";var keys=_dereq_("object-keys");module.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var obj={},sym=Symbol("test");if("string"==typeof sym)return!1;var symVal=42;obj[sym]=symVal;for(sym in obj)return!1;if(0!==keys(obj).length)return!1;if("function"==typeof Object.keys&&0!==Object.keys(obj).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(obj).length)return!1;var syms=Object.getOwnPropertySymbols(obj);if(1!==syms.length||syms[0]!==sym)return!1;if(!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(descriptor.value!==symVal||descriptor.enumerable!==!0)return!1}return!0}},{"object-keys":50}],44:[function(_dereq_,module,exports){"use strict";var keys=_dereq_("object-keys"),bind=_dereq_("function-bind"),canBeObject=function(obj){return"undefined"!=typeof obj&&null!==obj},hasSymbols=_dereq_("./hasSymbols")(),toObject=Object,push=bind.call(Function.call,Array.prototype.push),propIsEnumerable=bind.call(Function.call,Object.prototype.propertyIsEnumerable);module.exports=function(target,source1){if(!canBeObject(target))throw new TypeError("target must be an object");var s,source,i,props,syms,value,key,objTarget=toObject(target);for(s=1;s<arguments.length;++s){if(source=toObject(arguments[s]),props=keys(source),hasSymbols&&Object.getOwnPropertySymbols)for(syms=Object.getOwnPropertySymbols(source),i=0;i<syms.length;++i)key=syms[i],propIsEnumerable(source,key)&&push(props,key);for(i=0;i<props.length;++i)key=props[i],value=source[key],propIsEnumerable(source,key)&&(objTarget[key]=value)}return objTarget}},{"./hasSymbols":43,"function-bind":49,"object-keys":50}],45:[function(_dereq_,module,exports){"use strict";var defineProperties=_dereq_("define-properties"),implementation=_dereq_("./implementation"),getPolyfill=_dereq_("./polyfill"),shim=_dereq_("./shim");defineProperties(implementation,{implementation:implementation,getPolyfill:getPolyfill,shim:shim}),module.exports=implementation},{"./implementation":44,"./polyfill":52,"./shim":53,"define-properties":46}],46:[function(_dereq_,module,exports){"use strict";var keys=_dereq_("object-keys"),foreach=_dereq_("foreach"),hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol(),toStr=Object.prototype.toString,isFunction=function(fn){return"function"==typeof fn&&"[object Function]"===toStr.call(fn)},arePropertyDescriptorsSupported=function(){var obj={};try{Object.defineProperty(obj,"x",{enumerable:!1,value:obj});for(var _ in obj)return!1;return obj.x===obj}catch(e){return!1}},supportsDescriptors=Object.defineProperty&&arePropertyDescriptorsSupported(),defineProperty=function(object,name,value,predicate){(!(name in object)||isFunction(predicate)&&predicate())&&(supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!1,value:value,writable:!0}):object[name]=value)},defineProperties=function(object,map){var predicates=arguments.length>2?arguments[2]:{},props=keys(map);hasSymbols&&(props=props.concat(Object.getOwnPropertySymbols(map))),foreach(props,function(name){defineProperty(object,name,map[name],predicates[name])})};defineProperties.supportsDescriptors=!!supportsDescriptors,module.exports=defineProperties},{foreach:47,"object-keys":50}],47:[function(_dereq_,module,exports){var hasOwn=Object.prototype.hasOwnProperty,toString=Object.prototype.toString;module.exports=function(obj,fn,ctx){if("[object Function]"!==toString.call(fn))throw new TypeError("iterator must be a function");var l=obj.length;if(l===+l)for(var i=0;i<l;i++)fn.call(ctx,obj[i],i,obj);else for(var k in obj)hasOwn.call(obj,k)&&fn.call(ctx,obj[k],k,obj)}},{}],48:[function(_dereq_,module,exports){var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr=Object.prototype.toString,funcType="[object Function]";module.exports=function(that){var target=this;if("function"!=typeof target||toStr.call(target)!==funcType)throw new TypeError(ERROR_MESSAGE+target);for(var bound,args=slice.call(arguments,1),binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))},boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs.push("$"+i);if(bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder),target.prototype){var Empty=function(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}},{}],49:[function(_dereq_,module,exports){var implementation=_dereq_("./implementation");module.exports=Function.prototype.bind||implementation},{"./implementation":48}],50:[function(_dereq_,module,exports){"use strict";var has=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,slice=Array.prototype.slice,isArgs=_dereq_("./isArguments"),hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),hasProtoEnumBug=function(){}.propertyIsEnumerable("prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},blacklistedKeys={$console:!0,$frame:!0,$frameElement:!0,$frames:!0,$parent:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{if(!blacklistedKeys["$"+k]&&has.call(window,k)&&null!==window[k]&&"object"==typeof window[k])try{equalsConstructorPrototype(window[k])}catch(e){return!0}}catch(e){return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(o){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(o);try{return equalsConstructorPrototype(o)}catch(e){return!1}},keysShim=function(object){var isObject=null!==object&&"object"==typeof object,isFunction="[object Function]"===toStr.call(object),isArguments=isArgs(object),isString=isObject&&"[object String]"===toStr.call(object),theKeys=[];if(!isObject&&!isFunction&&!isArguments)throw new TypeError("Object.keys called on a non-object");var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0))for(var i=0;i<object.length;++i)theKeys.push(String(i));if(isArguments&&object.length>0)for(var j=0;j<object.length;++j)theKeys.push(String(j));else for(var name in object)skipProto&&"prototype"===name||!has.call(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var skipConstructor=equalsConstructorPrototypeIfNotBuggy(object),k=0;k<dontEnums.length;++k)skipConstructor&&"constructor"===dontEnums[k]||!has.call(object,dontEnums[k])||theKeys.push(dontEnums[k]);return theKeys};keysShim.shim=function(){if(Object.keys){var keysWorksWithArguments=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!keysWorksWithArguments){var originalKeys=Object.keys;Object.keys=function(object){return originalKeys(isArgs(object)?slice.call(object):object)}}}else Object.keys=keysShim;return Object.keys||keysShim},module.exports=keysShim},{"./isArguments":51}],51:[function(_dereq_,module,exports){"use strict";var toStr=Object.prototype.toString;module.exports=function(value){var str=toStr.call(value),isArgs="[object Arguments]"===str;return isArgs||(isArgs="[object Array]"!==str&&null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Function]"===toStr.call(value.callee)),isArgs}},{}],52:[function(_dereq_,module,exports){"use strict";var implementation=_dereq_("./implementation"),lacksProperEnumerationOrder=function(){if(!Object.assign)return!1;for(var str="abcdefghijklmnopqrst",letters=str.split(""),map={},i=0;i<letters.length;++i)map[letters[i]]=letters[i];var obj=Object.assign({},map),actual="";for(var k in obj)actual+=k;return str!==actual},assignHasPendingExceptions=function(){if(!Object.assign||!Object.preventExtensions)return!1;var thrower=Object.preventExtensions({1:2});try{Object.assign(thrower,"xy")}catch(e){return"y"===thrower[1]}};module.exports=function(){return Object.assign?lacksProperEnumerationOrder()?implementation:assignHasPendingExceptions()?implementation:Object.assign:implementation}},{"./implementation":44}],53:[function(_dereq_,module,exports){"use strict";var define=_dereq_("define-properties"),getPolyfill=_dereq_("./polyfill");module.exports=function(){var polyfill=getPolyfill();return define(Object,{assign:polyfill},{assign:function(){return Object.assign!==polyfill}}),polyfill}},{"./polyfill":52,"define-properties":46}],54:[function(_dereq_,module,exports){function SafeParseTuple(obj,reviver){var json,error=null;try{json=JSON.parse(obj,reviver)}catch(err){error=err}return[error,json]}module.exports=SafeParseTuple},{}],55:[function(_dereq_,module,exports){function clean(s){return s.replace(/\n\r?\s*/g,"")}module.exports=function(sa){for(var s="",i=0;i<arguments.length;i++)s+=clean(sa[i])+(arguments[i+1]||"");return s}},{}],56:[function(_dereq_,module,exports){"use strict";function forEachArray(array,iterator){for(var i=0;i<array.length;i++)iterator(array[i])}function isEmpty(obj){for(var i in obj)if(obj.hasOwnProperty(i))return!1;return!0}function initParams(uri,options,callback){var params=uri;return isFunction(options)?(callback=options,"string"==typeof uri&&(params={uri:uri})):params=xtend(options,{uri:uri}),params.callback=callback,params}function createXHR(uri,options,callback){return options=initParams(uri,options,callback),_createXHR(options)}function _createXHR(options){function readystatechange(){4===xhr.readyState&&loadFunc()}function getBody(){var body=void 0;if(xhr.response?body=xhr.response:"text"!==xhr.responseType&&xhr.responseType||(body=xhr.responseText||xhr.responseXML),isJson)try{body=JSON.parse(body)}catch(e){}return body}function errorFunc(evt){clearTimeout(timeoutTimer),evt instanceof Error||(evt=new Error(""+(evt||"Unknown XMLHttpRequest Error"))),evt.statusCode=0,callback(evt,failureResponse)}function loadFunc(){if(!aborted){var status;clearTimeout(timeoutTimer),status=options.useXDR&&void 0===xhr.status?200:1223===xhr.status?204:xhr.status;var response=failureResponse,err=null;0!==status?(response={body:getBody(),statusCode:status,method:method,headers:{},url:uri,rawRequest:xhr},xhr.getAllResponseHeaders&&(response.headers=parseHeaders(xhr.getAllResponseHeaders()))):err=new Error("Internal XMLHttpRequest Error"),callback(err,response,response.body)}}var callback=options.callback;if("undefined"==typeof callback)throw new Error("callback argument missing");callback=once(callback);var failureResponse={body:void 0,headers:{},statusCode:0,method:method,url:uri,rawRequest:xhr},xhr=options.xhr||null;xhr||(xhr=options.cors||options.useXDR?new createXHR.XDomainRequest:new createXHR.XMLHttpRequest);var key,aborted,timeoutTimer,uri=xhr.url=options.uri||options.url,method=xhr.method=options.method||"GET",body=options.body||options.data||null,headers=xhr.headers=options.headers||{},sync=!!options.sync,isJson=!1;if("json"in options&&(isJson=!0,headers.accept||headers.Accept||(headers.Accept="application/json"),"GET"!==method&&"HEAD"!==method&&(headers["content-type"]||headers["Content-Type"]||(headers["Content-Type"]="application/json"),body=JSON.stringify(options.json))),xhr.onreadystatechange=readystatechange,xhr.onload=loadFunc,xhr.onerror=errorFunc,xhr.onprogress=function(){},xhr.ontimeout=errorFunc,xhr.open(method,uri,!sync,options.username,options.password),sync||(xhr.withCredentials=!!options.withCredentials),!sync&&options.timeout>0&&(timeoutTimer=setTimeout(function(){aborted=!0,xhr.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",errorFunc(e)},options.timeout)),xhr.setRequestHeader)for(key in headers)headers.hasOwnProperty(key)&&xhr.setRequestHeader(key,headers[key]);else if(options.headers&&!isEmpty(options.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in options&&(xhr.responseType=options.responseType),"beforeSend"in options&&"function"==typeof options.beforeSend&&options.beforeSend(xhr),xhr.send(body),xhr}function noop(){}var window=_dereq_("global/window"),once=_dereq_("once"),isFunction=_dereq_("is-function"),parseHeaders=_dereq_("parse-headers"),xtend=_dereq_("xtend");module.exports=createXHR,createXHR.XMLHttpRequest=window.XMLHttpRequest||noop,createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:window.XDomainRequest,forEachArray(["get","put","post","patch","head","delete"],function(method){createXHR["delete"===method?"del":method]=function(uri,options,callback){return options=initParams(uri,options,callback),options.method=method.toUpperCase(),_createXHR(options)}})},{"global/window":2,"is-function":57,once:58,"parse-headers":61,xtend:62}],57:[function(_dereq_,module,exports){function isFunction(fn){var string=toString.call(fn);return"[object Function]"===string||"function"==typeof fn&&"[object RegExp]"!==string||"undefined"!=typeof window&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)}module.exports=isFunction;var toString=Object.prototype.toString},{}],58:[function(_dereq_,module,exports){function once(fn){var called=!1;return function(){if(!called)return called=!0,fn.apply(this,arguments)}}module.exports=once,once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0})})},{}],59:[function(_dereq_,module,exports){function forEach(list,iterator,context){if(!isFunction(iterator))throw new TypeError("iterator must be a function");arguments.length<3&&(context=this),"[object Array]"===toString.call(list)?forEachArray(list,iterator,context):"string"==typeof list?forEachString(list,iterator,context):forEachObject(list,iterator,context)}function forEachArray(array,iterator,context){for(var i=0,len=array.length;i<len;i++)hasOwnProperty.call(array,i)&&iterator.call(context,array[i],i,array)}function forEachString(string,iterator,context){for(var i=0,len=string.length;i<len;i++)iterator.call(context,string.charAt(i),i,string)}function forEachObject(object,iterator,context){for(var k in object)hasOwnProperty.call(object,k)&&iterator.call(context,object[k],k,object)}var isFunction=_dereq_("is-function");module.exports=forEach;var toString=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty},{"is-function":57}],60:[function(_dereq_,module,exports){function trim(str){return str.replace(/^\s*|\s*$/g,"")}exports=module.exports=trim,exports.left=function(str){return str.replace(/^\s*/,"")},exports.right=function(str){return str.replace(/\s*$/,"")}},{}],61:[function(_dereq_,module,exports){var trim=_dereq_("trim"),forEach=_dereq_("for-each"),isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)};module.exports=function(headers){if(!headers)return{};var result={};return forEach(trim(headers).split("\n"),function(row){var index=row.indexOf(":"),key=trim(row.slice(0,index)).toLowerCase(),value=trim(row.slice(index+1));"undefined"==typeof result[key]?result[key]=value:isArray(result[key])?result[key].push(value):result[key]=[result[key],value]}),result}},{"for-each":59,trim:60}],62:[function(_dereq_,module,exports){function extend(){for(var target={},i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source)hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty},{}],63:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _buttonJs=_dereq_("./button.js"),_buttonJs2=_interopRequireDefault(_buttonJs),_componentJs=_dereq_("./component.js"),_componentJs2=_interopRequireDefault(_componentJs),BigPlayButton=function(_Button){function BigPlayButton(player,options){_classCallCheck(this,BigPlayButton),_Button.call(this,player,options)}return _inherits(BigPlayButton,_Button),BigPlayButton.prototype.buildCSSClass=function(){return"vjs-big-play-button"},BigPlayButton.prototype.handleClick=function(){this.player_.play()},BigPlayButton}(_buttonJs2.default);BigPlayButton.prototype.controlText_="Play Video",_componentJs2.default.registerComponent("BigPlayButton",BigPlayButton),exports.default=BigPlayButton,module.exports=exports.default},{"./button.js":64,"./component.js":67}],64:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _clickableComponentJs=_dereq_("./clickable-component.js"),_clickableComponentJs2=_interopRequireDefault(_clickableComponentJs),_component=_dereq_("./component"),_component2=_interopRequireDefault(_component),_utilsEventsJs=_dereq_("./utils/events.js"),_utilsFnJs=(_interopRequireWildcard(_utilsEventsJs),_dereq_("./utils/fn.js")),_utilsLogJs=(_interopRequireWildcard(_utilsFnJs),_dereq_("./utils/log.js")),_utilsLogJs2=_interopRequireDefault(_utilsLogJs),_globalDocument=_dereq_("global/document"),_objectAssign=(_interopRequireDefault(_globalDocument),_dereq_("object.assign")),_objectAssign2=_interopRequireDefault(_objectAssign),Button=function(_ClickableComponent){function Button(player,options){_classCallCheck(this,Button),_ClickableComponent.call(this,player,options)}return _inherits(Button,_ClickableComponent),Button.prototype.createEl=function(){var tag=arguments.length<=0||void 0===arguments[0]?"button":arguments[0],props=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],attributes=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];props=_objectAssign2.default({className:this.buildCSSClass()},props),"button"!==tag&&(_utilsLogJs2.default.warn("Creating a Button with an HTML element of "+tag+" is deprecated; use ClickableComponent instead."),props=_objectAssign2.default({tabIndex:0},props),attributes=_objectAssign2.default({role:"button"},attributes)),attributes=_objectAssign2.default({type:"button","aria-live":"polite"},attributes);var el=_component2.default.prototype.createEl.call(this,tag,props,attributes);return this.createControlTextEl(el),el},Button.prototype.addChild=function(child){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],className=this.constructor.name;return _utilsLogJs2.default.warn("Adding an actionable (user controllable) child to a Button ("+className+") is not supported; use a ClickableComponent instead."),_component2.default.prototype.addChild.call(this,child,options)},Button.prototype.handleKeyPress=function(event){32===event.which||13===event.which||_ClickableComponent.prototype.handleKeyPress.call(this,event)},Button}(_clickableComponentJs2.default);_component2.default.registerComponent("Button",Button),exports.default=Button,module.exports=exports.default},{"./clickable-component.js":65,"./component":67,"./utils/events.js":135,"./utils/fn.js":136,"./utils/log.js":139,"global/document":1,"object.assign":45}],65:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _component=_dereq_("./component"),_component2=_interopRequireDefault(_component),_utilsDomJs=_dereq_("./utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsEventsJs=_dereq_("./utils/events.js"),Events=_interopRequireWildcard(_utilsEventsJs),_utilsFnJs=_dereq_("./utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsLogJs=_dereq_("./utils/log.js"),_utilsLogJs2=_interopRequireDefault(_utilsLogJs),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),_objectAssign=_dereq_("object.assign"),_objectAssign2=_interopRequireDefault(_objectAssign),ClickableComponent=function(_Component){function ClickableComponent(player,options){_classCallCheck(this,ClickableComponent),_Component.call(this,player,options),this.emitTapEvents(),this.on("tap",this.handleClick),this.on("click",this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur)}return _inherits(ClickableComponent,_Component),ClickableComponent.prototype.createEl=function(){var tag=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],props=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],attributes=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];props=_objectAssign2.default({className:this.buildCSSClass(),tabIndex:0},props),"button"===tag&&_utilsLogJs2.default.error("Creating a ClickableComponent with an HTML element of "+tag+" is not supported; use a Button instead."),attributes=_objectAssign2.default({role:"button","aria-live":"polite"},attributes);var el=_Component.prototype.createEl.call(this,tag,props,attributes);return this.createControlTextEl(el),el},ClickableComponent.prototype.createControlTextEl=function(el){return this.controlTextEl_=Dom.createEl("span",{className:"vjs-control-text"}),el&&el.appendChild(this.controlTextEl_),this.controlText(this.controlText_),this.controlTextEl_},ClickableComponent.prototype.controlText=function(text){return text?(this.controlText_=text,this.controlTextEl_.innerHTML=this.localize(this.controlText_),this):this.controlText_||"Need Text"},ClickableComponent.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+_Component.prototype.buildCSSClass.call(this)},ClickableComponent.prototype.addChild=function(child){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _Component.prototype.addChild.call(this,child,options)},ClickableComponent.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),this},ClickableComponent.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),this},ClickableComponent.prototype.handleClick=function(){},ClickableComponent.prototype.handleFocus=function(){Events.on(_globalDocument2.default,"keydown",Fn.bind(this,this.handleKeyPress))},ClickableComponent.prototype.handleKeyPress=function(event){32===event.which||13===event.which?(event.preventDefault(),this.handleClick(event)):_Component.prototype.handleKeyPress&&_Component.prototype.handleKeyPress.call(this,event)},ClickableComponent.prototype.handleBlur=function(){Events.off(_globalDocument2.default,"keydown",Fn.bind(this,this.handleKeyPress))},ClickableComponent}(_component2.default);_component2.default.registerComponent("ClickableComponent",ClickableComponent),exports.default=ClickableComponent,module.exports=exports.default},{"./component":67,"./utils/dom.js":134,"./utils/events.js":135,"./utils/fn.js":136,"./utils/log.js":139,"global/document":1,"object.assign":45}],66:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _button=_dereq_("./button"),_button2=_interopRequireDefault(_button),_component=_dereq_("./component"),_component2=_interopRequireDefault(_component),CloseButton=function(_Button){function CloseButton(player,options){_classCallCheck(this,CloseButton),_Button.call(this,player,options),this.controlText(options&&options.controlText||this.localize("Close"))}return _inherits(CloseButton,_Button),CloseButton.prototype.buildCSSClass=function(){return"vjs-close-button "+_Button.prototype.buildCSSClass.call(this)},CloseButton.prototype.handleClick=function(){this.trigger({type:"close",bubbles:!1})},CloseButton}(_button2.default);_component2.default.registerComponent("CloseButton",CloseButton),exports.default=CloseButton,module.exports=exports.default},{"./button":64,"./component":67}],67:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_utilsDomJs=_dereq_("./utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsFnJs=_dereq_("./utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsGuidJs=_dereq_("./utils/guid.js"),Guid=_interopRequireWildcard(_utilsGuidJs),_utilsEventsJs=_dereq_("./utils/events.js"),Events=_interopRequireWildcard(_utilsEventsJs),_utilsLogJs=_dereq_("./utils/log.js"),_utilsLogJs2=_interopRequireDefault(_utilsLogJs),_utilsToTitleCaseJs=_dereq_("./utils/to-title-case.js"),_utilsToTitleCaseJs2=_interopRequireDefault(_utilsToTitleCaseJs),_objectAssign=_dereq_("object.assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_utilsMergeOptionsJs=_dereq_("./utils/merge-options.js"),_utilsMergeOptionsJs2=_interopRequireDefault(_utilsMergeOptionsJs),Component=function(){function Component(player,options,ready){if(_classCallCheck(this,Component),!player&&this.play?this.player_=player=this:this.player_=player,this.options_=_utilsMergeOptionsJs2.default({},this.options_),options=this.options_=_utilsMergeOptionsJs2.default(this.options_,options),this.id_=options.id||options.el&&options.el.id,!this.id_){var id=player&&player.id&&player.id()||"no_player";this.id_=id+"_component_"+Guid.newGUID()}this.name_=options.name||null,options.el?this.el_=options.el:options.createEl!==!1&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},this.childNameIndex_={},options.initChildren!==!1&&this.initChildren(),this.ready(ready),options.reportTouchActivity!==!1&&this.enableTouchActivity()}return Component.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Dom.removeElData(this.el_),this.el_=null},Component.prototype.player=function(){return this.player_},Component.prototype.options=function(obj){return _utilsLogJs2.default.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),obj?(this.options_=_utilsMergeOptionsJs2.default(this.options_,obj),this.options_):this.options_},Component.prototype.el=function(){return this.el_},Component.prototype.createEl=function(tagName,properties,attributes){return Dom.createEl(tagName,properties,attributes)},Component.prototype.localize=function(string){var code=this.player_.language&&this.player_.language(),languages=this.player_.languages&&this.player_.languages();if(!code||!languages)return string;var language=languages[code];if(language&&language[string])return language[string];var primaryCode=code.split("-")[0],primaryLang=languages[primaryCode];return primaryLang&&primaryLang[string]?primaryLang[string]:string},Component.prototype.contentEl=function(){return this.contentEl_||this.el_},Component.prototype.id=function(){return this.id_},Component.prototype.name=function(){return this.name_},Component.prototype.children=function(){return this.children_},Component.prototype.getChildById=function(id){return this.childIndex_[id]},Component.prototype.getChild=function(name){return this.childNameIndex_[name]},Component.prototype.addChild=function(child){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],index=arguments.length<=2||void 0===arguments[2]?this.children_.length:arguments[2],component=void 0,componentName=void 0;if("string"==typeof child){componentName=child,options||(options={}),options===!0&&(_utilsLogJs2.default.warn("Initializing a child component with `true` is deprecated. Children should be defined in an array when possible, but if necessary use an object instead of `true`."),options={});var componentClassName=options.componentClass||_utilsToTitleCaseJs2.default(componentName);options.name=componentName;var ComponentClass=Component.getComponent(componentClassName);if(!ComponentClass)throw new Error("Component "+componentClassName+" does not exist");if("function"!=typeof ComponentClass)return null;component=new ComponentClass(this.player_||this,options)}else component=child;if(this.children_.splice(index,0,component),"function"==typeof component.id&&(this.childIndex_[component.id()]=component),componentName=componentName||component.name&&component.name(),componentName&&(this.childNameIndex_[componentName]=component),"function"==typeof component.el&&component.el()){var childNodes=this.contentEl().children,refNode=childNodes[index]||null;this.contentEl().insertBefore(component.el(),refNode)}return component},Component.prototype.removeChild=function(component){if("string"==typeof component&&(component=this.getChild(component)),component&&this.children_){for(var childFound=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===component){childFound=!0,this.children_.splice(i,1);break}if(childFound){this.childIndex_[component.id()]=null,this.childNameIndex_[component.name()]=null;var compEl=component.el();compEl&&compEl.parentNode===this.contentEl()&&this.contentEl().removeChild(component.el())}}},Component.prototype.initChildren=function(){var _this=this,children=this.options_.children;children&&!function(){var parentOptions=_this.options_,handleAdd=function(child){var name=child.name,opts=child.opts;if(void 0!==parentOptions[name]&&(opts=parentOptions[name]),opts!==!1){opts===!0&&(opts={}),opts.playerOptions=_this.options_.playerOptions;var newChild=_this.addChild(name,opts);newChild&&(_this[name]=newChild)}},workingChildren=void 0,Tech=Component.getComponent("Tech");workingChildren=Array.isArray(children)?children:Object.keys(children),workingChildren.concat(Object.keys(_this.options_).filter(function(child){return!workingChildren.some(function(wchild){return"string"==typeof wchild?child===wchild:child===wchild.name})})).map(function(child){var name=void 0,opts=void 0;return"string"==typeof child?(name=child,opts=children[name]||_this.options_[name]||{}):(name=child.name,opts=child),{name:name,opts:opts}}).filter(function(child){var c=Component.getComponent(child.opts.componentClass||_utilsToTitleCaseJs2.default(child.name));return c&&!Tech.isTech(c)}).forEach(handleAdd)}()},Component.prototype.buildCSSClass=function(){return""},Component.prototype.on=function(first,second,third){var _this2=this;return"string"==typeof first||Array.isArray(first)?Events.on(this.el_,first,Fn.bind(this,second)):!function(){var target=first,type=second,fn=Fn.bind(_this2,third),removeOnDispose=function(){return _this2.off(target,type,fn)};removeOnDispose.guid=fn.guid,_this2.on("dispose",removeOnDispose);var cleanRemover=function(){return _this2.off("dispose",removeOnDispose)};cleanRemover.guid=fn.guid,first.nodeName?(Events.on(target,type,fn),Events.on(target,"dispose",cleanRemover)):"function"==typeof first.on&&(target.on(type,fn),target.on("dispose",cleanRemover))}(),this},Component.prototype.off=function(first,second,third){if(!first||"string"==typeof first||Array.isArray(first))Events.off(this.el_,first,second);else{var target=first,type=second,fn=Fn.bind(this,third);this.off("dispose",fn),first.nodeName?(Events.off(target,type,fn),Events.off(target,"dispose",fn)):(target.off(type,fn),target.off("dispose",fn))}return this},Component.prototype.one=function(first,second,third){var _this3=this,_arguments=arguments;return"string"==typeof first||Array.isArray(first)?Events.one(this.el_,first,Fn.bind(this,second)):!function(){var target=first,type=second,fn=Fn.bind(_this3,third),newFunc=function newFunc(){_this3.off(target,type,newFunc),fn.apply(null,_arguments)};newFunc.guid=fn.guid,_this3.on(target,type,newFunc)}(),this},Component.prototype.trigger=function(event,hash){return Events.trigger(this.el_,event,hash),this},Component.prototype.ready=function(fn){var sync=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return fn&&(this.isReady_?sync?fn.call(this):this.setTimeout(fn,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(fn))),this},Component.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var readyQueue=this.readyQueue_;this.readyQueue_=[],readyQueue&&readyQueue.length>0&&readyQueue.forEach(function(fn){fn.call(this)},this),this.trigger("ready")},1)},Component.prototype.$=function(selector,context){return Dom.$(selector,context||this.contentEl())},Component.prototype.$$=function(selector,context){return Dom.$$(selector,context||this.contentEl())},Component.prototype.hasClass=function(classToCheck){return Dom.hasElClass(this.el_,classToCheck)},Component.prototype.addClass=function(classToAdd){return Dom.addElClass(this.el_,classToAdd),this},Component.prototype.removeClass=function(classToRemove){return Dom.removeElClass(this.el_,classToRemove),this},Component.prototype.toggleClass=function(classToToggle,predicate){return Dom.toggleElClass(this.el_,classToToggle,predicate),this},Component.prototype.show=function(){return this.removeClass("vjs-hidden"),this},Component.prototype.hide=function(){return this.addClass("vjs-hidden"),this},Component.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},Component.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},Component.prototype.width=function(num,skipListeners){return this.dimension("width",num,skipListeners)},Component.prototype.height=function(num,skipListeners){return this.dimension("height",num,skipListeners)},Component.prototype.dimensions=function(width,height){return this.width(width,!0).height(height)},Component.prototype.dimension=function(widthOrHeight,num,skipListeners){if(void 0!==num)return null!==num&&num===num||(num=0),(""+num).indexOf("%")!==-1||(""+num).indexOf("px")!==-1?this.el_.style[widthOrHeight]=num:"auto"===num?this.el_.style[widthOrHeight]="":this.el_.style[widthOrHeight]=num+"px",skipListeners||this.trigger("resize"),this;if(!this.el_)return 0;var val=this.el_.style[widthOrHeight],pxIndex=val.indexOf("px");return pxIndex!==-1?parseInt(val.slice(0,pxIndex),10):parseInt(this.el_["offset"+_utilsToTitleCaseJs2.default(widthOrHeight)],10)},Component.prototype.currentDimension=function(widthOrHeight){var computedWidthOrHeight=0;if("width"!==widthOrHeight&&"height"!==widthOrHeight)throw new Error("currentDimension only accepts width or height value");if("function"==typeof _globalWindow2.default.getComputedStyle){var computedStyle=_globalWindow2.default.getComputedStyle(this.el_);computedWidthOrHeight=computedStyle.getPropertyValue(widthOrHeight)||computedStyle[widthOrHeight]}else if(this.el_.currentStyle){var rule="offset"+_utilsToTitleCaseJs2.default(widthOrHeight);computedWidthOrHeight=this.el_[rule]}return computedWidthOrHeight=parseFloat(computedWidthOrHeight)},Component.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},Component.prototype.currentWidth=function(){return this.currentDimension("width")},Component.prototype.currentHeight=function(){return this.currentDimension("height")},Component.prototype.emitTapEvents=function(){var touchStart=0,firstTouch=null,tapMovementThreshold=10,touchTimeThreshold=200,couldBeTap=void 0;this.on("touchstart",function(event){1===event.touches.length&&(firstTouch=_objectAssign2.default({},event.touches[0]),touchStart=(new Date).getTime(),couldBeTap=!0)}),this.on("touchmove",function(event){if(event.touches.length>1)couldBeTap=!1;else if(firstTouch){var xdiff=event.touches[0].pageX-firstTouch.pageX,ydiff=event.touches[0].pageY-firstTouch.pageY,touchDistance=Math.sqrt(xdiff*xdiff+ydiff*ydiff);touchDistance>tapMovementThreshold&&(couldBeTap=!1)}});var noTap=function(){couldBeTap=!1};this.on("touchleave",noTap),this.on("touchcancel",noTap),this.on("touchend",function(event){if(firstTouch=null,couldBeTap===!0){var touchTime=(new Date).getTime()-touchStart;touchTime<touchTimeThreshold&&(event.preventDefault(),this.trigger("tap"))}})},Component.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var report=Fn.bind(this.player(),this.player().reportUserActivity),touchHolding=void 0;this.on("touchstart",function(){report(),this.clearInterval(touchHolding),touchHolding=this.setInterval(report,250)});var touchEnd=function(event){report(),this.clearInterval(touchHolding)};this.on("touchmove",report),this.on("touchend",touchEnd),this.on("touchcancel",touchEnd)}},Component.prototype.setTimeout=function(fn,timeout){fn=Fn.bind(this,fn);var timeoutId=_globalWindow2.default.setTimeout(fn,timeout),disposeFn=function(){this.clearTimeout(timeoutId)};return disposeFn.guid="vjs-timeout-"+timeoutId,this.on("dispose",disposeFn),timeoutId},Component.prototype.clearTimeout=function(timeoutId){_globalWindow2.default.clearTimeout(timeoutId);var disposeFn=function(){};return disposeFn.guid="vjs-timeout-"+timeoutId,this.off("dispose",disposeFn),timeoutId},Component.prototype.setInterval=function(fn,interval){fn=Fn.bind(this,fn);var intervalId=_globalWindow2.default.setInterval(fn,interval),disposeFn=function(){this.clearInterval(intervalId)};return disposeFn.guid="vjs-interval-"+intervalId,this.on("dispose",disposeFn),intervalId},Component.prototype.clearInterval=function(intervalId){_globalWindow2.default.clearInterval(intervalId);var disposeFn=function(){};return disposeFn.guid="vjs-interval-"+intervalId,this.off("dispose",disposeFn),intervalId},Component.registerComponent=function(name,comp){return Component.components_||(Component.components_={}),Component.components_[name]=comp,comp},Component.getComponent=function(name){return Component.components_&&Component.components_[name]?Component.components_[name]:_globalWindow2.default&&_globalWindow2.default.videojs&&_globalWindow2.default.videojs[name]?(_utilsLogJs2.default.warn("The "+name+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),_globalWindow2.default.videojs[name]):void 0},Component.extend=function(props){props=props||{},_utilsLogJs2.default.warn("Component.extend({}) has been deprecated, use videojs.extend(Component, {}) instead");var init=props.init||props.init||this.prototype.init||this.prototype.init||function(){},subObj=function(){init.apply(this,arguments)};subObj.prototype=Object.create(this.prototype),subObj.prototype.constructor=subObj,subObj.extend=Component.extend;for(var _name in props)props.hasOwnProperty(_name)&&(subObj.prototype[_name]=props[_name]);return subObj},Component}();Component.registerComponent("Component",Component),exports.default=Component,module.exports=exports.default},{"./utils/dom.js":134,"./utils/events.js":135,"./utils/fn.js":136,"./utils/guid.js":138,"./utils/log.js":139,"./utils/merge-options.js":140,"./utils/to-title-case.js":143,"global/window":2,"object.assign":45}],68:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_playToggleJs=_dereq_("./play-toggle.js"),_timeControlsCurrentTimeDisplayJs=(_interopRequireDefault(_playToggleJs),_dereq_("./time-controls/current-time-display.js")),_timeControlsDurationDisplayJs=(_interopRequireDefault(_timeControlsCurrentTimeDisplayJs),_dereq_("./time-controls/duration-display.js")),_timeControlsTimeDividerJs=(_interopRequireDefault(_timeControlsDurationDisplayJs),_dereq_("./time-controls/time-divider.js")),_timeControlsRemainingTimeDisplayJs=(_interopRequireDefault(_timeControlsTimeDividerJs),_dereq_("./time-controls/remaining-time-display.js")),_liveDisplayJs=(_interopRequireDefault(_timeControlsRemainingTimeDisplayJs),_dereq_("./live-display.js")),_progressControlProgressControlJs=(_interopRequireDefault(_liveDisplayJs),_dereq_("./progress-control/progress-control.js")),_fullscreenToggleJs=(_interopRequireDefault(_progressControlProgressControlJs),_dereq_("./fullscreen-toggle.js")),_volumeControlVolumeControlJs=(_interopRequireDefault(_fullscreenToggleJs),_dereq_("./volume-control/volume-control.js")),_volumeMenuButtonJs=(_interopRequireDefault(_volumeControlVolumeControlJs),_dereq_("./volume-menu-button.js")),_muteToggleJs=(_interopRequireDefault(_volumeMenuButtonJs),_dereq_("./mute-toggle.js")),_textTrackControlsChaptersButtonJs=(_interopRequireDefault(_muteToggleJs),_dereq_("./text-track-controls/chapters-button.js")),_textTrackControlsDescriptionsButtonJs=(_interopRequireDefault(_textTrackControlsChaptersButtonJs),_dereq_("./text-track-controls/descriptions-button.js")),_textTrackControlsSubtitlesButtonJs=(_interopRequireDefault(_textTrackControlsDescriptionsButtonJs),_dereq_("./text-track-controls/subtitles-button.js")),_textTrackControlsCaptionsButtonJs=(_interopRequireDefault(_textTrackControlsSubtitlesButtonJs),_dereq_("./text-track-controls/captions-button.js")),_playbackRateMenuPlaybackRateMenuButtonJs=(_interopRequireDefault(_textTrackControlsCaptionsButtonJs),_dereq_("./playback-rate-menu/playback-rate-menu-button.js")),_spacerControlsCustomControlSpacerJs=(_interopRequireDefault(_playbackRateMenuPlaybackRateMenuButtonJs),_dereq_("./spacer-controls/custom-control-spacer.js")),ControlBar=(_interopRequireDefault(_spacerControlsCustomControlSpacerJs),function(_Component){function ControlBar(){_classCallCheck(this,ControlBar),_Component.apply(this,arguments)}return _inherits(ControlBar,_Component),ControlBar.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},ControlBar}(_componentJs2.default));ControlBar.prototype.options_={loadEvent:"play",children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","fullscreenToggle"]},_componentJs2.default.registerComponent("ControlBar",ControlBar),exports.default=ControlBar,module.exports=exports.default},{"../component.js":67,"./fullscreen-toggle.js":69,"./live-display.js":70,"./mute-toggle.js":71,"./play-toggle.js":72,"./playback-rate-menu/playback-rate-menu-button.js":73,"./progress-control/progress-control.js":78,"./spacer-controls/custom-control-spacer.js":81,"./text-track-controls/captions-button.js":84,"./text-track-controls/chapters-button.js":85,"./text-track-controls/descriptions-button.js":87,"./text-track-controls/subtitles-button.js":89,"./time-controls/current-time-display.js":92,"./time-controls/duration-display.js":93,"./time-controls/remaining-time-display.js":94,"./time-controls/time-divider.js":95,"./volume-control/volume-control.js":97,"./volume-menu-button.js":99}],69:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _buttonJs=_dereq_("../button.js"),_buttonJs2=_interopRequireDefault(_buttonJs),_componentJs=_dereq_("../component.js"),_componentJs2=_interopRequireDefault(_componentJs),FullscreenToggle=function(_Button){function FullscreenToggle(){_classCallCheck(this,FullscreenToggle),_Button.apply(this,arguments)}return _inherits(FullscreenToggle,_Button),FullscreenToggle.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+_Button.prototype.buildCSSClass.call(this)},FullscreenToggle.prototype.handleClick=function(){this.player_.isFullscreen()?(this.player_.exitFullscreen(),this.controlText("Fullscreen")):(this.player_.requestFullscreen(),this.controlText("Non-Fullscreen"))},FullscreenToggle}(_buttonJs2.default);FullscreenToggle.prototype.controlText_="Fullscreen",_componentJs2.default.registerComponent("FullscreenToggle",FullscreenToggle),exports.default=FullscreenToggle,module.exports=exports.default},{"../button.js":64,"../component.js":67}],70:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _component=_dereq_("../component"),_component2=_interopRequireDefault(_component),_utilsDomJs=_dereq_("../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),LiveDisplay=function(_Component){function LiveDisplay(player,options){_classCallCheck(this,LiveDisplay),_Component.call(this,player,options),this.updateShowing(),this.on(this.player(),"durationchange",this.updateShowing)}return _inherits(LiveDisplay,_Component),LiveDisplay.prototype.createEl=function(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Dom.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),el.appendChild(this.contentEl_),el},LiveDisplay.prototype.updateShowing=function(){this.player().duration()===1/0?this.show():this.hide()},LiveDisplay}(_component2.default);_component2.default.registerComponent("LiveDisplay",LiveDisplay),exports.default=LiveDisplay,module.exports=exports.default},{"../component":67,"../utils/dom.js":134}],71:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _button=_dereq_("../button"),_button2=_interopRequireDefault(_button),_component=_dereq_("../component"),_component2=_interopRequireDefault(_component),_utilsDomJs=_dereq_("../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),MuteToggle=function(_Button){function MuteToggle(player,options){_classCallCheck(this,MuteToggle),_Button.call(this,player,options),this.on(player,"volumechange",this.update),player.tech_&&player.tech_.featuresVolumeControl===!1&&this.addClass("vjs-hidden"),this.on(player,"loadstart",function(){this.update(),player.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})}return _inherits(MuteToggle,_Button),MuteToggle.prototype.buildCSSClass=function(){return"vjs-mute-control "+_Button.prototype.buildCSSClass.call(this)},MuteToggle.prototype.handleClick=function(){this.player_.muted(!this.player_.muted())},MuteToggle.prototype.update=function(){var vol=this.player_.volume(),level=3;0===vol||this.player_.muted()?level=0:vol<.33?level=1:vol<.67&&(level=2);var toMute=this.player_.muted()?"Unmute":"Mute";this.controlText()!==toMute&&this.controlText(toMute);for(var i=0;i<4;i++)Dom.removeElClass(this.el_,"vjs-vol-"+i);Dom.addElClass(this.el_,"vjs-vol-"+level)},MuteToggle}(_button2.default);MuteToggle.prototype.controlText_="Mute",_component2.default.registerComponent("MuteToggle",MuteToggle),exports.default=MuteToggle,module.exports=exports.default},{"../button":64,"../component":67,"../utils/dom.js":134}],72:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _buttonJs=_dereq_("../button.js"),_buttonJs2=_interopRequireDefault(_buttonJs),_componentJs=_dereq_("../component.js"),_componentJs2=_interopRequireDefault(_componentJs),PlayToggle=function(_Button){function PlayToggle(player,options){_classCallCheck(this,PlayToggle),_Button.call(this,player,options),this.on(player,"play",this.handlePlay),this.on(player,"pause",this.handlePause)}return _inherits(PlayToggle,_Button),PlayToggle.prototype.buildCSSClass=function(){return"vjs-play-control "+_Button.prototype.buildCSSClass.call(this)},PlayToggle.prototype.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},PlayToggle.prototype.handlePlay=function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},PlayToggle.prototype.handlePause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},PlayToggle}(_buttonJs2.default);PlayToggle.prototype.controlText_="Play",_componentJs2.default.registerComponent("PlayToggle",PlayToggle),exports.default=PlayToggle,module.exports=exports.default},{"../button.js":64,"../component.js":67}],73:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _menuMenuButtonJs=_dereq_("../../menu/menu-button.js"),_menuMenuButtonJs2=_interopRequireDefault(_menuMenuButtonJs),_menuMenuJs=_dereq_("../../menu/menu.js"),_menuMenuJs2=_interopRequireDefault(_menuMenuJs),_playbackRateMenuItemJs=_dereq_("./playback-rate-menu-item.js"),_playbackRateMenuItemJs2=_interopRequireDefault(_playbackRateMenuItemJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsDomJs=_dereq_("../../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),PlaybackRateMenuButton=function(_MenuButton){function PlaybackRateMenuButton(player,options){_classCallCheck(this,PlaybackRateMenuButton),_MenuButton.call(this,player,options),this.updateVisibility(),this.updateLabel(),this.on(player,"loadstart",this.updateVisibility),this.on(player,"ratechange",this.updateLabel)}return _inherits(PlaybackRateMenuButton,_MenuButton),PlaybackRateMenuButton.prototype.createEl=function(){var el=_MenuButton.prototype.createEl.call(this);return this.labelEl_=Dom.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),el.appendChild(this.labelEl_),el},PlaybackRateMenuButton.prototype.buildCSSClass=function(){return"vjs-playback-rate "+_MenuButton.prototype.buildCSSClass.call(this)},PlaybackRateMenuButton.prototype.createMenu=function(){var menu=new _menuMenuJs2.default(this.player()),rates=this.playbackRates();if(rates)for(var i=rates.length-1;i>=0;i--)menu.addChild(new _playbackRateMenuItemJs2.default(this.player(),{rate:rates[i]+"x"}));return menu},PlaybackRateMenuButton.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},PlaybackRateMenuButton.prototype.handleClick=function(){for(var currentRate=this.player().playbackRate(),rates=this.playbackRates(),newRate=rates[0],i=0;i<rates.length;i++)if(rates[i]>currentRate){newRate=rates[i];break}this.player().playbackRate(newRate)},PlaybackRateMenuButton.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},PlaybackRateMenuButton.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},PlaybackRateMenuButton.prototype.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},PlaybackRateMenuButton.prototype.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},PlaybackRateMenuButton}(_menuMenuButtonJs2.default);PlaybackRateMenuButton.prototype.controlText_="Playback Rate",_componentJs2.default.registerComponent("PlaybackRateMenuButton",PlaybackRateMenuButton),exports.default=PlaybackRateMenuButton,module.exports=exports.default},{"../../component.js":67,"../../menu/menu-button.js":106,"../../menu/menu.js":108,"../../utils/dom.js":134,"./playback-rate-menu-item.js":74}],74:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _menuMenuItemJs=_dereq_("../../menu/menu-item.js"),_menuMenuItemJs2=_interopRequireDefault(_menuMenuItemJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),PlaybackRateMenuItem=function(_MenuItem){function PlaybackRateMenuItem(player,options){_classCallCheck(this,PlaybackRateMenuItem);var label=options.rate,rate=parseFloat(label,10);options.label=label,options.selected=1===rate,_MenuItem.call(this,player,options),this.label=label,this.rate=rate,this.on(player,"ratechange",this.update)}return _inherits(PlaybackRateMenuItem,_MenuItem),PlaybackRateMenuItem.prototype.handleClick=function(){_MenuItem.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},PlaybackRateMenuItem.prototype.update=function(){this.selected(this.player().playbackRate()===this.rate)},PlaybackRateMenuItem}(_menuMenuItemJs2.default);PlaybackRateMenuItem.prototype.contentElType="button",_componentJs2.default.registerComponent("PlaybackRateMenuItem",PlaybackRateMenuItem),exports.default=PlaybackRateMenuItem,module.exports=exports.default},{"../../component.js":67,"../../menu/menu-item.js":107}],75:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsDomJs=_dereq_("../../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),LoadProgressBar=function(_Component){function LoadProgressBar(player,options){_classCallCheck(this,LoadProgressBar),_Component.call(this,player,options),this.on(player,"progress",this.update)}return _inherits(LoadProgressBar,_Component),LoadProgressBar.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},LoadProgressBar.prototype.update=function(){var buffered=this.player_.buffered(),duration=this.player_.duration(),bufferedEnd=this.player_.bufferedEnd(),children=this.el_.children,percentify=function(time,end){var percent=time/end||0;return 100*(percent>=1?1:percent)+"%"};this.el_.style.width=percentify(bufferedEnd,duration);for(var i=0;i<buffered.length;i++){var start=buffered.start(i),end=buffered.end(i),part=children[i];part||(part=this.el_.appendChild(Dom.createEl())),part.style.left=percentify(start,bufferedEnd),part.style.width=percentify(end-start,bufferedEnd)}for(var i=children.length;i>buffered.length;i--)this.el_.removeChild(children[i-1])},LoadProgressBar}(_componentJs2.default);_componentJs2.default.registerComponent("LoadProgressBar",LoadProgressBar),exports.default=LoadProgressBar,module.exports=exports.default},{"../../component.js":67,"../../utils/dom.js":134}],76:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsDomJs=_dereq_("../../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsFnJs=_dereq_("../../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsFormatTimeJs=_dereq_("../../utils/format-time.js"),_utilsFormatTimeJs2=_interopRequireDefault(_utilsFormatTimeJs),_lodashCompatFunctionThrottle=_dereq_("lodash-compat/function/throttle"),_lodashCompatFunctionThrottle2=_interopRequireDefault(_lodashCompatFunctionThrottle),MouseTimeDisplay=function(_Component){function MouseTimeDisplay(player,options){var _this=this;_classCallCheck(this,MouseTimeDisplay),_Component.call(this,player,options),options.playerOptions&&options.playerOptions.controlBar&&options.playerOptions.controlBar.progressControl&&options.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=options.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&(this.tooltip=Dom.createEl("div",{className:"vjs-time-tooltip"}),this.el().appendChild(this.tooltip),this.addClass("vjs-keep-tooltips-inside")),this.update(0,0),player.on("ready",function(){_this.on(player.controlBar.progressControl.el(),"mousemove",_lodashCompatFunctionThrottle2.default(Fn.bind(_this,_this.handleMouseMove),25))})}return _inherits(MouseTimeDisplay,_Component),MouseTimeDisplay.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},MouseTimeDisplay.prototype.handleMouseMove=function(event){var duration=this.player_.duration(),newTime=this.calculateDistance(event)*duration,position=event.pageX-Dom.findElPosition(this.el().parentNode).left;this.update(newTime,position)},MouseTimeDisplay.prototype.update=function(newTime,position){var time=_utilsFormatTimeJs2.default(newTime,this.player_.duration());if(this.el().style.left=position+"px",this.el().setAttribute("data-current-time",time),this.keepTooltipsInside){var clampedPosition=this.clampPosition_(position),difference=position-clampedPosition+1,tooltipWidth=parseFloat(_globalWindow2.default.getComputedStyle(this.tooltip).width),tooltipWidthHalf=tooltipWidth/2;this.tooltip.innerHTML=time,this.tooltip.style.right="-"+(tooltipWidthHalf-difference)+"px"}},MouseTimeDisplay.prototype.calculateDistance=function(event){return Dom.getPointerPosition(this.el().parentNode,event).x},MouseTimeDisplay.prototype.clampPosition_=function(position){if(!this.keepTooltipsInside)return position;var playerWidth=parseFloat(_globalWindow2.default.getComputedStyle(this.player().el()).width),tooltipWidth=parseFloat(_globalWindow2.default.getComputedStyle(this.tooltip).width),tooltipWidthHalf=tooltipWidth/2,actualPosition=position;return position<tooltipWidthHalf?actualPosition=Math.ceil(tooltipWidthHalf):position>playerWidth-tooltipWidthHalf&&(actualPosition=Math.floor(playerWidth-tooltipWidthHalf)),actualPosition},MouseTimeDisplay}(_componentJs2.default);_componentJs2.default.registerComponent("MouseTimeDisplay",MouseTimeDisplay),exports.default=MouseTimeDisplay,module.exports=exports.default},{"../../component.js":67,"../../utils/dom.js":134,"../../utils/fn.js":136,"../../utils/format-time.js":137,"global/window":2,"lodash-compat/function/throttle":7}],77:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsFnJs=_dereq_("../../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsDomJs=_dereq_("../../utils/dom.js"),_utilsFormatTimeJs=(_interopRequireWildcard(_utilsDomJs),_dereq_("../../utils/format-time.js")),_utilsFormatTimeJs2=_interopRequireDefault(_utilsFormatTimeJs),PlayProgressBar=function(_Component){function PlayProgressBar(player,options){_classCallCheck(this,PlayProgressBar),_Component.call(this,player,options),this.updateDataAttr(),this.on(player,"timeupdate",this.updateDataAttr),player.ready(Fn.bind(this,this.updateDataAttr)),options.playerOptions&&options.playerOptions.controlBar&&options.playerOptions.controlBar.progressControl&&options.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=options.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&this.addClass("vjs-keep-tooltips-inside")}return _inherits(PlayProgressBar,_Component),PlayProgressBar.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},PlayProgressBar.prototype.updateDataAttr=function(){var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",_utilsFormatTimeJs2.default(time,this.player_.duration()))},PlayProgressBar}(_componentJs2.default);_componentJs2.default.registerComponent("PlayProgressBar",PlayProgressBar),exports.default=PlayProgressBar,module.exports=exports.default},{"../../component.js":67,"../../utils/dom.js":134,"../../utils/fn.js":136,"../../utils/format-time.js":137}],78:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_seekBarJs=_dereq_("./seek-bar.js"),_mouseTimeDisplayJs=(_interopRequireDefault(_seekBarJs),_dereq_("./mouse-time-display.js")),ProgressControl=(_interopRequireDefault(_mouseTimeDisplayJs),function(_Component){function ProgressControl(){_classCallCheck(this,ProgressControl),_Component.apply(this,arguments)}return _inherits(ProgressControl,_Component),ProgressControl.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},ProgressControl}(_componentJs2.default));ProgressControl.prototype.options_={children:["seekBar"]},_componentJs2.default.registerComponent("ProgressControl",ProgressControl),exports.default=ProgressControl,module.exports=exports.default},{"../../component.js":67,"./mouse-time-display.js":76,"./seek-bar.js":79}],79:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_sliderSliderJs=_dereq_("../../slider/slider.js"),_sliderSliderJs2=_interopRequireDefault(_sliderSliderJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_loadProgressBarJs=_dereq_("./load-progress-bar.js"),_playProgressBarJs=(_interopRequireDefault(_loadProgressBarJs),_dereq_("./play-progress-bar.js")),_tooltipProgressBarJs=(_interopRequireDefault(_playProgressBarJs),_dereq_("./tooltip-progress-bar.js")),_utilsFnJs=(_interopRequireDefault(_tooltipProgressBarJs),_dereq_("../../utils/fn.js")),Fn=_interopRequireWildcard(_utilsFnJs),_utilsFormatTimeJs=_dereq_("../../utils/format-time.js"),_utilsFormatTimeJs2=_interopRequireDefault(_utilsFormatTimeJs),_objectAssign=_dereq_("object.assign"),SeekBar=(_interopRequireDefault(_objectAssign),function(_Slider){function SeekBar(player,options){_classCallCheck(this,SeekBar),_Slider.call(this,player,options),this.on(player,"timeupdate",this.updateProgress),this.on(player,"ended",this.updateProgress),player.ready(Fn.bind(this,this.updateProgress)),options.playerOptions&&options.playerOptions.controlBar&&options.playerOptions.controlBar.progressControl&&options.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=options.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&(this.tooltipProgressBar=this.addChild("TooltipProgressBar"))}return _inherits(SeekBar,_Slider),SeekBar.prototype.createEl=function(){return _Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},SeekBar.prototype.updateProgress=function(){if(this.updateAriaAttributes(this.el_),this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var playerWidth=parseFloat(_globalWindow2.default.getComputedStyle(this.player().el()).width),tooltipWidth=parseFloat(_globalWindow2.default.getComputedStyle(this.tooltipProgressBar.tooltip).width),tooltipStyle=this.tooltipProgressBar.el().style;tooltipStyle.maxWidth=Math.floor(playerWidth-tooltipWidth/2)+"px",tooltipStyle.minWidth=Math.ceil(tooltipWidth/2)+"px",tooltipStyle.right="-"+tooltipWidth/2+"px"}},SeekBar.prototype.updateAriaAttributes=function(el){var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();el.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),el.setAttribute("aria-valuetext",_utilsFormatTimeJs2.default(time,this.player_.duration()))},SeekBar.prototype.getPercent=function(){var percent=this.player_.currentTime()/this.player_.duration();return percent>=1?1:percent},SeekBar.prototype.handleMouseDown=function(event){_Slider.prototype.handleMouseDown.call(this,event),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause()},SeekBar.prototype.handleMouseMove=function(event){var newTime=this.calculateDistance(event)*this.player_.duration();newTime===this.player_.duration()&&(newTime-=.1),this.player_.currentTime(newTime)},SeekBar.prototype.handleMouseUp=function(event){_Slider.prototype.handleMouseUp.call(this,event),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},SeekBar.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},SeekBar.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},SeekBar}(_sliderSliderJs2.default));SeekBar.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},SeekBar.prototype.playerEvent="timeupdate",_componentJs2.default.registerComponent("SeekBar",SeekBar),exports.default=SeekBar,module.exports=exports.default},{"../../component.js":67,"../../slider/slider.js":116,"../../utils/fn.js":136,"../../utils/format-time.js":137,"./load-progress-bar.js":75,"./play-progress-bar.js":77,"./tooltip-progress-bar.js":80,"global/window":2,"object.assign":45}],80:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsFnJs=_dereq_("../../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsDomJs=_dereq_("../../utils/dom.js"),_utilsFormatTimeJs=(_interopRequireWildcard(_utilsDomJs),_dereq_("../../utils/format-time.js")),_utilsFormatTimeJs2=_interopRequireDefault(_utilsFormatTimeJs),TooltipProgressBar=function(_Component){function TooltipProgressBar(player,options){_classCallCheck(this,TooltipProgressBar),_Component.call(this,player,options),this.updateDataAttr(),this.on(player,"timeupdate",this.updateDataAttr),player.ready(Fn.bind(this,this.updateDataAttr))}return _inherits(TooltipProgressBar,_Component),TooltipProgressBar.prototype.createEl=function(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});return this.tooltip=el.querySelector(".vjs-time-tooltip"),el},TooltipProgressBar.prototype.updateDataAttr=function(){var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),formattedTime=_utilsFormatTimeJs2.default(time,this.player_.duration());this.el_.setAttribute("data-current-time",formattedTime),this.tooltip.innerHTML=formattedTime},TooltipProgressBar}(_componentJs2.default);_componentJs2.default.registerComponent("TooltipProgressBar",TooltipProgressBar),exports.default=TooltipProgressBar,module.exports=exports.default},{"../../component.js":67,"../../utils/dom.js":134,"../../utils/fn.js":136,"../../utils/format-time.js":137}],81:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _spacerJs=_dereq_("./spacer.js"),_spacerJs2=_interopRequireDefault(_spacerJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),CustomControlSpacer=function(_Spacer){function CustomControlSpacer(){_classCallCheck(this,CustomControlSpacer),_Spacer.apply(this,arguments)}return _inherits(CustomControlSpacer,_Spacer),CustomControlSpacer.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+_Spacer.prototype.buildCSSClass.call(this)},CustomControlSpacer.prototype.createEl=function(){var el=_Spacer.prototype.createEl.call(this,{className:this.buildCSSClass()});return el.innerHTML="&nbsp;",el},CustomControlSpacer}(_spacerJs2.default);_componentJs2.default.registerComponent("CustomControlSpacer",CustomControlSpacer),exports.default=CustomControlSpacer,module.exports=exports.default},{"../../component.js":67,"./spacer.js":82}],82:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),Spacer=function(_Component){function Spacer(){_classCallCheck(this,Spacer),_Component.apply(this,arguments)}return _inherits(Spacer,_Component),Spacer.prototype.buildCSSClass=function(){return"vjs-spacer "+_Component.prototype.buildCSSClass.call(this)},Spacer.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},Spacer}(_componentJs2.default);_componentJs2.default.registerComponent("Spacer",Spacer),exports.default=Spacer,module.exports=exports.default},{"../../component.js":67}],83:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _textTrackMenuItemJs=_dereq_("./text-track-menu-item.js"),_textTrackMenuItemJs2=_interopRequireDefault(_textTrackMenuItemJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),CaptionSettingsMenuItem=function(_TextTrackMenuItem){function CaptionSettingsMenuItem(player,options){_classCallCheck(this,CaptionSettingsMenuItem),options.track={kind:options.kind,player:player,label:options.kind+" settings",selectable:!1,default:!1,mode:"disabled"},options.selectable=!1,_TextTrackMenuItem.call(this,player,options),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+options.kind+" settings dialog")}return _inherits(CaptionSettingsMenuItem,_TextTrackMenuItem),CaptionSettingsMenuItem.prototype.handleClick=function(){this.player().getChild("textTrackSettings").show(),this.player().getChild("textTrackSettings").el_.focus()},CaptionSettingsMenuItem}(_textTrackMenuItemJs2.default);_componentJs2.default.registerComponent("CaptionSettingsMenuItem",CaptionSettingsMenuItem),exports.default=CaptionSettingsMenuItem,module.exports=exports.default},{"../../component.js":67,"./text-track-menu-item.js":91}],84:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _textTrackButtonJs=_dereq_("./text-track-button.js"),_textTrackButtonJs2=_interopRequireDefault(_textTrackButtonJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_captionSettingsMenuItemJs=_dereq_("./caption-settings-menu-item.js"),_captionSettingsMenuItemJs2=_interopRequireDefault(_captionSettingsMenuItemJs),CaptionsButton=function(_TextTrackButton){function CaptionsButton(player,options,ready){_classCallCheck(this,CaptionsButton),_TextTrackButton.call(this,player,options,ready),this.el_.setAttribute("aria-label","Captions Menu")}return _inherits(CaptionsButton,_TextTrackButton),CaptionsButton.prototype.buildCSSClass=function(){return"vjs-captions-button "+_TextTrackButton.prototype.buildCSSClass.call(this)},CaptionsButton.prototype.update=function(){var threshold=2;_TextTrackButton.prototype.update.call(this),this.player().tech_&&this.player().tech_.featuresNativeTextTracks&&(threshold=1),this.items&&this.items.length>threshold?this.show():this.hide()},CaptionsButton.prototype.createItems=function(){var items=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||items.push(new _captionSettingsMenuItemJs2.default(this.player_,{kind:this.kind_})),_TextTrackButton.prototype.createItems.call(this,items)},CaptionsButton}(_textTrackButtonJs2.default);CaptionsButton.prototype.kind_="captions",CaptionsButton.prototype.controlText_="Captions",_componentJs2.default.registerComponent("CaptionsButton",CaptionsButton),exports.default=CaptionsButton,module.exports=exports.default},{"../../component.js":67,"./caption-settings-menu-item.js":83,"./text-track-button.js":90}],85:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _textTrackButtonJs=_dereq_("./text-track-button.js"),_textTrackButtonJs2=_interopRequireDefault(_textTrackButtonJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_textTrackMenuItemJs=_dereq_("./text-track-menu-item.js"),_textTrackMenuItemJs2=_interopRequireDefault(_textTrackMenuItemJs),_chaptersTrackMenuItemJs=_dereq_("./chapters-track-menu-item.js"),_chaptersTrackMenuItemJs2=_interopRequireDefault(_chaptersTrackMenuItemJs),_menuMenuJs=_dereq_("../../menu/menu.js"),_menuMenuJs2=_interopRequireDefault(_menuMenuJs),_utilsDomJs=_dereq_("../../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsFnJs=_dereq_("../../utils/fn.js"),_utilsToTitleCaseJs=(_interopRequireWildcard(_utilsFnJs),_dereq_("../../utils/to-title-case.js")),_utilsToTitleCaseJs2=_interopRequireDefault(_utilsToTitleCaseJs),_globalWindow=_dereq_("global/window"),ChaptersButton=(_interopRequireDefault(_globalWindow),function(_TextTrackButton){function ChaptersButton(player,options,ready){_classCallCheck(this,ChaptersButton),_TextTrackButton.call(this,player,options,ready),this.el_.setAttribute("aria-label","Chapters Menu")}return _inherits(ChaptersButton,_TextTrackButton),ChaptersButton.prototype.buildCSSClass=function(){return"vjs-chapters-button "+_TextTrackButton.prototype.buildCSSClass.call(this)},ChaptersButton.prototype.createItems=function(){var items=[],tracks=this.player_.textTracks();if(!tracks)return items;for(var i=0;i<tracks.length;i++){var track=tracks[i];track.kind===this.kind_&&items.push(new _textTrackMenuItemJs2.default(this.player_,{track:track}))}return items},ChaptersButton.prototype.createMenu=function(){for(var _this=this,tracks=this.player_.textTracks()||[],chaptersTrack=void 0,items=this.items=[],i=0,_length=tracks.length;i<_length;i++){var track=tracks[i];if(track.kind===this.kind_){chaptersTrack=track;break}}var menu=this.menu;if(void 0===menu){menu=new _menuMenuJs2.default(this.player_);var title=Dom.createEl("li",{className:"vjs-menu-title",innerHTML:_utilsToTitleCaseJs2.default(this.kind_),tabIndex:-1});menu.children_.unshift(title),Dom.insertElFirst(title,menu.contentEl())}if(chaptersTrack&&null==chaptersTrack.cues){chaptersTrack.mode="hidden";var remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(chaptersTrack);remoteTextTrackEl&&remoteTextTrackEl.addEventListener("load",function(event){return _this.update()})}if(chaptersTrack&&chaptersTrack.cues&&chaptersTrack.cues.length>0){for(var cues=chaptersTrack.cues,cue=void 0,i=0,l=cues.length;i<l;i++){cue=cues[i];var mi=new _chaptersTrackMenuItemJs2.default(this.player_,{track:chaptersTrack,cue:cue});items.push(mi),menu.addChild(mi)}this.addChild(menu)}return this.items.length>0&&this.show(),menu},ChaptersButton}(_textTrackButtonJs2.default));ChaptersButton.prototype.kind_="chapters",ChaptersButton.prototype.controlText_="Chapters",_componentJs2.default.registerComponent("ChaptersButton",ChaptersButton),exports.default=ChaptersButton,module.exports=exports.default},{"../../component.js":67,"../../menu/menu.js":108,"../../utils/dom.js":134,"../../utils/fn.js":136,"../../utils/to-title-case.js":143,"./chapters-track-menu-item.js":86,"./text-track-button.js":90,"./text-track-menu-item.js":91,"global/window":2}],86:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _menuMenuItemJs=_dereq_("../../menu/menu-item.js"),_menuMenuItemJs2=_interopRequireDefault(_menuMenuItemJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsFnJs=_dereq_("../../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),ChaptersTrackMenuItem=function(_MenuItem){function ChaptersTrackMenuItem(player,options){_classCallCheck(this,ChaptersTrackMenuItem);var track=options.track,cue=options.cue,currentTime=player.currentTime();options.label=cue.text,options.selected=cue.startTime<=currentTime&&currentTime<cue.endTime,_MenuItem.call(this,player,options),this.track=track,this.cue=cue,track.addEventListener("cuechange",Fn.bind(this,this.update))}return _inherits(ChaptersTrackMenuItem,_MenuItem),ChaptersTrackMenuItem.prototype.handleClick=function(){_MenuItem.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},ChaptersTrackMenuItem.prototype.update=function(){var cue=this.cue,currentTime=this.player_.currentTime();this.selected(cue.startTime<=currentTime&&currentTime<cue.endTime)},ChaptersTrackMenuItem}(_menuMenuItemJs2.default);_componentJs2.default.registerComponent("ChaptersTrackMenuItem",ChaptersTrackMenuItem),exports.default=ChaptersTrackMenuItem,module.exports=exports.default},{"../../component.js":67,"../../menu/menu-item.js":107,"../../utils/fn.js":136}],87:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _textTrackButtonJs=_dereq_("./text-track-button.js"),_textTrackButtonJs2=_interopRequireDefault(_textTrackButtonJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsFnJs=_dereq_("../../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),DescriptionsButton=function(_TextTrackButton){function DescriptionsButton(player,options,ready){var _this=this;_classCallCheck(this,DescriptionsButton),_TextTrackButton.call(this,player,options,ready),this.el_.setAttribute("aria-label","Descriptions Menu");var tracks=player.textTracks();tracks&&!function(){var changeHandler=Fn.bind(_this,_this.handleTracksChange);tracks.addEventListener("change",changeHandler),_this.on("dispose",function(){tracks.removeEventListener("change",changeHandler)})}()}return _inherits(DescriptionsButton,_TextTrackButton),DescriptionsButton.prototype.handleTracksChange=function(event){for(var tracks=this.player().textTracks(),disabled=!1,i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(track.kind!==this.kind_&&"showing"===track.mode){disabled=!0;break}}disabled?this.disable():this.enable()},DescriptionsButton.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+_TextTrackButton.prototype.buildCSSClass.call(this)},DescriptionsButton}(_textTrackButtonJs2.default);DescriptionsButton.prototype.kind_="descriptions",DescriptionsButton.prototype.controlText_="Descriptions",_componentJs2.default.registerComponent("DescriptionsButton",DescriptionsButton),exports.default=DescriptionsButton,module.exports=exports.default},{"../../component.js":67,"../../utils/fn.js":136,"./text-track-button.js":90}],88:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _textTrackMenuItemJs=_dereq_("./text-track-menu-item.js"),_textTrackMenuItemJs2=_interopRequireDefault(_textTrackMenuItemJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),OffTextTrackMenuItem=function(_TextTrackMenuItem){function OffTextTrackMenuItem(player,options){_classCallCheck(this,OffTextTrackMenuItem),options.track={kind:options.kind,player:player,label:options.kind+" off",default:!1,mode:"disabled"},options.selectable=!0,_TextTrackMenuItem.call(this,player,options),this.selected(!0)}return _inherits(OffTextTrackMenuItem,_TextTrackMenuItem),OffTextTrackMenuItem.prototype.handleTracksChange=function(event){for(var tracks=this.player().textTracks(),selected=!0,i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(track.kind===this.track.kind&&"showing"===track.mode){selected=!1;break}}this.selected(selected)},OffTextTrackMenuItem}(_textTrackMenuItemJs2.default);_componentJs2.default.registerComponent("OffTextTrackMenuItem",OffTextTrackMenuItem),exports.default=OffTextTrackMenuItem,module.exports=exports.default},{"../../component.js":67,"./text-track-menu-item.js":91}],89:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _textTrackButtonJs=_dereq_("./text-track-button.js"),_textTrackButtonJs2=_interopRequireDefault(_textTrackButtonJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),SubtitlesButton=function(_TextTrackButton){function SubtitlesButton(player,options,ready){_classCallCheck(this,SubtitlesButton),_TextTrackButton.call(this,player,options,ready),this.el_.setAttribute("aria-label","Subtitles Menu")}return _inherits(SubtitlesButton,_TextTrackButton),SubtitlesButton.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+_TextTrackButton.prototype.buildCSSClass.call(this)},SubtitlesButton}(_textTrackButtonJs2.default);SubtitlesButton.prototype.kind_="subtitles",SubtitlesButton.prototype.controlText_="Subtitles",_componentJs2.default.registerComponent("SubtitlesButton",SubtitlesButton),exports.default=SubtitlesButton,module.exports=exports.default},{"../../component.js":67,"./text-track-button.js":90}],90:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _menuMenuButtonJs=_dereq_("../../menu/menu-button.js"),_menuMenuButtonJs2=_interopRequireDefault(_menuMenuButtonJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsFnJs=_dereq_("../../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_textTrackMenuItemJs=_dereq_("./text-track-menu-item.js"),_textTrackMenuItemJs2=_interopRequireDefault(_textTrackMenuItemJs),_offTextTrackMenuItemJs=_dereq_("./off-text-track-menu-item.js"),_offTextTrackMenuItemJs2=_interopRequireDefault(_offTextTrackMenuItemJs),TextTrackButton=function(_MenuButton){function TextTrackButton(player,options){_classCallCheck(this,TextTrackButton),_MenuButton.call(this,player,options);var tracks=this.player_.textTracks();if(this.items.length<=1&&this.hide(),tracks){var updateHandler=Fn.bind(this,this.update);tracks.addEventListener("removetrack",updateHandler),tracks.addEventListener("addtrack",updateHandler),this.player_.on("dispose",function(){tracks.removeEventListener("removetrack",updateHandler),tracks.removeEventListener("addtrack",updateHandler)})}}return _inherits(TextTrackButton,_MenuButton),TextTrackButton.prototype.createItems=function(){var items=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];items.push(new _offTextTrackMenuItemJs2.default(this.player_,{kind:this.kind_}));var tracks=this.player_.textTracks();if(!tracks)return items;for(var i=0;i<tracks.length;i++){var track=tracks[i];track.kind===this.kind_&&items.push(new _textTrackMenuItemJs2.default(this.player_,{selectable:!0,track:track}))}return items},TextTrackButton}(_menuMenuButtonJs2.default);_componentJs2.default.registerComponent("TextTrackButton",TextTrackButton),exports.default=TextTrackButton,module.exports=exports.default},{"../../component.js":67,"../../menu/menu-button.js":106,"../../utils/fn.js":136,"./off-text-track-menu-item.js":88,"./text-track-menu-item.js":91}],91:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _menuMenuItemJs=_dereq_("../../menu/menu-item.js"),_menuMenuItemJs2=_interopRequireDefault(_menuMenuItemJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsFnJs=_dereq_("../../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),TextTrackMenuItem=function(_MenuItem){function TextTrackMenuItem(player,options){var _this=this;_classCallCheck(this,TextTrackMenuItem);var track=options.track,tracks=player.textTracks();options.label=track.label||track.language||"Unknown",options.selected=track.default||"showing"===track.mode,_MenuItem.call(this,player,options),this.track=track,tracks&&!function(){var changeHandler=Fn.bind(_this,_this.handleTracksChange);tracks.addEventListener("change",changeHandler),_this.on("dispose",function(){tracks.removeEventListener("change",changeHandler)})}(),tracks&&void 0===tracks.onchange&&!function(){var event=void 0;_this.on(["tap","click"],function(){if("object"!=typeof _globalWindow2.default.Event)try{event=new _globalWindow2.default.Event("change")}catch(err){}event||(event=_globalDocument2.default.createEvent("Event"),event.initEvent("change",!0,!0)),tracks.dispatchEvent(event)})}()}return _inherits(TextTrackMenuItem,_MenuItem),TextTrackMenuItem.prototype.handleClick=function(event){var kind=this.track.kind,tracks=this.player_.textTracks();if(_MenuItem.prototype.handleClick.call(this,event),tracks)for(var i=0;i<tracks.length;i++){var track=tracks[i];track.kind===kind&&(track===this.track?track.mode="showing":track.mode="disabled")}},TextTrackMenuItem.prototype.handleTracksChange=function(event){this.selected("showing"===this.track.mode)},TextTrackMenuItem}(_menuMenuItemJs2.default);_componentJs2.default.registerComponent("TextTrackMenuItem",TextTrackMenuItem),exports.default=TextTrackMenuItem,module.exports=exports.default},{"../../component.js":67,"../../menu/menu-item.js":107,"../../utils/fn.js":136,"global/document":1,"global/window":2}],92:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsDomJs=_dereq_("../../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsFormatTimeJs=_dereq_("../../utils/format-time.js"),_utilsFormatTimeJs2=_interopRequireDefault(_utilsFormatTimeJs),CurrentTimeDisplay=function(_Component){function CurrentTimeDisplay(player,options){_classCallCheck(this,CurrentTimeDisplay),_Component.call(this,player,options),this.on(player,"timeupdate",this.updateContent)}return _inherits(CurrentTimeDisplay,_Component),CurrentTimeDisplay.prototype.createEl=function(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=Dom.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00'},{"aria-live":"off"}),el.appendChild(this.contentEl_),el},CurrentTimeDisplay.prototype.updateContent=function(){var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),localizedText=this.localize("Current Time"),formattedTime=_utilsFormatTimeJs2.default(time,this.player_.duration());formattedTime!==this.formattedTime_&&(this.formattedTime_=formattedTime,this.contentEl_.innerHTML='<span class="vjs-control-text">'+localizedText+"</span> "+formattedTime)},CurrentTimeDisplay}(_componentJs2.default);_componentJs2.default.registerComponent("CurrentTimeDisplay",CurrentTimeDisplay),exports.default=CurrentTimeDisplay,module.exports=exports.default},{"../../component.js":67,"../../utils/dom.js":134,"../../utils/format-time.js":137}],93:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsDomJs=_dereq_("../../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsFormatTimeJs=_dereq_("../../utils/format-time.js"),_utilsFormatTimeJs2=_interopRequireDefault(_utilsFormatTimeJs),DurationDisplay=function(_Component){function DurationDisplay(player,options){_classCallCheck(this,DurationDisplay),_Component.call(this,player,options),this.on(player,"timeupdate",this.updateContent),this.on(player,"loadedmetadata",this.updateContent)}return _inherits(DurationDisplay,_Component),DurationDisplay.prototype.createEl=function(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=Dom.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),el.appendChild(this.contentEl_),el},DurationDisplay.prototype.updateContent=function(){var duration=this.player_.duration();if(duration&&this.duration_!==duration){this.duration_=duration;var localizedText=this.localize("Duration Time"),formattedTime=_utilsFormatTimeJs2.default(duration);this.contentEl_.innerHTML='<span class="vjs-control-text">'+localizedText+"</span> "+formattedTime}},DurationDisplay}(_componentJs2.default);_componentJs2.default.registerComponent("DurationDisplay",DurationDisplay),exports.default=DurationDisplay,module.exports=exports.default},{"../../component.js":67,"../../utils/dom.js":134,"../../utils/format-time.js":137}],94:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsDomJs=_dereq_("../../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsFormatTimeJs=_dereq_("../../utils/format-time.js"),_utilsFormatTimeJs2=_interopRequireDefault(_utilsFormatTimeJs),RemainingTimeDisplay=function(_Component){function RemainingTimeDisplay(player,options){_classCallCheck(this,RemainingTimeDisplay),_Component.call(this,player,options),this.on(player,"timeupdate",this.updateContent)}return _inherits(RemainingTimeDisplay,_Component),RemainingTimeDisplay.prototype.createEl=function(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=Dom.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"}),el.appendChild(this.contentEl_),el},RemainingTimeDisplay.prototype.updateContent=function(){if(this.player_.duration()){var localizedText=this.localize("Remaining Time"),formattedTime=_utilsFormatTimeJs2.default(this.player_.remainingTime());formattedTime!==this.formattedTime_&&(this.formattedTime_=formattedTime,this.contentEl_.innerHTML='<span class="vjs-control-text">'+localizedText+"</span> -"+formattedTime)}},RemainingTimeDisplay}(_componentJs2.default);_componentJs2.default.registerComponent("RemainingTimeDisplay",RemainingTimeDisplay),exports.default=RemainingTimeDisplay,module.exports=exports.default},{"../../component.js":67,"../../utils/dom.js":134,"../../utils/format-time.js":137}],95:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),TimeDivider=function(_Component){function TimeDivider(){_classCallCheck(this,TimeDivider),_Component.apply(this,arguments)}return _inherits(TimeDivider,_Component),TimeDivider.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},TimeDivider}(_componentJs2.default);_componentJs2.default.registerComponent("TimeDivider",TimeDivider),exports.default=TimeDivider,module.exports=exports.default},{"../../component.js":67}],96:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _sliderSliderJs=_dereq_("../../slider/slider.js"),_sliderSliderJs2=_interopRequireDefault(_sliderSliderJs),_componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsFnJs=_dereq_("../../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_volumeLevelJs=_dereq_("./volume-level.js"),VolumeBar=(_interopRequireDefault(_volumeLevelJs),function(_Slider){function VolumeBar(player,options){_classCallCheck(this,VolumeBar),_Slider.call(this,player,options),this.on(player,"volumechange",this.updateARIAAttributes),player.ready(Fn.bind(this,this.updateARIAAttributes))}return _inherits(VolumeBar,_Slider),VolumeBar.prototype.createEl=function(){return _Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})},VolumeBar.prototype.handleMouseMove=function(event){this.checkMuted(),this.player_.volume(this.calculateDistance(event))},VolumeBar.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},VolumeBar.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},VolumeBar.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},VolumeBar.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},VolumeBar.prototype.updateARIAAttributes=function(){var volume=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",volume),this.el_.setAttribute("aria-valuetext",volume+"%")},VolumeBar}(_sliderSliderJs2.default));VolumeBar.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},VolumeBar.prototype.playerEvent="volumechange",_componentJs2.default.registerComponent("VolumeBar",VolumeBar),exports.default=VolumeBar,module.exports=exports.default},{"../../component.js":67,"../../slider/slider.js":116,"../../utils/fn.js":136,"./volume-level.js":98}],97:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_volumeBarJs=_dereq_("./volume-bar.js"),VolumeControl=(_interopRequireDefault(_volumeBarJs),function(_Component){function VolumeControl(player,options){_classCallCheck(this,VolumeControl),_Component.call(this,player,options),player.tech_&&player.tech_.featuresVolumeControl===!1&&this.addClass("vjs-hidden"),this.on(player,"loadstart",function(){player.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})}return _inherits(VolumeControl,_Component),VolumeControl.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},VolumeControl}(_componentJs2.default));VolumeControl.prototype.options_={children:["volumeBar"]},_componentJs2.default.registerComponent("VolumeControl",VolumeControl),exports.default=VolumeControl,module.exports=exports.default},{"../../component.js":67,"./volume-bar.js":96}],98:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../../component.js"),_componentJs2=_interopRequireDefault(_componentJs),VolumeLevel=function(_Component){function VolumeLevel(){_classCallCheck(this,VolumeLevel),_Component.apply(this,arguments)}return _inherits(VolumeLevel,_Component),VolumeLevel.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},VolumeLevel}(_componentJs2.default);_componentJs2.default.registerComponent("VolumeLevel",VolumeLevel),exports.default=VolumeLevel,module.exports=exports.default},{"../../component.js":67}],99:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _utilsFnJs=_dereq_("../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_componentJs=_dereq_("../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_popupPopupJs=_dereq_("../popup/popup.js"),_popupPopupJs2=_interopRequireDefault(_popupPopupJs),_popupPopupButtonJs=_dereq_("../popup/popup-button.js"),_popupPopupButtonJs2=_interopRequireDefault(_popupPopupButtonJs),_muteToggleJs=_dereq_("./mute-toggle.js"),_muteToggleJs2=_interopRequireDefault(_muteToggleJs),_volumeControlVolumeBarJs=_dereq_("./volume-control/volume-bar.js"),_volumeControlVolumeBarJs2=_interopRequireDefault(_volumeControlVolumeBarJs),VolumeMenuButton=function(_PopupButton){function VolumeMenuButton(player){function updateVisibility(){player.tech_&&player.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,VolumeMenuButton),void 0===options.inline&&(options.inline=!0),void 0===options.vertical&&(options.inline?options.vertical=!1:options.vertical=!0),options.volumeBar=options.volumeBar||{},options.volumeBar.vertical=!!options.vertical,_PopupButton.call(this,player,options),this.on(player,"volumechange",this.volumeUpdate),this.on(player,"loadstart",this.volumeUpdate),updateVisibility.call(this),this.on(player,"loadstart",updateVisibility),this.on(this.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),this.on(this.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),this.on(this.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),this.on(this.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")})}return _inherits(VolumeMenuButton,_PopupButton),VolumeMenuButton.prototype.buildCSSClass=function(){var orientationClass="";return orientationClass=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal","vjs-volume-menu-button "+_PopupButton.prototype.buildCSSClass.call(this)+" "+orientationClass},VolumeMenuButton.prototype.createPopup=function(){var popup=new _popupPopupJs2.default(this.player_,{contentElType:"div"}),vb=new _volumeControlVolumeBarJs2.default(this.player_,this.options_.volumeBar);return popup.addChild(vb),this.menuContent=popup,this.volumeBar=vb,this.attachVolumeBarEvents(),popup},VolumeMenuButton.prototype.handleClick=function(){_muteToggleJs2.default.prototype.handleClick.call(this),_PopupButton.prototype.handleClick.call(this)},VolumeMenuButton.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],Fn.bind(this,this.handleMouseDown))},VolumeMenuButton.prototype.handleMouseDown=function(event){this.on(["mousemove","touchmove"],Fn.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},VolumeMenuButton.prototype.handleMouseUp=function(event){this.off(["mousemove","touchmove"],Fn.bind(this.volumeBar,this.volumeBar.handleMouseMove))},VolumeMenuButton}(_popupPopupButtonJs2.default);VolumeMenuButton.prototype.volumeUpdate=_muteToggleJs2.default.prototype.update,VolumeMenuButton.prototype.controlText_="Mute",_componentJs2.default.registerComponent("VolumeMenuButton",VolumeMenuButton),exports.default=VolumeMenuButton,module.exports=exports.default},{"../component.js":67,"../popup/popup-button.js":112,"../popup/popup.js":113,"../utils/fn.js":136,"./mute-toggle.js":71,"./volume-control/volume-bar.js":96}],100:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _component=_dereq_("./component"),_component2=_interopRequireDefault(_component),_modalDialog=_dereq_("./modal-dialog"),_modalDialog2=_interopRequireDefault(_modalDialog),_utilsDom=_dereq_("./utils/dom"),_utilsMergeOptions=(_interopRequireWildcard(_utilsDom),_dereq_("./utils/merge-options")),_utilsMergeOptions2=_interopRequireDefault(_utilsMergeOptions),ErrorDisplay=function(_ModalDialog){function ErrorDisplay(player,options){_classCallCheck(this,ErrorDisplay),_ModalDialog.call(this,player,options),this.on(player,"error",this.open)}return _inherits(ErrorDisplay,_ModalDialog),ErrorDisplay.prototype.buildCSSClass=function(){return"vjs-error-display "+_ModalDialog.prototype.buildCSSClass.call(this)},ErrorDisplay.prototype.content=function(){var error=this.player().error();return error?this.localize(error.message):""},ErrorDisplay}(_modalDialog2.default);ErrorDisplay.prototype.options_=_utilsMergeOptions2.default(_modalDialog2.default.prototype.options_,{fillAlways:!0,temporary:!1,uncloseable:!0}),_component2.default.registerComponent("ErrorDisplay",ErrorDisplay),exports.default=ErrorDisplay,module.exports=exports.default},{"./component":67,"./modal-dialog":109,"./utils/dom":134,"./utils/merge-options":140}],101:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}exports.__esModule=!0;var _utilsEventsJs=_dereq_("./utils/events.js"),Events=_interopRequireWildcard(_utilsEventsJs),EventTarget=function(){};EventTarget.prototype.allowedEvents_={},EventTarget.prototype.on=function(type,fn){var ael=this.addEventListener;this.addEventListener=Function.prototype,Events.on(this,type,fn),this.addEventListener=ael},EventTarget.prototype.addEventListener=EventTarget.prototype.on,EventTarget.prototype.off=function(type,fn){Events.off(this,type,fn)},EventTarget.prototype.removeEventListener=EventTarget.prototype.off,EventTarget.prototype.one=function(type,fn){Events.one(this,type,fn)},EventTarget.prototype.trigger=function(event){var type=event.type||event;"string"==typeof event&&(event={type:type}),event=Events.fixEvent(event),this.allowedEvents_[type]&&this["on"+type]&&this["on"+type](event),Events.trigger(this,event)},EventTarget.prototype.dispatchEvent=EventTarget.prototype.trigger,exports.default=EventTarget,module.exports=exports.default},{"./utils/events.js":135}],102:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _utilsLog=_dereq_("./utils/log"),_utilsLog2=_interopRequireDefault(_utilsLog),_inherits=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(subClass.super_=superClass)},extendFn=function(superClass){var subClassMethods=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],subClass=function(){superClass.apply(this,arguments)},methods={};"object"==typeof subClassMethods?("function"==typeof subClassMethods.init&&(_utilsLog2.default.warn("Constructor logic via init() is deprecated; please use constructor() instead."),subClassMethods.constructor=subClassMethods.init),subClassMethods.constructor!==Object.prototype.constructor&&(subClass=subClassMethods.constructor),methods=subClassMethods):"function"==typeof subClassMethods&&(subClass=subClassMethods),_inherits(subClass,superClass);for(var name in methods)methods.hasOwnProperty(name)&&(subClass.prototype[name]=methods[name]);return subClass};exports.default=extendFn,module.exports=exports.default},{"./utils/log":139}],103:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;for(var _globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),FullscreenApi={},apiMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],specApi=apiMap[0],browserApi=void 0,i=0;i<apiMap.length;i++)if(apiMap[i][1]in _globalDocument2.default){browserApi=apiMap[i];break}if(browserApi)for(var i=0;i<browserApi.length;i++)FullscreenApi[specApi[i]]=browserApi[i];exports.default=FullscreenApi,module.exports=exports.default},{"global/document":1}],104:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _component=_dereq_("./component"),_component2=_interopRequireDefault(_component),LoadingSpinner=function(_Component){function LoadingSpinner(){_classCallCheck(this,LoadingSpinner),_Component.apply(this,arguments)}return _inherits(LoadingSpinner,_Component),LoadingSpinner.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},LoadingSpinner}(_component2.default);_component2.default.registerComponent("LoadingSpinner",LoadingSpinner),exports.default=LoadingSpinner,module.exports=exports.default},{"./component":67}],105:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _objectAssign=_dereq_("object.assign"),_objectAssign2=_interopRequireDefault(_objectAssign),MediaError=function MediaError(code){"number"==typeof code?this.code=code:"string"==typeof code?this.message=code:"object"==typeof code&&_objectAssign2.default(this,code),this.message||(this.message=MediaError.defaultMessages[this.code]||"")};MediaError.prototype.code=0,MediaError.prototype.message="",MediaError.prototype.status=null,MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var errNum=0;errNum<MediaError.errorTypes.length;errNum++)MediaError[MediaError.errorTypes[errNum]]=errNum,MediaError.prototype[MediaError.errorTypes[errNum]]=errNum;exports.default=MediaError,module.exports=exports.default},{"object.assign":45}],106:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _clickableComponentJs=_dereq_("../clickable-component.js"),_clickableComponentJs2=_interopRequireDefault(_clickableComponentJs),_componentJs=_dereq_("../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_menuJs=_dereq_("./menu.js"),_menuJs2=_interopRequireDefault(_menuJs),_utilsDomJs=_dereq_("../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsFnJs=_dereq_("../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsToTitleCaseJs=_dereq_("../utils/to-title-case.js"),_utilsToTitleCaseJs2=_interopRequireDefault(_utilsToTitleCaseJs),MenuButton=function(_ClickableComponent){function MenuButton(player){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,MenuButton),_ClickableComponent.call(this,player,options),this.update(),this.enabled_=!0,this.el_.setAttribute("aria-haspopup","true"),this.el_.setAttribute("role","menuitem"),this.on("keydown",this.handleSubmenuKeyPress)}return _inherits(MenuButton,_ClickableComponent),MenuButton.prototype.update=function(){var menu=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=menu,this.addChild(menu),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},MenuButton.prototype.createMenu=function(){var menu=new _menuJs2.default(this.player_);if(this.options_.title){var title=Dom.createEl("li",{className:"vjs-menu-title",innerHTML:_utilsToTitleCaseJs2.default(this.options_.title),tabIndex:-1});menu.children_.unshift(title),Dom.insertElFirst(title,menu.contentEl())}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)menu.addItem(this.items[i]);return menu},MenuButton.prototype.createItems=function(){},MenuButton.prototype.createEl=function(){return _ClickableComponent.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},MenuButton.prototype.buildCSSClass=function(){var menuButtonClass="vjs-menu-button";return menuButtonClass+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+menuButtonClass+" "+_ClickableComponent.prototype.buildCSSClass.call(this)},MenuButton.prototype.handleClick=function(){this.one("mouseout",Fn.bind(this,function(){this.menu.unlockShowing(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},MenuButton.prototype.handleKeyPress=function(event){27===event.which||9===event.which?(this.buttonPressed_&&this.unpressButton(),9!==event.which&&event.preventDefault()):38===event.which||40===event.which?this.buttonPressed_||(this.pressButton(),event.preventDefault()):_ClickableComponent.prototype.handleKeyPress.call(this,event)},MenuButton.prototype.handleSubmenuKeyPress=function(event){27!==event.which&&9!==event.which||(this.buttonPressed_&&this.unpressButton(),9!==event.which&&event.preventDefault())},MenuButton.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},MenuButton.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.el_.focus())},MenuButton.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,_ClickableComponent.prototype.disable.call(this)},MenuButton.prototype.enable=function(){return this.enabled_=!0,_ClickableComponent.prototype.enable.call(this)},MenuButton}(_clickableComponentJs2.default);_componentJs2.default.registerComponent("MenuButton",MenuButton),exports.default=MenuButton,module.exports=exports.default},{"../clickable-component.js":65,"../component.js":67,"../utils/dom.js":134,"../utils/fn.js":136,"../utils/to-title-case.js":143,"./menu.js":108}],107:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _clickableComponentJs=_dereq_("../clickable-component.js"),_clickableComponentJs2=_interopRequireDefault(_clickableComponentJs),_componentJs=_dereq_("../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_objectAssign=_dereq_("object.assign"),_objectAssign2=_interopRequireDefault(_objectAssign),MenuItem=function(_ClickableComponent){function MenuItem(player,options){_classCallCheck(this,MenuItem),_ClickableComponent.call(this,player,options),this.selectable=options.selectable,this.selected(options.selected),this.selectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitem")}return _inherits(MenuItem,_ClickableComponent),MenuItem.prototype.createEl=function(type,props,attrs){return _ClickableComponent.prototype.createEl.call(this,"li",_objectAssign2.default({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},props),attrs)},MenuItem.prototype.handleClick=function(){this.selected(!0)},MenuItem.prototype.selected=function(_selected){this.selectable&&(_selected?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(" ")))},MenuItem}(_clickableComponentJs2.default);_componentJs2.default.registerComponent("MenuItem",MenuItem),exports.default=MenuItem,module.exports=exports.default},{"../clickable-component.js":65,"../component.js":67,"object.assign":45}],108:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsDomJs=_dereq_("../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsFnJs=_dereq_("../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsEventsJs=_dereq_("../utils/events.js"),Events=_interopRequireWildcard(_utilsEventsJs),Menu=function(_Component){function Menu(player,options){_classCallCheck(this,Menu),_Component.call(this,player,options),this.focusedChild_=-1,this.on("keydown",this.handleKeyPress)}return _inherits(Menu,_Component),Menu.prototype.addItem=function(component){this.addChild(component),component.on("click",Fn.bind(this,function(){this.unlockShowing()}))},Menu.prototype.createEl=function(){var contentElType=this.options_.contentElType||"ul";this.contentEl_=Dom.createEl(contentElType,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var el=_Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return el.setAttribute("role","presentation"),el.appendChild(this.contentEl_),Events.on(el,"click",function(event){event.preventDefault(),event.stopImmediatePropagation()}),el},Menu.prototype.handleKeyPress=function(event){37===event.which||40===event.which?(event.preventDefault(),this.stepForward()):38!==event.which&&39!==event.which||(event.preventDefault(),this.stepBack())},Menu.prototype.stepForward=function(){var stepChild=0;void 0!==this.focusedChild_&&(stepChild=this.focusedChild_+1),this.focus(stepChild)},Menu.prototype.stepBack=function(){var stepChild=0;void 0!==this.focusedChild_&&(stepChild=this.focusedChild_-1),this.focus(stepChild)},Menu.prototype.focus=function(){var item=arguments.length<=0||void 0===arguments[0]?0:arguments[0],children=this.children().slice(),haveTitle=children.length&&children[0].className&&/vjs-menu-title/.test(children[0].className);haveTitle&&children.shift(),children.length>0&&(item<0?item=0:item>=children.length&&(item=children.length-1),this.focusedChild_=item,children[item].el_.focus())},Menu}(_componentJs2.default);_componentJs2.default.registerComponent("Menu",Menu),exports.default=Menu,module.exports=exports.default},{"../component.js":67,"../utils/dom.js":134,"../utils/events.js":135,"../utils/fn.js":136}],109:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _utilsDom=_dereq_("./utils/dom"),Dom=_interopRequireWildcard(_utilsDom),_utilsFn=_dereq_("./utils/fn"),Fn=_interopRequireWildcard(_utilsFn),_utilsLog=_dereq_("./utils/log"),_component=(_interopRequireDefault(_utilsLog),_dereq_("./component")),_component2=_interopRequireDefault(_component),_closeButton=_dereq_("./close-button"),MODAL_CLASS_NAME=(_interopRequireDefault(_closeButton),"vjs-modal-dialog"),ESC=27,ModalDialog=function(_Component){function ModalDialog(player,options){_classCallCheck(this,ModalDialog),_Component.call(this,player,options),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Dom.createEl("div",{className:MODAL_CLASS_NAME+"-content"},{role:"document"}),this.descEl_=Dom.createEl("p",{className:MODAL_CLASS_NAME+"-description vjs-offscreen",id:this.el().getAttribute("aria-describedby")}),Dom.textContent(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}return _inherits(ModalDialog,_Component),ModalDialog.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},ModalDialog.prototype.buildCSSClass=function(){return MODAL_CLASS_NAME+" vjs-hidden "+_Component.prototype.buildCSSClass.call(this)},ModalDialog.prototype.handleKeyPress=function(e){e.which===ESC&&this.closeable()&&this.close()},ModalDialog.prototype.label=function(){return this.options_.label||this.localize("Modal Window")},ModalDialog.prototype.description=function(){var desc=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(desc+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),desc},ModalDialog.prototype.open=function(){if(!this.opened_){var player=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!player.paused(),this.wasPlaying_&&player.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",Fn.bind(this,this.handleKeyPress)),player.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}return this},ModalDialog.prototype.opened=function(value){return"boolean"==typeof value&&this[value?"open":"close"](),this.opened_},ModalDialog.prototype.close=function(){if(this.opened_){var player=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&player.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",Fn.bind(this,this.handleKeyPress)),player.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return this},ModalDialog.prototype.closeable=function closeable(value){if("boolean"==typeof value){var closeable=this.closeable_=!!value,_close=this.getChild("closeButton");if(closeable&&!_close){var temp=this.contentEl_;this.contentEl_=this.el_,_close=this.addChild("closeButton"),this.contentEl_=temp,this.on(_close,"close",this.close)}!closeable&&_close&&(this.off(_close,"close",this.close),this.removeChild(_close),_close.dispose())}return this.closeable_},ModalDialog.prototype.fill=function(){return this.fillWith(this.content())},ModalDialog.prototype.fillWith=function(content){var contentEl=this.contentEl(),parentEl=contentEl.parentNode,nextSiblingEl=contentEl.nextSibling;return this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,parentEl.removeChild(contentEl),this.empty(),Dom.insertContent(contentEl,content),this.trigger("modalfill"),nextSiblingEl?parentEl.insertBefore(contentEl,nextSiblingEl):parentEl.appendChild(contentEl),this},ModalDialog.prototype.empty=function(){return this.trigger("beforemodalempty"),Dom.emptyEl(this.contentEl()),this.trigger("modalempty"),this},ModalDialog.prototype.content=function(value){return"undefined"!=typeof value&&(this.content_=value),this.content_},ModalDialog}(_component2.default);ModalDialog.prototype.options_={temporary:!0},_component2.default.registerComponent("ModalDialog",ModalDialog),exports.default=ModalDialog,module.exports=exports.default},{"./close-button":66,"./component":67,"./utils/dom":134,"./utils/fn":136,"./utils/log":139}],110:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("./component.js"),_componentJs2=_interopRequireDefault(_componentJs),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),_globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_utilsEventsJs=_dereq_("./utils/events.js"),Events=_interopRequireWildcard(_utilsEventsJs),_utilsDomJs=_dereq_("./utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsFnJs=_dereq_("./utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsGuidJs=_dereq_("./utils/guid.js"),Guid=_interopRequireWildcard(_utilsGuidJs),_utilsBrowserJs=_dereq_("./utils/browser.js"),browser=_interopRequireWildcard(_utilsBrowserJs),_utilsLogJs=_dereq_("./utils/log.js"),_utilsLogJs2=_interopRequireDefault(_utilsLogJs),_utilsToTitleCaseJs=_dereq_("./utils/to-title-case.js"),_utilsToTitleCaseJs2=_interopRequireDefault(_utilsToTitleCaseJs),_utilsTimeRangesJs=_dereq_("./utils/time-ranges.js"),_utilsBufferJs=_dereq_("./utils/buffer.js"),_utilsStylesheetJs=_dereq_("./utils/stylesheet.js"),stylesheet=_interopRequireWildcard(_utilsStylesheetJs),_fullscreenApiJs=_dereq_("./fullscreen-api.js"),_fullscreenApiJs2=_interopRequireDefault(_fullscreenApiJs),_mediaErrorJs=_dereq_("./media-error.js"),_mediaErrorJs2=_interopRequireDefault(_mediaErrorJs),_safeJsonParseTuple=_dereq_("safe-json-parse/tuple"),_safeJsonParseTuple2=_interopRequireDefault(_safeJsonParseTuple),_objectAssign=_dereq_("object.assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_utilsMergeOptionsJs=_dereq_("./utils/merge-options.js"),_utilsMergeOptionsJs2=_interopRequireDefault(_utilsMergeOptionsJs),_tracksTextTrackListConverterJs=_dereq_("./tracks/text-track-list-converter.js"),_tracksTextTrackListConverterJs2=_interopRequireDefault(_tracksTextTrackListConverterJs),_techLoaderJs=_dereq_("./tech/loader.js"),_posterImageJs=(_interopRequireDefault(_techLoaderJs),_dereq_("./poster-image.js")),_tracksTextTrackDisplayJs=(_interopRequireDefault(_posterImageJs),_dereq_("./tracks/text-track-display.js")),_loadingSpinnerJs=(_interopRequireDefault(_tracksTextTrackDisplayJs),_dereq_("./loading-spinner.js")),_bigPlayButtonJs=(_interopRequireDefault(_loadingSpinnerJs),_dereq_("./big-play-button.js")),_controlBarControlBarJs=(_interopRequireDefault(_bigPlayButtonJs),_dereq_("./control-bar/control-bar.js")),_errorDisplayJs=(_interopRequireDefault(_controlBarControlBarJs),_dereq_("./error-display.js")),_tracksTextTrackSettingsJs=(_interopRequireDefault(_errorDisplayJs),_dereq_("./tracks/text-track-settings.js")),_modalDialog=(_interopRequireDefault(_tracksTextTrackSettingsJs),_dereq_("./modal-dialog")),_modalDialog2=_interopRequireDefault(_modalDialog),_techTechJs=_dereq_("./tech/tech.js"),_techTechJs2=_interopRequireDefault(_techTechJs),_techHtml5Js=_dereq_("./tech/html5.js"),Player=(_interopRequireDefault(_techHtml5Js),function(_Component){function Player(tag,options,ready){var _this=this;if(_classCallCheck(this,Player),tag.id=tag.id||"vjs_video_"+Guid.newGUID(),options=_objectAssign2.default(Player.getTagSettings(tag),options),options.initChildren=!1,options.createEl=!1,options.reportTouchActivity=!1,_Component.call(this,null,options,ready),!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");this.tag=tag,this.tagAttributes=tag&&Dom.getElAttributes(tag),this.language(this.options_.language),options.languages?!function(){var languagesToLower={};Object.getOwnPropertyNames(options.languages).forEach(function(name){languagesToLower[name.toLowerCase()]=options.languages[name]}),_this.languages_=languagesToLower}():this.languages_=Player.prototype.options_.languages,this.cache_={},this.poster_=options.poster||"",this.controls_=!!options.controls,tag.controls=!1,this.scrubbing_=!1,this.el_=this.createEl();var playerOptionsCopy=_utilsMergeOptionsJs2.default(this.options_);options.plugins&&!function(){var plugins=options.plugins;Object.getOwnPropertyNames(plugins).forEach(function(name){"function"==typeof this[name]?this[name](plugins[name]):_utilsLogJs2.default.error("Unable to find plugin:",name)},_this)}(),this.options_.playerOptions=playerOptionsCopy,this.initChildren(),this.isAudio("audio"===tag.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label","audio player"):this.el_.setAttribute("aria-label","video player"),this.isAudio()&&this.addClass("vjs-audio"),this.flexNotSupported_()&&this.addClass("vjs-no-flex"),browser.IS_IOS||this.addClass("vjs-workinghover"),Player.players[this.id_]=this,this.userActive(!0),this.reportUserActivity(),this.listenForUserActivity_(),this.on("fullscreenchange",this.handleFullscreenChange_),this.on("stageclick",this.handleStageClick_)}return _inherits(Player,_Component),Player.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),Player.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),_Component.prototype.dispose.call(this)},Player.prototype.createEl=function(){var el=this.el_=_Component.prototype.createEl.call(this,"div"),tag=this.tag;tag.removeAttribute("width"),tag.removeAttribute("height");var attrs=Dom.getElAttributes(tag);if(Object.getOwnPropertyNames(attrs).forEach(function(attr){"class"===attr?el.className=attrs[attr]:el.setAttribute(attr,attrs[attr])}),tag.playerId=tag.id,tag.id+="_html5_api",tag.className="vjs-tech",tag.player=el.player=this,this.addClass("vjs-paused"),_globalWindow2.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=stylesheet.createStyleElement("vjs-styles-dimensions");var defaultsStyleEl=Dom.$(".vjs-styles-defaults"),head=Dom.$("head");head.insertBefore(this.styleEl_,defaultsStyleEl?defaultsStyleEl.nextSibling:head.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var links=tag.getElementsByTagName("a"),i=0;i<links.length;i++){var linkEl=links.item(i);Dom.addElClass(linkEl,"vjs-hidden"),linkEl.setAttribute("hidden","hidden")}return tag.initNetworkState_=tag.networkState,tag.parentNode&&tag.parentNode.insertBefore(el,tag),Dom.insertElFirst(tag,el),this.children_.unshift(tag),this.el_=el,el},Player.prototype.width=function(value){return this.dimension("width",value)},Player.prototype.height=function(value){return this.dimension("height",value)},Player.prototype.dimension=function(_dimension,value){var privDimension=_dimension+"_";if(void 0===value)return this[privDimension]||0;if(""===value)this[privDimension]=void 0;else{var parsedVal=parseFloat(value);if(isNaN(parsedVal))return _utilsLogJs2.default.error('Improper value "'+value+'" supplied for for '+_dimension),this;this[privDimension]=parsedVal}return this.updateStyleEl_(),this},Player.prototype.fluid=function(bool){return void 0===bool?!!this.fluid_:(this.fluid_=!!bool,void(bool?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid")))},Player.prototype.aspectRatio=function(ratio){if(void 0===ratio)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(ratio))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=ratio,this.fluid(!0),this.updateStyleEl_()},Player.prototype.updateStyleEl_=function(){if(_globalWindow2.default.VIDEOJS_NO_DYNAMIC_STYLE===!0){var _width="number"==typeof this.width_?this.width_:this.options_.width,_height="number"==typeof this.height_?this.height_:this.options_.height,techEl=this.tech_&&this.tech_.el();return void(techEl&&(_width>=0&&(techEl.width=_width),_height>=0&&(techEl.height=_height)))}var width=void 0,height=void 0,aspectRatio=void 0,idClass=void 0;aspectRatio=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9";var ratioParts=aspectRatio.split(":"),ratioMultiplier=ratioParts[1]/ratioParts[0];width=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/ratioMultiplier:this.videoWidth()||300,height=void 0!==this.height_?this.height_:width*ratioMultiplier,idClass=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(idClass),stylesheet.setTextContent(this.styleEl_,"\n      ."+idClass+" {\n        width: "+width+"px;\n        height: "+height+"px;\n      }\n\n      ."+idClass+".vjs-fluid {\n        padding-top: "+100*ratioMultiplier+"%;\n      }\n    ")},Player.prototype.loadTech_=function(techName,source){this.tech_&&this.unloadTech_(),"Html5"!==techName&&this.tag&&(_techTechJs2.default.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=techName,this.isReady_=!1;var techOptions=_objectAssign2.default({nativeControlsForTouch:this.options_.nativeControlsForTouch,source:source,playerId:this.id(),techId:this.id()+"_"+techName+"_api",textTracks:this.textTracks_,autoplay:this.options_.autoplay,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),"vtt.js":this.options_["vtt.js"]},this.options_[techName.toLowerCase()]);this.tag&&(techOptions.tag=this.tag),source&&(this.currentType_=source.type,source.src===this.cache_.src&&this.cache_.currentTime>0&&(techOptions.startTime=this.cache_.currentTime),this.cache_.src=source.src);var techComponent=_techTechJs2.default.getTech(techName);techComponent||(techComponent=_componentJs2.default.getComponent(techName)),this.tech_=new techComponent(techOptions),this.tech_.ready(Fn.bind(this,this.handleTechReady_),!0),_tracksTextTrackListConverterJs2.default.jsonToTextTracks(this.textTracksJson_||[],this.tech_),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"progress",this.handleTechProgress_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"suspend",this.handleTechSuspend_),this.on(this.tech_,"abort",this.handleTechAbort_),this.on(this.tech_,"emptied",this.handleTechEmptied_),this.on(this.tech_,"stalled",this.handleTechStalled_),this.on(this.tech_,"loadedmetadata",this.handleTechLoadedMetaData_),this.on(this.tech_,"loadeddata",this.handleTechLoadedData_),this.on(this.tech_,"timeupdate",this.handleTechTimeUpdate_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.on(this.tech_,"volumechange",this.handleTechVolumeChange_),this.on(this.tech_,"texttrackchange",this.handleTechTextTrackChange_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===techName&&this.tag||Dom.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},Player.prototype.unloadTech_=function(){this.textTracks_=this.textTracks(),this.textTracksJson_=_tracksTextTrackListConverterJs2.default.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},Player.prototype.tech=function(safety){if(safety&&safety.IWillNotUseThisInPlugins)return this.tech_;var errorText="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw _globalWindow2.default.alert(errorText),new Error(errorText)},Player.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},Player.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},Player.prototype.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),this.src()&&this.tag&&this.options_.autoplay&&this.paused()&&(delete this.tag.poster,this.play())},Player.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},Player.prototype.hasStarted=function(_hasStarted){return void 0!==_hasStarted?(this.hasStarted_!==_hasStarted&&(this.hasStarted_=_hasStarted,_hasStarted?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},Player.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},Player.prototype.handleTechWaiting_=function(){var _this2=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return _this2.removeClass("vjs-waiting")})},Player.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},Player.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},Player.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},Player.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},Player.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},Player.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&this.currentTime(this.options_.starttime),this.addClass("vjs-has-started"),this.trigger("firstplay")},Player.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},Player.prototype.handleTechProgress_=function(){this.trigger("progress")},Player.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},Player.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},Player.prototype.handleTechClick_=function(event){0===event.button&&this.controls()&&(this.paused()?this.play():this.pause())},Player.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},Player.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},Player.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},Player.prototype.handleTechTouchEnd_=function(event){event.preventDefault()},Player.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},Player.prototype.handleStageClick_=function(){this.reportUserActivity()},Player.prototype.handleTechFullscreenChange_=function(event,data){data&&this.isFullscreen(data.isFullscreen),this.trigger("fullscreenchange")},Player.prototype.handleTechError_=function(){var error=this.tech_.error();this.error(error&&error.code)},Player.prototype.handleTechSuspend_=function(){this.trigger("suspend")},Player.prototype.handleTechAbort_=function(){this.trigger("abort")},Player.prototype.handleTechEmptied_=function(){this.trigger("emptied")},Player.prototype.handleTechStalled_=function(){this.trigger("stalled")},Player.prototype.handleTechLoadedMetaData_=function(){this.trigger("loadedmetadata")},Player.prototype.handleTechLoadedData_=function(){this.trigger("loadeddata")},Player.prototype.handleTechTimeUpdate_=function(){this.trigger("timeupdate")},Player.prototype.handleTechRateChange_=function(){this.trigger("ratechange")},Player.prototype.handleTechVolumeChange_=function(){this.trigger("volumechange")},Player.prototype.handleTechTextTrackChange_=function(){this.trigger("texttrackchange")},Player.prototype.getCache=function(){return this.cache_},Player.prototype.techCall_=function(method,arg){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[method](arg)},!0);else try{this.tech_[method](arg)}catch(e){throw _utilsLogJs2.default(e),e}},Player.prototype.techGet_=function(method){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[method]()}catch(e){throw void 0===this.tech_[method]?_utilsLogJs2.default("Video.js: "+method+" method not defined for "+this.techName_+" playback technology.",e):"TypeError"===e.name?(_utilsLogJs2.default("Video.js: "+method+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1):_utilsLogJs2.default(e),e}},Player.prototype.play=function(){return this.techCall_("play"),this},Player.prototype.pause=function(){return this.techCall_("pause"),this},Player.prototype.paused=function(){return this.techGet_("paused")!==!1},Player.prototype.scrubbing=function(isScrubbing){return void 0!==isScrubbing?(this.scrubbing_=!!isScrubbing,isScrubbing?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},Player.prototype.currentTime=function(seconds){return void 0!==seconds?(this.techCall_("setCurrentTime",seconds),this):this.cache_.currentTime=this.techGet_("currentTime")||0},Player.prototype.duration=function(seconds){return void 0===seconds?this.cache_.duration||0:(seconds=parseFloat(seconds)||0,seconds<0&&(seconds=1/0),seconds!==this.cache_.duration&&(this.cache_.duration=seconds,seconds===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},Player.prototype.remainingTime=function(){return this.duration()-this.currentTime()},Player.prototype.buffered=function buffered(){var buffered=this.techGet_("buffered");return buffered&&buffered.length||(buffered=_utilsTimeRangesJs.createTimeRange(0,0)),buffered},Player.prototype.bufferedPercent=function(){return _utilsBufferJs.bufferedPercent(this.buffered(),this.duration())},Player.prototype.bufferedEnd=function(){var buffered=this.buffered(),duration=this.duration(),end=buffered.end(buffered.length-1);return end>duration&&(end=duration),end},Player.prototype.volume=function(percentAsDecimal){var vol=void 0;return void 0!==percentAsDecimal?(vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal))),this.cache_.volume=vol,this.techCall_("setVolume",vol),this):(vol=parseFloat(this.techGet_("volume")),isNaN(vol)?1:vol)},Player.prototype.muted=function(_muted){return void 0!==_muted?(this.techCall_("setMuted",_muted),this):this.techGet_("muted")||!1},Player.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},Player.prototype.isFullscreen=function(isFS){return void 0!==isFS?(this.isFullscreen_=!!isFS,this):!!this.isFullscreen_},Player.prototype.requestFullscreen=function(){var fsApi=_fullscreenApiJs2.default;return this.isFullscreen(!0),fsApi.requestFullscreen?(Events.on(_globalDocument2.default,fsApi.fullscreenchange,Fn.bind(this,function documentFullscreenChange(e){this.isFullscreen(_globalDocument2.default[fsApi.fullscreenElement]),this.isFullscreen()===!1&&Events.off(_globalDocument2.default,fsApi.fullscreenchange,documentFullscreenChange),this.trigger("fullscreenchange")})),this.el_[fsApi.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},Player.prototype.exitFullscreen=function(){var fsApi=_fullscreenApiJs2.default;return this.isFullscreen(!1),fsApi.requestFullscreen?_globalDocument2.default[fsApi.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},Player.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=_globalDocument2.default.documentElement.style.overflow,Events.on(_globalDocument2.default,"keydown",Fn.bind(this,this.fullWindowOnEscKey)),_globalDocument2.default.documentElement.style.overflow="hidden",Dom.addElClass(_globalDocument2.default.body,"vjs-full-window"),this.trigger("enterFullWindow")},Player.prototype.fullWindowOnEscKey=function(event){27===event.keyCode&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},Player.prototype.exitFullWindow=function(){this.isFullWindow=!1,Events.off(_globalDocument2.default,"keydown",this.fullWindowOnEscKey),_globalDocument2.default.documentElement.style.overflow=this.docOrigOverflow,Dom.removeElClass(_globalDocument2.default.body,"vjs-full-window"),this.trigger("exitFullWindow")},Player.prototype.canPlayType=function(type){for(var can=void 0,i=0,j=this.options_.techOrder;i<j.length;i++){var techName=_utilsToTitleCaseJs2.default(j[i]),tech=_techTechJs2.default.getTech(techName);if(tech||(tech=_componentJs2.default.getComponent(techName)),tech){if(tech.isSupported()&&(can=tech.canPlayType(type)))return can}else _utilsLogJs2.default.error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.')}return""},Player.prototype.selectSource=function(sources){var techs=this.options_.techOrder.map(_utilsToTitleCaseJs2.default).map(function(techName){return[techName,_techTechJs2.default.getTech(techName)||_componentJs2.default.getComponent(techName)]}).filter(function(_ref){var techName=_ref[0],tech=_ref[1];return tech?tech.isSupported():(_utilsLogJs2.default.error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),findFirstPassingTechSourcePair=function(outerArray,innerArray,tester){var found=void 0;return outerArray.some(function(outerChoice){return innerArray.some(function(innerChoice){if(found=tester(outerChoice,innerChoice))return!0})}),found},foundSourceAndTech=void 0,flip=function(fn){return function(a,b){return fn(b,a)}},finder=function(_ref2,source){var techName=_ref2[0],tech=_ref2[1];if(tech.canPlaySource(source))return{source:source,tech:techName}};return foundSourceAndTech=this.options_.sourceOrder?findFirstPassingTechSourcePair(sources,techs,flip(finder)):findFirstPassingTechSourcePair(techs,sources,finder),foundSourceAndTech||!1},Player.prototype.src=function(source){if(void 0===source)return this.techGet_("src");var currentTech=_techTechJs2.default.getTech(this.techName_);return currentTech||(currentTech=_componentJs2.default.getComponent(this.techName_)),Array.isArray(source)?this.sourceList_(source):"string"==typeof source?this.src({src:source}):source instanceof Object&&(source.type&&!currentTech.canPlaySource(source)?this.sourceList_([source]):(this.cache_.src=source.src,this.currentType_=source.type||"",this.ready(function(){currentTech.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",source):this.techCall_("src",source.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this},Player.prototype.sourceList_=function(sources){var sourceTech=this.selectSource(sources);sourceTech?sourceTech.tech===this.techName_?this.src(sourceTech.source):this.loadTech_(sourceTech.tech,sourceTech.source):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},Player.prototype.load=function(){return this.techCall_("load"),this},Player.prototype.reset=function(){return this.loadTech_(_utilsToTitleCaseJs2.default(this.options_.techOrder[0]),null),this.techCall_("reset"),this},Player.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},Player.prototype.currentType=function(){return this.currentType_||""},Player.prototype.preload=function(value){return void 0!==value?(this.techCall_("setPreload",value),this.options_.preload=value,this):this.techGet_("preload")},Player.prototype.autoplay=function(value){return void 0!==value?(this.techCall_("setAutoplay",value),this.options_.autoplay=value,this):this.techGet_("autoplay",value)},Player.prototype.loop=function(value){return void 0!==value?(this.techCall_("setLoop",value),this.options_.loop=value,this):this.techGet_("loop")},Player.prototype.poster=function(src){return void 0===src?this.poster_:(src||(src=""),this.poster_=src,this.techCall_("setPoster",src),this.trigger("posterchange"),this)},Player.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},Player.prototype.controls=function(bool){return void 0!==bool?(bool=!!bool,this.controls_!==bool&&(this.controls_=bool,this.usingNativeControls()&&this.techCall_("setControls",bool),bool?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},Player.prototype.usingNativeControls=function(bool){return void 0!==bool?(bool=!!bool,this.usingNativeControls_!==bool&&(this.usingNativeControls_=bool,bool?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},Player.prototype.error=function(err){return void 0===err?this.error_||null:null===err?(this.error_=err,this.removeClass("vjs-error"),this.errorDisplay.close(),this):(err instanceof _mediaErrorJs2.default?this.error_=err:this.error_=new _mediaErrorJs2.default(err),this.addClass("vjs-error"),_utilsLogJs2.default.error("(CODE:"+this.error_.code+" "+_mediaErrorJs2.default.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),this)},Player.prototype.ended=function(){return this.techGet_("ended")},Player.prototype.seeking=function(){return this.techGet_("seeking")},Player.prototype.seekable=function(){return this.techGet_("seekable")},Player.prototype.reportUserActivity=function(event){this.userActivity_=!0},Player.prototype.userActive=function(bool){return void 0!==bool?(bool=!!bool,bool!==this.userActive_&&(this.userActive_=bool,bool?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},Player.prototype.listenForUserActivity_=function(){var mouseInProgress=void 0,lastMoveX=void 0,lastMoveY=void 0,handleActivity=Fn.bind(this,this.reportUserActivity),handleMouseMove=function(e){e.screenX===lastMoveX&&e.screenY===lastMoveY||(lastMoveX=e.screenX,lastMoveY=e.screenY,handleActivity())},handleMouseDown=function(){handleActivity(),this.clearInterval(mouseInProgress),mouseInProgress=this.setInterval(handleActivity,250)},handleMouseUp=function(event){handleActivity(),this.clearInterval(mouseInProgress)};this.on("mousedown",handleMouseDown),this.on("mousemove",handleMouseMove),this.on("mouseup",handleMouseUp),this.on("keydown",handleActivity),this.on("keyup",handleActivity);var inactivityTimeout=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(inactivityTimeout);var timeout=this.options_.inactivityTimeout;timeout>0&&(inactivityTimeout=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},timeout))}},250)},Player.prototype.playbackRate=function(rate){return void 0!==rate?(this.techCall_("setPlaybackRate",rate),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},Player.prototype.isAudio=function(bool){return void 0!==bool?(this.isAudio_=!!bool,this):!!this.isAudio_},Player.prototype.networkState=function(){return this.techGet_("networkState")},Player.prototype.readyState=function(){return this.techGet_("readyState")},Player.prototype.textTracks=function(){return this.tech_&&this.tech_.textTracks()},Player.prototype.remoteTextTracks=function(){return this.tech_&&this.tech_.remoteTextTracks()},Player.prototype.remoteTextTrackEls=function(){return this.tech_&&this.tech_.remoteTextTrackEls()},Player.prototype.addTextTrack=function(kind,label,language){return this.tech_&&this.tech_.addTextTrack(kind,label,language)},Player.prototype.addRemoteTextTrack=function(options){return this.tech_&&this.tech_.addRemoteTextTrack(options)},Player.prototype.removeRemoteTextTrack=function(){var _ref3=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],_ref3$track=_ref3.track,track=void 0===_ref3$track?arguments[0]:_ref3$track;this.tech_&&this.tech_.removeRemoteTextTrack(track)},Player.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},Player.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},Player.prototype.language=function(code){return void 0===code?this.language_:(this.language_=(""+code).toLowerCase(),this)},Player.prototype.languages=function(){return _utilsMergeOptionsJs2.default(Player.prototype.options_.languages,this.languages_)},Player.prototype.toJSON=function(){var options=_utilsMergeOptionsJs2.default(this.options_),tracks=options.tracks;options.tracks=[];for(var i=0;i<tracks.length;i++){var track=tracks[i];track=_utilsMergeOptionsJs2.default(track),track.player=void 0,options.tracks[i]=track}return options},Player.prototype.createModal=function(content,options){var player=this;options=options||{},options.content=content||"";var modal=new _modalDialog2.default(player,options);return player.addChild(modal),modal.on("dispose",function(){player.removeChild(modal)}),modal.open()},Player.getTagSettings=function(tag){var baseOptions={sources:[],tracks:[]},tagOptions=Dom.getElAttributes(tag),dataSetup=tagOptions["data-setup"];if(null!==dataSetup){var _safeParseTuple=_safeJsonParseTuple2.default(dataSetup||"{}"),err=_safeParseTuple[0],data=_safeParseTuple[1];err&&_utilsLogJs2.default.error(err),_objectAssign2.default(tagOptions,data)}if(_objectAssign2.default(baseOptions,tagOptions),tag.hasChildNodes())for(var children=tag.childNodes,i=0,j=children.length;i<j;i++){var child=children[i],childName=child.nodeName.toLowerCase();"source"===childName?baseOptions.sources.push(Dom.getElAttributes(child)):"track"===childName&&baseOptions.tracks.push(Dom.getElAttributes(child))}return baseOptions},Player}(_componentJs2.default));Player.players={};var navigator=_globalWindow2.default.navigator;Player.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:_globalDocument2.default.getElementsByTagName("html")[0].getAttribute("lang")||navigator.languages&&navigator.languages[0]||navigator.userLanguage||navigator.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},Player.prototype.handleLoadedMetaData_,Player.prototype.handleLoadedData_,Player.prototype.handleUserActive_,Player.prototype.handleUserInactive_,Player.prototype.handleTimeUpdate_,Player.prototype.handleTechEnded_,Player.prototype.handleVolumeChange_,Player.prototype.handleError_,Player.prototype.flexNotSupported_=function(){var elem=_globalDocument2.default.createElement("i");return!("flexBasis"in elem.style||"webkitFlexBasis"in elem.style||"mozFlexBasis"in elem.style||"msFlexBasis"in elem.style||"msFlexOrder"in elem.style)},_componentJs2.default.registerComponent("Player",Player),exports.default=Player,module.exports=exports.default},{"./big-play-button.js":63,"./component.js":67,"./control-bar/control-bar.js":68,"./error-display.js":100,"./fullscreen-api.js":103,"./loading-spinner.js":104,"./media-error.js":105,"./modal-dialog":109,"./poster-image.js":114,"./tech/html5.js":119,"./tech/loader.js":120,"./tech/tech.js":121,"./tracks/text-track-display.js":125,"./tracks/text-track-list-converter.js":127,"./tracks/text-track-settings.js":129,"./utils/browser.js":131,"./utils/buffer.js":132,"./utils/dom.js":134,"./utils/events.js":135,"./utils/fn.js":136,"./utils/guid.js":138,"./utils/log.js":139,"./utils/merge-options.js":140,"./utils/stylesheet.js":141,"./utils/time-ranges.js":142,"./utils/to-title-case.js":143,"global/document":1,"global/window":2,"object.assign":45,"safe-json-parse/tuple":54}],111:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _playerJs=_dereq_("./player.js"),_playerJs2=_interopRequireDefault(_playerJs),plugin=function(name,init){_playerJs2.default.prototype[name]=init};exports.default=plugin,module.exports=exports.default},{"./player.js":110}],112:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _clickableComponentJs=_dereq_("../clickable-component.js"),_clickableComponentJs2=_interopRequireDefault(_clickableComponentJs),_componentJs=_dereq_("../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_popupJs=_dereq_("./popup.js"),_utilsDomJs=(_interopRequireDefault(_popupJs),_dereq_("../utils/dom.js")),_utilsFnJs=(_interopRequireWildcard(_utilsDomJs),_dereq_("../utils/fn.js")),_utilsToTitleCaseJs=(_interopRequireWildcard(_utilsFnJs),_dereq_("../utils/to-title-case.js")),PopupButton=(_interopRequireDefault(_utilsToTitleCaseJs),function(_ClickableComponent){function PopupButton(player){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,PopupButton),_ClickableComponent.call(this,player,options),this.update()}return _inherits(PopupButton,_ClickableComponent),PopupButton.prototype.update=function(){var popup=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=popup,this.addChild(popup),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},PopupButton.prototype.createPopup=function(){},PopupButton.prototype.createEl=function(){return _ClickableComponent.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},PopupButton.prototype.buildCSSClass=function(){var menuButtonClass="vjs-menu-button";return menuButtonClass+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+menuButtonClass+" "+_ClickableComponent.prototype.buildCSSClass.call(this)},PopupButton}(_clickableComponentJs2.default));_componentJs2.default.registerComponent("PopupButton",PopupButton),exports.default=PopupButton,module.exports=exports.default},{"../clickable-component.js":65,"../component.js":67,"../utils/dom.js":134,"../utils/fn.js":136,"../utils/to-title-case.js":143,"./popup.js":113}],113:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsDomJs=_dereq_("../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsFnJs=_dereq_("../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsEventsJs=_dereq_("../utils/events.js"),Events=_interopRequireWildcard(_utilsEventsJs),Popup=function(_Component){function Popup(){_classCallCheck(this,Popup),_Component.apply(this,arguments)}return _inherits(Popup,_Component),Popup.prototype.addItem=function(component){this.addChild(component),component.on("click",Fn.bind(this,function(){this.unlockShowing()}))},Popup.prototype.createEl=function(){var contentElType=this.options_.contentElType||"ul";this.contentEl_=Dom.createEl(contentElType,{className:"vjs-menu-content"});var el=_Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return el.appendChild(this.contentEl_),Events.on(el,"click",function(event){event.preventDefault(),event.stopImmediatePropagation()}),el},Popup}(_componentJs2.default);_componentJs2.default.registerComponent("Popup",Popup),exports.default=Popup,module.exports=exports.default},{"../component.js":67,"../utils/dom.js":134,"../utils/events.js":135,"../utils/fn.js":136}],114:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _clickableComponentJs=_dereq_("./clickable-component.js"),_clickableComponentJs2=_interopRequireDefault(_clickableComponentJs),_componentJs=_dereq_("./component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsFnJs=_dereq_("./utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsDomJs=_dereq_("./utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsBrowserJs=_dereq_("./utils/browser.js"),browser=_interopRequireWildcard(_utilsBrowserJs),PosterImage=function(_ClickableComponent){function PosterImage(player,options){_classCallCheck(this,PosterImage),_ClickableComponent.call(this,player,options),this.update(),player.on("posterchange",Fn.bind(this,this.update))}return _inherits(PosterImage,_ClickableComponent),PosterImage.prototype.dispose=function(){this.player().off("posterchange",this.update),_ClickableComponent.prototype.dispose.call(this)},PosterImage.prototype.createEl=function(){var el=Dom.createEl("div",{className:"vjs-poster",tabIndex:-1});return browser.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=Dom.createEl("img"),el.appendChild(this.fallbackImg_)),el},PosterImage.prototype.update=function(){var url=this.player().poster();this.setSrc(url),url?this.show():this.hide()},PosterImage.prototype.setSrc=function(url){if(this.fallbackImg_)this.fallbackImg_.src=url;else{var backgroundImage="";url&&(backgroundImage='url("'+url+'")'),this.el_.style.backgroundImage=backgroundImage}},PosterImage.prototype.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},PosterImage}(_clickableComponentJs2.default);_componentJs2.default.registerComponent("PosterImage",PosterImage),exports.default=PosterImage,module.exports=exports.default},{"./clickable-component.js":65,"./component.js":67,"./utils/browser.js":131,"./utils/dom.js":134,"./utils/fn.js":136}],115:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}exports.__esModule=!0;var _utilsEventsJs=_dereq_("./utils/events.js"),Events=_interopRequireWildcard(_utilsEventsJs),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),_globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_windowLoaded=!1,videojs=void 0,autoSetup=function(){var vids=_globalDocument2.default.getElementsByTagName("video"),audios=_globalDocument2.default.getElementsByTagName("audio"),mediaEls=[];if(vids&&vids.length>0)for(var i=0,e=vids.length;i<e;i++)mediaEls.push(vids[i]);if(audios&&audios.length>0)for(var i=0,e=audios.length;i<e;i++)mediaEls.push(audios[i]);if(mediaEls&&mediaEls.length>0)for(var i=0,e=mediaEls.length;i<e;i++){var mediaEl=mediaEls[i];if(!mediaEl||!mediaEl.getAttribute){autoSetupTimeout(1);break}if(void 0===mediaEl.player){var options=mediaEl.getAttribute("data-setup");if(null!==options){videojs(mediaEl)}}}else _windowLoaded||autoSetupTimeout(1)},autoSetupTimeout=function(wait,vjs){vjs&&(videojs=vjs),setTimeout(autoSetup,wait)};"complete"===_globalDocument2.default.readyState?_windowLoaded=!0:Events.one(_globalWindow2.default,"load",function(){_windowLoaded=!0});var hasLoaded=function(){return _windowLoaded};exports.autoSetup=autoSetup,exports.autoSetupTimeout=autoSetupTimeout,exports.hasLoaded=hasLoaded},{"./utils/events.js":135,"global/document":1,"global/window":2}],116:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_utilsDomJs=_dereq_("../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_objectAssign=_dereq_("object.assign"),_objectAssign2=_interopRequireDefault(_objectAssign),Slider=function(_Component){function Slider(player,options){_classCallCheck(this,Slider),_Component.call(this,player,options),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(player,"controlsvisible",this.update),this.on(player,this.playerEvent,this.update)}return _inherits(Slider,_Component),Slider.prototype.createEl=function(type){var props=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],attributes=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return props.className=props.className+" vjs-slider",props=_objectAssign2.default({tabIndex:0},props),attributes=_objectAssign2.default({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},attributes),_Component.prototype.createEl.call(this,type,props,attributes)},Slider.prototype.handleMouseDown=function(event){var doc=this.bar.el_.ownerDocument;event.preventDefault(),Dom.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(doc,"mousemove",this.handleMouseMove),this.on(doc,"mouseup",this.handleMouseUp),this.on(doc,"touchmove",this.handleMouseMove),this.on(doc,"touchend",this.handleMouseUp),this.handleMouseMove(event)},Slider.prototype.handleMouseMove=function(){},Slider.prototype.handleMouseUp=function(){var doc=this.bar.el_.ownerDocument;Dom.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(doc,"mousemove",this.handleMouseMove),this.off(doc,"mouseup",this.handleMouseUp),this.off(doc,"touchmove",this.handleMouseMove),this.off(doc,"touchend",this.handleMouseUp),this.update()},Slider.prototype.update=function(){if(this.el_){var progress=this.getPercent(),bar=this.bar;if(bar){("number"!=typeof progress||progress!==progress||progress<0||progress===1/0)&&(progress=0);var percentage=(100*progress).toFixed(2)+"%";this.vertical()?bar.el().style.height=percentage:bar.el().style.width=percentage}}},Slider.prototype.calculateDistance=function(event){var position=Dom.getPointerPosition(this.el_,event);return this.vertical()?position.y:position.x},Slider.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},Slider.prototype.handleKeyPress=function(event){37===event.which||40===event.which?(event.preventDefault(),this.stepBack()):38!==event.which&&39!==event.which||(event.preventDefault(),this.stepForward())},Slider.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},Slider.prototype.handleClick=function(event){event.stopImmediatePropagation(),event.preventDefault()},Slider.prototype.vertical=function(bool){return void 0===bool?this.vertical_||!1:(this.vertical_=!!bool,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal"),this)},Slider}(_componentJs2.default);_componentJs2.default.registerComponent("Slider",Slider),exports.default=Slider,module.exports=exports.default},{"../component.js":67,"../utils/dom.js":134,"object.assign":45}],117:[function(_dereq_,module,exports){"use strict";function FlashRtmpDecorator(Flash){return Flash.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},Flash.streamFromParts=function(connection,stream){return connection+"&"+stream},Flash.streamToParts=function(src){var parts={connection:"",stream:""};if(!src)return parts;var connEnd=src.search(/&(?!\w+=)/),streamBegin=void 0;return connEnd!==-1?streamBegin=connEnd+1:(connEnd=streamBegin=src.lastIndexOf("/")+1,0===connEnd&&(connEnd=streamBegin=src.length)),parts.connection=src.substring(0,connEnd),parts.stream=src.substring(streamBegin,src.length),parts},Flash.isStreamingType=function(srcType){return srcType in Flash.streamingFormats},Flash.RTMP_RE=/^rtmp[set]?:\/\//i,Flash.isStreamingSrc=function(src){return Flash.RTMP_RE.test(src)},Flash.rtmpSourceHandler={},Flash.rtmpSourceHandler.canPlayType=function(type){return Flash.isStreamingType(type)?"maybe":""},Flash.rtmpSourceHandler.canHandleSource=function(source){var can=Flash.rtmpSourceHandler.canPlayType(source.type);return can?can:Flash.isStreamingSrc(source.src)?"maybe":""},Flash.rtmpSourceHandler.handleSource=function(source,tech){var srcParts=Flash.streamToParts(source.src);tech.setRtmpConnection(srcParts.connection),tech.setRtmpStream(srcParts.stream)},Flash.registerSourceHandler(Flash.rtmpSourceHandler),Flash}exports.__esModule=!0,exports.default=FlashRtmpDecorator,module.exports=exports.default},{}],118:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _createSetter(attr){var attrUpper=attr.charAt(0).toUpperCase()+attr.slice(1);_api["set"+attrUpper]=function(val){return this.el_.vjs_setProperty(attr,val)}}function _createGetter(attr){_api[attr]=function(){return this.el_.vjs_getProperty(attr)}}exports.__esModule=!0;for(var _tech=_dereq_("./tech"),_tech2=_interopRequireDefault(_tech),_utilsDomJs=_dereq_("../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsUrlJs=_dereq_("../utils/url.js"),Url=_interopRequireWildcard(_utilsUrlJs),_utilsTimeRangesJs=_dereq_("../utils/time-ranges.js"),_flashRtmp=_dereq_("./flash-rtmp"),_flashRtmp2=_interopRequireDefault(_flashRtmp),_component=_dereq_("../component"),_component2=_interopRequireDefault(_component),_globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_objectAssign=_dereq_("object.assign"),_objectAssign2=_interopRequireDefault(_objectAssign),navigator=_globalWindow2.default.navigator,Flash=function(_Tech){function Flash(options,ready){_classCallCheck(this,Flash),_Tech.call(this,options,ready),options.source&&this.ready(function(){this.setSource(options.source)},!0),options.startTime&&this.ready(function(){this.load(),this.play(),this.currentTime(options.startTime)},!0),_globalWindow2.default.videojs=_globalWindow2.default.videojs||{},_globalWindow2.default.videojs.Flash=_globalWindow2.default.videojs.Flash||{},_globalWindow2.default.videojs.Flash.onReady=Flash.onReady,_globalWindow2.default.videojs.Flash.onEvent=Flash.onEvent,_globalWindow2.default.videojs.Flash.onError=Flash.onError,this.on("seeked",function(){this.lastSeekTarget_=void 0})}return _inherits(Flash,_Tech),Flash.prototype.createEl=function(){var options=this.options_;options.swf||(options.swf="//vjs.zencdn.net/swf/5.0.1/video-js.swf");var objId=options.techId,flashVars=_objectAssign2.default({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:options.autoplay,preload:options.preload,loop:options.loop,muted:options.muted},options.flashVars),params=_objectAssign2.default({wmode:"opaque",bgcolor:"#000000"},options.params),attributes=_objectAssign2.default({id:objId,name:objId,class:"vjs-tech"},options.attributes);return this.el_=Flash.embed(options.swf,flashVars,params,attributes),this.el_.tech=this,this.el_},Flash.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},Flash.prototype.pause=function(){this.el_.vjs_pause()},Flash.prototype.src=function(_src){return void 0===_src?this.currentSrc():this.setSrc(_src)},Flash.prototype.setSrc=function(src){if(src=Url.getAbsoluteURL(src),this.el_.vjs_src(src),this.autoplay()){var tech=this;this.setTimeout(function(){tech.play()},0)}},Flash.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},Flash.prototype.setCurrentTime=function(time){var seekable=this.seekable();seekable.length&&(time=time>seekable.start(0)?time:seekable.start(0),time=time<seekable.end(seekable.length-1)?time:seekable.end(seekable.length-1),this.lastSeekTarget_=time,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",time),_Tech.prototype.setCurrentTime.call(this))},Flash.prototype.currentTime=function(time){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},Flash.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},Flash.prototype.load=function(){this.el_.vjs_load()},Flash.prototype.poster=function(){this.el_.vjs_getProperty("poster")},Flash.prototype.setPoster=function(){},Flash.prototype.seekable=function(){var duration=this.duration();return 0===duration?_utilsTimeRangesJs.createTimeRange():_utilsTimeRangesJs.createTimeRange(0,duration)},Flash.prototype.buffered=function(){var ranges=this.el_.vjs_getProperty("buffered");return 0===ranges.length?_utilsTimeRangesJs.createTimeRange():_utilsTimeRangesJs.createTimeRange(ranges[0][0],ranges[0][1])},Flash.prototype.supportsFullScreen=function(){return!1},Flash.prototype.enterFullScreen=function(){return!1},Flash}(_tech2.default),_api=Flash.prototype,_readWrite="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),_readOnly="networkState,readyState,initialTime,duration,startOffsetTime,paused,ended,videoTracks,audioTracks,videoWidth,videoHeight".split(","),i=0;i<_readWrite.length;i++)_createGetter(_readWrite[i]),_createSetter(_readWrite[i]);for(var i=0;i<_readOnly.length;i++)_createGetter(_readOnly[i]);Flash.isSupported=function(){return Flash.version()[0]>=10},_tech2.default.withSourceHandlers(Flash),Flash.nativeSourceHandler={},Flash.nativeSourceHandler.canPlayType=function(type){return type in Flash.formats?"maybe":""},Flash.nativeSourceHandler.canHandleSource=function(source){function guessMimeType(src){var ext=Url.getFileExtension(src);return ext?"video/"+ext:""}var type;return type=source.type?source.type.replace(/;.*/,"").toLowerCase():guessMimeType(source.src),Flash.nativeSourceHandler.canPlayType(type)},Flash.nativeSourceHandler.handleSource=function(source,tech){tech.setSrc(source.src)},Flash.nativeSourceHandler.dispose=function(){},Flash.registerSourceHandler(Flash.nativeSourceHandler),Flash.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},Flash.onReady=function(currSwf){var el=Dom.getEl(currSwf),tech=el&&el.tech;tech&&tech.el()&&Flash.checkReady(tech)},Flash.checkReady=function(tech){tech.el()&&(tech.el().vjs_getProperty?tech.triggerReady():this.setTimeout(function(){Flash.checkReady(tech)},50))},Flash.onEvent=function(swfID,eventName){var tech=Dom.getEl(swfID).tech;tech.trigger(eventName)},Flash.onError=function(swfID,err){var tech=Dom.getEl(swfID).tech;return"srcnotfound"===err?tech.error(4):void tech.error("FLASH: "+err)},Flash.version=function(){var version="0,0,0";try{version=new _globalWindow2.default.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(version=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(err){}}return version.split(",")},Flash.embed=function(swf,flashVars,params,attributes){var code=Flash.getEmbedCode(swf,flashVars,params,attributes),obj=Dom.createEl("div",{innerHTML:code}).childNodes[0];return obj},Flash.getEmbedCode=function(swf,flashVars,params,attributes){var objTag='<object type="application/x-shockwave-flash" ',flashVarsString="",paramsString="",attrsString="";return flashVars&&Object.getOwnPropertyNames(flashVars).forEach(function(key){flashVarsString+=key+"="+flashVars[key]+"&amp;"}),params=_objectAssign2.default({movie:swf,flashvars:flashVarsString,allowScriptAccess:"always",allowNetworking:"all"},params),Object.getOwnPropertyNames(params).forEach(function(key){paramsString+='<param name="'+key+'" value="'+params[key]+'" />'}),attributes=_objectAssign2.default({data:swf,width:"100%",height:"100%"},attributes),Object.getOwnPropertyNames(attributes).forEach(function(key){attrsString+=key+'="'+attributes[key]+'" '}),""+objTag+attrsString+">"+paramsString+"</object>"},_flashRtmp2.default(Flash),_component2.default.registerComponent("Flash",Flash),_tech2.default.registerTech("Flash",Flash),exports.default=Flash,module.exports=exports.default},{"../component":67,"../utils/dom.js":134,"../utils/time-ranges.js":142,"../utils/url.js":144,"./flash-rtmp":117,"./tech":121,"global/window":2,"object.assign":45}],119:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _techJs=_dereq_("./tech.js"),_techJs2=_interopRequireDefault(_techJs),_component=_dereq_("../component"),_component2=_interopRequireDefault(_component),_utilsDomJs=_dereq_("../utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsUrlJs=_dereq_("../utils/url.js"),Url=_interopRequireWildcard(_utilsUrlJs),_utilsFnJs=_dereq_("../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsLogJs=_dereq_("../utils/log.js"),_utilsLogJs2=_interopRequireDefault(_utilsLogJs),_utilsBrowserJs=_dereq_("../utils/browser.js"),browser=_interopRequireWildcard(_utilsBrowserJs),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),_globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_objectAssign=_dereq_("object.assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_utilsMergeOptionsJs=_dereq_("../utils/merge-options.js"),_utilsMergeOptionsJs2=_interopRequireDefault(_utilsMergeOptionsJs),Html5=function(_Tech){function Html5(options,ready){_classCallCheck(this,Html5),_Tech.call(this,options,ready);var source=options.source;if(source&&(this.el_.currentSrc!==source.src||options.tag&&3===options.tag.initNetworkState_)?this.setSource(source):this.handleLateInit_(this.el_),this.el_.hasChildNodes()){for(var nodes=this.el_.childNodes,nodesLength=nodes.length,removeNodes=[];nodesLength--;){var node=nodes[nodesLength],nodeName=node.nodeName.toLowerCase();"track"===nodeName&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(node),this.remoteTextTracks().addTrack_(node.track)):removeNodes.push(node))}for(var i=0;i<removeNodes.length;i++)this.el_.removeChild(removeNodes[i])}this.featuresNativeTextTracks&&(this.handleTextTrackChange_=Fn.bind(this,this.handleTextTrackChange),this.handleTextTrackAdd_=Fn.bind(this,this.handleTextTrackAdd),this.handleTextTrackRemove_=Fn.bind(this,this.handleTextTrackRemove),this.proxyNativeTextTracks_()),(browser.TOUCH_ENABLED&&options.nativeControlsForTouch===!0||browser.IS_IPHONE||browser.IS_NATIVE_ANDROID)&&this.setControls(!0),this.triggerReady()}return _inherits(Html5,_Tech),Html5.prototype.dispose=function(){var tt=this.el().textTracks,emulatedTt=this.textTracks();tt&&tt.removeEventListener&&(tt.removeEventListener("change",this.handleTextTrackChange_),tt.removeEventListener("addtrack",this.handleTextTrackAdd_),tt.removeEventListener("removetrack",this.handleTextTrackRemove_));for(var i=emulatedTt.length;i--;)emulatedTt.removeTrack_(emulatedTt[i]);Html5.disposeMediaElement(this.el_),_Tech.prototype.dispose.call(this)},Html5.prototype.createEl=function(){var el=this.options_.tag;if(!el||this.movingMediaElementInDOM===!1)if(el){var clone=el.cloneNode(!0);el.parentNode.insertBefore(clone,el),Html5.disposeMediaElement(el),el=clone}else{el=_globalDocument2.default.createElement("video");var tagAttributes=this.options_.tag&&Dom.getElAttributes(this.options_.tag),attributes=_utilsMergeOptionsJs2.default({},tagAttributes);browser.TOUCH_ENABLED&&this.options_.nativeControlsForTouch===!0||delete attributes.controls,Dom.setElAttributes(el,_objectAssign2.default(attributes,{id:this.options_.techId,class:"vjs-tech"}))}for(var settingsAttrs=["autoplay","preload","loop","muted"],i=settingsAttrs.length-1;i>=0;i--){var attr=settingsAttrs[i],overwriteAttrs={};"undefined"!=typeof this.options_[attr]&&(overwriteAttrs[attr]=this.options_[attr]),Dom.setElAttributes(el,overwriteAttrs)}return el},Html5.prototype.handleLateInit_=function(el){var _this=this;if(0!==el.networkState&&3!==el.networkState){if(0===el.readyState){var _ret=function(){var loadstartFired=!1,setLoadstartFired=function(){loadstartFired=!0};_this.on("loadstart",setLoadstartFired);var triggerLoadstart=function(){loadstartFired||this.trigger("loadstart")};return _this.on("loadedmetadata",triggerLoadstart),_this.ready(function(){this.off("loadstart",setLoadstartFired),this.off("loadedmetadata",triggerLoadstart),loadstartFired||this.trigger("loadstart")}),{v:void 0}}();if("object"==typeof _ret)return _ret.v}var eventsToTrigger=["loadstart"];eventsToTrigger.push("loadedmetadata"),el.readyState>=2&&eventsToTrigger.push("loadeddata"),el.readyState>=3&&eventsToTrigger.push("canplay"),el.readyState>=4&&eventsToTrigger.push("canplaythrough"),this.ready(function(){eventsToTrigger.forEach(function(type){this.trigger(type)},this)})}},Html5.prototype.proxyNativeTextTracks_=function(){var tt=this.el().textTracks;if(tt){for(var i=0;i<tt.length;i++)this.textTracks().addTrack_(tt[i]);tt.addEventListener&&(tt.addEventListener("change",this.handleTextTrackChange_),tt.addEventListener("addtrack",this.handleTextTrackAdd_),tt.addEventListener("removetrack",this.handleTextTrackRemove_))}},Html5.prototype.handleTextTrackChange=function(e){var tt=this.textTracks();this.textTracks().trigger({type:"change",target:tt,currentTarget:tt,srcElement:tt})},Html5.prototype.handleTextTrackAdd=function(e){this.textTracks().addTrack_(e.track)},Html5.prototype.handleTextTrackRemove=function(e){this.textTracks().removeTrack_(e.track)},Html5.prototype.play=function(){this.el_.play()},Html5.prototype.pause=function(){this.el_.pause()},Html5.prototype.paused=function(){return this.el_.paused},Html5.prototype.currentTime=function(){return this.el_.currentTime},Html5.prototype.setCurrentTime=function(seconds){try{this.el_.currentTime=seconds}catch(e){_utilsLogJs2.default(e,"Video is not ready. (Video.js)")}},Html5.prototype.duration=function(){return this.el_.duration||0},Html5.prototype.buffered=function(){return this.el_.buffered},Html5.prototype.volume=function(){return this.el_.volume},Html5.prototype.setVolume=function(percentAsDecimal){this.el_.volume=percentAsDecimal},Html5.prototype.muted=function(){return this.el_.muted},Html5.prototype.setMuted=function(muted){this.el_.muted=muted},Html5.prototype.width=function(){return this.el_.offsetWidth},Html5.prototype.height=function(){return this.el_.offsetHeight},Html5.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var userAgent=_globalWindow2.default.navigator.userAgent;if(/Android/.test(userAgent)||!/Chrome|Mac OS X 10.5/.test(userAgent))return!0}return!1},Html5.prototype.enterFullScreen=function(){var video=this.el_;"webkitDisplayingFullscreen"in video&&this.one("webkitbeginfullscreen",function(){this.one("webkitendfullscreen",function(){this.trigger("fullscreenchange",{isFullscreen:!1})}),this.trigger("fullscreenchange",{isFullscreen:!0})}),video.paused&&video.networkState<=video.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){video.pause(),video.webkitEnterFullScreen()},0)):video.webkitEnterFullScreen()},Html5.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},Html5.prototype.src=function(_src){return void 0===_src?this.el_.src:void this.setSrc(_src)},Html5.prototype.setSrc=function(src){this.el_.src=src},Html5.prototype.load=function(){this.el_.load()},Html5.prototype.reset=function(){Html5.resetMediaElement(this.el_)},Html5.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},Html5.prototype.poster=function(){return this.el_.poster},Html5.prototype.setPoster=function(val){this.el_.poster=val},Html5.prototype.preload=function(){return this.el_.preload},Html5.prototype.setPreload=function(val){this.el_.preload=val},Html5.prototype.autoplay=function(){return this.el_.autoplay},Html5.prototype.setAutoplay=function(val){this.el_.autoplay=val},Html5.prototype.controls=function(){return this.el_.controls},Html5.prototype.setControls=function(val){this.el_.controls=!!val},Html5.prototype.loop=function(){return this.el_.loop},Html5.prototype.setLoop=function(val){this.el_.loop=val},Html5.prototype.error=function(){return this.el_.error},Html5.prototype.seeking=function(){return this.el_.seeking},Html5.prototype.seekable=function(){return this.el_.seekable},Html5.prototype.ended=function(){return this.el_.ended},Html5.prototype.defaultMuted=function(){return this.el_.defaultMuted},Html5.prototype.playbackRate=function(){return this.el_.playbackRate},Html5.prototype.played=function(){return this.el_.played},Html5.prototype.setPlaybackRate=function(val){this.el_.playbackRate=val},Html5.prototype.networkState=function(){return this.el_.networkState},Html5.prototype.readyState=function(){return this.el_.readyState},Html5.prototype.videoWidth=function(){return this.el_.videoWidth},Html5.prototype.videoHeight=function(){return this.el_.videoHeight},Html5.prototype.textTracks=function(){return _Tech.prototype.textTracks.call(this)},Html5.prototype.addTextTrack=function(kind,label,language){return this.featuresNativeTextTracks?this.el_.addTextTrack(kind,label,language):_Tech.prototype.addTextTrack.call(this,kind,label,language)},Html5.prototype.addRemoteTextTrack=function(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!this.featuresNativeTextTracks)return _Tech.prototype.addRemoteTextTrack.call(this,options);var htmlTrackElement=_globalDocument2.default.createElement("track");return options.kind&&(htmlTrackElement.kind=options.kind),options.label&&(htmlTrackElement.label=options.label),(options.language||options.srclang)&&(htmlTrackElement.srclang=options.language||options.srclang),options.default&&(htmlTrackElement.default=options.default),options.id&&(htmlTrackElement.id=options.id),options.src&&(htmlTrackElement.src=options.src),this.el().appendChild(htmlTrackElement),this.remoteTextTrackEls().addTrackElement_(htmlTrackElement),this.remoteTextTracks().addTrack_(htmlTrackElement.track),htmlTrackElement},Html5.prototype.removeRemoteTextTrack=function(track){if(!this.featuresNativeTextTracks)return _Tech.prototype.removeRemoteTextTrack.call(this,track);var tracks=void 0,i=void 0,trackElement=this.remoteTextTrackEls().getTrackElementByTrack_(track);for(this.remoteTextTrackEls().removeTrackElement_(trackElement),this.remoteTextTracks().removeTrack_(track),tracks=this.$$("track"),i=tracks.length;i--;)track!==tracks[i]&&track!==tracks[i].track||this.el().removeChild(tracks[i])},Html5}(_techJs2.default);Html5.TEST_VID=_globalDocument2.default.createElement("video");var track=_globalDocument2.default.createElement("track");track.kind="captions",track.srclang="en",track.label="English",Html5.TEST_VID.appendChild(track),Html5.isSupported=function(){try{Html5.TEST_VID.volume=.5}catch(e){return!1}return!!Html5.TEST_VID.canPlayType},_techJs2.default.withSourceHandlers(Html5),Html5.nativeSourceHandler={},Html5.nativeSourceHandler.canPlayType=function(type){try{return Html5.TEST_VID.canPlayType(type)}catch(e){return""}},Html5.nativeSourceHandler.canHandleSource=function(source){var ext;return source.type?Html5.nativeSourceHandler.canPlayType(source.type):source.src?(ext=Url.getFileExtension(source.src),Html5.nativeSourceHandler.canPlayType("video/"+ext)):""},Html5.nativeSourceHandler.handleSource=function(source,tech){tech.setSrc(source.src)},Html5.nativeSourceHandler.dispose=function(){},Html5.registerSourceHandler(Html5.nativeSourceHandler),Html5.canControlVolume=function(){var volume=Html5.TEST_VID.volume;return Html5.TEST_VID.volume=volume/2+.1,volume!==Html5.TEST_VID.volume},Html5.canControlPlaybackRate=function(){if(browser.IS_ANDROID&&browser.IS_CHROME)return!1;var playbackRate=Html5.TEST_VID.playbackRate;return Html5.TEST_VID.playbackRate=playbackRate/2+.1,playbackRate!==Html5.TEST_VID.playbackRate},Html5.supportsNativeTextTracks=function(){var supportsTextTracks;return supportsTextTracks=!!Html5.TEST_VID.textTracks,supportsTextTracks&&Html5.TEST_VID.textTracks.length>0&&(supportsTextTracks="number"!=typeof Html5.TEST_VID.textTracks[0].mode),supportsTextTracks&&browser.IS_FIREFOX&&(supportsTextTracks=!1),!supportsTextTracks||"onremovetrack"in Html5.TEST_VID.textTracks||(supportsTextTracks=!1),supportsTextTracks},Html5.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],Html5.prototype.featuresVolumeControl=Html5.canControlVolume(),Html5.prototype.featuresPlaybackRate=Html5.canControlPlaybackRate(),Html5.prototype.movingMediaElementInDOM=!browser.IS_IOS,Html5.prototype.featuresFullscreenResize=!0,Html5.prototype.featuresProgressEvents=!0,Html5.prototype.featuresNativeTextTracks=Html5.supportsNativeTextTracks();var canPlayType=void 0,mpegurlRE=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,mp4RE=/^video\/mp4/i;Html5.patchCanPlayType=function(){browser.ANDROID_VERSION>=4&&(canPlayType||(canPlayType=Html5.TEST_VID.constructor.prototype.canPlayType),Html5.TEST_VID.constructor.prototype.canPlayType=function(type){return type&&mpegurlRE.test(type)?"maybe":canPlayType.call(this,type)}),browser.IS_OLD_ANDROID&&(canPlayType||(canPlayType=Html5.TEST_VID.constructor.prototype.canPlayType),Html5.TEST_VID.constructor.prototype.canPlayType=function(type){return type&&mp4RE.test(type)?"maybe":canPlayType.call(this,type)})},Html5.unpatchCanPlayType=function(){var r=Html5.TEST_VID.constructor.prototype.canPlayType;return Html5.TEST_VID.constructor.prototype.canPlayType=canPlayType,canPlayType=null,r},Html5.patchCanPlayType(),Html5.disposeMediaElement=function(el){if(el){for(el.parentNode&&el.parentNode.removeChild(el);el.hasChildNodes();)el.removeChild(el.firstChild);el.removeAttribute("src"),"function"==typeof el.load&&!function(){try{el.load()}catch(e){}}()}},Html5.resetMediaElement=function(el){if(el){for(var sources=el.querySelectorAll("source"),i=sources.length;i--;)el.removeChild(sources[i]);el.removeAttribute("src"),"function"==typeof el.load&&!function(){try{el.load()}catch(e){}}()}},_component2.default.registerComponent("Html5",Html5),_techJs2.default.registerTech("Html5",Html5),exports.default=Html5,module.exports=exports.default},{"../component":67,"../utils/browser.js":131,"../utils/dom.js":134,"../utils/fn.js":136,"../utils/log.js":139,"../utils/merge-options.js":140,"../utils/url.js":144,"./tech.js":121,"global/document":1,"global/window":2,"object.assign":45}],120:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _componentJs=_dereq_("../component.js"),_componentJs2=_interopRequireDefault(_componentJs),_techJs=_dereq_("./tech.js"),_techJs2=_interopRequireDefault(_techJs),_globalWindow=_dereq_("global/window"),_utilsToTitleCaseJs=(_interopRequireDefault(_globalWindow),_dereq_("../utils/to-title-case.js")),_utilsToTitleCaseJs2=_interopRequireDefault(_utilsToTitleCaseJs),MediaLoader=function(_Component){function MediaLoader(player,options,ready){if(_classCallCheck(this,MediaLoader),_Component.call(this,player,options,ready),options.playerOptions.sources&&0!==options.playerOptions.sources.length)player.src(options.playerOptions.sources);else for(var i=0,j=options.playerOptions.techOrder;i<j.length;i++){var techName=_utilsToTitleCaseJs2.default(j[i]),tech=_techJs2.default.getTech(techName);if(techName||(tech=_componentJs2.default.getComponent(techName)),tech&&tech.isSupported()){player.loadTech_(techName);break}}}return _inherits(MediaLoader,_Component),MediaLoader}(_componentJs2.default);_componentJs2.default.registerComponent("MediaLoader",MediaLoader),exports.default=MediaLoader,module.exports=exports.default},{"../component.js":67,"../utils/to-title-case.js":143,"./tech.js":121,"global/window":2}],121:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _component=_dereq_("../component"),_component2=_interopRequireDefault(_component),_tracksHtmlTrackElement=_dereq_("../tracks/html-track-element"),_tracksHtmlTrackElement2=_interopRequireDefault(_tracksHtmlTrackElement),_tracksHtmlTrackElementList=_dereq_("../tracks/html-track-element-list"),_tracksHtmlTrackElementList2=_interopRequireDefault(_tracksHtmlTrackElementList),_utilsMergeOptionsJs=_dereq_("../utils/merge-options.js"),_utilsMergeOptionsJs2=_interopRequireDefault(_utilsMergeOptionsJs),_tracksTextTrack=_dereq_("../tracks/text-track"),_tracksTextTrack2=_interopRequireDefault(_tracksTextTrack),_tracksTextTrackList=_dereq_("../tracks/text-track-list"),_tracksTextTrackList2=_interopRequireDefault(_tracksTextTrackList),_utilsFnJs=_dereq_("../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsLogJs=_dereq_("../utils/log.js"),_utilsLogJs2=_interopRequireDefault(_utilsLogJs),_utilsTimeRangesJs=_dereq_("../utils/time-ranges.js"),_utilsBufferJs=_dereq_("../utils/buffer.js"),_mediaErrorJs=_dereq_("../media-error.js"),_mediaErrorJs2=_interopRequireDefault(_mediaErrorJs),_globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),Tech=function(_Component){function Tech(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],ready=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];_classCallCheck(this,Tech),options.reportTouchActivity=!1,_Component.call(this,null,options,ready),this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),this.textTracks_=options.textTracks,this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),options.nativeCaptions!==!1&&options.nativeTextTracks!==!1||(this.featuresNativeTextTracks=!1),this.featuresNativeTextTracks||this.on("ready",this.emulateTextTracks),this.initTextTrackListeners(),this.emitTapEvents()}return _inherits(Tech,_Component),Tech.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},Tech.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},Tech.prototype.trackProgress=function(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Fn.bind(this,function(){var numBufferedPercent=this.bufferedPercent();this.bufferedPercent_!==numBufferedPercent&&this.trigger("progress"),this.bufferedPercent_=numBufferedPercent,1===numBufferedPercent&&this.stopTrackingProgress()}),500)},Tech.prototype.onDurationChange=function(){this.duration_=this.duration()},Tech.prototype.buffered=function(){return _utilsTimeRangesJs.createTimeRange(0,0)},Tech.prototype.bufferedPercent=function(){return _utilsBufferJs.bufferedPercent(this.buffered(),this.duration_)},Tech.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},Tech.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},Tech.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},Tech.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},Tech.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},Tech.prototype.dispose=function(){var textTracks=this.textTracks();if(textTracks)for(var i=textTracks.length;i--;)this.removeRemoteTextTrack(textTracks[i]);this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),_Component.prototype.dispose.call(this)},Tech.prototype.reset=function(){},Tech.prototype.error=function(err){return void 0!==err&&(err instanceof _mediaErrorJs2.default?this.error_=err:this.error_=new _mediaErrorJs2.default(err),this.trigger("error")),this.error_},Tech.prototype.played=function(){return this.hasStarted_?_utilsTimeRangesJs.createTimeRange(0,0):_utilsTimeRangesJs.createTimeRange()},Tech.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},Tech.prototype.initTextTrackListeners=function(){var textTrackListChanges=Fn.bind(this,function(){this.trigger("texttrackchange")}),tracks=this.textTracks();tracks&&(tracks.addEventListener("removetrack",textTrackListChanges),tracks.addEventListener("addtrack",textTrackListChanges),this.on("dispose",Fn.bind(this,function(){tracks.removeEventListener("removetrack",textTrackListChanges),tracks.removeEventListener("addtrack",textTrackListChanges)})))},Tech.prototype.emulateTextTracks=function(){var _this=this,tracks=this.textTracks();if(tracks){_globalWindow2.default.WebVTT||null==this.el().parentNode||!function(){var script=_globalDocument2.default.createElement("script");script.src=_this.options_["vtt.js"]||"https://cdn.rawgit.com/gkatsev/vtt.js/vjs-v0.12.1/dist/vtt.min.js",script.onload=function(){_this.trigger("vttjsloaded")},script.onerror=function(){_this.trigger("vttjserror")},_this.on("dispose",function(){script.onload=null,script.onerror=null}),_this.el().parentNode.appendChild(script),_globalWindow2.default.WebVTT=!0}();var updateDisplay=function(){return _this.trigger("texttrackchange")},textTracksChanges=function(){updateDisplay();for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener("cuechange",updateDisplay),"showing"===track.mode&&track.addEventListener("cuechange",updateDisplay)}};textTracksChanges(),tracks.addEventListener("change",textTracksChanges),this.on("dispose",function(){tracks.removeEventListener("change",textTracksChanges)})}},Tech.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new _tracksTextTrackList2.default,this.textTracks_},Tech.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new _tracksTextTrackList2.default,this.remoteTextTracks_},Tech.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new _tracksHtmlTrackElementList2.default,this.remoteTextTrackEls_},Tech.prototype.addTextTrack=function(kind,label,language){if(!kind)throw new Error("TextTrack kind is required but was not provided");return createTrackHelper(this,kind,label,language)},Tech.prototype.addRemoteTextTrack=function(options){var track=_utilsMergeOptionsJs2.default(options,{tech:this}),htmlTrackElement=new _tracksHtmlTrackElement2.default(track);return this.remoteTextTrackEls().addTrackElement_(htmlTrackElement),this.remoteTextTracks().addTrack_(htmlTrackElement.track),this.textTracks().addTrack_(htmlTrackElement.track),htmlTrackElement},Tech.prototype.removeRemoteTextTrack=function(track){this.textTracks().removeTrack_(track);var trackElement=this.remoteTextTrackEls().getTrackElementByTrack_(track);this.remoteTextTrackEls().removeTrackElement_(trackElement),this.remoteTextTracks().removeTrack_(track)},Tech.prototype.setPoster=function(){},Tech.prototype.canPlayType=function(){return""},Tech.isTech=function(component){return component.prototype instanceof Tech||component instanceof Tech||component===Tech},Tech.registerTech=function(name,tech){if(Tech.techs_||(Tech.techs_={}),!Tech.isTech(tech))throw new Error("Tech "+name+" must be a Tech");return Tech.techs_[name]=tech,tech},Tech.getTech=function(name){return Tech.techs_&&Tech.techs_[name]?Tech.techs_[name]:_globalWindow2.default&&_globalWindow2.default.videojs&&_globalWindow2.default.videojs[name]?(_utilsLogJs2.default.warn("The "+name+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),_globalWindow2.default.videojs[name]):void 0},Tech}(_component2.default);Tech.prototype.textTracks_;var createTrackHelper=function(self,kind,label,language){var options=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],tracks=self.textTracks();options.kind=kind,label&&(options.label=label),language&&(options.language=language),options.tech=self;var track=new _tracksTextTrack2.default(options);return tracks.addTrack_(track),track};Tech.prototype.featuresVolumeControl=!0,Tech.prototype.featuresFullscreenResize=!1,Tech.prototype.featuresPlaybackRate=!1,Tech.prototype.featuresProgressEvents=!1,Tech.prototype.featuresTimeupdateEvents=!1,Tech.prototype.featuresNativeTextTracks=!1,Tech.withSourceHandlers=function(_Tech){_Tech.registerSourceHandler=function(handler,index){var handlers=_Tech.sourceHandlers;handlers||(handlers=_Tech.sourceHandlers=[]),void 0===index&&(index=handlers.length),handlers.splice(index,0,handler)},_Tech.canPlayType=function(type){for(var handlers=_Tech.sourceHandlers||[],can=void 0,i=0;i<handlers.length;i++)if(can=handlers[i].canPlayType(type))return can;return""},_Tech.selectSourceHandler=function(source){for(var handlers=_Tech.sourceHandlers||[],can=void 0,i=0;i<handlers.length;i++)if(can=handlers[i].canHandleSource(source))return handlers[i];return null},_Tech.canPlaySource=function(srcObj){var sh=_Tech.selectSourceHandler(srcObj);return sh?sh.canHandleSource(srcObj):""};var deferrable=["seekable","duration"];deferrable.forEach(function(fnName){var originalFn=this[fnName];"function"==typeof originalFn&&(this[fnName]=function(){return this.sourceHandler_&&this.sourceHandler_[fnName]?this.sourceHandler_[fnName].apply(this.sourceHandler_,arguments):originalFn.apply(this,arguments)})},_Tech.prototype),_Tech.prototype.setSource=function(source){var sh=_Tech.selectSourceHandler(source);return sh||(_Tech.nativeSourceHandler?sh=_Tech.nativeSourceHandler:_utilsLogJs2.default.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),this.currentSource_=source,this.sourceHandler_=sh.handleSource(source,this),this.on("dispose",this.disposeSourceHandler),this},_Tech.prototype.disposeSourceHandler=function(){this.sourceHandler_&&this.sourceHandler_.dispose&&this.sourceHandler_.dispose()}},_component2.default.registerComponent("Tech",Tech),_component2.default.registerComponent("MediaTechController",Tech),Tech.registerTech("Tech",Tech),exports.default=Tech,module.exports=exports.default},{"../component":67,"../media-error.js":105,"../tracks/html-track-element":123,"../tracks/html-track-element-list":122,"../tracks/text-track":130,"../tracks/text-track-list":128,"../utils/buffer.js":132,"../utils/fn.js":136,"../utils/log.js":139,"../utils/merge-options.js":140,"../utils/time-ranges.js":142,"global/document":1,"global/window":2}],122:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _utilsBrowserJs=_dereq_("../utils/browser.js"),browser=_interopRequireWildcard(_utilsBrowserJs),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),HtmlTrackElementList=function(){function HtmlTrackElementList(){var trackElements=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];_classCallCheck(this,HtmlTrackElementList);var list=this;if(browser.IS_IE8){list=_globalDocument2.default.createElement("custom");for(var prop in HtmlTrackElementList.prototype)"constructor"!==prop&&(list[prop]=HtmlTrackElementList.prototype[prop])}list.trackElements_=[],Object.defineProperty(list,"length",{get:function(){return this.trackElements_.length}});for(var i=0,_length=trackElements.length;i<_length;i++)list.addTrackElement_(trackElements[i]);if(browser.IS_IE8)return list}return HtmlTrackElementList.prototype.addTrackElement_=function(trackElement){this.trackElements_.push(trackElement)},HtmlTrackElementList.prototype.getTrackElementByTrack_=function(track){for(var trackElement_=void 0,i=0,_length2=this.trackElements_.length;i<_length2;i++)if(track===this.trackElements_[i].track){trackElement_=this.trackElements_[i];break}return trackElement_},HtmlTrackElementList.prototype.removeTrackElement_=function(trackElement){for(var i=0,_length3=this.trackElements_.length;i<_length3;i++)if(trackElement===this.trackElements_[i]){this.trackElements_.splice(i,1);break}},HtmlTrackElementList}();exports.default=HtmlTrackElementList,module.exports=exports.default},{"../utils/browser.js":131,"global/document":1}],123:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _utilsBrowserJs=_dereq_("../utils/browser.js"),browser=_interopRequireWildcard(_utilsBrowserJs),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),_eventTarget=_dereq_("../event-target"),_eventTarget2=_interopRequireDefault(_eventTarget),_tracksTextTrack=_dereq_("../tracks/text-track"),_tracksTextTrack2=_interopRequireDefault(_tracksTextTrack),NONE=0,LOADING=1,LOADED=2,ERROR=3,HTMLTrackElement=function(_EventTarget){function HTMLTrackElement(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,HTMLTrackElement),_EventTarget.call(this);var readyState=void 0,trackElement=this;if(browser.IS_IE8){trackElement=_globalDocument2.default.createElement("custom");for(var prop in HTMLTrackElement.prototype)"constructor"!==prop&&(trackElement[prop]=HTMLTrackElement.prototype[prop])}var track=new _tracksTextTrack2.default(options);if(trackElement.kind=track.kind,trackElement.src=track.src,trackElement.srclang=track.language,trackElement.label=track.label,trackElement.default=track.default,Object.defineProperty(trackElement,"readyState",{get:function(){return readyState}}),Object.defineProperty(trackElement,"track",{get:function(){return track}}),readyState=NONE,track.addEventListener("loadeddata",function(){readyState=LOADED,trackElement.trigger({type:"load",target:trackElement})}),browser.IS_IE8)return trackElement}return _inherits(HTMLTrackElement,_EventTarget),HTMLTrackElement}(_eventTarget2.default);HTMLTrackElement.prototype.allowedEvents_={load:"load"},HTMLTrackElement.NONE=NONE,HTMLTrackElement.LOADING=LOADING,HTMLTrackElement.LOADED=LOADED,HTMLTrackElement.ERROR=ERROR,exports.default=HTMLTrackElement,module.exports=exports.default},{"../event-target":101,"../tracks/text-track":130,"../utils/browser.js":131,"global/document":1}],124:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _utilsBrowserJs=_dereq_("../utils/browser.js"),browser=_interopRequireWildcard(_utilsBrowserJs),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),TextTrackCueList=function(){function TextTrackCueList(cues){_classCallCheck(this,TextTrackCueList);var list=this;if(browser.IS_IE8){list=_globalDocument2.default.createElement("custom");for(var prop in TextTrackCueList.prototype)"constructor"!==prop&&(list[prop]=TextTrackCueList.prototype[prop])}if(TextTrackCueList.prototype.setCues_.call(list,cues),Object.defineProperty(list,"length",{get:function(){return this.length_}}),browser.IS_IE8)return list}return TextTrackCueList.prototype.setCues_=function(cues){var oldLength=this.length||0,i=0,l=cues.length;this.cues_=cues,this.length_=cues.length;var defineProp=function(index){""+index in this||Object.defineProperty(this,""+index,{get:function(){return this.cues_[index]}})};if(oldLength<l)for(i=oldLength;i<l;i++)defineProp.call(this,i)},TextTrackCueList.prototype.getCueById=function(id){for(var result=null,i=0,l=this.length;i<l;i++){var cue=this[i];if(cue.id===id){result=cue;break}}return result},TextTrackCueList}();exports.default=TextTrackCueList,module.exports=exports.default},{"../utils/browser.js":131,"global/document":1}],125:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function constructColor(color,opacity){return"rgba("+parseInt(color[1]+color[1],16)+","+parseInt(color[2]+color[2],16)+","+parseInt(color[3]+color[3],16)+","+opacity+")"}function tryUpdateStyle(el,style,rule){try{el.style[style]=rule}catch(e){}}exports.__esModule=!0;var _component=_dereq_("../component"),_component2=_interopRequireDefault(_component),_menuMenuJs=_dereq_("../menu/menu.js"),_menuMenuItemJs=(_interopRequireDefault(_menuMenuJs),_dereq_("../menu/menu-item.js")),_menuMenuButtonJs=(_interopRequireDefault(_menuMenuItemJs),_dereq_("../menu/menu-button.js")),_utilsFnJs=(_interopRequireDefault(_menuMenuButtonJs),_dereq_("../utils/fn.js")),Fn=_interopRequireWildcard(_utilsFnJs),_globalDocument=_dereq_("global/document"),_globalWindow=(_interopRequireDefault(_globalDocument),_dereq_("global/window")),_globalWindow2=_interopRequireDefault(_globalWindow),darkGray="#222",lightGray="#ccc",fontMap={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},TextTrackDisplay=function(_Component){function TextTrackDisplay(player,options,ready){_classCallCheck(this,TextTrackDisplay),_Component.call(this,player,options,ready),player.on("loadstart",Fn.bind(this,this.toggleDisplay)),player.on("texttrackchange",Fn.bind(this,this.updateDisplay)),player.ready(Fn.bind(this,function(){if(player.tech_&&player.tech_.featuresNativeTextTracks)return void this.hide();player.on("fullscreenchange",Fn.bind(this,this.updateDisplay));for(var tracks=this.options_.playerOptions.tracks||[],i=0;i<tracks.length;i++){var track=tracks[i];this.player_.addRemoteTextTrack(track)}var modes={captions:1,subtitles:1},trackList=this.player_.textTracks(),firstDesc=void 0,firstCaptions=void 0;if(trackList){for(var i=0;i<trackList.length;i++){var track=trackList[i];track.default&&("descriptions"!==track.kind||firstDesc?track.kind in modes&&!firstCaptions&&(firstCaptions=track):firstDesc=track)}firstCaptions?firstCaptions.mode="showing":firstDesc&&(firstDesc.mode="showing")}}))}return _inherits(TextTrackDisplay,_Component),TextTrackDisplay.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},TextTrackDisplay.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"assertive","aria-atomic":"true"})},TextTrackDisplay.prototype.clearDisplay=function(){"function"==typeof _globalWindow2.default.WebVTT&&_globalWindow2.default.WebVTT.processCues(_globalWindow2.default,[],this.el_)},TextTrackDisplay.prototype.updateDisplay=function(){var tracks=this.player_.textTracks();if(this.clearDisplay(),tracks){for(var descriptionsTrack=null,captionsSubtitlesTrack=null,i=tracks.length;i--;){var track=tracks[i];"showing"===track.mode&&("descriptions"===track.kind?descriptionsTrack=track:captionsSubtitlesTrack=track)}captionsSubtitlesTrack?this.updateForTrack(captionsSubtitlesTrack):descriptionsTrack&&this.updateForTrack(descriptionsTrack)}},TextTrackDisplay.prototype.updateForTrack=function(track){if("function"==typeof _globalWindow2.default.WebVTT&&track.activeCues){for(var overrides=this.player_.textTrackSettings.getValues(),cues=[],_i=0;_i<track.activeCues.length;_i++)cues.push(track.activeCues[_i]);_globalWindow2.default.WebVTT.processCues(_globalWindow2.default,cues,this.el_);for(var i=cues.length;i--;){var cue=cues[i];if(cue){var cueDiv=cue.displayState;if(overrides.color&&(cueDiv.firstChild.style.color=overrides.color),overrides.textOpacity&&tryUpdateStyle(cueDiv.firstChild,"color",constructColor(overrides.color||"#fff",overrides.textOpacity)),overrides.backgroundColor&&(cueDiv.firstChild.style.backgroundColor=overrides.backgroundColor),overrides.backgroundOpacity&&tryUpdateStyle(cueDiv.firstChild,"backgroundColor",constructColor(overrides.backgroundColor||"#000",overrides.backgroundOpacity)),overrides.windowColor&&(overrides.windowOpacity?tryUpdateStyle(cueDiv,"backgroundColor",constructColor(overrides.windowColor,overrides.windowOpacity)):cueDiv.style.backgroundColor=overrides.windowColor),overrides.edgeStyle&&("dropshadow"===overrides.edgeStyle?cueDiv.firstChild.style.textShadow="2px 2px 3px "+darkGray+", 2px 2px 4px "+darkGray+", 2px 2px 5px "+darkGray:"raised"===overrides.edgeStyle?cueDiv.firstChild.style.textShadow="1px 1px "+darkGray+", 2px 2px "+darkGray+", 3px 3px "+darkGray:"depressed"===overrides.edgeStyle?cueDiv.firstChild.style.textShadow="1px 1px "+lightGray+", 0 1px "+lightGray+", -1px -1px "+darkGray+", 0 -1px "+darkGray:"uniform"===overrides.edgeStyle&&(cueDiv.firstChild.style.textShadow="0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray)),overrides.fontPercent&&1!==overrides.fontPercent){var fontSize=_globalWindow2.default.parseFloat(cueDiv.style.fontSize);cueDiv.style.fontSize=fontSize*overrides.fontPercent+"px",cueDiv.style.height="auto",cueDiv.style.top="auto",cueDiv.style.bottom="2px"}overrides.fontFamily&&"default"!==overrides.fontFamily&&("small-caps"===overrides.fontFamily?cueDiv.firstChild.style.fontVariant="small-caps":cueDiv.firstChild.style.fontFamily=fontMap[overrides.fontFamily])}}}},TextTrackDisplay}(_component2.default);_component2.default.registerComponent("TextTrackDisplay",TextTrackDisplay),exports.default=TextTrackDisplay,module.exports=exports.default},{"../component":67,"../menu/menu-button.js":106,"../menu/menu-item.js":107,"../menu/menu.js":108,"../utils/fn.js":136,"global/document":1,"global/window":2}],126:[function(_dereq_,module,exports){"use strict";exports.__esModule=!0;var TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"},TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};exports.TextTrackMode=TextTrackMode,exports.TextTrackKind=TextTrackKind},{}],127:[function(_dereq_,module,exports){"use strict";exports.__esModule=!0;var trackToJson_=function(track){var ret=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(acc,prop,i){return track[prop]&&(acc[prop]=track[prop]),acc},{cues:track.cues&&Array.prototype.map.call(track.cues,function(cue){return{startTime:cue.startTime,endTime:cue.endTime,text:cue.text,id:cue.id}})});return ret},textTracksToJson=function(tech){var trackEls=tech.$$("track"),trackObjs=Array.prototype.map.call(trackEls,function(t){return t.track}),tracks=Array.prototype.map.call(trackEls,function(trackEl){var json=trackToJson_(trackEl.track);return trackEl.src&&(json.src=trackEl.src),json});return tracks.concat(Array.prototype.filter.call(tech.textTracks(),function(track){return trackObjs.indexOf(track)===-1}).map(trackToJson_))},jsonToTextTracks=function(json,tech){return json.forEach(function(track){var addedTrack=tech.addRemoteTextTrack(track).track;!track.src&&track.cues&&track.cues.forEach(function(cue){return addedTrack.addCue(cue)})}),tech.textTracks()};exports.default={textTracksToJson:textTracksToJson,jsonToTextTracks:jsonToTextTracks,trackToJson_:trackToJson_},module.exports=exports.default},{}],128:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _eventTarget=_dereq_("../event-target"),_eventTarget2=_interopRequireDefault(_eventTarget),_utilsFnJs=_dereq_("../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsBrowserJs=_dereq_("../utils/browser.js"),browser=_interopRequireWildcard(_utilsBrowserJs),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),TextTrackList=function(_EventTarget){function TextTrackList(){var tracks=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];_classCallCheck(this,TextTrackList),_EventTarget.call(this);var list=this;if(browser.IS_IE8){list=_globalDocument2.default.createElement("custom");for(var prop in TextTrackList.prototype)"constructor"!==prop&&(list[prop]=TextTrackList.prototype[prop])}list.tracks_=[],Object.defineProperty(list,"length",{get:function(){return this.tracks_.length}});for(var i=0;i<tracks.length;i++)list.addTrack_(tracks[i]);if(browser.IS_IE8)return list}return _inherits(TextTrackList,_EventTarget),TextTrackList.prototype.addTrack_=function(track){var index=this.tracks_.length;""+index in this||Object.defineProperty(this,index,{get:function(){return this.tracks_[index]}}),track.addEventListener("modechange",Fn.bind(this,function(){this.trigger("change")})),this.tracks_.indexOf(track)===-1&&(this.tracks_.push(track),this.trigger({track:track,type:"addtrack"}))},TextTrackList.prototype.removeTrack_=function(rtrack){for(var track=void 0,i=0,l=this.length;i<l;i++)if(this[i]===rtrack){track=this[i],track.off&&track.off(),this.tracks_.splice(i,1);break}track&&this.trigger({track:track,type:"removetrack"})},TextTrackList.prototype.getTrackById=function(id){for(var result=null,i=0,l=this.length;i<l;i++){var track=this[i];if(track.id===id){result=track;break}}return result},TextTrackList}(_eventTarget2.default);TextTrackList.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var _event in TextTrackList.prototype.allowedEvents_)TextTrackList.prototype["on"+_event]=null;exports.default=TextTrackList,module.exports=exports.default},{"../event-target":101,"../utils/browser.js":131,"../utils/fn.js":136,"global/document":1}],129:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function getSelectedOptionValue(target){var selectedOption=void 0;return target.selectedOptions?selectedOption=target.selectedOptions[0]:target.options&&(selectedOption=target.options[target.options.selectedIndex]),selectedOption.value}function setSelectedOption(target,value){if(value){var i=void 0;for(i=0;i<target.options.length;i++){var option=target.options[i];if(option.value===value)break}target.selectedIndex=i}}function captionOptionsMenuTemplate(){var template='<div class="vjs-tracksettings">\n      <div class="vjs-tracksettings-colors">\n        <div class="vjs-fg-color vjs-tracksetting">\n            <label class="vjs-label">Foreground</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-text-opacity vjs-opacity">\n              <select>\n                <option value="">---</option>\n                <option value="1">Opaque</option>\n                <option value="0.5">Semi-Opaque</option>\n              </select>\n            </span>\n        </div> <!-- vjs-fg-color -->\n        <div class="vjs-bg-color vjs-tracksetting">\n            <label class="vjs-label">Background</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-bg-opacity vjs-opacity">\n                <select>\n                  <option value="">---</option>\n                  <option value="1">Opaque</option>\n                  <option value="0.5">Semi-Transparent</option>\n                  <option value="0">Transparent</option>\n                </select>\n            </span>\n        </div> <!-- vjs-bg-color -->\n        <div class="window-color vjs-tracksetting">\n            <label class="vjs-label">Window</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-window-opacity vjs-opacity">\n                <select>\n                  <option value="">---</option>\n                  <option value="1">Opaque</option>\n                  <option value="0.5">Semi-Transparent</option>\n                  <option value="0">Transparent</option>\n                </select>\n            </span>\n        </div> <!-- vjs-window-color -->\n      </div> <!-- vjs-tracksettings -->\n      <div class="vjs-tracksettings-font">\n        <div class="vjs-font-percent vjs-tracksetting">\n          <label class="vjs-label">Font Size</label>\n          <select>\n            <option value="0.50">50%</option>\n            <option value="0.75">75%</option>\n            <option value="1.00" selected>100%</option>\n            <option value="1.25">125%</option>\n            <option value="1.50">150%</option>\n            <option value="1.75">175%</option>\n            <option value="2.00">200%</option>\n            <option value="3.00">300%</option>\n            <option value="4.00">400%</option>\n          </select>\n        </div> <!-- vjs-font-percent -->\n        <div class="vjs-edge-style vjs-tracksetting">\n          <label class="vjs-label">Text Edge Style</label>\n          <select>\n            <option value="none">None</option>\n            <option value="raised">Raised</option>\n            <option value="depressed">Depressed</option>\n            <option value="uniform">Uniform</option>\n            <option value="dropshadow">Dropshadow</option>\n          </select>\n        </div> <!-- vjs-edge-style -->\n        <div class="vjs-font-family vjs-tracksetting">\n          <label class="vjs-label">Font Family</label>\n          <select>\n            <option value="">Default</option>\n            <option value="monospaceSerif">Monospace Serif</option>\n            <option value="proportionalSerif">Proportional Serif</option>\n            <option value="monospaceSansSerif">Monospace Sans-Serif</option>\n            <option value="proportionalSansSerif">Proportional Sans-Serif</option>\n            <option value="casual">Casual</option>\n            <option value="script">Script</option>\n            <option value="small-caps">Small Caps</option>\n          </select>\n        </div> <!-- vjs-font-family -->\n      </div>\n    </div>\n    <div class="vjs-tracksettings-controls">\n      <button class="vjs-default-button">Defaults</button>\n      <button class="vjs-done-button">Done</button>\n    </div>';return template}exports.__esModule=!0;var _component=_dereq_("../component"),_component2=_interopRequireDefault(_component),_utilsEventsJs=_dereq_("../utils/events.js"),Events=_interopRequireWildcard(_utilsEventsJs),_utilsFnJs=_dereq_("../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsLogJs=_dereq_("../utils/log.js"),_utilsLogJs2=_interopRequireDefault(_utilsLogJs),_safeJsonParseTuple=_dereq_("safe-json-parse/tuple"),_safeJsonParseTuple2=_interopRequireDefault(_safeJsonParseTuple),_globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),TextTrackSettings=function(_Component){function TextTrackSettings(player,options){_classCallCheck(this,TextTrackSettings),_Component.call(this,player,options),this.hide(),void 0===options.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),Events.on(this.$(".vjs-done-button"),"click",Fn.bind(this,function(){this.saveSettings(),this.hide()})),Events.on(this.$(".vjs-default-button"),"click",Fn.bind(this,function(){this.$(".vjs-fg-color > select").selectedIndex=0,this.$(".vjs-bg-color > select").selectedIndex=0,this.$(".window-color > select").selectedIndex=0,this.$(".vjs-text-opacity > select").selectedIndex=0,this.$(".vjs-bg-opacity > select").selectedIndex=0,this.$(".vjs-window-opacity > select").selectedIndex=0,this.$(".vjs-edge-style select").selectedIndex=0,this.$(".vjs-font-family select").selectedIndex=0,this.$(".vjs-font-percent select").selectedIndex=2,this.updateDisplay()})),Events.on(this.$(".vjs-fg-color > select"),"change",Fn.bind(this,this.updateDisplay)),Events.on(this.$(".vjs-bg-color > select"),"change",Fn.bind(this,this.updateDisplay)),Events.on(this.$(".window-color > select"),"change",Fn.bind(this,this.updateDisplay)),Events.on(this.$(".vjs-text-opacity > select"),"change",Fn.bind(this,this.updateDisplay)),Events.on(this.$(".vjs-bg-opacity > select"),"change",Fn.bind(this,this.updateDisplay)),Events.on(this.$(".vjs-window-opacity > select"),"change",Fn.bind(this,this.updateDisplay)),Events.on(this.$(".vjs-font-percent select"),"change",Fn.bind(this,this.updateDisplay)),Events.on(this.$(".vjs-edge-style select"),"change",Fn.bind(this,this.updateDisplay)),Events.on(this.$(".vjs-font-family select"),"change",Fn.bind(this,this.updateDisplay)),this.options_.persistTextTrackSettings&&this.restoreSettings()}return _inherits(TextTrackSettings,_Component),TextTrackSettings.prototype.createEl=function(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-caption-settings vjs-modal-overlay",innerHTML:captionOptionsMenuTemplate()})},TextTrackSettings.prototype.getValues=function(){var textEdge=getSelectedOptionValue(this.$(".vjs-edge-style select")),fontFamily=getSelectedOptionValue(this.$(".vjs-font-family select")),fgColor=getSelectedOptionValue(this.$(".vjs-fg-color > select")),textOpacity=getSelectedOptionValue(this.$(".vjs-text-opacity > select")),bgColor=getSelectedOptionValue(this.$(".vjs-bg-color > select")),bgOpacity=getSelectedOptionValue(this.$(".vjs-bg-opacity > select")),windowColor=getSelectedOptionValue(this.$(".window-color > select")),windowOpacity=getSelectedOptionValue(this.$(".vjs-window-opacity > select")),fontPercent=_globalWindow2.default.parseFloat(getSelectedOptionValue(this.$(".vjs-font-percent > select"))),result={backgroundOpacity:bgOpacity,textOpacity:textOpacity,windowOpacity:windowOpacity,edgeStyle:textEdge,fontFamily:fontFamily,color:fgColor,backgroundColor:bgColor,windowColor:windowColor,fontPercent:fontPercent};for(var _name in result)(""===result[_name]||"none"===result[_name]||"fontPercent"===_name&&1===result[_name])&&delete result[_name];return result},TextTrackSettings.prototype.setValues=function(values){setSelectedOption(this.$(".vjs-edge-style select"),values.edgeStyle),setSelectedOption(this.$(".vjs-font-family select"),values.fontFamily),setSelectedOption(this.$(".vjs-fg-color > select"),values.color),setSelectedOption(this.$(".vjs-text-opacity > select"),values.textOpacity),setSelectedOption(this.$(".vjs-bg-color > select"),values.backgroundColor),setSelectedOption(this.$(".vjs-bg-opacity > select"),values.backgroundOpacity),setSelectedOption(this.$(".window-color > select"),values.windowColor),setSelectedOption(this.$(".vjs-window-opacity > select"),values.windowOpacity);var fontPercent=values.fontPercent;fontPercent&&(fontPercent=fontPercent.toFixed(2)),setSelectedOption(this.$(".vjs-font-percent > select"),fontPercent)},TextTrackSettings.prototype.restoreSettings=function(){var err=void 0,values=void 0;try{var _safeParseTuple=_safeJsonParseTuple2.default(_globalWindow2.default.localStorage.getItem("vjs-text-track-settings"));err=_safeParseTuple[0],values=_safeParseTuple[1],err&&_utilsLogJs2.default.error(err)}catch(e){_utilsLogJs2.default.warn(e)}values&&this.setValues(values)},TextTrackSettings.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var values=this.getValues();try{Object.getOwnPropertyNames(values).length>0?_globalWindow2.default.localStorage.setItem("vjs-text-track-settings",JSON.stringify(values)):_globalWindow2.default.localStorage.removeItem("vjs-text-track-settings")}catch(e){_utilsLogJs2.default.warn(e)}}},TextTrackSettings.prototype.updateDisplay=function(){var ttDisplay=this.player_.getChild("textTrackDisplay");ttDisplay&&ttDisplay.updateDisplay()},TextTrackSettings}(_component2.default);_component2.default.registerComponent("TextTrackSettings",TextTrackSettings),exports.default=TextTrackSettings,module.exports=exports.default},{"../component":67,"../utils/events.js":135,"../utils/fn.js":136,"../utils/log.js":139,"global/window":2,"safe-json-parse/tuple":54}],130:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _textTrackCueList=_dereq_("./text-track-cue-list"),_textTrackCueList2=_interopRequireDefault(_textTrackCueList),_utilsFnJs=_dereq_("../utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_utilsGuidJs=_dereq_("../utils/guid.js"),Guid=_interopRequireWildcard(_utilsGuidJs),_utilsBrowserJs=_dereq_("../utils/browser.js"),browser=_interopRequireWildcard(_utilsBrowserJs),_textTrackEnums=_dereq_("./text-track-enums"),TextTrackEnum=_interopRequireWildcard(_textTrackEnums),_utilsLogJs=_dereq_("../utils/log.js"),_utilsLogJs2=_interopRequireDefault(_utilsLogJs),_eventTarget=_dereq_("../event-target"),_eventTarget2=_interopRequireDefault(_eventTarget),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),_globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_utilsUrlJs=_dereq_("../utils/url.js"),_xhr=_dereq_("xhr"),_xhr2=_interopRequireDefault(_xhr),parseCues=function(srcContent,track){var parser=new _globalWindow2.default.WebVTT.Parser(_globalWindow2.default,_globalWindow2.default.vttjs,_globalWindow2.default.WebVTT.StringDecoder()),errors=[];parser.oncue=function(cue){track.addCue(cue)},parser.onparsingerror=function(error){errors.push(error)},parser.onflush=function(){track.trigger({type:"loadeddata",target:track})},parser.parse(srcContent),errors.length>0&&(console.groupCollapsed&&console.groupCollapsed("Text Track parsing errors for "+track.src),errors.forEach(function(error){return _utilsLogJs2.default.error(error)}),console.groupEnd&&console.groupEnd()),parser.flush()},loadTrack=function(src,track){var opts={uri:src},crossOrigin=_utilsUrlJs.isCrossOrigin(src);crossOrigin&&(opts.cors=crossOrigin),_xhr2.default(opts,Fn.bind(this,function(err,response,responseBody){return err?_utilsLogJs2.default.error(err,response):(track.loaded_=!0,void("function"!=typeof _globalWindow2.default.WebVTT?track.tech_&&!function(){var loadHandler=function(){return parseCues(responseBody,track)};track.tech_.on("vttjsloaded",loadHandler),track.tech_.on("vttjserror",function(){_utilsLogJs2.default.error("vttjs failed to load, stopping trying to process "+track.src),track.tech_.off("vttjsloaded",loadHandler)})}():parseCues(responseBody,track)))}))},TextTrack=function(_EventTarget){function TextTrack(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(_classCallCheck(this,TextTrack),_EventTarget.call(this),!options.tech)throw new Error("A tech was not provided.");var tt=this;if(browser.IS_IE8){tt=_globalDocument2.default.createElement("custom");for(var prop in TextTrack.prototype)"constructor"!==prop&&(tt[prop]=TextTrack.prototype[prop])}tt.tech_=options.tech;var mode=TextTrackEnum.TextTrackMode[options.mode]||"disabled",kind=TextTrackEnum.TextTrackKind[options.kind]||"subtitles",default_=options.default,label=options.label||"",language=options.language||options.srclang||"",id=options.id||"vjs_text_track_"+Guid.newGUID();"metadata"!==kind&&"chapters"!==kind||(mode="hidden"),tt.cues_=[],tt.activeCues_=[];var cues=new _textTrackCueList2.default(tt.cues_),activeCues=new _textTrackCueList2.default(tt.activeCues_),changed=!1,timeupdateHandler=Fn.bind(tt,function(){this.activeCues,changed&&(this.trigger("cuechange"),changed=!1)});if("disabled"!==mode&&tt.tech_.on("timeupdate",timeupdateHandler),Object.defineProperty(tt,"kind",{get:function(){return kind},set:function(){}}),Object.defineProperty(tt,"label",{get:function(){return label},set:function(){}}),Object.defineProperty(tt,"language",{get:function(){return language},set:function(){}}),Object.defineProperty(tt,"id",{get:function(){return id},set:function(){}}),Object.defineProperty(tt,"default",{get:function(){return default_},set:function(){}}),Object.defineProperty(tt,"mode",{get:function(){return mode},set:function(newMode){TextTrackEnum.TextTrackMode[newMode]&&(mode=newMode,"showing"===mode&&this.tech_.on("timeupdate",timeupdateHandler),this.trigger("modechange"))}}),Object.defineProperty(tt,"cues",{get:function(){return this.loaded_?cues:null},set:function(){}}),Object.defineProperty(tt,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return activeCues;for(var ct=this.tech_.currentTime(),active=[],i=0,l=this.cues.length;i<l;i++){var cue=this.cues[i];cue.startTime<=ct&&cue.endTime>=ct?active.push(cue):cue.startTime===cue.endTime&&cue.startTime<=ct&&cue.startTime+.5>=ct&&active.push(cue)}if(changed=!1,active.length!==this.activeCues_.length)changed=!0;else for(var i=0;i<active.length;i++)this.activeCues_.indexOf(active[i])===-1&&(changed=!0);return this.activeCues_=active,activeCues.setCues_(this.activeCues_),activeCues},set:function(){}}),options.src?(tt.src=options.src,loadTrack(options.src,tt)):tt.loaded_=!0,browser.IS_IE8)return tt}return _inherits(TextTrack,_EventTarget),TextTrack.prototype.addCue=function(cue){var tracks=this.tech_.textTracks();if(tracks)for(var i=0;i<tracks.length;i++)tracks[i]!==this&&tracks[i].removeCue(cue);this.cues_.push(cue),this.cues.setCues_(this.cues_)},TextTrack.prototype.removeCue=function(_removeCue){for(var removed=!1,i=0,l=this.cues_.length;i<l;i++){var cue=this.cues_[i];cue===_removeCue&&(this.cues_.splice(i,1),removed=!0)}removed&&this.cues.setCues_(this.cues_)},TextTrack}(_eventTarget2.default);TextTrack.prototype.allowedEvents_={cuechange:"cuechange"},exports.default=TextTrack,module.exports=exports.default},{"../event-target":101,"../utils/browser.js":131,"../utils/fn.js":136,"../utils/guid.js":138,"../utils/log.js":139,"../utils/url.js":144,"./text-track-cue-list":124,"./text-track-enums":126,"global/document":1,"global/window":2,xhr:56}],131:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),_globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),USER_AGENT=_globalWindow2.default.navigator.userAgent,webkitVersionMap=/AppleWebKit\/([\d.]+)/i.exec(USER_AGENT),appleWebkitVersion=webkitVersionMap?parseFloat(webkitVersionMap.pop()):null,IS_IPAD=/iPad/i.test(USER_AGENT);exports.IS_IPAD=IS_IPAD;var IS_IPHONE=/iPhone/i.test(USER_AGENT)&&!IS_IPAD;exports.IS_IPHONE=IS_IPHONE;var IS_IPOD=/iPod/i.test(USER_AGENT);exports.IS_IPOD=IS_IPOD;var IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD;exports.IS_IOS=IS_IOS;var IOS_VERSION=function(){var match=USER_AGENT.match(/OS (\d+)_/i);if(match&&match[1])return match[1]}();exports.IOS_VERSION=IOS_VERSION;var IS_ANDROID=/Android/i.test(USER_AGENT);exports.IS_ANDROID=IS_ANDROID;var ANDROID_VERSION=function(){var major,minor,match=USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return match?(major=match[1]&&parseFloat(match[1]),minor=match[2]&&parseFloat(match[2]),major&&minor?parseFloat(match[1]+"."+match[2]):major?major:null):null}();exports.ANDROID_VERSION=ANDROID_VERSION;var IS_OLD_ANDROID=IS_ANDROID&&/webkit/i.test(USER_AGENT)&&ANDROID_VERSION<2.3;exports.IS_OLD_ANDROID=IS_OLD_ANDROID;var IS_NATIVE_ANDROID=IS_ANDROID&&ANDROID_VERSION<5&&appleWebkitVersion<537;exports.IS_NATIVE_ANDROID=IS_NATIVE_ANDROID;var IS_FIREFOX=/Firefox/i.test(USER_AGENT);exports.IS_FIREFOX=IS_FIREFOX;var IS_EDGE=/Edge/i.test(USER_AGENT);exports.IS_EDGE=IS_EDGE;var IS_CHROME=!IS_EDGE&&/Chrome/i.test(USER_AGENT);exports.IS_CHROME=IS_CHROME;var IS_IE8=/MSIE\s8\.0/.test(USER_AGENT);exports.IS_IE8=IS_IE8;var TOUCH_ENABLED=!!("ontouchstart"in _globalWindow2.default||_globalWindow2.default.DocumentTouch&&_globalDocument2.default instanceof _globalWindow2.default.DocumentTouch);exports.TOUCH_ENABLED=TOUCH_ENABLED;var BACKGROUND_SIZE_SUPPORTED="backgroundSize"in _globalDocument2.default.createElement("video").style;exports.BACKGROUND_SIZE_SUPPORTED=BACKGROUND_SIZE_SUPPORTED},{"global/document":1,"global/window":2}],132:[function(_dereq_,module,exports){"use strict";function bufferedPercent(buffered,duration){var start,end,bufferedDuration=0;if(!duration)return 0;buffered&&buffered.length||(buffered=_timeRangesJs.createTimeRange(0,0));for(var i=0;i<buffered.length;i++)start=buffered.start(i),end=buffered.end(i),end>duration&&(end=duration),bufferedDuration+=end-start;return bufferedDuration/duration}exports.__esModule=!0,exports.bufferedPercent=bufferedPercent;var _timeRangesJs=_dereq_("./time-ranges.js")},{"./time-ranges.js":142}],133:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _logJs=_dereq_("./log.js"),_logJs2=_interopRequireDefault(_logJs),defaultBehaviors={get:function(obj,key){return obj[key]},set:function(obj,key,value){return obj[key]=value,!0}};exports.default=function(target){var messages=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("function"==typeof Proxy){var _ret=function(){var handler={};return Object.keys(messages).forEach(function(key){defaultBehaviors.hasOwnProperty(key)&&(handler[key]=function(){return _logJs2.default.warn(messages[key]),defaultBehaviors[key].apply(this,arguments)})}),{v:new Proxy(target,handler)}}();if("object"==typeof _ret)return _ret.v}return target},module.exports=exports.default},{"./log.js":139}],134:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteralLoose(strings,raw){return strings.raw=raw,strings}function isNonBlankString(str){return"string"==typeof str&&/\S/.test(str)}function throwIfWhitespace(str){if(/\s/.test(str))throw new Error("class has illegal whitespace characters")}function classRegExp(className){return new RegExp("(^|\\s)"+className+"($|\\s)")}function createQuerier(method){return function(selector,context){return isNonBlankString(selector)?(isNonBlankString(context)&&(context=_globalDocument2.default.querySelector(context)),(isEl(context)?context:_globalDocument2.default)[method](selector)):_globalDocument2.default[method](null)}}function getEl(id){return 0===id.indexOf("#")&&(id=id.slice(1)),_globalDocument2.default.getElementById(id)}function createEl(){var tagName=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],properties=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],attributes=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],el=_globalDocument2.default.createElement(tagName);return Object.getOwnPropertyNames(properties).forEach(function(propName){var val=properties[propName];propName.indexOf("aria-")!==-1||"role"===propName||"type"===propName?(_logJs2.default.warn(_tsml2.default(_templateObject,propName,val)),el.setAttribute(propName,val)):el[propName]=val}),Object.getOwnPropertyNames(attributes).forEach(function(attrName){attributes[attrName];el.setAttribute(attrName,attributes[attrName])}),el}function textContent(el,text){"undefined"==typeof el.textContent?el.innerText=text:el.textContent=text}function insertElFirst(child,parent){parent.firstChild?parent.insertBefore(child,parent.firstChild):parent.appendChild(child)}function getElData(el){var id=el[elIdAttr];return id||(id=el[elIdAttr]=Guid.newGUID()),elData[id]||(elData[id]={}),elData[id]}function hasElData(el){var id=el[elIdAttr];return!!id&&!!Object.getOwnPropertyNames(elData[id]).length}function removeElData(el){var id=el[elIdAttr];if(id){delete elData[id];try{delete el[elIdAttr]}catch(e){el.removeAttribute?el.removeAttribute(elIdAttr):el[elIdAttr]=null}}}function hasElClass(element,classToCheck){return element.classList?element.classList.contains(classToCheck):(throwIfWhitespace(classToCheck),classRegExp(classToCheck).test(element.className))}function addElClass(element,classToAdd){return element.classList?element.classList.add(classToAdd):hasElClass(element,classToAdd)||(element.className=(element.className+" "+classToAdd).trim()),element}function removeElClass(element,classToRemove){return element.classList?element.classList.remove(classToRemove):(throwIfWhitespace(classToRemove),element.className=element.className.split(/\s+/).filter(function(c){return c!==classToRemove}).join(" ")),element}function toggleElClass(element,classToToggle,predicate){var has=hasElClass(element,classToToggle);if("function"==typeof predicate&&(predicate=predicate(element,classToToggle)),"boolean"!=typeof predicate&&(predicate=!has),predicate!==has)return predicate?addElClass(element,classToToggle):removeElClass(element,classToToggle),element}function setElAttributes(el,attributes){Object.getOwnPropertyNames(attributes).forEach(function(attrName){var attrValue=attributes[attrName];null===attrValue||"undefined"==typeof attrValue||attrValue===!1?el.removeAttribute(attrName):el.setAttribute(attrName,attrValue===!0?"":attrValue)})}function getElAttributes(tag){var obj,knownBooleans,attrs,attrName,attrVal;if(obj={},knownBooleans=",autoplay,controls,loop,muted,default,",tag&&tag.attributes&&tag.attributes.length>0){attrs=tag.attributes;for(var i=attrs.length-1;i>=0;i--)attrName=attrs[i].name,attrVal=attrs[i].value,"boolean"!=typeof tag[attrName]&&knownBooleans.indexOf(","+attrName+",")===-1||(attrVal=null!==attrVal),obj[attrName]=attrVal}return obj}function blockTextSelection(){_globalDocument2.default.body.focus(),_globalDocument2.default.onselectstart=function(){return!1}}function unblockTextSelection(){_globalDocument2.default.onselectstart=function(){return!0}}function findElPosition(el){var box=void 0;if(el.getBoundingClientRect&&el.parentNode&&(box=el.getBoundingClientRect()),!box)return{left:0,top:0};var docEl=_globalDocument2.default.documentElement,body=_globalDocument2.default.body,clientLeft=docEl.clientLeft||body.clientLeft||0,scrollLeft=_globalWindow2.default.pageXOffset||body.scrollLeft,left=box.left+scrollLeft-clientLeft,clientTop=docEl.clientTop||body.clientTop||0,scrollTop=_globalWindow2.default.pageYOffset||body.scrollTop,top=box.top+scrollTop-clientTop;return{left:Math.round(left),top:Math.round(top)}}function getPointerPosition(el,event){var position={},box=findElPosition(el),boxW=el.offsetWidth,boxH=el.offsetHeight,boxY=box.top,boxX=box.left,pageY=event.pageY,pageX=event.pageX;return event.changedTouches&&(pageX=event.changedTouches[0].pageX,pageY=event.changedTouches[0].pageY),position.y=Math.max(0,Math.min(1,(boxY-pageY+boxH)/boxH)),position.x=Math.max(0,Math.min(1,(pageX-boxX)/boxW)),position}function isEl(value){return!!value&&"object"==typeof value&&1===value.nodeType}function isTextNode(value){return!!value&&"object"==typeof value&&3===value.nodeType}function emptyEl(el){for(;el.firstChild;)el.removeChild(el.firstChild);return el}function normalizeContent(content){return"function"==typeof content&&(content=content()),(Array.isArray(content)?content:[content]).map(function(value){return"function"==typeof value&&(value=value()),isEl(value)||isTextNode(value)?value:"string"==typeof value&&/\S/.test(value)?_globalDocument2.default.createTextNode(value):void 0}).filter(function(value){return value})}function appendContent(el,content){return normalizeContent(content).forEach(function(node){return el.appendChild(node)}),el}function insertContent(el,content){return appendContent(emptyEl(el),content)}exports.__esModule=!0,exports.getEl=getEl,exports.createEl=createEl,exports.textContent=textContent,exports.insertElFirst=insertElFirst,exports.getElData=getElData,exports.hasElData=hasElData,exports.removeElData=removeElData,exports.hasElClass=hasElClass,exports.addElClass=addElClass,exports.removeElClass=removeElClass,exports.toggleElClass=toggleElClass,exports.setElAttributes=setElAttributes,exports.getElAttributes=getElAttributes,exports.blockTextSelection=blockTextSelection,exports.unblockTextSelection=unblockTextSelection,exports.findElPosition=findElPosition,exports.getPointerPosition=getPointerPosition,exports.isEl=isEl,exports.isTextNode=isTextNode,exports.emptyEl=emptyEl,exports.normalizeContent=normalizeContent,exports.appendContent=appendContent,exports.insertContent=insertContent;var _templateObject=_taggedTemplateLiteralLoose(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),_globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_guidJs=_dereq_("./guid.js"),Guid=_interopRequireWildcard(_guidJs),_logJs=_dereq_("./log.js"),_logJs2=_interopRequireDefault(_logJs),_tsml=_dereq_("tsml"),_tsml2=_interopRequireDefault(_tsml),elData={},elIdAttr="vdata"+(new Date).getTime(),$=createQuerier("querySelector");exports.$=$;var $$=createQuerier("querySelectorAll");exports.$$=$$},{"./guid.js":138,"./log.js":139,"global/document":1,"global/window":2,tsml:55}],135:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function on(elem,type,fn){if(Array.isArray(type))return _handleMultipleEvents(on,elem,type,fn);var data=Dom.getElData(elem);data.handlers||(data.handlers={}),data.handlers[type]||(data.handlers[type]=[]),fn.guid||(fn.guid=Guid.newGUID()),data.handlers[type].push(fn),data.dispatcher||(data.disabled=!1,data.dispatcher=function(event,hash){if(!data.disabled){event=fixEvent(event);var handlers=data.handlers[event.type];if(handlers)for(var handlersCopy=handlers.slice(0),m=0,n=handlersCopy.length;m<n&&!event.isImmediatePropagationStopped();m++)handlersCopy[m].call(elem,event,hash)}}),1===data.handlers[type].length&&(elem.addEventListener?elem.addEventListener(type,data.dispatcher,!1):elem.attachEvent&&elem.attachEvent("on"+type,data.dispatcher))}function off(elem,type,fn){if(Dom.hasElData(elem)){var data=Dom.getElData(elem);if(data.handlers){if(Array.isArray(type))return _handleMultipleEvents(off,elem,type,fn);var removeType=function(t){data.handlers[t]=[],_cleanUpEvents(elem,t)};if(type){var handlers=data.handlers[type];if(handlers){if(!fn)return void removeType(type);if(fn.guid)for(var n=0;n<handlers.length;n++)handlers[n].guid===fn.guid&&handlers.splice(n--,1);_cleanUpEvents(elem,type)}}else for(var t in data.handlers)removeType(t)}}}function trigger(elem,event,hash){var elemData=Dom.hasElData(elem)?Dom.getElData(elem):{},parent=elem.parentNode||elem.ownerDocument;if("string"==typeof event&&(event={type:event,target:elem}),event=fixEvent(event),elemData.dispatcher&&elemData.dispatcher.call(elem,event,hash),parent&&!event.isPropagationStopped()&&event.bubbles===!0)trigger.call(null,parent,event,hash);else if(!parent&&!event.defaultPrevented){var targetData=Dom.getElData(event.target);event.target[event.type]&&(targetData.disabled=!0,"function"==typeof event.target[event.type]&&event.target[event.type](),targetData.disabled=!1)}return!event.defaultPrevented}function one(elem,type,fn){if(Array.isArray(type))return _handleMultipleEvents(one,elem,type,fn);var func=function func(){off(elem,type,func),fn.apply(this,arguments)};func.guid=fn.guid=fn.guid||Guid.newGUID(),on(elem,type,func)}function fixEvent(event){function returnTrue(){return!0}function returnFalse(){return!1}if(!event||!event.isPropagationStopped){var old=event||_globalWindow2.default.event;event={};for(var key in old)"layerX"!==key&&"layerY"!==key&&"keyLocation"!==key&&"webkitMovementX"!==key&&"webkitMovementY"!==key&&("returnValue"===key&&old.preventDefault||(event[key]=old[key]));if(event.target||(event.target=event.srcElement||_globalDocument2.default),event.relatedTarget||(event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement),event.preventDefault=function(){old.preventDefault&&old.preventDefault(),event.returnValue=!1,old.returnValue=!1,event.defaultPrevented=!0},event.defaultPrevented=!1,event.stopPropagation=function(){old.stopPropagation&&old.stopPropagation(),event.cancelBubble=!0,old.cancelBubble=!0,event.isPropagationStopped=returnTrue},event.isPropagationStopped=returnFalse,event.stopImmediatePropagation=function(){old.stopImmediatePropagation&&old.stopImmediatePropagation(),event.isImmediatePropagationStopped=returnTrue,event.stopPropagation()},event.isImmediatePropagationStopped=returnFalse,null!=event.clientX){var doc=_globalDocument2.default.documentElement,body=_globalDocument2.default.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}event.which=event.charCode||event.keyCode,null!=event.button&&(event.button=1&event.button?0:4&event.button?1:2&event.button?2:0)}return event}function _cleanUpEvents(elem,type){var data=Dom.getElData(elem);0===data.handlers[type].length&&(delete data.handlers[type],elem.removeEventListener?elem.removeEventListener(type,data.dispatcher,!1):elem.detachEvent&&elem.detachEvent("on"+type,data.dispatcher)),Object.getOwnPropertyNames(data.handlers).length<=0&&(delete data.handlers,delete data.dispatcher,delete data.disabled),0===Object.getOwnPropertyNames(data).length&&Dom.removeElData(elem)}function _handleMultipleEvents(fn,elem,types,callback){types.forEach(function(type){fn(elem,type,callback)})}exports.__esModule=!0,exports.on=on,exports.off=off,exports.trigger=trigger,exports.one=one,exports.fixEvent=fixEvent;var _domJs=_dereq_("./dom.js"),Dom=_interopRequireWildcard(_domJs),_guidJs=_dereq_("./guid.js"),Guid=_interopRequireWildcard(_guidJs),_globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument)},{"./dom.js":134,"./guid.js":138,"global/document":1,"global/window":2}],136:[function(_dereq_,module,exports){"use strict";exports.__esModule=!0;var _guidJs=_dereq_("./guid.js"),bind=function(context,fn,uid){fn.guid||(fn.guid=_guidJs.newGUID());var ret=function(){return fn.apply(context,arguments)};return ret.guid=uid?uid+"_"+fn.guid:fn.guid,ret};exports.bind=bind},{"./guid.js":138}],137:[function(_dereq_,module,exports){"use strict";function formatTime(seconds){var guide=arguments.length<=1||void 0===arguments[1]?seconds:arguments[1];return function(){seconds=seconds<0?0:seconds;var s=Math.floor(seconds%60),m=Math.floor(seconds/60%60),h=Math.floor(seconds/3600),gm=Math.floor(guide/60%60),gh=Math.floor(guide/3600);return(isNaN(seconds)||seconds===1/0)&&(h=m=s="-"),h=h>0||gh>0?h+":":"",m=((h||gm>=10)&&m<10?"0"+m:m)+":",s=s<10?"0"+s:s,h+m+s}()}exports.__esModule=!0,exports.default=formatTime,module.exports=exports.default},{}],138:[function(_dereq_,module,exports){"use strict";function newGUID(){return _guid++}exports.__esModule=!0,exports.newGUID=newGUID;var _guid=1},{}],139:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _logType(type,args){var argsArray=Array.prototype.slice.call(args),noop=function(){},console=_globalWindow2.default.console||{log:noop,warn:noop,error:noop};type?argsArray.unshift(type.toUpperCase()+":"):type="log",log.history.push(argsArray),argsArray.unshift("VIDEOJS:"),console[type].apply?console[type].apply(console,argsArray):console[type](argsArray.join(" "))}exports.__esModule=!0;var _globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),log=function(){_logType(null,arguments)};log.history=[],log.error=function(){_logType("error",arguments)},log.warn=function(){_logType("warn",arguments)},exports.default=log,module.exports=exports.default},{"global/window":2}],140:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isPlain(obj){return!!obj&&"object"==typeof obj&&"[object Object]"===obj.toString()&&obj.constructor===Object}function mergeOptions(){var args=Array.prototype.slice.call(arguments);return args.unshift({}),args.push(customizer),_lodashCompatObjectMerge2.default.apply(null,args),args[0]}exports.__esModule=!0,exports.default=mergeOptions;var _lodashCompatObjectMerge=_dereq_("lodash-compat/object/merge"),_lodashCompatObjectMerge2=_interopRequireDefault(_lodashCompatObjectMerge),customizer=function(destination,source){return isPlain(source)?isPlain(destination)?void 0:mergeOptions(source):source};module.exports=exports.default},{"lodash-compat/object/merge":40}],141:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),createStyleElement=function(className){var style=_globalDocument2.default.createElement("style");return style.className=className,style};exports.createStyleElement=createStyleElement;var setTextContent=function(el,content){el.styleSheet?el.styleSheet.cssText=content:el.textContent=content};exports.setTextContent=setTextContent},{"global/document":1}],142:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createTimeRanges(start,end){return Array.isArray(start)?createTimeRangesObj(start):void 0===start||void 0===end?createTimeRangesObj():createTimeRangesObj([[start,end]])}function createTimeRangesObj(ranges){return void 0===ranges||0===ranges.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:ranges.length,start:getRange.bind(null,"start",0,ranges),end:getRange.bind(null,"end",1,ranges)}}function getRange(fnName,valueIndex,ranges,rangeIndex){return void 0===rangeIndex&&(_logJs2.default.warn("DEPRECATED: Function '"+fnName+"' on 'TimeRanges' called without an index argument."),rangeIndex=0),rangeCheck(fnName,rangeIndex,ranges.length-1),ranges[rangeIndex][valueIndex]}function rangeCheck(fnName,index,maxIndex){if(index<0||index>maxIndex)throw new Error("Failed to execute '"+fnName+"' on 'TimeRanges': The index provided ("+index+") is greater than or equal to the maximum bound ("+maxIndex+").")}exports.__esModule=!0,exports.createTimeRanges=createTimeRanges;var _logJs=_dereq_("./log.js"),_logJs2=_interopRequireDefault(_logJs);exports.createTimeRange=createTimeRanges},{"./log.js":139}],143:[function(_dereq_,module,exports){"use strict";function toTitleCase(string){return string.charAt(0).toUpperCase()+string.slice(1)}exports.__esModule=!0,exports.default=toTitleCase,module.exports=exports.default},{}],144:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),_globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),parseUrl=function(url){var props=["protocol","hostname","port","pathname","search","hash","host"],a=_globalDocument2.default.createElement("a");a.href=url;var addToBody=""===a.host&&"file:"!==a.protocol,div=void 0;addToBody&&(div=_globalDocument2.default.createElement("div"),div.innerHTML='<a href="'+url+'"></a>',a=div.firstChild,div.setAttribute("style","display:none; position:absolute;"),_globalDocument2.default.body.appendChild(div));for(var details={},i=0;i<props.length;i++)details[props[i]]=a[props[i]];return"http:"===details.protocol&&(details.host=details.host.replace(/:80$/,"")),"https:"===details.protocol&&(details.host=details.host.replace(/:443$/,"")),addToBody&&_globalDocument2.default.body.removeChild(div),details};exports.parseUrl=parseUrl;var getAbsoluteURL=function(url){if(!url.match(/^https?:\/\//)){var div=_globalDocument2.default.createElement("div");div.innerHTML='<a href="'+url+'">x</a>',url=div.firstChild.href}return url};exports.getAbsoluteURL=getAbsoluteURL;var getFileExtension=function(path){if("string"==typeof path){var splitPathRe=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,pathParts=splitPathRe.exec(path);if(pathParts)return pathParts.pop().toLowerCase()}return""};exports.getFileExtension=getFileExtension;var isCrossOrigin=function(url){var winLoc=_globalWindow2.default.location,urlInfo=parseUrl(url),srcProtocol=":"===urlInfo.protocol?winLoc.protocol:urlInfo.protocol,crossOrigin=srcProtocol+urlInfo.host!==winLoc.protocol+winLoc.host;return crossOrigin};exports.isCrossOrigin=isCrossOrigin},{"global/document":1,"global/window":2}],145:[function(_dereq_,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _globalWindow=_dereq_("global/window"),_globalWindow2=_interopRequireDefault(_globalWindow),_globalDocument=_dereq_("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),_setup=_dereq_("./setup"),setup=_interopRequireWildcard(_setup),_utilsStylesheetJs=_dereq_("./utils/stylesheet.js"),stylesheet=_interopRequireWildcard(_utilsStylesheetJs),_component=_dereq_("./component"),_component2=_interopRequireDefault(_component),_eventTarget=_dereq_("./event-target"),_eventTarget2=_interopRequireDefault(_eventTarget),_utilsEventsJs=_dereq_("./utils/events.js"),Events=_interopRequireWildcard(_utilsEventsJs),_player=_dereq_("./player"),_player2=_interopRequireDefault(_player),_pluginsJs=_dereq_("./plugins.js"),_pluginsJs2=_interopRequireDefault(_pluginsJs),_srcJsUtilsMergeOptionsJs=_dereq_("../../src/js/utils/merge-options.js"),_srcJsUtilsMergeOptionsJs2=_interopRequireDefault(_srcJsUtilsMergeOptionsJs),_utilsFnJs=_dereq_("./utils/fn.js"),Fn=_interopRequireWildcard(_utilsFnJs),_tracksTextTrackJs=_dereq_("./tracks/text-track.js"),_tracksTextTrackJs2=_interopRequireDefault(_tracksTextTrackJs),_objectAssign=_dereq_("object.assign"),_utilsTimeRangesJs=(_interopRequireDefault(_objectAssign),_dereq_("./utils/time-ranges.js")),_utilsFormatTimeJs=_dereq_("./utils/format-time.js"),_utilsFormatTimeJs2=_interopRequireDefault(_utilsFormatTimeJs),_utilsLogJs=_dereq_("./utils/log.js"),_utilsLogJs2=_interopRequireDefault(_utilsLogJs),_utilsDomJs=_dereq_("./utils/dom.js"),Dom=_interopRequireWildcard(_utilsDomJs),_utilsBrowserJs=_dereq_("./utils/browser.js"),browser=_interopRequireWildcard(_utilsBrowserJs),_utilsUrlJs=_dereq_("./utils/url.js"),Url=_interopRequireWildcard(_utilsUrlJs),_extendJs=_dereq_("./extend.js"),_extendJs2=_interopRequireDefault(_extendJs),_lodashCompatObjectMerge=_dereq_("lodash-compat/object/merge"),_lodashCompatObjectMerge2=_interopRequireDefault(_lodashCompatObjectMerge),_utilsCreateDeprecationProxyJs=_dereq_("./utils/create-deprecation-proxy.js"),_utilsCreateDeprecationProxyJs2=_interopRequireDefault(_utilsCreateDeprecationProxyJs),_xhr=_dereq_("xhr"),_xhr2=_interopRequireDefault(_xhr),_techTechJs=_dereq_("./tech/tech.js"),_techTechJs2=_interopRequireDefault(_techTechJs),_techHtml5Js=_dereq_("./tech/html5.js"),_techFlashJs=(_interopRequireDefault(_techHtml5Js),_dereq_("./tech/flash.js"));_interopRequireDefault(_techFlashJs);"undefined"==typeof HTMLVideoElement&&(_globalDocument2.default.createElement("video"),_globalDocument2.default.createElement("audio"),_globalDocument2.default.createElement("track"));var videojs=function videojs(id,options,ready){var tag=void 0;if("string"==typeof id){if(0===id.indexOf("#")&&(id=id.slice(1)),videojs.getPlayers()[id])return options&&_utilsLogJs2.default.warn('Player "'+id+'" is already initialised. Options will not be applied.'),ready&&videojs.getPlayers()[id].ready(ready),videojs.getPlayers()[id];tag=Dom.getEl(id)}else tag=id;if(!tag||!tag.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return tag.player||_player2.default.players[tag.playerId]||new _player2.default(tag,options,ready)};if(_globalWindow2.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0){var style=Dom.$(".vjs-styles-defaults");if(!style){style=stylesheet.createStyleElement("vjs-styles-defaults");var head=Dom.$("head");head.insertBefore(style,head.firstChild),stylesheet.setTextContent(style,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}setup.autoSetupTimeout(1,videojs),videojs.VERSION="5.9.2",videojs.options=_player2.default.prototype.options_,videojs.getPlayers=function(){return _player2.default.players},videojs.players=_utilsCreateDeprecationProxyJs2.default(_player2.default.players,{get:"Access to videojs.players is deprecated; use videojs.getPlayers instead",set:"Modification of videojs.players is deprecated"}),videojs.getComponent=_component2.default.getComponent,videojs.registerComponent=function(name,comp){_techTechJs2.default.isTech(comp)&&_utilsLogJs2.default.warn("The "+name+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),_component2.default.registerComponent.call(_component2.default,name,comp)},videojs.getTech=_techTechJs2.default.getTech,videojs.registerTech=_techTechJs2.default.registerTech,videojs.browser=browser,videojs.TOUCH_ENABLED=browser.TOUCH_ENABLED,videojs.extend=_extendJs2.default,videojs.mergeOptions=_srcJsUtilsMergeOptionsJs2.default,videojs.bind=Fn.bind,videojs.plugin=_pluginsJs2.default,videojs.addLanguage=function(code,data){var _merge;return code=(""+code).toLowerCase(),_lodashCompatObjectMerge2.default(videojs.options.languages,(_merge={},_merge[code]=data,_merge))[code]},videojs.log=_utilsLogJs2.default,videojs.createTimeRange=videojs.createTimeRanges=_utilsTimeRangesJs.createTimeRanges,videojs.formatTime=_utilsFormatTimeJs2.default,videojs.parseUrl=Url.parseUrl,videojs.isCrossOrigin=Url.isCrossOrigin,videojs.EventTarget=_eventTarget2.default,videojs.on=Events.on,videojs.one=Events.one,videojs.off=Events.off,videojs.trigger=Events.trigger,videojs.xhr=_xhr2.default,videojs.TextTrack=_tracksTextTrackJs2.default,videojs.isEl=Dom.isEl,videojs.isTextNode=Dom.isTextNode,videojs.createEl=Dom.createEl,videojs.hasClass=Dom.hasElClass,videojs.addClass=Dom.addElClass,videojs.removeClass=Dom.removeElClass,videojs.toggleClass=Dom.toggleElClass,videojs.setAttributes=Dom.setElAttributes,videojs.getAttributes=Dom.getElAttributes,videojs.emptyEl=Dom.emptyEl,videojs.appendContent=Dom.appendContent,videojs.insertContent=Dom.insertContent,"function"==typeof define&&define.amd?define("videojs",[],function(){return videojs}):"object"==typeof exports&&"object"==typeof module&&(module.exports=videojs),exports.default=videojs,module.exports=exports.default},{"../../src/js/utils/merge-options.js":140,"./component":67,"./event-target":101,"./extend.js":102,"./player":110,"./plugins.js":111,"./setup":115,"./tech/flash.js":118,"./tech/html5.js":119,"./tech/tech.js":121,"./tracks/text-track.js":130,"./utils/browser.js":131,"./utils/create-deprecation-proxy.js":133,"./utils/dom.js":134,"./utils/events.js":135,"./utils/fn.js":136,"./utils/format-time.js":137,"./utils/log.js":139,"./utils/stylesheet.js":141,"./utils/time-ranges.js":142,"./utils/url.js":144,"global/document":1,"global/window":2,"lodash-compat/object/merge":40,"object.assign":45,xhr:56}]},{},[145])(145)}),function(root){var vttjs=root.vttjs={},cueShim=vttjs.VTTCue,regionShim=vttjs.VTTRegion,oldVTTCue=root.VTTCue,oldVTTRegion=root.VTTRegion;vttjs.shim=function(){vttjs.VTTCue=cueShim,vttjs.VTTRegion=regionShim},vttjs.restore=function(){vttjs.VTTCue=oldVTTCue,vttjs.VTTRegion=oldVTTRegion}}(this),function(root,vttjs){function findDirectionSetting(value){if("string"!=typeof value)return!1;var dir=directionSetting[value.toLowerCase()];return!!dir&&value.toLowerCase()}function findAlignSetting(value){if("string"!=typeof value)return!1;var align=alignSetting[value.toLowerCase()];return!!align&&value.toLowerCase()}function extend(obj){for(var i=1;i<arguments.length;i++){var cobj=arguments[i];for(var p in cobj)obj[p]=cobj[p]}return obj}function VTTCue(startTime,endTime,text){var cue=this,isIE8=/MSIE\s8\.0/.test(navigator.userAgent),baseObj={};isIE8?cue=document.createElement("custom"):baseObj.enumerable=!0,cue.hasBeenReset=!1;var _id="",_pauseOnExit=!1,_startTime=startTime,_endTime=endTime,_text=text,_region=null,_vertical="",_snapToLines=!0,_line="auto",_lineAlign="start",_position=50,_positionAlign="middle",_size=50,_align="middle";if(Object.defineProperty(cue,"id",extend({},baseObj,{get:function(){return _id},set:function(value){_id=""+value}})),Object.defineProperty(cue,"pauseOnExit",extend({},baseObj,{get:function(){return _pauseOnExit},set:function(value){_pauseOnExit=!!value}})),Object.defineProperty(cue,"startTime",extend({},baseObj,{get:function(){return _startTime},set:function(value){if("number"!=typeof value)throw new TypeError("Start time must be set to a number.");_startTime=value,this.hasBeenReset=!0}})),Object.defineProperty(cue,"endTime",extend({},baseObj,{get:function(){return _endTime},set:function(value){if("number"!=typeof value)throw new TypeError("End time must be set to a number.");_endTime=value,this.hasBeenReset=!0}})),Object.defineProperty(cue,"text",extend({},baseObj,{get:function(){return _text},set:function(value){_text=""+value,this.hasBeenReset=!0}})),Object.defineProperty(cue,"region",extend({},baseObj,{get:function(){return _region},set:function(value){_region=value,this.hasBeenReset=!0}})),Object.defineProperty(cue,"vertical",extend({},baseObj,{get:function(){return _vertical},set:function(value){var setting=findDirectionSetting(value);if(setting===!1)throw new SyntaxError("An invalid or illegal string was specified.");_vertical=setting,this.hasBeenReset=!0}})),Object.defineProperty(cue,"snapToLines",extend({},baseObj,{get:function(){return _snapToLines},set:function(value){_snapToLines=!!value,this.hasBeenReset=!0}})),Object.defineProperty(cue,"line",extend({},baseObj,{get:function(){return _line},set:function(value){if("number"!=typeof value&&value!==autoKeyword)throw new SyntaxError("An invalid number or illegal string was specified.");_line=value,this.hasBeenReset=!0}})),Object.defineProperty(cue,"lineAlign",extend({},baseObj,{get:function(){return _lineAlign},set:function(value){var setting=findAlignSetting(value);if(!setting)throw new SyntaxError("An invalid or illegal string was specified.");_lineAlign=setting,this.hasBeenReset=!0}})),Object.defineProperty(cue,"position",extend({},baseObj,{get:function(){return _position},set:function(value){if(value<0||value>100)throw new Error("Position must be between 0 and 100.");_position=value,this.hasBeenReset=!0}})),Object.defineProperty(cue,"positionAlign",extend({},baseObj,{get:function(){return _positionAlign},set:function(value){var setting=findAlignSetting(value);if(!setting)throw new SyntaxError("An invalid or illegal string was specified.");_positionAlign=setting,this.hasBeenReset=!0}})),Object.defineProperty(cue,"size",extend({},baseObj,{get:function(){return _size},set:function(value){if(value<0||value>100)throw new Error("Size must be between 0 and 100.");_size=value,this.hasBeenReset=!0}})),Object.defineProperty(cue,"align",extend({},baseObj,{get:function(){return _align},set:function(value){var setting=findAlignSetting(value);if(!setting)throw new SyntaxError("An invalid or illegal string was specified.");_align=setting,this.hasBeenReset=!0}})),cue.displayState=void 0,isIE8)return cue}var autoKeyword="auto",directionSetting={"":!0,lr:!0,rl:!0},alignSetting={start:!0,middle:!0,end:!0,left:!0,right:!0};VTTCue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},root.VTTCue=root.VTTCue||VTTCue,vttjs.VTTCue=VTTCue}(this,this.vttjs||{}),function(root,vttjs){function findScrollSetting(value){if("string"!=typeof value)return!1;var scroll=scrollSetting[value.toLowerCase()];return!!scroll&&value.toLowerCase()}function isValidPercentValue(value){return"number"==typeof value&&value>=0&&value<=100}function VTTRegion(){var _width=100,_lines=3,_regionAnchorX=0,_regionAnchorY=100,_viewportAnchorX=0,_viewportAnchorY=100,_scroll="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return _width},set:function(value){if(!isValidPercentValue(value))throw new Error("Width must be between 0 and 100.");_width=value}},lines:{enumerable:!0,get:function(){return _lines},set:function(value){if("number"!=typeof value)throw new TypeError("Lines must be set to a number.");_lines=value}},regionAnchorY:{enumerable:!0,get:function(){return _regionAnchorY},set:function(value){if(!isValidPercentValue(value))throw new Error("RegionAnchorX must be between 0 and 100.");_regionAnchorY=value}},regionAnchorX:{enumerable:!0,get:function(){return _regionAnchorX},set:function(value){if(!isValidPercentValue(value))throw new Error("RegionAnchorY must be between 0 and 100.");_regionAnchorX=value}},viewportAnchorY:{enumerable:!0,get:function(){return _viewportAnchorY},set:function(value){if(!isValidPercentValue(value))throw new Error("ViewportAnchorY must be between 0 and 100.");_viewportAnchorY=value}},viewportAnchorX:{enumerable:!0,get:function(){return _viewportAnchorX},set:function(value){if(!isValidPercentValue(value))throw new Error("ViewportAnchorX must be between 0 and 100.");_viewportAnchorX=value}},scroll:{enumerable:!0,get:function(){return _scroll},set:function(value){var setting=findScrollSetting(value);if(setting===!1)throw new SyntaxError("An invalid or illegal string was specified.");_scroll=setting}}})}var scrollSetting={"":!0,up:!0};root.VTTRegion=root.VTTRegion||VTTRegion,vttjs.VTTRegion=VTTRegion}(this,this.vttjs||{}),function(global){function ParsingError(errorData,message){this.name="ParsingError",this.code=errorData.code,this.message=message||errorData.message}function parseTimeStamp(input){function computeSeconds(h,m,s,f){return 3600*(0|h)+60*(0|m)+(0|s)+(0|f)/1e3}var m=input.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return m?m[3]?computeSeconds(m[1],m[2],m[3].replace(":",""),m[4]):m[1]>59?computeSeconds(m[1],m[2],0,m[4]):computeSeconds(0,m[1],m[2],m[4]):null}function Settings(){this.values=_objCreate(null)}function parseOptions(input,callback,keyValueDelim,groupDelim){var groups=groupDelim?input.split(groupDelim):[input];for(var i in groups)if("string"==typeof groups[i]){var kv=groups[i].split(keyValueDelim);if(2===kv.length){var k=kv[0],v=kv[1];callback(k,v)}}}function parseCue(input,cue,regionList){function consumeTimeStamp(){var ts=parseTimeStamp(input);if(null===ts)throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed timestamp: "+oInput);return input=input.replace(/^[^\sa-zA-Z-]+/,""),ts}function consumeCueSettings(input,cue){var settings=new Settings;parseOptions(input,function(k,v){switch(k){case"region":for(var i=regionList.length-1;i>=0;i--)if(regionList[i].id===v){settings.set(k,regionList[i].region);break}break;case"vertical":settings.alt(k,v,["rl","lr"]);break;case"line":var vals=v.split(","),vals0=vals[0];settings.integer(k,vals0),settings.percent(k,vals0)?settings.set("snapToLines",!1):null,settings.alt(k,vals0,["auto"]),2===vals.length&&settings.alt("lineAlign",vals[1],["start","middle","end"]);break;case"position":vals=v.split(","),settings.percent(k,vals[0]),2===vals.length&&settings.alt("positionAlign",vals[1],["start","middle","end"]);break;case"size":settings.percent(k,v);break;case"align":settings.alt(k,v,["start","middle","end","left","right"])}},/:/,/\s/),cue.region=settings.get("region",null),cue.vertical=settings.get("vertical",""),cue.line=settings.get("line","auto"),cue.lineAlign=settings.get("lineAlign","start"),cue.snapToLines=settings.get("snapToLines",!0),cue.size=settings.get("size",100),cue.align=settings.get("align","middle"),cue.position=settings.get("position",{start:0,left:0,middle:50,end:100,right:100},cue.align),cue.positionAlign=settings.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},cue.align)}function skipWhitespace(){input=input.replace(/^\s+/,"")}var oInput=input;if(skipWhitespace(),cue.startTime=consumeTimeStamp(),skipWhitespace(),"-->"!==input.substr(0,3))throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+oInput);input=input.substr(3),skipWhitespace(),cue.endTime=consumeTimeStamp(),skipWhitespace(),consumeCueSettings(input,cue)}function parseContent(window,input){function nextToken(){function consume(result){return input=input.substr(result.length),result}if(!input)return null;var m=input.match(/^([^<]*)(<[^>]+>?)?/);return consume(m[1]?m[1]:m[2])}function unescape1(e){return ESCAPE[e]}function unescape(s){for(;m=s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)s=s.replace(m[0],unescape1);return s}function shouldAdd(current,element){return!NEEDS_PARENT[element.localName]||NEEDS_PARENT[element.localName]===current.localName}function createElement(type,annotation){var tagName=TAG_NAME[type];if(!tagName)return null;var element=window.document.createElement(tagName);element.localName=tagName;var name=TAG_ANNOTATION[type];return name&&annotation&&(element[name]=annotation.trim()),element}for(var t,rootDiv=window.document.createElement("div"),current=rootDiv,tagStack=[];null!==(t=nextToken());)if("<"!==t[0])current.appendChild(window.document.createTextNode(unescape(t)));else{if("/"===t[1]){tagStack.length&&tagStack[tagStack.length-1]===t.substr(2).replace(">","")&&(tagStack.pop(),current=current.parentNode);continue}var node,ts=parseTimeStamp(t.substr(1,t.length-2));if(ts){node=window.document.createProcessingInstruction("timestamp",ts),current.appendChild(node);continue}var m=t.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!m)continue;if(node=createElement(m[1],m[3]),!node)continue;if(!shouldAdd(current,node))continue;m[2]&&(node.className=m[2].substr(1).replace("."," ")),tagStack.push(m[1]),current.appendChild(node),current=node}return rootDiv}function determineBidi(cueDiv){function pushNodes(nodeStack,node){for(var i=node.childNodes.length-1;i>=0;i--)nodeStack.push(node.childNodes[i])}function nextTextNode(nodeStack){if(!nodeStack||!nodeStack.length)return null;var node=nodeStack.pop(),text=node.textContent||node.innerText;if(text){var m=text.match(/^.*(\n|\r)/);return m?(nodeStack.length=0,m[0]):text}return"ruby"===node.tagName?nextTextNode(nodeStack):node.childNodes?(pushNodes(nodeStack,node),nextTextNode(nodeStack)):void 0}var charCode,nodeStack=[],text="";if(!cueDiv||!cueDiv.childNodes)return"ltr";for(pushNodes(nodeStack,cueDiv);text=nextTextNode(nodeStack);)for(var i=0;i<text.length;i++){charCode=text.charCodeAt(i);for(var j=0;j<strongRTLChars.length;j++)if(strongRTLChars[j]===charCode)return"rtl"}return"ltr"}function computeLinePos(cue){if("number"==typeof cue.line&&(cue.snapToLines||cue.line>=0&&cue.line<=100))return cue.line;if(!cue.track||!cue.track.textTrackList||!cue.track.textTrackList.mediaElement)return-1;for(var track=cue.track,trackList=track.textTrackList,count=0,i=0;i<trackList.length&&trackList[i]!==track;i++)"showing"===trackList[i].mode&&count++;return++count*-1}function StyleBox(){}function CueStyleBox(window,cue,styleOptions){var isIE8=/MSIE\s8\.0/.test(navigator.userAgent),color="rgba(255, 255, 255, 1)",backgroundColor="rgba(0, 0, 0, 0.8)";isIE8&&(color="rgb(255, 255, 255)",backgroundColor="rgb(0, 0, 0)"),StyleBox.call(this),this.cue=cue,this.cueDiv=parseContent(window,cue.text);var styles={color:color,backgroundColor:backgroundColor,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};isIE8||(styles.writingMode=""===cue.vertical?"horizontal-tb":"lr"===cue.vertical?"vertical-lr":"vertical-rl",styles.unicodeBidi="plaintext"),this.applyStyles(styles,this.cueDiv),this.div=window.document.createElement("div"),styles={textAlign:"middle"===cue.align?"center":cue.align,font:styleOptions.font,whiteSpace:"pre-line",position:"absolute"},isIE8||(styles.direction=determineBidi(this.cueDiv),styles.writingMode=""===cue.vertical?"horizontal-tb":"lr"===cue.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(styles),this.div.appendChild(this.cueDiv);var textPos=0;switch(cue.positionAlign){case"start":textPos=cue.position;break;case"middle":textPos=cue.position-cue.size/2;break;case"end":textPos=cue.position-cue.size}""===cue.vertical?this.applyStyles({left:this.formatStyle(textPos,"%"),width:this.formatStyle(cue.size,"%")}):this.applyStyles({top:this.formatStyle(textPos,"%"),height:this.formatStyle(cue.size,"%")}),this.move=function(box){this.applyStyles({top:this.formatStyle(box.top,"px"),bottom:this.formatStyle(box.bottom,"px"),left:this.formatStyle(box.left,"px"),right:this.formatStyle(box.right,"px"),height:this.formatStyle(box.height,"px"),width:this.formatStyle(box.width,"px")})}}function BoxPosition(obj){var lh,height,width,top,isIE8=/MSIE\s8\.0/.test(navigator.userAgent);if(obj.div){height=obj.div.offsetHeight,width=obj.div.offsetWidth,top=obj.div.offsetTop;var rects=(rects=obj.div.childNodes)&&(rects=rects[0])&&rects.getClientRects&&rects.getClientRects();obj=obj.div.getBoundingClientRect(),lh=rects?Math.max(rects[0]&&rects[0].height||0,obj.height/rects.length):0}this.left=obj.left,this.right=obj.right,this.top=obj.top||top,this.height=obj.height||height,this.bottom=obj.bottom||top+(obj.height||height),this.width=obj.width||width,this.lineHeight=void 0!==lh?lh:obj.lineHeight,isIE8&&!this.lineHeight&&(this.lineHeight=13)}function moveBoxToLinePosition(window,styleBox,containerBox,boxPositions){function findBestPosition(b,axis){for(var bestPosition,specifiedPosition=new BoxPosition(b),percentage=1,i=0;i<axis.length;i++){for(;b.overlapsOppositeAxis(containerBox,axis[i])||b.within(containerBox)&&b.overlapsAny(boxPositions);)b.move(axis[i]);if(b.within(containerBox))return b;var p=b.intersectPercentage(containerBox);percentage>p&&(bestPosition=new BoxPosition(b),percentage=p),b=new BoxPosition(specifiedPosition)}return bestPosition||specifiedPosition}var boxPosition=new BoxPosition(styleBox),cue=styleBox.cue,linePos=computeLinePos(cue),axis=[];if(cue.snapToLines){var size;switch(cue.vertical){case"":axis=["+y","-y"],size="height";break;case"rl":axis=["+x","-x"],size="width";break;case"lr":axis=["-x","+x"],size="width"}var step=boxPosition.lineHeight,position=step*Math.round(linePos),maxPosition=containerBox[size]+step,initialAxis=axis[0];Math.abs(position)>maxPosition&&(position=position<0?-1:1,position*=Math.ceil(maxPosition/step)*step),linePos<0&&(position+=""===cue.vertical?containerBox.height:containerBox.width,axis=axis.reverse()),boxPosition.move(initialAxis,position)}else{var calculatedPercentage=boxPosition.lineHeight/containerBox.height*100;switch(cue.lineAlign){case"middle":linePos-=calculatedPercentage/2;break;case"end":linePos-=calculatedPercentage}switch(cue.vertical){case"":styleBox.applyStyles({top:styleBox.formatStyle(linePos,"%")});break;case"rl":styleBox.applyStyles({left:styleBox.formatStyle(linePos,"%")});break;case"lr":styleBox.applyStyles({right:styleBox.formatStyle(linePos,"%")})}axis=["+y","-x","+x","-y"],boxPosition=new BoxPosition(styleBox)}var bestPosition=findBestPosition(boxPosition,axis);styleBox.move(bestPosition.toCSSCompatValues(containerBox))}function WebVTT(){}var _objCreate=Object.create||function(){function F(){}return function(o){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return F.prototype=o,new F}}();ParsingError.prototype=_objCreate(Error.prototype),ParsingError.prototype.constructor=ParsingError,ParsingError.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Settings.prototype={set:function(k,v){this.get(k)||""===v||(this.values[k]=v)},get:function(k,dflt,defaultKey){return defaultKey?this.has(k)?this.values[k]:dflt[defaultKey]:this.has(k)?this.values[k]:dflt},has:function(k){return k in this.values},alt:function(k,v,a){for(var n=0;n<a.length;++n)if(v===a[n]){this.set(k,v);break}},integer:function(k,v){/^-?\d+$/.test(v)&&this.set(k,parseInt(v,10))},percent:function(k,v){var m;return!!((m=v.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(v=parseFloat(v),v>=0&&v<=100))&&(this.set(k,v),!0)}};var ESCAPE={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"â","&rlm;":"â","&nbsp;":"Â "},TAG_NAME={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},TAG_ANNOTATION={v:"title",lang:"lang"},NEEDS_PARENT={rt:"ruby"},strongRTLChars=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];StyleBox.prototype.applyStyles=function(styles,div){div=div||this.div;for(var prop in styles)styles.hasOwnProperty(prop)&&(div.style[prop]=styles[prop])},StyleBox.prototype.formatStyle=function(val,unit){return 0===val?0:val+unit},CueStyleBox.prototype=_objCreate(StyleBox.prototype),CueStyleBox.prototype.constructor=CueStyleBox,BoxPosition.prototype.move=function(axis,toMove){switch(toMove=void 0!==toMove?toMove:this.lineHeight,axis){case"+x":this.left+=toMove,this.right+=toMove;break;case"-x":this.left-=toMove,this.right-=toMove;break;case"+y":this.top+=toMove,this.bottom+=toMove;break;case"-y":this.top-=toMove,this.bottom-=toMove}},BoxPosition.prototype.overlaps=function(b2){return this.left<b2.right&&this.right>b2.left&&this.top<b2.bottom&&this.bottom>b2.top},BoxPosition.prototype.overlapsAny=function(boxes){for(var i=0;i<boxes.length;i++)if(this.overlaps(boxes[i]))return!0;return!1},BoxPosition.prototype.within=function(container){return this.top>=container.top&&this.bottom<=container.bottom&&this.left>=container.left&&this.right<=container.right},BoxPosition.prototype.overlapsOppositeAxis=function(container,axis){switch(axis){case"+x":return this.left<container.left;case"-x":return this.right>container.right;case"+y":return this.top<container.top;case"-y":return this.bottom>container.bottom}},BoxPosition.prototype.intersectPercentage=function(b2){var x=Math.max(0,Math.min(this.right,b2.right)-Math.max(this.left,b2.left)),y=Math.max(0,Math.min(this.bottom,b2.bottom)-Math.max(this.top,b2.top)),intersectArea=x*y;return intersectArea/(this.height*this.width)},BoxPosition.prototype.toCSSCompatValues=function(reference){return{top:this.top-reference.top,bottom:reference.bottom-this.bottom,left:this.left-reference.left,right:reference.right-this.right,height:this.height,width:this.width}},BoxPosition.getSimpleBoxPosition=function(obj){var height=obj.div?obj.div.offsetHeight:obj.tagName?obj.offsetHeight:0,width=obj.div?obj.div.offsetWidth:obj.tagName?obj.offsetWidth:0,top=obj.div?obj.div.offsetTop:obj.tagName?obj.offsetTop:0;obj=obj.div?obj.div.getBoundingClientRect():obj.tagName?obj.getBoundingClientRect():obj;var ret={left:obj.left,right:obj.right,top:obj.top||top,height:obj.height||height,bottom:obj.bottom||top+(obj.height||height),width:obj.width||width};return ret},WebVTT.StringDecoder=function(){return{decode:function(data){if(!data)return"";if("string"!=typeof data)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(data))}}},WebVTT.convertCueToDOMTree=function(window,cuetext){return window&&cuetext?parseContent(window,cuetext):null};var FONT_SIZE_PERCENT=.05,FONT_STYLE="sans-serif",CUE_BACKGROUND_PADDING="1.5%";WebVTT.processCues=function(window,cues,overlay){function shouldCompute(cues){for(var i=0;i<cues.length;i++)if(cues[i].hasBeenReset||!cues[i].displayState)return!0;return!1}if(!window||!cues||!overlay)return null;for(;overlay.firstChild;)overlay.removeChild(overlay.firstChild);var paddedOverlay=window.document.createElement("div");if(paddedOverlay.style.position="absolute",paddedOverlay.style.left="0",paddedOverlay.style.right="0",paddedOverlay.style.top="0",paddedOverlay.style.bottom="0",paddedOverlay.style.margin=CUE_BACKGROUND_PADDING,overlay.appendChild(paddedOverlay),shouldCompute(cues)){var boxPositions=[],containerBox=BoxPosition.getSimpleBoxPosition(paddedOverlay),fontSize=Math.round(containerBox.height*FONT_SIZE_PERCENT*100)/100,styleOptions={font:fontSize+"px "+FONT_STYLE};!function(){for(var styleBox,cue,i=0;i<cues.length;i++)cue=cues[i],styleBox=new CueStyleBox(window,cue,styleOptions),paddedOverlay.appendChild(styleBox.div),moveBoxToLinePosition(window,styleBox,containerBox,boxPositions),cue.displayState=styleBox.div,boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox))}()}else for(var i=0;i<cues.length;i++)paddedOverlay.appendChild(cues[i].displayState)},WebVTT.Parser=function(window,vttjs,decoder){decoder||(decoder=vttjs,vttjs={}),vttjs||(vttjs={}),this.window=window,this.vttjs=vttjs,this.state="INITIAL",this.buffer="",this.decoder=decoder||new TextDecoder("utf8"),this.regionList=[]},WebVTT.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof ParsingError))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(data){function collectNextLine(){for(var buffer=self.buffer,pos=0;pos<buffer.length&&"\r"!==buffer[pos]&&"\n"!==buffer[pos];)++pos;var line=buffer.substr(0,pos);return"\r"===buffer[pos]&&++pos,"\n"===buffer[pos]&&++pos,self.buffer=buffer.substr(pos),line}function parseRegion(input){var settings=new Settings;if(parseOptions(input,function(k,v){switch(k){case"id":settings.set(k,v);break;case"width":settings.percent(k,v);break;case"lines":settings.integer(k,v);break;case"regionanchor":case"viewportanchor":var xy=v.split(",");if(2!==xy.length)break;var anchor=new Settings;if(anchor.percent("x",xy[0]),anchor.percent("y",xy[1]),!anchor.has("x")||!anchor.has("y"))break;settings.set(k+"X",anchor.get("x")),settings.set(k+"Y",anchor.get("y"));break;case"scroll":settings.alt(k,v,["up"])}},/=/,/\s/),settings.has("id")){var region=new(self.vttjs.VTTRegion||self.window.VTTRegion);region.width=settings.get("width",100),region.lines=settings.get("lines",3),region.regionAnchorX=settings.get("regionanchorX",0),region.regionAnchorY=settings.get("regionanchorY",100),region.viewportAnchorX=settings.get("viewportanchorX",0),region.viewportAnchorY=settings.get("viewportanchorY",100),region.scroll=settings.get("scroll",""),self.onregion&&self.onregion(region),self.regionList.push({id:settings.get("id"),region:region})}}function parseHeader(input){parseOptions(input,function(k,v){switch(k){case"Region":parseRegion(v)}},/:/)}var self=this;data&&(self.buffer+=self.decoder.decode(data,{stream:!0}));try{var line;if("INITIAL"===self.state){if(!/\r\n|\n/.test(self.buffer))return this;line=collectNextLine();var m=line.match(/^WEBVTT([ \t].*)?$/);if(!m||!m[0])throw new ParsingError(ParsingError.Errors.BadSignature);self.state="HEADER"}for(var alreadyCollectedLine=!1;self.buffer;){if(!/\r\n|\n/.test(self.buffer))return this;switch(alreadyCollectedLine?alreadyCollectedLine=!1:line=collectNextLine(),self.state){case"HEADER":/:/.test(line)?parseHeader(line):line||(self.state="ID");continue;case"NOTE":line||(self.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(line)){self.state="NOTE";break}if(!line)continue;if(self.cue=new(self.vttjs.VTTCue||self.window.VTTCue)(0,0,""),self.state="CUE",line.indexOf("-->")===-1){self.cue.id=line;continue}case"CUE":try{parseCue(line,self.cue,self.regionList)}catch(e){self.reportOrThrowError(e),self.cue=null,self.state="BADCUE";continue}self.state="CUETEXT";continue;case"CUETEXT":var hasSubstring=line.indexOf("-->")!==-1;if(!line||hasSubstring&&(alreadyCollectedLine=!0)){self.oncue&&self.oncue(self.cue),self.cue=null,self.state="ID";continue}self.cue.text&&(self.cue.text+="\n"),self.cue.text+=line;continue;case"BADCUE":line||(self.state="ID");continue}}}catch(e){self.reportOrThrowError(e),"CUETEXT"===self.state&&self.cue&&self.oncue&&self.oncue(self.cue),self.cue=null,self.state="INITIAL"===self.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var self=this;try{if(self.buffer+=self.decoder.decode(),(self.cue||"HEADER"===self.state)&&(self.buffer+="\n\n",self.parse()),"INITIAL"===self.state)throw new ParsingError(ParsingError.Errors.BadSignature)}catch(e){self.reportOrThrowError(e)}return self.onflush&&self.onflush(),this}},global.WebVTT=WebVTT}(this,this.vttjs||{}),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.videojsContribHls=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var textRange=function(range,i){return range.start(i)+"-"+range.end(i)},formatHexString=function(e,i){var value=e.toString(16);return"00".substring(0,2-value.length)+value+(i%2?" ":"")},formatAsciiString=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},utils={hexDump:function(data){for(var bytes=Array.prototype.slice.call(data),step=16,result="",hex=void 0,ascii=void 0,j=0;j<bytes.length/step;j++)hex=bytes.slice(j*step,j*step+step).map(formatHexString).join(""),ascii=bytes.slice(j*step,j*step+step).map(formatAsciiString).join(""),result+=hex+" "+ascii+"\n";return result},tagDump:function(tag){return utils.hexDump(tag.bytes)},textRanges:function(ranges){var result="",i=void 0;for(i=0;i<ranges.length;i++)result+=textRange(ranges,i)+" ";return result}};exports.default=utils,module.exports=exports.default},{}],2:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),precompute=function(){var tables=[[[],[],[],[],[]],[[],[],[],[],[]]],encTable=tables[0],decTable=tables[1],sbox=encTable[4],sboxInv=decTable[4],i=void 0,x=void 0,xInv=void 0,d=[],th=[],x2=void 0,x4=void 0,x8=void 0,s=void 0,tEnc=void 0,tDec=void 0;for(i=0;i<256;i++)th[(d[i]=i<<1^283*(i>>7))^i]=i;for(x=xInv=0;!sbox[x];x^=x2||1,xInv=th[xInv]||1)for(s=xInv^xInv<<1^xInv<<2^xInv<<3^xInv<<4,s=s>>8^255&s^99,sbox[x]=s,sboxInv[s]=x,x8=d[x4=d[x2=d[x]]],tDec=16843009*x8^65537*x4^257*x2^16843008*x,tEnc=257*d[s]^16843008*s,i=0;i<4;i++)encTable[i][x]=tEnc=tEnc<<24^tEnc>>>8,decTable[i][s]=tDec=tDec<<24^tDec>>>8;for(i=0;i<5;i++)encTable[i]=encTable[i].slice(0),decTable[i]=decTable[i].slice(0);return tables},aesTables=null,AES=function(){function AES(key){_classCallCheck(this,AES),aesTables||(aesTables=precompute()),this._tables=[[aesTables[0][0].slice(),aesTables[0][1].slice(),aesTables[0][2].slice(),aesTables[0][3].slice(),aesTables[0][4].slice()],[aesTables[1][0].slice(),aesTables[1][1].slice(),aesTables[1][2].slice(),aesTables[1][3].slice(),aesTables[1][4].slice()]];var i=void 0,j=void 0,tmp=void 0,encKey=void 0,decKey=void 0,sbox=this._tables[0][4],decTable=this._tables[1],keyLen=key.length,rcon=1;if(4!==keyLen&&6!==keyLen&&8!==keyLen)throw new Error("Invalid aes key size");for(encKey=key.slice(0),decKey=[],this._key=[encKey,decKey],i=keyLen;i<4*keyLen+28;i++)tmp=encKey[i-1],(i%keyLen===0||8===keyLen&&i%keyLen===4)&&(tmp=sbox[tmp>>>24]<<24^sbox[tmp>>16&255]<<16^sbox[tmp>>8&255]<<8^sbox[255&tmp],i%keyLen===0&&(tmp=tmp<<8^tmp>>>24^rcon<<24,rcon=rcon<<1^283*(rcon>>7))),encKey[i]=encKey[i-keyLen]^tmp;for(j=0;i;j++,i--)tmp=encKey[3&j?i:i-4],i<=4||j<4?decKey[j]=tmp:decKey[j]=decTable[0][sbox[tmp>>>24]]^decTable[1][sbox[tmp>>16&255]]^decTable[2][sbox[tmp>>8&255]]^decTable[3][sbox[255&tmp]]}return _createClass(AES,[{key:"decrypt",value:function(encrypted0,encrypted1,encrypted2,encrypted3,out,offset){var key=this._key[1],a=encrypted0^key[0],b=encrypted3^key[1],c=encrypted2^key[2],d=encrypted1^key[3],a2=void 0,b2=void 0,c2=void 0,nInnerRounds=key.length/4-2,i=void 0,kIndex=4,table=this._tables[1],table0=table[0],table1=table[1],table2=table[2],table3=table[3],sbox=table[4];for(i=0;i<nInnerRounds;i++)a2=table0[a>>>24]^table1[b>>16&255]^table2[c>>8&255]^table3[255&d]^key[kIndex],b2=table0[b>>>24]^table1[c>>16&255]^table2[d>>8&255]^table3[255&a]^key[kIndex+1],c2=table0[c>>>24]^table1[d>>16&255]^table2[a>>8&255]^table3[255&b]^key[kIndex+2],d=table0[d>>>24]^table1[a>>16&255]^table2[b>>8&255]^table3[255&c]^key[kIndex+3],kIndex+=4,a=a2,b=b2,c=c2;for(i=0;i<4;i++)out[(3&-i)+offset]=sbox[a>>>24]<<24^sbox[b>>16&255]<<16^sbox[c>>8&255]<<8^sbox[255&d]^key[kIndex++],a2=a,a=b,b=c,c=d,d=a2}}]),AES}();exports.default=AES,module.exports=exports.default},{}],3:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=void 0}},_stream=require("../stream"),_stream2=_interopRequireDefault(_stream),AsyncStream=function(_Stream){function AsyncStream(){_classCallCheck(this,AsyncStream),_get(Object.getPrototypeOf(AsyncStream.prototype),"constructor",this).call(this,_stream2.default),this.jobs=[],this.delay=1,this.timeout_=null}return _inherits(AsyncStream,_Stream),_createClass(AsyncStream,[{key:"processJob_",value:function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}},{key:"push",value:function(job){this.jobs.push(job),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]),AsyncStream}(_stream2.default);exports.default=AsyncStream,module.exports=exports.default},{"../stream":13}],4:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_aes=require("./aes"),_aes2=_interopRequireDefault(_aes),_asyncStream=require("./async-stream"),_asyncStream2=_interopRequireDefault(_asyncStream),_pkcs7=require("pkcs7"),ntoh=function(word){return word<<24|(65280&word)<<8|(16711680&word)>>8|word>>>24},decrypt=function(encrypted,key,initVector){var encrypted32=new Int32Array(encrypted.buffer,encrypted.byteOffset,encrypted.byteLength>>2),decipher=new _aes2.default(Array.prototype.slice.call(key)),decrypted=new Uint8Array(encrypted.byteLength),decrypted32=new Int32Array(decrypted.buffer),init0=void 0,init1=void 0,init2=void 0,init3=void 0,encrypted0=void 0,encrypted1=void 0,encrypted2=void 0,encrypted3=void 0,wordIx=void 0;for(init0=initVector[0],init1=initVector[1],init2=initVector[2],init3=initVector[3],wordIx=0;wordIx<encrypted32.length;wordIx+=4)encrypted0=ntoh(encrypted32[wordIx]),encrypted1=ntoh(encrypted32[wordIx+1]),encrypted2=ntoh(encrypted32[wordIx+2]),encrypted3=ntoh(encrypted32[wordIx+3]),decipher.decrypt(encrypted0,encrypted1,encrypted2,encrypted3,decrypted32,wordIx),decrypted32[wordIx]=ntoh(decrypted32[wordIx]^init0),decrypted32[wordIx+1]=ntoh(decrypted32[wordIx+1]^init1),decrypted32[wordIx+2]=ntoh(decrypted32[wordIx+2]^init2),decrypted32[wordIx+3]=ntoh(decrypted32[wordIx+3]^init3),init0=encrypted0,init1=encrypted1,init2=encrypted2,init3=encrypted3;return decrypted};exports.decrypt=decrypt;var Decrypter=function(){function Decrypter(encrypted,key,initVector,done){_classCallCheck(this,Decrypter);var step=Decrypter.STEP,encrypted32=new Int32Array(encrypted.buffer),decrypted=new Uint8Array(encrypted.byteLength),i=0;for(this.asyncStream_=new _asyncStream2.default,this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted)),i=step;i<encrypted32.length;i+=step)initVector=new Uint32Array([ntoh(encrypted32[i-4]),ntoh(encrypted32[i-3]),ntoh(encrypted32[i-2]),ntoh(encrypted32[i-1])]),this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted));this.asyncStream_.push(function(){done(null,(0,_pkcs7.unpad)(decrypted))})}return _createClass(Decrypter,[{key:"decryptChunk_",value:function(encrypted,key,initVector,decrypted){return function(){var bytes=decrypt(encrypted,key,initVector);decrypted.set(bytes,encrypted.byteOffset)}}}]),Decrypter}();exports.Decrypter=Decrypter,Decrypter.STEP=32e3,exports.default={Decrypter:Decrypter,decrypt:decrypt}},{"./aes":2,"./async-stream":3,pkcs7:18}],5:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _decrypter=require("./decrypter"),_asyncStream=require("./async-stream"),_asyncStream2=_interopRequireDefault(_asyncStream);exports.default={decrypt:_decrypter.decrypt,Decrypter:_decrypter.Decrypter,AsyncStream:_asyncStream2.default},module.exports=exports.default},{"./async-stream":3,"./decrypter":4}],6:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _lineStream=require("./line-stream"),_lineStream2=_interopRequireDefault(_lineStream),_parseStream=require("./parse-stream"),_parseStream2=_interopRequireDefault(_parseStream),_parser=require("./parser"),_parser2=_interopRequireDefault(_parser);exports.default={LineStream:_lineStream2.default,ParseStream:_parseStream2.default,Parser:_parser2.default},module.exports=exports.default},{"./line-stream":7,"./parse-stream":8,"./parser":9}],7:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=void 0}},_stream=require("../stream"),_stream2=_interopRequireDefault(_stream),LineStream=function(_Stream){function LineStream(){_classCallCheck(this,LineStream),_get(Object.getPrototypeOf(LineStream.prototype),"constructor",this).call(this),this.buffer=""}return _inherits(LineStream,_Stream),_createClass(LineStream,[{key:"push",value:function(data){var nextNewline=void 0;for(this.buffer+=data,nextNewline=this.buffer.indexOf("\n");nextNewline>-1;nextNewline=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,nextNewline)),this.buffer=this.buffer.substring(nextNewline+1)}}]),LineStream}(_stream2.default);exports.default=LineStream,module.exports=exports.default},{"../stream":13}],8:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=void 0}},_stream=require("../stream"),_stream2=_interopRequireDefault(_stream),attributeSeparator=function(){var key="[^=]*",value='"[^"]*"|[^,]*',keyvalue="(?:"+key+")=(?:"+value+")";return new RegExp("(?:^|,)("+keyvalue+")")},parseAttributes=function(attributes){for(var attrs=attributes.split(attributeSeparator()),i=attrs.length,result={},attr=void 0;i--;)""!==attrs[i]&&(attr=/([^=]*)=(.*)/.exec(attrs[i]).slice(1),attr[0]=attr[0].replace(/^\s+|\s+$/g,""),attr[1]=attr[1].replace(/^\s+|\s+$/g,""),attr[1]=attr[1].replace(/^['"](.*)['"]$/g,"$1"),result[attr[0]]=attr[1]);return result},ParseStream=function(_Stream){function ParseStream(){_classCallCheck(this,ParseStream),_get(Object.getPrototypeOf(ParseStream.prototype),"constructor",this).call(this)}return _inherits(ParseStream,_Stream),_createClass(ParseStream,[{key:"push",value:function(line){var match=void 0,event=void 0;if(line=line.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),0!==line.length){if("#"!==line[0])return void this.trigger("data",{type:"uri",uri:line});if(0!==line.indexOf("#EXT"))return void this.trigger("data",{type:"comment",text:line.slice(1)});if(line=line.replace("\r",""),match=/^#EXTM3U/.exec(line))return void this.trigger("data",{type:"tag",tagType:"m3u"});if(match=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(line))return event={type:"tag",tagType:"inf"},match[1]&&(event.duration=parseFloat(match[1])),match[2]&&(event.title=match[2]),void this.trigger("data",event);if(match=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(line))return event={type:"tag",tagType:"targetduration"},match[1]&&(event.duration=parseInt(match[1],10)),void this.trigger("data",event);if(match=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(line))return event={type:"tag",tagType:"totalduration"},match[1]&&(event.duration=parseInt(match[1],10)),void this.trigger("data",event);if(match=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(line))return event={type:"tag",tagType:"version"},match[1]&&(event.version=parseInt(match[1],10)),void this.trigger("data",event);if(match=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(line))return event={type:"tag",tagType:"media-sequence"},match[1]&&(event.number=parseInt(match[1],10)),void this.trigger("data",event);if(match=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(line))return event={type:"tag",tagType:"discontinuity-sequence"},match[1]&&(event.number=parseInt(match[1],10)),void this.trigger("data",event);if(match=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(line))return event={type:"tag",tagType:"playlist-type"},match[1]&&(event.playlistType=match[1]),void this.trigger("data",event);if(match=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(line))return event={type:"tag",tagType:"byterange"},match[1]&&(event.length=parseInt(match[1],10)),match[2]&&(event.offset=parseInt(match[2],10)),void this.trigger("data",event);if(match=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(line))return event={type:"tag",tagType:"allow-cache"},match[1]&&(event.allowed=!/NO/.test(match[1])),void this.trigger("data",event);if(match=/^#EXT-X-STREAM-INF:?(.*)$/.exec(line)){if(event={type:"tag",tagType:"stream-inf"},match[1]){if(event.attributes=parseAttributes(match[1]),event.attributes.RESOLUTION){var split=event.attributes.RESOLUTION.split("x"),resolution={};split[0]&&(resolution.width=parseInt(split[0],10)),split[1]&&(resolution.height=parseInt(split[1],10)),event.attributes.RESOLUTION=resolution}event.attributes.BANDWIDTH&&(event.attributes.BANDWIDTH=parseInt(event.attributes.BANDWIDTH,10)),event.attributes["PROGRAM-ID"]&&(event.attributes["PROGRAM-ID"]=parseInt(event.attributes["PROGRAM-ID"],10))}return void this.trigger("data",event)}return(match=/^#EXT-X-ENDLIST/.exec(line))?void this.trigger("data",{type:"tag",tagType:"endlist"}):(match=/^#EXT-X-DISCONTINUITY/.exec(line))?void this.trigger("data",{type:"tag",tagType:"discontinuity"}):(match=/^#EXT-X-KEY:?(.*)$/.exec(line))?(event={type:"tag",tagType:"key"},match[1]&&(event.attributes=parseAttributes(match[1]),event.attributes.IV&&("0x"===event.attributes.IV.substring(0,2)&&(event.attributes.IV=event.attributes.IV.substring(2)),event.attributes.IV=event.attributes.IV.match(/.{8}/g),event.attributes.IV[0]=parseInt(event.attributes.IV[0],16),event.attributes.IV[1]=parseInt(event.attributes.IV[1],16),event.attributes.IV[2]=parseInt(event.attributes.IV[2],16),event.attributes.IV[3]=parseInt(event.attributes.IV[3],16),event.attributes.IV=new Uint32Array(event.attributes.IV))),void this.trigger("data",event)):void this.trigger("data",{type:"tag",data:line.slice(4,line.length)})}}}]),ParseStream}(_stream2.default);exports.default=ParseStream,module.exports=exports.default},{"../stream":13}],9:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=void 0}},_stream=require("../stream"),_stream2=_interopRequireDefault(_stream),_lineStream=require("./line-stream"),_lineStream2=_interopRequireDefault(_lineStream),_parseStream=require("./parse-stream"),_parseStream2=_interopRequireDefault(_parseStream),_videoJs="undefined"!=typeof window?window.videojs:"undefined"!=typeof global?global.videojs:null,Parser=function(_Stream){function Parser(){_classCallCheck(this,Parser),_get(Object.getPrototypeOf(Parser.prototype),"constructor",this).call(this),this.lineStream=new _lineStream2.default,this.parseStream=new _parseStream2.default,this.lineStream.pipe(this.parseStream);var self=this,uris=[],currentUri={},_key=void 0,noop=function(){};this.manifest={allowCache:!0,discontinuityStarts:[]},this.parseStream.on("data",function(entry){({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=entry.allowed,"allowed"in entry||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function byterange(){var byterange={};"length"in entry&&(currentUri.byterange=byterange,byterange.length=entry.length,"offset"in entry||(this.trigger("info",{message:"defaulting offset to zero"}),entry.offset=0)),"offset"in entry&&(currentUri.byterange=byterange,byterange.offset=entry.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),entry.duration>=0&&(currentUri.duration=entry.duration),this.manifest.segments=uris},key:function(){return entry.attributes?"NONE"===entry.attributes.METHOD?void(_key=null):entry.attributes.URI?(entry.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),_key={method:entry.attributes.METHOD||"AES-128",uri:entry.attributes.URI},void("undefined"!=typeof entry.attributes.IV&&(_key.iv=entry.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){return isFinite(entry.number)?void(this.manifest.mediaSequence=entry.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+entry.number})},"discontinuity-sequence":function(){return isFinite(entry.number)?void(this.manifest.discontinuitySequence=entry.number):void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+entry.number})},"playlist-type":function(){return/VOD|EVENT/.test(entry.playlistType)?void(this.manifest.playlistType=entry.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+entry.playlist})},"stream-inf":function(){return this.manifest.playlists=uris,entry.attributes?(currentUri.attributes||(currentUri.attributes={}),void(currentUri.attributes=(0,_videoJs.mergeOptions)(currentUri.attributes,entry.attributes))):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},discontinuity:function(){currentUri.discontinuity=!0,this.manifest.discontinuityStarts.push(uris.length)},targetduration:function(){return!isFinite(entry.duration)||entry.duration<0?void this.trigger("warn",{message:"ignoring invalid target duration: "+entry.duration}):void(this.manifest.targetDuration=entry.duration)},totalduration:function(){return!isFinite(entry.duration)||entry.duration<0?void this.trigger("warn",{message:"ignoring invalid total duration: "+entry.duration}):void(this.manifest.totalDuration=entry.duration)}})[entry.tagType]||noop).call(self)},uri:function(){currentUri.uri=entry.uri,uris.push(currentUri),!this.manifest.targetDuration||"duration"in currentUri||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),currentUri.duration=this.manifest.targetDuration),_key&&(currentUri.key=_key),currentUri={}},comment:function(){}})[entry.type].call(self)})}return _inherits(Parser,_Stream),_createClass(Parser,[{key:"push",value:function(chunk){this.lineStream.push(chunk)}},{key:"end",value:function(){this.lineStream.push("\n")}}]),Parser}(_stream2.default);exports.default=Parser,module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stream":13,"./line-stream":7,"./parse-stream":8}],10:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=void 0}},_resolveUrl=require("./resolve-url"),_resolveUrl2=_interopRequireDefault(_resolveUrl),_videoJs="undefined"!=typeof window?window.videojs:"undefined"!=typeof global?global.videojs:null,_stream=require("./stream"),_stream2=_interopRequireDefault(_stream),_m3u8=require("./m3u8"),_m3u82=_interopRequireDefault(_m3u8),updateMaster=function(master,media){for(var changed=!1,result=(0,_videoJs.mergeOptions)(master,{}),i=master.playlists.length,playlist=void 0;i--;)if(playlist=result.playlists[i],playlist.uri===media.uri){if(playlist.segments&&media.segments&&playlist.segments.length===media.segments.length&&playlist.mediaSequence===media.mediaSequence)continue;result.playlists[i]=(0,_videoJs.mergeOptions)(playlist,media),result.playlists[media.uri]=result.playlists[i],playlist.segments&&(result.playlists[i].segments=updateSegments(playlist.segments,media.segments,media.mediaSequence-playlist.mediaSequence)),changed=!0}return changed?result:null},updateSegments=function(original,update,offset){var result=update.slice(),length=void 0,i=void 0;for(offset=offset||0,length=Math.min(original.length,update.length+offset),i=offset;i<length;i++)result[i-offset]=(0,_videoJs.mergeOptions)(original[i],result[i-offset]);return result},PlaylistLoader=function(_Stream){function PlaylistLoader(srcUrl,hls,withCredentials){_classCallCheck(this,PlaylistLoader),_get(Object.getPrototypeOf(PlaylistLoader.prototype),"constructor",this).call(this);var loader=this,dispose=void 0,mediaUpdateTimeout=void 0,request=void 0,playlistRequestError=void 0,haveMetadata=void 0;if(this.hls_=hls,this.trackExpiredTime_=!1,!srcUrl)throw new Error("A non-empty playlist URL is required");playlistRequestError=function(xhr,url,startingState){loader.setBandwidth(request||xhr),request=null,startingState&&(loader.state=startingState),loader.error={playlist:loader.master.playlists[url],status:xhr.status,message:"HLS playlist request error at URL: "+url,responseText:xhr.responseText,code:xhr.status>=500?4:2},loader.trigger("error")},haveMetadata=function(xhr,url){var parser=void 0,refreshDelay=void 0,update=void 0;loader.setBandwidth(request||xhr),request=null,loader.state="HAVE_METADATA",parser=new _m3u82.default.Parser,parser.push(xhr.responseText),parser.end(),parser.manifest.uri=url,update=updateMaster(loader.master,parser.manifest),refreshDelay=1e3*(parser.manifest.targetDuration||10),update?(loader.master=update,loader.updateMediaPlaylist_(parser.manifest)):refreshDelay/=2,loader.media().endList||(window.clearTimeout(mediaUpdateTimeout),mediaUpdateTimeout=window.setTimeout(function(){loader.trigger("mediaupdatetimeout")},refreshDelay)),loader.trigger("loadedplaylist")},loader.state="HAVE_NOTHING",this.expired_=0,dispose=this.dispose,loader.dispose=function(){request&&(request.onreadystatechange=null,request.abort(),request=null),window.clearTimeout(mediaUpdateTimeout),dispose.call(this)},loader.media=function(playlist){var startingState=loader.state,mediaChange=void 0;if(!playlist)return loader.media_;if("HAVE_NOTHING"===loader.state)throw new Error("Cannot switch media playlist from "+loader.state);if("string"==typeof playlist){if(!loader.master.playlists[playlist])throw new Error("Unknown playlist URI: "+playlist);playlist=loader.master.playlists[playlist]}if(mediaChange=!loader.media_||playlist.uri!==loader.media_.uri,loader.master.playlists[playlist.uri].endList)return request&&(request.onreadystatechange=null,request.abort(),request=null),loader.state="HAVE_METADATA",loader.media_=playlist,void(mediaChange&&loader.trigger("mediachange"));if(mediaChange){if(loader.state="SWITCHING_MEDIA",request){if((0,_resolveUrl2.default)(loader.master.uri,playlist.uri)===request.url)return;request.onreadystatechange=null,request.abort(),request=null}request=this.hls_.xhr({uri:(0,_resolveUrl2.default)(loader.master.uri,playlist.uri),withCredentials:withCredentials},function(error,request){return error?playlistRequestError(request,playlist.uri,startingState):(haveMetadata(request,playlist.uri),void("HAVE_MASTER"===startingState?loader.trigger("loadedmetadata"):loader.trigger("mediachange")))})}},loader.setBandwidth=function(xhr){loader.bandwidth=xhr.bandwidth},loader.on("firstplay",function(){this.trackExpiredTime_=!0}),loader.on("mediaupdatetimeout",function(){"HAVE_METADATA"===loader.state&&(loader.state="HAVE_CURRENT_METADATA",request=this.hls_.xhr({uri:(0,_resolveUrl2.default)(loader.master.uri,loader.media().uri),withCredentials:withCredentials},function(error,request){return error?playlistRequestError(request,loader.media().uri):void haveMetadata(request,loader.media().uri)}))}),request=this.hls_.xhr({uri:srcUrl,withCredentials:withCredentials},function(error,req){var parser=void 0,i=void 0;if(request=null,error)return loader.error={status:req.status,message:"HLS playlist request error at URL: "+srcUrl,responseText:req.responseText,code:2},loader.trigger("error");if(parser=new _m3u82.default.Parser,parser.push(req.responseText),parser.end(),loader.state="HAVE_MASTER",parser.manifest.uri=srcUrl,parser.manifest.playlists){for(loader.master=parser.manifest,i=loader.master.playlists.length;i--;)loader.master.playlists[loader.master.playlists[i].uri]=loader.master.playlists[i];return loader.trigger("loadedplaylist"),void(request||loader.media(parser.manifest.playlists[0]))}return loader.master={uri:window.location.href,playlists:[{uri:srcUrl}]},loader.master.playlists[srcUrl]=loader.master.playlists[0],haveMetadata(req,srcUrl),loader.trigger("loadedmetadata")})}return _inherits(PlaylistLoader,_Stream),_createClass(PlaylistLoader,[{key:"updateMediaPlaylist_",value:function(update){var outdated=void 0,i=void 0,segment=void 0;if(outdated=this.media_,this.media_=this.master.playlists[update.uri],outdated&&this.trackExpiredTime_&&update.uri===outdated.uri){if(update.segments.length){if(void 0!==update.segments[0].start)return void(this.expired_=update.segments[0].start);if(void 0!==update.segments[0].end)return void(this.expired_=update.segments[0].end-update.segments[0].duration)}for(i=update.mediaSequence-outdated.mediaSequence-1;i>=0;i--)if(segment=outdated.segments[i]){if(void 0!==segment.end)return void(this.expired_=segment.end);if(void 0!==segment.start)return void(this.expired_=segment.start+segment.duration);this.expired_+=segment.duration}else this.expired_+=outdated.targetDuration||10}}},{key:"getMediaIndexForTime_",value:function(time){var i=void 0,segment=void 0,originalTime=time,numSegments=this.media_.segments.length,lastSegment=numSegments-1,startIndex=void 0,endIndex=void 0,knownStart=void 0,knownEnd=void 0;if(!this.media_)return 0;if(time<0)return 0;for(i=0;i<numSegments;i++)if(segment=this.media_.segments[i],segment.end){if(segment.end>time){knownEnd=segment.end,endIndex=i;break}knownStart=segment.end,startIndex=i+1}if(void 0!==startIndex){for(time-=knownStart,i=startIndex;i<(endIndex||numSegments);i++)if(segment=this.media_.segments[i],time-=segment.duration,time<0)return i;return i>=endIndex?startIndex+Math.floor((originalTime-knownStart)/(knownEnd-knownStart)*(endIndex-startIndex)):lastSegment}if(void 0!==endIndex){for(time=knownEnd-time,i=endIndex;i>=0;i--)if(segment=this.media_.segments[i],time-=segment.duration,time<0)return i;return 0===time?0:-1}if(time-=this.expired_,time<0)return-1;for(i=0;i<numSegments;i++)if(segment=this.media_.segments[i],time-=segment.duration,time<0)return i;return lastSegment}}]),PlaylistLoader}(_stream2.default);exports.default=PlaylistLoader,module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./m3u8":6,"./resolve-url":12,"./stream":13}],11:[function(require,module,exports){(function(global){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _videoJs="undefined"!=typeof window?window.videojs:"undefined"!=typeof global?global.videojs:null,Playlist={UNSAFE_LIVE_SEGMENTS:3},backwardDuration=function(playlist,endSequence){var result=0,i=endSequence-playlist.mediaSequence,segment=playlist.segments[i];if(segment){if("undefined"!=typeof segment.start)return{result:segment.start,precise:!0};if("undefined"!=typeof segment.end)return{result:segment.end-segment.duration,precise:!0}}for(;i--;){if(segment=playlist.segments[i],"undefined"!=typeof segment.end)return{result:result+segment.end,precise:!0};if(result+=segment.duration,"undefined"!=typeof segment.start)return{result:result+segment.start,precise:!0}}return{result:result,precise:!1}},forwardDuration=function(playlist,endSequence){for(var result=0,segment=void 0,i=endSequence-playlist.mediaSequence;i<playlist.segments.length;i++){if(segment=playlist.segments[i],"undefined"!=typeof segment.start)return{result:segment.start-result,precise:!0};if(result+=segment.duration,"undefined"!=typeof segment.end)return{result:segment.end-result,precise:!0}}return{result:-1,precise:!1}},intervalDuration=function(playlist,endSequence){var backward=void 0,forward=void 0;return"undefined"==typeof endSequence&&(endSequence=playlist.mediaSequence+playlist.segments.length),endSequence<playlist.mediaSequence?0:(backward=backwardDuration(playlist,endSequence),backward.precise?backward.result:(forward=forwardDuration(playlist,endSequence),forward.precise?forward.result:backward.result))},duration=function(playlist,endSequence,includeTrailingTime){if(!playlist)return 0;if("undefined"==typeof includeTrailingTime&&(includeTrailingTime=!0),"undefined"==typeof endSequence){if(playlist.totalDuration)return playlist.totalDuration;if(!playlist.endList)return window.Infinity}return intervalDuration(playlist,endSequence,includeTrailingTime)};exports.duration=duration;var seekable=function(playlist){var start=void 0,end=void 0;return playlist.segments?playlist.endList?(0,_videoJs.createTimeRange)(0,duration(playlist)):(start=intervalDuration(playlist,playlist.mediaSequence),end=intervalDuration(playlist,playlist.mediaSequence+Math.max(0,playlist.segments.length-Playlist.UNSAFE_LIVE_SEGMENTS)),(0,_videoJs.createTimeRange)(start,end)):(0,_videoJs.createTimeRange)()};exports.seekable=seekable,Playlist.duration=duration,Playlist.seekable=seekable,exports.default=Playlist}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _globalDocument=require("global/document"),_globalDocument2=_interopRequireDefault(_globalDocument),resolveUrl=function(basePath,path){var oldBase=_globalDocument2.default.querySelector("base"),docHead=_globalDocument2.default.querySelector("head"),a=_globalDocument2.default.createElement("a"),base=oldBase,oldHref=void 0,result=void 0;return oldBase?oldHref=oldBase.href:base=docHead.appendChild(_globalDocument2.default.createElement("base")),base.href=basePath,a.href=path,result=a.href,oldBase?oldBase.href=oldHref:docHead.removeChild(base),result};exports.default=resolveUrl,module.exports=exports.default},{"global/document":16}],13:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Stream=function(){function Stream(){_classCallCheck(this,Stream),this.listeners={}}return _createClass(Stream,[{key:"on",value:function(type,listener){this.listeners[type]||(this.listeners[type]=[]),this.listeners[type].push(listener)}},{key:"off",value:function(type,listener){var index=void 0;return!!this.listeners[type]&&(index=this.listeners[type].indexOf(listener),this.listeners[type].splice(index,1),index>-1)}},{key:"trigger",value:function(type){var callbacks=void 0,i=void 0,length=void 0,args=void 0;if(callbacks=this.listeners[type])if(2===arguments.length)for(length=callbacks.length,i=0;i<length;++i)callbacks[i].call(this,arguments[1]);else for(args=Array.prototype.slice.call(arguments,1),length=callbacks.length,i=0;i<length;++i)callbacks[i].apply(this,args)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(destination){this.on("data",function(data){destination.push(data)})}}]),Stream}();exports.default=Stream,module.exports=exports.default},{}],14:[function(require,module,exports){(function(global){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _videoJs="undefined"!=typeof window?window.videojs:"undefined"!=typeof global?global.videojs:null,xhrFactory=function(){var xhr=function XhrFunction(options,callback){if(options=(0,_videoJs.mergeOptions)({timeout:45e3},options),XhrFunction.beforeRequest&&"function"==typeof XhrFunction.beforeRequest){var newOptions=XhrFunction.beforeRequest(options);newOptions&&(options=newOptions)}var request=(0,_videoJs.xhr)(options,function(error,response){!error&&request.response&&(request.responseTime=(new Date).getTime(),request.roundTripTime=request.responseTime-request.requestTime,request.bytesReceived=request.response.byteLength||request.response.length,request.bandwidth||(request.bandwidth=Math.floor(request.bytesReceived/request.roundTripTime*8*1e3))),error||request.timedout?request.timedout=request.timedout||"ETIMEDOUT"===error.code:request.timedout=!1,error||200===response.statusCode||206===response.statusCode||0===response.statusCode||(error=new Error("XHR Failed with a response of: "+(request&&(request.response||request.responseText)))),callback(error,request)});return request.requestTime=(new Date).getTime(),request};return xhr};exports.default=xhrFactory,module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(require,module,exports){},{}],16:[function(require,module,exports){(function(global){var topLevel="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},minDoc=require("min-document");if("undefined"!=typeof document)module.exports=document;else{var doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"];doccy||(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc),module.exports=doccy}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":15}],17:[function(require,module,exports){"use strict";var PADDING;module.exports=function(plaintext){var padding=PADDING[plaintext.byteLength%16||0],result=new Uint8Array(plaintext.byteLength+padding.length);return result.set(plaintext),result.set(padding,plaintext.byteLength),result},PADDING=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],18:[function(require,module,exports){"use strict";exports.pad=require("./pad.js"),exports.unpad=require("./unpad.js")},{"./pad.js":17,"./unpad.js":19}],19:[function(require,module,exports){"use strict";module.exports=function(padded){return padded.subarray(0,padded.byteLength-padded[padded.byteLength-1])}},{}],20:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _videoJs="undefined"!=typeof window?window.videojs:"undefined"!=typeof global?global.videojs:null,_videoJs2=_interopRequireDefault(_videoJs),deprecateOldCue=function(cue){Object.defineProperties(cue.frame,{id:{get:function(){return _videoJs2.default.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),cue.value.key}},value:{get:function(){return _videoJs2.default.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),cue.value.data}},privateData:{get:function(){return _videoJs2.default.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),cue.value.data}}})},addTextTrackData=function(sourceHandler,captionArray,metadataArray){var Cue=window.WebKitDataCue||window.VTTCue;captionArray&&captionArray.forEach(function(caption){this.inbandTextTrack_.addCue(new Cue(caption.startTime+this.timestampOffset,caption.endTime+this.timestampOffset,caption.text))},sourceHandler),metadataArray&&metadataArray.forEach(function(metadata){var time=metadata.cueTime+this.timestampOffset;metadata.frames.forEach(function(frame){var cue=new Cue(time,time,frame.value||frame.url||frame.data||"");cue.frame=frame,cue.value=frame,deprecateOldCue(cue),this.metadataTrack_.addCue(cue)},this)},sourceHandler)};exports.default=addTextTrackData,module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var createTextTracksIfNecessary=function(sourceBuffer,mediaSource,segment){segment.captions&&segment.captions.length&&!sourceBuffer.inbandTextTrack_&&(sourceBuffer.inbandTextTrack_=mediaSource.player_.addTextTrack("captions","cc1")),segment.metadata&&segment.metadata.length&&!sourceBuffer.metadataTrack_&&(sourceBuffer.metadataTrack_=mediaSource.player_.addTextTrack("metadata","Timed Metadata"),sourceBuffer.metadataTrack_.inBandMetadataTrackDispatchType=segment.metadata.dispatchType)};exports.default=createTextTracksIfNecessary,module.exports=exports.default},{}],22:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var flashConstants={TIME_BETWEEN_TICKS:Math.floor(1e3/480),TIME_PER_TICK:Math.floor(1e3/240),BYTES_PER_CHUNK:1024,MIN_CHUNK:1024,MAX_CHUNK:1048576};exports.default=flashConstants,module.exports=exports.default},{}],23:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=void 0}},_videoJs="undefined"!=typeof window?window.videojs:"undefined"!=typeof global?global.videojs:null,_videoJs2=_interopRequireDefault(_videoJs),_flashSourceBuffer=require("./flash-source-buffer"),_flashSourceBuffer2=_interopRequireDefault(_flashSourceBuffer),_flashConstants=require("./flash-constants"),_flashConstants2=_interopRequireDefault(_flashConstants),FlashMediaSource=function(_videojs$EventTarget){function FlashMediaSource(){var _this=this;_classCallCheck(this,FlashMediaSource),_get(Object.getPrototypeOf(FlashMediaSource.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(event){_this.swfObj=document.getElementById(event.swfId),_this.player_=(0,_videoJs2.default)(_this.swfObj.parentNode),_this.tech_=_this.swfObj.tech,_this.readyState="open",_this.tech_.on("seeking",function(){for(var i=_this.sourceBuffers.length;i--;)_this.sourceBuffers[i].abort()}),_this.swfObj&&_this.swfObj.vjs_load()})}return _inherits(FlashMediaSource,_videojs$EventTarget),_createClass(FlashMediaSource,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(type){var sourceBuffer=void 0;if(0!==type.indexOf("video/mp2t"))throw new Error("NotSupportedError (Video.js)");return sourceBuffer=new _flashSourceBuffer2.default(this),this.sourceBuffers.push(sourceBuffer),sourceBuffer}},{key:"endOfStream",value:function(error){"network"===error?this.tech_.error(2):"decode"===error&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),FlashMediaSource}(_videoJs2.default.EventTarget);exports.default=FlashMediaSource;try{Object.defineProperty(FlashMediaSource.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):NaN},set:function(value){var i=void 0,oldDuration=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",value),value<oldDuration)for(i=0;i<this.sourceBuffers.length;i++)this.sourceBuffers[i].remove(value,oldDuration);return value}})}catch(e){FlashMediaSource.prototype.duration=NaN}for(var property in _flashConstants2.default)FlashMediaSource[property]=_flashConstants2.default[property];module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./flash-constants":22,"./flash-source-buffer":24}],24:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=void 0}},_videoJs="undefined"!=typeof window?window.videojs:"undefined"!=typeof global?global.videojs:null,_videoJs2=_interopRequireDefault(_videoJs),_muxJs=require("mux.js"),_muxJs2=_interopRequireDefault(_muxJs),_removeCuesFromTrack=require("./remove-cues-from-track"),_removeCuesFromTrack2=_interopRequireDefault(_removeCuesFromTrack),_createTextTracksIfNecessary=require("./create-text-tracks-if-necessary"),_createTextTracksIfNecessary2=_interopRequireDefault(_createTextTracksIfNecessary),_addTextTrackData=require("./add-text-track-data"),_addTextTrackData2=_interopRequireDefault(_addTextTrackData),_flashConstants=require("./flash-constants"),_flashConstants2=_interopRequireDefault(_flashConstants),scheduleTick=function(func){window.setTimeout(func,_flashConstants2.default.TIME_BETWEEN_TICKS)},FlashSourceBuffer=function(_videojs$EventTarget){function FlashSourceBuffer(mediaSource){var _this=this;_classCallCheck(this,FlashSourceBuffer),_get(Object.getPrototypeOf(FlashSourceBuffer.prototype),"constructor",this).call(this);var encodedHeader=void 0;this.chunkSize_=_flashConstants2.default.BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource=mediaSource,this.updating=!1,this.timestampOffset_=0,this.segmentParser_=new _muxJs2.default.flv.Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),encodedHeader=window.btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(this.segmentParser_.getFlvHeader()))),this.mediaSource.swfObj.vjs_appendBuffer(encodedHeader),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(val){"number"==typeof val&&val>=0&&(this.timestampOffset_=val,this.segmentParser_=new _muxJs2.default.flv.Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),this.mediaSource.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN)}}),Object.defineProperty(this,"buffered",{get:function(){return _videoJs2.default.createTimeRanges(this.mediaSource.swfObj.vjs_getProperty("buffered"))}}),this.mediaSource.player_.on("seeked",function(){(0,_removeCuesFromTrack2.default)(0,1/0,_this.metadataTrack_),(0,_removeCuesFromTrack2.default)(0,1/0,_this.inbandTextTrack_)})}return _inherits(FlashSourceBuffer,_videojs$EventTarget),_createClass(FlashSourceBuffer,[{key:"appendBuffer",value:function(bytes){var _this2=this,error=void 0,chunk=524288,i=0;if(this.updating)throw error=new Error("SourceBuffer.append() cannot be called while an update is in progress"),error.name="InvalidStateError",error.code=11,error;this.updating=!0,this.mediaSource.readyState="open",this.trigger({type:"update"});var chunkInData=function chunkInData(){_this2.segmentParser_.push(bytes.subarray(i,i+chunk)),i+=chunk,scheduleTick(i<bytes.byteLength?chunkInData:_this2.segmentParser_.flush.bind(_this2.segmentParser_))};chunkInData()}},{key:"abort",value:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(start,end){(0,_removeCuesFromTrack2.default)(start,end,this.metadataTrack_),(0,_removeCuesFromTrack2.default)(start,end,this.inbandTextTrack_),this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(segment){var _this3=this;(0,_createTextTracksIfNecessary2.default)(this,this.mediaSource,segment),(0,_addTextTrackData2.default)(this,segment.captions,segment.metadata),scheduleTick(function(){var flvBytes=_this3.convertTagsToData_(segment);0===_this3.buffer_.length&&scheduleTick(_this3.processBuffer_.bind(_this3)),flvBytes&&(_this3.buffer_.push(flvBytes),_this3.bufferSize_+=flvBytes.byteLength)})}},{key:"processBuffer_",value:function(){var chunk=void 0,i=void 0,length=void 0,binary=void 0,b64str=void 0,startByte=0,appendIterations=0,startTime=+new Date,appendTime=void 0;if(!this.buffer_.length)return void(this.updating!==!1&&(this.updating=!1,this.trigger({type:"updateend"})));do{for(appendIterations++,chunk=this.buffer_[0].subarray(startByte,startByte+this.chunkSize_),chunk.byteLength<this.chunkSize_||this.buffer_[0].byteLength===startByte+this.chunkSize_?(startByte=0,this.buffer_.shift()):startByte+=this.chunkSize_,this.bufferSize_-=chunk.byteLength,binary="",length=chunk.byteLength,i=0;i<length;i++)binary+=String.fromCharCode(chunk[i]);b64str=window.btoa(binary),this.mediaSource.swfObj.CallFunction('<invoke name="vjs_appendBuffer"returntype="javascript"><arguments><string>'+b64str+"</string></arguments></invoke>"),appendTime=new Date-startTime}while(this.buffer_.length&&appendTime<_flashConstants2.default.TIME_PER_TICK);this.buffer_.length&&startByte&&(this.buffer_[0]=this.buffer_[0].subarray(startByte)),appendTime>=_flashConstants2.default.TIME_PER_TICK&&(this.chunkSize_=Math.floor(this.chunkSize_*(appendIterations/4))),this.chunkSize_=Math.max(_flashConstants2.default.MIN_CHUNK,Math.min(this.chunkSize_,_flashConstants2.default.MAX_CHUNK)),0!==this.bufferSize_?scheduleTick(this.processBuffer_.bind(this)):(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(segmentData){var segmentByteLength=0,tech=this.mediaSource.tech_,targetPts=0,i=void 0,j=void 0,segment=void 0,filteredTags=[],tags=this.getOrderedTags_(segmentData);for(isNaN(this.basePtsOffset_)&&tags.length&&(this.basePtsOffset_=tags[0].pts),tech.buffered().length&&(targetPts=tech.buffered().end(0)-this.timestampOffset),targetPts=Math.max(targetPts,tech.currentTime()-this.timestampOffset),targetPts*=1e3,targetPts+=this.basePtsOffset_,i=0;i<tags.length;i++)tags[i].pts>=targetPts&&filteredTags.push(tags[i]);if(0!==filteredTags.length){for(i=0;i<filteredTags.length;i++)segmentByteLength+=filteredTags[i].bytes.byteLength;for(segment=new Uint8Array(segmentByteLength),i=0,j=0;i<filteredTags.length;i++)segment.set(filteredTags[i].bytes,j),j+=filteredTags[i].bytes.byteLength;return segment}}},{key:"getOrderedTags_",value:function(segmentData){for(var videoTags=segmentData.tags.videoTags,audioTags=segmentData.tags.audioTags,tag=void 0,tags=[];videoTags.length||audioTags.length;)tag=videoTags.length?audioTags.length&&audioTags[0].dts<videoTags[0].dts?audioTags.shift():videoTags.shift():audioTags.shift(),tags.push(tag.finalize());return tags}}]),FlashSourceBuffer}(_videoJs2.default.EventTarget);exports.default=FlashSourceBuffer,module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":20,"./create-text-tracks-if-necessary":21,"./flash-constants":22,"./remove-cues-from-track":26,"mux.js":37}],25:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=void 0}},_videoJs="undefined"!=typeof window?window.videojs:"undefined"!=typeof global?global.videojs:null,_videoJs2=_interopRequireDefault(_videoJs),_virtualSourceBuffer=require("./virtual-source-buffer"),_virtualSourceBuffer2=_interopRequireDefault(_virtualSourceBuffer),translateLegacyCodecs=function(codecs){return codecs.replace(/avc1\.(\d+)\.(\d+)/i,function(orig,profile,avcLevel){var profileHex=("00"+Number(profile).toString(16)).slice(-2),avcLevelHex=("00"+Number(avcLevel).toString(16)).slice(-2);return"avc1."+profileHex+"00"+avcLevelHex})},HtmlMediaSource=function(_videojs$EventTarget){function HtmlMediaSource(){_classCallCheck(this,HtmlMediaSource),_get(Object.getPrototypeOf(HtmlMediaSource.prototype),"constructor",this).call(this,_videoJs2.default.EventTarget);var self=this,property=void 0;this.mediaSource_=new window.MediaSource;for(property in this.mediaSource_)property in HtmlMediaSource.prototype||"function"!=typeof this.mediaSource_[property]||(this[property]=this.mediaSource_[property].bind(this.mediaSource_));this.duration_=NaN,Object.defineProperty(this,"duration",{get:function(){return self.duration_===1/0?self.duration_:self.mediaSource_.duration},set:function(duration){if(self.duration_=duration,duration!==1/0)return void(self.mediaSource_.duration=duration)}}),Object.defineProperty(this,"seekable",{get:function(){return this.duration_===1/0?_videoJs2.default.createTimeRanges([[0,self.mediaSource_.duration]]):self.mediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return self.mediaSource_.readyState}}),this.sourceBuffers=[],["sourceopen","sourceclose","sourceended"].forEach(function(eventName){this.mediaSource_.addEventListener(eventName,this.trigger.bind(this))},this),this.on("sourceopen",function(event){var video=document.querySelector('[src="'+self.url_+'"]');video&&(self.player_=(0,_videoJs2.default)(video.parentNode))}),this.on("sourceclose",function(event){this.sourceBuffers.forEach(function(sourceBuffer){sourceBuffer.transmuxer_&&sourceBuffer.transmuxer_.terminate()}),this.sourceBuffers.length=0})}return _inherits(HtmlMediaSource,_videojs$EventTarget),_createClass(HtmlMediaSource,[{key:"addSeekableRange_",value:function(start,end){var error=void 0;if(this.duration!==1/0)throw error=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),error.name="InvalidStateError",error.code=11,error;(end>this.mediaSource_.duration||isNaN(this.mediaSource_.duration))&&(this.mediaSource_.duration=end)}},{key:"addSourceBuffer",value:function(type){var buffer=void 0,codecs=void 0,avcCodec=void 0,mp4aCodec=void 0,avcRegEx=/avc1\.[\da-f]+/i,mp4aRegEx=/mp4a\.\d+.\d+/i;return/^video\/mp2t/i.test(type)?(codecs=type.split(";").slice(1).join(";"),codecs=translateLegacyCodecs(codecs),avcCodec=(codecs.match(avcRegEx)||[])[0],mp4aCodec=(codecs.match(mp4aRegEx)||[])[0],avcCodec&&avcCodec.length||(avcCodec="avc1.4d400d"),mp4aCodec&&mp4aCodec.length||(mp4aCodec="mp4a.40.2"),buffer=new _virtualSourceBuffer2.default(this,[avcCodec,mp4aCodec]),this.sourceBuffers.push(buffer),buffer):(buffer=this.mediaSource_.addSourceBuffer(type),this.sourceBuffers.push(buffer),buffer)}}]),HtmlMediaSource}(_videoJs2.default.EventTarget);exports.default=HtmlMediaSource,module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./virtual-source-buffer":29}],26:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var removeCuesFromTrack=function(start,end,track){var i=void 0,cue=void 0;if(track)for(i=track.cues.length;i--;)cue=track.cues[i],cue.startTime<=end&&cue.endTime>=start&&track.removeCue(cue)};exports.default=removeCuesFromTrack,module.exports=exports.default},{}],27:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _muxJs=require("mux.js"),_muxJs2=_interopRequireDefault(_muxJs),globalTransmuxer=void 0,initOptions={},wireTransmuxerEvents=function(transmuxer){transmuxer.on("data",function(segment){var typedArray=segment.data;segment.data=typedArray.buffer,postMessage({action:"data",segment:segment,byteOffset:typedArray.byteOffset,byteLength:typedArray.byteLength},[segment.data])}),transmuxer.captionStream&&transmuxer.captionStream.on("data",function(caption){postMessage({action:"caption",data:caption})}),transmuxer.on("done",function(data){postMessage({action:"done"})})},messageHandlers={init:function(data){initOptions=data&&data.options||{},this.defaultInit()},defaultInit:function(){globalTransmuxer&&globalTransmuxer.dispose(),globalTransmuxer=new _muxJs2.default.mp4.Transmuxer(initOptions),wireTransmuxerEvents(globalTransmuxer)},push:function(data){var segment=new Uint8Array(data.data,data.byteOffset,data.byteLength);globalTransmuxer.push(segment)},reset:function(){this.defaultInit()},setTimestampOffset:function(data){var timestampOffset=data.timestampOffset||0;globalTransmuxer.setBaseMediaDecodeTime(Math.round(9e4*timestampOffset))},flush:function(data){globalTransmuxer.flush()}},Worker=function(self){self.onmessage=function(event){globalTransmuxer||"init"===event.data.action||messageHandlers.defaultInit(),event.data&&event.data.action&&messageHandlers[event.data.action]&&messageHandlers[event.data.action](event.data)}};exports.default=Worker,module.exports=exports.default},{"mux.js":37}],28:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _flashMediaSource=require("./flash-media-source"),_flashMediaSource2=_interopRequireDefault(_flashMediaSource),_htmlMediaSource=require("./html-media-source"),_htmlMediaSource2=_interopRequireDefault(_htmlMediaSource),videojs=window.videojs,urlCount=0,defaults={mode:"auto"};videojs.mediaSources={};var open=function(msObjectURL,swfId){var mediaSource=videojs.mediaSources[msObjectURL];if(!mediaSource)throw new Error("Media Source not found (Video.js)");mediaSource.trigger({type:"sourceopen",swfId:swfId})},supportsNativeMediaSources=function(){return!!window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},MediaSource=function(options){var settings=videojs.mergeOptions(defaults,options);return this.MediaSource={open:open,supportsNativeMediaSources:supportsNativeMediaSources},"html5"===settings.mode||"auto"===settings.mode&&supportsNativeMediaSources()?new _htmlMediaSource2.default:new _flashMediaSource2.default};exports.MediaSource=MediaSource,MediaSource.open=open,MediaSource.supportsNativeMediaSources=supportsNativeMediaSources;var URL={createObjectURL:function(object){var objectUrlPrefix="blob:vjs-media-source/",url=void 0;return object instanceof _htmlMediaSource2.default?(url=window.URL.createObjectURL(object.mediaSource_),object.url_=url,url):object instanceof _flashMediaSource2.default?(url=objectUrlPrefix+urlCount,urlCount++,videojs.mediaSources[url]=object,url):(url=window.URL.createObjectURL(object),object.url_=url,url)}};exports.URL=URL,videojs.MediaSource=MediaSource,videojs.URL=URL},{"./flash-media-source":23,"./html-media-source":25}],29:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=void 0}},_videoJs="undefined"!=typeof window?window.videojs:"undefined"!=typeof global?global.videojs:null,_videoJs2=_interopRequireDefault(_videoJs),_createTextTracksIfNecessary=require("./create-text-tracks-if-necessary"),_createTextTracksIfNecessary2=_interopRequireDefault(_createTextTracksIfNecessary),_removeCuesFromTrack=require("./remove-cues-from-track"),_removeCuesFromTrack2=_interopRequireDefault(_removeCuesFromTrack),_addTextTrackData=require("./add-text-track-data"),_addTextTrackData2=_interopRequireDefault(_addTextTrackData),_webworkify=require("webworkify"),_webworkify2=_interopRequireDefault(_webworkify),_transmuxerWorker=require("./transmuxer-worker"),_transmuxerWorker2=_interopRequireDefault(_transmuxerWorker),aggregateUpdateHandler=function(mediaSource,guardBufferName,type){return function(){if(!mediaSource[guardBufferName]||!mediaSource[guardBufferName].updating)return mediaSource.trigger(type)}},VirtualSourceBuffer=function(_videojs$EventTarget){function VirtualSourceBuffer(mediaSource,codecs){var _this=this;_classCallCheck(this,VirtualSourceBuffer),_get(Object.getPrototypeOf(VirtualSourceBuffer.prototype),"constructor",this).call(this,_videoJs2.default.EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=mediaSource,this.codecs_=codecs,this.transmuxer_=(0,_webworkify2.default)(_transmuxerWorker2.default),this.transmuxer_.postMessage({action:"init",options:{remux:!1}}),this.transmuxer_.onmessage=function(event){return"data"===event.data.action?_this.data_(event):"done"===event.data.action?_this.done_(event):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(val){"number"==typeof val&&val>=0&&(this.timestampOffset_=val,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:val}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(start){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=start),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=start)}}),Object.defineProperty(this,"updating",{get:function(){return this.bufferUpdating_||this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating}}),Object.defineProperty(this,"buffered",{get:function(){var start=null,end=null,arity=0,extents=[],ranges=[];if(!(this.videoBuffer_&&0!==this.videoBuffer_.buffered.length||this.audioBuffer_&&0!==this.audioBuffer_.buffered.length))return _videoJs2.default.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;for(var videoBuffered=this.videoBuffer_.buffered,audioBuffered=this.audioBuffer_.buffered,count=videoBuffered.length;count--;)extents.push({time:videoBuffered.start(count),type:"start"}),extents.push({time:videoBuffered.end(count),type:"end"});for(count=audioBuffered.length;count--;)extents.push({time:audioBuffered.start(count),type:"start"}),extents.push({time:audioBuffered.end(count),type:"end"});for(extents.sort(function(a,b){return a.time-b.time}),count=0;count<extents.length;count++)"start"===extents[count].type?(arity++,2===arity&&(start=extents[count].time)):"end"===extents[count].type&&(arity--,1===arity&&(end=extents[count].time)),null!==start&&null!==end&&(ranges.push([start,end]),start=null,end=null);return _videoJs2.default.createTimeRanges(ranges)}})}return _inherits(VirtualSourceBuffer,_videojs$EventTarget),_createClass(VirtualSourceBuffer,[{key:"data_",value:function(event){var segment=event.data.segment,nativeMediaSource=this.mediaSource_.mediaSource_;segment.data=new Uint8Array(segment.data,event.data.byteOffset,event.data.byteLength),"video"===segment.type?this.videoBuffer_||(this.videoBuffer_=nativeMediaSource.addSourceBuffer('video/mp4;codecs="'+this.codecs_[0]+'"'),this.videoBuffer_.addEventListener("updatestart",aggregateUpdateHandler(this,"audioBuffer_","updatestart")),this.videoBuffer_.addEventListener("update",aggregateUpdateHandler(this,"audioBuffer_","update")),this.videoBuffer_.addEventListener("updateend",aggregateUpdateHandler(this,"audioBuffer_","updateend"))):"audio"===segment.type?this.audioBuffer_||(this.audioBuffer_=nativeMediaSource.addSourceBuffer('audio/mp4;codecs="'+this.codecs_[1]+'"'),this.audioBuffer_.addEventListener("updatestart",aggregateUpdateHandler(this,"videoBuffer_","updatestart")),this.audioBuffer_.addEventListener("update",aggregateUpdateHandler(this,"videoBuffer_","update")),this.audioBuffer_.addEventListener("updateend",aggregateUpdateHandler(this,"videoBuffer_","updateend"))):"combined"===segment.type&&(this.videoBuffer_||(this.videoBuffer_=nativeMediaSource.addSourceBuffer('video/mp4;codecs="'+this.codecs_.join(",")+'"'),this.videoBuffer_.addEventListener("updatestart",aggregateUpdateHandler(this,"videoBuffer_","updatestart")),this.videoBuffer_.addEventListener("update",aggregateUpdateHandler(this,"videoBuffer_","update")),this.videoBuffer_.addEventListener("updateend",aggregateUpdateHandler(this,"videoBuffer_","updateend")))),(0,_createTextTracksIfNecessary2.default)(this,this.mediaSource_,segment),this.pendingBuffers_.push(segment)}},{key:"done_",value:function(){this.processPendingSegments_()}},{key:"appendBuffer",value:function(segment){this.bufferUpdating_=!0,this.transmuxer_.postMessage({action:"push",data:segment.buffer,byteOffset:segment.byteOffset,byteLength:segment.byteLength},[segment.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"remove",value:function(start,end){this.videoBuffer_&&this.videoBuffer_.remove(start,end),this.audioBuffer_&&this.audioBuffer_.remove(start,end),(0,_removeCuesFromTrack2.default)(start,end,this.metadataTrack_),(0,_removeCuesFromTrack2.default)(start,end,this.inbandTextTrack_)}},{key:"processPendingSegments_",value:function(){var sortedSegments={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};sortedSegments=this.pendingBuffers_.reduce(function(segmentObj,segment){var type=segment.type,data=segment.data;return"combined"===type&&(type="video"),segmentObj[type].segments.push(data),segmentObj[type].bytes+=data.byteLength,segment.captions&&(segmentObj.captions=segmentObj.captions.concat(segment.captions)),segment.metadata&&(segmentObj.metadata=segmentObj.metadata.concat(segment.metadata)),segmentObj},sortedSegments),(0,_addTextTrackData2.default)(this,sortedSegments.captions,sortedSegments.metadata),this.concatAndAppendSegments_(sortedSegments.video,this.videoBuffer_),this.concatAndAppendSegments_(sortedSegments.audio,this.audioBuffer_),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(segmentObj,destinationBuffer){var offset=0,tempBuffer=void 0;segmentObj.bytes&&(tempBuffer=new Uint8Array(segmentObj.bytes),segmentObj.segments.forEach(function(segment){tempBuffer.set(segment,offset),offset+=segment.byteLength}),destinationBuffer.appendBuffer(tempBuffer))}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),VirtualSourceBuffer}(_videoJs2.default.EventTarget);exports.default=VirtualSourceBuffer,module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":20,"./create-text-tracks-if-necessary":21,"./remove-cues-from-track":26,"./transmuxer-worker":27,webworkify:50}],30:[function(require,module,exports){"use strict";var AacStream,Stream=require("../utils/stream.js");AacStream=function(){var everything,timeStamp=0;AacStream.prototype.init.call(this),this.setTimestamp=function(timestamp){timeStamp=timestamp},this.parseId3TagSize=function(header,byteIndex){var returnSize=header[byteIndex+6]<<21|header[byteIndex+7]<<14|header[byteIndex+8]<<7|header[byteIndex+9],flags=header[byteIndex+5],footerPresent=(16&flags)>>4;return footerPresent?returnSize+20:returnSize+10},this.parseAdtsSize=function(header,byteIndex){var lowThree=(224&header[byteIndex+5])>>5,middle=header[byteIndex+4]<<3,highTwo=6144&header[byteIndex+3];return highTwo|middle|lowThree},this.push=function(bytes){var chunk,packet,tempLength,frameSize=0,byteIndex=0;for(void 0!==everything&&everything.length?(tempLength=everything.length,everything=new Uint8Array(bytes.byteLength+tempLength),everything.set(everything.subarray(0,tempLength)),everything.set(bytes,tempLength)):everything=bytes;everything.length-byteIndex>=10;)if(everything[byteIndex]!=="I".charCodeAt(0)||everything[byteIndex+1]!=="D".charCodeAt(0)||everything[byteIndex+2]!=="3".charCodeAt(0))if(everything[byteIndex]&!0&&240===(240&everything[byteIndex+1])){if(frameSize=this.parseAdtsSize(everything,byteIndex),frameSize>everything.length)break;packet={type:"audio",data:everything.subarray(byteIndex,byteIndex+frameSize),pts:timeStamp,dts:timeStamp},this.trigger("data",packet),byteIndex+=frameSize}else byteIndex++;else{if(frameSize=this.parseId3TagSize(everything,byteIndex),frameSize>everything.length)break;chunk={type:"timed-metadata",data:everything.subarray(byteIndex,byteIndex+frameSize)},this.trigger("data",chunk),byteIndex+=frameSize}}},AacStream.prototype=new Stream,module.exports=AacStream},{"../utils/stream.js":49}],31:[function(require,module,exports){"use strict";var AdtsStream,Stream=require("../utils/stream.js"),ADTS_SAMPLING_FREQUENCIES=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];AdtsStream=function(){var self,buffer;AdtsStream.prototype.init.call(this),self=this,this.push=function(packet){var frameLength,protectionSkipBytes,frameEnd,oldBuffer,sampleCount,adtsFrameDuration,i=0,frameNum=0;if("audio"===packet.type)for(buffer?(oldBuffer=buffer,buffer=new Uint8Array(oldBuffer.byteLength+packet.data.byteLength),buffer.set(oldBuffer),buffer.set(packet.data,oldBuffer.byteLength)):buffer=packet.data;i+5<buffer.length;)if(255===buffer[i]&&240===(246&buffer[i+1])){if(protectionSkipBytes=2*(1&~buffer[i+1]),frameLength=(3&buffer[i+3])<<11|buffer[i+4]<<3|(224&buffer[i+5])>>5,sampleCount=1024*((3&buffer[i+6])+1),adtsFrameDuration=9e4*sampleCount/ADTS_SAMPLING_FREQUENCIES[(60&buffer[i+2])>>>2],frameEnd=i+frameLength,buffer.byteLength<frameEnd)return;if(this.trigger("data",{pts:packet.pts+frameNum*adtsFrameDuration,dts:packet.dts+frameNum*adtsFrameDuration,sampleCount:sampleCount,audioobjecttype:(buffer[i+2]>>>6&3)+1,channelcount:(1&buffer[i+2])<<3|(192&buffer[i+3])>>>6,samplerate:ADTS_SAMPLING_FREQUENCIES[(60&buffer[i+2])>>>2],samplingfrequencyindex:(60&buffer[i+2])>>>2,samplesize:16,data:buffer.subarray(i+7+protectionSkipBytes,frameEnd)}),buffer.byteLength===frameEnd)return void(buffer=void 0);frameNum++,buffer=buffer.subarray(frameEnd)}else i++},this.flush=function(){this.trigger("done")}},AdtsStream.prototype=new Stream,module.exports=AdtsStream},{"../utils/stream.js":49}],32:[function(require,module,exports){"use strict";var H264Stream,NalByteStream,Stream=require("../utils/stream.js"),ExpGolomb=require("../utils/exp-golomb.js");NalByteStream=function(){var i,buffer,syncPoint=0;NalByteStream.prototype.init.call(this),this.push=function(data){var swapBuffer;for(buffer?(swapBuffer=new Uint8Array(buffer.byteLength+data.data.byteLength),swapBuffer.set(buffer),swapBuffer.set(data.data,buffer.byteLength),buffer=swapBuffer):buffer=data.data;syncPoint<buffer.byteLength-3;syncPoint++)if(1===buffer[syncPoint+2]){i=syncPoint+5;break}for(;i<buffer.byteLength;)switch(buffer[i]){case 0:if(0!==buffer[i-1]){i+=2;break}if(0!==buffer[i-2]){i++;break}this.trigger("data",buffer.subarray(syncPoint+3,i-2));do i++;while(1!==buffer[i]&&i<buffer.length);syncPoint=i-2,i+=3;break;case 1:if(0!==buffer[i-1]||0!==buffer[i-2]){i+=3;break}this.trigger("data",buffer.subarray(syncPoint+3,i-2)),syncPoint=i-2,i+=3;break;default:i+=3}buffer=buffer.subarray(syncPoint),i-=syncPoint,syncPoint=0},this.flush=function(){buffer&&buffer.byteLength>3&&this.trigger("data",buffer.subarray(syncPoint+3)),buffer=null,syncPoint=0,this.trigger("done")}},NalByteStream.prototype=new Stream,H264Stream=function(){var self,trackId,currentPts,currentDts,discardEmulationPreventionBytes,readSequenceParameterSet,skipScalingList,nalByteStream=new NalByteStream;H264Stream.prototype.init.call(this),self=this,this.push=function(packet){"video"===packet.type&&(trackId=packet.trackId,currentPts=packet.pts,currentDts=packet.dts,nalByteStream.push(packet))},nalByteStream.on("data",function(data){var event={trackId:trackId,pts:currentPts,dts:currentDts,data:data};switch(31&data[0]){case 5:event.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:event.nalUnitType="sei_rbsp",event.escapedRBSP=discardEmulationPreventionBytes(data.subarray(1));break;case 7:event.nalUnitType="seq_parameter_set_rbsp",event.escapedRBSP=discardEmulationPreventionBytes(data.subarray(1)),event.config=readSequenceParameterSet(event.escapedRBSP);break;case 8:event.nalUnitType="pic_parameter_set_rbsp";break;case 9:event.nalUnitType="access_unit_delimiter_rbsp"}self.trigger("data",event)}),nalByteStream.on("done",function(){self.trigger("done")}),this.flush=function(){nalByteStream.flush()},skipScalingList=function(count,expGolombDecoder){var j,deltaScale,lastScale=8,nextScale=8;for(j=0;j<count;j++)0!==nextScale&&(deltaScale=expGolombDecoder.readExpGolomb(),nextScale=(lastScale+deltaScale+256)%256),lastScale=0===nextScale?lastScale:nextScale},discardEmulationPreventionBytes=function(data){for(var newLength,newData,length=data.byteLength,emulationPreventionBytesPositions=[],i=1;i<length-2;)0===data[i]&&0===data[i+1]&&3===data[i+2]?(emulationPreventionBytesPositions.push(i+2),i+=2):i++;if(0===emulationPreventionBytesPositions.length)return data;newLength=length-emulationPreventionBytesPositions.length,newData=new Uint8Array(newLength);var sourceIndex=0;for(i=0;i<newLength;sourceIndex++,i++)sourceIndex===emulationPreventionBytesPositions[0]&&(sourceIndex++,emulationPreventionBytesPositions.shift()),newData[i]=data[sourceIndex];return newData},readSequenceParameterSet=function(data){var expGolombDecoder,profileIdc,levelIdc,profileCompatibility,chromaFormatIdc,picOrderCntType,numRefFramesInPicOrderCntCycle,picWidthInMbsMinus1,picHeightInMapUnitsMinus1,frameMbsOnlyFlag,scalingListCount,i,frameCropLeftOffset=0,frameCropRightOffset=0,frameCropTopOffset=0,frameCropBottomOffset=0;if(expGolombDecoder=new ExpGolomb(data),profileIdc=expGolombDecoder.readUnsignedByte(),profileCompatibility=expGolombDecoder.readUnsignedByte(),levelIdc=expGolombDecoder.readUnsignedByte(),expGolombDecoder.skipUnsignedExpGolomb(),(100===profileIdc||110===profileIdc||122===profileIdc||244===profileIdc||44===profileIdc||83===profileIdc||86===profileIdc||118===profileIdc||128===profileIdc||138===profileIdc||139===profileIdc||134===profileIdc)&&(chromaFormatIdc=expGolombDecoder.readUnsignedExpGolomb(),3===chromaFormatIdc&&expGolombDecoder.skipBits(1),expGolombDecoder.skipUnsignedExpGolomb(),expGolombDecoder.skipUnsignedExpGolomb(),expGolombDecoder.skipBits(1),expGolombDecoder.readBoolean()))for(scalingListCount=3!==chromaFormatIdc?8:12,i=0;i<scalingListCount;i++)expGolombDecoder.readBoolean()&&(i<6?skipScalingList(16,expGolombDecoder):skipScalingList(64,expGolombDecoder));if(expGolombDecoder.skipUnsignedExpGolomb(),picOrderCntType=expGolombDecoder.readUnsignedExpGolomb(),0===picOrderCntType)expGolombDecoder.readUnsignedExpGolomb();else if(1===picOrderCntType)for(expGolombDecoder.skipBits(1),expGolombDecoder.skipExpGolomb(),expGolombDecoder.skipExpGolomb(),numRefFramesInPicOrderCntCycle=expGolombDecoder.readUnsignedExpGolomb(),i=0;i<numRefFramesInPicOrderCntCycle;i++)expGolombDecoder.skipExpGolomb();return expGolombDecoder.skipUnsignedExpGolomb(),expGolombDecoder.skipBits(1),picWidthInMbsMinus1=expGolombDecoder.readUnsignedExpGolomb(),picHeightInMapUnitsMinus1=expGolombDecoder.readUnsignedExpGolomb(),frameMbsOnlyFlag=expGolombDecoder.readBits(1),0===frameMbsOnlyFlag&&expGolombDecoder.skipBits(1),expGolombDecoder.skipBits(1),expGolombDecoder.readBoolean()&&(frameCropLeftOffset=expGolombDecoder.readUnsignedExpGolomb(),frameCropRightOffset=expGolombDecoder.readUnsignedExpGolomb(),frameCropTopOffset=expGolombDecoder.readUnsignedExpGolomb(),frameCropBottomOffset=expGolombDecoder.readUnsignedExpGolomb()),{profileIdc:profileIdc,levelIdc:levelIdc,profileCompatibility:profileCompatibility,width:16*(picWidthInMbsMinus1+1)-2*frameCropLeftOffset-2*frameCropRightOffset,height:(2-frameMbsOnlyFlag)*(picHeightInMapUnitsMinus1+1)*16-2*frameCropTopOffset-2*frameCropBottomOffset}}},H264Stream.prototype=new Stream,module.exports={H264Stream:H264Stream,NalByteStream:NalByteStream}},{"../utils/exp-golomb.js":48,"../utils/stream.js":49}],33:[function(require,module,exports){module.exports={adts:require("./adts"),h264:require("./h264")}},{"./adts":31,"./h264":32}],34:[function(require,module,exports){"use strict";var FlvTag;FlvTag=function(type,extraData){var i,adHoc=0,bufferStartSize=16384,prepareWrite=function(flv,count){var bytes,minLength=flv.position+count;minLength<flv.bytes.byteLength||(bytes=new Uint8Array(2*minLength),bytes.set(flv.bytes.subarray(0,flv.position),0),flv.bytes=bytes,flv.view=new DataView(flv.bytes.buffer))},widthBytes=FlvTag.widthBytes||new Uint8Array("width".length),heightBytes=FlvTag.heightBytes||new Uint8Array("height".length),videocodecidBytes=FlvTag.videocodecidBytes||new Uint8Array("videocodecid".length);if(!FlvTag.widthBytes){for(i=0;i<"width".length;i++)widthBytes[i]="width".charCodeAt(i);for(i=0;i<"height".length;i++)heightBytes[i]="height".charCodeAt(i);for(i=0;i<"videocodecid".length;i++)videocodecidBytes[i]="videocodecid".charCodeAt(i);FlvTag.widthBytes=widthBytes,FlvTag.heightBytes=heightBytes,FlvTag.videocodecidBytes=videocodecidBytes}switch(this.keyFrame=!1,type){case FlvTag.VIDEO_TAG:this.length=16,bufferStartSize*=6;break;case FlvTag.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case FlvTag.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw"Error Unknown TagType"}this.bytes=new Uint8Array(bufferStartSize),this.view=new DataView(this.bytes.buffer),this.bytes[0]=type,this.position=this.length,this.keyFrame=extraData,this.pts=0,this.dts=0,this.writeBytes=function(bytes,offset,length){var end,start=offset||0;length=length||bytes.byteLength,end=start+length,prepareWrite(this,length),this.bytes.set(bytes.subarray(start,end),this.position),this.position+=length,this.length=Math.max(this.length,this.position)},this.writeByte=function(byte){prepareWrite(this,1),this.bytes[this.position]=byte,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(short){prepareWrite(this,2),this.view.setUint16(this.position,short),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(pos){return this.bytes[this.length-pos]},this.nalUnitSize=function(){return 0===adHoc?0:this.length-(adHoc+4)},this.startNalUnit=function(){if(adHoc>0)throw new Error("Attempted to create new NAL wihout closing the old one");adHoc=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(nalContainer){var nalStart,nalLength;this.length===adHoc+4?this.length-=4:adHoc>0&&(nalStart=adHoc+4,nalLength=this.length-nalStart,this.position=adHoc,this.view.setUint32(this.position,nalLength),this.position=this.length,nalContainer&&nalContainer.push(this.bytes.subarray(nalStart,nalStart+nalLength))),adHoc=0},this.writeMetaDataDouble=function(key,val){var i;if(prepareWrite(this,2+key.length+9),this.view.setUint16(this.position,key.length),this.position+=2,"width"===key)this.bytes.set(widthBytes,this.position),this.position+=5;else if("height"===key)this.bytes.set(heightBytes,this.position),this.position+=6;else if("videocodecid"===key)this.bytes.set(videocodecidBytes,this.position),this.position+=12;else for(i=0;i<key.length;i++)this.bytes[this.position]=key.charCodeAt(i),this.position++;this.position++,this.view.setFloat64(this.position,val),this.position+=8,this.length=Math.max(this.length,this.position),++adHoc},this.writeMetaDataBoolean=function(key,val){var i;for(prepareWrite(this,2),this.view.setUint16(this.position,key.length),this.position+=2,i=0;i<key.length;i++)prepareWrite(this,1),this.bytes[this.position]=key.charCodeAt(i),this.position++;prepareWrite(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,val?1:0),this.position++,this.length=Math.max(this.length,this.position),++adHoc},this.finalize=function(){var dtsDelta,len;switch(this.bytes[0]){case FlvTag.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||extraData?16:32),this.bytes[12]=extraData?0:1,dtsDelta=this.pts-this.dts,this.bytes[13]=(16711680&dtsDelta)>>>16,this.bytes[14]=(65280&dtsDelta)>>>8,this.bytes[15]=(255&dtsDelta)>>>0;break;case FlvTag.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=extraData?0:1;break;case FlvTag.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,adHoc),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return len=this.length-11,this.bytes[1]=(16711680&len)>>>16,this.bytes[2]=(65280&len)>>>8,this.bytes[3]=(255&len)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,prepareWrite(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=FlvTag.frameTime(this.bytes),this}},FlvTag.AUDIO_TAG=8,FlvTag.VIDEO_TAG=9,FlvTag.METADATA_TAG=18,FlvTag.isAudioFrame=function(tag){return FlvTag.AUDIO_TAG===tag[0]},FlvTag.isVideoFrame=function(tag){return FlvTag.VIDEO_TAG===tag[0]},FlvTag.isMetaData=function(tag){return FlvTag.METADATA_TAG===tag[0]},FlvTag.isKeyFrame=function(tag){return FlvTag.isVideoFrame(tag)?23===tag[11]:!!FlvTag.isAudioFrame(tag)||!!FlvTag.isMetaData(tag)},FlvTag.frameTime=function(tag){var pts=tag[4]<<16;return pts|=tag[5]<<8,pts|=tag[6]<<0,pts|=tag[7]<<24},module.exports=FlvTag},{}],35:[function(require,module,exports){module.exports={tag:require("./flv-tag"),Transmuxer:require("./transmuxer"),tools:require("../tools/flv-inspector")}},{"../tools/flv-inspector":46,"./flv-tag":34,"./transmuxer":36}],36:[function(require,module,exports){"use strict";var Transmuxer,VideoSegmentStream,AudioSegmentStream,CoalesceStream,collectTimelineInfo,metaDataTag,extraDataTag,Stream=require("../utils/stream.js"),FlvTag=require("./flv-tag.js"),m2ts=require("../m2ts/m2ts.js"),AdtsStream=require("../codecs/adts.js"),H264Stream=require("../codecs/h264").H264Stream;collectTimelineInfo=function(track,data){"number"==typeof data.pts&&(void 0===track.timelineStartInfo.pts?track.timelineStartInfo.pts=data.pts:track.timelineStartInfo.pts=Math.min(track.timelineStartInfo.pts,data.pts)),"number"==typeof data.dts&&(void 0===track.timelineStartInfo.dts?track.timelineStartInfo.dts=data.dts:track.timelineStartInfo.dts=Math.min(track.timelineStartInfo.dts,data.dts))},metaDataTag=function(track,pts){var tag=new FlvTag(FlvTag.METADATA_TAG);return tag.dts=pts,tag.pts=pts,tag.writeMetaDataDouble("videocodecid",7),tag.writeMetaDataDouble("width",track.width),tag.writeMetaDataDouble("height",track.height),tag},extraDataTag=function(track,pts){var i,tag=new FlvTag(FlvTag.VIDEO_TAG,(!0));for(tag.dts=pts,tag.pts=pts,tag.writeByte(1),tag.writeByte(track.profileIdc),tag.writeByte(track.profileCompatibility),tag.writeByte(track.levelIdc),tag.writeByte(255),tag.writeByte(225),tag.writeShort(track.sps[0].length),tag.writeBytes(track.sps[0]),tag.writeByte(track.pps.length),i=0;i<track.pps.length;++i)tag.writeShort(track.pps[i].length),tag.writeBytes(track.pps[i]);return tag},AudioSegmentStream=function(track){var oldExtraData,adtsFrames=[];AudioSegmentStream.prototype.init.call(this),this.push=function(data){collectTimelineInfo(track,data),track&&void 0===track.channelcount&&(track.audioobjecttype=data.audioobjecttype,track.channelcount=data.channelcount,track.samplerate=data.samplerate,track.samplingfrequencyindex=data.samplingfrequencyindex,track.samplesize=data.samplesize,track.extraData=track.audioobjecttype<<11|track.samplingfrequencyindex<<7|track.channelcount<<3),data.pts=Math.round(data.pts/90),data.dts=Math.round(data.dts/90),adtsFrames.push(data)},this.flush=function(){var currentFrame,adtsFrame,lastMetaPts,tags=[];if(0===adtsFrames.length)return void this.trigger("done");for(lastMetaPts=-(1/0);adtsFrames.length;)currentFrame=adtsFrames.shift(),(track.extraData!==oldExtraData||currentFrame.pts-lastMetaPts>=1e3)&&(adtsFrame=new FlvTag(FlvTag.METADATA_TAG),adtsFrame.pts=currentFrame.pts,adtsFrame.dts=currentFrame.dts,adtsFrame.writeMetaDataDouble("audiocodecid",10),adtsFrame.writeMetaDataBoolean("stereo",2===track.channelcount),adtsFrame.writeMetaDataDouble("audiosamplerate",track.samplerate),adtsFrame.writeMetaDataDouble("audiosamplesize",16),tags.push(adtsFrame),oldExtraData=track.extraData,adtsFrame=new FlvTag(FlvTag.AUDIO_TAG,(!0)),adtsFrame.pts=currentFrame.pts,adtsFrame.dts=currentFrame.dts,adtsFrame.view.setUint16(adtsFrame.position,track.extraData),adtsFrame.position+=2,adtsFrame.length=Math.max(adtsFrame.length,adtsFrame.position),tags.push(adtsFrame),lastMetaPts=currentFrame.pts),adtsFrame=new FlvTag(FlvTag.AUDIO_TAG),adtsFrame.pts=currentFrame.pts,adtsFrame.dts=currentFrame.dts,adtsFrame.writeBytes(currentFrame.data),tags.push(adtsFrame);oldExtraData=null,this.trigger("data",{track:track,tags:tags}),this.trigger("done")}},AudioSegmentStream.prototype=new Stream,VideoSegmentStream=function(track){var config,h264Frame,nalUnits=[];VideoSegmentStream.prototype.init.call(this),this.finishFrame=function(tags,frame){frame&&(config&&track&&track.newMetadata&&(frame.keyFrame||0===tags.length)&&(tags.push(metaDataTag(config,frame.pts)),tags.push(extraDataTag(track,frame.pts)),track.newMetadata=!1),frame.endNalUnit(),tags.push(frame))},this.push=function(data){collectTimelineInfo(track,data),data.pts=Math.round(data.pts/90),data.dts=Math.round(data.dts/90),nalUnits.push(data)},this.flush=function(){for(var currentNal,tags=[];nalUnits.length&&"access_unit_delimiter_rbsp"!==nalUnits[0].nalUnitType;)nalUnits.shift();if(0===nalUnits.length)return void this.trigger("done");for(;nalUnits.length;)currentNal=nalUnits.shift(),"seq_parameter_set_rbsp"===currentNal.nalUnitType?(track.newMetadata=!0,config=currentNal.config,track.width=config.width,track.height=config.height,track.sps=[currentNal.data],track.profileIdc=config.profileIdc,track.levelIdc=config.levelIdc,track.profileCompatibility=config.profileCompatibility,h264Frame.endNalUnit()):"pic_parameter_set_rbsp"===currentNal.nalUnitType?(track.newMetadata=!0,track.pps=[currentNal.data],h264Frame.endNalUnit()):"access_unit_delimiter_rbsp"===currentNal.nalUnitType?(h264Frame&&this.finishFrame(tags,h264Frame),h264Frame=new FlvTag(FlvTag.VIDEO_TAG),h264Frame.pts=currentNal.pts,h264Frame.dts=currentNal.dts):("slice_layer_without_partitioning_rbsp_idr"===currentNal.nalUnitType&&(h264Frame.keyFrame=!0),h264Frame.endNalUnit()),h264Frame.startNalUnit(),h264Frame.writeBytes(currentNal.data);h264Frame&&this.finishFrame(tags,h264Frame),this.trigger("data",{track:track,tags:tags}),this.trigger("done")}},VideoSegmentStream.prototype=new Stream,CoalesceStream=function(options){this.numberOfTracks=0,this.metadataStream=options.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,CoalesceStream.prototype.init.call(this),this.push=function(output){return output.text?this.pendingCaptions.push(output):output.frames?this.pendingMetadata.push(output):("video"===output.track.type&&(this.videoTrack=output.track,this.videoTags=output.tags,this.pendingTracks++),void("audio"===output.track.type&&(this.audioTrack=output.track,this.audioTags=output.tags,this.pendingTracks++)))}},CoalesceStream.prototype=new Stream,CoalesceStream.prototype.flush=function(){var id3,caption,i,timelineStartPts,event={tags:{},captions:[],metadata:[]};if(!(this.pendingTracks<this.numberOfTracks)){for(this.videoTrack?timelineStartPts=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(timelineStartPts=this.audioTrack.timelineStartInfo.pts),event.tags.videoTags=this.videoTags,event.tags.audioTags=this.audioTags,i=0;i<this.pendingCaptions.length;i++)caption=this.pendingCaptions[i],caption.startTime=caption.startPts-timelineStartPts,caption.startTime/=9e4,caption.endTime=caption.endPts-timelineStartPts,caption.endTime/=9e4,event.captions.push(caption);for(i=0;i<this.pendingMetadata.length;i++)id3=this.pendingMetadata[i],id3.cueTime=id3.pts-timelineStartPts,id3.cueTime/=9e4,event.metadata.push(id3);event.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.trigger("data",event),this.trigger("done")}},Transmuxer=function(options){var packetStream,parseStream,elementaryStream,adtsStream,h264Stream,videoSegmentStream,audioSegmentStream,captionStream,coalesceStream,self=this;Transmuxer.prototype.init.call(this),options=options||{},this.metadataStream=new m2ts.MetadataStream,options.metadataStream=this.metadataStream,packetStream=new m2ts.TransportPacketStream,parseStream=new m2ts.TransportParseStream,elementaryStream=new m2ts.ElementaryStream,adtsStream=new AdtsStream,h264Stream=new H264Stream,coalesceStream=new CoalesceStream(options),packetStream.pipe(parseStream).pipe(elementaryStream),elementaryStream.pipe(h264Stream),elementaryStream.pipe(adtsStream),elementaryStream.pipe(this.metadataStream).pipe(coalesceStream),captionStream=new m2ts.CaptionStream,h264Stream.pipe(captionStream).pipe(coalesceStream),elementaryStream.on("data",function(data){var i,videoTrack,audioTrack;if("metadata"===data.type){for(i=data.tracks.length;i--;)"video"===data.tracks[i].type?videoTrack=data.tracks[i]:"audio"===data.tracks[i].type&&(audioTrack=data.tracks[i]);videoTrack&&!videoSegmentStream&&(coalesceStream.numberOfTracks++,videoSegmentStream=new VideoSegmentStream(videoTrack),h264Stream.pipe(videoSegmentStream).pipe(coalesceStream)),audioTrack&&!audioSegmentStream&&(coalesceStream.numberOfTracks++,audioSegmentStream=new AudioSegmentStream(audioTrack),adtsStream.pipe(audioSegmentStream).pipe(coalesceStream))}}),this.push=function(data){packetStream.push(data)},this.flush=function(){packetStream.flush()},coalesceStream.on("data",function(event){self.trigger("data",event)}),coalesceStream.on("done",function(){self.trigger("done")}),this.getFlvHeader=function(duration,audio,video){var metadata,result,metadataLength,headBytes=new Uint8Array(9),head=new DataView(headBytes.buffer);return duration=duration||0,audio=void 0===audio||audio,video=void 0===video||video,head.setUint8(0,70),head.setUint8(1,76),head.setUint8(2,86),head.setUint8(3,1),head.setUint8(4,(audio?4:0)|(video?1:0)),head.setUint32(5,headBytes.byteLength),duration<=0?(result=new Uint8Array(headBytes.byteLength+4),result.set(headBytes),result.set([0,0,0,0],headBytes.byteLength),result):(metadata=new FlvTag(FlvTag.METADATA_TAG),metadata.pts=metadata.dts=0,metadata.writeMetaDataDouble("duration",duration),metadataLength=metadata.finalize().length,result=new Uint8Array(headBytes.byteLength+metadataLength),result.set(headBytes),result.set(head.byteLength,metadataLength),result)}},Transmuxer.prototype=new Stream,module.exports=Transmuxer},{"../codecs/adts.js":31,"../codecs/h264":32,"../m2ts/m2ts.js":40,"../utils/stream.js":49,"./flv-tag.js":34}],37:[function(require,module,exports){"use strict";var muxjs={codecs:require("./codecs"),mp4:require("./mp4"),flv:require("./flv"),mp2t:require("./m2ts")};module.exports=muxjs},{"./codecs":33,"./flv":35,"./m2ts":39,"./mp4":43}],38:[function(require,module,exports){"use strict";var USER_DATA_REGISTERED_ITU_T_T35=4,RBSP_TRAILING_BITS=128,Stream=require("../utils/stream"),parseSei=function(bytes){for(var i=0,result={payloadType:-1,payloadSize:0},payloadType=0,payloadSize=0;i<bytes.byteLength&&bytes[i]!==RBSP_TRAILING_BITS;){for(;255===bytes[i];)payloadType+=255,i++;for(payloadType+=bytes[i++];255===bytes[i];)payloadSize+=255,i++;if(payloadSize+=bytes[i++],!result.payload&&payloadType===USER_DATA_REGISTERED_ITU_T_T35){result.payloadType=payloadType,result.payloadSize=payloadSize,result.payload=bytes.subarray(i,i+payloadSize);break}i+=payloadSize,payloadType=0,payloadSize=0}return result},parseUserData=function(sei){return 181!==sei.payload[0]?null:49!==(sei.payload[1]<<8|sei.payload[2])?null:"GA94"!==String.fromCharCode(sei.payload[3],sei.payload[4],sei.payload[5],sei.payload[6])?null:3!==sei.payload[7]?null:sei.payload.subarray(8,sei.payload.length-1)},parseCaptionPackets=function(pts,userData){var i,count,offset,data,results=[];if(!(64&userData[0]))return results;for(count=31&userData[0],i=0;i<count;i++)offset=3*i,data={type:3&userData[offset+2],pts:pts},4&userData[offset+2]&&(data.ccData=userData[offset+3]<<8|userData[offset+4],results.push(data));return results},CaptionStream=function(){CaptionStream.prototype.init.call(this),this.captionPackets_=[],this.field1_=new Cea608Stream,this.field1_.on("data",this.trigger.bind(this,"data")),this.field1_.on("done",this.trigger.bind(this,"done"))};CaptionStream.prototype=new Stream,CaptionStream.prototype.push=function(event){var sei,userData;"sei_rbsp"===event.nalUnitType&&(sei=parseSei(event.escapedRBSP),sei.payloadType===USER_DATA_REGISTERED_ITU_T_T35&&(userData=parseUserData(sei),userData&&(this.captionPackets_=this.captionPackets_.concat(parseCaptionPackets(event.pts,userData)))))},CaptionStream.prototype.flush=function(){return this.captionPackets_.length?(this.captionPackets_.sort(function(a,b){return a.pts-b.pts}),this.captionPackets_.forEach(this.field1_.push,this.field1_),this.captionPackets_.length=0,void this.field1_.flush()):void this.field1_.flush()};var BASIC_CHARACTER_TRANSLATION={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608},getCharFromCode=function(code){return null===code?"":(code=BASIC_CHARACTER_TRANSLATION[code]||code,String.fromCharCode(code))},PADDING=0,RESUME_CAPTION_LOADING=5152,END_OF_CAPTION=5167,ROLL_UP_2_ROWS=5157,ROLL_UP_3_ROWS=5158,ROLL_UP_4_ROWS=5159,CARRIAGE_RETURN=5165,BACKSPACE=5153,ERASE_DISPLAYED_MEMORY=5164,ERASE_NON_DISPLAYED_MEMORY=5166,BOTTOM_ROW=14,createDisplayBuffer=function(){for(var result=[],i=BOTTOM_ROW+1;i--;)result.push("");return result},Cea608Stream=function(){Cea608Stream.prototype.init.call(this),this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=createDisplayBuffer(),this.nonDisplayed_=createDisplayBuffer(),this.lastControlCode_=null,this.push=function(packet){if(0===packet.type){var data,swap,char0,char1;if(data=32639&packet.ccData,data===this.lastControlCode_)return void(this.lastControlCode_=null);switch(4096===(61440&data)?this.lastControlCode_=data:this.lastControlCode_=null,data){case PADDING:break;case RESUME_CAPTION_LOADING:this.mode_="popOn";break;case END_OF_CAPTION:this.flushDisplayed(packet.pts),swap=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=swap,this.startPts_=packet.pts;break;case ROLL_UP_2_ROWS:this.topRow_=BOTTOM_ROW-1,this.mode_="rollUp";break;case ROLL_UP_3_ROWS:this.topRow_=BOTTOM_ROW-2,this.mode_="rollUp";break;case ROLL_UP_4_ROWS:this.topRow_=BOTTOM_ROW-3,this.mode_="rollUp";break;case CARRIAGE_RETURN:this.flushDisplayed(packet.pts),this.shiftRowsUp_(),this.startPts_=packet.pts;break;case BACKSPACE:"popOn"===this.mode_?this.nonDisplayed_[BOTTOM_ROW]=this.nonDisplayed_[BOTTOM_ROW].slice(0,-1):this.displayed_[BOTTOM_ROW]=this.displayed_[BOTTOM_ROW].slice(0,-1);break;case ERASE_DISPLAYED_MEMORY:this.flushDisplayed(packet.pts),this.displayed_=createDisplayBuffer();break;case ERASE_NON_DISPLAYED_MEMORY:this.nonDisplayed_=createDisplayBuffer();break;default:if(char0=data>>>8,char1=255&data,char0>=16&&char0<=23&&char1>=64&&char1<=127&&(16!==char0||char1<96)&&(char0=32,char1=null),(17===char0||25===char0)&&char1>=48&&char1<=63&&(char0=14850474,char1=""),16===(240&char0))return;this[this.mode_](packet.pts,char0,char1)}}}};Cea608Stream.prototype=new Stream,Cea608Stream.prototype.flushDisplayed=function(pts){var row,i;for(i=0;i<this.displayed_.length;i++)row=this.displayed_[i],row.length&&this.trigger("data",{startPts:this.startPts_,endPts:pts,text:row.trim()})},Cea608Stream.prototype.popOn=function(pts,char0,char1){var baseRow=this.nonDisplayed_[BOTTOM_ROW];baseRow+=getCharFromCode(char0),baseRow+=getCharFromCode(char1),this.nonDisplayed_[BOTTOM_ROW]=baseRow},Cea608Stream.prototype.rollUp=function(pts,char0,char1){var baseRow=this.displayed_[BOTTOM_ROW];""===baseRow&&(this.flushDisplayed(pts),this.startPts_=pts),baseRow+=getCharFromCode(char0),baseRow+=getCharFromCode(char1),this.displayed_[BOTTOM_ROW]=baseRow},Cea608Stream.prototype.shiftRowsUp_=function(){var i;for(i=0;i<this.topRow_;i++)this.displayed_[i]="";for(i=this.topRow_;i<BOTTOM_ROW;i++)this.displayed_[i]=this.displayed_[i+1];this.displayed_[BOTTOM_ROW]=""},module.exports={CaptionStream:CaptionStream,Cea608Stream:Cea608Stream}},{"../utils/stream":49}],39:[function(require,module,exports){module.exports=require("./m2ts")},{"./m2ts":40}],40:[function(require,module,exports){"use strict";var TransportPacketStream,TransportParseStream,ElementaryStream,Stream=require("../utils/stream.js"),CaptionStream=require("./caption-stream"),StreamTypes=require("./stream-types"),Stream=require("../utils/stream.js"),m2tsStreamTypes=require("./stream-types.js"),MP2T_PACKET_LENGTH=188,SYNC_BYTE=71,TransportPacketStream=function(){var buffer=new Uint8Array(MP2T_PACKET_LENGTH),bytesInBuffer=0;TransportPacketStream.prototype.init.call(this),this.push=function(bytes){var everything,startIndex=0,endIndex=MP2T_PACKET_LENGTH;for(bytesInBuffer?(everything=new Uint8Array(bytes.byteLength+bytesInBuffer),everything.set(buffer.subarray(0,bytesInBuffer)),everything.set(bytes,bytesInBuffer),bytesInBuffer=0):everything=bytes;endIndex<everything.byteLength;)everything[startIndex]!==SYNC_BYTE||everything[endIndex]!==SYNC_BYTE?(startIndex++,endIndex++):(this.trigger("data",everything.subarray(startIndex,endIndex)),startIndex+=MP2T_PACKET_LENGTH,endIndex+=MP2T_PACKET_LENGTH);startIndex<everything.byteLength&&(buffer.set(everything.subarray(startIndex),0),bytesInBuffer=everything.byteLength-startIndex)},this.flush=function(){bytesInBuffer===MP2T_PACKET_LENGTH&&buffer[0]===SYNC_BYTE&&(this.trigger("data",buffer),bytesInBuffer=0),this.trigger("done")}};TransportPacketStream.prototype=new Stream,TransportParseStream=function(){var parsePsi,parsePat,parsePmt,self;TransportParseStream.prototype.init.call(this),self=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,parsePsi=function(payload,psi){var offset=0;psi.payloadUnitStartIndicator&&(offset+=payload[offset]+1),"pat"===psi.type?parsePat(payload.subarray(offset),psi):parsePmt(payload.subarray(offset),psi)},parsePat=function(payload,pat){pat.section_number=payload[7],pat.last_section_number=payload[8],self.pmtPid=(31&payload[10])<<8|payload[11],pat.pmtPid=self.pmtPid},parsePmt=function(payload,pmt){var sectionLength,tableEnd,programInfoLength,offset;if(1&payload[5]){for(self.programMapTable={},sectionLength=(15&payload[1])<<8|payload[2],tableEnd=3+sectionLength-4,programInfoLength=(15&payload[10])<<8|payload[11],offset=12+programInfoLength;offset<tableEnd;)self.programMapTable[(31&payload[offset+1])<<8|payload[offset+2]]=payload[offset],offset+=((15&payload[offset+3])<<8|payload[offset+4])+5;for(pmt.programMapTable=self.programMapTable;self.packetsWaitingForPmt.length;)self.processPes_.apply(self,self.packetsWaitingForPmt.shift())}},this.push=function(packet){var result={},offset=4;result.payloadUnitStartIndicator=!!(64&packet[1]),result.pid=31&packet[1],result.pid<<=8,result.pid|=packet[2],(48&packet[3])>>>4>1&&(offset+=packet[offset]+1),0===result.pid?(result.type="pat",parsePsi(packet.subarray(offset),result),this.trigger("data",result)):result.pid===this.pmtPid?(result.type="pmt",parsePsi(packet.subarray(offset),result),this.trigger("data",result)):void 0===this.programMapTable?this.packetsWaitingForPmt.push([packet,offset,result]):this.processPes_(packet,offset,result)},this.processPes_=function(packet,offset,result){result.streamType=this.programMapTable[result.pid],result.type="pes",result.data=packet.subarray(offset),this.trigger("data",result)}},TransportParseStream.prototype=new Stream,TransportParseStream.STREAM_TYPES={h264:27,adts:15},ElementaryStream=function(){var self,video={data:[],size:0},audio={data:[],size:0},timedMetadata={data:[],size:0},parsePes=function(payload,pes){var ptsDtsFlags;pes.dataAlignmentIndicator=0!==(4&payload[6]),ptsDtsFlags=payload[7],192&ptsDtsFlags&&(pes.pts=(14&payload[9])<<27|(255&payload[10])<<20|(254&payload[11])<<12|(255&payload[12])<<5|(254&payload[13])>>>3,pes.pts*=4,pes.pts+=(6&payload[13])>>>1,pes.dts=pes.pts,64&ptsDtsFlags&&(pes.dts=(14&payload[14])<<27|(255&payload[15])<<20|(254&payload[16])<<12|(255&payload[17])<<5|(254&payload[18])>>>3,pes.dts*=4,pes.dts+=(6&payload[18])>>>1)),pes.data=payload.subarray(9+payload[8])},flushStream=function(stream,type){var fragment,packetData=new Uint8Array(stream.size),event={type:type},i=0;if(stream.data.length){for(event.trackId=stream.data[0].pid;stream.data.length;)fragment=stream.data.shift(),packetData.set(fragment.data,i),i+=fragment.data.byteLength;parsePes(packetData,event),stream.size=0,self.trigger("data",event)}};ElementaryStream.prototype.init.call(this),self=this,this.push=function(data){({pat:function(){},pes:function(){var stream,streamType;switch(data.streamType){case StreamTypes.H264_STREAM_TYPE:case m2tsStreamTypes.H264_STREAM_TYPE:stream=video,streamType="video";break;case StreamTypes.ADTS_STREAM_TYPE:stream=audio,streamType="audio";break;case StreamTypes.METADATA_STREAM_TYPE:stream=timedMetadata,streamType="timed-metadata";break;default:return}data.payloadUnitStartIndicator&&flushStream(stream,streamType),stream.data.push(data),stream.size+=data.data.byteLength},pmt:function(){var k,track,event={type:"metadata",tracks:[]},programMapTable=data.programMapTable;for(k in programMapTable)programMapTable.hasOwnProperty(k)&&(track={timelineStartInfo:{baseMediaDecodeTime:0}},track.id=+k,programMapTable[k]===m2tsStreamTypes.H264_STREAM_TYPE?(track.codec="avc",track.type="video"):programMapTable[k]===m2tsStreamTypes.ADTS_STREAM_TYPE&&(track.codec="adts",track.type="audio"),event.tracks.push(track));self.trigger("data",event)}})[data.type]()},this.flush=function(){flushStream(video,"video"),flushStream(audio,"audio"),flushStream(timedMetadata,"timed-metadata"),this.trigger("done")}},ElementaryStream.prototype=new Stream;var m2ts={PAT_PID:0,MP2T_PACKET_LENGTH:MP2T_PACKET_LENGTH,TransportPacketStream:TransportPacketStream,TransportParseStream:TransportParseStream,ElementaryStream:ElementaryStream,CaptionStream:CaptionStream.CaptionStream,Cea608Stream:CaptionStream.Cea608Stream,MetadataStream:require("./metadata-stream")};for(var type in StreamTypes)StreamTypes.hasOwnProperty(type)&&(m2ts[type]=StreamTypes[type]);module.exports=m2ts},{"../utils/stream.js":49,"./caption-stream":38,"./metadata-stream":41,"./stream-types":42,"./stream-types.js":42}],41:[function(require,module,exports){"use strict";var MetadataStream,Stream=require("../utils/stream"),StreamTypes=require("./stream-types"),percentEncode=function(bytes,start,end){var i,result="";for(i=start;i<end;i++)result+="%"+("00"+bytes[i].toString(16)).slice(-2);return result},parseUtf8=function(bytes,start,end){return decodeURIComponent(percentEncode(bytes,start,end))},parseIso88591=function(bytes,start,end){return unescape(percentEncode(bytes,start,end))},parseSyncSafeInteger=function(data){return data[0]<<21|data[1]<<14|data[2]<<7|data[3]},tagParsers={TXXX:function(tag){var i;if(3===tag.data[0]){for(i=1;i<tag.data.length;i++)if(0===tag.data[i]){tag.description=parseUtf8(tag.data,1,i),tag.value=parseUtf8(tag.data,i+1,tag.data.length-1);break}tag.data=tag.value}},WXXX:function(tag){var i;if(3===tag.data[0])for(i=1;i<tag.data.length;i++)if(0===tag.data[i]){tag.description=parseUtf8(tag.data,1,i),tag.url=parseUtf8(tag.data,i+1,tag.data.length);break}},PRIV:function(tag){var i;for(i=0;i<tag.data.length;i++)if(0===tag.data[i]){tag.owner=parseIso88591(tag.data,0,i);break}tag.privateData=tag.data.subarray(i+1),tag.data=tag.privateData}};MetadataStream=function(options){var i,settings={debug:!(!options||!options.debug),descriptor:options&&options.descriptor},tagSize=0,buffer=[],bufferSize=0;if(MetadataStream.prototype.init.call(this),this.dispatchType=StreamTypes.METADATA_STREAM_TYPE.toString(16),settings.descriptor)for(i=0;i<settings.descriptor.length;i++)this.dispatchType+=("00"+settings.descriptor[i].toString(16)).slice(-2);this.push=function(chunk){var tag,frameStart,frameSize,frame,i,frameHeader;if("timed-metadata"===chunk.type){if(chunk.dataAlignmentIndicator&&(bufferSize=0,buffer.length=0),0===buffer.length&&(chunk.data.length<10||chunk.data[0]!=="I".charCodeAt(0)||chunk.data[1]!=="D".charCodeAt(0)||chunk.data[2]!=="3".charCodeAt(0)))return void(settings.debug&&console.log("Skipping unrecognized metadata packet"));if(buffer.push(chunk),bufferSize+=chunk.data.byteLength,1===buffer.length&&(tagSize=parseSyncSafeInteger(chunk.data.subarray(6,10)),tagSize+=10),!(bufferSize<tagSize)){for(tag={data:new Uint8Array(tagSize),frames:[],pts:buffer[0].pts,dts:buffer[0].dts},i=0;i<tagSize;)tag.data.set(buffer[0].data.subarray(0,tagSize-i),i),i+=buffer[0].data.byteLength,bufferSize-=buffer[0].data.byteLength,buffer.shift();frameStart=10,64&tag.data[5]&&(frameStart+=4,frameStart+=parseSyncSafeInteger(tag.data.subarray(10,14)),tagSize-=parseSyncSafeInteger(tag.data.subarray(16,20)));do{if(frameSize=parseSyncSafeInteger(tag.data.subarray(frameStart+4,frameStart+8)),frameSize<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(frameHeader=String.fromCharCode(tag.data[frameStart],tag.data[frameStart+1],tag.data[frameStart+2],tag.data[frameStart+3]),frame={id:frameHeader,data:tag.data.subarray(frameStart+10,frameStart+frameSize+10)},frame.key=frame.id,tagParsers[frame.id]&&(tagParsers[frame.id](frame),"com.apple.streaming.transportStreamTimestamp"===frame.owner)){var d=frame.data,size=(1&d[3])<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;size*=4,size+=3&d[7],frame.timeStamp=size,this.trigger("timestamp",frame)}tag.frames.push(frame),frameStart+=10,frameStart+=frameSize}while(frameStart<tagSize);this.trigger("data",tag)}}}},MetadataStream.prototype=new Stream,module.exports=MetadataStream},{"../utils/stream":49,"./stream-types":42}],42:[function(require,module,exports){"use strict";module.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],43:[function(require,module,exports){module.exports={generator:require("./mp4-generator"),Transmuxer:require("./transmuxer").Transmuxer,AudioSegmentStream:require("./transmuxer").AudioSegmentStream,VideoSegmentStream:require("./transmuxer").VideoSegmentStream,tools:require("../tools/mp4-inspector")}},{"../tools/mp4-inspector":47,"./mp4-generator":44,"./transmuxer":45}],44:[function(require,module,exports){"use strict";var box,dinf,esds,ftyp,mdat,mfhd,minf,moof,moov,mvex,mvhd,trak,tkhd,mdia,mdhd,hdlr,sdtp,stbl,stsd,styp,traf,trex,trun,types,MAJOR_BRAND,MINOR_VERSION,AVC1_BRAND,VIDEO_HDLR,AUDIO_HDLR,HDLR_TYPES,VMHD,SMHD,DREF,STCO,STSC,STSZ,STTS;!function(){var i;types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};for(i in types)types.hasOwnProperty(i)&&(types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]);MAJOR_BRAND=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),AVC1_BRAND=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),MINOR_VERSION=new Uint8Array([0,0,0,1]),VIDEO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),AUDIO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),HDLR_TYPES={video:VIDEO_HDLR,audio:AUDIO_HDLR},DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),STCO=new Uint8Array([0,0,0,0,0,0,0,0]),STSC=STCO,STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),STTS=STCO,VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}(),box=function(type){var i,result,view,payload=[],size=0;for(i=1;i<arguments.length;i++)payload.push(arguments[i]);for(i=payload.length;i--;)size+=payload[i].byteLength;for(result=new Uint8Array(size+8),view=new DataView(result.buffer,result.byteOffset,result.byteLength),view.setUint32(0,result.byteLength),result.set(type,4),i=0,size=8;i<payload.length;i++)result.set(payload[i],size),size+=payload[i].byteLength;return result},dinf=function(){return box(types.dinf,box(types.dref,DREF))},esds=function(track){return box(types.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,track.audioobjecttype<<3|track.samplingfrequencyindex>>>1,track.samplingfrequencyindex<<7|track.channelcount<<3,6,1,2]));},ftyp=function(){return box(types.ftyp,MAJOR_BRAND,MINOR_VERSION,MAJOR_BRAND,AVC1_BRAND)},hdlr=function(type){return box(types.hdlr,HDLR_TYPES[type])},mdat=function(data){return box(types.mdat,data)},mdhd=function(track){var result=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,track.duration>>>24&255,track.duration>>>16&255,track.duration>>>8&255,255&track.duration,85,196,0,0]);return track.samplerate&&(result[12]=track.samplerate>>>24&255,result[13]=track.samplerate>>>16&255,result[14]=track.samplerate>>>8&255,result[15]=255&track.samplerate),box(types.mdhd,result)},mdia=function(track){return box(types.mdia,mdhd(track),hdlr(track.type),minf(track))},mfhd=function(sequenceNumber){return box(types.mfhd,new Uint8Array([0,0,0,0,(4278190080&sequenceNumber)>>24,(16711680&sequenceNumber)>>16,(65280&sequenceNumber)>>8,255&sequenceNumber]))},minf=function(track){return box(types.minf,"video"===track.type?box(types.vmhd,VMHD):box(types.smhd,SMHD),dinf(),stbl(track))},moof=function(sequenceNumber,tracks){for(var trackFragments=[],i=tracks.length;i--;)trackFragments[i]=traf(tracks[i]);return box.apply(null,[types.moof,mfhd(sequenceNumber)].concat(trackFragments))},moov=function(tracks){for(var i=tracks.length,boxes=[];i--;)boxes[i]=trak(tracks[i]);return box.apply(null,[types.moov,mvhd(4294967295)].concat(boxes).concat(mvex(tracks)))},mvex=function(tracks){for(var i=tracks.length,boxes=[];i--;)boxes[i]=trex(tracks[i]);return box.apply(null,[types.mvex].concat(boxes))},mvhd=function(duration){var bytes=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&duration)>>24,(16711680&duration)>>16,(65280&duration)>>8,255&duration,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return box(types.mvhd,bytes)},sdtp=function(track){var flags,i,samples=track.samples||[],bytes=new Uint8Array(4+samples.length);for(i=0;i<samples.length;i++)flags=samples[i].flags,bytes[i+4]=flags.dependsOn<<4|flags.isDependedOn<<2|flags.hasRedundancy;return box(types.sdtp,bytes)},stbl=function(track){return box(types.stbl,stsd(track),box(types.stts,STTS),box(types.stsc,STSC),box(types.stsz,STSZ),box(types.stco,STCO))},function(){var videoSample,audioSample;stsd=function(track){return box(types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===track.type?videoSample(track):audioSample(track))},videoSample=function(track){var i,sps=track.sps||[],pps=track.pps||[],sequenceParameterSets=[],pictureParameterSets=[];for(i=0;i<sps.length;i++)sequenceParameterSets.push((65280&sps[i].byteLength)>>>8),sequenceParameterSets.push(255&sps[i].byteLength),sequenceParameterSets=sequenceParameterSets.concat(Array.prototype.slice.call(sps[i]));for(i=0;i<pps.length;i++)pictureParameterSets.push((65280&pps[i].byteLength)>>>8),pictureParameterSets.push(255&pps[i].byteLength),pictureParameterSets=pictureParameterSets.concat(Array.prototype.slice.call(pps[i]));return box(types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&track.width)>>8,255&track.width,(65280&track.height)>>8,255&track.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),box(types.avcC,new Uint8Array([1,track.profileIdc,track.profileCompatibility,track.levelIdc,255].concat([sps.length]).concat(sequenceParameterSets).concat([pps.length]).concat(pictureParameterSets))),box(types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},audioSample=function(track){return box(types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&track.channelcount)>>8,255&track.channelcount,(65280&track.samplesize)>>8,255&track.samplesize,0,0,0,0,(65280&track.samplerate)>>8,255&track.samplerate,0,0]),esds(track))}}(),styp=function(){return box(types.styp,MAJOR_BRAND,MINOR_VERSION,MAJOR_BRAND)},tkhd=function(track){var result=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&track.id)>>24,(16711680&track.id)>>16,(65280&track.id)>>8,255&track.id,0,0,0,0,(4278190080&track.duration)>>24,(16711680&track.duration)>>16,(65280&track.duration)>>8,255&track.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&track.width)>>8,255&track.width,0,0,(65280&track.height)>>8,255&track.height,0,0]);return box(types.tkhd,result)},traf=function(track){var trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable,dataOffset;return trackFragmentHeader=box(types.tfhd,new Uint8Array([0,0,0,58,(4278190080&track.id)>>24,(16711680&track.id)>>16,(65280&track.id)>>8,255&track.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),trackFragmentDecodeTime=box(types.tfdt,new Uint8Array([0,0,0,0,track.baseMediaDecodeTime>>>24&255,track.baseMediaDecodeTime>>>16&255,track.baseMediaDecodeTime>>>8&255,255&track.baseMediaDecodeTime])),dataOffset=88,"audio"===track.type?(trackFragmentRun=trun(track,dataOffset),box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun)):(sampleDependencyTable=sdtp(track),trackFragmentRun=trun(track,sampleDependencyTable.length+dataOffset),box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable))},trak=function(track){return track.duration=track.duration||4294967295,box(types.trak,tkhd(track),mdia(track))},trex=function(track){var result=new Uint8Array([0,0,0,0,(4278190080&track.id)>>24,(16711680&track.id)>>16,(65280&track.id)>>8,255&track.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==track.type&&(result[result.length-1]=0),box(types.trex,result)},function(){var audioTrun,videoTrun,trunHeader;trunHeader=function(samples,offset){var durationPresent=0,sizePresent=0,flagsPresent=0,compositionTimeOffset=0;return samples.length&&(void 0!==samples[0].duration&&(durationPresent=1),void 0!==samples[0].size&&(sizePresent=2),void 0!==samples[0].flags&&(flagsPresent=4),void 0!==samples[0].compositionTimeOffset&&(compositionTimeOffset=8)),[0,0,durationPresent|sizePresent|flagsPresent|compositionTimeOffset,1,(4278190080&samples.length)>>>24,(16711680&samples.length)>>>16,(65280&samples.length)>>>8,255&samples.length,(4278190080&offset)>>>24,(16711680&offset)>>>16,(65280&offset)>>>8,255&offset]},videoTrun=function(track,offset){var bytes,samples,sample,i;for(samples=track.samples||[],offset+=20+16*samples.length,bytes=trunHeader(samples,offset),i=0;i<samples.length;i++)sample=samples[i],bytes=bytes.concat([(4278190080&sample.duration)>>>24,(16711680&sample.duration)>>>16,(65280&sample.duration)>>>8,255&sample.duration,(4278190080&sample.size)>>>24,(16711680&sample.size)>>>16,(65280&sample.size)>>>8,255&sample.size,sample.flags.isLeading<<2|sample.flags.dependsOn,sample.flags.isDependedOn<<6|sample.flags.hasRedundancy<<4|sample.flags.paddingValue<<1|sample.flags.isNonSyncSample,61440&sample.flags.degradationPriority,15&sample.flags.degradationPriority,(4278190080&sample.compositionTimeOffset)>>>24,(16711680&sample.compositionTimeOffset)>>>16,(65280&sample.compositionTimeOffset)>>>8,255&sample.compositionTimeOffset]);return box(types.trun,new Uint8Array(bytes))},audioTrun=function(track,offset){var bytes,samples,sample,i;for(samples=track.samples||[],offset+=20+8*samples.length,bytes=trunHeader(samples,offset),i=0;i<samples.length;i++)sample=samples[i],bytes=bytes.concat([(4278190080&sample.duration)>>>24,(16711680&sample.duration)>>>16,(65280&sample.duration)>>>8,255&sample.duration,(4278190080&sample.size)>>>24,(16711680&sample.size)>>>16,(65280&sample.size)>>>8,255&sample.size]);return box(types.trun,new Uint8Array(bytes))},trun=function(track,offset){return"audio"===track.type?audioTrun(track,offset):videoTrun(track,offset)}}(),module.exports={ftyp:ftyp,mdat:mdat,moof:moof,moov:moov,initSegment:function(tracks){var result,fileType=ftyp(),movie=moov(tracks);return result=new Uint8Array(fileType.byteLength+movie.byteLength),result.set(fileType),result.set(movie,fileType.byteLength),result}}},{}],45:[function(require,module,exports){"use strict";var VideoSegmentStream,AudioSegmentStream,Transmuxer,CoalesceStream,createDefaultSample,collectDtsInfo,clearDtsInfo,calculateTrackBaseMediaDecodeTime,arrayEquals,sumFrameByteLengths,Stream=require("../utils/stream.js"),mp4=require("./mp4-generator.js"),m2ts=require("../m2ts/m2ts.js"),AdtsStream=require("../codecs/adts.js"),H264Stream=require("../codecs/h264").H264Stream,AacStream=require("../aac");createDefaultSample=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}},arrayEquals=function(a,b){var i;if(a.length!==b.length)return!1;for(i=0;i<a.length;i++)if(a[i]!==b[i])return!1;return!0},sumFrameByteLengths=function(array){var i,currentObj,sum=0;for(i=0;i<array.length;i++)currentObj=array[i],sum+=currentObj.data.byteLength;return sum},AudioSegmentStream=function(track){var adtsFrames=[],sequenceNumber=0,earliestAllowedDts=0;AudioSegmentStream.prototype.init.call(this),this.push=function(data){collectDtsInfo(track,data),track&&(track.audioobjecttype=data.audioobjecttype,track.channelcount=data.channelcount,track.samplerate=data.samplerate,track.samplingfrequencyindex=data.samplingfrequencyindex,track.samplesize=data.samplesize),adtsFrames.push(data)},this.setEarliestDts=function(earliestDts){earliestAllowedDts=earliestDts-track.timelineStartInfo.baseMediaDecodeTime},this.flush=function(){var frames,moof,mdat,boxes;return 0===adtsFrames.length?void this.trigger("done"):(frames=this.trimAdtsFramesByEarliestDts_(adtsFrames),track.samples=this.generateSampleTable_(frames),mdat=mp4.mdat(this.concatenateFrameData_(frames)),adtsFrames=[],calculateTrackBaseMediaDecodeTime(track),moof=mp4.moof(sequenceNumber,[track]),boxes=new Uint8Array(moof.byteLength+mdat.byteLength),sequenceNumber++,boxes.set(moof),boxes.set(mdat,moof.byteLength),clearDtsInfo(track),this.trigger("data",{track:track,boxes:boxes}),void this.trigger("done"))},this.trimAdtsFramesByEarliestDts_=function(adtsFrames){return track.minSegmentDts>=earliestAllowedDts?adtsFrames:(track.minSegmentDts=1/0,adtsFrames.filter(function(currentFrame){return currentFrame.dts>=earliestAllowedDts&&(track.minSegmentDts=Math.min(track.minSegmentDts,currentFrame.dts),track.minSegmentPts=track.minSegmentDts,!0)}))},this.generateSampleTable_=function(frames){var i,currentFrame,samples=[];for(i=0;i<frames.length;i++)currentFrame=frames[i],samples.push({size:currentFrame.data.byteLength,duration:1024});return samples},this.concatenateFrameData_=function(frames){var i,currentFrame,dataOffset=0,data=new Uint8Array(sumFrameByteLengths(frames));for(i=0;i<frames.length;i++)currentFrame=frames[i],data.set(currentFrame.data,dataOffset),dataOffset+=currentFrame.data.byteLength;return data}},AudioSegmentStream.prototype=new Stream,VideoSegmentStream=function(track){var config,pps,sequenceNumber=0,nalUnits=[];VideoSegmentStream.prototype.init.call(this),delete track.minPTS,this.gopCache_=[],this.push=function(nalUnit){collectDtsInfo(track,nalUnit),"seq_parameter_set_rbsp"!==nalUnit.nalUnitType||config||(config=nalUnit.config,track.width=config.width,track.height=config.height,track.sps=[nalUnit.data],track.profileIdc=config.profileIdc,track.levelIdc=config.levelIdc,track.profileCompatibility=config.profileCompatibility),"pic_parameter_set_rbsp"!==nalUnit.nalUnitType||pps||(pps=nalUnit.data,track.pps=[nalUnit.data]),nalUnits.push(nalUnit)},this.flush=function(){for(var frames,gopForFusion,gops,moof,mdat,boxes;nalUnits.length&&"access_unit_delimiter_rbsp"!==nalUnits[0].nalUnitType;)nalUnits.shift();return 0===nalUnits.length?(this.resetStream_(),void this.trigger("done")):(frames=this.groupNalsIntoFrames_(nalUnits),gops=this.groupFramesIntoGops_(frames),gops[0][0].keyFrame||(gopForFusion=this.getGopForFusion_(nalUnits[0],track),gopForFusion?(gops.unshift(gopForFusion),gops.byteLength+=gopForFusion.byteLength,gops.nalCount+=gopForFusion.nalCount,gops.pts=gopForFusion.pts,gops.dts=gopForFusion.dts,gops.duration+=gopForFusion.duration):gops=this.extendFirstKeyFrame_(gops)),collectDtsInfo(track,gops),track.samples=this.generateSampleTable_(gops),mdat=mp4.mdat(this.concatenateNalData_(gops)),this.gopCache_.unshift({gop:gops.pop(),pps:track.pps,sps:track.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),nalUnits=[],calculateTrackBaseMediaDecodeTime(track),this.trigger("timelineStartInfo",track.timelineStartInfo),moof=mp4.moof(sequenceNumber,[track]),boxes=new Uint8Array(moof.byteLength+mdat.byteLength),sequenceNumber++,boxes.set(moof),boxes.set(mdat,moof.byteLength),this.trigger("data",{track:track,boxes:boxes}),this.resetStream_(),void this.trigger("done"))},this.resetStream_=function(){clearDtsInfo(track),config=void 0,pps=void 0},this.getGopForFusion_=function(nalUnit){var dtsDistance,nearestGopObj,currentGop,currentGopObj,i,halfSecond=45e3,allowableOverlap=1e4,nearestDistance=1/0;for(i=0;i<this.gopCache_.length;i++)currentGopObj=this.gopCache_[i],currentGop=currentGopObj.gop,track.pps&&arrayEquals(track.pps[0],currentGopObj.pps[0])&&track.sps&&arrayEquals(track.sps[0],currentGopObj.sps[0])&&(currentGop.dts<track.timelineStartInfo.dts||(dtsDistance=nalUnit.dts-currentGop.dts-currentGop.duration,dtsDistance>=-allowableOverlap&&dtsDistance<=halfSecond&&(!nearestGopObj||nearestDistance>dtsDistance)&&(nearestGopObj=currentGopObj,nearestDistance=dtsDistance)));return nearestGopObj?nearestGopObj.gop:null},this.extendFirstKeyFrame_=function(gops){var currentGop;return gops[0][0].keyFrame||(currentGop=gops.shift(),gops.byteLength-=currentGop.byteLength,gops.nalCount-=currentGop.nalCount,gops[0][0].dts=currentGop.dts,gops[0][0].pts=currentGop.pts,gops[0][0].duration+=currentGop.duration),gops},this.groupNalsIntoFrames_=function(nalUnits){var i,currentNal,currentFrame=[],frames=[];for(currentFrame.byteLength=0,i=0;i<nalUnits.length;i++)currentNal=nalUnits[i],"access_unit_delimiter_rbsp"===currentNal.nalUnitType?(currentFrame.length&&(currentFrame.duration=currentNal.dts-currentFrame.dts,frames.push(currentFrame)),currentFrame=[currentNal],currentFrame.byteLength=currentNal.data.byteLength,currentFrame.pts=currentNal.pts,currentFrame.dts=currentNal.dts):("slice_layer_without_partitioning_rbsp_idr"===currentNal.nalUnitType&&(currentFrame.keyFrame=!0),currentFrame.duration=currentNal.dts-currentFrame.dts,currentFrame.byteLength+=currentNal.data.byteLength,currentFrame.push(currentNal));return(frames.length&&!currentFrame.duration||currentFrame.duration<=0)&&(currentFrame.duration=frames[frames.length-1].duration),frames.push(currentFrame),frames},this.groupFramesIntoGops_=function(frames){var i,currentFrame,currentGop=[],gops=[];for(currentGop.byteLength=0,currentGop.nalCount=0,currentGop.duration=0,currentGop.pts=frames[0].pts,currentGop.dts=frames[0].dts,gops.byteLength=0,gops.nalCount=0,gops.duration=0,gops.pts=frames[0].pts,gops.dts=frames[0].dts,i=0;i<frames.length;i++)currentFrame=frames[i],currentFrame.keyFrame?(currentGop.length&&(gops.push(currentGop),gops.byteLength+=currentGop.byteLength,gops.nalCount+=currentGop.nalCount,gops.duration+=currentGop.duration),currentGop=[currentFrame],currentGop.nalCount=currentFrame.length,currentGop.byteLength=currentFrame.byteLength,currentGop.pts=currentFrame.pts,currentGop.dts=currentFrame.dts,currentGop.duration=currentFrame.duration):(currentGop.duration+=currentFrame.duration,currentGop.nalCount+=currentFrame.length,currentGop.byteLength+=currentFrame.byteLength,currentGop.push(currentFrame));return gops.length&&currentGop.duration<=0&&(currentGop.duration=gops[gops.length-1].duration),gops.byteLength+=currentGop.byteLength,gops.nalCount+=currentGop.nalCount,gops.duration+=currentGop.duration,gops.push(currentGop),gops},this.generateSampleTable_=function(gops,baseDataOffset){var h,i,sample,currentGop,currentFrame,dataOffset=baseDataOffset||0,samples=[];for(h=0;h<gops.length;h++)for(currentGop=gops[h],i=0;i<currentGop.length;i++)currentFrame=currentGop[i],sample=createDefaultSample(),sample.dataOffset=dataOffset,sample.compositionTimeOffset=currentFrame.pts-currentFrame.dts,sample.duration=currentFrame.duration,sample.size=4*currentFrame.length,sample.size+=currentFrame.byteLength,currentFrame.keyFrame&&(sample.flags.dependsOn=2),dataOffset+=sample.size,samples.push(sample);return samples},this.concatenateNalData_=function(gops){var h,i,j,currentGop,currentFrame,currentNal,dataOffset=0,nalsByteLength=gops.byteLength,numberOfNals=gops.nalCount,totalByteLength=nalsByteLength+4*numberOfNals,data=new Uint8Array(totalByteLength),view=new DataView(data.buffer);for(h=0;h<gops.length;h++)for(currentGop=gops[h],i=0;i<currentGop.length;i++)for(currentFrame=currentGop[i],j=0;j<currentFrame.length;j++)currentNal=currentFrame[j],view.setUint32(dataOffset,currentNal.data.byteLength),dataOffset+=4,data.set(currentNal.data,dataOffset),dataOffset+=currentNal.data.byteLength;return data}},VideoSegmentStream.prototype=new Stream,collectDtsInfo=function(track,data){"number"==typeof data.pts&&(void 0===track.timelineStartInfo.pts&&(track.timelineStartInfo.pts=data.pts),void 0===track.minSegmentPts?track.minSegmentPts=data.pts:track.minSegmentPts=Math.min(track.minSegmentPts,data.pts),void 0===track.maxSegmentPts?track.maxSegmentPts=data.pts:track.maxSegmentPts=Math.max(track.maxSegmentPts,data.pts)),"number"==typeof data.dts&&(void 0===track.timelineStartInfo.dts&&(track.timelineStartInfo.dts=data.dts),void 0===track.minSegmentDts?track.minSegmentDts=data.dts:track.minSegmentDts=Math.min(track.minSegmentDts,data.dts),void 0===track.maxSegmentDts?track.maxSegmentDts=data.dts:track.maxSegmentDts=Math.max(track.maxSegmentDts,data.dts))},clearDtsInfo=function(track){delete track.minSegmentDts,delete track.maxSegmentDts,delete track.minSegmentPts,delete track.maxSegmentPts},calculateTrackBaseMediaDecodeTime=function(track){var scale,oneSecondInPTS=9e4,timeSinceStartOfTimeline=track.minSegmentDts-track.timelineStartInfo.dts,firstSampleCompositionOffset=track.minSegmentPts-track.minSegmentDts;track.baseMediaDecodeTime=track.timelineStartInfo.baseMediaDecodeTime,track.baseMediaDecodeTime+=timeSinceStartOfTimeline,track.baseMediaDecodeTime-=firstSampleCompositionOffset,track.baseMediaDecodeTime=Math.max(0,track.baseMediaDecodeTime),"audio"===track.type&&(scale=track.samplerate/oneSecondInPTS,track.baseMediaDecodeTime*=scale,track.baseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime))},CoalesceStream=function(options){this.numberOfTracks=0,this.metadataStream=options.metadataStream,"undefined"!=typeof options.remux?this.remuxTracks=!!options.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,CoalesceStream.prototype.init.call(this),this.push=function(output){return output.text?this.pendingCaptions.push(output):output.frames?this.pendingMetadata.push(output):(this.pendingTracks.push(output.track),this.pendingBoxes.push(output.boxes),this.pendingBytes+=output.boxes.byteLength,"video"===output.track.type&&(this.videoTrack=output.track),void("audio"===output.track.type&&(this.audioTrack=output.track)))}},CoalesceStream.prototype=new Stream,CoalesceStream.prototype.flush=function(){var caption,id3,initSegment,i,offset=0,event={captions:[],metadata:[]},timelineStartPts=0;if(!(0===this.pendingTracks.length||this.remuxTracks&&this.pendingTracks.length<this.numberOfTracks)){for(this.videoTrack?timelineStartPts=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(timelineStartPts=this.audioTrack.timelineStartInfo.pts),1===this.pendingTracks.length?event.type=this.pendingTracks[0].type:event.type="combined",this.emittedTracks+=this.pendingTracks.length,initSegment=mp4.initSegment(this.pendingTracks),event.data=new Uint8Array(initSegment.byteLength+this.pendingBytes),event.data.set(initSegment),offset+=initSegment.byteLength,i=0;i<this.pendingBoxes.length;i++)event.data.set(this.pendingBoxes[i],offset),offset+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)caption=this.pendingCaptions[i],caption.startTime=caption.startPts-timelineStartPts,caption.startTime/=9e4,caption.endTime=caption.endPts-timelineStartPts,caption.endTime/=9e4,event.captions.push(caption);for(i=0;i<this.pendingMetadata.length;i++)id3=this.pendingMetadata[i],id3.cueTime=id3.pts-timelineStartPts,id3.cueTime/=9e4,event.metadata.push(id3);event.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",event),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)}},Transmuxer=function(options){var videoTrack,audioTrack,packetStream,parseStream,elementaryStream,adtsStream,h264Stream,aacStream,videoSegmentStream,audioSegmentStream,captionStream,coalesceStream,headOfPipeline,self=this;this.setupAacPipeline=function(){this.metadataStream=new m2ts.MetadataStream,options.metadataStream=this.metadataStream,aacStream=new AacStream,adtsStream=new AdtsStream,coalesceStream=new CoalesceStream(options),headOfPipeline=aacStream,aacStream.pipe(adtsStream),aacStream.pipe(this.metadataStream),this.metadataStream.pipe(coalesceStream),this.metadataStream.on("timestamp",function(frame){aacStream.setTimestamp(frame.timeStamp)}),this.addAacListener()},this.addAacListener=function(){aacStream.on("data",function(data){if("timed-metadata"===data.type){var track={timelineStartInfo:{baseMediaDecodeTime:0},codec:"adts",type:"audio"};track&&!audioSegmentStream&&(coalesceStream.numberOfTracks++,audioSegmentStream=new AudioSegmentStream(track),adtsStream.pipe(audioSegmentStream).pipe(coalesceStream))}})},this.setupTsPipeline=function(){this.metadataStream=new m2ts.MetadataStream,options.metadataStream=this.metadataStream,packetStream=new m2ts.TransportPacketStream,parseStream=new m2ts.TransportParseStream,elementaryStream=new m2ts.ElementaryStream,adtsStream=new AdtsStream,h264Stream=new H264Stream,captionStream=new m2ts.CaptionStream,coalesceStream=new CoalesceStream(options),headOfPipeline=packetStream,packetStream.pipe(parseStream).pipe(elementaryStream),elementaryStream.pipe(h264Stream),elementaryStream.pipe(adtsStream),elementaryStream.pipe(this.metadataStream).pipe(coalesceStream),h264Stream.pipe(captionStream).pipe(coalesceStream),this.addTsListener()},this.addTsListener=function(){elementaryStream.on("data",function(data){var i;if("metadata"===data.type){for(i=data.tracks.length;i--;)videoTrack||"video"!==data.tracks[i].type?audioTrack||"audio"!==data.tracks[i].type||(audioTrack=data.tracks[i],audioTrack.timelineStartInfo.baseMediaDecodeTime=self.baseMediaDecodeTime):(videoTrack=data.tracks[i],videoTrack.timelineStartInfo.baseMediaDecodeTime=self.baseMediaDecodeTime);videoTrack&&!videoSegmentStream&&(coalesceStream.numberOfTracks++,videoSegmentStream=new VideoSegmentStream(videoTrack),videoSegmentStream.on("timelineStartInfo",function(timelineStartInfo){audioTrack&&(audioTrack.timelineStartInfo=timelineStartInfo,audioSegmentStream.setEarliestDts(timelineStartInfo.dts))}),h264Stream.pipe(videoSegmentStream).pipe(coalesceStream)),audioTrack&&!audioSegmentStream&&(coalesceStream.numberOfTracks++,audioSegmentStream=new AudioSegmentStream(audioTrack),adtsStream.pipe(audioSegmentStream).pipe(coalesceStream))}})},Transmuxer.prototype.init.call(this),options=options||{},this.baseMediaDecodeTime=options.baseMediaDecodeTime||0,void 0===options.aacfile?this.setupTsPipeline():this.setupAacPipeline(),this.setBaseMediaDecodeTime=function(baseMediaDecodeTime){this.baseMediaDecodeTime=baseMediaDecodeTime,audioTrack&&(audioTrack.timelineStartInfo.dts=void 0,audioTrack.timelineStartInfo.pts=void 0,clearDtsInfo(audioTrack),audioTrack.timelineStartInfo.baseMediaDecodeTime=baseMediaDecodeTime),videoTrack&&(videoSegmentStream.gopCache_=[],videoTrack.timelineStartInfo.dts=void 0,videoTrack.timelineStartInfo.pts=void 0,clearDtsInfo(videoTrack),videoTrack.timelineStartInfo.baseMediaDecodeTime=baseMediaDecodeTime)},this.push=function(data){headOfPipeline.push(data)},this.flush=function(){headOfPipeline.flush()},coalesceStream.on("data",function(data){self.trigger("data",data)}),coalesceStream.on("done",function(){self.trigger("done")})},Transmuxer.prototype=new Stream,module.exports={Transmuxer:Transmuxer,VideoSegmentStream:VideoSegmentStream,AudioSegmentStream:AudioSegmentStream}},{"../aac":30,"../codecs/adts.js":31,"../codecs/h264":32,"../m2ts/m2ts.js":40,"../utils/stream.js":49,"./mp4-generator.js":44}],46:[function(require,module,exports){"use strict";var tagTypes={8:"audio",9:"video",18:"metadata"},hex=function(val){return"0x"+("00"+val.toString(16)).slice(-2).toUpperCase()},hexStringList=function(data){for(var i,arr=[];data.byteLength>0;){switch(i=0,data.byteLength){default:arr.push(hex(data[i++]));case 7:arr.push(hex(data[i++]));case 6:arr.push(hex(data[i++]));case 5:arr.push(hex(data[i++]));case 4:arr.push(hex(data[i++]));case 3:arr.push(hex(data[i++]));case 2:arr.push(hex(data[i++]));case 1:arr.push(hex(data[i++]))}data=data.subarray(i)}return arr.join(" ")},parseAVCTag=function(tag,obj){var avcPacketTypes=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"],compositionTime=tag[1]&parseInt("01111111",2)<<16|tag[2]<<8|tag[3];return obj=obj||{},obj.avcPacketType=avcPacketTypes[tag[0]],obj.CompositionTime=tag[1]&parseInt("10000000",2)?-compositionTime:compositionTime,1===tag[0]?obj.nalUnitTypeRaw=hexStringList(tag.subarray(4,100)):obj.data=hexStringList(tag.subarray(4)),obj},parseVideoTag=function(tag,obj){var frameTypes=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"],codecID=tag[0]&parseInt("00001111",2);return obj=obj||{},obj.frameType=frameTypes[(tag[0]&parseInt("11110000",2))>>>4],obj.codecID=codecID,7===codecID?parseAVCTag(tag.subarray(1),obj):obj},parseAACTag=function(tag,obj){var packetTypes=["AAC Sequence Header","AAC Raw"];return obj=obj||{},obj.aacPacketType=packetTypes[tag[0]],obj.data=hexStringList(tag.subarray(1)),obj},parseAudioTag=function(tag,obj){var formatTable=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"],samplingRateTable=["5.5-kHz","11-kHz","22-kHz","44-kHz"],soundFormat=(tag[0]&parseInt("11110000",2))>>>4;return obj=obj||{},obj.soundFormat=formatTable[soundFormat],obj.soundRate=samplingRateTable[(tag[0]&parseInt("00001100",2))>>>2],obj.soundSize=(tag[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",obj.soundType=tag[0]&parseInt("00000001",2)?"Stereo":"Mono",10===soundFormat?parseAACTag(tag.subarray(1),obj):obj},parseGenericTag=function(tag){return{tagType:tagTypes[tag[0]],dataSize:tag[1]<<16|tag[2]<<8|tag[3],timestamp:tag[7]<<24|tag[4]<<16|tag[5]<<8|tag[6],streamID:tag[8]<<16|tag[9]<<8|tag[10]}},inspectFlvTag=function(tag){var header=parseGenericTag(tag);switch(tag[0]){case 8:parseAudioTag(tag.subarray(11),header);break;case 9:parseVideoTag(tag.subarray(11),header);break;case 18:}return header},inspectFlv=function(bytes){var dataSize,tag,i=9,parsedResults=[];for(i+=4;i<bytes.byteLength;)dataSize=bytes[i+1]<<16,dataSize|=bytes[i+2]<<8,dataSize|=bytes[i+3],dataSize+=11,tag=bytes.subarray(i,i+dataSize),parsedResults.push(inspectFlvTag(tag)),i+=dataSize+4;return parsedResults},textifyFlv=function(flvTagArray){return JSON.stringify(flvTagArray,null,2)};module.exports={inspectTag:inspectFlvTag,inspect:inspectFlv,textify:textifyFlv}},{}],47:[function(require,module,exports){(function(global){"use strict";var inspectMp4,textifyMp4,parseType=function(buffer){var result="";return result+=String.fromCharCode(buffer[0]),result+=String.fromCharCode(buffer[1]),result+=String.fromCharCode(buffer[2]),result+=String.fromCharCode(buffer[3])},parseMp4Date=function(seconds){return new Date(1e3*seconds-20828448e5)},parseSampleFlags=function(flags){return{isLeading:(12&flags[0])>>>2,dependsOn:3&flags[0],isDependedOn:(192&flags[1])>>>6,hasRedundancy:(48&flags[1])>>>4,paddingValue:(14&flags[1])>>>1,isNonSyncSample:1&flags[1],degradationPriority:flags[2]<<8|flags[3]}},nalParse=function(avcStream){var i,length,avcView=new DataView(avcStream.buffer,avcStream.byteOffset,avcStream.byteLength),result=[];for(i=0;i+4<avcStream.length;i+=length){if(length=avcView.getUint32(i),i+=4,length<=0)return;switch(31&avcStream[i]){case 1:result.push("slice_layer_without_partitioning_rbsp");break;case 5:result.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:result.push("sei_rbsp");break;case 7:result.push("seq_parameter_set_rbsp");break;case 8:result.push("pic_parameter_set_rbsp");break;case 9:result.push("access_unit_delimiter_rbsp");break;default:result.push(31&avcStream[i])}}return result},parse={avc1:function(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{dataReferenceIndex:view.getUint16(6),width:view.getUint16(24),height:view.getUint16(26),horizresolution:view.getUint16(28)+view.getUint16(30)/16,vertresolution:view.getUint16(32)+view.getUint16(34)/16,frameCount:view.getUint16(40),depth:view.getUint16(74),config:inspectMp4(data.subarray(78,data.byteLength))}},avcC:function(data){var numOfPictureParameterSets,nalSize,offset,i,view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={configurationVersion:data[0],avcProfileIndication:data[1],profileCompatibility:data[2],avcLevelIndication:data[3],lengthSizeMinusOne:3&data[4],sps:[],pps:[]},numOfSequenceParameterSets=31&data[5];for(offset=6,i=0;i<numOfSequenceParameterSets;i++)nalSize=view.getUint16(offset),offset+=2,result.sps.push(new Uint8Array(data.subarray(offset,offset+nalSize))),offset+=nalSize;for(numOfPictureParameterSets=data[offset],offset++,i=0;i<numOfPictureParameterSets;i++)nalSize=view.getUint16(offset),offset+=2,result.pps.push(new Uint8Array(data.subarray(offset,offset+nalSize))),offset+=nalSize;return result},btrt:function(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{bufferSizeDB:view.getUint32(0),maxBitrate:view.getUint32(4),avgBitrate:view.getUint32(8)}},esds:function(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),esId:data[6]<<8|data[7],streamPriority:31&data[8],decoderConfig:{objectProfileIndication:data[11],streamType:data[12]>>>2&63,bufferSize:data[13]<<16|data[14]<<8|data[15],maxBitrate:data[16]<<24|data[17]<<16|data[18]<<8|data[19],avgBitrate:data[20]<<24|data[21]<<16|data[22]<<8|data[23],decoderConfigDescriptor:{tag:data[24],length:data[25],audioObjectType:data[26]>>>3&31,samplingFrequencyIndex:(7&data[26])<<1|data[27]>>>7&1,channelConfiguration:data[27]>>>3&15}}}},ftyp:function(data){for(var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={majorBrand:parseType(data.subarray(0,4)),minorVersion:view.getUint32(4),compatibleBrands:[]},i=8;i<data.byteLength;)result.compatibleBrands.push(parseType(data.subarray(i,i+4))),i+=4;return result},dinf:function(data){return{boxes:inspectMp4(data)}},dref:function(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),dataReferences:inspectMp4(data.subarray(8))}},hdlr:function(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4)),handlerType:parseType(data.subarray(8,12)),name:""},i=8;for(i=24;i<data.byteLength;i++){if(0===data[i]){i++;break}result.name+=String.fromCharCode(data[i])}return result.name=decodeURIComponent(global.escape(result.name)),result},mdat:function(data){return{byteLength:data.byteLength,nals:nalParse(data)}},mdhd:function(data){var language,view=new DataView(data.buffer,data.byteOffset,data.byteLength),i=4,result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4)),language:""};return 1===result.version?(i+=4,result.creationTime=parseMp4Date(view.getUint32(i)),i+=8,result.modificationTime=parseMp4Date(view.getUint32(i)),i+=4,result.timescale=view.getUint32(i),i+=8,result.duration=view.getUint32(i)):(result.creationTime=parseMp4Date(view.getUint32(i)),i+=4,result.modificationTime=parseMp4Date(view.getUint32(i)),i+=4,result.timescale=view.getUint32(i),i+=4,result.duration=view.getUint32(i)),i+=4,language=view.getUint16(i),result.language+=String.fromCharCode((language>>10)+96),result.language+=String.fromCharCode(((960&language)>>5)+96),result.language+=String.fromCharCode((31&language)+96),result},mdia:function(data){return{boxes:inspectMp4(data)}},mfhd:function(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),sequenceNumber:data[4]<<24|data[5]<<16|data[6]<<8|data[7]}},minf:function(data){return{boxes:inspectMp4(data)}},mp4a:function(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={dataReferenceIndex:view.getUint16(6),channelcount:view.getUint16(16),samplesize:view.getUint16(18),samplerate:view.getUint16(24)+view.getUint16(26)/65536};return data.byteLength>28&&(result.streamDescriptor=inspectMp4(data.subarray(28))[0]),result},moof:function(data){return{boxes:inspectMp4(data)}},moov:function(data){return{boxes:inspectMp4(data)}},mvex:function(data){return{boxes:inspectMp4(data)}},mvhd:function(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),i=4,result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4))};return 1===result.version?(i+=4,result.creationTime=parseMp4Date(view.getUint32(i)),i+=8,result.modificationTime=parseMp4Date(view.getUint32(i)),i+=4,result.timescale=view.getUint32(i),i+=8,result.duration=view.getUint32(i)):(result.creationTime=parseMp4Date(view.getUint32(i)),i+=4,result.modificationTime=parseMp4Date(view.getUint32(i)),i+=4,result.timescale=view.getUint32(i),i+=4,result.duration=view.getUint32(i)),i+=4,result.rate=view.getUint16(i)+view.getUint16(i+2)/16,i+=4,result.volume=view.getUint8(i)+view.getUint8(i+1)/8,i+=2,i+=2,i+=8,result.matrix=new Uint32Array(data.subarray(i,i+36)),i+=36,i+=24,result.nextTrackId=view.getUint32(i),result},pdin:function(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4)),rate:view.getUint32(4),initialDelay:view.getUint32(8)}},sdtp:function(data){var i,result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),samples:[]};for(i=4;i<data.byteLength;i++)result.samples.push({dependsOn:(48&data[i])>>4,isDependedOn:(12&data[i])>>2,hasRedundancy:3&data[i]});return result},sidx:function(data){var i,view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),references:[],referenceId:view.getUint32(4),timescale:view.getUint32(8),earliestPresentationTime:view.getUint32(12),firstOffset:view.getUint32(16)},referenceCount=view.getUint16(22);for(i=24;referenceCount;i+=12,referenceCount--)result.references.push({referenceType:(128&data[i])>>>7,referencedSize:2147483647&view.getUint32(i),subsegmentDuration:view.getUint32(i+4),startsWithSap:!!(128&data[i+8]),sapType:(112&data[i+8])>>>4,sapDeltaTime:268435455&view.getUint32(i+8)});return result},smhd:function(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),balance:data[4]+data[5]/256}},stbl:function(data){return{boxes:inspectMp4(data)}},stco:function(data){var i,view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),chunkOffsets:[]},entryCount=view.getUint32(4);for(i=8;entryCount;i+=4,entryCount--)result.chunkOffsets.push(view.getUint32(i));return result},stsc:function(data){var i,view=new DataView(data.buffer,data.byteOffset,data.byteLength),entryCount=view.getUint32(4),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),sampleToChunks:[]};for(i=8;entryCount;i+=12,entryCount--)result.sampleToChunks.push({firstChunk:view.getUint32(i),samplesPerChunk:view.getUint32(i+4),sampleDescriptionIndex:view.getUint32(i+8)});return result},stsd:function(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),sampleDescriptions:inspectMp4(data.subarray(8))}},stsz:function(data){var i,view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),sampleSize:view.getUint32(4),entries:[]};for(i=12;i<data.byteLength;i+=4)result.entries.push(view.getUint32(i));return result},stts:function(data){var i,view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),timeToSamples:[]},entryCount=view.getUint32(4);for(i=8;entryCount;i+=8,entryCount--)result.timeToSamples.push({sampleCount:view.getUint32(i),sampleDelta:view.getUint32(i+4)});return result},styp:function(data){return parse.ftyp(data)},tfdt:function(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),baseMediaDecodeTime:data[4]<<24|data[5]<<16|data[6]<<8|data[7]}},tfhd:function(data){var i,view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),trackId:view.getUint32(4)},baseDataOffsetPresent=1&result.flags[2],sampleDescriptionIndexPresent=2&result.flags[2],defaultSampleDurationPresent=8&result.flags[2],defaultSampleSizePresent=16&result.flags[2],defaultSampleFlagsPresent=32&result.flags[2];return i=8,baseDataOffsetPresent&&(i+=4,result.baseDataOffset=view.getUint32(12),i+=4),sampleDescriptionIndexPresent&&(result.sampleDescriptionIndex=view.getUint32(i),i+=4),defaultSampleDurationPresent&&(result.defaultSampleDuration=view.getUint32(i),i+=4),defaultSampleSizePresent&&(result.defaultSampleSize=view.getUint32(i),i+=4),defaultSampleFlagsPresent&&(result.defaultSampleFlags=view.getUint32(i)),result},tkhd:function(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),i=4,result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4))};return 1===result.version?(i+=4,result.creationTime=parseMp4Date(view.getUint32(i)),i+=8,result.modificationTime=parseMp4Date(view.getUint32(i)),i+=4,result.trackId=view.getUint32(i),i+=4,i+=8,result.duration=view.getUint32(i)):(result.creationTime=parseMp4Date(view.getUint32(i)),i+=4,result.modificationTime=parseMp4Date(view.getUint32(i)),i+=4,result.trackId=view.getUint32(i),i+=4,i+=4,result.duration=view.getUint32(i)),i+=4,i+=8,result.layer=view.getUint16(i),i+=2,result.alternateGroup=view.getUint16(i),i+=2,result.volume=view.getUint8(i)+view.getUint8(i+1)/8,i+=2,i+=2,result.matrix=new Uint32Array(data.subarray(i,i+36)),i+=36,result.width=view.getUint16(i)+view.getUint16(i+2)/16,i+=4,result.height=view.getUint16(i)+view.getUint16(i+2)/16,result},traf:function(data){return{boxes:inspectMp4(data)}},trak:function(data){return{boxes:inspectMp4(data)}},trex:function(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),trackId:view.getUint32(4),defaultSampleDescriptionIndex:view.getUint32(8),defaultSampleDuration:view.getUint32(12),defaultSampleSize:view.getUint32(16),sampleDependsOn:3&data[20],sampleIsDependedOn:(192&data[21])>>6,sampleHasRedundancy:(48&data[21])>>4,samplePaddingValue:(14&data[21])>>1,sampleIsDifferenceSample:!!(1&data[21]),sampleDegradationPriority:view.getUint16(22)}},trun:function(data){var sample,result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),samples:[]},view=new DataView(data.buffer,data.byteOffset,data.byteLength),dataOffsetPresent=1&result.flags[2],firstSampleFlagsPresent=4&result.flags[2],sampleDurationPresent=1&result.flags[1],sampleSizePresent=2&result.flags[1],sampleFlagsPresent=4&result.flags[1],sampleCompositionTimeOffsetPresent=8&result.flags[1],sampleCount=view.getUint32(4),offset=8;for(dataOffsetPresent&&(result.dataOffset=view.getUint32(offset),offset+=4),firstSampleFlagsPresent&&sampleCount&&(sample={flags:parseSampleFlags(data.subarray(offset,offset+4))},offset+=4,sampleDurationPresent&&(sample.duration=view.getUint32(offset),offset+=4),sampleSizePresent&&(sample.size=view.getUint32(offset),offset+=4),sampleCompositionTimeOffsetPresent&&(sample.compositionTimeOffset=view.getUint32(offset),offset+=4),result.samples.push(sample),sampleCount--);sampleCount--;)sample={},sampleDurationPresent&&(sample.duration=view.getUint32(offset),offset+=4),sampleSizePresent&&(sample.size=view.getUint32(offset),offset+=4),sampleFlagsPresent&&(sample.flags=parseSampleFlags(data.subarray(offset,offset+4)),offset+=4),sampleCompositionTimeOffsetPresent&&(sample.compositionTimeOffset=view.getUint32(offset),offset+=4),result.samples.push(sample);return result},"url ":function(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4))}},vmhd:function(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),graphicsmode:view.getUint16(4),opcolor:new Uint16Array([view.getUint16(6),view.getUint16(8),view.getUint16(10)])}}};inspectMp4=function(data){for(var view,size,type,end,box,i=0,result=[],ab=new ArrayBuffer(data.length),v=new Uint8Array(ab),z=0;z<data.length;++z)v[z]=data[z];for(view=new DataView(ab);i<data.byteLength;)size=view.getUint32(i),type=parseType(data.subarray(i+4,i+8)),end=size>1?i+size:data.byteLength,box=(parse[type]||function(data){return{data:data}})(data.subarray(i+8,end)),box.size=size,box.type=type,result.push(box),i=end;return result},textifyMp4=function(inspectedMp4,depth){var indent;return depth=depth||0,indent=new Array(2*depth+1).join(" "),inspectedMp4.map(function(box,index){return indent+box.type+"\n"+Object.keys(box).filter(function(key){return"type"!==key&&"boxes"!==key}).map(function(key){var prefix=indent+"  "+key+": ",value=box[key];if(value instanceof Uint8Array||value instanceof Uint32Array){var bytes=Array.prototype.slice.call(new Uint8Array(value.buffer,value.byteOffset,value.byteLength)).map(function(byte){return" "+("00"+byte.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return bytes?1===bytes.length?prefix+"<"+bytes.join("").slice(1)+">":prefix+"<\n"+bytes.map(function(line){return indent+"  "+line}).join("\n")+"\n"+indent+"  >":prefix+"<>"}return prefix+JSON.stringify(value,null,2).split("\n").map(function(line,index){return 0===index?line:indent+"  "+line}).join("\n")}).join("\n")+(box.boxes?"\n"+textifyMp4(box.boxes,depth+1):"")}).join("\n")},module.exports={inspect:inspectMp4,textify:textifyMp4}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(require,module,exports){"use strict";var ExpGolomb;ExpGolomb=function(workingData){var workingBytesAvailable=workingData.byteLength,workingWord=0,workingBitsAvailable=0;this.length=function(){return 8*workingBytesAvailable},this.bitsAvailable=function(){return 8*workingBytesAvailable+workingBitsAvailable},this.loadWord=function(){var position=workingData.byteLength-workingBytesAvailable,workingBytes=new Uint8Array(4),availableBytes=Math.min(4,workingBytesAvailable);if(0===availableBytes)throw new Error("no bytes available");workingBytes.set(workingData.subarray(position,position+availableBytes)),workingWord=new DataView(workingBytes.buffer).getUint32(0),workingBitsAvailable=8*availableBytes,workingBytesAvailable-=availableBytes},this.skipBits=function(count){var skipBytes;workingBitsAvailable>count?(workingWord<<=count,workingBitsAvailable-=count):(count-=workingBitsAvailable,skipBytes=Math.floor(count/8),count-=8*skipBytes,workingBytesAvailable-=skipBytes,this.loadWord(),workingWord<<=count,workingBitsAvailable-=count)},this.readBits=function(size){var bits=Math.min(workingBitsAvailable,size),valu=workingWord>>>32-bits;return workingBitsAvailable-=bits,workingBitsAvailable>0?workingWord<<=bits:workingBytesAvailable>0&&this.loadWord(),bits=size-bits,bits>0?valu<<bits|this.readBits(bits):valu},this.skipLeadingZeros=function(){var leadingZeroCount;for(leadingZeroCount=0;leadingZeroCount<workingBitsAvailable;++leadingZeroCount)if(0!==(workingWord&2147483648>>>leadingZeroCount))return workingWord<<=leadingZeroCount,workingBitsAvailable-=leadingZeroCount,leadingZeroCount;return this.loadWord(),leadingZeroCount+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var clz=this.skipLeadingZeros();return this.readBits(clz+1)-1},this.readExpGolomb=function(){var valu=this.readUnsignedExpGolomb();return 1&valu?1+valu>>>1:-1*(valu>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},module.exports=ExpGolomb},{}],49:[function(require,module,exports){"use strict";var Stream=function(){this.init=function(){var listeners={};this.on=function(type,listener){listeners[type]||(listeners[type]=[]),listeners[type].push(listener)},this.off=function(type,listener){var index;return!!listeners[type]&&(index=listeners[type].indexOf(listener),listeners[type].splice(index,1),index>-1)},this.trigger=function(type){var callbacks,i,length,args;if(callbacks=listeners[type])if(2===arguments.length)for(length=callbacks.length,i=0;i<length;++i)callbacks[i].call(this,arguments[1]);else{for(args=[],i=arguments.length,i=1;i<arguments.length;++i)args.push(arguments[i]);for(length=callbacks.length,i=0;i<length;++i)callbacks[i].apply(this,args)}},this.dispose=function(){listeners={}}}};Stream.prototype.pipe=function(destination){return this.on("data",function(data){destination.push(data)}),this.on("done",function(){destination.flush()}),destination},Stream.prototype.push=function(data){this.trigger("data",data)},Stream.prototype.flush=function(){this.trigger("done")},module.exports=Stream},{}],50:[function(require,module,exports){var bundleFn=arguments[3],sources=arguments[4],cache=arguments[5],stringify=JSON.stringify;module.exports=function(fn){for(var wkey,cacheKeys=Object.keys(cache),i=0,l=cacheKeys.length;i<l;i++){var key=cacheKeys[i];if(cache[key].exports===fn){wkey=key;break}}if(!wkey){wkey=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var wcache={},i=0,l=cacheKeys.length;i<l;i++){var key=cacheKeys[i];wcache[key]=key}sources[wkey]=[Function(["require","module","exports"],"("+fn+")(self)"),wcache]}var skey=Math.floor(Math.pow(16,8)*Math.random()).toString(16),scache={};scache[wkey]=wkey,sources[skey]=[Function(["require"],"require("+stringify(wkey)+")(self)"),scache];var src="("+bundleFn+")({"+Object.keys(sources).map(function(key){return stringify(key)+":["+sources[key][0]+","+stringify(sources[key][1])+"]"}).join(",")+"},{},["+stringify(skey)+"])",URL=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(URL.createObjectURL(new Blob([src],{type:"text/javascript"})))}},{}],51:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=void 0}},_playlistLoader=require("./playlist-loader"),_playlistLoader2=_interopRequireDefault(_playlistLoader),_playlist=require("./playlist"),_playlist2=_interopRequireDefault(_playlist),_xhr=require("./xhr"),_xhr2=_interopRequireDefault(_xhr),_decrypter=require("./decrypter"),_binUtils=require("./bin-utils"),_binUtils2=_interopRequireDefault(_binUtils),_videojsContribMediaSources=require("videojs-contrib-media-sources"),_m3u8=require("./m3u8"),_m3u82=_interopRequireDefault(_m3u8),_videoJs="undefined"!=typeof window?window.videojs:"undefined"!=typeof global?global.videojs:null,_videoJs2=_interopRequireDefault(_videoJs),_resolveUrl=require("./resolve-url"),_resolveUrl2=_interopRequireDefault(_resolveUrl),Hls={PlaylistLoader:_playlistLoader2.default,Playlist:_playlist2.default,Decrypter:_decrypter.Decrypter,AsyncStream:_decrypter.AsyncStream,decrypt:_decrypter.decrypt,utils:_binUtils2.default,xhr:(0,_xhr2.default)()};Hls.GOAL_BUFFER_LENGTH=30,Hls.canPlaySource=function(){return _videoJs2.default.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},Hls.findSoleUncommonTimeRangesEnd_=function(original,update){var i=void 0,start=void 0,end=void 0,result=[],edges=[],overlapsCurrentEnd=function(span){return span[0]<=end&&span[1]>=end};if(original)for(i=0;i<original.length;i++)start=original.start(i),end=original.end(i),edges.push([start,end]);if(update)for(i=0;i<update.length;i++)start=update.start(i),end=update.end(i),edges.some(overlapsCurrentEnd)||result.push(end);return 1!==result.length?null:result[0]},Hls.supportsNativeHls=function(){var video=document.createElement("video"),xMpegUrl=void 0,vndMpeg=void 0;return!!_videoJs2.default.getComponent("Html5").isSupported()&&(xMpegUrl=video.canPlayType("application/x-mpegURL"),vndMpeg=video.canPlayType("application/vnd.apple.mpegURL"),/probably|maybe/.test(xMpegUrl)||/probably|maybe/.test(vndMpeg))}(),Hls.isSupported=function(){return _videoJs2.default.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},Hls.comparePlaylistBandwidth=function(left,right){var leftBandwidth=void 0,rightBandwidth=void 0;return left.attributes&&left.attributes.BANDWIDTH&&(leftBandwidth=left.attributes.BANDWIDTH),leftBandwidth=leftBandwidth||window.Number.MAX_VALUE,right.attributes&&right.attributes.BANDWIDTH&&(rightBandwidth=right.attributes.BANDWIDTH),rightBandwidth=rightBandwidth||window.Number.MAX_VALUE,leftBandwidth-rightBandwidth},Hls.comparePlaylistResolution=function(left,right){var leftWidth=void 0,rightWidth=void 0;return left.attributes&&left.attributes.RESOLUTION&&left.attributes.RESOLUTION.width&&(leftWidth=left.attributes.RESOLUTION.width),leftWidth=leftWidth||window.Number.MAX_VALUE,right.attributes&&right.attributes.RESOLUTION&&right.attributes.RESOLUTION.width&&(rightWidth=right.attributes.RESOLUTION.width),rightWidth=rightWidth||window.Number.MAX_VALUE,leftWidth===rightWidth&&left.attributes.BANDWIDTH&&right.attributes.BANDWIDTH?left.attributes.BANDWIDTH-right.attributes.BANDWIDTH:leftWidth-rightWidth};var bandwidthVariance=1.2,blacklistDuration=3e5,TIME_FUDGE_FACTOR=1/30,Component=_videoJs2.default.getComponent("Component"),bufferCheckInterval=500,keyFailed=function(key){return key.retries&&key.retries>=2},safeGetComputedStyle=function(el,property){var result=void 0;return el?(result=getComputedStyle(el),result?result[property]:""):""},updateSegmentMetadata=function(playlist,segmentIndex,segmentEnd){if(playlist){var segment=playlist.segments[segmentIndex],previousSegment=playlist.segments[segmentIndex-1];segmentEnd&&segment&&(segment.end=segmentEnd,previousSegment?previousSegment.end&&(segment.duration=segment.end-previousSegment.end):segment.duration=segment.end)}},detectEndOfStream=function(playlist,mediaSource,segmentIndex,currentBuffered){if(!playlist)return!1;var segments=playlist.segments,appendedLastSegment=segmentIndex===segments.length-1,bufferedToEnd=currentBuffered.length&&segments[segments.length-1].end<=currentBuffered.end(0);return playlist.endList&&"open"===mediaSource.readyState&&(appendedLastSegment||bufferedToEnd)},parseCodecs=function(codecs){var result={codecCount:0,videoCodec:null,audioProfile:null};return result.codecCount=codecs.split(",").length,result.codecCount=result.codecCount||2,result.videoCodec=/(^|\s|,)+(avc1)[^ ,]*/i.exec(codecs),result.videoCodec=result.videoCodec&&result.videoCodec[2],result.audioProfile=/(^|\s|,)+mp4a.\d+\.(\d+)/i.exec(codecs),result.audioProfile=result.audioProfile&&result.audioProfile[2],result},filterBufferedRanges=function(predicate){return function(time){var i=void 0,ranges=[],tech=this.tech_,buffered=tech.buffered();if("undefined"==typeof time&&(time=tech.currentTime()),!this.mediaSource||this.mediaSource.mediaSource_&&!this.mediaSource.mediaSource_.sourceBuffers.length)return _videoJs2.default.createTimeRanges([]);if(buffered&&buffered.length)for(i=0;i<buffered.length;i++)predicate(buffered.start(i),buffered.end(i),time)&&ranges.push([buffered.start(i),buffered.end(i)]);return _videoJs2.default.createTimeRanges(ranges)}},HlsHandler=function(_Component){function HlsHandler(tech,options){var _this=this;_classCallCheck(this,HlsHandler),_get(Object.getPrototypeOf(HlsHandler.prototype),"constructor",this).call(this,tech);var _player=void 0;tech.options_&&tech.options_.playerId&&(_player=(0,_videoJs2.default)(tech.options_.playerId),_player.hls||Object.defineProperty(_player,"hls",{get:function(){return _videoJs2.default.log.warn("player.hls is deprecated. Use player.tech.hls instead."),_this}})),this.tech_=tech,this.source_=options.source,this.mode_=options.mode,this.pendingSegment_=null,this.bandwidth=options.bandwidth||4194304,this.bytesReceived=0,this.loadingState_="none","none"!==this.tech_.preload()&&(this.loadingState_="meta"),this.startCheckingBuffer_(),this.on(this.tech_,"seeking",function(){this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.stopCheckingBuffer_()}),this.on(this.tech_,"play",this.play)}return _inherits(HlsHandler,_Component),_createClass(HlsHandler,[{key:"src",value:function(_src){var _this2=this,oldMediaPlaylist=void 0;_src&&(this.mediaSource=new _videoJs2.default.MediaSource({mode:this.mode_}),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen.bind(this)),this.options_={},"undefined"!=typeof this.source_.withCredentials?this.options_.withCredentials=this.source_.withCredentials:_videoJs2.default.options.hls&&(this.options_.withCredentials=_videoJs2.default.options.hls.withCredentials),this.playlists=new Hls.PlaylistLoader(this.source_.src,this.tech_.hls,this.options_.withCredentials),this.tech_.one("canplay",this.setupFirstPlay.bind(this)),this.playlists.on("loadedmetadata",function(){oldMediaPlaylist=_this2.playlists.media(),oldMediaPlaylist.endList&&"metadata"!==_this2.tech_.preload()&&"none"!==_this2.tech_.preload()&&(_this2.loadingState_="segments"),_this2.setupSourceBuffer_(),_this2.setupFirstPlay(),_this2.fillBuffer(),_this2.tech_.trigger("loadedmetadata")}),this.playlists.on("error",function(){_this2.blacklistCurrentPlaylist_(_this2.playlists.error)}),this.playlists.on("loadedplaylist",function(){var updatedPlaylist=_this2.playlists.media(),seekable=void 0;return updatedPlaylist?(_this2.updateDuration(_this2.playlists.media()),seekable=_this2.seekable(),_this2.duration()===1/0&&0!==seekable.length&&_this2.mediaSource.addSeekableRange_(seekable.start(0),seekable.end(0)),void(oldMediaPlaylist=updatedPlaylist)):void _this2.playlists.media(_this2.selectPlaylist())}),this.playlists.on("mediachange",function(){_this2.tech_.trigger({type:"mediachange",bubbles:!0})}),this.tech_.el()&&this.tech_.src(_videoJs2.default.URL.createObjectURL(this.mediaSource)))}},{key:"handleSourceOpen",value:function(){this.sourceBuffer||this.setupSourceBuffer_(),this.tech_.autoplay()&&this.play()}},{key:"excludeIncompatibleVariants_",value:function(media){var master=this.playlists.master,codecCount=2,videoCodec=null,audioProfile=null,codecs=void 0;media.attributes&&media.attributes.CODECS&&(codecs=parseCodecs(media.attributes.CODECS),videoCodec=codecs.videoCodec,audioProfile=codecs.audioProfile,codecCount=codecs.codecCount),master.playlists.forEach(function(variant){var variantCodecs={codecCount:2,videoCodec:null,audioProfile:null};variant.attributes&&variant.attributes.CODECS&&(variantCodecs=parseCodecs(variant.attributes.CODECS)),variantCodecs.codecCount!==codecCount&&(variant.excludeUntil=1/0),variantCodecs.videoCodec!==videoCodec&&(variant.excludeUntil=1/0),("5"===variantCodecs.audioProfile&&"5"!==audioProfile||"5"===audioProfile&&"5"!==variantCodecs.audioProfile)&&(variant.excludeUntil=1/0)})}},{key:"setupSourceBuffer_",value:function(){var media=this.playlists.media(),mimeType=void 0;media&&"open"===this.mediaSource.readyState&&(mimeType="video/mp2t",media.attributes&&media.attributes.CODECS&&(mimeType+='; codecs="'+media.attributes.CODECS+'"'),this.sourceBuffer=this.mediaSource.addSourceBuffer(mimeType),this.excludeIncompatibleVariants_(media),this.sourceBuffer.addEventListener("updateend",this.updateEndHandler_.bind(this)))}},{key:"setupFirstPlay",value:function(){var seekable=void 0,media=this.playlists.media();this.duration()===1/0&&0===this.tech_.played().length&&!this.tech_.paused()&&this.sourceBuffer&&media&&this.tech_.readyState()>=1&&(this.playlists.trigger("firstplay"),seekable=this.seekable(),seekable.length&&this.tech_.setCurrentTime(seekable.end(0)))}},{key:"play",value:function(){return this.loadingState_="segments",this.tech_.ended()&&this.tech_.setCurrentTime(0),0===this.tech_.played().length?this.setupFirstPlay():void(this.duration()===1/0&&this.tech_.currentTime()<this.seekable().start(0)&&this.tech_.setCurrentTime(this.seekable().start(0)))}},{key:"setCurrentTime",value:function(currentTime){var buffered=this.findBufferedRange_();return this.playlists&&this.playlists.media()&&this.playlists.media().segments?buffered&&buffered.length?currentTime:this.pendingSegment_&&this.pendingSegment_.buffered?currentTime:(this.lastSegmentLoaded_=null,this.cancelSegmentXhr(),this.keyXhr_&&(this.keyXhr_.aborted=!0,this.cancelKeyXhr()),void this.fillBuffer(this.playlists.getMediaIndexForTime_(currentTime))):0}},{key:"duration",value:function(){var playlists=this.playlists;return playlists?this.mediaSource?this.mediaSource.duration:Hls.Playlist.duration(playlists.media()):0}},{key:"seekable",value:function seekable(){var media=void 0,seekable=void 0;return this.playlists&&(media=this.playlists.media())?(seekable=Hls.Playlist.seekable(media),0===seekable.length?seekable:0===seekable.start(0)?_videoJs2.default.createTimeRanges([[this.playlists.expired_,this.playlists.expired_+seekable.end(0)]]):seekable):_videoJs2.default.createTimeRanges()}},{key:"updateDuration",value:function(playlist){var _this3=this,oldDuration=this.mediaSource.duration,newDuration=Hls.Playlist.duration(playlist),buffered=this.tech_.buffered(),setDuration=function setDuration(){_this3.mediaSource.duration=newDuration,_this3.tech_.trigger("durationchange"),_this3.mediaSource.removeEventListener("sourceopen",setDuration)};buffered.length>0&&(newDuration=Math.max(newDuration,buffered.end(buffered.length-1))),oldDuration!==newDuration&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",setDuration):this.sourceBuffer&&this.sourceBuffer.updating||(this.mediaSource.duration=newDuration,this.tech_.trigger("durationchange")))}},{key:"resetSrc_",value:function(){this.cancelSegmentXhr(),this.cancelKeyXhr(),this.sourceBuffer&&"open"===this.mediaSource.readyState&&this.sourceBuffer.abort()}},{key:"cancelKeyXhr",value:function(){this.keyXhr_&&(this.keyXhr_.onreadystatechange=null,this.keyXhr_.abort(),this.keyXhr_=null)}},{key:"cancelSegmentXhr",value:function(){this.segmentXhr_&&(this.segmentXhr_.onreadystatechange=null,this.segmentXhr_.abort(),this.segmentXhr_=null),this.pendingSegment_=null}},{key:"dispose",value:function(){this.stopCheckingBuffer_(),this.playlists&&this.playlists.dispose(),this.resetSrc_(),_get(Object.getPrototypeOf(HlsHandler.prototype),"dispose",this).call(this)}},{key:"selectPlaylist",value:function(){var effectiveBitrate=void 0,sortedPlaylists=this.playlists.master.playlists.slice(),bandwidthPlaylists=[],now=+new Date,i=void 0,variant=void 0,bandwidthBestVariant=void 0,resolutionPlusOne=void 0,resolutionPlusOneAttribute=void 0,resolutionBestVariant=void 0,width=void 0,height=void 0;for(sortedPlaylists.sort(Hls.comparePlaylistBandwidth),sortedPlaylists=sortedPlaylists.filter(function(localVariant){return"undefined"==typeof localVariant.excludeUntil||now>=localVariant.excludeUntil}),i=sortedPlaylists.length;i--;)variant=sortedPlaylists[i],variant.attributes&&variant.attributes.BANDWIDTH&&(effectiveBitrate=variant.attributes.BANDWIDTH*bandwidthVariance,effectiveBitrate<this.bandwidth&&(bandwidthPlaylists.push(variant),bandwidthBestVariant||(bandwidthBestVariant=variant)));for(i=bandwidthPlaylists.length,bandwidthPlaylists.sort(Hls.comparePlaylistResolution),variant=null,width=parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10),height=parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10);i--;)if(variant=bandwidthPlaylists[i],variant.attributes&&variant.attributes.RESOLUTION&&variant.attributes.RESOLUTION.width&&variant.attributes.RESOLUTION.height){var variantResolution=variant.attributes.RESOLUTION;if(variantResolution.width===width&&variantResolution.height===height){resolutionPlusOne=null,resolutionBestVariant=variant;break}if(variantResolution.width<width&&variantResolution.height<height)break;(!resolutionPlusOne||variantResolution.width<resolutionPlusOneAttribute.width&&variantResolution.height<resolutionPlusOneAttribute.height)&&(resolutionPlusOne=variant,resolutionPlusOneAttribute=resolutionPlusOne.attributes.RESOLUTION)}return resolutionPlusOne||resolutionBestVariant||bandwidthBestVariant||sortedPlaylists[0]}},{key:"checkBuffer_",value:function(){this.checkBufferTimeout_&&(window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null),this.fillBuffer(),this.drainBuffer(),this.checkBufferTimeout_=window.setTimeout(this.checkBuffer_.bind(this),bufferCheckInterval)}},{key:"startCheckingBuffer_",value:function(){this.checkBuffer_()}},{key:"stopCheckingBuffer_",value:function(){this.checkBufferTimeout_&&(window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"fillBuffer",value:function(mediaIndex){var tech=this.tech_,currentTime=tech.currentTime(),hasBufferedContent=0!==this.tech_.buffered().length,currentBuffered=this.findBufferedRange_(),outsideBufferedRanges=!(currentBuffered&&currentBuffered.length),currentBufferedEnd=0,bufferedTime=0,segment=void 0,segmentInfo=void 0,segmentTimestampOffset=void 0;if("segments"===this.loadingState_&&tech.currentSrc()&&this.playlists&&!this.segmentXhr_&&!this.pendingSegment_&&"HAVE_NOTHING"!==this.playlists.state&&this.playlists.media()&&this.playlists.media().segments&&"SWITCHING_MEDIA"!==this.playlists.state){if("undefined"==typeof mediaIndex)if(currentBuffered&&currentBuffered.length){if(currentBufferedEnd=currentBuffered.end(0),mediaIndex=this.playlists.getMediaIndexForTime_(currentBufferedEnd),bufferedTime=Math.max(0,currentBufferedEnd-currentTime),bufferedTime>=Hls.GOAL_BUFFER_LENGTH)return}else mediaIndex=this.playlists.getMediaIndexForTime_(this.tech_.currentTime());if(segment=this.playlists.media().segments[mediaIndex]){if(this.lastSegmentLoaded_&&this.playlistUriToUrl(this.lastSegmentLoaded_.uri)===this.playlistUriToUrl(segment.uri)&&this.lastSegmentLoaded_.byterange===segment.byterange)return this.fillBuffer(mediaIndex+1);segmentInfo={uri:this.playlistUriToUrl(segment.uri),mediaIndex:mediaIndex,mediaSequence:this.playlists.media().mediaSequence,playlist:this.playlists.media(),currentBufferedEnd:currentBufferedEnd,bytes:null,encryptedBytes:null,decrypter:null,buffered:null,timestampOffset:null},mediaIndex>0&&(segmentTimestampOffset=Hls.Playlist.duration(segmentInfo.playlist,segmentInfo.playlist.mediaSequence+mediaIndex)+this.playlists.expired_),this.tech_.seeking()&&outsideBufferedRanges?segmentInfo.playlist.discontinuityStarts.length&&(segmentInfo.timestampOffset=segmentTimestampOffset):segment.discontinuity&&currentBuffered.length?segmentInfo.timestampOffset=currentBuffered.end(0):!hasBufferedContent&&this.tech_.currentTime()>.05&&(segmentInfo.timestampOffset=segmentTimestampOffset),this.loadSegment(segmentInfo)}}}},{key:"playlistUriToUrl",value:function(segmentRelativeUrl){var playListUrl=void 0;return playListUrl=this.playlists.media().uri===this.source_.src?(0,_resolveUrl2.default)(this.source_.src,segmentRelativeUrl):(0,_resolveUrl2.default)((0,_resolveUrl2.default)(this.source_.src,this.playlists.media().uri||""),segmentRelativeUrl)}},{key:"byterangeStr_",value:function(byterange){var byterangeStart=void 0,byterangeEnd=void 0;return byterangeEnd=byterange.offset+byterange.length-1,byterangeStart=byterange.offset,"bytes="+byterangeStart+"-"+byterangeEnd}},{key:"segmentXhrHeaders_",value:function(segment){var headers={};return"byterange"in segment&&(headers.Range=this.byterangeStr_(segment.byterange)),headers}},{key:"setBandwidth",value:function(localXhr){this.segmentXhrTime=localXhr.roundTripTime,this.bandwidth=localXhr.bandwidth,this.bytesReceived+=localXhr.bytesReceived||0,this.tech_.trigger("bandwidthupdate")}},{key:"blacklistCurrentPlaylist_",value:function(error){var currentPlaylist=void 0,nextPlaylist=void 0;return(currentPlaylist=error.playlist||this.playlists.media())?(currentPlaylist.excludeUntil=Date.now()+blacklistDuration,(nextPlaylist=this.selectPlaylist())?(_videoJs2.default.log.warn("Problem encountered with the current HLS playlist. Switching to another playlist."),this.playlists.media(nextPlaylist)):(_videoJs2.default.log.warn("Problem encountered with the current HLS playlist. No suitable alternatives found."),this.error=error,this.mediaSource.endOfStream("network"))):(this.error=error,this.mediaSource.endOfStream("network"))}},{key:"loadSegment",value:function(segmentInfo){var _this4=this,segment=segmentInfo.playlist.segments[segmentInfo.mediaIndex],removeToTime=0,seekable=this.seekable(),currentTime=this.tech_.currentTime();this.sourceBuffer&&!this.sourceBuffer.updating&&(removeToTime=seekable.length&&seekable.start(0)>0&&seekable.start(0)<currentTime?seekable.start(0):currentTime-60,removeToTime>0&&this.sourceBuffer.remove(0,removeToTime)),segment.key&&this.fetchKey_(segment),this.segmentXhr_=this.tech_.hls.xhr({uri:segmentInfo.uri,responseType:"arraybuffer",withCredentials:this.source_.withCredentials,timeout:1.5*segment.duration*1e3,headers:this.segmentXhrHeaders_(segment)},function(error,request){if(_this4.segmentXhr_&&request===_this4.segmentXhr_)return _this4.segmentXhr_=null,request.timedout?(_this4.bandwidth=1,_this4.playlists.media(_this4.selectPlaylist())):!request.aborted&&error?_this4.blacklistCurrentPlaylist_({status:request.status,message:"HLS segment request error at URL: "+segmentInfo.uri,code:request.status>=500?4:2}):void(request.response&&(_this4.lastSegmentLoaded_=segment,_this4.setBandwidth(request),segment.key?segmentInfo.encryptedBytes=new Uint8Array(request.response):segmentInfo.bytes=new Uint8Array(request.response),_this4.pendingSegment_=segmentInfo,_this4.tech_.trigger("progress"),_this4.drainBuffer(),_this4.playlists.media(_this4.selectPlaylist())))})}},{key:"drainBuffer",value:function(){var segmentInfo=void 0,mediaIndex=void 0,playlist=void 0,bytes=void 0,segment=void 0,decrypter=void 0,segIv=void 0;if(this.pendingSegment_&&this.sourceBuffer&&!this.pendingSegment_.buffered&&!this.sourceBuffer.updating){if(segmentInfo=this.pendingSegment_,mediaIndex=segmentInfo.mediaIndex,playlist=segmentInfo.playlist,bytes=segmentInfo.bytes,segment=playlist.segments[mediaIndex],segment.key&&!bytes){if(keyFailed(segment.key))return this.blacklistCurrentPlaylist_({message:"HLS segment key request error.",code:4});if(!segment.key.bytes)return;if(segmentInfo.decrypter)return;return segIv=segment.key.iv||new Uint32Array([0,0,0,mediaIndex+playlist.mediaSequence]),decrypter=new Hls.Decrypter(segmentInfo.encryptedBytes,segment.key.bytes,segIv,function(error,localBytes){error&&_videoJs2.default.log.warn(error),segmentInfo.bytes=localBytes}),void(segmentInfo.decrypter=decrypter)}this.pendingSegment_.buffered=this.tech_.buffered(),null!==segmentInfo.timestampOffset&&(this.sourceBuffer.timestampOffset=segmentInfo.timestampOffset),this.sourceBuffer.appendBuffer(bytes)}}},{key:"updateEndHandler_",value:function(){var segmentInfo=this.pendingSegment_,playlist=void 0,currentMediaIndex=void 0,currentBuffered=void 0,seekable=void 0,timelineUpdate=void 0,isEndOfStream=void 0;if(!segmentInfo)return void(this.pendingSegment_=null);if(segmentInfo.buffered){if(this.pendingSegment_=null,playlist=segmentInfo.playlist,currentMediaIndex=segmentInfo.mediaIndex+(segmentInfo.mediaSequence-playlist.mediaSequence),currentBuffered=this.findBufferedRange_(),isEndOfStream=detectEndOfStream(playlist,this.mediaSource,currentMediaIndex,currentBuffered),segmentInfo.playlist.uri!==this.playlists.media().uri)return isEndOfStream?this.mediaSource.endOfStream():this.fillBuffer();if(seekable=this.seekable(),this.tech_.seeking()&&0===currentBuffered.length&&seekable.length&&this.tech_.currentTime()<seekable.start(0)){var next=this.findNextBufferedRange_();next.length&&(_videoJs2.default.log("tried seeking to",this.tech_.currentTime(),"but that was too early, retrying at",next.start(0)),this.tech_.setCurrentTime(next.start(0)+TIME_FUDGE_FACTOR))}return timelineUpdate=Hls.findSoleUncommonTimeRangesEnd_(segmentInfo.buffered,this.tech_.buffered()),updateSegmentMetadata(playlist,currentMediaIndex,timelineUpdate),isEndOfStream?this.mediaSource.endOfStream():null!==timelineUpdate||segmentInfo.buffered.length!==this.tech_.buffered().length?(this.updateDuration(playlist),void this.fillBuffer()):void this.fillBuffer(currentMediaIndex+1)}}},{key:"fetchKey_",value:function(segment){var _this5=this,key=void 0,settings=void 0,receiveKey=void 0;if(!this.keyXhr_&&(settings=this.options_,receiveKey=function(keyRecieved){return function(error,request){var view=void 0;return _this5.keyXhr_=null,error||!request.response||16!==request.response.byteLength?(keyRecieved.retries=keyRecieved.retries||0,keyRecieved.retries++,void(request.aborted||_this5.fetchKey_(segment))):(view=new DataView(request.response),keyRecieved.bytes=new Uint32Array([view.getUint32(0),view.getUint32(4),view.getUint32(8),view.getUint32(12)]),void _this5.checkBuffer_())}},key=segment.key))return key.bytes||keyFailed(key)?void 0:void(this.keyXhr_=this.tech_.hls.xhr({uri:this.playlistUriToUrl(key.uri),responseType:"arraybuffer",withCredentials:settings.withCredentials},receiveKey(key)))}}]),HlsHandler}(Component);exports.default=HlsHandler,HlsHandler.prototype.findBufferedRange_=filterBufferedRanges(function(start,end,time){return start-TIME_FUDGE_FACTOR<=time&&end+TIME_FUDGE_FACTOR>=time}),HlsHandler.prototype.findNextBufferedRange_=filterBufferedRanges(function(start,end,time){return start-TIME_FUDGE_FACTOR>=time});var HlsSourceHandler=function HlsSourceHandler(mode){return{canHandleSource:function(srcObj){return HlsSourceHandler.canPlayType(srcObj.type)},handleSource:function(source,tech){return"flash"===mode&&tech.setTimeout(function(){tech.trigger("loadstart")},1),tech.hls=new HlsHandler(tech,{source:source,mode:mode}),tech.hls.xhr=(0,_xhr2.default)(),_videoJs2.default.Hls.xhr.beforeRequest&&(tech.hls.xhr.beforeRequest=_videoJs2.default.Hls.xhr.beforeRequest),tech.hls.src(source.src),tech.hls},canPlayType:function(type){return HlsSourceHandler.canPlayType(type)}}};HlsSourceHandler.canPlayType=function(type){var mpegurlRE=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return!Hls.supportsNativeHls&&mpegurlRE.test(type)},"undefined"!=typeof _videoJs2.default.MediaSource&&"undefined"!=typeof _videoJs2.default.URL||(_videoJs2.default.MediaSource=_videojsContribMediaSources.MediaSource,_videoJs2.default.URL=_videojsContribMediaSources.URL),_videojsContribMediaSources.MediaSource.supportsNativeMediaSources()&&_videoJs2.default.getComponent("Html5").registerSourceHandler(HlsSourceHandler("html5")),window.Uint8Array&&_videoJs2.default.getComponent("Flash").registerSourceHandler(HlsSourceHandler("flash")),_videoJs2.default.HlsHandler=HlsHandler,_videoJs2.default.HlsSourceHandler=HlsSourceHandler,_videoJs2.default.Hls=Hls,_videoJs2.default.m3u8=_m3u82.default,exports.default={Hls:Hls,HlsHandler:HlsHandler,HlsSourceHandler:HlsSourceHandler},module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":1,"./decrypter":5,"./m3u8":6,"./playlist":11,"./playlist-loader":10,"./resolve-url":12,"./xhr":14,"videojs-contrib-media-sources":28}]},{},[51])(51)}),function(window){"use strict";function minErr(module,ErrorConstructor){return ErrorConstructor=ErrorConstructor||Error,function(){var paramPrefix,i,SKIP_INDEXES=2,templateArgs=arguments,code=templateArgs[0],message="["+(module?module+":":"")+code+"] ",template=templateArgs[1];for(message+=template.replace(/\{\d+\}/g,function(match){var index=+match.slice(1,-1),shiftedIndex=index+SKIP_INDEXES;return shiftedIndex<templateArgs.length?toDebugString(templateArgs[shiftedIndex]):match}),message+="\nhttp://errors.angularjs.org/1.5.7/"+(module?module+"/":"")+code,i=SKIP_INDEXES,paramPrefix="?";i<templateArgs.length;i++,paramPrefix="&")message+=paramPrefix+"p"+(i-SKIP_INDEXES)+"="+encodeURIComponent(toDebugString(templateArgs[i]));return new ErrorConstructor(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;if(isArray(obj)||isString(obj)||jqLite&&obj instanceof jqLite)return!0;var length="length"in Object(obj)&&obj.length;return isNumber(length)&&(length>=0&&(length-1 in obj||obj instanceof Array)||"function"==typeof obj.item)}function forEach(obj,iterator,context){var key,length;if(obj)if(isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key,obj);else if(isArray(obj)||isArrayLike(obj)){var isPrimitive="object"!=typeof obj;for(key=0,length=obj.length;key<length;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else if(isBlankObject(obj))for(key in obj)iterator.call(context,obj[key],key,obj);else if("function"==typeof obj.hasOwnProperty)for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else for(key in obj)hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj);return obj}function forEachSorted(obj,iterator,context){for(var keys=Object.keys(obj).sort(),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function baseExtend(dst,objs,deep){for(var h=dst.$$hashKey,i=0,ii=objs.length;i<ii;++i){var obj=objs[i];if(isObject(obj)||isFunction(obj))for(var keys=Object.keys(obj),j=0,jj=keys.length;j<jj;j++){var key=keys[j],src=obj[key];deep&&isObject(src)?isDate(src)?dst[key]=new Date(src.valueOf()):isRegExp(src)?dst[key]=new RegExp(src):src.nodeName?dst[key]=src.cloneNode(!0):isElement(src)?dst[key]=src.clone():(isObject(dst[key])||(dst[key]=isArray(src)?[]:{}),baseExtend(dst[key],[src],!0)):dst[key]=src}}return setHashKey(dst,h),dst}function extend(dst){return baseExtend(dst,slice.call(arguments,1),!1)}function merge(dst){return baseExtend(dst,slice.call(arguments,1),!0)}function toInt(str){return parseInt(str,10)}function inherit(parent,extra){return extend(Object.create(parent),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function hasCustomToString(obj){return isFunction(obj.toString)&&obj.toString!==toString}function isUndefined(value){return"undefined"==typeof value}function isDefined(value){return"undefined"!=typeof value}function isObject(value){return null!==value&&"object"==typeof value}function isBlankObject(value){return null!==value&&"object"==typeof value&&!getPrototypeOf(value)}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isFormData(obj){return"[object FormData]"===toString.call(obj)}function isBlob(obj){return"[object Blob]"===toString.call(obj)}function isBoolean(value){return"boolean"==typeof value}function isPromiseLike(obj){return obj&&isFunction(obj.then)}function isTypedArray(value){return value&&isNumber(value.length)&&TYPED_ARRAY_REGEXP.test(toString.call(value))}function isArrayBuffer(obj){return"[object ArrayBuffer]"===toString.call(obj)}function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function nodeName_(element){return lowercase(element.nodeName||element[0]&&element[0].nodeName)}function arrayRemove(array,value){var index=array.indexOf(value);return index>=0&&array.splice(index,1),index}function copy(source,destination){function copyRecurse(source,destination){var key,h=destination.$$hashKey;if(isArray(source))for(var i=0,ii=source.length;i<ii;i++)destination.push(copyElement(source[i]));else if(isBlankObject(source))for(key in source)destination[key]=copyElement(source[key]);else if(source&&"function"==typeof source.hasOwnProperty)for(key in source)source.hasOwnProperty(key)&&(destination[key]=copyElement(source[key]));else for(key in source)hasOwnProperty.call(source,key)&&(destination[key]=copyElement(source[key]));return setHashKey(destination,h),destination}function copyElement(source){if(!isObject(source))return source;var index=stackSource.indexOf(source);if(index!==-1)return stackDest[index];if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var needsRecurse=!1,destination=copyType(source);return void 0===destination&&(destination=isArray(source)?[]:Object.create(getPrototypeOf(source)),needsRecurse=!0),stackSource.push(source),stackDest.push(destination),needsRecurse?copyRecurse(source,destination):destination}function copyType(source){switch(toString.call(source)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new source.constructor(copyElement(source.buffer));case"[object ArrayBuffer]":if(!source.slice){var copied=new ArrayBuffer(source.byteLength);return new Uint8Array(copied).set(new Uint8Array(source)),copied}return source.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new source.constructor(source.valueOf());case"[object RegExp]":var re=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]);return re.lastIndex=source.lastIndex,re;case"[object Blob]":return new source.constructor([source],{type:source.type})}if(isFunction(source.cloneNode))return source.cloneNode(!0)}var stackSource=[],stackDest=[];if(destination){if(isTypedArray(destination)||isArrayBuffer(destination))throw ngMinErr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");return isArray(destination)?destination.length=0:forEach(destination,function(value,key){"$$hashKey"!==key&&delete destination[key]}),stackSource.push(source),stackDest.push(destination),copyRecurse(source,destination)}return copyElement(source)}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1==t2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return!!isDate(o2)&&equals(o1.getTime(),o2.getTime());if(isRegExp(o1))return!!isRegExp(o2)&&o1.toString()==o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return!1;keySet=createMap();for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!(key in keySet)&&"$"!==key.charAt(0)&&isDefined(o2[key])&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;key<length;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=void 0:isWindow(value)?val="$WINDOW":value&&window.document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){if(!isUndefined(obj))return isNumber(pretty)||(pretty=pretty?2:null),JSON.stringify(obj,toJsonReplacer,pretty)}function fromJson(json){return isString(json)?JSON.parse(json):json}function timezoneToOffset(timezone,fallback){timezone=timezone.replace(ALL_COLONS,"");var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){return date=new Date(date.getTime()),date.setMinutes(date.getMinutes()+minutes),date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var dateTimezoneOffset=date.getTimezoneOffset(),timezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset);return addDateMinutes(date,reverse*(timezoneOffset-dateTimezoneOffset))}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var obj={};return forEach((keyValue||"").split("&"),function(keyValue){var splitPoint,key,val;keyValue&&(key=keyValue=keyValue.replace(/\+/g,"%20"),splitPoint=keyValue.indexOf("="),splitPoint!==-1&&(key=keyValue.substring(0,splitPoint),val=keyValue.substring(splitPoint+1)),key=tryDecodeURIComponent(key),isDefined(key)&&(val=!isDefined(val)||tryDecodeURIComponent(val),hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val))}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(value===!0?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function getNgAttribute(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(attr=ngAttrPrefixes[i]+ngAttr,isString(attr=element.getAttribute(attr)))return attr;return null}function angularInit(element,bootstrap){var appElement,module,config={};forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";!appElement&&element.hasAttribute&&element.hasAttribute(name)&&(appElement=element,module=element.getAttribute(name))}),forEach(ngAttrPrefixes,function(prefix){var candidate,name=prefix+"app";!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))&&(appElement=candidate,module=candidate.getAttribute(name))}),appElement&&(config.strictDi=null!==getNgAttribute(appElement,"strict-di"),bootstrap(appElement,module?[module]:[],config))}function bootstrap(element,modules,config){isObject(config)||(config={});var defaultConfig={strictDi:!1};config=extend(defaultConfig,config);var doBootstrap=function(){if(element=jqLite(element),element.injector()){var tag=element[0]===window.document?"document":startingTag(element);throw ngMinErr("btstrpd","App already bootstrapped with this element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}modules=modules||[],modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),config.debugInfoEnabled&&modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!0)}]),modules.unshift("ng");var injector=createInjector(modules,config.strictDi);return injector.invoke(["$rootScope","$rootElement","$compile","$injector",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/,NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;return window&&NG_ENABLE_DEBUG_INFO.test(window.name)&&(config.debugInfoEnabled=!0,window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")),window&&!NG_DEFER_BOOTSTRAP.test(window.name)?doBootstrap():(window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),angular.resumeBootstrap=function(extraModules){return forEach(extraModules,function(module){modules.push(module)}),doBootstrap()},void(isFunction(angular.resumeDeferredBootstrap)&&angular.resumeDeferredBootstrap()))}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name,window.location.reload()}function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector)throw ngMinErr("test","no injector found for element argument to getTestability");return injector.get("$$testability")}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function bindJQuery(){var originalCleanData;if(!bindJQueryFired){var jqName=jq();jQuery=isUndefined(jqName)?window.jQuery:jqName?window[jqName]:void 0,jQuery&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),originalCleanData=jQuery.cleanData,jQuery.cleanData=function(elems){for(var events,elem,i=0;null!=(elem=elems[i]);i++)events=jQuery._data(elem,"events"),events&&events.$destroy&&jQuery(elem).triggerHandler("$destroy");originalCleanData(elems)}):jqLite=JQLite,angular.element=jqLite,bindJQueryFired=!0}}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;i<len;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockNodes(nodes){for(var blockNodes,node=nodes[0],endNode=nodes[nodes.length-1],i=1;node!==endNode&&(node=node.nextSibling);i++)(blockNodes||nodes[i]!==node)&&(blockNodes||(blockNodes=jqLite(slice.call(nodes,0,i))),blockNodes.push(node));return blockNodes||nodes}function createMap(){return Object.create(null)}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var assertNotHasOwnProperty=function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)};return assertNotHasOwnProperty(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod,queue){return queue||(queue=invokeQueue),function(){return queue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}function invokeLaterAndSetModuleName(provider,method){return function(recipeName,factoryFunction){return factoryFunction&&isFunction(factoryFunction)&&(factoryFunction.$$moduleName=name),invokeQueue.push([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],configBlocks=[],runBlocks=[],config=invokeLater("$injector","invoke","push",configBlocks),moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLaterAndSetModuleName("$provide","provider"),factory:invokeLaterAndSetModuleName("$provide","factory"),service:invokeLaterAndSetModuleName("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),decorator:invokeLaterAndSetModuleName("$provide","decorator"),animation:invokeLaterAndSetModuleName("$animateProvider","register"),filter:invokeLaterAndSetModuleName("$filterProvider","register"),controller:invokeLaterAndSetModuleName("$controllerProvider","register"),directive:invokeLaterAndSetModuleName("$compileProvider","directive"),component:invokeLaterAndSetModuleName("$compileProvider","component"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance})}})}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++)dst[i]=src[i]}else if(isObject(src)){dst=dst||{};for(var key in src)"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key])}return dst||src}function serializeObject(obj){var seen=[];return JSON.stringify(obj,function(key,val){if(val=toJsonReplacer(key,val),isObject(val)){if(seen.indexOf(val)>=0)return"...";seen.push(val)}return val})}function toDebugString(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):isUndefined(obj)?"undefined":"string"!=typeof obj?serializeObject(obj):obj}function publishExternalAPI(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,merge:merge,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},getTestability:getTestability,$$minErr:minErr,$$csp:csp,reloadWithDebugInfo:reloadWithDebugInfo}),(angularModule=setupModuleLoader(window))("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$animateCss:$CoreAnimateCssProvider,$$animateJs:$$CoreAnimateJsProvider,$$animateQueue:$$CoreAnimateQueueProvider,$$AnimateRunner:$$AnimateRunnerFactoryProvider,$$animateAsyncRun:$$AnimateAsyncRunFactoryProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$$forceReflow:$$ForceReflowProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpParamSerializer:$HttpParamSerializerProvider,$httpParamSerializerJQLike:$HttpParamSerializerJQLikeProvider,$httpBackend:$HttpBackendProvider,$xhrFactory:$xhrFactoryProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$jqLite:$$jqLiteProvider,$$HashMap:$$HashMapProvider,$$cookieReader:$$CookieReaderProvider})}])}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT}function jqLiteHasData(node){for(var key in jqCache[node.ng339])return!0;return!1}function jqLiteCleanData(nodes){for(var i=0,ii=nodes.length;i<ii;i++)jqLiteRemoveData(nodes[i])}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],i=wrap[0];i--;)tmp=tmp.lastChild;nodes=concat(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}return fragment.textContent="",fragment.innerHTML="",forEach(nodes,function(node){fragment.appendChild(node)}),fragment}function jqLiteParseHTML(html,context){context=context||window.document;var parsed;return(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:(parsed=jqLiteBuildFragment(html,context))?parsed.childNodes:[]}function jqLiteWrapNode(node,wrapper){var parent=node.parentNode;parent&&parent.replaceChild(wrapper,node),wrapper.appendChild(node)}function JQLite(element){if(element instanceof JQLite)return element;var argIsString;if(isString(element)&&(element=trim(element),argIsString=!0),!(this instanceof JQLite)){if(argIsString&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}argIsString?jqLiteAddNodes(this,jqLiteParseHTML(element)):jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element,onlyDescendants){if(onlyDescendants||jqLiteRemoveData(element),element.querySelectorAll)for(var descendants=element.querySelectorAll("*"),i=0,l=descendants.length;i<l;i++)jqLiteRemoveData(descendants[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,handle=expandoStore&&expandoStore.handle;if(handle)if(type){var removeHandler=function(type){var listenerFns=events[type];isDefined(fn)&&arrayRemove(listenerFns||[],fn),isDefined(fn)&&listenerFns&&listenerFns.length>0||(removeEventListenerFn(element,type,handle),delete events[type])};forEach(type.split(" "),function(type){removeHandler(type),MOUSE_EVENT_MAP[type]&&removeHandler(MOUSE_EVENT_MAP[type])})}else for(type in events)"$destroy"!==type&&removeEventListenerFn(element,type,handle),delete events[type]}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name)return void delete expandoStore.data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=void 0}}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];return createIfNecessary&&!expandoStore&&(element.ng339=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={events:{},data:{},handle:void 0}),expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var isSimpleSetter=isDefined(value),isSimpleGetter=!isSimpleSetter&&key&&!isObject(key),massGetter=!key,expandoStore=jqLiteExpandoStore(element,!isSimpleGetter),data=expandoStore&&expandoStore.data;if(isSimpleSetter)data[key]=value;else{if(massGetter)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}}function jqLiteHasClass(element,selector){return!!element.getAttribute&&(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),existingClasses.indexOf(" "+cssClass+" ")===-1&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements)if(elements.nodeType)root[root.length++]=elements;else{var length=elements.length;if("number"==typeof length&&elements.window!==elements){if(length)for(var i=0;i<length;i++)root[root.length++]=elements[i]}else root[root.length++]=elements}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){element.nodeType==NODE_TYPE_DOCUMENT&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;i<ii;i++)if(isDefined(value=jqLite.data(element,names[i])))return value;element=element.parentNode||element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host}}function jqLiteEmpty(element){for(jqLiteDealoc(element,!0);element.firstChild;)element.removeChild(element.firstChild)}function jqLiteRemove(element,keepData){keepData||jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)}function jqLiteDocumentLoaded(action,win){win=win||window,"complete"===win.document.readyState?win.setTimeout(action):jqLite(win).on("load",action)}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function getAliasedAttrName(name){return ALIASED_ATTR[name]}function createEventHandler(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type],eventFnsLength=eventFns?eventFns.length:0;if(eventFnsLength){if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0,event.stopPropagation&&event.stopPropagation(),originalStopImmediatePropagation&&originalStopImmediatePropagation.call(event)}}event.isImmediatePropagationStopped=function(){return event.immediatePropagationStopped===!0};var handlerWrapper=eventFns.specialHandlerWrapper||defaultHandlerWrapper;eventFnsLength>1&&(eventFns=shallowCopy(eventFns));for(var i=0;i<eventFnsLength;i++)event.isImmediatePropagationStopped()||handlerWrapper(element,event,eventFns[i])}};return eventHandler.elem=element,eventHandler}function defaultHandlerWrapper(element,event,handler){handler.call(element,event)}function specialMouseHandlerWrapper(target,event,handler){var related=event.relatedTarget;related&&(related===target||jqLiteContains.call(target,related))||handler.call(target,event)}function $$jqLiteProvider(){this.$get=function(){return extend(JQLite,{hasClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteHasClass(node,classes)},addClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteAddClass(node,classes)},removeClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteRemoveClass(node,classes)}})}}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key)return"function"==typeof key&&(key=obj.$$hashKey()),key;var objType=typeof obj;return key="function"==objType||"object"==objType&&null!==obj?obj.$$hashKey=objType+":"+(nextUidFn||nextUid)():objType+":"+obj}function HashMap(array,isolatedUid){if(isolatedUid){var uid=0;this.nextUid=function(){return++uid}}forEach(array,this.put,this)}function stringifyFn(fn){return Function.prototype.toString.call(fn)+" "}function extractArgs(fn){var fnText=stringifyFn(fn).replace(STRIP_COMMENTS,""),args=fnText.match(ARROW_ARG)||fnText.match(FN_ARGS);return args}function anonFn(fn){var args=extractArgs(fn);return args?"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function annotate(fn,strictDi,name){var $inject,argDecl,last;if("function"==typeof fn){if(!($inject=fn.$inject)){if($inject=[],fn.length){if(strictDi)throw isString(name)&&name||(name=fn.name||anonFn(fn)),$injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name);argDecl=extractArgs(fn),forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else isArray(fn)?(last=fn.length-1,assertArgFn(fn[last],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0);return $inject}function createInjector(modulesToLoad,strictDi){function supportObject(delegate){return function(key,value){return isObject(key)?void forEach(key,reverseParams(delegate)):delegate(key,value)}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function enforceReturnValue(name,factory){return function(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result))throw $injectorMinErr("undef","Provider '{0}' must return a value from $get factory method.",name);return result}}function factory(name,factoryFn,enforce){return provider(name,{$get:enforce!==!1?enforceReturnValue(name,factoryFn):factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val),!1)}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){assertArg(isUndefined(modulesToLoad)||isArray(modulesToLoad),"modulesToLoad","not an array");var moduleFn,runBlocks=[];return forEach(modulesToLoad,function(module){function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;i<ii;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}if(!loadedModules.get(module)){loadedModules.put(module,!0);try{isString(module)?(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),runInvokeQueue(moduleFn._invokeQueue),runInvokeQueue(moduleFn._configBlocks)):isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&e.stack.indexOf(e.message)==-1&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName,caller)}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function injectionArgs(fn,locals,serviceName){for(var args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName),i=0,length=$inject.length;i<length;i++){var key=$inject[i];if("string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}return args}function isClass(func){return!(msie<=11)&&("function"==typeof func&&/^(?:class\s|constructor\()/.test(stringifyFn(func)))}function invoke(fn,self,locals,serviceName){"string"==typeof locals&&(serviceName=locals,locals=null);var args=injectionArgs(fn,locals,serviceName);return isArray(fn)&&(fn=fn[fn.length-1]),isClass(fn)?(args.unshift(null),new(Function.prototype.bind.apply(fn,args))):fn.apply(self,args)}function instantiate(Type,locals,serviceName){var ctor=isArray(Type)?Type[Type.length-1]:Type,args=injectionArgs(Type,locals,serviceName);return args.unshift(null),new(Function.prototype.bind.apply(ctor,args))}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}strictDi=strictDi===!0;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap([],(!0)),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){throw angular.isString(caller)&&path.push(caller),$injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},protoInstanceInjector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,void 0,serviceName)}),instanceInjector=protoInstanceInjector;providerCache["$injector"+providerSuffix]={$get:valueFn(protoInstanceInjector)};var runBlocks=loadModules(modulesToLoad);return instanceInjector=protoInstanceInjector.get("$injector"),instanceInjector.strictDi=strictDi,forEach(runBlocks,function(fn){fn&&instanceInjector.invoke(fn)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return Array.prototype.some.call(list,function(element){if("a"===nodeName_(element))return result=element,!0}),result}function getYOffset(){var offset=scroll.yOffset;if(isFunction(offset))offset=offset();else if(isElement(offset)){var elem=offset[0],style=$window.getComputedStyle(elem);offset="fixed"!==style.position?0:elem.getBoundingClientRect().bottom}else isNumber(offset)||(offset=0);return offset}function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=getYOffset();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else $window.scrollTo(0,0)}function scroll(hash){hash=isString(hash)?hash:$location.hash();var elm;hash?(elm=document.getElementById(hash))?scrollTo(elm):(elm=getFirstAnchor(document.getElementsByName(hash)))?scrollTo(elm):"top"===hash&&scrollTo(null):scrollTo(null)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(newVal,oldVal){newVal===oldVal&&""===newVal||jqLiteDocumentLoaded(function(){$rootScope.$evalAsync(scroll)})}),scroll}]}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function extractElementNode(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE)return elm}}function splitClasses(classes){isString(classes)&&(classes=classes.split(" "));var obj=createMap();return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}function prepareAnimateOptions(options){return isObject(options)?options:{}}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(outstandingRequestCount--,0===outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function getHash(url){var index=url.indexOf("#");return index===-1?"":url.substr(index)}function cacheStateAndFireUrlChange(){pendingLocation=null,cacheState(),fireUrlChange()}function cacheState(){cachedState=getCurrentState(),cachedState=isUndefined(cachedState)?null:cachedState,equals(cachedState,lastCachedState)&&(cachedState=lastCachedState),lastCachedState=cachedState}function fireUrlChange(){lastBrowserUrl===self.url()&&lastHistoryState===cachedState||(lastBrowserUrl=self.url(),lastHistoryState=cachedState,forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState)}))}var self=this,location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find("base"),pendingLocation=null,getCurrentState=$sniffer.history?function(){try{return history.state}catch(e){}}:noop;cacheState(),lastHistoryState=cachedState,self.url=function(url,replace,state){if(isUndefined(state)&&(state=null),location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){var sameState=lastHistoryState===state;if(lastBrowserUrl===url&&(!$sniffer.history||sameState))return self;var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);return lastBrowserUrl=url,lastHistoryState=state,!$sniffer.history||sameBase&&sameState?(sameBase||(pendingLocation=url),replace?location.replace(url):sameBase?location.hash=getHash(url):location.href=url,location.href!==url&&(pendingLocation=url)):(history[replace?"replaceState":"pushState"](state,"",url),cacheState(),lastHistoryState=cachedState),pendingLocation&&(pendingLocation=url),self}return pendingLocation||location.href.replace(/%27/g,"'")},self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=!1,lastCachedState=null;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",cacheStateAndFireUrlChange),jqLite(window).on("hashchange",cacheStateAndFireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$applicationDestroyed=function(){jqLite(window).off("hashchange popstate",cacheStateAndFireUrlChange)},self.$$checkUrlChange=fireUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?\:)?\/\/[^\/]*/,""):""},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return!!pendingDeferIds[deferId]&&(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0)}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),freshEnd=entry,freshEnd.n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data=createMap(),capacity=options&&options.capacity||Number.MAX_VALUE,lruHash=createMap(),freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(!isUndefined(value)){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry)}return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value}},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}key in data&&(delete data[key],size--)},removeAll:function(){data=createMap(),size=0,lruHash=createMap(),freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function UNINITIALIZED_VALUE(){}function $CompileProvider($provide,$$sanitizeUriProvider){function parseIsolateBindings(scope,directiveName,isController){var LOCAL_REGEXP=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,bindings=createMap();return forEach(scope,function(definition,scopeName){if(definition in bindingCache)return void(bindings[scopeName]=bindingCache[definition]);var match=definition.match(LOCAL_REGEXP);if(!match)throw $compileMinErr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition,isController?"controller bindings definition":"isolate scope definition");bindings[scopeName]={mode:match[1][0],collection:"*"===match[2],optional:"?"===match[3],attrName:match[4]||scopeName},match[4]&&(bindingCache[definition]=bindings[scopeName])}),bindings}function parseDirectiveBindings(directive,directiveName){var bindings={isolateScope:null,bindToController:null};if(isObject(directive.scope)&&(directive.bindToController===!0?(bindings.bindToController=parseIsolateBindings(directive.scope,directiveName,!0),bindings.isolateScope={}):bindings.isolateScope=parseIsolateBindings(directive.scope,directiveName,!1)),isObject(directive.bindToController)&&(bindings.bindToController=parseIsolateBindings(directive.bindToController,directiveName,!0)),isObject(bindings.bindToController)){var controller=directive.controller,controllerAs=directive.controllerAs;if(!controller)throw $compileMinErr("noctrl","Cannot bind to controller without directive '{0}'s controller.",directiveName);if(!identifierForController(controller,controllerAs))throw $compileMinErr("noident","Cannot bind to controller without identifier for directive '{0}'.",directiveName)}return bindings}function assertValidDirectiveName(name){var letter=name.charAt(0);if(!letter||letter!==lowercase(letter))throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",name);if(name!==name.trim())throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",name)}function getDirectiveRequire(directive){var require=directive.require||directive.controller&&directive.name;return!isArray(require)&&isObject(require)&&forEach(require,function(value,key){var match=value.match(REQUIRE_PREFIX_REGEXP),name=value.substring(match[0].length);name||(require[key]=match[0]+key)}),require}var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w\-]+)(?:\:([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=makeMap("ngSrc,ngSrcset,src,srcset"),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/,bindingCache=createMap();this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(assertValidDirectiveName(name),assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=getDirectiveRequire(directive),directive.restrict=directive.restrict||"EA",directive.$$moduleName=directiveFactory.$$moduleName,directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.component=function(name,options){function factory($injector){function makeInjectable(fn){return isFunction(fn)||isArray(fn)?function(tElement,tAttrs){return $injector.invoke(fn,this,{$element:tElement,$attrs:tAttrs})}:fn}var template=options.template||options.templateUrl?options.template:"",ddo={controller:controller,controllerAs:identifierForController(options.controller)||options.controllerAs||"$ctrl",template:makeInjectable(template),templateUrl:makeInjectable(options.templateUrl),transclude:options.transclude,scope:{},bindToController:options.bindings||{},restrict:"E",require:options.require};return forEach(options,function(val,key){"$"===key.charAt(0)&&(ddo[key]=val)}),ddo}var controller=options.controller||function(){};return forEach(options,function(val,key){"$"===key.charAt(0)&&(factory[key]=val,isFunction(controller)&&(controller[key]=val))}),factory.$inject=["$injector"],this.directive(name,factory)},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){return isDefined(enabled)?(debugInfoEnabled=enabled,this):debugInfoEnabled};var TTL=10;this.onChangesTtl=function(value){return arguments.length?(TTL=value,this):TTL},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$sce,$animate,$$sanitizeUri){function flushOnChangesQueue(){try{if(!--onChangesTtl)throw onChangesQueue=void 0,$compileMinErr("infchng","{0} $onChanges() iterations reached. Aborting!\n",TTL);$rootScope.$apply(function(){for(var errors=[],i=0,ii=onChangesQueue.length;i<ii;++i)try{onChangesQueue[i]()}catch(e){errors.push(e)}if(onChangesQueue=void 0,errors.length)throw errors})}finally{onChangesTtl++}}function Attributes(element,attributesToCopy){if(attributesToCopy){var i,l,key,keys=Object.keys(attributesToCopy);for(i=0,l=keys.length;i<l;i++)key=keys[i],this[key]=attributesToCopy[key]}else this.$attr={};this.$$element=element}function setSpecialAttr(element,attrName,value){specialAttrHolder.innerHTML="<span "+attrName+">";var attributes=specialAttrHolder.firstChild.attributes,attribute=attributes[0];attributes.removeNamedItem(attribute.name),attribute.value=value,element.attributes.setNamedItem(attribute)}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes));for(var NOT_EMPTY=/\S+/,i=0,len=$compileNodes.length;i<len;i++){var domNode=$compileNodes[i];domNode.nodeType===NODE_TYPE_TEXT&&domNode.nodeValue.match(NOT_EMPTY)&&jqLiteWrapNode(domNode,$compileNodes[i]=window.document.createElement("span"))}var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function(scope,cloneConnectFn,options){assertArg(scope,"scope"),previousCompileContext&&previousCompileContext.needsNewScope&&(scope=scope.$parent.$new()),options=options||{};var parentBoundTranscludeFn=options.parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude&&(parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude),namespace||(namespace=detectNamespaceForChildElements(futureParentElement));var $linkNode;if($linkNode="html"!==namespace?jqLite(wrapTemplate(namespace,jqLite("<div>").append($compileNodes).html())):cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes,transcludeControllers)for(var controllerName in transcludeControllers)$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance);return compile.$$addScopeInfo($linkNode,scope),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),$linkNode}}function detectNamespaceForChildElements(parentElement){var node=parentElement&&parentElement[0];return node&&"foreignobject"!==nodeName_(node)&&toString.call(node).match(/SVG/)?"svg":"html"}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn,stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;for(stableNodeList=new Array(nodeListLength),i=0;i<linkFns.length;i+=3)idx=linkFns[i],stableNodeList[idx]=nodeList[idx]}else stableNodeList=nodeList;for(i=0,ii=linkFns.length;i<ii;)node=stableNodeList[linkFns[i++]],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),compile.$$addScopeInfo(jqLite(node),childScope)):childScope=scope,childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,void 0,parentBoundTranscludeFn)}for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:void 0,ignoreDirective),nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null,nodeLinkFn&&nodeLinkFn.scope&&compile.$$addScopeClass(attrs.$$element),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),(nodeLinkFn||childLinkFn)&&(linkFns.push(i,nodeLinkFn,childLinkFn),linkFnFound=!0,nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn),previousCompileContext=null;return linkFnFound?compositeLinkFn:null}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){function boundTranscludeFn(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){return transcludedScope||(transcludedScope=scope.$new(!1,containingScope),transcludedScope.$$transcluded=!0),transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})}var boundSlots=boundTranscludeFn.$$slots=createMap();for(var slotName in transcludeFn.$$slots)transcludeFn.$$slots[slotName]?boundSlots[slotName]=createBoundTranscludeFn(scope,transcludeFn.$$slots[slotName],previousBoundTranscludeFn):boundSlots[slotName]=null;return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case NODE_TYPE_ELEMENT:addDirective(directives,directiveNormalize(nodeName_(node)),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;j<jj;j++){var attrStartName=!1,attrEndName=!1;attr=nAttrs[j],name=attr.name,value=trim(attr.value),ngAttrName=directiveNormalize(name),(isNgAttr=NG_ATTR_BINDING.test(ngAttrName))&&(name=name.replace(PREFIX_REGEXP,"").substr(8).replace(/_(.)/g,function(match,letter){return letter.toUpperCase()}));var multiElementMatch=ngAttrName.match(MULTI_ELEMENT_DIR_RE);multiElementMatch&&directiveIsMultiElement(multiElementMatch[1])&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),nName=directiveNormalize(name.toLowerCase()),attrsMap[nName]=name,!isNgAttr&&attrs.hasOwnProperty(nName)||(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName,isNgAttr),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}if(className=node.className,isObject(className)&&(className=className.animVal),isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)nName=directiveNormalize(match[2]),addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case NODE_TYPE_TEXT:if(11===msie)for(;node.parentNode&&node.nextSibling&&node.nextSibling.nodeType===NODE_TYPE_TEXT;)node.nodeValue=node.nodeValue+node.nextSibling.nodeValue,node.parentNode.removeChild(node.nextSibling);addTextInterpolateDirective(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue),match&&(nName=directiveNormalize(match[1]),addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2])))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);node.nodeType==NODE_TYPE_ELEMENT&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0)}else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function compilationGenerator(eager,$compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){var compiled;return eager?compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext):function(){return compiled||(compiled=compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext),$compileNodes=transcludeFn=previousCompileContext=null),compiled.apply(this,arguments)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){function controllersBoundTransclude(scope,cloneAttachFn,futureParentElement,slotName){var transcludeControllers;if(isScope(scope)||(slotName=futureParentElement,futureParentElement=cloneAttachFn,cloneAttachFn=scope,scope=void 0),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),futureParentElement||(futureParentElement=hasElementTranscludeDirective?$element.parent():$element),!slotName)return boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);var slotTranscludeFn=boundTranscludeFn.$$slots[slotName];if(slotTranscludeFn)return slotTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);if(isUndefined(slotTranscludeFn))throw $compileMinErr("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',slotName,startingTag($element))}var i,ii,linkFn,isolateScope,controllerScope,elementControllers,transcludeFn,$element,attrs,scopeBindingInfo;compileNode===linkNode?(attrs=templateAttrs,$element=templateAttrs.$$element):($element=jqLite(linkNode),attrs=new Attributes($element,templateAttrs)),controllerScope=scope,newIsolateScopeDirective?isolateScope=scope.$new(!0):newScopeDirective&&(controllerScope=scope.$parent),boundTranscludeFn&&(transcludeFn=controllersBoundTransclude,transcludeFn.$$boundTransclude=boundTranscludeFn,transcludeFn.isSlotFilled=function(slotName){return!!boundTranscludeFn.$$slots[slotName]}),controllerDirectives&&(elementControllers=setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective)),newIsolateScopeDirective&&(compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective))),compile.$$addScopeClass($element,!0),isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,scopeBindingInfo=initializeDirectiveBindings(scope,attrs,isolateScope,isolateScope.$$isolateBindings,newIsolateScopeDirective),scopeBindingInfo.removeWatches&&isolateScope.$on("$destroy",scopeBindingInfo.removeWatches));for(var name in elementControllers){var controllerDirective=controllerDirectives[name],controller=elementControllers[name],bindings=controllerDirective.$$bindings.bindToController;controller.identifier&&bindings?controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective):controller.bindingInfo={};var controllerResult=controller();controllerResult!==controller.instance&&(controller.instance=controllerResult,$element.data("$"+controllerDirective.name+"Controller",controllerResult),controller.bindingInfo.removeWatches&&controller.bindingInfo.removeWatches(),controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective))}for(forEach(controllerDirectives,function(controllerDirective,name){var require=controllerDirective.require;controllerDirective.bindToController&&!isArray(require)&&isObject(require)&&extend(elementControllers[name].instance,getControllers(name,require,$element,elementControllers))}),forEach(elementControllers,function(controller){var controllerInstance=controller.instance;if(isFunction(controllerInstance.$onChanges))try{controllerInstance.$onChanges(controller.bindingInfo.initialChanges)}catch(e){$exceptionHandler(e)}if(isFunction(controllerInstance.$onInit))try{controllerInstance.$onInit()}catch(e){$exceptionHandler(e)}isFunction(controllerInstance.$onDestroy)&&controllerScope.$on("$destroy",function(){controllerInstance.$onDestroy()})}),i=0,ii=preLinkFns.length;i<ii;i++)linkFn=preLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,void 0,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)linkFn=postLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);forEach(elementControllers,function(controller){var controllerInstance=controller.instance;isFunction(controllerInstance.$postLink)&&controllerInstance.$postLink()})}previousCompileContext=previousCompileContext||{};for(var directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,newScopeDirective=previousCompileContext.newScopeDirective,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,didScanForMultipleTransclusion=!1,mightHaveMultipleTransclusionError=!1,i=0,ii=directives.length;i<ii;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=void 0,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(directive.templateUrl||(isObject(directiveValue)?(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode),newIsolateScopeDirective=directive):assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)),newScopeDirective=newScopeDirective||directive),directiveName=directive.name,!didScanForMultipleTransclusion&&(directive.replace&&(directive.templateUrl||directive.template)||directive.transclude&&!directive.$$tlb)){for(var candidateDirective,scanningIndex=i+1;candidateDirective=directives[scanningIndex++];)if(candidateDirective.transclude&&!candidateDirective.$$tlb||candidateDirective.replace&&(candidateDirective.templateUrl||candidateDirective.template)){mightHaveMultipleTransclusionError=!0;break}didScanForMultipleTransclusion=!0}if(!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||createMap(),assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),directiveValue=directive.transclude)if(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"==directiveValue)hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(compile.$$createComment(directiveName,templateAttrs[directiveName])),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),$template[0].$$parentNode=$template[0].parentNode,childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective});else{var slots=createMap();if($template=jqLite(jqLiteClone(compileNode)).contents(),isObject(directiveValue)){$template=[];var slotMap=createMap(),filledSlots=createMap();forEach(directiveValue,function(elementSelector,slotName){var optional="?"===elementSelector.charAt(0);elementSelector=optional?elementSelector.substring(1):elementSelector,slotMap[elementSelector]=slotName,slots[slotName]=null,filledSlots[slotName]=optional}),forEach($compileNode.contents(),function(node){var slotName=slotMap[directiveNormalize(nodeName_(node))];slotName?(filledSlots[slotName]=!0,slots[slotName]=slots[slotName]||[],slots[slotName].push(node)):$template.push(node)}),forEach(filledSlots,function(filled,slotName){if(!filled)throw $compileMinErr("reqslot","Required transclusion slot `{0}` was not filled.",slotName)});for(var slotName in slots)slots[slotName]&&(slots[slotName]=compilationGenerator(mightHaveMultipleTransclusionError,slots[slotName],transcludeFn))}$compileNode.empty(),childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,void 0,void 0,{needsNewScope:directive.$$isolateScope||directive.$$newScope}),childTranscludeFn.$$slots=slots}if(directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));(newIsolateScopeDirective||newScopeDirective)&&markDirectiveScope(templateDirectives,newIsolateScopeDirective,newScopeDirective),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newScopeDirective:newScopeDirective!==directive&&newScopeDirective,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn);var context=directive.$$originalDirective||directive;isFunction(linkFn)?addLinkFns(null,bind(context,linkFn),attrStart,attrEnd):linkFn&&addLinkFns(bind(context,linkFn.pre),bind(context,linkFn.post),attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===!0,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn}function getControllers(directiveName,require,$element,elementControllers){var value;if(isString(require)){var match=require.match(REQUIRE_PREFIX_REGEXP),name=require.substring(match[0].length),inheritType=match[1]||match[3],optional="?"===match[2];if("^^"===inheritType?$element=$element.parent():(value=elementControllers&&elementControllers[name],value=value&&value.instance),!value){var dataName="$"+name+"Controller";value=inheritType?$element.inheritedData(dataName):$element.data(dataName)}if(!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",name,directiveName)}else if(isArray(require)){value=[];for(var i=0,ii=require.length;i<ii;i++)value[i]=getControllers(directiveName,require[i],$element,elementControllers)}else isObject(require)&&(value={},forEach(require,function(controller,property){value[property]=getControllers(directiveName,controller,$element,elementControllers)}));return value||null}function setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective){var elementControllers=createMap();for(var controllerKey in controllerDirectives){var directive=controllerDirectives[controllerKey],locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn},controller=directive.controller;"@"==controller&&(controller=attrs[directive.name]);var controllerInstance=$controller(controller,locals,!0,directive.controllerAs);elementControllers[directive.name]=controllerInstance,$element.data("$"+directive.name+"Controller",controllerInstance.instance)}return elementControllers}function markDirectiveScope(directives,isolateScope,newScope){for(var j=0,jj=directives.length;j<jj;j++)directives[j]=inherit(directives[j],{$$isolateScope:isolateScope,$$newScope:newScope})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++)try{if(directive=directives[i],(isUndefined(maxPriority)||maxPriority>directive.priority)&&directive.restrict.indexOf(location)!=-1){if(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),!directive.$$bindings){var bindings=directive.$$bindings=parseDirectiveBindings(directive,directive.name);isObject(bindings.isolateScope)&&(directive.$$isolateBindings=bindings.isolateScope)}tDirectives.push(directive),match=directive}}catch(e){$exceptionHandler(e)}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++)if(directive=directives[i],directive.multiElement)return!0;return!1}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr;dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&src[key]!==value&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){dst.hasOwnProperty(key)||"$"===key.charAt(0)||(dst[key]=value,"class"!==key&&"style"!==key&&(dstAttr[key]=srcAttr[key]))})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;return $compileNode.empty(),$templateRequest(templateUrl).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:removeComments(wrapTemplate(templateNamespace,trim(content))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectiveScope(templateDirectives,!0),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(!scope.$$destroyed){if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}}linkQueue=null}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;scope.$$destroyed||(linkQueue?linkQueue.push(scope,node,rootElement,childBoundTranscludeFn):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn)))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){function wrapModuleNameIfDefined(moduleName){return moduleName?" (module: "+moduleName+")":""}if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",previousDirective.name,wrapModuleNameIfDefined(previousDirective.$$moduleName),directive.name,wrapModuleNameIfDefined(directive.$$moduleName),what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;return hasCompileParent&&compile.$$addBindingClass(templateNodeParent),function(scope,node){var parent=node.parent();hasCompileParent||compile.$$addBindingClass(parent),compile.$$addBindingInfo(parent,interpolateFn.expressions),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}function wrapTemplate(type,template){switch(type=lowercase(type||"html")){case"svg":case"math":var wrapper=window.document.createElement("div");return wrapper.innerHTML="<"+type+">"+template+"</"+type+">",wrapper.childNodes[0].childNodes;default:return template}}function getTrustedContext(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"form"==tag&&"action"==attrNormalizedName||"img"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name,allOrNothing){var trustedContext=getTrustedContext(node,name);allOrNothing=ALL_OR_NOTHING_ATTRS[name]||allOrNothing;var interpolateFn=$interpolate(value,!0,trustedContext,allOrNothing);if(interpolateFn){if("multiple"===name&&"select"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers=createMap());if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var newValue=attr[name];newValue!==value&&(interpolateFn=newValue&&$interpolate(newValue,!0,trustedContext,allOrNothing),value=newValue),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;i<ii;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;j<jj;j++,j2++)j2<jj?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1,$rootElement.context===firstElementToRemove&&($rootElement.context=newNode);break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=window.document.createDocumentFragment();for(i=0;i<removeCount;i++)fragment.appendChild(elementsToRemove[i]);for(jqLite.hasData(firstElementToRemove)&&(jqLite.data(newNode,jqLite.data(firstElementToRemove)),jqLite(firstElementToRemove).off("$destroy")),jqLite.cleanData(fragment.querySelectorAll("*")),i=1;i<removeCount;i++)delete elementsToRemove[i];elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}function initializeDirectiveBindings(scope,attrs,destination,bindings,directive){function recordChanges(key,currentValue,previousValue){isFunction(destination.$onChanges)&&currentValue!==previousValue&&(onChangesQueue||(scope.$$postDigest(flushOnChangesQueue),onChangesQueue=[]),changes||(changes={},onChangesQueue.push(triggerOnChangesHook)),changes[key]&&(previousValue=changes[key].previousValue),changes[key]=new SimpleChange(previousValue,currentValue))}function triggerOnChangesHook(){destination.$onChanges(changes),changes=void 0}var changes,removeWatchCollection=[],initialChanges={};return forEach(bindings,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,removeWatch,attrName=definition.attrName,optional=definition.optional,mode=definition.mode;switch(mode){case"@":optional||hasOwnProperty.call(attrs,attrName)||(destination[scopeName]=attrs[attrName]=void 0),attrs.$observe(attrName,function(value){if(isString(value)||isBoolean(value)){var oldValue=destination[scopeName];recordChanges(scopeName,value,oldValue),destination[scopeName]=value}}),attrs.$$observers[attrName].$$scope=scope,lastValue=attrs[attrName],isString(lastValue)?destination[scopeName]=$interpolate(lastValue)(scope):isBoolean(lastValue)&&(destination[scopeName]=lastValue),initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]);break;case"=":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b||a!==a&&b!==b},parentSet=parentGet.assign||function(){throw lastValue=destination[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",attrs[attrName],attrName,directive.name)},lastValue=destination[scopeName]=parentGet(scope);var parentValueWatch=function(parentValue){return compare(parentValue,destination[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=destination[scopeName]):destination[scopeName]=parentValue),lastValue=parentValue};parentValueWatch.$stateful=!0,removeWatch=definition.collection?scope.$watchCollection(attrs[attrName],parentValueWatch):scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal),removeWatchCollection.push(removeWatch);break;case"<":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]);var initialValue=destination[scopeName]=parentGet(scope);initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]),removeWatch=scope.$watch(parentGet,function(newValue,oldValue){if(oldValue===newValue){if(oldValue===initialValue)return;oldValue=initialValue}recordChanges(scopeName,newValue,oldValue),destination[scopeName]=newValue},parentGet.literal),removeWatchCollection.push(removeWatch);break;case"&":if(parentGet=attrs.hasOwnProperty(attrName)?$parse(attrs[attrName]):noop,parentGet===noop&&optional)break;destination[scopeName]=function(locals){return parentGet(scope,locals)}}}),{initialChanges:initialChanges,removeWatches:removeWatchCollection.length&&function(){for(var i=0,ii=removeWatchCollection.length;i<ii;++i)removeWatchCollection[i]()}}}var onChangesQueue,SIMPLE_ATTR_NAME=/^\w/,specialAttrHolder=window.document.createElement("div"),onChangesTtl=TTL;Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);toAdd&&toAdd.length&&$animate.addClass(this.$$element,toAdd);var toRemove=tokenDifference(oldClasses,newClasses);toRemove&&toRemove.length&&$animate.removeClass(this.$$element,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,node=this.$$element[0],booleanKey=getBooleanAttrName(node,key),aliasedKey=getAliasedAttrName(key),observer=key;if(booleanKey?(this.$$element.prop(key,value),attrName=booleanKey):aliasedKey&&(this[aliasedKey]=value,observer=aliasedKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key],attrName||(this.$attr[key]=attrName=snake_case(key,"-"))),nodeName=nodeName_(this.$$element),"a"===nodeName&&("href"===key||"xlinkHref"===key)||"img"===nodeName&&"src"===key)this[key]=value=$$sanitizeUri(value,"src"===key);else if("img"===nodeName&&"srcset"===key&&isDefined(value)){for(var result="",trimmedSrcset=trim(value),srcPattern=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,pattern=/\s/.test(trimmedSrcset)?srcPattern:/(,)/,rawUris=trimmedSrcset.split(pattern),nbrUrisWith2parts=Math.floor(rawUris.length/2),i=0;i<nbrUrisWith2parts;i++){var innerIdx=2*i;result+=$$sanitizeUri(trim(rawUris[innerIdx]),!0),result+=" "+trim(rawUris[innerIdx+1])}var lastTuple=trim(rawUris[2*i]).split(/\s/);result+=$$sanitizeUri(trim(lastTuple[0]),!0),2===lastTuple.length&&(result+=" "+trim(lastTuple[1])),this[key]=value=result}writeAttr!==!1&&(null===value||isUndefined(value)?this.$$element.removeAttr(attrName):SIMPLE_ATTR_NAME.test(attrName)?this.$$element.attr(attrName,value):setSpecialAttr(this.$$element[0],attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers=createMap()),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){listeners.$$inter||!attrs.hasOwnProperty(key)||isUndefined(attrs[key])||fn(attrs[key])}),function(){arrayRemove(listeners,fn)}}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol&&"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/,MULTI_ELEMENT_DIR_RE=/^(.+)Start$/;return compile.$$addBindingInfo=debugInfoEnabled?function($element,binding){var bindings=$element.data("$binding")||[];isArray(binding)?bindings=bindings.concat(binding):bindings.push(binding),$element.data("$binding",bindings)}:noop,compile.$$addBindingClass=debugInfoEnabled?function($element){safeAddClass($element,"ng-binding")}:noop,compile.$$addScopeInfo=debugInfoEnabled?function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop,compile.$$addScopeClass=debugInfoEnabled?function($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop,compile.$$createComment=function(directiveName,comment){var content="";return debugInfoEnabled&&(content=" "+(directiveName||"")+": ",comment&&(content+=comment+" ")),window.document.createComment(content)},compile}]}function SimpleChange(previous,current){this.previousValue=previous,this.currentValue=current}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function removeComments(jqNodes){jqNodes=jqLite(jqNodes);var i=jqNodes.length;if(i<=1)return jqNodes;for(;i--;){var node=jqNodes[i];node.nodeType===NODE_TYPE_COMMENT&&splice.call(jqNodes,i,1)}return jqNodes}function identifierForController(controller,ident){if(ident&&isString(ident))return ident;if(isString(controller)){var match=CNTRL_REG.exec(controller);if(match)return match[3]}}function $ControllerProvider(){var controllers={},globals=!1;this.has=function(name){return controllers.hasOwnProperty(name)},this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.allowGlobals=function(){globals=!0},this.$get=["$injector","$window",function($injector,$window){function addIdentifier(locals,identifier,instance,name){if(!locals||!isObject(locals.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);locals.$scope[identifier]=instance}return function(expression,locals,later,ident){var instance,match,constructor,identifier;if(later=later===!0,ident&&isString(ident)&&(identifier=ident),isString(expression)){if(match=expression.match(CNTRL_REG),!match)throw $controllerMinErr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",expression);constructor=match[1],identifier=identifier||match[3],expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||(globals?getter($window,constructor,!0):void 0),assertArgFn(expression,constructor,!0)}if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;instance=Object.create(controllerPrototype||null),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name);var instantiate;return instantiate=extend(function(){var result=$injector.invoke(expression,instance,locals,constructor);return result!==instance&&(isObject(result)||isFunction(result))&&(instance=result,identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name)),instance},{instance:instance,identifier:identifier})}return instance=$injector.instantiate(expression,locals,constructor),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}function serializeValue(v){return isObject(v)?isDate(v)?v.toISOString():toJson(v):v}function $HttpParamSerializerProvider(){this.$get=function(){return function(params){if(!params)return"";var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)?forEach(value,function(v){parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(v)))}):parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(value))))}),parts.join("&")}}}function $HttpParamSerializerJQLikeProvider(){this.$get=function(){return function(params){function serialize(toSerialize,prefix,topLevel){null===toSerialize||isUndefined(toSerialize)||(isArray(toSerialize)?forEach(toSerialize,function(value,index){serialize(value,prefix+"["+(isObject(value)?index:"")+"]")}):isObject(toSerialize)&&!isDate(toSerialize)?forEachSorted(toSerialize,function(value,key){serialize(value,prefix+(topLevel?"":"[")+key+(topLevel?"":"]"))}):parts.push(encodeUriQuery(prefix)+"="+encodeUriQuery(serializeValue(toSerialize))))}if(!params)return"";var parts=[];return serialize(params,"",!0),parts.join("&")}}}function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,"").trim();if(tempData){var contentType=headers("Content-Type");(contentType&&0===contentType.indexOf(APPLICATION_JSON)||isJsonLike(tempData))&&(data=fromJson(tempData))}}return data}function isJsonLike(str){var jsonStart=str.match(JSON_START);return jsonStart&&JSON_ENDS[jsonStart[0]].test(str)}function parseHeaders(headers){function fillInParsed(key,val){key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}var i,parsed=createMap();return isString(headers)?forEach(headers.split("\n"),function(line){i=line.indexOf(":"),fillInParsed(lowercase(trim(line.substr(0,i))),trim(line.substr(i+1)))}):isObject(headers)&&forEach(headers,function(headerVal,headerKey){fillInParsed(lowercase(headerKey),trim(headerVal))}),parsed}function headersGetter(headers){var headersObj;return function(name){if(headersObj||(headersObj=parseHeaders(headers)),name){var value=headersObj[lowercase(name)];return void 0===value&&(value=null),value}return headersObj}}function transformData(data,headers,status,fns){return isFunction(fns)?fns(data,headers,status):(forEach(fns,function(fn){data=fn(data,headers,status)}),data)}function isSuccess(status){return 200<=status&&status<300}function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return!isObject(d)||isFile(d)||isBlob(d)||isFormData(d)?d:toJson(d)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},useApplyAsync=!1;this.useApplyAsync=function(value){return isDefined(value)?(useApplyAsync=!!value,this):useApplyAsync};var useLegacyPromise=!0;this.useLegacyPromiseExtensions=function(value){return isDefined(value)?(useLegacyPromise=!!value,this):useLegacyPromise};var interceptorFactories=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$$cookieReader,$cacheFactory,$rootScope,$q,$injector){function $http(requestConfig){function transformResponse(response){var resp=extend({},response);return resp.data=transformData(response.data,response.headers,response.status,config.transformResponse),isSuccess(response.status)?resp:$q.reject(resp)}function executeHeaderFns(headers,config){var headerContent,processedHeaders={};return forEach(headers,function(headerFn,header){isFunction(headerFn)?(headerContent=headerFn(config),null!=headerContent&&(processedHeaders[header]=headerContent)):processedHeaders[header]=headerFn}),processedHeaders}function mergeHeaders(config){var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return executeHeaderFns(reqHeaders,shallowCopy(config))}if(!isObject(requestConfig))throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",requestConfig);if(!isString(requestConfig.url))throw minErr("$http")("badreq","Http request configuration url must be a string.  Received: {0}",requestConfig.url);var config=extend({method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse,paramSerializer:defaults.paramSerializer},requestConfig);config.headers=mergeHeaders(requestConfig),config.method=uppercase(config.method),config.paramSerializer=isString(config.paramSerializer)?$injector.get(config.paramSerializer):config.paramSerializer;var serverRequest=function(config){var headers=config.headers,reqData=transformData(config.data,headersGetter(headers),void 0,config.transformRequest);return isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData).then(transformResponse,transformResponse)},chain=[serverRequest,void 0],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return useLegacyPromise?(promise.success=function(fn){return assertArgFn(fn,"fn"),promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return assertArgFn(fn,"fn"),promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise}):(promise.success=$httpMinErrLegacyFn("success"),promise.error=$httpMinErrLegacyFn("error")),promise}function createShortMethods(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend({},config||{},{method:name,url:url}))}})}function createShortMethodsWithData(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend({},config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData){function createApplyHandlers(eventHandlers){if(eventHandlers){var applyHandlers={};return forEach(eventHandlers,function(eventHandler,key){applyHandlers[key]=function(event){function callEventHandler(){eventHandler(event)}useApplyAsync?$rootScope.$applyAsync(callEventHandler):$rootScope.$$phase?callEventHandler():$rootScope.$apply(callEventHandler)}}),applyHandlers}}function done(status,response,headersString,statusText){function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText)}cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url)),useApplyAsync?$rootScope.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),$rootScope.$$phase||$rootScope.$apply())}function resolvePromise(response,status,headers,statusText){status=status>=-1?status:0,(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText)}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);idx!==-1&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,reqHeaders=config.headers,url=buildUrl(config.url,config.paramSerializer(config.params));if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||config.cache===!1||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache&&(cachedResp=cache.get(url),isDefined(cachedResp)?isPromiseLike(cachedResp)?cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult):isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK"):cache.put(url,promise)),isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$$cookieReader()[config.xsrfCookieName||defaults.xsrfCookieName]:void 0;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType,createApplyHandlers(config.eventHandlers),createApplyHandlers(config.uploadEventHandlers))}return promise}function buildUrl(url,serializedParams){return serializedParams.length>0&&(url+=(url.indexOf("?")==-1?"?":"&")+serializedParams),url}var defaultCache=$cacheFactory("$http");defaults.paramSerializer=isString(defaults.paramSerializer)?$injector.get(defaults.paramSerializer):defaults.paramSerializer;var reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),$http.pendingRequests=[],createShortMethods("get","delete","head","jsonp"),createShortMethodsWithData("post","put","patch"),$http.defaults=defaults,$http}]}function $xhrFactoryProvider(){this.$get=function(){return function(){return new window.XMLHttpRequest}}}function $HttpBackendProvider(){this.$get=["$browser","$window","$document","$xhrFactory",function($browser,$window,$document,$xhrFactory){return createHttpBackend($browser,$xhrFactory,$browser.defer,$window.angular.callbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){function jsonpReq(url,callbackId,done){var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){removeEventListenerFn(script,"load",callback),removeEventListenerFn(script,"error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks[callbackId].called||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},addEventListenerFn(script,"load",callback),addEventListenerFn(script,"error",callback),rawDocument.body.appendChild(script),callback}return function(method,url,post,callback,headers,timeout,withCredentials,responseType,eventHandlers,uploadEventHandlers){function timeoutRequest(){jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){isDefined(timeoutId)&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,callback(status,response,headersString,statusText),$browser.$$completeOutstandingRequest(noop)}if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data,callbacks[callbackId].called=!0};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),callbackId,function(status,text){completeRequest(callback,status,callbacks[callbackId].data,"",text),callbacks[callbackId]=noop})}else{var xhr=createXhr(method,url);xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onload=function(){var statusText=xhr.statusText||"",response="response"in xhr?xhr.response:xhr.responseText,status=1223===xhr.status?204:xhr.status;0===status&&(status=response?200:"file"==urlResolve(url).protocol?404:0),completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText)};var requestError=function(){completeRequest(callback,-1,null,null,"")};if(xhr.onerror=requestError,xhr.onabort=requestError,forEach(eventHandlers,function(value,key){xhr.addEventListener(key,value)}),forEach(uploadEventHandlers,function(value,key){xhr.upload.addEventListener(key,value)}),withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(isUndefined(post)?null:post)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function escape(ch){return"\\\\\\"+ch}function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function stringify(value){if(null==value)return"";switch(typeof value){case"string":break;case"number":value=""+value;break;default:value=toJson(value)}return value}function constantWatchDelegate(scope,listener,objectEquality,constantInterp){var unwatch;return unwatch=scope.$watch(function(scope){return unwatch(),constantInterp(scope)},listener,objectEquality)}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){function parseStringifyInterceptor(value){try{return value=getValue(value),allOrNothing&&!isDefined(value)?value:stringify(value)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}}if(!text.length||text.indexOf(startSymbol)===-1){var constantInterp;if(!mustHaveExpression){var unescapedText=unescapeText(text);constantInterp=valueFn(unescapedText),constantInterp.exp=text,constantInterp.expressions=[],constantInterp.$$watchDelegate=constantWatchDelegate}return constantInterp}allOrNothing=!!allOrNothing;for(var startIndex,endIndex,exp,index=0,expressions=[],parseFns=[],textLength=text.length,concat=[],expressionPositions=[];index<textLength;){if((startIndex=text.indexOf(startSymbol,index))==-1||(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))==-1){index!==textLength&&concat.push(unescapeText(text.substring(index)));break}index!==startIndex&&concat.push(unescapeText(text.substring(index,startIndex))),exp=text.substring(startIndex+startSymbolLength,endIndex),expressions.push(exp),parseFns.push($parse(exp,parseStringifyInterceptor)),index=endIndex+endSymbolLength,expressionPositions.push(concat.length),concat.push("")}if(trustedContext&&concat.length>1&&$interpolateMinErr.throwNoconcat(text),!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;i<ii;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return concat.join("")},getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value)};return extend(function(context){var i=0,ii=expressions.length,values=new Array(ii);try{for(;i<ii;i++)values[i]=parseFns[i](context);return compute(values)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener){var lastValue;return scope.$watchGroup(parseFns,function(values,oldValues){var currValue=compute(values);isFunction(listener)&&listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope),lastValue=currValue})}})}}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q","$browser",function($rootScope,$window,$q,$$q,$browser){function interval(fn,delay,count,invokeApply){function callback(){hasParams?fn.apply(null,args):fn(iteration)}var hasParams=arguments.length>4,args=hasParams?sliceArgs(arguments,4):[],setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=isDefined(count)?count:0,promise.$$intervalId=setInterval(function(){skipApply?$browser.defer(callback):$rootScope.$evalAsync(callback),deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return!!(promise&&promise.$$intervalId in intervals)&&(intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0)},interval}]}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=toInt(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function startsWith(haystack,needle){return 0===haystack.lastIndexOf(needle,0)}function stripBaseUrl(base,url){if(startsWith(url,base))return url.substr(base.length)}function stripHash(url){var index=url.indexOf("#");return index==-1?url:url.substr(0,index)}function trimEmptyHash(url){return url.replace(/(#.+)|#$/,"$1")}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,appBaseNoFile,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"",parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var pathUrl=stripBaseUrl(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var appUrl,prevAppUrl,rewrittenUrl;return isDefined(appUrl=stripBaseUrl(appBase,url))?(prevAppUrl=appUrl,rewrittenUrl=isDefined(appUrl=stripBaseUrl(basePrefix,appUrl))?appBaseNoFile+(stripBaseUrl("/",appUrl)||appUrl):appBase+prevAppUrl):isDefined(appUrl=stripBaseUrl(appBaseNoFile,url))?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile==url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl}}function LocationHashbangUrl(appBase,appBaseNoFile,hashPrefix){parseAbsoluteUrl(appBase,this),this.$$parse=function(url){function removeWindowsDriveName(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;return startsWith(url,base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path),firstPathSegmentMatch?firstPathSegmentMatch[1]:path)}var withoutHashUrl,withoutBaseUrl=stripBaseUrl(appBase,url)||stripBaseUrl(appBaseNoFile,url);isUndefined(withoutBaseUrl)||"#"!==withoutBaseUrl.charAt(0)?this.$$html5?withoutHashUrl=withoutBaseUrl:(withoutHashUrl="",isUndefined(withoutBaseUrl)&&(appBase=url,this.replace())):(withoutHashUrl=stripBaseUrl(hashPrefix,withoutBaseUrl),isUndefined(withoutHashUrl)&&(withoutHashUrl=withoutBaseUrl)),parseAppUrl(withoutHashUrl,this),this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$parseLinkUrl=function(url,relHref){return stripHash(appBase)==stripHash(url)&&(this.$$parse(url),!0)}}function LocationHashbangInHtml5Url(appBase,appBaseNoFile,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments),this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var rewrittenUrl,appUrl;return appBase==stripHash(url)?rewrittenUrl=url:(appUrl=stripBaseUrl(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isBoolean(mode)?(html5Mode.enabled=mode,this):isObject(mode)?(isBoolean(mode.enabled)&&(html5Mode.enabled=mode.enabled),isBoolean(mode.requireBase)&&(html5Mode.requireBase=mode.requireBase),isBoolean(mode.rewriteLinks)&&(html5Mode.rewriteLinks=mode.rewriteLinks),this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function($rootScope,$browser,$sniffer,$rootElement,$window){function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url(),oldState=$location.$$state;try{$browser.url(url,replace,state),$location.$$state=$browser.state()}catch(e){throw $location.url(oldUrl),$location.$$state=oldState,e}}function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl,$location.$$state,oldState)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase)throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!");appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl;var appBaseNoFile=stripFile(appBase);$location=new LocationMode(appBase,appBaseNoFile,"#"+hashPrefix),$location.$$parseLinkUrl(initialUrl,initialUrl),$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;$rootElement.on("click",function(event){if(html5Mode.rewriteLinks&&!event.ctrlKey&&!event.metaKey&&!event.shiftKey&&2!=event.which&&2!=event.button){for(var elm=jqLite(event.target);"a"!==nodeName_(elm[0]);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!=$browser.url()&&($rootScope.$apply(),$window.angular["ff-684208-preventDefault"]=!0))}}),trimEmptyHash($location.absUrl())!=trimEmptyHash(initialUrl)&&$browser.url($location.absUrl(),!0);var initializing=!0;return $browser.onUrlChange(function(newUrl,newState){return isUndefined(stripBaseUrl(appBaseNoFile,newUrl))?void($window.location.href=newUrl):($rootScope.$evalAsync(function(){var defaultPrevented,oldUrl=$location.absUrl(),oldState=$location.$$state;newUrl=trimEmptyHash(newUrl),$location.$$parse(newUrl),$location.$$state=newState,defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,newState,oldState).defaultPrevented,$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState,setBrowserUrlWithFallback(oldUrl,!1,oldState)):(initializing=!1,afterLocationChange(oldUrl,oldState)))}),void($rootScope.$$phase||$rootScope.$digest()))}),$rootScope.$watch(function(){var oldUrl=trimEmptyHash($browser.url()),newUrl=trimEmptyHash($location.absUrl()),oldState=$browser.state(),currentReplace=$location.$$replace,urlOrStateChanged=oldUrl!==newUrl||$location.$$html5&&$sniffer.history&&oldState!==$location.$$state;(initializing||urlOrStateChanged)&&(initializing=!1,$rootScope.$evalAsync(function(){var newUrl=$location.absUrl(),defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState):(urlOrStateChanged&&setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state),afterLocationChange(oldUrl,oldState)))})),$location.$$replace=!1}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&arg.stack.indexOf(arg.message)===-1?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("__defineGetter__"===name||"__defineSetter__"===name||"__lookupGetter__"===name||"__lookupSetter__"===name||"__proto__"===name)throw $parseMinErr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",fullExpression);return name}function getStringValue(name){return name+""}function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.window===obj)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.children&&(obj.nodeName||obj.prop&&obj.attr&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===Object)throw $parseMinErr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}function ensureSafeFunction(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===CALL||obj===APPLY||obj===BIND)throw $parseMinErr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",fullExpression)}}function ensureSafeAssignContext(obj,fullExpression){if(obj&&(obj===(0).constructor||obj===(!1).constructor||obj==="".constructor||obj==={}.constructor||obj===[].constructor||obj===Function.constructor))throw $parseMinErr("isecaf","Assigning to a constructor is disallowed! Expression: {0}",fullExpression)}function ifDefined(v,d){return"undefined"!=typeof v?v:d}function plusFn(l,r){return"undefined"==typeof l?r:"undefined"==typeof r?l:l+r}function isStateless($filter,filterName){var fn=$filter(filterName);return!fn.$stateful}function findConstantAndWatchExpressions(ast,$filter){var allConstants,argsToWatch;switch(ast.type){case AST.Program:allConstants=!0,forEach(ast.body,function(expr){findConstantAndWatchExpressions(expr.expression,$filter),allConstants=allConstants&&expr.expression.constant}),ast.constant=allConstants;break;case AST.Literal:ast.constant=!0,ast.toWatch=[];break;case AST.UnaryExpression:findConstantAndWatchExpressions(ast.argument,$filter),ast.constant=ast.argument.constant,ast.toWatch=ast.argument.toWatch;break;case AST.BinaryExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.left.toWatch.concat(ast.right.toWatch);break;case AST.LogicalExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.ConditionalExpression:findConstantAndWatchExpressions(ast.test,$filter),findConstantAndWatchExpressions(ast.alternate,$filter),findConstantAndWatchExpressions(ast.consequent,$filter),ast.constant=ast.test.constant&&ast.alternate.constant&&ast.consequent.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.Identifier:ast.constant=!1,ast.toWatch=[ast];break;case AST.MemberExpression:findConstantAndWatchExpressions(ast.object,$filter),ast.computed&&findConstantAndWatchExpressions(ast.property,$filter),ast.constant=ast.object.constant&&(!ast.computed||ast.property.constant),ast.toWatch=[ast];break;case AST.CallExpression:allConstants=!!ast.filter&&isStateless($filter,ast.callee.name),argsToWatch=[],forEach(ast.arguments,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=ast.filter&&isStateless($filter,ast.callee.name)?argsToWatch:[ast];break;case AST.AssignmentExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=[ast];break;case AST.ArrayExpression:allConstants=!0,argsToWatch=[],forEach(ast.elements,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ObjectExpression:allConstants=!0,argsToWatch=[],forEach(ast.properties,function(property){findConstantAndWatchExpressions(property.value,$filter),allConstants=allConstants&&property.value.constant&&!property.computed,property.value.constant||argsToWatch.push.apply(argsToWatch,property.value.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ThisExpression:ast.constant=!1,ast.toWatch=[];break;case AST.LocalsExpression:ast.constant=!1,ast.toWatch=[]}}function getInputs(body){if(1==body.length){var lastExpression=body[0].expression,candidate=lastExpression.toWatch;return 1!==candidate.length?candidate:candidate[0]!==lastExpression?candidate:void 0}}function isAssignable(ast){return ast.type===AST.Identifier||ast.type===AST.MemberExpression}function assignableAST(ast){if(1===ast.body.length&&isAssignable(ast.body[0].expression))return{type:AST.AssignmentExpression,left:ast.body[0].expression,right:{type:AST.NGValueParameter},operator:"="}}function isLiteral(ast){return 0===ast.body.length||1===ast.body.length&&(ast.body[0].expression.type===AST.Literal||ast.body[0].expression.type===AST.ArrayExpression||ast.body[0].expression.type===AST.ObjectExpression)}function isConstant(ast){return ast.constant}function ASTCompiler(astBuilder,$filter){this.astBuilder=astBuilder,this.$filter=$filter}function ASTInterpreter(astBuilder,$filter){this.astBuilder=astBuilder,this.$filter=$filter}function isPossiblyDangerousMemberName(name){return"constructor"==name}function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}function $ParseProvider(){var identStart,identContinue,cacheDefault=createMap(),cacheExpensive=createMap(),literals={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(literalName,literalValue){literals[literalName]=literalValue},this.setIdentifierFns=function(identifierStart,identifierContinue){return identStart=identifierStart,identContinue=identifierContinue,this},this.$get=["$filter",function($filter){function $parse(exp,interceptorFn,expensiveChecks){var parsedExpression,oneTime,cacheKey;switch(expensiveChecks=expensiveChecks||runningChecksEnabled,typeof exp){case"string":exp=exp.trim(),cacheKey=exp;var cache=expensiveChecks?cacheExpensive:cacheDefault;if(parsedExpression=cache[cacheKey],!parsedExpression){":"===exp.charAt(0)&&":"===exp.charAt(1)&&(oneTime=!0,exp=exp.substring(2));var parseOptions=expensiveChecks?$parseOptionsExpensive:$parseOptions,lexer=new Lexer(parseOptions),parser=new Parser(lexer,$filter,parseOptions);parsedExpression=parser.parse(exp),parsedExpression.constant?parsedExpression.$$watchDelegate=constantWatchDelegate:oneTime?parsedExpression.$$watchDelegate=parsedExpression.literal?oneTimeLiteralWatchDelegate:oneTimeWatchDelegate:parsedExpression.inputs&&(parsedExpression.$$watchDelegate=inputsWatchDelegate),expensiveChecks&&(parsedExpression=expensiveChecksInterceptor(parsedExpression)),cache[cacheKey]=parsedExpression}return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn)}}function expensiveChecksInterceptor(fn){function expensiveCheckFn(scope,locals,assign,inputs){var expensiveCheckOldValue=runningChecksEnabled;runningChecksEnabled=!0;try{return fn(scope,locals,assign,inputs)}finally{runningChecksEnabled=expensiveCheckOldValue}}if(!fn)return fn;expensiveCheckFn.$$watchDelegate=fn.$$watchDelegate,expensiveCheckFn.assign=expensiveChecksInterceptor(fn.assign),expensiveCheckFn.constant=fn.constant,expensiveCheckFn.literal=fn.literal;for(var i=0;fn.inputs&&i<fn.inputs.length;++i)fn.inputs[i]=expensiveChecksInterceptor(fn.inputs[i]);return expensiveCheckFn.inputs=fn.inputs,expensiveCheckFn}function expressionInputDirtyCheck(newValue,oldValueOfValue){return null==newValue||null==oldValueOfValue?newValue===oldValueOfValue:("object"!=typeof newValue||(newValue=getValueOf(newValue),"object"!=typeof newValue))&&(newValue===oldValueOfValue||newValue!==newValue&&oldValueOfValue!==oldValueOfValue)}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var lastResult,inputExpressions=parsedExpression.inputs;if(1===inputExpressions.length){var oldInputValueOf=expressionInputDirtyCheck;return inputExpressions=inputExpressions[0],scope.$watch(function(scope){var newInputValue=inputExpressions(scope);return expressionInputDirtyCheck(newInputValue,oldInputValueOf)||(lastResult=parsedExpression(scope,void 0,void 0,[newInputValue]),oldInputValueOf=newInputValue&&getValueOf(newInputValue)),lastResult},listener,objectEquality,prettyPrintExpression)}for(var oldInputValueOfValues=[],oldInputValues=[],i=0,ii=inputExpressions.length;i<ii;i++)oldInputValueOfValues[i]=expressionInputDirtyCheck,oldInputValues[i]=null;return scope.$watch(function(scope){for(var changed=!1,i=0,ii=inputExpressions.length;i<ii;i++){var newInputValue=inputExpressions[i](scope);(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i])))&&(oldInputValues[i]=newInputValue,oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue))}return changed&&(lastResult=parsedExpression(scope,void 0,void 0,oldInputValues)),lastResult},listener,objectEquality,prettyPrintExpression)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.apply(this,arguments),isDefined(value)&&scope.$$postDigest(function(){isDefined(lastValue)&&unwatch()})},objectEquality)}function oneTimeLiteralWatchDelegate(scope,listener,objectEquality,parsedExpression){function isAllDefined(value){var allDefined=!0;return forEach(value,function(val){isDefined(val)||(allDefined=!1)}),allDefined}var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.call(this,value,old,scope),isAllDefined(value)&&scope.$$postDigest(function(){isAllDefined(lastValue)&&unwatch()})},objectEquality)}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch;return unwatch=scope.$watch(function(scope){return unwatch(),parsedExpression(scope)},listener,objectEquality)}function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;var watchDelegate=parsedExpression.$$watchDelegate,useInputs=!1,regularWatch=watchDelegate!==oneTimeLiteralWatchDelegate&&watchDelegate!==oneTimeWatchDelegate,fn=regularWatch?function(scope,locals,assign,inputs){var value=useInputs&&inputs?inputs[0]:parsedExpression(scope,locals,assign,inputs);return interceptorFn(value,scope,locals)}:function(scope,locals,assign,inputs){var value=parsedExpression(scope,locals,assign,inputs),result=interceptorFn(value,scope,locals);return isDefined(value)?result:value};return parsedExpression.$$watchDelegate&&parsedExpression.$$watchDelegate!==inputsWatchDelegate?fn.$$watchDelegate=parsedExpression.$$watchDelegate:interceptorFn.$stateful||(fn.$$watchDelegate=inputsWatchDelegate,useInputs=!parsedExpression.inputs,fn.inputs=parsedExpression.inputs?parsedExpression.inputs:[parsedExpression]),fn}var noUnsafeEval=csp().noUnsafeEval,$parseOptions={csp:noUnsafeEval,expensiveChecks:!1,literals:copy(literals),isIdentifierStart:isFunction(identStart)&&identStart,isIdentifierContinue:isFunction(identContinue)&&identContinue},$parseOptionsExpensive={csp:noUnsafeEval,expensiveChecks:!0,literals:copy(literals),isIdentifierStart:isFunction(identStart)&&identStart,isIdentifierContinue:isFunction(identContinue)&&identContinue},runningChecksEnabled=!1;return $parse.$$runningExpensiveChecks=function(){return runningChecksEnabled},$parse}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function $$QProvider(){this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function Promise(){this.$$state={status:0}}function simpleBind(context,fn){return function(value){fn.call(context,value)}}function processQueue(state){var fn,deferred,pending;pending=state.pending,state.processScheduled=!1,state.pending=void 0;for(var i=0,ii=pending.length;i<ii;++i){deferred=pending[i][0],fn=pending[i][state.status];try{isFunction(fn)?deferred.resolve(fn(state.value)):1===state.status?deferred.resolve(state.value):deferred.reject(state.value)}catch(e){deferred.reject(e),exceptionHandler(e)}}}function scheduleProcessQueue(state){!state.processScheduled&&state.pending&&(state.processScheduled=!0,nextTick(function(){processQueue(state)}))}function Deferred(){this.promise=new Promise}function all(promises){var deferred=new Deferred,counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,when(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise}var $qMinErr=minErr("$q",TypeError),defer=function(){var d=new Deferred;return d.resolve=simpleBind(d,d.resolve),d.reject=simpleBind(d,d.reject),d.notify=simpleBind(d,d.notify),d};extend(Promise.prototype,{then:function(onFulfilled,onRejected,progressBack){if(isUndefined(onFulfilled)&&isUndefined(onRejected)&&isUndefined(progressBack))return this;var result=new Deferred;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]),this.$$state.status>0&&scheduleProcessQueue(this.$$state),result.promise},catch:function(callback){return this.then(null,callback)},finally:function(callback,progressBack){return this.then(function(value){return handleCallback(value,!0,callback)},function(error){return handleCallback(error,!1,callback)},progressBack)}}),extend(Deferred.prototype,{resolve:function(val){this.promise.$$state.status||(val===this.promise?this.$$reject($qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val)):this.$$resolve(val))},$$resolve:function(val){function resolvePromise(val){done||(done=!0,that.$$resolve(val))}function rejectPromise(val){done||(done=!0,that.$$reject(val))}var then,that=this,done=!1;try{(isObject(val)||isFunction(val))&&(then=val&&val.then),isFunction(then)?(this.promise.$$state.status=-1,then.call(val,resolvePromise,rejectPromise,simpleBind(this,this.notify))):(this.promise.$$state.value=val,this.promise.$$state.status=1,scheduleProcessQueue(this.promise.$$state))}catch(e){rejectPromise(e),exceptionHandler(e)}},reject:function(reason){this.promise.$$state.status||this.$$reject(reason)},$$reject:function(reason){this.promise.$$state.value=reason,this.promise.$$state.status=2,scheduleProcessQueue(this.promise.$$state)},notify:function(progress){var callbacks=this.promise.$$state.pending;this.promise.$$state.status<=0&&callbacks&&callbacks.length&&nextTick(function(){for(var callback,result,i=0,ii=callbacks.length;i<ii;i++){result=callbacks[i][0],callback=callbacks[i][3];try{result.notify(isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}})}});var reject=function(reason){var result=new Deferred;return result.reject(reason),result.promise},makePromise=function(value,resolved){var result=new Deferred;return resolved?result.resolve(value):result.reject(value),result.promise},handleCallback=function(value,isResolved,callback){var callbackOutput=null;try{isFunction(callback)&&(callbackOutput=callback())}catch(e){return makePromise(e,!1)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)},when=function(value,callback,errback,progressBack){var result=new Deferred;return result.resolve(value),result.promise.then(callback,errback,progressBack)},resolve=when,$Q=function(resolver){function resolveFn(value){deferred.resolve(value)}function rejectFn(reason){deferred.reject(reason)}if(!isFunction(resolver))throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver);var deferred=new Deferred;return resolver(resolveFn,rejectFn),deferred.promise};return $Q.prototype=Promise.prototype,$Q.defer=defer,$Q.reject=reject,$Q.when=when,$Q.resolve=resolve,$Q.all=all,$Q}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){function createChildScopeClass(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=nextUid(),this.$$ChildScope=null}return ChildScope.prototype=parent,ChildScope}var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null,applyAsyncId=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$exceptionHandler","$parse","$browser",function($exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=!0}function cleanUpScope($scope){9===msie&&($scope.$$childHead&&cleanUpScope($scope.$$childHead),$scope.$$nextSibling&&cleanUpScope($scope.$$nextSibling)),$scope.$parent=$scope.$$nextSibling=$scope.$$prevSibling=$scope.$$childHead=$scope.$$childTail=$scope.$root=$scope.$$watchers=null}function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function incrementWatchersCount(current,count){do current.$$watchersCount+=count;while(current=current.$parent)}function decrementListenerCount(current,count,name){do current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name];while(current=current.$parent)}function initWatchVal(){}function flushApplyAsync(){for(;applyAsyncQueue.length;)try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}applyAsyncId=null}function scheduleApplyAsync(){null===applyAsyncId&&(applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)}))}Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;return parent=parent||this,isolate?(child=new Scope,child.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=createChildScopeClass(this)),child=new this.$$ChildScope),child.$parent=parent,child.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=child,parent.$$childTail=child):parent.$$childHead=parent.$$childTail=child,(isolate||parent!=this)&&child.$on("$destroy",destroyChildScope),child},$watch:function(watchExp,listener,objectEquality,prettyPrintExpression){var get=$parse(watchExp);if(get.$$watchDelegate)return get.$$watchDelegate(this,listener,objectEquality,get,watchExp);var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:prettyPrintExpression||watchExp,eq:!!objectEquality};return lastDirtyWatch=null,isFunction(listener)||(watcher.fn=noop),array||(array=scope.$$watchers=[]),array.unshift(watcher),incrementWatchersCount(this,1),function(){arrayRemove(array,watcher)>=0&&incrementWatchersCount(scope,-1),lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){function watchGroupAction(){changeReactionScheduled=!1,firstRun?(firstRun=!1,listener(newValues,newValues,self)):listener(newValues,oldValues,self)}var oldValues=new Array(watchExpressions.length),newValues=new Array(watchExpressions.length),deregisterFns=[],self=this,changeReactionScheduled=!1,firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;return self.$evalAsync(function(){shouldCall&&listener(newValues,newValues,self)}),function(){shouldCall=!1}}return 1===watchExpressions.length?this.$watch(watchExpressions[0],function(value,oldValue,scope){newValues[0]=value,oldValues[0]=oldValue,listener(newValues,value===oldValue?newValues:oldValues,scope)}):(forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function(value,oldValue){newValues[i]=value,oldValues[i]=oldValue,changeReactionScheduled||(changeReactionScheduled=!0,self.$evalAsync(watchGroupAction))});deregisterFns.push(unwatchFn)}),function(){for(;deregisterFns.length;)deregisterFns.shift()()})},$watchCollection:function(obj,listener){function $watchCollectionInterceptor(_value){newValue=_value;var newLength,key,bothNaN,newItem,oldItem;if(!isUndefined(newValue)){if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldValue=internalArray,oldLength=oldValue.length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;i<newLength;i++)oldItem=oldValue[i],newItem=newValue[i],bothNaN=oldItem!==oldItem&&newItem!==newItem,bothNaN||oldItem===newItem||(changeDetected++,oldValue[i]=newItem)}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)hasOwnProperty.call(newValue,key)&&(newLength++,newItem=newValue[key],oldItem=oldValue[key],key in oldValue?(bothNaN=oldItem!==oldItem&&newItem!==newItem,bothNaN||oldItem===newItem||(changeDetected++,oldValue[key]=newItem)):(oldLength++,oldValue[key]=newItem,changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)hasOwnProperty.call(newValue,key)||(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}}function $watchCollectionAction(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else{veryOldValue={};for(var key in newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key])}else veryOldValue=newValue}$watchCollectionInterceptor.$stateful=!0;var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,changeDetector=$parse(obj,$watchCollectionInterceptor),internalArray=[],internalObject={},initRun=!0,oldLength=0;return this.$watch(changeDetector,$watchCollectionAction)},$digest:function(){var watch,value,last,fn,get,watchers,length,dirty,next,current,logIdx,asyncTask,ttl=TTL,target=this,watchLog=[];beginPhase("$digest"),$browser.$$checkUrlChange(),this===$rootScope&&null!==applyAsyncId&&($browser.defer.cancel(applyAsyncId),flushApplyAsync()),lastDirtyWatch=null;do{dirty=!1,current=target;for(var asyncQueuePosition=0;asyncQueuePosition<asyncQueue.length;asyncQueuePosition++){try{asyncTask=asyncQueue[asyncQueuePosition],asyncTask.scope.$eval(asyncTask.expression,asyncTask.locals)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}asyncQueue.length=0;traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if(get=watch.get,(value=get(current))===(last=watch.last)||(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,fn=watch.fn,fn(value,last===initWatchVal?value:last,current),ttl<5&&(logIdx=4-ttl,watchLog[logIdx]||(watchLog[logIdx]=[]),watchLog[logIdx].push({msg:isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last}))}catch(e){$exceptionHandler(e)}if(!(next=current.$$watchersCount&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,watchLog)}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueuePosition<postDigestQueue.length;)try{postDigestQueue[postDigestQueuePosition++]()}catch(e){$exceptionHandler(e)}postDigestQueue.length=postDigestQueuePosition=0},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===$rootScope&&$browser.$$applicationDestroyed(),incrementWatchersCount(this,-this.$$watchersCount);for(var eventName in this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[eventName],eventName);parent&&parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent&&parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop},this.$$listeners={},this.$$nextSibling=null,cleanUpScope(this)}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){$rootScope.$$phase||asyncQueue.length||$browser.defer(function(){asyncQueue.length&&$rootScope.$digest()}),asyncQueue.push({scope:this,expression:$parse(expr),locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{beginPhase("$apply");try{return this.$eval(expr)}finally{clearPhase()}}catch(e){$exceptionHandler(e)}finally{try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$applyAsync:function(expr){function $applyAsyncExpression(){scope.$eval(expr)}var scope=this;expr&&applyAsyncQueue.push($applyAsyncExpression),expr=$parse(expr),scheduleApplyAsync()},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++;while(current=current.$parent);var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);indexOfListener!==-1&&(namedListeners[indexOfListener]=null,decrementListenerCount(self,1,name))}},$emit:function(name,args){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;i<length;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event.currentScope=null,event;scope=scope.$parent}while(scope);return event.currentScope=null,event},$broadcast:function(name,args){var target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!target.$$listenerCount[name])return event;for(var listeners,i,length,listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,listeners=current.$$listeners[name]||[],i=0,length=listeners.length;i<length;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event.currentScope=null,event}};var $rootScope=new Scope,asyncQueue=$rootScope.$$asyncQueue=[],postDigestQueue=$rootScope.$$postDigestQueue=[],applyAsyncQueue=$rootScope.$$applyAsyncQueue=[],postDigestQueuePosition=0;return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return normalizedVal=urlResolve(uri).href,""===normalizedVal||normalizedVal.match(regex)?uri:"unsafe:"+normalizedVal}}}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher));}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;i<n;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;i<n;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||isUndefined(trustedValue)||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||isUndefined(maybeTrusted)||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sceDelegate",function($parse,$sceDelegate){if(enabled&&msie<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:$parse(expr,function(value){return sce.getTrusted(type,value)})};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},isChromePackagedApp=$window.chrome&&$window.chrome.app&&$window.chrome.app.runtime,hasHistoryPushState=!isChromePackagedApp&&$window.history&&$window.history.pushState,android=toInt((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},vendorRegex=/^(Moz|webkit|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=match[0],vendorPrefix=vendorPrefix[0].toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(bodyStyle.webkitTransition),animations=isString(bodyStyle.webkitAnimation))}return{history:!(!hasHistoryPushState||android<4||boxee),hasEvent:function(event){if("input"===event&&msie<=11)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android}}]}function $TemplateRequestProvider(){var httpOptions;this.httpOptions=function(val){return val?(httpOptions=val,this):httpOptions},this.$get=["$templateCache","$http","$q","$sce",function($templateCache,$http,$q,$sce){function handleRequestFn(tpl,ignoreRequestError){function handleError(resp){if(!ignoreRequestError)throw $templateRequestMinErr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",tpl,resp.status,resp.statusText);return $q.reject(resp)}handleRequestFn.totalPendingRequests++,isString(tpl)&&!isUndefined($templateCache.get(tpl))||(tpl=$sce.getTrustedResourceUrl(tpl));var transformResponse=$http.defaults&&$http.defaults.transformResponse;return isArray(transformResponse)?transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform}):transformResponse===defaultHttpResponseTransform&&(transformResponse=null),$http.get(tpl,extend({cache:$templateCache,transformResponse:transformResponse},httpOptions)).finally(function(){handleRequestFn.totalPendingRequests--}).then(function(response){return $templateCache.put(tpl,response.data),response.data},handleError)}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={};return testability.findBindings=function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName("ng-binding"),matches=[];return forEach(bindings,function(binding){var dataBinding=angular.element(binding).data("$binding");dataBinding&&forEach(dataBinding,function(bindingName){if(opt_exactMatch){var matcher=new RegExp("(^|\\s)"+escapeForRegexp(expression)+"(\\s|\\||$)");matcher.test(bindingName)&&matches.push(binding)}else bindingName.indexOf(expression)!=-1&&matches.push(binding)})}),matches},testability.findModels=function(element,expression,opt_exactMatch){for(var prefixes=["ng-","data-ng-","ng\\:"],p=0;p<prefixes.length;++p){var attributeEquals=opt_exactMatch?"=":"*=",selector="["+prefixes[p]+"model"+attributeEquals+'"'+expression+'"]',elements=element.querySelectorAll(selector);if(elements.length)return elements}},testability.getLocation=function(){return $location.url()},testability.setLocation=function(url){url!==$location.url()&&($location.url(url),$rootScope.$digest())},testability.whenStable=function(callback){$browser.notifyWhenNoOutstandingRequests(callback)},testability}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){function timeout(fn,delay,invokeApply){isFunction(fn)||(invokeApply=delay,delay=fn,fn=noop);var timeoutId,args=sliceArgs(arguments,3),skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn.apply(null,args))}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return!!(promise&&promise.$$timeoutId in deferreds)&&(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId))},timeout}]}function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $$CookieReader($document){function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}var rawDocument=$document[0]||{},lastCookies={},lastCookieString="";return function(){var cookieArray,cookie,i,index,name,currentCookieString=rawDocument.cookie||"";if(currentCookieString!==lastCookieString)for(lastCookieString=currentCookieString,cookieArray=lastCookieString.split("; "),lastCookies={},i=0;i<cookieArray.length;i++)cookie=cookieArray[i],index=cookie.indexOf("="),index>0&&(name=safeDecodeURIComponent(cookie.substring(0,index)),isUndefined(lastCookies[name])&&(lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))));return lastCookies}}function $$CookieReaderProvider(){this.$get=$$CookieReader}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArrayLike(array)){if(null==array)return array;throw minErr("filter")("notarray","Expected array but received: {0}",array)}var predicateFn,matchAgainstAnyProp,expressionType=getTypeForFilter(expression);switch(expressionType){case"function":predicateFn=expression;break;case"boolean":case"null":case"number":case"string":matchAgainstAnyProp=!0;case"object":predicateFn=createPredicateFn(expression,comparator,matchAgainstAnyProp);break;default:return array}return Array.prototype.filter.call(array,predicateFn)}}function createPredicateFn(expression,comparator,matchAgainstAnyProp){var predicateFn,shouldMatchPrimitives=isObject(expression)&&"$"in expression;return comparator===!0?comparator=equals:isFunction(comparator)||(comparator=function(actual,expected){return!isUndefined(actual)&&(null===actual||null===expected?actual===expected:!(isObject(expected)||isObject(actual)&&!hasCustomToString(actual))&&(actual=lowercase(""+actual),expected=lowercase(""+expected),actual.indexOf(expected)!==-1))}),predicateFn=function(item){return shouldMatchPrimitives&&!isObject(item)?deepCompare(item,expression.$,comparator,!1):deepCompare(item,expression,comparator,matchAgainstAnyProp)}}function deepCompare(actual,expected,comparator,matchAgainstAnyProp,dontMatchWholeObject){var actualType=getTypeForFilter(actual),expectedType=getTypeForFilter(expected);if("string"===expectedType&&"!"===expected.charAt(0))return!deepCompare(actual,expected.substring(1),comparator,matchAgainstAnyProp);if(isArray(actual))return actual.some(function(item){return deepCompare(item,expected,comparator,matchAgainstAnyProp)});switch(actualType){case"object":var key;if(matchAgainstAnyProp){for(key in actual)if("$"!==key.charAt(0)&&deepCompare(actual[key],expected,comparator,!0))return!0;return!dontMatchWholeObject&&deepCompare(actual,expected,comparator,!1)}if("object"===expectedType){for(key in expected){var expectedVal=expected[key];if(!isFunction(expectedVal)&&!isUndefined(expectedVal)){var matchAnyProperty="$"===key,actualVal=matchAnyProperty?actual:actual[key];if(!deepCompare(actualVal,expectedVal,comparator,matchAnyProperty,matchAnyProperty))return!1}}return!0}return comparator(actual,expected);case"function":return!1;default:return comparator(actual,expected)}}function getTypeForFilter(val){return null===val?"null":typeof val}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),isUndefined(fractionSize)&&(fractionSize=formats.PATTERNS[1].maxFrac),null==amount?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return null==number?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function parse(numStr){var digits,numberOfIntegerDigits,i,j,zeros,exponent=0;for((numberOfIntegerDigits=numStr.indexOf(DECIMAL_SEP))>-1&&(numStr=numStr.replace(DECIMAL_SEP,"")),(i=numStr.search(/e/i))>0?(numberOfIntegerDigits<0&&(numberOfIntegerDigits=i),numberOfIntegerDigits+=+numStr.slice(i+1),numStr=numStr.substring(0,i)):numberOfIntegerDigits<0&&(numberOfIntegerDigits=numStr.length),i=0;numStr.charAt(i)==ZERO_CHAR;i++);if(i==(zeros=numStr.length))digits=[0],numberOfIntegerDigits=1;else{for(zeros--;numStr.charAt(zeros)==ZERO_CHAR;)zeros--;for(numberOfIntegerDigits-=i,digits=[],j=0;i<=zeros;i++,j++)digits[j]=+numStr.charAt(i)}return numberOfIntegerDigits>MAX_DIGITS&&(digits=digits.splice(0,MAX_DIGITS-1),exponent=numberOfIntegerDigits-1,numberOfIntegerDigits=1),{d:digits,e:exponent,i:numberOfIntegerDigits}}function roundNumber(parsedNumber,fractionSize,minFrac,maxFrac){var digits=parsedNumber.d,fractionLen=digits.length-parsedNumber.i;fractionSize=isUndefined(fractionSize)?Math.min(Math.max(minFrac,fractionLen),maxFrac):+fractionSize;var roundAt=fractionSize+parsedNumber.i,digit=digits[roundAt];if(roundAt>0){digits.splice(Math.max(parsedNumber.i,roundAt));for(var j=roundAt;j<digits.length;j++)digits[j]=0}else{fractionLen=Math.max(0,fractionLen),parsedNumber.i=1,digits.length=Math.max(1,roundAt=fractionSize+1),digits[0]=0;for(var i=1;i<roundAt;i++)digits[i]=0}if(digit>=5)if(roundAt-1<0){for(var k=0;k>roundAt;k--)digits.unshift(0),parsedNumber.i++;digits.unshift(1),parsedNumber.i++}else digits[roundAt-1]++;for(;fractionLen<Math.max(0,fractionSize);fractionLen++)digits.push(0);var carry=digits.reduceRight(function(carry,d,i,digits){return d+=carry,digits[i]=d%10,Math.floor(d/10)},0);carry&&(digits.unshift(carry),parsedNumber.i++)}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!isString(number)&&!isNumber(number)||isNaN(number))return"";var parsedNumber,isInfinity=!isFinite(number),isZero=!1,numStr=Math.abs(number)+"",formattedText="";if(isInfinity)formattedText="â";else{parsedNumber=parse(numStr),roundNumber(parsedNumber,fractionSize,pattern.minFrac,pattern.maxFrac);var digits=parsedNumber.d,integerLen=parsedNumber.i,exponent=parsedNumber.e,decimals=[];for(isZero=digits.reduce(function(isZero,d){return isZero&&!d},!0);integerLen<0;)digits.unshift(0),integerLen++;integerLen>0?decimals=digits.splice(integerLen,digits.length):(decimals=digits,digits=[0]);var groups=[];for(digits.length>=pattern.lgSize&&groups.unshift(digits.splice(-pattern.lgSize,digits.length).join(""));digits.length>pattern.gSize;)groups.unshift(digits.splice(-pattern.gSize,digits.length).join(""));digits.length&&groups.unshift(digits.join("")),formattedText=groups.join(groupSep),decimals.length&&(formattedText+=decimalSep+decimals.join("")),exponent&&(formattedText+="e+"+exponent)}return number<0&&!isZero?pattern.negPre+formattedText+pattern.negSuf:pattern.posPre+formattedText+pattern.posSuf}function padNumber(num,digits,trim,negWrap){var neg="";for((num<0||negWrap&&num<=0)&&(negWrap?num=-num+1:(num=-num,neg="-")),num=""+num;num.length<digits;)num=ZERO_CHAR+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim,negWrap){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&offset==-12&&(value=12),padNumber(value,size,trim,negWrap)}}function dateStrGetter(name,shortForm,standAlone){return function(date,formats){var value=date["get"+name](),propPrefix=(standAlone?"STANDALONE":"")+(shortForm?"SHORT":""),get=uppercase(propPrefix+name);return formats[get][value]}}function timeZoneGetter(date,formats,offset){var zone=-1*offset,paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(dayOfWeekOnFirst<=4?5:12)-dayOfWeekOnFirst)}function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))}function weekGetter(size){return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),thisThurs=getThursdayThisWeek(date),diff=+thisThurs-+firstThurs,result=1+Math.round(diff/6048e5);return padNumber(result,size)}}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}function longEraGetter(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),dateSetter.call(date,toInt(match[1]),toInt(match[2])-1,toInt(match[3]));var h=toInt(match[4]||0)-tzHour,m=toInt(match[5]||0)-tzMin,s=toInt(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format,timezone){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?toInt(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date)||!isFinite(date.getTime()))return date;for(;format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);var dateTimezoneOffset=date.getTimezoneOffset();return timezone&&(dateTimezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset),date=convertTimezoneToLocal(date,timezone,!0)),forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS,dateTimezoneOffset):"''"===value?"'":value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object,spacing){return isUndefined(spacing)&&(spacing=2),toJson(object,spacing)}}function limitToFilter(){return function(input,limit,begin){return limit=Math.abs(Number(limit))===1/0?Number(limit):toInt(limit),isNaN(limit)?input:(isNumber(input)&&(input=input.toString()),isArrayLike(input)?(begin=!begin||isNaN(begin)?0:toInt(begin),begin=begin<0?Math.max(0,input.length+begin):begin,limit>=0?sliceFn(input,begin,begin+limit):0===begin?sliceFn(input,limit,input.length):sliceFn(input,Math.max(0,begin+limit),begin)):input)}}function sliceFn(input,begin,end){return isString(input)?input.slice(begin,end):slice.call(input,begin,end)}function orderByFilter($parse){function processPredicates(sortPredicates){return sortPredicates.map(function(predicate){var descending=1,get=identity;if(isFunction(predicate))get=predicate;else if(isString(predicate)&&("+"!=predicate.charAt(0)&&"-"!=predicate.charAt(0)||(descending="-"==predicate.charAt(0)?-1:1,predicate=predicate.substring(1)),""!==predicate&&(get=$parse(predicate),get.constant))){var key=get();get=function(value){return value[key]}}return{get:get,descending:descending}})}function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return!0;default:return!1}}function objectValue(value){return isFunction(value.valueOf)&&(value=value.valueOf(),isPrimitive(value))?value:hasCustomToString(value)&&(value=value.toString(),isPrimitive(value))?value:value}function getPredicateValue(value,index){var type=typeof value;return null===value?(type="string",value="null"):"object"===type&&(value=objectValue(value)),{value:value,type:type,index:index}}function defaultCompare(v1,v2){var result=0,type1=v1.type,type2=v2.type;if(type1===type2){var value1=v1.value,value2=v2.value;"string"===type1?(value1=value1.toLowerCase(),value2=value2.toLowerCase()):"object"===type1&&(isObject(value1)&&(value1=v1.index),isObject(value2)&&(value2=v2.index)),value1!==value2&&(result=value1<value2?-1:1)}else result=type1<type2?-1:1;return result}return function(array,sortPredicate,reverseOrder,compareFn){function getComparisonObject(value,index){return{value:value,tieBreaker:{value:index,type:"number",index:index},predicateValues:predicates.map(function(predicate){return getPredicateValue(predicate.get(value),index)})}}function doComparison(v1,v2){for(var i=0,ii=predicates.length;i<ii;i++){var result=compare(v1.predicateValues[i],v2.predicateValues[i]);if(result)return result*predicates[i].descending*descending}return compare(v1.tieBreaker,v2.tieBreaker)*descending}if(null==array)return array;if(!isArrayLike(array))throw minErr("orderBy")("notarray","Expected array but received: {0}",array);isArray(sortPredicate)||(sortPredicate=[sortPredicate]),0===sortPredicate.length&&(sortPredicate=["+"]);var predicates=processPredicates(sortPredicate),descending=reverseOrder?-1:1,compare=isFunction(compareFn)?compareFn:defaultCompare,compareValues=Array.prototype.map.call(array,getComparisonObject);return compareValues.sort(doComparison),array=compareValues.map(function(item){return item.value})}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function nullFormRenameControl(control,name){control.$name=name}function FormController(element,attrs,$scope,$animate,$interpolate){var form=this,controls=[];form.$error={},form.$$success={},form.$pending=void 0,form.$name=$interpolate(attrs.name||attrs.ngForm||"")($scope),form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,form.$submitted=!1,form.$$parentForm=nullFormCtrl,form.$rollbackViewValue=function(){forEach(controls,function(control){control.$rollbackViewValue()})},form.$commitViewValue=function(){forEach(controls,function(control){control.$commitViewValue()})},form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control),control.$$parentForm=form},form.$$renameControl=function(control,newName){var oldName=control.$name;form[oldName]===control&&delete form[oldName],form[newName]=control,control.$name=newName},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(form.$pending,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$error,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$$success,function(value,name){form.$setValidity(name,null,control)}),arrayRemove(controls,control),control.$$parentForm=nullFormCtrl},addSetValidityMethod({ctrl:this,$element:element,set:function(object,property,controller){var list=object[property];if(list){var index=list.indexOf(controller);index===-1&&list.push(controller)}else object[property]=[controller]},unset:function(object,property,controller){var list=object[property];list&&(arrayRemove(list,controller),0===list.length&&delete object[property])},$animate:$animate}),form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS),$animate.addClass(element,DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,form.$$parentForm.$setDirty()},form.$setPristine=function(){$animate.setClass(element,PRISTINE_CLASS,DIRTY_CLASS+" "+SUBMITTED_CLASS),form.$dirty=!1,form.$pristine=!0,form.$submitted=!1,forEach(controls,function(control){control.$setPristine()})},form.$setUntouched=function(){forEach(controls,function(control){control.$setUntouched()})},form.$setSubmitted=function(){$animate.addClass(element,SUBMITTED_CLASS),form.$submitted=!0,form.$$parentForm.$setSubmitted()}}function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl)}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var type=lowercase(element[0].type);if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var timeout,listener=function(ev){if(timeout&&($browser.defer.cancel(timeout),timeout=null),!composing){var value=element.val(),event=ev&&ev.type;"password"===type||attr.ngTrim&&"false"===attr.ngTrim||(value=trim(value)),(ctrl.$viewValue!==value||""===value&&ctrl.$$hasNativeValidators)&&ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var deferListener=function(ev,input,origValue){timeout||(timeout=$browser.defer(function(){timeout=null,input&&input.value===origValue||listener(ev)}))};element.on("keydown",function(event){var key=event.keyCode;91===key||15<key&&key<19||37<=key&&key<=40||deferListener(event,this,this.value)}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),PARTIAL_VALIDATION_TYPES[type]&&ctrl.$$hasNativeValidators&&type===attr.type&&element.on(PARTIAL_VALIDATION_EVENTS,function(ev){if(!timeout){var validity=this[VALIDITY_STATE_PROPERTY],origBadInput=validity.badInput,origTypeMismatch=validity.typeMismatch;timeout=$browser.defer(function(){timeout=null,validity.badInput===origBadInput&&validity.typeMismatch===origTypeMismatch||listener(ev)})}}),ctrl.$render=function(){var value=ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue;element.val()!==value&&element.val(value)}}function weekParser(isoWeek,existingDate){if(isDate(isoWeek))return isoWeek;if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=7*(week-1);return existingDate&&(hours=existingDate.getHours(),minutes=existingDate.getMinutes(),seconds=existingDate.getSeconds(),milliseconds=existingDate.getMilliseconds()),new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return NaN}function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso))return iso;if(isString(iso)){if('"'==iso.charAt(0)&&'"'==iso.charAt(iso.length-1)&&(iso=iso.substring(1,iso.length-1)),ISO_DATE_REGEXP.test(iso))return new Date(iso);if(regexp.lastIndex=0,parts=regexp.exec(iso))return parts.shift(),map=date?{yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(parts,function(part,index){index<mapping.length&&(map[mapping[index]]=+part)}),new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,1e3*map.sss||0)}return NaN}}function createDateInputType(type,regexp,parseDate,format){return function(scope,element,attr,ctrl,$sniffer,$browser,$filter){function isValidDate(value){return value&&!(value.getTime&&value.getTime()!==value.getTime())}function parseObservedDateValue(val){return isDefined(val)&&!isDate(val)?parseDate(val)||void 0:val}badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var previousDate,timezone=ctrl&&ctrl.$options&&ctrl.$options.timezone;if(ctrl.$$parserName=type,ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var parsedDate=parseDate(value,previousDate);return timezone&&(parsedDate=convertTimezoneToLocal(parsedDate,timezone)),parsedDate}}),ctrl.$formatters.push(function(value){if(value&&!isDate(value))throw ngModelMinErr("datefmt","Expected `{0}` to be a date",value);return isValidDate(value)?(previousDate=value,previousDate&&timezone&&(previousDate=convertTimezoneToLocal(previousDate,timezone,!0)),$filter("date")(value,format,timezone)):(previousDate=null,"")}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(minVal)||parseDate(value)>=minVal},attr.$observe("min",function(val){minVal=parseObservedDateValue(val),ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(maxVal)||parseDate(value)<=maxVal},attr.$observe("max",function(val){maxVal=parseObservedDateValue(val),ctrl.$validate()})}}}function badInputChecker(scope,element,attr,ctrl){var node=element[0],nativeValidation=ctrl.$$hasNativeValidators=isObject(node.validity);nativeValidation&&ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};return validity.badInput||validity.typeMismatch?void 0:value})}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){if(badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$$parserName="number",ctrl.$parsers.push(function(value){return ctrl.$isEmpty(value)?null:NUMBER_REGEXP.test(value)?parseFloat(value):void 0}),ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value))throw ngModelMinErr("numfmt","Expected `{0}` to be a number",value);value=value.toString();}return value}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||value>=minVal},attr.$observe("min",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),minVal=isNumber(val)&&!isNaN(val)?val:void 0,ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||value<=maxVal},attr.$observe("max",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),maxVal=isNumber(val)&&!isNaN(val)?val:void 0,ctrl.$validate()})}}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="url",ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="email",ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}}function radioInputType(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid());var listener=function(ev){element[0].checked&&ctrl.$setViewValue(attr.value,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){if(parseFn=$parse(expression),!parseFn.constant)throw ngModelMinErr("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",name,expression);return parseFn(context)}return fallback}function checkboxInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,!0),falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,!1),listener=function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return value===!1},ctrl.$formatters.push(function(value){return equals(value,trueValue)}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function classDirective(name,selector){return name="ngClass"+name,["$animate",function($animate){function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values.push(token)}return values}function arrayClasses(classVal){var classes=[];return isArray(classVal)?(forEach(classVal,function(v){classes=classes.concat(arrayClasses(v))}),classes):isString(classVal)?classVal.split(" "):isObject(classVal)?(forEach(classVal,function(v,k){v&&(classes=classes.concat(k.split(" ")))}),classes):classVal}return{restrict:"AC",link:function(scope,element,attr){function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses)}function removeClasses(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses)}function digestClassCounts(classes,count){var classCounts=element.data("$classCounts")||createMap(),classesToUpdate=[];return forEach(classes,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),element.data("$classCounts",classCounts),classesToUpdate.join(" ")}function updateClasses(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses),toRemove=arrayDifference(oldClasses,newClasses);toAdd=digestClassCounts(toAdd,1),toRemove=digestClassCounts(toRemove,-1),toAdd&&toAdd.length&&$animate.addClass(element,toAdd),toRemove&&toRemove.length&&$animate.removeClass(element,toRemove)}function ngClassWatchAction(newVal){if(selector===!0||(1&scope.$index)===selector){var newClasses=arrayClasses(newVal||[]);if(oldVal){if(!equals(newVal,oldVal)){var oldClasses=arrayClasses(oldVal);updateClasses(oldClasses,newClasses)}}else addClasses(newClasses)}oldVal=isArray(newVal)?newVal.map(function(v){return shallowCopy(v)}):shallowCopy(newVal)}var oldVal;scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(value){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==(1&old$index)){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):removeClasses(classes)}})}}}]}function addSetValidityMethod(context){function setValidity(validationErrorKey,state,controller){isUndefined(state)?createAndSet("$pending",validationErrorKey,controller):unsetAndCleanup("$pending",validationErrorKey,controller),isBoolean(state)?state?(unset(ctrl.$error,validationErrorKey,controller),set(ctrl.$$success,validationErrorKey,controller)):(set(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)):(unset(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)),ctrl.$pending?(cachedToggleClass(PENDING_CLASS,!0),ctrl.$valid=ctrl.$invalid=void 0,toggleValidationCss("",null)):(cachedToggleClass(PENDING_CLASS,!1),ctrl.$valid=isObjectEmpty(ctrl.$error),ctrl.$invalid=!ctrl.$valid,toggleValidationCss("",ctrl.$valid));var combinedState;combinedState=ctrl.$pending&&ctrl.$pending[validationErrorKey]?void 0:!ctrl.$error[validationErrorKey]&&(!!ctrl.$$success[validationErrorKey]||null),toggleValidationCss(validationErrorKey,combinedState),ctrl.$$parentForm.$setValidity(validationErrorKey,combinedState,ctrl)}function createAndSet(name,value,controller){ctrl[name]||(ctrl[name]={}),set(ctrl[name],value,controller)}function unsetAndCleanup(name,value,controller){ctrl[name]&&unset(ctrl[name],value,controller),isObjectEmpty(ctrl[name])&&(ctrl[name]=void 0)}function cachedToggleClass(className,switchValue){switchValue&&!classCache[className]?($animate.addClass($element,className),classCache[className]=!0):!switchValue&&classCache[className]&&($animate.removeClass($element,className),classCache[className]=!1)}function toggleValidationCss(validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",cachedToggleClass(VALID_CLASS+validationErrorKey,isValid===!0),cachedToggleClass(INVALID_CLASS+validationErrorKey,isValid===!1)}var ctrl=context.ctrl,$element=context.$element,classCache={},set=context.set,unset=context.unset,$animate=context.$animate;classCache[INVALID_CLASS]=!(classCache[VALID_CLASS]=$element.hasClass(VALID_CLASS)),ctrl.$setValidity=setValidity}function isObjectEmpty(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}function chromeHack(optionElement){optionElement[0].hasAttribute("selected")&&(optionElement[0].selected=!0)}var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/,VALIDITY_STATE_PROPERTY="validity",hasOwnProperty=Object.prototype.hasOwnProperty,lowercase=function(string){return isString(string)?string.toLowerCase():string},uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(ch.charCodeAt(0)&-33)}):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,angularModule,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,getPrototypeOf=Object.getPrototypeOf,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=0;msie=window.document.documentMode,noop.$inject=[],identity.$inject=[];var isArray=Array.isArray,TYPED_ARRAY_REGEXP=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,trim=function(value){return isString(value)?value.trim():value},escapeForRegexp=function(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},csp=function(){function noUnsafeEval(){try{return new Function(""),!1}catch(e){return!0}}if(!isDefined(csp.rules)){var ngCspElement=window.document.querySelector("[ng-csp]")||window.document.querySelector("[data-ng-csp]");if(ngCspElement){var ngCspAttribute=ngCspElement.getAttribute("ng-csp")||ngCspElement.getAttribute("data-ng-csp");csp.rules={noUnsafeEval:!ngCspAttribute||ngCspAttribute.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!ngCspAttribute||ngCspAttribute.indexOf("no-inline-style")!==-1}}else csp.rules={noUnsafeEval:noUnsafeEval(),noInlineStyle:!1}}return csp.rules},jq=function(){if(isDefined(jq.name_))return jq.name_;var el,i,prefix,name,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(prefix=ngAttrPrefixes[i],el=window.document.querySelector("["+prefix.replace(":","\\:")+"jq]")){name=el.getAttribute(prefix+"jq");break}return jq.name_=name},ALL_COLONS=/:/g,ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"],SNAKE_CASE_REGEXP=/[A-Z]/g,bindJQueryFired=!1,NODE_TYPE_ELEMENT=1,NODE_TYPE_ATTRIBUTE=2,NODE_TYPE_TEXT=3,NODE_TYPE_COMMENT=8,NODE_TYPE_DOCUMENT=9,NODE_TYPE_DOCUMENT_FRAGMENT=11,version={full:"1.5.7",major:1,minor:5,dot:7,codeName:"hexagonal-circumvolution"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1,addEventListenerFn=function(element,type,fn){element.addEventListener(type,fn,!1)},removeEventListenerFn=function(element,type,fn){element.removeEventListener(type,fn,!1)};JQLite._data=function(node){return this.cache[node[this.expando]]||{}};var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"},jqLiteMinErr=minErr("jqLite"),SINGLE_TAG_REGEXP=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:-]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var jqLiteContains=window.Node.prototype.contains||function(arg){return!!(16&this.compareDocumentPosition(arg))},JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){fired||(fired=!0,fn())}var fired=!1;"complete"===window.document.readyState?window.setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[value]=!0});var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};forEach({data:jqLiteData,removeData:jqLiteRemoveData,hasData:jqLiteHasData,cleanData:jqLiteCleanData},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){return name=camelCase(name),isDefined(value)?void(element.style[name]=value):element.style[name]},attr:function(element,name,value){var nodeType=element.nodeType;if(nodeType!==NODE_TYPE_TEXT&&nodeType!==NODE_TYPE_ATTRIBUTE&&nodeType!==NODE_TYPE_COMMENT){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:void 0;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?void 0:ret}}},prop:function(element,name,value){return isDefined(value)?void(element[name]=value):element[name]},text:function(){function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT?element.textContent:""}element.textContent=value}return getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&"select"===nodeName_(element)){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){return isUndefined(value)?element.innerHTML:(jqLiteDealoc(element,!0),void(element.innerHTML=value))},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&isUndefined(2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)){if(isObject(arg1)){for(i=0;i<nodeCount;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=isUndefined(value)?Math.min(nodeCount,1):nodeCount,j=0;j<jj;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;i<nodeCount;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,on:function(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(element)){var expandoStore=jqLiteExpandoStore(element,!0),events=expandoStore.events,handle=expandoStore.handle;handle||(handle=expandoStore.handle=createEventHandler(element,events));for(var types=type.indexOf(" ")>=0?type.split(" "):[type],i=types.length,addHandler=function(type,specialHandlerWrapper,noEventListener){var eventFns=events[type];eventFns||(eventFns=events[type]=[],eventFns.specialHandlerWrapper=specialHandlerWrapper,"$destroy"===type||noEventListener||addEventListenerFn(element,type,handle)),eventFns.push(fn)};i--;)type=types[i],MOUSE_EVENT_MAP[type]?(addHandler(MOUSE_EVENT_MAP[type],specialMouseHandlerWrapper),addHandler(type,void 0,!0)):addHandler(type)}},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element),element.on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){element.nodeType===NODE_TYPE_ELEMENT&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_DOCUMENT_FRAGMENT){node=new JQLite(node);for(var i=0,ii=node.length;i<ii;i++){var child=node[i];element.appendChild(child)}}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){jqLiteWrapNode(element,jqLite(wrapNode).eq(0).clone()[0])},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){var index=element,parent=element.parentNode;newElement=new JQLite(newElement);for(var i=0,ii=newElement.length;i<ii;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling),index=node}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,eventFns=events&&events[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){dummyEvent.isImmediatePropagationStopped()||fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0,ii=this.length;i<ii;i++)isUndefined(value)?(value=fn(this[i],arg1,arg2,arg3),isDefined(value)&&(value=jqLite(value))):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key,this.nextUid)]=value},get:function(key){return this[hashKey(key,this.nextUid)]},remove:function(key){var value=this[key=hashKey(key,this.nextUid)];return delete this[key],value}};var $$HashMapProvider=[function(){this.$get=[function(){return HashMap}]}],ARROW_ARG=/^([^\(]+?)=>/,FN_ARGS=/^[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector");createInjector.$$annotate=annotate;var $animateMinErr=minErr("$animate"),ELEMENT_NODE=1,NG_ANIMATE_CLASSNAME="ng-animate",$$CoreAnimateJsProvider=function(){this.$get=noop},$$CoreAnimateQueueProvider=function(){var postDigestQueue=new HashMap,postDigestElements=[];this.$get=["$$AnimateRunner","$rootScope",function($$AnimateRunner,$rootScope){function updateData(data,classes,value){var changed=!1;return classes&&(classes=isString(classes)?classes.split(" "):isArray(classes)?classes:[],forEach(classes,function(className){className&&(changed=!0,data[className]=value)})),changed}function handleCSSClassChanges(){forEach(postDigestElements,function(element){var data=postDigestQueue.get(element);if(data){var existing=splitClasses(element.attr("class")),toAdd="",toRemove="";forEach(data,function(status,className){var hasClass=!!existing[className];status!==hasClass&&(status?toAdd+=(toAdd.length?" ":"")+className:toRemove+=(toRemove.length?" ":"")+className)}),forEach(element,function(elm){toAdd&&jqLiteAddClass(elm,toAdd),toRemove&&jqLiteRemoveClass(elm,toRemove)}),postDigestQueue.remove(element)}}),postDigestElements.length=0}function addRemoveClassesPostDigest(element,add,remove){var data=postDigestQueue.get(element)||{},classesAdded=updateData(data,add,!0),classesRemoved=updateData(data,remove,!1);(classesAdded||classesRemoved)&&(postDigestQueue.put(element,data),postDigestElements.push(element),1===postDigestElements.length&&$rootScope.$$postDigest(handleCSSClassChanges))}return{enabled:noop,on:noop,off:noop,pin:noop,push:function(element,event,options,domOperation){domOperation&&domOperation(),options=options||{},options.from&&element.css(options.from),options.to&&element.css(options.to),(options.addClass||options.removeClass)&&addRemoveClassesPostDigest(element,options.addClass,options.removeClass);var runner=new $$AnimateRunner;return runner.complete(),runner}}}]},$AnimateProvider=["$provide",function($provide){var provider=this;this.$$registeredAnimations=Object.create(null),this.register=function(name,factory){if(name&&"."!==name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);var key=name+"-animation";provider.$$registeredAnimations[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){if(1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null,this.$$classNameFilter)){var reservedRegex=new RegExp("(\\s+|\\/)"+NG_ANIMATE_CLASSNAME+"(\\s+|\\/)");if(reservedRegex.test(this.$$classNameFilter.toString()))throw $animateMinErr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',NG_ANIMATE_CLASSNAME)}return this.$$classNameFilter},this.$get=["$$animateQueue",function($$animateQueue){function domInsert(element,parentElement,afterElement){if(afterElement){var afterNode=extractElementNode(afterElement);!afterNode||afterNode.parentNode||afterNode.previousElementSibling||(afterElement=null)}afterElement?afterElement.after(element):parentElement.prepend(element)}return{on:$$animateQueue.on,off:$$animateQueue.off,pin:$$animateQueue.pin,enabled:$$animateQueue.enabled,cancel:function(runner){runner.end&&runner.end()},enter:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),parent=parent||after.parent(),domInsert(element,parent,after),$$animateQueue.push(element,"enter",prepareAnimateOptions(options))},move:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),parent=parent||after.parent(),domInsert(element,parent,after),$$animateQueue.push(element,"move",prepareAnimateOptions(options))},leave:function(element,options){return $$animateQueue.push(element,"leave",prepareAnimateOptions(options),function(){element.remove()})},addClass:function(element,className,options){return options=prepareAnimateOptions(options),options.addClass=mergeClasses(options.addclass,className),$$animateQueue.push(element,"addClass",options)},removeClass:function(element,className,options){return options=prepareAnimateOptions(options),options.removeClass=mergeClasses(options.removeClass,className),$$animateQueue.push(element,"removeClass",options)},setClass:function(element,add,remove,options){return options=prepareAnimateOptions(options),options.addClass=mergeClasses(options.addClass,add),options.removeClass=mergeClasses(options.removeClass,remove),$$animateQueue.push(element,"setClass",options)},animate:function(element,from,to,className,options){return options=prepareAnimateOptions(options),options.from=options.from?extend(options.from,from):from,options.to=options.to?extend(options.to,to):to,className=className||"ng-inline-animate",options.tempClasses=mergeClasses(options.tempClasses,className),$$animateQueue.push(element,"animate",options)}}}]}],$$AnimateAsyncRunFactoryProvider=function(){this.$get=["$$rAF",function($$rAF){function waitForTick(fn){waitQueue.push(fn),waitQueue.length>1||$$rAF(function(){for(var i=0;i<waitQueue.length;i++)waitQueue[i]();waitQueue=[]})}var waitQueue=[];return function(){var passed=!1;return waitForTick(function(){passed=!0}),function(callback){passed?callback():waitForTick(callback)}}}]},$$AnimateRunnerFactoryProvider=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function($q,$sniffer,$$animateAsyncRun,$document,$timeout){function AnimateRunner(host){this.setHost(host);var rafTick=$$animateAsyncRun(),timeoutTick=function(fn){$timeout(fn,0,!1)};this._doneCallbacks=[],this._tick=function(fn){var doc=$document[0];doc&&doc.hidden?timeoutTick(fn):rafTick(fn)},this._state=0}var INITIAL_STATE=0,DONE_PENDING_STATE=1,DONE_COMPLETE_STATE=2;return AnimateRunner.chain=function(chain,callback){function next(){return index===chain.length?void callback(!0):void chain[index](function(response){return response===!1?void callback(!1):(index++,void next())})}var index=0;next()},AnimateRunner.all=function(runners,callback){function onProgress(response){status=status&&response,++count===runners.length&&callback(status)}var count=0,status=!0;forEach(runners,function(runner){runner.done(onProgress)})},AnimateRunner.prototype={setHost:function(host){this.host=host||{}},done:function(fn){this._state===DONE_COMPLETE_STATE?fn():this._doneCallbacks.push(fn)},progress:noop,getPromise:function(){if(!this.promise){var self=this;this.promise=$q(function(resolve,reject){self.done(function(status){status===!1?reject():resolve()})})}return this.promise},then:function(resolveHandler,rejectHandler){return this.getPromise().then(resolveHandler,rejectHandler)},catch:function(handler){return this.getPromise().catch(handler)},finally:function(handler){return this.getPromise().finally(handler)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(response){var self=this;self._state===INITIAL_STATE&&(self._state=DONE_PENDING_STATE,self._tick(function(){self._resolve(response)}))},_resolve:function(response){this._state!==DONE_COMPLETE_STATE&&(forEach(this._doneCallbacks,function(fn){fn(response)}),this._doneCallbacks.length=0,this._state=DONE_COMPLETE_STATE)}},AnimateRunner}]},$CoreAnimateCssProvider=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function($$rAF,$q,$$AnimateRunner){return function(element,initialOptions){function run(){return $$rAF(function(){applyAnimationContents(),closed||runner.complete(),closed=!0}),runner}function applyAnimationContents(){options.addClass&&(element.addClass(options.addClass),options.addClass=null),options.removeClass&&(element.removeClass(options.removeClass),options.removeClass=null),options.to&&(element.css(options.to),options.to=null)}var options=initialOptions||{};options.$$prepared||(options=copy(options)),options.cleanupStyles&&(options.from=options.to=null),options.from&&(element.css(options.from),options.from=null);var closed,runner=new $$AnimateRunner;return{start:run,end:run}}}]},$compileMinErr=minErr("$compile"),_UNINITIALIZED_VALUE=new UNINITIALIZED_VALUE;$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"],SimpleChange.prototype.isFirstChange=function(){return this.previousValue===_UNINITIALIZED_VALUE};var PREFIX_REGEXP=/^((?:x|data)[\:\-_])/i,$controllerMinErr=minErr("$controller"),CNTRL_REG=/^(\S+)(\s+as\s+([\w$]+))?$/,$$ForceReflowProvider=function(){this.$get=["$document",function($document){return function(domNode){return domNode?!domNode.nodeType&&domNode instanceof jqLite&&(domNode=domNode[0]):domNode=$document[0].body,domNode.offsetWidth+1}}]},APPLICATION_JSON="application/json",CONTENT_TYPE_APPLICATION_JSON={"Content-Type":APPLICATION_JSON+";charset=utf-8"},JSON_START=/^\[|^\{(?!\{)/,JSON_ENDS={"[":/]$/,"{":/}$/},JSON_PROTECTION_PREFIX=/^\)\]\}',?\n/,$httpMinErr=minErr("$http"),$httpMinErrLegacyFn=function(method){return function(){throw $httpMinErr("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",method)}},$interpolateMinErr=angular.$interpolateMinErr=minErr("$interpolate");$interpolateMinErr.throwNoconcat=function(text){throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text)},$interpolateMinErr.interr=function(text,err){return $interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString())};var PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location"),locationPrototype={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return(match[1]||""===url)&&this.path(decodeURIComponent(match[1])),(match[2]||match[1]||""===url)&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return path=null!==path?path.toString():"","/"==path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");search=copy(search,{}),forEach(search,function(value,key){null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(hash){return null!==hash?hash.toString():""}),replace:function(){return this.$$replace=!0,this}};forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype),Location.prototype.state=function(state){if(!arguments.length)return this.$$state;if(Location!==LocationHtml5Url||!this.$$html5)throw $locationMinErr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=isUndefined(state)?null:state,this}});var $parseMinErr=minErr("$parse"),CALL=Function.prototype.call,APPLY=Function.prototype.apply,BIND=Function.prototype.bind,OPERATORS=createMap();forEach("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(operator){OPERATORS[operator]=!0});var ESCAPE={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.tokens=[];this.index<this.text.length;){var ch=this.text.charAt(this.index);if('"'===ch||"'"===ch)this.readString(ch);else if(this.isNumber(ch)||"."===ch&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(ch,"(){}[].,;:?"))this.tokens.push({index:this.index,text:ch}),this.index++;else if(this.isWhitespace(ch))this.index++;else{var ch2=ch+this.peek(),ch3=ch2+this.peek(2),op1=OPERATORS[ch],op2=OPERATORS[ch2],op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:op2?ch2:ch;this.tokens.push({index:this.index,text:token,operator:!0}),this.index+=token.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(ch,chars){return chars.indexOf(ch)!==-1;},peek:function(i){var num=i||1;return this.index+num<this.text.length&&this.text.charAt(this.index+num)},isNumber:function(ch){return"0"<=ch&&ch<="9"&&"string"==typeof ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"\t"===ch||"\n"===ch||"\v"===ch||"Â "===ch},isIdentifierStart:function(ch){return this.options.isIdentifierStart?this.options.isIdentifierStart(ch,this.codePointAt(ch)):this.isValidIdentifierStart(ch)},isValidIdentifierStart:function(ch){return"a"<=ch&&ch<="z"||"A"<=ch&&ch<="Z"||"_"===ch||"$"===ch},isIdentifierContinue:function(ch){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(ch,this.codePointAt(ch)):this.isValidIdentifierContinue(ch)},isValidIdentifierContinue:function(ch,cp){return this.isValidIdentifierStart(ch,cp)||this.isNumber(ch)},codePointAt:function(ch){return 1===ch.length?ch.charCodeAt(0):(ch.charCodeAt(0)<<10)+ch.charCodeAt(1)-56613888},peekMultichar:function(){var ch=this.text.charAt(this.index),peek=this.peek();if(!peek)return ch;var cp1=ch.charCodeAt(0),cp2=peek.charCodeAt(0);return cp1>=55296&&cp1<=56319&&cp2>=56320&&cp2<=57343?ch+peek:ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:start,text:number,constant:!0,value:Number(number)})},readIdent:function(){var start=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var ch=this.peekMultichar();if(!this.isIdentifierContinue(ch))break;this.index+=ch.length}this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:!0})},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string+=rep||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,constant:!0,value:string});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var AST=function(lexer,options){this.lexer=lexer,this.options=options};AST.Program="Program",AST.ExpressionStatement="ExpressionStatement",AST.AssignmentExpression="AssignmentExpression",AST.ConditionalExpression="ConditionalExpression",AST.LogicalExpression="LogicalExpression",AST.BinaryExpression="BinaryExpression",AST.UnaryExpression="UnaryExpression",AST.CallExpression="CallExpression",AST.MemberExpression="MemberExpression",AST.Identifier="Identifier",AST.Literal="Literal",AST.ArrayExpression="ArrayExpression",AST.Property="Property",AST.ObjectExpression="ObjectExpression",AST.ThisExpression="ThisExpression",AST.LocalsExpression="LocalsExpression",AST.NGValueParameter="NGValueParameter",AST.prototype={ast:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value},program:function(){for(var body=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&body.push(this.expressionStatement()),!this.expect(";"))return{type:AST.Program,body:body}},expressionStatement:function(){return{type:AST.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var token,left=this.expression();token=this.expect("|");)left=this.filter(left);return left},expression:function(){return this.assignment()},assignment:function(){var result=this.ternary();return this.expect("=")&&(result={type:AST.AssignmentExpression,left:result,right:this.assignment(),operator:"="}),result},ternary:function(){var alternate,consequent,test=this.logicalOR();return this.expect("?")&&(alternate=this.expression(),this.consume(":"))?(consequent=this.expression(),{type:AST.ConditionalExpression,test:test,alternate:alternate,consequent:consequent}):test},logicalOR:function(){for(var left=this.logicalAND();this.expect("||");)left={type:AST.LogicalExpression,operator:"||",left:left,right:this.logicalAND()};return left},logicalAND:function(){for(var left=this.equality();this.expect("&&");)left={type:AST.LogicalExpression,operator:"&&",left:left,right:this.equality()};return left},equality:function(){for(var token,left=this.relational();token=this.expect("==","!=","===","!==");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.relational()};return left},relational:function(){for(var token,left=this.additive();token=this.expect("<",">","<=",">=");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.additive()};return left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.multiplicative()};return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.unary()};return left},unary:function(){var token;return(token=this.expect("+","-","!"))?{type:AST.UnaryExpression,operator:token.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var primary;this.expect("(")?(primary=this.filterChain(),this.consume(")")):this.expect("[")?primary=this.arrayDeclaration():this.expect("{")?primary=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?primary=copy(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?primary={type:AST.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?primary=this.identifier():this.peek().constant?primary=this.constant():this.throwError("not a primary expression",this.peek());for(var next;next=this.expect("(","[",".");)"("===next.text?(primary={type:AST.CallExpression,callee:primary,arguments:this.parseArguments()},this.consume(")")):"["===next.text?(primary={type:AST.MemberExpression,object:primary,property:this.expression(),computed:!0},this.consume("]")):"."===next.text?primary={type:AST.MemberExpression,object:primary,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return primary},filter:function(baseExpression){for(var args=[baseExpression],result={type:AST.CallExpression,callee:this.identifier(),arguments:args,filter:!0};this.expect(":");)args.push(this.expression());return result},parseArguments:function(){var args=[];if(")"!==this.peekToken().text)do args.push(this.filterChain());while(this.expect(","));return args},identifier:function(){var token=this.consume();return token.identifier||this.throwError("is not a valid identifier",token),{type:AST.Identifier,name:token.text}},constant:function(){return{type:AST.Literal,value:this.consume().value}},arrayDeclaration:function(){var elements=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;elements.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:AST.ArrayExpression,elements:elements}},object:function(){var property,properties=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;property={type:AST.Property,kind:"init"},this.peek().constant?(property.key=this.constant(),property.computed=!1,this.consume(":"),property.value=this.expression()):this.peek().identifier?(property.key=this.identifier(),property.computed=!1,this.peek(":")?(this.consume(":"),property.value=this.expression()):property.value=property.key):this.peek("[")?(this.consume("["),property.key=this.expression(),this.consume("]"),property.computed=!0,this.consume(":"),property.value=this.expression()):this.throwError("invalid key",this.peek()),properties.push(property)}while(this.expect(","));return this.consume("}"),{type:AST.ObjectExpression,properties:properties}},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},consume:function(e1){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);var token=this.expect(e1);return token||this.throwError("is unexpected, expecting ["+e1+"]",this.peek()),token},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return!!token&&(this.tokens.shift(),token)},selfReferential:{this:{type:AST.ThisExpression},$locals:{type:AST.LocalsExpression}}},ASTCompiler.prototype={compile:function(expression,expensiveChecks){var self=this,ast=this.astBuilder.ast(expression);this.state={nextId:0,filters:{},expensiveChecks:expensiveChecks,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},findConstantAndWatchExpressions(ast,self.$filter);var assignable,extra="";if(this.stage="assign",assignable=assignableAST(ast)){this.state.computing="assign";var result=this.nextId();this.recurse(assignable,result),this.return_(result),extra="fn.assign="+this.generateFunction("assign","s,v,l")}var toWatch=getInputs(ast.body);self.stage="inputs",forEach(toWatch,function(watch,key){var fnKey="fn"+key;self.state[fnKey]={vars:[],body:[],own:{}},self.state.computing=fnKey;var intoId=self.nextId();self.recurse(watch,intoId),self.return_(intoId),self.state.inputs.push(fnKey),watch.watchId=key}),this.state.computing="fn",this.stage="main",this.recurse(ast);var fnString='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+extra+this.watchFns()+"return fn;",fn=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",fnString)(this.$filter,ensureSafeMemberName,ensureSafeObject,ensureSafeFunction,getStringValue,ensureSafeAssignContext,ifDefined,plusFn,expression);return this.state=this.stage=void 0,fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn},USE:"use",STRICT:"strict",watchFns:function(){var result=[],fns=this.state.inputs,self=this;return forEach(fns,function(name){result.push("var "+name+"="+self.generateFunction(name,"s"))}),fns.length&&result.push("fn.inputs=["+fns.join(",")+"];"),result.join("")},generateFunction:function(name,params){return"function("+params+"){"+this.varsPrefix(name)+this.body(name)+"};"},filterPrefix:function(){var parts=[],self=this;return forEach(this.state.filters,function(id,filter){parts.push(id+"=$filter("+self.escape(filter)+")")}),parts.length?"var "+parts.join(",")+";":""},varsPrefix:function(section){return this.state[section].vars.length?"var "+this.state[section].vars.join(",")+";":""},body:function(section){return this.state[section].body.join("")},recurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var left,right,args,expression,computed,self=this;if(recursionFn=recursionFn||noop,!skipWatchIdCheck&&isDefined(ast.watchId))return intoId=intoId||this.nextId(),void this.if_("i",this.lazyAssign(intoId,this.computedMember("i",ast.watchId)),this.lazyRecurse(ast,intoId,nameId,recursionFn,create,!0));switch(ast.type){case AST.Program:forEach(ast.body,function(expression,pos){self.recurse(expression.expression,void 0,void 0,function(expr){right=expr}),pos!==ast.body.length-1?self.current().body.push(right,";"):self.return_(right)});break;case AST.Literal:expression=this.escape(ast.value),this.assign(intoId,expression),recursionFn(expression);break;case AST.UnaryExpression:this.recurse(ast.argument,void 0,void 0,function(expr){right=expr}),expression=ast.operator+"("+this.ifDefined(right,0)+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.BinaryExpression:this.recurse(ast.left,void 0,void 0,function(expr){left=expr}),this.recurse(ast.right,void 0,void 0,function(expr){right=expr}),expression="+"===ast.operator?this.plus(left,right):"-"===ast.operator?this.ifDefined(left,0)+ast.operator+this.ifDefined(right,0):"("+left+")"+ast.operator+"("+right+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.LogicalExpression:intoId=intoId||this.nextId(),self.recurse(ast.left,intoId),self.if_("&&"===ast.operator?intoId:self.not(intoId),self.lazyRecurse(ast.right,intoId)),recursionFn(intoId);break;case AST.ConditionalExpression:intoId=intoId||this.nextId(),self.recurse(ast.test,intoId),self.if_(intoId,self.lazyRecurse(ast.alternate,intoId),self.lazyRecurse(ast.consequent,intoId)),recursionFn(intoId);break;case AST.Identifier:intoId=intoId||this.nextId(),nameId&&(nameId.context="inputs"===self.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",ast.name)+"?l:s"),nameId.computed=!1,nameId.name=ast.name),ensureSafeMemberName(ast.name),self.if_("inputs"===self.stage||self.not(self.getHasOwnProperty("l",ast.name)),function(){self.if_("inputs"===self.stage||"s",function(){create&&1!==create&&self.if_(self.not(self.nonComputedMember("s",ast.name)),self.lazyAssign(self.nonComputedMember("s",ast.name),"{}")),self.assign(intoId,self.nonComputedMember("s",ast.name))})},intoId&&self.lazyAssign(intoId,self.nonComputedMember("l",ast.name))),(self.state.expensiveChecks||isPossiblyDangerousMemberName(ast.name))&&self.addEnsureSafeObject(intoId),recursionFn(intoId);break;case AST.MemberExpression:left=nameId&&(nameId.context=this.nextId())||this.nextId(),intoId=intoId||this.nextId(),self.recurse(ast.object,left,void 0,function(){self.if_(self.notNull(left),function(){create&&1!==create&&self.addEnsureSafeAssignContext(left),ast.computed?(right=self.nextId(),self.recurse(ast.property,right),self.getStringValue(right),self.addEnsureSafeMemberName(right),create&&1!==create&&self.if_(self.not(self.computedMember(left,right)),self.lazyAssign(self.computedMember(left,right),"{}")),expression=self.ensureSafeObject(self.computedMember(left,right)),self.assign(intoId,expression),nameId&&(nameId.computed=!0,nameId.name=right)):(ensureSafeMemberName(ast.property.name),create&&1!==create&&self.if_(self.not(self.nonComputedMember(left,ast.property.name)),self.lazyAssign(self.nonComputedMember(left,ast.property.name),"{}")),expression=self.nonComputedMember(left,ast.property.name),(self.state.expensiveChecks||isPossiblyDangerousMemberName(ast.property.name))&&(expression=self.ensureSafeObject(expression)),self.assign(intoId,expression),nameId&&(nameId.computed=!1,nameId.name=ast.property.name))},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)},!!create);break;case AST.CallExpression:intoId=intoId||this.nextId(),ast.filter?(right=self.filter(ast.callee.name),args=[],forEach(ast.arguments,function(expr){var argument=self.nextId();self.recurse(expr,argument),args.push(argument)}),expression=right+"("+args.join(",")+")",self.assign(intoId,expression),recursionFn(intoId)):(right=self.nextId(),left={},args=[],self.recurse(ast.callee,right,left,function(){self.if_(self.notNull(right),function(){self.addEnsureSafeFunction(right),forEach(ast.arguments,function(expr){self.recurse(expr,self.nextId(),void 0,function(argument){args.push(self.ensureSafeObject(argument))})}),left.name?(self.state.expensiveChecks||self.addEnsureSafeObject(left.context),expression=self.member(left.context,left.name,left.computed)+"("+args.join(",")+")"):expression=right+"("+args.join(",")+")",expression=self.ensureSafeObject(expression),self.assign(intoId,expression)},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)}));break;case AST.AssignmentExpression:if(right=this.nextId(),left={},!isAssignable(ast.left))throw $parseMinErr("lval","Trying to assign a value to a non l-value");this.recurse(ast.left,void 0,left,function(){self.if_(self.notNull(left.context),function(){self.recurse(ast.right,right),self.addEnsureSafeObject(self.member(left.context,left.name,left.computed)),self.addEnsureSafeAssignContext(left.context),expression=self.member(left.context,left.name,left.computed)+ast.operator+right,self.assign(intoId,expression),recursionFn(intoId||expression)})},1);break;case AST.ArrayExpression:args=[],forEach(ast.elements,function(expr){self.recurse(expr,self.nextId(),void 0,function(argument){args.push(argument)})}),expression="["+args.join(",")+"]",this.assign(intoId,expression),recursionFn(expression);break;case AST.ObjectExpression:args=[],computed=!1,forEach(ast.properties,function(property){property.computed&&(computed=!0)}),computed?(intoId=intoId||this.nextId(),this.assign(intoId,"{}"),forEach(ast.properties,function(property){property.computed?(left=self.nextId(),self.recurse(property.key,left)):left=property.key.type===AST.Identifier?property.key.name:""+property.key.value,right=self.nextId(),self.recurse(property.value,right),self.assign(self.member(intoId,left,property.computed),right)})):(forEach(ast.properties,function(property){self.recurse(property.value,ast.constant?void 0:self.nextId(),void 0,function(expr){args.push(self.escape(property.key.type===AST.Identifier?property.key.name:""+property.key.value)+":"+expr)})}),expression="{"+args.join(",")+"}",this.assign(intoId,expression)),recursionFn(intoId||expression);break;case AST.ThisExpression:this.assign(intoId,"s"),recursionFn("s");break;case AST.LocalsExpression:this.assign(intoId,"l"),recursionFn("l");break;case AST.NGValueParameter:this.assign(intoId,"v"),recursionFn("v")}},getHasOwnProperty:function(element,property){var key=element+"."+property,own=this.current().own;return own.hasOwnProperty(key)||(own[key]=this.nextId(!1,element+"&&("+this.escape(property)+" in "+element+")")),own[key]},assign:function(id,value){if(id)return this.current().body.push(id,"=",value,";"),id},filter:function(filterName){return this.state.filters.hasOwnProperty(filterName)||(this.state.filters[filterName]=this.nextId(!0)),this.state.filters[filterName]},ifDefined:function(id,defaultValue){return"ifDefined("+id+","+this.escape(defaultValue)+")"},plus:function(left,right){return"plus("+left+","+right+")"},return_:function(id){this.current().body.push("return ",id,";")},if_:function(test,alternate,consequent){if(test===!0)alternate();else{var body=this.current().body;body.push("if(",test,"){"),alternate(),body.push("}"),consequent&&(body.push("else{"),consequent(),body.push("}"))}},not:function(expression){return"!("+expression+")"},notNull:function(expression){return expression+"!=null"},nonComputedMember:function(left,right){var SAFE_IDENTIFIER=/[$_a-zA-Z][$_a-zA-Z0-9]*/,UNSAFE_CHARACTERS=/[^$_a-zA-Z0-9]/g;return SAFE_IDENTIFIER.test(right)?left+"."+right:left+'["'+right.replace(UNSAFE_CHARACTERS,this.stringEscapeFn)+'"]'},computedMember:function(left,right){return left+"["+right+"]"},member:function(left,right,computed){return computed?this.computedMember(left,right):this.nonComputedMember(left,right)},addEnsureSafeObject:function(item){this.current().body.push(this.ensureSafeObject(item),";")},addEnsureSafeMemberName:function(item){this.current().body.push(this.ensureSafeMemberName(item),";")},addEnsureSafeFunction:function(item){this.current().body.push(this.ensureSafeFunction(item),";")},addEnsureSafeAssignContext:function(item){this.current().body.push(this.ensureSafeAssignContext(item),";")},ensureSafeObject:function(item){return"ensureSafeObject("+item+",text)"},ensureSafeMemberName:function(item){return"ensureSafeMemberName("+item+",text)"},ensureSafeFunction:function(item){return"ensureSafeFunction("+item+",text)"},getStringValue:function(item){this.assign(item,"getStringValue("+item+")")},ensureSafeAssignContext:function(item){return"ensureSafeAssignContext("+item+",text)"},lazyRecurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var self=this;return function(){self.recurse(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck)}},lazyAssign:function(id,value){var self=this;return function(){self.assign(id,value)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)},escape:function(value){if(isString(value))return"'"+value.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(isNumber(value))return value.toString();if(value===!0)return"true";if(value===!1)return"false";if(null===value)return"null";if("undefined"==typeof value)return"undefined";throw $parseMinErr("esc","IMPOSSIBLE")},nextId:function(skip,init){var id="v"+this.state.nextId++;return skip||this.current().vars.push(id+(init?"="+init:"")),id},current:function(){return this.state[this.state.computing]}},ASTInterpreter.prototype={compile:function(expression,expensiveChecks){var self=this,ast=this.astBuilder.ast(expression);this.expression=expression,this.expensiveChecks=expensiveChecks,findConstantAndWatchExpressions(ast,self.$filter);var assignable,assign;(assignable=assignableAST(ast))&&(assign=this.recurse(assignable));var inputs,toWatch=getInputs(ast.body);toWatch&&(inputs=[],forEach(toWatch,function(watch,key){var input=self.recurse(watch);watch.input=input,inputs.push(input),watch.watchId=key}));var expressions=[];forEach(ast.body,function(expression){expressions.push(self.recurse(expression.expression))});var fn=0===ast.body.length?noop:1===ast.body.length?expressions[0]:function(scope,locals){var lastValue;return forEach(expressions,function(exp){lastValue=exp(scope,locals)}),lastValue};return assign&&(fn.assign=function(scope,value,locals){return assign(scope,locals,value)}),inputs&&(fn.inputs=inputs),fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn},recurse:function(ast,context,create){var left,right,args,self=this;if(ast.input)return this.inputs(ast.input,ast.watchId);switch(ast.type){case AST.Literal:return this.value(ast.value,context);case AST.UnaryExpression:return right=this.recurse(ast.argument),this["unary"+ast.operator](right,context);case AST.BinaryExpression:return left=this.recurse(ast.left),right=this.recurse(ast.right),this["binary"+ast.operator](left,right,context);case AST.LogicalExpression:return left=this.recurse(ast.left),right=this.recurse(ast.right),this["binary"+ast.operator](left,right,context);case AST.ConditionalExpression:return this["ternary?:"](this.recurse(ast.test),this.recurse(ast.alternate),this.recurse(ast.consequent),context);case AST.Identifier:return ensureSafeMemberName(ast.name,self.expression),self.identifier(ast.name,self.expensiveChecks||isPossiblyDangerousMemberName(ast.name),context,create,self.expression);case AST.MemberExpression:return left=this.recurse(ast.object,!1,!!create),ast.computed||(ensureSafeMemberName(ast.property.name,self.expression),right=ast.property.name),ast.computed&&(right=this.recurse(ast.property)),ast.computed?this.computedMember(left,right,context,create,self.expression):this.nonComputedMember(left,right,self.expensiveChecks,context,create,self.expression);case AST.CallExpression:return args=[],forEach(ast.arguments,function(expr){args.push(self.recurse(expr))}),ast.filter&&(right=this.$filter(ast.callee.name)),ast.filter||(right=this.recurse(ast.callee,!0)),ast.filter?function(scope,locals,assign,inputs){for(var values=[],i=0;i<args.length;++i)values.push(args[i](scope,locals,assign,inputs));var value=right.apply(void 0,values,inputs);return context?{context:void 0,name:void 0,value:value}:value}:function(scope,locals,assign,inputs){var value,rhs=right(scope,locals,assign,inputs);if(null!=rhs.value){ensureSafeObject(rhs.context,self.expression),ensureSafeFunction(rhs.value,self.expression);for(var values=[],i=0;i<args.length;++i)values.push(ensureSafeObject(args[i](scope,locals,assign,inputs),self.expression));value=ensureSafeObject(rhs.value.apply(rhs.context,values),self.expression)}return context?{value:value}:value};case AST.AssignmentExpression:return left=this.recurse(ast.left,!0,1),right=this.recurse(ast.right),function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs);return ensureSafeObject(lhs.value,self.expression),ensureSafeAssignContext(lhs.context),lhs.context[lhs.name]=rhs,context?{value:rhs}:rhs};case AST.ArrayExpression:return args=[],forEach(ast.elements,function(expr){args.push(self.recurse(expr))}),function(scope,locals,assign,inputs){for(var value=[],i=0;i<args.length;++i)value.push(args[i](scope,locals,assign,inputs));return context?{value:value}:value};case AST.ObjectExpression:return args=[],forEach(ast.properties,function(property){property.computed?args.push({key:self.recurse(property.key),computed:!0,value:self.recurse(property.value)}):args.push({key:property.key.type===AST.Identifier?property.key.name:""+property.key.value,computed:!1,value:self.recurse(property.value)})}),function(scope,locals,assign,inputs){for(var value={},i=0;i<args.length;++i)args[i].computed?value[args[i].key(scope,locals,assign,inputs)]=args[i].value(scope,locals,assign,inputs):value[args[i].key]=args[i].value(scope,locals,assign,inputs);return context?{value:value}:value};case AST.ThisExpression:return function(scope){return context?{value:scope}:scope};case AST.LocalsExpression:return function(scope,locals){return context?{value:locals}:locals};case AST.NGValueParameter:return function(scope,locals,assign){return context?{value:assign}:assign}}},"unary+":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?+arg:0,context?{value:arg}:arg}},"unary-":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?-arg:0,context?{value:arg}:arg}},"unary!":function(argument,context){return function(scope,locals,assign,inputs){var arg=!argument(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary+":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=plusFn(lhs,rhs);return context?{value:arg}:arg}},"binary-":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=(isDefined(lhs)?lhs:0)-(isDefined(rhs)?rhs:0);return context?{value:arg}:arg}},"binary*":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)*right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary/":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)/right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary%":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)%right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary===":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)===right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary&&":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)&&right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary||":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)||right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"ternary?:":function(test,alternate,consequent,context){return function(scope,locals,assign,inputs){var arg=test(scope,locals,assign,inputs)?alternate(scope,locals,assign,inputs):consequent(scope,locals,assign,inputs);return context?{value:arg}:arg}},value:function(value,context){return function(){return context?{context:void 0,name:void 0,value:value}:value}},identifier:function(name,expensiveChecks,context,create,expression){return function(scope,locals,assign,inputs){var base=locals&&name in locals?locals:scope;create&&1!==create&&base&&!base[name]&&(base[name]={});var value=base?base[name]:void 0;return expensiveChecks&&ensureSafeObject(value,expression),context?{context:base,name:name,value:value}:value}},computedMember:function(left,right,context,create,expression){return function(scope,locals,assign,inputs){var rhs,value,lhs=left(scope,locals,assign,inputs);return null!=lhs&&(rhs=right(scope,locals,assign,inputs),rhs=getStringValue(rhs),ensureSafeMemberName(rhs,expression),create&&1!==create&&(ensureSafeAssignContext(lhs),lhs&&!lhs[rhs]&&(lhs[rhs]={})),value=lhs[rhs],ensureSafeObject(value,expression)),context?{context:lhs,name:rhs,value:value}:value}},nonComputedMember:function(left,right,expensiveChecks,context,create,expression){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);create&&1!==create&&(ensureSafeAssignContext(lhs),lhs&&!lhs[right]&&(lhs[right]={}));var value=null!=lhs?lhs[right]:void 0;return(expensiveChecks||isPossiblyDangerousMemberName(right))&&ensureSafeObject(value,expression),context?{context:lhs,name:right,value:value}:value}},inputs:function(input,watchId){return function(scope,value,locals,inputs){return inputs?inputs[watchId]:input(scope,value,locals)}}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options,this.ast=new AST(lexer,options),this.astCompiler=options.csp?new ASTInterpreter(this.ast,$filter):new ASTCompiler(this.ast,$filter)};Parser.prototype={constructor:Parser,parse:function(text){return this.astCompiler.compile(text,this.options.expensiveChecks)}};var objectValueOf=Object.prototype.valueOf,$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},$templateRequestMinErr=minErr("$compile"),urlParsingNode=window.document.createElement("a"),originUrl=urlResolve(window.location.href);$$CookieReader.$inject=["$document"],$FilterProvider.$inject=["$provide"];var MAX_DIGITS=22,DECIMAL_SEP=".",ZERO_CHAR="0";currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DATE_FORMATS={yyyy:dateGetter("FullYear",4,0,!1,!0),yy:dateGetter("FullYear",2,0,!0,!0),y:dateGetter("FullYear",1,0,!1,!0),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),LLLL:dateStrGetter("Month",!1,!0),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:longEraGetter},DATE_FORMATS_SPLIT=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){if(!attr.href&&!attr.xlinkHref)return function(scope,element){if("a"===element[0].nodeName.toLowerCase()){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){function defaultLinkFn(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName),linkFn=defaultLinkFn;"checked"===propName&&(linkFn=function(scope,element,attr){attr.ngModel!==attr[normalized]&&defaultLinkFn(scope,element,attr)}),ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:linkFn}}}}),forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if("ngPattern"===ngAttr&&"/"==attr.ngPattern.charAt(0)){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match)return void attr.$set("ngPattern",new RegExp(match[1],match[2]))}scope.$watch(attr[ngAttr],function(value){attr.$set(ngAttr,value)})}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){return value?(attr.$set(name,value),void(msie&&propName&&element.prop(propName,attr[name]))):void("href"===attrName&&attr.$set(name,null))})}}}});var nullFormCtrl={$addControl:noop,$$renameControl:nullFormRenameControl,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop},SUBMITTED_CLASS="ng-submitted";FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var formDirectiveFactory=function(isNgForm){return["$timeout","$parse",function($timeout,$parse){function getSetter(expression){return""===expression?$parse('this[""]').assign:$parse(expression).assign||noop}var formDirective={name:"form",restrict:isNgForm?"EAC":"E",require:["form","^^?form"],controller:FormController,compile:function(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?"name":!(!isNgForm||!attr.ngForm)&&"ngForm";return{pre:function(scope,formElement,attr,ctrls){var controller=ctrls[0];if(!("action"in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue(),controller.$setSubmitted()}),event.preventDefault()};addEventListenerFn(formElement[0],"submit",handleFormSubmission),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",handleFormSubmission)},0,!1)})}var parentFormCtrl=ctrls[1]||controller.$$parentForm;parentFormCtrl.$addControl(controller);var setter=nameAttr?getSetter(controller.$name):noop;nameAttr&&(setter(scope,controller),attr.$observe(nameAttr,function(newValue){controller.$name!==newValue&&(setter(scope,void 0),controller.$$parentForm.$$renameControl(controller,newValue),(setter=getSetter(controller.$name))(scope,controller))})),formElement.on("$destroy",function(){controller.$$parentForm.$removeControl(controller),setter(scope,void 0),extend(controller,nullFormCtrl)})}}}};return formDirective}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),ISO_DATE_REGEXP=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,URL_REGEXP=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,DATE_REGEXP=/^(\d{4,})-(\d{2})-(\d{2})$/,DATETIMELOCAL_REGEXP=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,WEEK_REGEXP=/^(\d{4,})-W(\d\d)$/,MONTH_REGEXP=/^(\d{4,})-(\d\d)$/,TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,PARTIAL_VALIDATION_EVENTS="keydown wheel mousedown",PARTIAL_VALIDATION_TYPES=createMap();forEach("date,datetime-local,month,time,week".split(","),function(type){PARTIAL_VALIDATION_TYPES[type]=!0});var inputType={text:textInputType,date:createDateInputType("date",DATE_REGEXP,createDateParser(DATE_REGEXP,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",WEEK_REGEXP,weekParser,"yyyy-Www"),month:createDateInputType("month",MONTH_REGEXP,createDateParser(MONTH_REGEXP,["yyyy","MM"]),"yyyy-MM"),number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop},inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:{pre:function(scope,element,attr,ctrls){ctrls[0]&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}],CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{restrict:"A",priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind),element=element[0],scope.$watch(attr.ngBind,function(value){element.textContent=isUndefined(value)?"":value})}}}}],ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions),element=element[0],attr.$observe("ngBindTemplate",function(value){element.textContent=isUndefined(value)?"":value})}}}}],ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml),ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function(val){return $sce.valueOf(val)});return $compile.$$addBindingClass(tElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml),scope.$watch(ngBindHtmlWatch,function(){var value=ngBindHtmlGetter(scope);element.html($sce.getTrustedHtml(value)||"")})}}}}],ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",void 0),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName],null,!0);return function(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};forceAsyncEvents[eventName]&&$rootScope.$$phase?scope.$evalAsync(callback):scope.$apply(callback)})}}}}]});var ngIfDirective=["$animate","$compile",function($animate,$compile){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){value?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=$compile.$$createComment("end ngIf",$attr.ngIf),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).then(function(){previousElements=null}),block=null))})}}}],ngIncludeDirective=["$templateRequest","$anchorScroll","$animate",function($templateRequest,$anchorScroll,$animate){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch(srcExp,function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(!scope.$$destroyed&&thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element).then(afterAnimation)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded",src),scope.$eval(onloadExp)}},function(){scope.$$destroyed||thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){return toString.call($element[0]).match(/SVG/)?($element.empty(),void $compile(jqLiteBuildFragment(ctrl.template,window.document).childNodes)(scope,function(clone){$element.append(clone)},{futureParentElement:$element})):($element.html(ctrl.template),void $compile($element.contents())(scope))}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=element.attr(attr.$attr.ngList)||", ",trimValues="false"!==attr.ngTrim,separator=trimValues?trim(ngList):ngList,parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trimValues?trim(value):value)}),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push(function(value){if(isArray(value))return value.join(ngList)}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",UNTOUCHED_CLASS="ng-untouched",TOUCHED_CLASS="ng-touched",PENDING_CLASS="ng-pending",EMPTY_CLASS="ng-empty",NOT_EMPTY_CLASS="ng-not-empty",ngModelMinErr=minErr("ngModel"),NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$rootScope,$q,$interpolate){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=$interpolate($attr.name||"",!1)($scope),this.$$parentForm=nullFormCtrl;var parserValid,parsedNgModel=$parse($attr.ngModel),parsedNgModelAssign=parsedNgModel.assign,ngModelGet=parsedNgModel,ngModelSet=parsedNgModelAssign,pendingDebounce=null,ctrl=this;this.$$setOptions=function(options){if(ctrl.$options=options,options&&options.getterSetter){var invokeModelGetter=$parse($attr.ngModel+"()"),invokeModelSetter=$parse($attr.ngModel+"($$$p)");ngModelGet=function($scope){var modelValue=parsedNgModel($scope);return isFunction(modelValue)&&(modelValue=invokeModelGetter($scope)),modelValue},ngModelSet=function($scope,newValue){isFunction(parsedNgModel($scope))?invokeModelSetter($scope,{$$$p:newValue}):parsedNgModelAssign($scope,newValue)}}else if(!parsedNgModel.assign)throw ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element))},this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!==value},this.$$updateEmptyClasses=function(value){ctrl.$isEmpty(value)?($animate.removeClass($element,NOT_EMPTY_CLASS),$animate.addClass($element,EMPTY_CLASS)):($animate.removeClass($element,EMPTY_CLASS),$animate.addClass($element,NOT_EMPTY_CLASS))};var currentValidationRunId=0;addSetValidityMethod({ctrl:this,$element:$element,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]},$animate:$animate}),this.$setPristine=function(){ctrl.$dirty=!1,ctrl.$pristine=!0,$animate.removeClass($element,DIRTY_CLASS),$animate.addClass($element,PRISTINE_CLASS)},this.$setDirty=function(){ctrl.$dirty=!0,ctrl.$pristine=!1,$animate.removeClass($element,PRISTINE_CLASS),$animate.addClass($element,DIRTY_CLASS),ctrl.$$parentForm.$setDirty()},this.$setUntouched=function(){ctrl.$touched=!1,ctrl.$untouched=!0,$animate.setClass($element,UNTOUCHED_CLASS,TOUCHED_CLASS)},this.$setTouched=function(){ctrl.$touched=!0,ctrl.$untouched=!1,$animate.setClass($element,TOUCHED_CLASS,UNTOUCHED_CLASS)},this.$rollbackViewValue=function(){$timeout.cancel(pendingDebounce),ctrl.$viewValue=ctrl.$$lastCommittedViewValue,ctrl.$render()},this.$validate=function(){if(!isNumber(ctrl.$modelValue)||!isNaN(ctrl.$modelValue)){var viewValue=ctrl.$$lastCommittedViewValue,modelValue=ctrl.$$rawModelValue,prevValid=ctrl.$valid,prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$runValidators(modelValue,viewValue,function(allValid){allowInvalid||prevValid===allValid||(ctrl.$modelValue=allValid?modelValue:void 0,ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope())})}},this.$$runValidators=function(modelValue,viewValue,doneCallback){function processParseErrors(){var errorKey=ctrl.$$parserName||"parse";return isUndefined(parserValid)?(setValidity(errorKey,null),!0):(parserValid||(forEach(ctrl.$validators,function(v,name){setValidity(name,null)}),forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)})),setValidity(errorKey,parserValid),parserValid)}function processSyncValidators(){var syncValidatorsValid=!0;return forEach(ctrl.$validators,function(validator,name){var result=validator(modelValue,viewValue);syncValidatorsValid=syncValidatorsValid&&result,setValidity(name,result)}),!!syncValidatorsValid||(forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)}),!1)}function processAsyncValidators(){var validatorPromises=[],allValid=!0;forEach(ctrl.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise))throw ngModelMinErr("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);setValidity(name,void 0),validatorPromises.push(promise.then(function(){setValidity(name,!0)},function(){allValid=!1,setValidity(name,!1)}))}),validatorPromises.length?$q.all(validatorPromises).then(function(){validationDone(allValid)},noop):validationDone(!0)}function setValidity(name,isValid){localValidationRunId===currentValidationRunId&&ctrl.$setValidity(name,isValid)}function validationDone(allValid){localValidationRunId===currentValidationRunId&&doneCallback(allValid)}currentValidationRunId++;var localValidationRunId=currentValidationRunId;return processParseErrors()&&processSyncValidators()?void processAsyncValidators():void validationDone(!1)},this.$commitViewValue=function(){var viewValue=ctrl.$viewValue;$timeout.cancel(pendingDebounce),(ctrl.$$lastCommittedViewValue!==viewValue||""===viewValue&&ctrl.$$hasNativeValidators)&&(ctrl.$$updateEmptyClasses(viewValue),ctrl.$$lastCommittedViewValue=viewValue,ctrl.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function writeToModelIfNeeded(){ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope()}var viewValue=ctrl.$$lastCommittedViewValue,modelValue=viewValue;if(parserValid=!isUndefined(modelValue)||void 0)for(var i=0;i<ctrl.$parsers.length;i++)if(modelValue=ctrl.$parsers[i](modelValue),isUndefined(modelValue)){parserValid=!1;break}isNumber(ctrl.$modelValue)&&isNaN(ctrl.$modelValue)&&(ctrl.$modelValue=ngModelGet($scope));var prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$rawModelValue=modelValue,allowInvalid&&(ctrl.$modelValue=modelValue,writeToModelIfNeeded()),ctrl.$$runValidators(modelValue,ctrl.$$lastCommittedViewValue,function(allValid){allowInvalid||(ctrl.$modelValue=allValid?modelValue:void 0,writeToModelIfNeeded())})},this.$$writeModelToScope=function(){ngModelSet($scope,ctrl.$modelValue),forEach(ctrl.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}})},this.$setViewValue=function(value,trigger){ctrl.$viewValue=value,ctrl.$options&&!ctrl.$options.updateOnDefault||ctrl.$$debounceViewValueCommit(trigger)},this.$$debounceViewValueCommit=function(trigger){var debounce,debounceDelay=0,options=ctrl.$options;options&&isDefined(options.debounce)&&(debounce=options.debounce,isNumber(debounce)?debounceDelay=debounce:isNumber(debounce[trigger])?debounceDelay=debounce[trigger]:isNumber(debounce.default)&&(debounceDelay=debounce.default)),$timeout.cancel(pendingDebounce),debounceDelay?pendingDebounce=$timeout(function(){ctrl.$commitViewValue()},debounceDelay):$rootScope.$$phase?ctrl.$commitViewValue():$scope.$apply(function(){ctrl.$commitViewValue()})},$scope.$watch(function(){var modelValue=ngModelGet($scope);if(modelValue!==ctrl.$modelValue&&(ctrl.$modelValue===ctrl.$modelValue||modelValue===modelValue)){ctrl.$modelValue=ctrl.$$rawModelValue=modelValue,parserValid=void 0;for(var formatters=ctrl.$formatters,idx=formatters.length,viewValue=modelValue;idx--;)viewValue=formatters[idx](viewValue);ctrl.$viewValue!==viewValue&&(ctrl.$$updateEmptyClasses(viewValue),ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue,ctrl.$render(),ctrl.$$runValidators(modelValue,viewValue,noop))}return modelValue})}],ngModelDirective=["$rootScope",function($rootScope){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function(element){return element.addClass(PRISTINE_CLASS).addClass(UNTOUCHED_CLASS).addClass(VALID_CLASS),{pre:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||modelCtrl.$$parentForm;modelCtrl.$$setOptions(ctrls[2]&&ctrls[2].$options),formCtrl.$addControl(modelCtrl),attr.$observe("name",function(newValue){modelCtrl.$name!==newValue&&modelCtrl.$$parentForm.$$renameControl(modelCtrl,newValue)}),scope.$on("$destroy",function(){modelCtrl.$$parentForm.$removeControl(modelCtrl)})},post:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0];modelCtrl.$options&&modelCtrl.$options.updateOn&&element.on(modelCtrl.$options.updateOn,function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type)}),element.on("blur",function(){modelCtrl.$touched||($rootScope.$$phase?scope.$evalAsync(modelCtrl.$setTouched):scope.$apply(modelCtrl.$setTouched))})}}}}}],DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/,ngModelOptionsDirective=function(){return{restrict:"A",controller:["$scope","$attrs",function($scope,$attrs){var that=this;this.$options=copy($scope.$eval($attrs.ngModelOptions)),isDefined(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=trim(this.$options.updateOn.replace(DEFAULT_REGEXP,function(){return that.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngOptionsMinErr=minErr("ngOptions"),NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ngOptionsDirective=["$compile","$document","$parse",function($compile,$document,$parse){function parseOptionsExpression(optionsExp,selectElement,scope){function Option(selectValue,viewValue,label,group,disabled){this.selectValue=selectValue,this.viewValue=viewValue,this.label=label,this.group=group,this.disabled=disabled}function getOptionValuesKeys(optionValues){var optionValuesKeys;if(!keyName&&isArrayLike(optionValues))optionValuesKeys=optionValues;else{optionValuesKeys=[];for(var itemKey in optionValues)optionValues.hasOwnProperty(itemKey)&&"$"!==itemKey.charAt(0)&&optionValuesKeys.push(itemKey)}return optionValuesKeys}var match=optionsExp.match(NG_OPTIONS_REGEXP);if(!match)throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var valueName=match[5]||match[7],keyName=match[6],selectAs=/ as /.test(match[0])&&match[1],trackBy=match[9],valueFn=$parse(match[2]?match[1]:valueName),selectAsFn=selectAs&&$parse(selectAs),viewValueFn=selectAsFn||valueFn,trackByFn=trackBy&&$parse(trackBy),getTrackByValueFn=trackBy?function(value,locals){return trackByFn(scope,locals)}:function(value){return hashKey(value)},getTrackByValue=function(value,key){return getTrackByValueFn(value,getLocals(value,key))},displayFn=$parse(match[2]||match[1]),groupByFn=$parse(match[3]||""),disableWhenFn=$parse(match[4]||""),valuesFn=$parse(match[8]),locals={},getLocals=keyName?function(value,key){return locals[keyName]=key,locals[valueName]=value,locals}:function(value){return locals[valueName]=value,locals};return{trackBy:trackBy,getTrackByValue:getTrackByValue,getWatchables:$parse(valuesFn,function(optionValues){var watchedArray=[];optionValues=optionValues||[];for(var optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),selectValue=getTrackByValueFn(value,locals);if(watchedArray.push(selectValue),match[2]||match[1]){var label=displayFn(scope,locals);watchedArray.push(label)}if(match[4]){var disableWhen=disableWhenFn(scope,locals);watchedArray.push(disableWhen)}}return watchedArray}),getOptions:function(){for(var optionItems=[],selectValueMap={},optionValues=valuesFn(scope)||[],optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),viewValue=viewValueFn(scope,locals),selectValue=getTrackByValueFn(viewValue,locals),label=displayFn(scope,locals),group=groupByFn(scope,locals),disabled=disableWhenFn(scope,locals),optionItem=new Option(selectValue,viewValue,label,group,disabled);optionItems.push(optionItem),selectValueMap[selectValue]=optionItem}return{items:optionItems,selectValueMap:selectValueMap,getOptionFromViewValue:function(value){return selectValueMap[getTrackByValue(value)]},getViewValueFromOption:function(option){return trackBy?angular.copy(option.viewValue):option.viewValue}}}}}function ngOptionsPostLink(scope,selectElement,attr,ctrls){function addOptionElement(option,parent){var optionElement=optionTemplate.cloneNode(!1);parent.appendChild(optionElement),updateOptionElement(option,optionElement)}function updateOptionElement(option,element){option.element=element,element.disabled=option.disabled,option.label!==element.label&&(element.label=option.label,element.textContent=option.label),option.value!==element.value&&(element.value=option.selectValue)}function updateOptions(){var previousValue=options&&selectCtrl.readValue();if(options)for(var i=options.items.length-1;i>=0;i--){var option=options.items[i];jqLiteRemove(option.group?option.element.parentNode:option.element)}options=ngOptions.getOptions();var groupElementMap={};if(providedEmptyOption&&selectElement.prepend(emptyOption),options.items.forEach(function(option){var groupElement;isDefined(option.group)?(groupElement=groupElementMap[option.group],groupElement||(groupElement=optGroupTemplate.cloneNode(!1),listFragment.appendChild(groupElement),groupElement.label=option.group,groupElementMap[option.group]=groupElement),addOptionElement(option,groupElement)):addOptionElement(option,listFragment)}),selectElement[0].appendChild(listFragment),ngModelCtrl.$render(),!ngModelCtrl.$isEmpty(previousValue)){var nextValue=selectCtrl.readValue(),isNotPrimitive=ngOptions.trackBy||multiple;(isNotPrimitive?equals(previousValue,nextValue):previousValue===nextValue)||(ngModelCtrl.$setViewValue(nextValue),ngModelCtrl.$render())}}for(var emptyOption,selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,i=0,children=selectElement.children(),ii=children.length;i<ii;i++)if(""===children[i].value){emptyOption=children.eq(i);break}var providedEmptyOption=!!emptyOption,unknownOption=jqLite(optionTemplate.cloneNode(!1));unknownOption.val("?");var options,ngOptions=parseOptionsExpression(attr.ngOptions,selectElement,scope),listFragment=$document[0].createDocumentFragment(),renderEmptyOption=function(){providedEmptyOption||selectElement.prepend(emptyOption),selectElement.val(""),emptyOption.prop("selected",!0),emptyOption.attr("selected",!0)},removeEmptyOption=function(){providedEmptyOption||emptyOption.remove()},renderUnknownOption=function(){selectElement.prepend(unknownOption),selectElement.val("?"),unknownOption.prop("selected",!0),unknownOption.attr("selected",!0)},removeUnknownOption=function(){unknownOption.remove()};multiple?(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length},selectCtrl.writeValue=function(value){options.items.forEach(function(option){option.element.selected=!1}),value&&value.forEach(function(item){var option=options.getOptionFromViewValue(item);option&&(option.element.selected=!0)})},selectCtrl.readValue=function(){var selectedValues=selectElement.val()||[],selections=[];return forEach(selectedValues,function(value){var option=options.selectValueMap[value];option&&!option.disabled&&selections.push(options.getViewValueFromOption(option))}),selections},ngOptions.trackBy&&scope.$watchCollection(function(){if(isArray(ngModelCtrl.$viewValue))return ngModelCtrl.$viewValue.map(function(value){return ngOptions.getTrackByValue(value)})},function(){ngModelCtrl.$render()})):(selectCtrl.writeValue=function(value){var option=options.getOptionFromViewValue(value);option?(selectElement[0].value!==option.selectValue&&(removeUnknownOption(),removeEmptyOption(),selectElement[0].value=option.selectValue,option.element.selected=!0),option.element.setAttribute("selected","selected")):null===value||providedEmptyOption?(removeUnknownOption(),renderEmptyOption()):(removeEmptyOption(),renderUnknownOption())},selectCtrl.readValue=function(){var selectedOption=options.selectValueMap[selectElement.val()];return selectedOption&&!selectedOption.disabled?(removeEmptyOption(),removeUnknownOption(),options.getViewValueFromOption(selectedOption)):null},ngOptions.trackBy&&scope.$watch(function(){return ngOptions.getTrackByValue(ngModelCtrl.$viewValue)},function(){ngModelCtrl.$render()})),providedEmptyOption?(emptyOption.remove(),$compile(emptyOption)(scope),emptyOption.removeClass("ng-scope")):emptyOption=jqLite(optionTemplate.cloneNode(!1)),selectElement.empty(),updateOptions(),scope.$watchCollection(ngOptions.getWatchables,updateOptions)}var optionTemplate=window.document.createElement("option"),optGroupTemplate=window.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(scope,selectElement,attr,ctrls){ctrls[0].registerOption=noop},post:ngOptionsPostLink}}}],ngPluralizeDirective=["$locale","$interpolate","$log",function($locale,$interpolate,$log){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{link:function(scope,element,attr){function updateElementText(newText){element.text(newText||"")}var lastCount,numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+"-"+offset+endSymbol,watchRemover=angular.noop;forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?"-":"")+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement))}),scope.$watch(numberExp,function(newVal){var count=parseFloat(newVal),countIsNaN=isNaN(count);if(countIsNaN||count in whens||(count=$locale.pluralCat(count-offset)),count!==lastCount&&!(countIsNaN&&isNumber(lastCount)&&isNaN(lastCount))){watchRemover();var whenExpFn=whensExpFns[count];isUndefined(whenExpFn)?(null!=newVal&&$log.debug("ngPluralize: no rule defined for '"+count+"' in "+whenExp),watchRemover=noop,updateElementText()):watchRemover=scope.$watch(whenExpFn,updateElementText),lastCount=count}})}}}],ngRepeatDirective=["$parse","$animate","$compile",function($parse,$animate,$compile){var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat"),updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value,keyIdentifier&&(scope[keyIdentifier]=key),scope.$index=index,scope.$first=0===index,scope.$last=index===arrayLength-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0===(1&index))},getBlockStart=function(block){return block.clone[0]},getBlockEnd=function(block){return block.clone[block.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function($element,$attr){var expression=$attr.ngRepeat,ngRepeatEndComment=$compile.$$createComment("end ngRepeat",expression),match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var lhs=match[1],rhs=match[2],aliasAs=match[3],trackByExp=match[4];if(match=lhs.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!match)throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);var valueIdentifier=match[3]||match[1],keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs)))throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);var trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,hashFnLocals={$id:hashKey};return trackByExp?trackByExpGetter=$parse(trackByExp):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),function($scope,$element,$attr,ctrl,$transclude){trackByExpGetter&&(trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)});var lastBlockMap=createMap();$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove,previousNode=$element[0],nextBlockMap=createMap();if(aliasAs&&($scope[aliasAs]=collection),isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(var itemKey in collection)hasOwnProperty.call(collection,itemKey)&&"$"!==itemKey.charAt(0)&&collectionKeys.push(itemKey)}for(collectionLength=collectionKeys.length,nextBlockOrder=new Array(collectionLength),index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),lastBlockMap[trackById])block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap[trackById])throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value);nextBlockOrder[index]={id:trackById,scope:void 0,clone:void 0},nextBlockMap[trackById]=!0}for(var blockKey in lastBlockMap){if(block=lastBlockMap[blockKey],elementsToRemove=getBlockNodes(block.clone),$animate.leave(elementsToRemove),elementsToRemove[0].parentNode)for(index=0,length=elementsToRemove.length;index<length;index++)elementsToRemove[index][NG_REMOVED]=!0;block.scope.$destroy()}for(index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],block=nextBlockOrder[index],block.scope){nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);getBlockStart(block)!=nextNode&&$animate.move(getBlockNodes(block.clone),null,previousNode),previousNode=getBlockEnd(block),updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else $transclude(function(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode,$animate.enter(clone,null,previousNode),previousNode=endNode,block.clone=clone,nextBlockMap[block.id]=block,updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)});lastBlockMap=nextBlockMap})}}}}],NG_HIDE_CLASS="ng-hide",NG_HIDE_IN_PROGRESS_CLASS="ng-hide-animate",ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[value?"removeClass":"addClass"](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}],ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[value?"addClass":"removeClass"](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate","$compile",function($animate,$compile){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[],spliceFactory=function(array,index){return function(){array.splice(index,1)}};scope.$watch(watchExpr,function(value){var i,ii;for(i=0,ii=previousLeaveAnimations.length;i<ii;++i)$animate.cancel(previousLeaveAnimations[i]);for(previousLeaveAnimations.length=0,i=0,ii=selectedScopes.length;i<ii;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy();var promise=previousLeaveAnimations[i]=$animate.leave(selected);promise.then(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=$compile.$$createComment("end ngSwitchWhen");var block={clone:caseElement};selectedElements.push(block),$animate.enter(caseElement,anchor.parent(),anchor)})})})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeMinErr=minErr("ngTransclude"),ngTranscludeDirective=ngDirective({restrict:"EAC",link:function($scope,$element,$attrs,controller,$transclude){function ngTranscludeCloneAttachFn(clone){clone.length&&($element.empty(),$element.append(clone))}if($attrs.ngTransclude===$attrs.$attr.ngTransclude&&($attrs.ngTransclude=""),!$transclude)throw ngTranscludeMinErr("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));var slotName=$attrs.ngTransclude||$attrs.ngTranscludeSlot;$transclude(ngTranscludeCloneAttachFn,null,slotName)}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],noopNgModelController={$setViewValue:noop,$render:noop},SelectController=["$element","$scope",function($element,$scope){var self=this,optionsMap=new HashMap;self.ngModelCtrl=noopNgModelController,self.unknownOption=jqLite(window.document.createElement("option")),self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";self.unknownOption.val(unknownVal),$element.prepend(self.unknownOption),$element.val(unknownVal)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop}),self.removeUnknownOption=function(){self.unknownOption.parent()&&self.unknownOption.remove()},self.readValue=function(){return self.removeUnknownOption(),$element.val()},self.writeValue=function(value){self.hasOption(value)?(self.removeUnknownOption(),$element.val(value),""===value&&self.emptyOption.prop("selected",!0)):null==value&&self.emptyOption?(self.removeUnknownOption(),$element.val("")):self.renderUnknownOption(value)},self.addOption=function(value,element){if(element[0].nodeType!==NODE_TYPE_COMMENT){assertNotHasOwnProperty(value,'"option value"'),""===value&&(self.emptyOption=element);var count=optionsMap.get(value)||0;optionsMap.put(value,count+1),self.ngModelCtrl.$render(),chromeHack(element)}},self.removeOption=function(value){var count=optionsMap.get(value);count&&(1===count?(optionsMap.remove(value),""===value&&(self.emptyOption=void 0)):optionsMap.put(value,count-1))},self.hasOption=function(value){return!!optionsMap.get(value)},self.registerOption=function(optionScope,optionElement,optionAttrs,interpolateValueFn,interpolateTextFn){if(interpolateValueFn){var oldVal;optionAttrs.$observe("value",function(newVal){isDefined(oldVal)&&self.removeOption(oldVal),oldVal=newVal,self.addOption(newVal,optionElement)})}else interpolateTextFn?optionScope.$watch(interpolateTextFn,function(newVal,oldVal){optionAttrs.$set("value",newVal),oldVal!==newVal&&self.removeOption(oldVal),self.addOption(newVal,optionElement)}):self.addOption(optionAttrs.value,optionElement);optionElement.on("$destroy",function(){self.removeOption(optionAttrs.value),self.ngModelCtrl.$render()})}}],selectDirective=function(){function selectPreLink(scope,element,attr,ctrls){var ngModelCtrl=ctrls[1];if(ngModelCtrl){var selectCtrl=ctrls[0];if(selectCtrl.ngModelCtrl=ngModelCtrl,element.on("change",function(){scope.$apply(function(){ngModelCtrl.$setViewValue(selectCtrl.readValue())})}),attr.multiple){selectCtrl.readValue=function(){var array=[];return forEach(element.find("option"),function(option){option.selected&&array.push(option.value)}),array},selectCtrl.writeValue=function(value){var items=new HashMap(value);forEach(element.find("option"),function(option){option.selected=isDefined(items.get(option.value))})};var lastView,lastViewRef=NaN;scope.$watch(function(){lastViewRef!==ngModelCtrl.$viewValue||equals(lastView,ngModelCtrl.$viewValue)||(lastView=shallowCopy(ngModelCtrl.$viewValue),ngModelCtrl.$render()),lastViewRef=ngModelCtrl.$viewValue}),ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}}}}function selectPostLink(scope,element,attrs,ctrls){var ngModelCtrl=ctrls[1];if(ngModelCtrl){var selectCtrl=ctrls[0];ngModelCtrl.$render=function(){selectCtrl.writeValue(ngModelCtrl.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:SelectController,priority:1,link:{pre:selectPreLink,post:selectPostLink}}},optionDirective=["$interpolate",function($interpolate){return{restrict:"E",priority:100,compile:function(element,attr){if(isDefined(attr.value))var interpolateValueFn=$interpolate(attr.value,!0);else{var interpolateTextFn=$interpolate(element.text(),!0);interpolateTextFn||attr.$set("value",element.text())}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.registerOption(scope,element,attr,interpolateValueFn,interpolateTextFn)}}}}],styleDirective=valueFn({restrict:"E",terminal:!1}),requiredDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){ctrl&&(attr.required=!0,ctrl.$validators.required=function(modelValue,viewValue){return!attr.required||!ctrl.$isEmpty(viewValue)},attr.$observe("required",function(){ctrl.$validate()}))}}},patternDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe("pattern",function(regex){if(isString(regex)&&regex.length>0&&(regex=new RegExp("^"+regex+"$")),regex&&!regex.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm));regexp=regex||void 0,ctrl.$validate()}),ctrl.$validators.pattern=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(regexp)||regexp.test(viewValue)}}}}},maxlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var maxlength=-1;attr.$observe("maxlength",function(value){var intVal=toInt(value);maxlength=isNaN(intVal)?-1:intVal,ctrl.$validate()}),ctrl.$validators.maxlength=function(modelValue,viewValue){return maxlength<0||ctrl.$isEmpty(viewValue)||viewValue.length<=maxlength}}}}},minlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var minlength=0;attr.$observe("minlength",function(value){minlength=toInt(value)||0,ctrl.$validate()}),ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlength}}}}};return window.angular.bootstrap?void(window.console&&console.log("WARNING: Tried to load angular more than once.")):(bindJQuery(),publishExternalAPI(angular),angular.module("ngLocale",[],["$provide",function($provide){function getDecimals(n){n+="";var i=n.indexOf(".");return i==-1?0:n.length-i-1}function getVF(n,opt_precision){var v=opt_precision;void 0===v&&(v=Math.min(getDecimals(n),3));var base=Math.pow(10,v),f=(n*base|0)%base;return{v:v,f:f}}var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-Â¤",negSuf:"",posPre:"Â¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(n,opt_precision){var i=0|n,vf=getVF(n,opt_precision);return 1==i&&0==vf.v?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}})}]),void jqLite(window.document).ready(function(){angularInit(window.document,bootstrap)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),angular.module("ui.bootstrap",["ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function($q,$timeout,$rootScope){function findEndEventName(endEventNames){for(var name in endEventNames)if(void 0!==transElement.style[name])return endEventNames[name]}var $transition=function(element,trigger,options){options=options||{};var deferred=$q.defer(),endEventName=$transition[options.animation?"animationEndEventName":"transitionEndEventName"],transitionEndHandler=function(event){$rootScope.$apply(function(){element.unbind(endEventName,transitionEndHandler),deferred.resolve(element)})};return endEventName&&element.bind(endEventName,transitionEndHandler),$timeout(function(){angular.isString(trigger)?element.addClass(trigger):angular.isFunction(trigger)?trigger(element):angular.isObject(trigger)&&element.css(trigger),endEventName||deferred.resolve(element)}),deferred.promise.cancel=function(){endEventName&&element.unbind(endEventName,transitionEndHandler),deferred.reject("Transition cancelled")},deferred.promise},transElement=document.createElement("trans"),transitionEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},animationEndEventNames={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return $transition.transitionEndEventName=findEndEventName(transitionEndEventNames),$transition.animationEndEventName=findEndEventName(animationEndEventNames),$transition}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function($transition){return{link:function(scope,element,attrs){function doTransition(change){function newTransitionDone(){currentTransition===newTransition&&(currentTransition=void 0)}var newTransition=$transition(element,change);return currentTransition&&currentTransition.cancel(),currentTransition=newTransition,newTransition.then(newTransitionDone,newTransitionDone),newTransition}function expand(){initialAnimSkip?(initialAnimSkip=!1,expandDone()):(element.removeClass("collapse").addClass("collapsing"),doTransition({height:element[0].scrollHeight+"px"}).then(expandDone))}function expandDone(){element.removeClass("collapsing"),element.addClass("collapse in"),element.css({height:"auto"})}function collapse(){if(initialAnimSkip)initialAnimSkip=!1,collapseDone(),element.css({height:0});else{element.css({height:element[0].scrollHeight+"px"});element[0].offsetWidth;element.removeClass("collapse in").addClass("collapsing"),doTransition({height:0}).then(collapseDone)}}function collapseDone(){element.removeClass("collapsing"),element.addClass("collapse")}var currentTransition,initialAnimSkip=!0;scope.$watch(attrs.collapse,function(shouldCollapse){shouldCollapse?collapse():expand()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function($scope,$attrs,accordionConfig){this.groups=[],this.closeOthers=function(openGroup){var closeOthers=angular.isDefined($attrs.closeOthers)?$scope.$eval($attrs.closeOthers):accordionConfig.closeOthers;closeOthers&&angular.forEach(this.groups,function(group){group!==openGroup&&(group.isOpen=!1)})},this.addGroup=function(groupScope){var that=this;this.groups.push(groupScope),groupScope.$on("$destroy",function(event){that.removeGroup(groupScope)})},this.removeGroup=function(group){var index=this.groups.indexOf(group);index!==-1&&this.groups.splice(index,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(element){this.heading=element}},link:function(scope,element,attrs,accordionCtrl){accordionCtrl.addGroup(scope),scope.$watch("isOpen",function(value){value&&accordionCtrl.closeOthers(scope)}),scope.toggleOpen=function(){scope.isDisabled||(scope.isOpen=!scope.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(scope,element,attr,accordionGroupCtrl,transclude){accordionGroupCtrl.setHeading(transclude(scope,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(scope,element,attr,controller){scope.$watch(function(){return controller[attr.accordionTransclude]},function(heading){heading&&(element.html(""),element.append(heading))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function($scope,$attrs){$scope.closeable="close"in $attrs,this.close=$scope.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function($timeout){return{require:"alert",link:function(scope,element,attrs,alertCtrl){$timeout(function(){alertCtrl.close()},parseInt(attrs.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(scope,element,attr){element.addClass("ng-binding").data("$binding",attr.bindHtmlUnsafe),scope.$watch(attr.bindHtmlUnsafe,function(value){element.html(value||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(buttonConfig){this.activeClass=buttonConfig.activeClass||"active",this.toggleEvent=buttonConfig.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.btnRadio)))},element.bind(buttonsCtrl.toggleEvent,function(){var isActive=element.hasClass(buttonsCtrl.activeClass);isActive&&!angular.isDefined(attrs.uncheckable)||scope.$apply(function(){ngModelCtrl.$setViewValue(isActive?null:scope.$eval(attrs.btnRadio)),ngModelCtrl.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(scope,element,attrs,ctrls){function getTrueValue(){return getCheckboxValue(attrs.btnCheckboxTrue,!0)}function getFalseValue(){return getCheckboxValue(attrs.btnCheckboxFalse,!1)}function getCheckboxValue(attributeValue,defaultValue){var val=scope.$eval(attributeValue);return angular.isDefined(val)?val:defaultValue}var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))},element.bind(buttonsCtrl.toggleEvent,function(){scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue()),ngModelCtrl.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function($scope,$timeout,$interval,$transition){function restartTimer(){resetTimer();var interval=+$scope.interval;!isNaN(interval)&&interval>0&&(currentInterval=$interval(timerFn,interval))}function resetTimer(){currentInterval&&($interval.cancel(currentInterval),currentInterval=null)}function timerFn(){var interval=+$scope.interval;isPlaying&&!isNaN(interval)&&interval>0?$scope.next():$scope.pause()}var currentInterval,isPlaying,self=this,slides=self.slides=$scope.slides=[],currentIndex=-1;self.currentSlide=null;var destroyed=!1;self.select=$scope.select=function(nextSlide,direction){function goNext(){if(!destroyed){if(self.currentSlide&&angular.isString(direction)&&!$scope.noTransition&&nextSlide.$element){nextSlide.$element.addClass(direction);nextSlide.$element[0].offsetWidth;angular.forEach(slides,function(slide){angular.extend(slide,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(nextSlide,{direction:direction,active:!0,entering:!0}),angular.extend(self.currentSlide||{},{direction:direction,leaving:!0}),$scope.$currentTransition=$transition(nextSlide.$element,{}),function(next,current){$scope.$currentTransition.then(function(){transitionDone(next,current)},function(){transitionDone(next,current)})}(nextSlide,self.currentSlide)}else transitionDone(nextSlide,self.currentSlide);self.currentSlide=nextSlide,currentIndex=nextIndex,restartTimer()}}function transitionDone(next,current){angular.extend(next,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(current||{},{direction:"",active:!1,leaving:!1,entering:!1}),$scope.$currentTransition=null}var nextIndex=slides.indexOf(nextSlide);void 0===direction&&(direction=nextIndex>currentIndex?"next":"prev"),nextSlide&&nextSlide!==self.currentSlide&&($scope.$currentTransition?($scope.$currentTransition.cancel(),$timeout(goNext)):goNext())},$scope.$on("$destroy",function(){destroyed=!0}),self.indexOfSlide=function(slide){return slides.indexOf(slide)},$scope.next=function(){var newIndex=(currentIndex+1)%slides.length;if(!$scope.$currentTransition)return self.select(slides[newIndex],"next")},$scope.prev=function(){var newIndex=currentIndex-1<0?slides.length-1:currentIndex-1;if(!$scope.$currentTransition)return self.select(slides[newIndex],"prev")},$scope.isActive=function(slide){return self.currentSlide===slide},$scope.$watch("interval",restartTimer),$scope.$on("$destroy",resetTimer),$scope.play=function(){isPlaying||(isPlaying=!0,restartTimer())},$scope.pause=function(){$scope.noPause||(isPlaying=!1,resetTimer())},self.addSlide=function(slide,element){slide.$element=element,slides.push(slide),1===slides.length||slide.active?(self.select(slides[slides.length-1]),1==slides.length&&$scope.play()):slide.active=!1},self.removeSlide=function(slide){var index=slides.indexOf(slide);slides.splice(index,1),slides.length>0&&slide.active?index>=slides.length?self.select(slides[index-1]):self.select(slides[index]):currentIndex>index&&currentIndex--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(scope,element,attrs,carouselCtrl){carouselCtrl.addSlide(scope,element),scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)}),scope.$watch("active",function(active){active&&carouselCtrl.select(scope)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function($locale,orderByFilter){function createParser(format){var map=[],regex=format.split("");return angular.forEach(formatCodeToRegex,function(data,code){var index=format.indexOf(code);if(index>-1){format=format.split(""),regex[index]="("+data.regex+")",format[index]="$";for(var i=index+1,n=index+code.length;i<n;i++)regex[i]="",format[i]="$";format=format.join(""),map.push({index:index,apply:data.apply})}}),{regex:new RegExp("^"+regex.join("")+"$"),map:orderByFilter(map,"index")}}function isValid(year,month,date){return 1===month&&date>28?29===date&&(year%4===0&&year%100!==0||year%400===0):3!==month&&5!==month&&8!==month&&10!==month||date<31}this.parsers={};var formatCodeToRegex={yyyy:{regex:"\\d{4}",apply:function(value){this.year=+value}},yy:{regex:"\\d{2}",apply:function(value){this.year=+value+2e3}},y:{regex:"\\d{1,4}",apply:function(value){this.year=+value}},MMMM:{regex:$locale.DATETIME_FORMATS.MONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.MONTH.indexOf(value)}},MMM:{regex:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(value){this.month=value-1}},M:{regex:"[1-9]|1[0-2]",apply:function(value){this.month=value-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value}},EEEE:{regex:$locale.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:$locale.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(input,format){if(!angular.isString(input)||!format)return input;format=$locale.DATETIME_FORMATS[format]||format,this.parsers[format]||(this.parsers[format]=createParser(format));var parser=this.parsers[format],regex=parser.regex,map=parser.map,results=input.match(regex);if(results&&results.length){for(var dt,fields={year:1900,month:0,date:1,hours:0},i=1,n=results.length;i<n;i++){var mapper=map[i-1];mapper.apply&&mapper.apply.call(fields,results[i])}return isValid(fields.year,fields.month,fields.date)&&(dt=new Date(fields.year,fields.month,fields.date,fields.hours)),dt}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function($document,$window){function getStyle(el,cssprop){return el.currentStyle?el.currentStyle[cssprop]:$window.getComputedStyle?$window.getComputedStyle(el)[cssprop]:el.style[cssprop]}function isStaticPositioned(element){return"static"===(getStyle(element,"position")||"static")}var parentOffsetEl=function(element){for(var docDomEl=$document[0],offsetParent=element.offsetParent||docDomEl;offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||docDomEl};return{position:function(element){var elBCR=this.offset(element),offsetParentBCR={top:0,left:0},offsetParentEl=parentOffsetEl(element[0]);offsetParentEl!=$document[0]&&(offsetParentBCR=this.offset(angular.element(offsetParentEl)),offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop,offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft);var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}},positionElements:function(hostEl,targetEl,positionStr,appendToBody){var hostElPos,targetElWidth,targetElHeight,targetElPos,positionStrParts=positionStr.split("-"),pos0=positionStrParts[0],pos1=positionStrParts[1]||"center";hostElPos=appendToBody?this.offset(hostEl):this.position(hostEl),targetElWidth=targetEl.prop("offsetWidth"),targetElHeight=targetEl.prop("offsetHeight");var shiftWidth={center:function(){return hostElPos.left+hostElPos.width/2-targetElWidth/2},left:function(){return hostElPos.left},right:function(){return hostElPos.left+hostElPos.width}},shiftHeight={center:function(){return hostElPos.top+hostElPos.height/2-targetElHeight/2},top:function(){return hostElPos.top},bottom:function(){return hostElPos.top+hostElPos.height}};switch(pos0){case"right":targetElPos={top:shiftHeight[pos1](),left:shiftWidth[pos0]()};break;case"left":targetElPos={top:shiftHeight[pos1](),left:hostElPos.left-targetElWidth};break;case"bottom":targetElPos={top:shiftHeight[pos0](),left:shiftWidth[pos1]()};break;default:targetElPos={top:hostElPos.top-targetElHeight,left:shiftWidth[pos1]()}}return targetElPos}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function($scope,$attrs,$parse,$interpolate,$timeout,$log,dateFilter,datepickerConfig){var self=this,ngModelCtrl={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(key,index){self[key]=angular.isDefined($attrs[key])?index<8?$interpolate($attrs[key])($scope.$parent):$scope.$parent.$eval($attrs[key]):datepickerConfig[key]}),angular.forEach(["minDate","maxDate"],function(key){$attrs[key]?$scope.$parent.$watch($parse($attrs[key]),function(value){self[key]=value?new Date(value):null,self.refreshView()}):self[key]=datepickerConfig[key]?new Date(datepickerConfig[key]):null}),$scope.datepickerMode=$scope.datepickerMode||datepickerConfig.datepickerMode,$scope.uniqueId="datepicker-"+$scope.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined($attrs.initDate)?$scope.$parent.$eval($attrs.initDate):new Date,$scope.isActive=function(dateObject){return 0===self.compare(dateObject.date,self.activeDate)&&($scope.activeDateId=dateObject.uid,!0)},this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=function(){self.render()}},this.render=function(){if(ngModelCtrl.$modelValue){var date=new Date(ngModelCtrl.$modelValue),isValid=!isNaN(date);isValid?this.activeDate=date:$log.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),ngModelCtrl.$setValidity("date",isValid)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var date=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):null;ngModelCtrl.$setValidity("date-disabled",!date||this.element&&!this.isDisabled(date))}},this.createDateObject=function(date,format){var model=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):null;return{date:date,label:dateFilter(date,format),selected:model&&0===this.compare(date,model),disabled:this.isDisabled(date),current:0===this.compare(date,new Date)}},this.isDisabled=function(date){return this.minDate&&this.compare(date,this.minDate)<0||this.maxDate&&this.compare(date,this.maxDate)>0||$attrs.dateDisabled&&$scope.dateDisabled({date:date,mode:$scope.datepickerMode})},this.split=function(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays},$scope.select=function(date){if($scope.datepickerMode===self.minMode){var dt=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):new Date(0,0,0,0,0,0,0);dt.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),ngModelCtrl.$setViewValue(dt),ngModelCtrl.$render()}else self.activeDate=date,$scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)-1]},$scope.move=function(direction){var year=self.activeDate.getFullYear()+direction*(self.step.years||0),month=self.activeDate.getMonth()+direction*(self.step.months||0);self.activeDate.setFullYear(year,month,1),self.refreshView()},$scope.toggleMode=function(direction){direction=direction||1,$scope.datepickerMode===self.maxMode&&1===direction||$scope.datepickerMode===self.minMode&&direction===-1||($scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)+direction])},$scope.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var focusElement=function(){$timeout(function(){self.element[0].focus()},0,!1)};$scope.$on("datepicker.focus",focusElement),$scope.keydown=function(evt){var key=$scope.keys[evt.which];if(key&&!evt.shiftKey&&!evt.altKey)if(evt.preventDefault(),evt.stopPropagation(),"enter"===key||"space"===key){if(self.isDisabled(self.activeDate))return;$scope.select(self.activeDate),focusElement()}else!evt.ctrlKey||"up"!==key&&"down"!==key?(self.handleKeyDown(key,evt),self.refreshView()):($scope.toggleMode("up"===key?1:-1),focusElement())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&datepickerCtrl.init(ngModelCtrl)}}}).directive("daypicker",["dateFilter",function(dateFilter){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(scope,element,attrs,ctrl){function getDaysInMonth(year,month){return 1!==month||year%4!==0||year%100===0&&year%400!==0?DAYS_IN_MONTH[month]:29}function getDates(startDate,n){var dates=new Array(n),current=new Date(startDate),i=0;for(current.setHours(12);i<n;)dates[i++]=new Date(current),current.setDate(current.getDate()+1);return dates}function getISO8601WeekNumber(date){var checkDate=new Date(date);checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();return checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1}scope.showWeeks=ctrl.showWeeks,ctrl.step={months:1},ctrl.element=element;var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];ctrl._refreshView=function(){var year=ctrl.activeDate.getFullYear(),month=ctrl.activeDate.getMonth(),firstDayOfMonth=new Date(year,month,1),difference=ctrl.startingDay-firstDayOfMonth.getDay(),numDisplayedFromPreviousMonth=difference>0?7-difference:-difference,firstDate=new Date(firstDayOfMonth);numDisplayedFromPreviousMonth>0&&firstDate.setDate(-numDisplayedFromPreviousMonth+1);for(var days=getDates(firstDate,42),i=0;i<42;i++)days[i]=angular.extend(ctrl.createDateObject(days[i],ctrl.formatDay),{secondary:days[i].getMonth()!==month,uid:scope.uniqueId+"-"+i});scope.labels=new Array(7);for(var j=0;j<7;j++)scope.labels[j]={abbr:dateFilter(days[j].date,ctrl.formatDayHeader),full:dateFilter(days[j].date,"EEEE")};if(scope.title=dateFilter(ctrl.activeDate,ctrl.formatDayTitle),scope.rows=ctrl.split(days,7),scope.showWeeks){scope.weekNumbers=[];for(var weekNumber=getISO8601WeekNumber(scope.rows[0][0].date),numWeeks=scope.rows.length;scope.weekNumbers.push(weekNumber++)<numWeeks;);}},ctrl.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth(),date1.getDate())-new Date(date2.getFullYear(),date2.getMonth(),date2.getDate())},ctrl.handleKeyDown=function(key,evt){var date=ctrl.activeDate.getDate();if("left"===key)date-=1;else if("up"===key)date-=7;else if("right"===key)date+=1;else if("down"===key)date+=7;else if("pageup"===key||"pagedown"===key){var month=ctrl.activeDate.getMonth()+("pageup"===key?-1:1);ctrl.activeDate.setMonth(month,1),date=Math.min(getDaysInMonth(ctrl.activeDate.getFullYear(),ctrl.activeDate.getMonth()),date)}else"home"===key?date=1:"end"===key&&(date=getDaysInMonth(ctrl.activeDate.getFullYear(),ctrl.activeDate.getMonth()));ctrl.activeDate.setDate(date)},ctrl.refreshView()}}}]).directive("monthpicker",["dateFilter",function(dateFilter){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(scope,element,attrs,ctrl){ctrl.step={years:1},ctrl.element=element,ctrl._refreshView=function(){for(var months=new Array(12),year=ctrl.activeDate.getFullYear(),i=0;i<12;i++)months[i]=angular.extend(ctrl.createDateObject(new Date(year,i,1),ctrl.formatMonth),{uid:scope.uniqueId+"-"+i});scope.title=dateFilter(ctrl.activeDate,ctrl.formatMonthTitle),scope.rows=ctrl.split(months,3)},ctrl.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth())-new Date(date2.getFullYear(),date2.getMonth())},ctrl.handleKeyDown=function(key,evt){var date=ctrl.activeDate.getMonth();if("left"===key)date-=1;else if("up"===key)date-=3;else if("right"===key)date+=1;else if("down"===key)date+=3;else if("pageup"===key||"pagedown"===key){var year=ctrl.activeDate.getFullYear()+("pageup"===key?-1:1);ctrl.activeDate.setFullYear(year)}else"home"===key?date=0:"end"===key&&(date=11);ctrl.activeDate.setMonth(date)},ctrl.refreshView()}}}]).directive("yearpicker",["dateFilter",function(dateFilter){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(scope,element,attrs,ctrl){function getStartingYear(year){return parseInt((year-1)/range,10)*range+1}var range=ctrl.yearRange;ctrl.step={years:range},ctrl.element=element,ctrl._refreshView=function(){for(var years=new Array(range),i=0,start=getStartingYear(ctrl.activeDate.getFullYear());i<range;i++)years[i]=angular.extend(ctrl.createDateObject(new Date(start+i,0,1),ctrl.formatYear),{uid:scope.uniqueId+"-"+i});scope.title=[years[0].label,years[range-1].label].join(" - "),scope.rows=ctrl.split(years,5)},ctrl.compare=function(date1,date2){return date1.getFullYear()-date2.getFullYear()},ctrl.handleKeyDown=function(key,evt){var date=ctrl.activeDate.getFullYear();"left"===key?date-=1:"up"===key?date-=5:"right"===key?date+=1:"down"===key?date+=5:"pageup"===key||"pagedown"===key?date+=("pageup"===key?-1:1)*ctrl.step.years:"home"===key?date=getStartingYear(ctrl.activeDate.getFullYear()):"end"===key&&(date=getStartingYear(ctrl.activeDate.getFullYear())+range-1),ctrl.activeDate.setFullYear(date)},ctrl.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function($compile,$parse,$document,$position,dateFilter,dateParser,datepickerPopupConfig){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(scope,element,attrs,ngModel){function cameltoDash(string){return string.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function parseDate(viewValue){if(viewValue){if(angular.isDate(viewValue)&&!isNaN(viewValue))return ngModel.$setValidity("date",!0),viewValue;if(angular.isString(viewValue)){var date=dateParser.parse(viewValue,dateFormat)||new Date(viewValue);return isNaN(date)?void ngModel.$setValidity("date",!1):(ngModel.$setValidity("date",!0),date)}return void ngModel.$setValidity("date",!1)}return ngModel.$setValidity("date",!0),null}var dateFormat,closeOnDateSelection=angular.isDefined(attrs.closeOnDateSelection)?scope.$parent.$eval(attrs.closeOnDateSelection):datepickerPopupConfig.closeOnDateSelection,appendToBody=angular.isDefined(attrs.datepickerAppendToBody)?scope.$parent.$eval(attrs.datepickerAppendToBody):datepickerPopupConfig.appendToBody;scope.showButtonBar=angular.isDefined(attrs.showButtonBar)?scope.$parent.$eval(attrs.showButtonBar):datepickerPopupConfig.showButtonBar,scope.getText=function(key){return scope[key+"Text"]||datepickerPopupConfig[key+"Text"]},attrs.$observe("datepickerPopup",function(value){dateFormat=value||datepickerPopupConfig.datepickerPopup,ngModel.$render()});var popupEl=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");popupEl.attr({"ng-model":"date","ng-change":"dateSelection()"});var datepickerEl=angular.element(popupEl.children()[0]);attrs.datepickerOptions&&angular.forEach(scope.$parent.$eval(attrs.datepickerOptions),function(value,option){datepickerEl.attr(cameltoDash(option),value)}),scope.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(key){if(attrs[key]){var getAttribute=$parse(attrs[key]);if(scope.$parent.$watch(getAttribute,function(value){scope.watchData[key]=value}),datepickerEl.attr(cameltoDash(key),"watchData."+key),"datepickerMode"===key){var setAttribute=getAttribute.assign;scope.$watch("watchData."+key,function(value,oldvalue){value!==oldvalue&&setAttribute(scope.$parent,value)})}}}),attrs.dateDisabled&&datepickerEl.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),ngModel.$parsers.unshift(parseDate),scope.dateSelection=function(dt){angular.isDefined(dt)&&(scope.date=dt),ngModel.$setViewValue(scope.date),ngModel.$render(),closeOnDateSelection&&(scope.isOpen=!1,element[0].focus())},element.bind("input change keyup",function(){scope.$apply(function(){scope.date=ngModel.$modelValue})}),ngModel.$render=function(){var date=ngModel.$viewValue?dateFilter(ngModel.$viewValue,dateFormat):"";element.val(date),scope.date=parseDate(ngModel.$modelValue)};var documentClickBind=function(event){scope.isOpen&&event.target!==element[0]&&scope.$apply(function(){scope.isOpen=!1})},keydown=function(evt,noApply){scope.keydown(evt)};element.bind("keydown",keydown),scope.keydown=function(evt){27===evt.which?(evt.preventDefault(),evt.stopPropagation(),scope.close()):40!==evt.which||scope.isOpen||(scope.isOpen=!0)},scope.$watch("isOpen",function(value){value?(scope.$broadcast("datepicker.focus"),scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top=scope.position.top+element.prop("offsetHeight"),$document.bind("click",documentClickBind)):$document.unbind("click",documentClickBind)}),scope.select=function(date){if("today"===date){var today=new Date;angular.isDate(ngModel.$modelValue)?(date=new Date(ngModel.$modelValue),date.setFullYear(today.getFullYear(),today.getMonth(),today.getDate())):date=new Date(today.setHours(0,0,0,0))}scope.dateSelection(date)},scope.close=function(){scope.isOpen=!1,element[0].focus()};var $popup=$compile(popupEl)(scope);popupEl.remove(),appendToBody?$document.find("body").append($popup):element.after($popup),scope.$on("$destroy",function(){$popup.remove(),element.unbind("keydown",keydown),$document.unbind("click",documentClickBind)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(scope,element,attrs){element.bind("click",function(event){event.preventDefault(),event.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function($document){var openScope=null;this.open=function(dropdownScope){openScope||($document.bind("click",closeDropdown),$document.bind("keydown",escapeKeyBind)),openScope&&openScope!==dropdownScope&&(openScope.isOpen=!1),openScope=dropdownScope},this.close=function(dropdownScope){openScope===dropdownScope&&(openScope=null,$document.unbind("click",closeDropdown),$document.unbind("keydown",escapeKeyBind))};var closeDropdown=function(evt){if(openScope){var toggleElement=openScope.getToggleElement();evt&&toggleElement&&toggleElement[0].contains(evt.target)||openScope.$apply(function(){openScope.isOpen=!1})}},escapeKeyBind=function(evt){27===evt.which&&(openScope.focusToggleElement(),closeDropdown())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function($scope,$attrs,$parse,dropdownConfig,dropdownService,$animate){var getIsOpen,self=this,scope=$scope.$new(),openClass=dropdownConfig.openClass,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop;this.init=function(element){self.$element=element,$attrs.isOpen&&(getIsOpen=$parse($attrs.isOpen),setIsOpen=getIsOpen.assign,$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value}))},this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen},this.isOpen=function(){return scope.isOpen},scope.getToggleElement=function(){return self.toggleElement},scope.focusToggleElement=function(){self.toggleElement&&self.toggleElement[0].focus()},scope.$watch("isOpen",function(isOpen,wasOpen){$animate[isOpen?"addClass":"removeClass"](self.$element,openClass),isOpen?(scope.focusToggleElement(),dropdownService.open(scope)):dropdownService.close(scope),setIsOpen($scope,isOpen),angular.isDefined(isOpen)&&isOpen!==wasOpen&&toggleInvoker($scope,{open:!!isOpen})}),$scope.$on("$locationChangeSuccess",function(){scope.isOpen=!1}),$scope.$on("$destroy",function(){scope.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(scope,element,attrs,dropdownCtrl){dropdownCtrl.init(element)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl){dropdownCtrl.toggleElement=element;var toggleDropdown=function(event){event.preventDefault(),element.hasClass("disabled")||attrs.disabled||scope.$apply(function(){dropdownCtrl.toggle()})};element.bind("click",toggleDropdown),element.attr({"aria-haspopup":!0,"aria-expanded":!1}),scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)}),scope.$on("$destroy",function(){element.unbind("click",toggleDropdown)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value})},get:function(key){for(var i=0;i<stack.length;i++)if(key==stack[i].key)return stack[i]},keys:function(){for(var keys=[],i=0;i<stack.length;i++)keys.push(stack[i].key);return keys},top:function(){return stack[stack.length-1]},remove:function(key){for(var idx=-1,i=0;i<stack.length;i++)if(key==stack[i].key){idx=i;break}return stack.splice(idx,1)[0]},removeTop:function(){return stack.splice(stack.length-1,1)[0]},length:function(){return stack.length}}}}}).directive("modalBackdrop",["$timeout",function($timeout){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(scope,element,attrs){scope.backdropClass=attrs.backdropClass||"",scope.animate=!1,$timeout(function(){scope.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function($modalStack,$timeout){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"template/modal/window.html"},link:function(scope,element,attrs){element.addClass(attrs.windowClass||""),scope.size=attrs.size,$timeout(function(){scope.animate=!0,element[0].querySelectorAll("[autofocus]").length||element[0].focus()}),scope.close=function(evt){var modal=$modalStack.getTop();modal&&modal.value.backdrop&&"static"!=modal.value.backdrop&&evt.target===evt.currentTarget&&(evt.preventDefault(),evt.stopPropagation(),$modalStack.dismiss(modal.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function($scope,$element,$attrs,controller,$transclude){$transclude($scope.$parent,function(clone){$element.empty(),$element.append(clone)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function($transition,$timeout,$document,$compile,$rootScope,$$stackedMap){function backdropIndex(){for(var topBackdropIndex=-1,opened=openedWindows.keys(),i=0;i<opened.length;i++)openedWindows.get(opened[i]).value.backdrop&&(topBackdropIndex=i);return topBackdropIndex}function removeModalWindow(modalInstance){var body=$document.find("body").eq(0),modalWindow=openedWindows.get(modalInstance).value;openedWindows.remove(modalInstance),removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,300,function(){modalWindow.modalScope.$destroy(),body.toggleClass(OPENED_MODAL_CLASS,openedWindows.length()>0),checkRemoveBackdrop()})}function checkRemoveBackdrop(){if(backdropDomEl&&backdropIndex()==-1){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,150,function(){backdropScopeRef.$destroy(),backdropScopeRef=null}),backdropDomEl=void 0,backdropScope=void 0}}function removeAfterAnimate(domEl,scope,emulateTime,done){function afterAnimating(){afterAnimating.done||(afterAnimating.done=!0,domEl.remove(),done&&done())}scope.animate=!1;var transitionEndEventName=$transition.transitionEndEventName;if(transitionEndEventName){var timeout=$timeout(afterAnimating,emulateTime);domEl.bind(transitionEndEventName,function(){$timeout.cancel(timeout),afterAnimating(),scope.$apply()})}else $timeout(afterAnimating)}var backdropDomEl,backdropScope,OPENED_MODAL_CLASS="modal-open",openedWindows=$$stackedMap.createNew(),$modalStack={};return $rootScope.$watch(backdropIndex,function(newBackdropIndex){backdropScope&&(backdropScope.index=newBackdropIndex)}),$document.bind("keydown",function(evt){var modal;27===evt.which&&(modal=openedWindows.top(),modal&&modal.value.keyboard&&(evt.preventDefault(),$rootScope.$apply(function(){$modalStack.dismiss(modal.key,"escape key press")})))}),$modalStack.open=function(modalInstance,modal){openedWindows.add(modalInstance,{deferred:modal.deferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard});var body=$document.find("body").eq(0),currBackdropIndex=backdropIndex();if(currBackdropIndex>=0&&!backdropDomEl){backdropScope=$rootScope.$new(!0),backdropScope.index=currBackdropIndex;var angularBackgroundDomEl=angular.element("<div modal-backdrop></div>");angularBackgroundDomEl.attr("backdrop-class",modal.backdropClass),backdropDomEl=$compile(angularBackgroundDomEl)(backdropScope),body.append(backdropDomEl)}var angularDomEl=angular.element("<div modal-window></div>");angularDomEl.attr({"template-url":modal.windowTemplateUrl,"window-class":modal.windowClass,size:modal.size,index:openedWindows.length()-1,animate:"animate"}).html(modal.content);var modalDomEl=$compile(angularDomEl)(modal.scope);openedWindows.top().value.modalDomEl=modalDomEl,body.append(modalDomEl),body.addClass(OPENED_MODAL_CLASS)},$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);modalWindow&&(modalWindow.value.deferred.resolve(result),removeModalWindow(modalInstance))},$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);modalWindow&&(modalWindow.value.deferred.reject(reason),removeModalWindow(modalInstance))},$modalStack.dismissAll=function(reason){for(var topModal=this.getTop();topModal;)this.dismiss(topModal.key,reason),topModal=this.getTop()},$modalStack.getTop=function(){return openedWindows.top()},$modalStack}]).provider("$modal",function(){var $modalProvider={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function($injector,$rootScope,$q,$http,$templateCache,$controller,$modalStack){function getTemplatePromise(options){return options.template?$q.when(options.template):$http.get(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl,{cache:$templateCache}).then(function(result){return result.data})}function getResolvePromises(resolves){var promisesArr=[];return angular.forEach(resolves,function(value){(angular.isFunction(value)||angular.isArray(value))&&promisesArr.push($q.when($injector.invoke(value)))}),promisesArr}var $modal={};return $modal.open=function(modalOptions){var modalResultDeferred=$q.defer(),modalOpenedDeferred=$q.defer(),modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,close:function(result){$modalStack.close(modalInstance,result)},dismiss:function(reason){$modalStack.dismiss(modalInstance,reason)}};if(modalOptions=angular.extend({},$modalProvider.options,modalOptions),modalOptions.resolve=modalOptions.resolve||{},!modalOptions.template&&!modalOptions.templateUrl)throw new Error("One of template or templateUrl options is required.");var templateAndResolvePromise=$q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));return templateAndResolvePromise.then(function(tplAndVars){var modalScope=(modalOptions.scope||$rootScope).$new();modalScope.$close=modalInstance.close,modalScope.$dismiss=modalInstance.dismiss;var ctrlInstance,ctrlLocals={},resolveIter=1;modalOptions.controller&&(ctrlLocals.$scope=modalScope,ctrlLocals.$modalInstance=modalInstance,angular.forEach(modalOptions.resolve,function(value,key){ctrlLocals[key]=tplAndVars[resolveIter++]}),ctrlInstance=$controller(modalOptions.controller,ctrlLocals),modalOptions.controllerAs&&(modalScope[modalOptions.controllerAs]=ctrlInstance)),$modalStack.open(modalInstance,{scope:modalScope,deferred:modalResultDeferred,content:tplAndVars[0],backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,size:modalOptions.size})},function(reason){modalResultDeferred.reject(reason)}),templateAndResolvePromise.then(function(){modalOpenedDeferred.resolve(!0)},function(){modalOpenedDeferred.reject(!1)}),modalInstance},$modal}]};return $modalProvider}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function($scope,$attrs,$parse){var self=this,ngModelCtrl={$setViewValue:angular.noop},setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop;this.init=function(ngModelCtrl_,config){ngModelCtrl=ngModelCtrl_,this.config=config,ngModelCtrl.$render=function(){self.render()},$attrs.itemsPerPage?$scope.$parent.$watch($parse($attrs.itemsPerPage),function(value){self.itemsPerPage=parseInt(value,10),$scope.totalPages=self.calculateTotalPages()}):this.itemsPerPage=config.itemsPerPage},this.calculateTotalPages=function(){var totalPages=this.itemsPerPage<1?1:Math.ceil($scope.totalItems/this.itemsPerPage);return Math.max(totalPages||0,1)},this.render=function(){$scope.page=parseInt(ngModelCtrl.$viewValue,10)||1},$scope.selectPage=function(page){$scope.page!==page&&page>0&&page<=$scope.totalPages&&(ngModelCtrl.$setViewValue(page),ngModelCtrl.$render())},$scope.getText=function(key){return $scope[key+"Text"]||self.config[key+"Text"]},$scope.noPrevious=function(){return 1===$scope.page},$scope.noNext=function(){return $scope.page===$scope.totalPages},$scope.$watch("totalItems",function(){$scope.totalPages=self.calculateTotalPages()}),$scope.$watch("totalPages",function(value){setNumPages($scope.$parent,value),$scope.page>value?$scope.selectPage(value):ngModelCtrl.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function($parse,paginationConfig){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(scope,element,attrs,ctrls){function makePage(number,text,isActive){return{number:number,text:text,active:isActive}}function getPages(currentPage,totalPages){var pages=[],startPage=1,endPage=totalPages,isMaxSized=angular.isDefined(maxSize)&&maxSize<totalPages;isMaxSized&&(rotate?(startPage=Math.max(currentPage-Math.floor(maxSize/2),1),endPage=startPage+maxSize-1,endPage>totalPages&&(endPage=totalPages,startPage=endPage-maxSize+1)):(startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1,endPage=Math.min(startPage+maxSize-1,totalPages)));for(var number=startPage;number<=endPage;number++){var page=makePage(number,number,number===currentPage);pages.push(page)}if(isMaxSized&&!rotate){if(startPage>1){var previousPageSet=makePage(startPage-1,"...",!1);pages.unshift(previousPageSet)}if(endPage<totalPages){var nextPageSet=makePage(endPage+1,"...",!1);pages.push(nextPageSet)}}return pages}var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(ngModelCtrl){var maxSize=angular.isDefined(attrs.maxSize)?scope.$parent.$eval(attrs.maxSize):paginationConfig.maxSize,rotate=angular.isDefined(attrs.rotate)?scope.$parent.$eval(attrs.rotate):paginationConfig.rotate;scope.boundaryLinks=angular.isDefined(attrs.boundaryLinks)?scope.$parent.$eval(attrs.boundaryLinks):paginationConfig.boundaryLinks,scope.directionLinks=angular.isDefined(attrs.directionLinks)?scope.$parent.$eval(attrs.directionLinks):paginationConfig.directionLinks,paginationCtrl.init(ngModelCtrl,paginationConfig),attrs.maxSize&&scope.$parent.$watch($parse(attrs.maxSize),function(value){maxSize=parseInt(value,10),paginationCtrl.render()});var originalRender=paginationCtrl.render;paginationCtrl.render=function(){originalRender(),scope.page>0&&scope.page<=scope.totalPages&&(scope.pages=getPages(scope.page,scope.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"Â« Previous",nextText:"Next Â»",align:!0}).directive("pager",["pagerConfig",function(pagerConfig){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(scope,element,attrs,ctrls){var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&(scope.align=angular.isDefined(attrs.align)?scope.$parent.$eval(attrs.align):pagerConfig.align,paginationCtrl.init(ngModelCtrl,pagerConfig))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function snake_case(name){var regexp=/[A-Z]/g,separator="-";return name.replace(regexp,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}var defaultOptions={placement:"top",animation:!0,popupDelay:0},triggerMap={mouseenter:"mouseleave",click:"click",focus:"blur"},globalOptions={};this.options=function(value){angular.extend(globalOptions,value)},this.setTriggers=function(triggers){angular.extend(triggerMap,triggers)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function($window,$compile,$timeout,$document,$position,$interpolate){return function(type,prefix,defaultTriggerShow){function getTriggers(trigger){var show=trigger||options.trigger||defaultTriggerShow,hide=triggerMap[show]||show;return{show:show,hide:hide}}var options=angular.extend({},defaultOptions,globalOptions),directiveName=snake_case(type),startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol(),template="<div "+directiveName+'-popup title="'+startSym+"title"+endSym+'" content="'+startSym+"content"+endSym+'" placement="'+startSym+"placement"+endSym+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(tElem,tAttrs){var tooltipLinker=$compile(template);return function(scope,element,attrs){function toggleTooltipBind(){ttScope.isOpen?hideTooltipBind():showTooltipBind()}function showTooltipBind(){hasEnableExp&&!scope.$eval(attrs[prefix+"Enable"])||(prepareTooltip(),ttScope.popupDelay?popupTimeout||(popupTimeout=$timeout(show,ttScope.popupDelay,!1),popupTimeout.then(function(reposition){reposition()})):show()())}function hideTooltipBind(){scope.$apply(function(){hide()})}function show(){return popupTimeout=null,transitionTimeout&&($timeout.cancel(transitionTimeout),transitionTimeout=null),ttScope.content?(createTooltip(),tooltip.css({top:0,left:0,display:"block"}),ttScope.$digest(),positionTooltip(),ttScope.isOpen=!0,ttScope.$digest(),positionTooltip):angular.noop}function hide(){ttScope.isOpen=!1,$timeout.cancel(popupTimeout),popupTimeout=null,ttScope.animation?transitionTimeout||(transitionTimeout=$timeout(removeTooltip,500)):removeTooltip()}function createTooltip(){tooltip&&removeTooltip(),tooltipLinkedScope=ttScope.$new(),tooltip=tooltipLinker(tooltipLinkedScope,function(tooltip){appendToBody?$document.find("body").append(tooltip):element.after(tooltip)})}function removeTooltip(){transitionTimeout=null,tooltip&&(tooltip.remove(),tooltip=null),tooltipLinkedScope&&(tooltipLinkedScope.$destroy(),tooltipLinkedScope=null)}function prepareTooltip(){prepPlacement(),prepPopupDelay()}function prepPlacement(){var val=attrs[prefix+"Placement"];ttScope.placement=angular.isDefined(val)?val:options.placement}function prepPopupDelay(){var val=attrs[prefix+"PopupDelay"],delay=parseInt(val,10);ttScope.popupDelay=isNaN(delay)?options.popupDelay:delay}function prepTriggers(){var val=attrs[prefix+"Trigger"];unregisterTriggers(),triggers=getTriggers(val),triggers.show===triggers.hide?element.bind(triggers.show,toggleTooltipBind):(element.bind(triggers.show,showTooltipBind),element.bind(triggers.hide,hideTooltipBind))}var tooltip,tooltipLinkedScope,transitionTimeout,popupTimeout,appendToBody=!!angular.isDefined(options.appendToBody)&&options.appendToBody,triggers=getTriggers(void 0),hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]),ttScope=scope.$new(!0),positionTooltip=function(){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody);ttPosition.top+="px",ttPosition.left+="px",tooltip.css(ttPosition)};ttScope.isOpen=!1,attrs.$observe(type,function(val){ttScope.content=val,!val&&ttScope.isOpen&&hide()}),attrs.$observe(prefix+"Title",function(val){ttScope.title=val});var unregisterTriggers=function(){element.unbind(triggers.show,showTooltipBind),element.unbind(triggers.hide,hideTooltipBind)};prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendToBodyVal=scope.$eval(attrs[prefix+"AppendToBody"]);appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody,appendToBody&&scope.$on("$locationChangeSuccess",function(){ttScope.isOpen&&hide()}),scope.$on("$destroy",function(){$timeout.cancel(transitionTimeout),$timeout.cancel(popupTimeout),unregisterTriggers(),removeTooltip(),ttScope=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function($tooltip){return $tooltip("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function($tooltip){return $tooltip("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function($tooltip){return $tooltip("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function($scope,$attrs,progressConfig){var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.bars=[],$scope.max=angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):progressConfig.max,this.addBar=function(bar,element){animate||element.css({transition:"none"}),this.bars.push(bar),bar.$watch("value",function(value){bar.percent=+(100*value/$scope.max).toFixed(2)}),bar.$on("$destroy",function(){element=null,self.removeBar(bar)})},this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,element)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function($scope,$attrs,ratingConfig){var ngModelCtrl={$setViewValue:angular.noop};this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render,this.stateOn=angular.isDefined($attrs.stateOn)?$scope.$parent.$eval($attrs.stateOn):ratingConfig.stateOn,this.stateOff=angular.isDefined($attrs.stateOff)?$scope.$parent.$eval($attrs.stateOff):ratingConfig.stateOff;var ratingStates=angular.isDefined($attrs.ratingStates)?$scope.$parent.$eval($attrs.ratingStates):new Array(angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max);$scope.range=this.buildTemplateObjects(ratingStates)},this.buildTemplateObjects=function(states){for(var i=0,n=states.length;i<n;i++)states[i]=angular.extend({index:i},{stateOn:this.stateOn,stateOff:this.stateOff},states[i]);return states},$scope.rate=function(value){!$scope.readonly&&value>=0&&value<=$scope.range.length&&(ngModelCtrl.$setViewValue(value),ngModelCtrl.$render())},$scope.enter=function(value){$scope.readonly||($scope.value=value),$scope.onHover({value:value})},$scope.reset=function(){$scope.value=ngModelCtrl.$viewValue,$scope.onLeave()},$scope.onKeydown=function(evt){/(37|38|39|40)/.test(evt.which)&&(evt.preventDefault(),evt.stopPropagation(),$scope.rate($scope.value+(38===evt.which||39===evt.which?1:-1)))},this.render=function(){$scope.value=ngModelCtrl.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(scope,element,attrs,ctrls){var ratingCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&ratingCtrl.init(ngModelCtrl)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function($scope){var ctrl=this,tabs=ctrl.tabs=$scope.tabs=[];ctrl.select=function(selectedTab){angular.forEach(tabs,function(tab){tab.active&&tab!==selectedTab&&(tab.active=!1,tab.onDeselect())}),selectedTab.active=!0,selectedTab.onSelect()},ctrl.addTab=function(tab){tabs.push(tab),1===tabs.length?tab.active=!0:tab.active&&ctrl.select(tab)},ctrl.removeTab=function(tab){var index=tabs.indexOf(tab);if(tab.active&&tabs.length>1&&!destroyed){var newActiveIndex=index==tabs.length-1?index-1:index+1;ctrl.select(tabs[newActiveIndex])}tabs.splice(index,1)};var destroyed;$scope.$on("$destroy",function(){destroyed=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(scope,element,attrs){scope.vertical=!!angular.isDefined(attrs.vertical)&&scope.$parent.$eval(attrs.vertical),scope.justified=!!angular.isDefined(attrs.justified)&&scope.$parent.$eval(attrs.justified)}}}).directive("tab",["$parse",function($parse){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(elm,attrs,transclude){return function(scope,elm,attrs,tabsetCtrl){scope.$watch("active",function(active){active&&tabsetCtrl.select(scope)}),scope.disabled=!1,attrs.disabled&&scope.$parent.$watch($parse(attrs.disabled),function(value){scope.disabled=!!value}),scope.select=function(){scope.disabled||(scope.active=!0)},tabsetCtrl.addTab(scope),scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)}),scope.$transcludeFn=transclude}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(scope,elm,attrs,tabCtrl){scope.$watch("headingElement",function(heading){heading&&(elm.html(""),elm.append(heading))})}}}]).directive("tabContentTransclude",function(){function isTabHeading(node){return node.tagName&&(node.hasAttribute("tab-heading")||node.hasAttribute("data-tab-heading")||"tab-heading"===node.tagName.toLowerCase()||"data-tab-heading"===node.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(scope,elm,attrs){var tab=scope.$eval(attrs.tabContentTransclude);tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){isTabHeading(node)?tab.headingElement=node:elm.append(node)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function($scope,$attrs,$parse,$log,$locale,timepickerConfig){function getHoursFromTemplate(){var hours=parseInt($scope.hours,10),valid=$scope.showMeridian?hours>0&&hours<13:hours>=0&&hours<24;if(valid)return $scope.showMeridian&&(12===hours&&(hours=0),$scope.meridian===meridians[1]&&(hours+=12)),hours}function getMinutesFromTemplate(){var minutes=parseInt($scope.minutes,10);return minutes>=0&&minutes<60?minutes:void 0}function pad(value){return angular.isDefined(value)&&value.toString().length<2?"0"+value:value}function refresh(keyboardChange){makeValid(),ngModelCtrl.$setViewValue(new Date(selected)),updateTemplate(keyboardChange)}function makeValid(){ngModelCtrl.$setValidity("time",!0),$scope.invalidHours=!1,$scope.invalidMinutes=!1}function updateTemplate(keyboardChange){var hours=selected.getHours(),minutes=selected.getMinutes();$scope.showMeridian&&(hours=0===hours||12===hours?12:hours%12),$scope.hours="h"===keyboardChange?hours:pad(hours),$scope.minutes="m"===keyboardChange?minutes:pad(minutes),$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1]}function addMinutes(minutes){var dt=new Date(selected.getTime()+6e4*minutes);selected.setHours(dt.getHours(),dt.getMinutes()),refresh()}var selected=new Date,ngModelCtrl={$setViewValue:angular.noop},meridians=angular.isDefined($attrs.meridians)?$scope.$parent.$eval($attrs.meridians):timepickerConfig.meridians||$locale.DATETIME_FORMATS.AMPMS;this.init=function(ngModelCtrl_,inputs){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render;var hoursInputEl=inputs.eq(0),minutesInputEl=inputs.eq(1),mousewheel=angular.isDefined($attrs.mousewheel)?$scope.$parent.$eval($attrs.mousewheel):timepickerConfig.mousewheel;mousewheel&&this.setupMousewheelEvents(hoursInputEl,minutesInputEl),$scope.readonlyInput=angular.isDefined($attrs.readonlyInput)?$scope.$parent.$eval($attrs.readonlyInput):timepickerConfig.readonlyInput,this.setupInputEvents(hoursInputEl,minutesInputEl)};var hourStep=timepickerConfig.hourStep;$attrs.hourStep&&$scope.$parent.$watch($parse($attrs.hourStep),function(value){hourStep=parseInt(value,10)});var minuteStep=timepickerConfig.minuteStep;$attrs.minuteStep&&$scope.$parent.$watch($parse($attrs.minuteStep),function(value){minuteStep=parseInt(value,10)}),$scope.showMeridian=timepickerConfig.showMeridian,$attrs.showMeridian&&$scope.$parent.$watch($parse($attrs.showMeridian),function(value){if($scope.showMeridian=!!value,ngModelCtrl.$error.time){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();angular.isDefined(hours)&&angular.isDefined(minutes)&&(selected.setHours(hours),refresh())}else updateTemplate()}),this.setupMousewheelEvents=function(hoursInputEl,minutesInputEl){var isScrollingUp=function(e){e.originalEvent&&(e=e.originalEvent);var delta=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||delta>0};hoursInputEl.bind("mousewheel wheel",function(e){$scope.$apply(isScrollingUp(e)?$scope.incrementHours():$scope.decrementHours()),e.preventDefault()}),minutesInputEl.bind("mousewheel wheel",function(e){$scope.$apply(isScrollingUp(e)?$scope.incrementMinutes():$scope.decrementMinutes()),e.preventDefault()})},this.setupInputEvents=function(hoursInputEl,minutesInputEl){if($scope.readonlyInput)return $scope.updateHours=angular.noop,void($scope.updateMinutes=angular.noop);var invalidate=function(invalidHours,invalidMinutes){ngModelCtrl.$setViewValue(null),ngModelCtrl.$setValidity("time",!1),angular.isDefined(invalidHours)&&($scope.invalidHours=invalidHours),angular.isDefined(invalidMinutes)&&($scope.invalidMinutes=invalidMinutes)};$scope.updateHours=function(){var hours=getHoursFromTemplate();angular.isDefined(hours)?(selected.setHours(hours),refresh("h")):invalidate(!0)},hoursInputEl.bind("blur",function(e){!$scope.invalidHours&&$scope.hours<10&&$scope.$apply(function(){$scope.hours=pad($scope.hours)})}),$scope.updateMinutes=function(){var minutes=getMinutesFromTemplate();angular.isDefined(minutes)?(selected.setMinutes(minutes),refresh("m")):invalidate(void 0,!0)},minutesInputEl.bind("blur",function(e){!$scope.invalidMinutes&&$scope.minutes<10&&$scope.$apply(function(){$scope.minutes=pad($scope.minutes)})})},this.render=function(){var date=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):null;isNaN(date)?(ngModelCtrl.$setValidity("time",!1),$log.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(date&&(selected=date),makeValid(),updateTemplate())},$scope.incrementHours=function(){addMinutes(60*hourStep)},$scope.decrementHours=function(){addMinutes(60*-hourStep)},$scope.incrementMinutes=function(){addMinutes(minuteStep)},$scope.decrementMinutes=function(){addMinutes(-minuteStep)},$scope.toggleMeridian=function(){addMinutes(720*(selected.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(scope,element,attrs,ctrls){var timepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&timepickerCtrl.init(ngModelCtrl,element.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function($parse){var TYPEAHEAD_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(input){var match=input.match(TYPEAHEAD_REGEXP);if(!match)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+input+'".');return{itemName:match[3],source:$parse(match[4]),viewMapper:$parse(match[2]||match[1]),modelMapper:$parse(match[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function($compile,$parse,$q,$timeout,$document,$position,typeaheadParser){var HOT_KEYS=[9,13,27,38,40];return{require:"ngModel",link:function(originalScope,element,attrs,modelCtrl){var hasFocus,minSearch=originalScope.$eval(attrs.typeaheadMinLength)||1,waitTime=originalScope.$eval(attrs.typeaheadWaitMs)||0,isEditable=originalScope.$eval(attrs.typeaheadEditable)!==!1,isLoadingSetter=$parse(attrs.typeaheadLoading).assign||angular.noop,onSelectCallback=$parse(attrs.typeaheadOnSelect),inputFormatter=attrs.typeaheadInputFormatter?$parse(attrs.typeaheadInputFormatter):void 0,appendToBody=!!attrs.typeaheadAppendToBody&&originalScope.$eval(attrs.typeaheadAppendToBody),focusFirst=originalScope.$eval(attrs.typeaheadFocusFirst)!==!1,$setModelValue=$parse(attrs.ngModel).assign,parserResult=typeaheadParser.parse(attrs.typeahead),scope=originalScope.$new();originalScope.$on("$destroy",function(){scope.$destroy()});var popupId="typeahead-"+scope.$id+"-"+Math.floor(1e4*Math.random());element.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":popupId});var popUpEl=angular.element("<div typeahead-popup></div>");popUpEl.attr({id:popupId,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(attrs.typeaheadTemplateUrl)&&popUpEl.attr("template-url",attrs.typeaheadTemplateUrl);var resetMatches=function(){scope.matches=[],scope.activeIdx=-1,element.attr("aria-expanded",!1)},getMatchId=function(index){return popupId+"-option-"+index};scope.$watch("activeIdx",function(index){index<0?element.removeAttr("aria-activedescendant"):element.attr("aria-activedescendant",getMatchId(index))});var getMatchesAsync=function(inputValue){var locals={$viewValue:inputValue};isLoadingSetter(originalScope,!0),$q.when(parserResult.source(originalScope,locals)).then(function(matches){var onCurrentRequest=inputValue===modelCtrl.$viewValue;if(onCurrentRequest&&hasFocus)if(matches.length>0){scope.activeIdx=focusFirst?0:-1,scope.matches.length=0;for(var i=0;i<matches.length;i++)locals[parserResult.itemName]=matches[i],scope.matches.push({id:getMatchId(i),label:parserResult.viewMapper(scope,locals),model:matches[i]});scope.query=inputValue,scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top=scope.position.top+element.prop("offsetHeight"),element.attr("aria-expanded",!0)}else resetMatches();onCurrentRequest&&isLoadingSetter(originalScope,!1)},function(){resetMatches(),isLoadingSetter(originalScope,!1)})};resetMatches(),scope.query=void 0;var timeoutPromise,scheduleSearchWithTimeout=function(inputValue){timeoutPromise=$timeout(function(){getMatchesAsync(inputValue)},waitTime)},cancelPreviousTimeout=function(){timeoutPromise&&$timeout.cancel(timeoutPromise)};modelCtrl.$parsers.unshift(function(inputValue){return hasFocus=!0,inputValue&&inputValue.length>=minSearch?waitTime>0?(cancelPreviousTimeout(),scheduleSearchWithTimeout(inputValue)):getMatchesAsync(inputValue):(isLoadingSetter(originalScope,!1),cancelPreviousTimeout(),resetMatches()),isEditable?inputValue:inputValue?void modelCtrl.$setValidity("editable",!1):(modelCtrl.$setValidity("editable",!0),inputValue)}),modelCtrl.$formatters.push(function(modelValue){var candidateViewValue,emptyViewValue,locals={};return inputFormatter?(locals.$model=modelValue,inputFormatter(originalScope,locals)):(locals[parserResult.itemName]=modelValue,candidateViewValue=parserResult.viewMapper(originalScope,locals),locals[parserResult.itemName]=void 0,emptyViewValue=parserResult.viewMapper(originalScope,locals),candidateViewValue!==emptyViewValue?candidateViewValue:modelValue)}),scope.select=function(activeIdx){var model,item,locals={};locals[parserResult.itemName]=item=scope.matches[activeIdx].model,model=parserResult.modelMapper(originalScope,locals),$setModelValue(originalScope,model),modelCtrl.$setValidity("editable",!0),onSelectCallback(originalScope,{$item:item,$model:model,$label:parserResult.viewMapper(originalScope,locals)}),resetMatches(),$timeout(function(){element[0].focus()},0,!1)},element.bind("keydown",function(evt){0!==scope.matches.length&&HOT_KEYS.indexOf(evt.which)!==-1&&(scope.activeIdx!=-1||13!==evt.which&&9!==evt.which)&&(evt.preventDefault(),40===evt.which?(scope.activeIdx=(scope.activeIdx+1)%scope.matches.length,scope.$digest()):38===evt.which?(scope.activeIdx=(scope.activeIdx>0?scope.activeIdx:scope.matches.length)-1,scope.$digest()):13===evt.which||9===evt.which?scope.$apply(function(){scope.select(scope.activeIdx)}):27===evt.which&&(evt.stopPropagation(),resetMatches(),scope.$digest()))}),element.bind("blur",function(evt){hasFocus=!1});var dismissClickHandler=function(evt){element[0]!==evt.target&&(resetMatches(),scope.$digest())};$document.bind("click",dismissClickHandler),originalScope.$on("$destroy",function(){$document.unbind("click",dismissClickHandler),appendToBody&&$popup.remove()});var $popup=$compile(popUpEl)(scope);appendToBody?$document.find("body").append($popup):element.after($popup)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(scope,element,attrs){scope.templateUrl=attrs.templateUrl,scope.isOpen=function(){return scope.matches.length>0},scope.isActive=function(matchIdx){return scope.active==matchIdx},scope.selectActive=function(matchIdx){scope.active=matchIdx},scope.selectMatch=function(activeIdx){scope.select({activeIdx:activeIdx})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function($http,$templateCache,$compile,$parse){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(scope,element,attrs){var tplUrl=$parse(attrs.templateUrl)(scope.$parent)||"template/typeahead/typeahead-match.html";$http.get(tplUrl,{cache:$templateCache}).success(function(tplContent){element.replaceWith($compile(tplContent.trim())(scope))})}}}]).filter("typeaheadHighlight",function(){function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(matchItem,query){return query?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),"<strong>$&</strong>"):matchItem}}),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(window,angular,undefined){"use strict";function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function merge(dst){return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst.hasOwnProperty(key)||(dst[key]=value)})}),dst}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function objectKeys(object){if(Object.keys)return Object.keys(object);var result=[];return forEach(object,function(val,key){result.push(key)}),result}function indexOf(array,value){if(Array.prototype.indexOf)return array.indexOf(value,Number(arguments[2])||0);var len=array.length>>>0,from=Number(arguments[2])||0;for(from=from<0?Math.ceil(from):Math.floor(from),from<0&&(from+=len);from<len;from++)if(from in array&&array[from]===value)return from;return-1}function inheritParams(currentParams,newParams,$current,$to){var parentParams,parents=ancestors($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i]&&parents[i].params&&(parentParams=objectKeys(parents[i].params),parentParams.length))for(var j in parentParams)indexOf(inheritList,parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=currentParams[parentParams[j]]);return extend({},inherited,newParams)}function equalForKeys(a,b,keys){if(!keys){keys=[];for(var n in a)keys.push(n)}for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return!1}return!0}function filterByKeys(keys,values){var filtered={};return forEach(keys,function(name){filtered[name]=values[name]}),filtered}function pick(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return forEach(keys,function(key){key in obj&&(copy[key]=obj[key])}),copy}function omit(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var key in obj)indexOf(keys,key)==-1&&(copy[key]=obj[key]);return copy}function filter(collection,callback){var array=isArray(collection),result=array?[]:{};return forEach(collection,function(val,i){callback(val,i)&&(result[array?result.length:i]=val)}),result}function map(collection,callback){var result=isArray(collection)?[]:{};return forEach(collection,function(val,i){result[i]=callback(val,i)}),result}function $Resolve($q,$injector){var VISIT_IN_PROGRESS=1,VISIT_DONE=2,NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){function visit(value,key){if(visited[key]!==VISIT_DONE){if(cycle.push(key),visited[key]===VISIT_IN_PROGRESS)throw cycle.splice(0,indexOf(cycle,key)),new Error("Cyclic dependency: "+cycle.join(" -> "));if(visited[key]=VISIT_IN_PROGRESS,isString(value))plan.push(key,[function(){return $injector.get(value)}],NO_DEPENDENCIES);else{var params=$injector.annotate(value);forEach(params,function(param){param!==key&&invocables.hasOwnProperty(param)&&visit(invocables[param],param)}),plan.push(key,value,params)}cycle.pop(),visited[key]=VISIT_DONE}}function isResolve(value){return isObject(value)&&value.then&&value.$$promises}if(!isObject(invocables))throw new Error("'invocables' must be an object");var invocableKeys=objectKeys(invocables||{}),plan=[],cycle=[],visited={};return forEach(invocables,visit),invocables=cycle=visited=null,function(locals,parent,self){function done(){--wait||(merged||merge(values,parent.$$values),result.$$values=values,result.$$promises=result.$$promises||!0,delete result.$$inheritedValues,resolution.resolve(values))}function fail(reason){result.$$failure=reason,resolution.reject(reason)}function invoke(key,invocable,params){function onfailure(reason){invocation.reject(reason),fail(reason)}function proceed(){if(!isDefined(result.$$failure))try{invocation.resolve($injector.invoke(invocable,self,values)),invocation.promise.then(function(result){values[key]=result,done()},onfailure)}catch(e){onfailure(e)}}var invocation=$q.defer(),waitParams=0;forEach(params,function(dep){promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)&&(waitParams++,promises[dep].then(function(result){values[dep]=result,--waitParams||proceed()},onfailure))}),waitParams||proceed(),promises[key]=invocation.promise}if(isResolve(locals)&&self===undefined&&(self=parent,parent=locals,locals=null),locals){if(!isObject(locals))throw new Error("'locals' must be an object")}else locals=NO_LOCALS;if(parent){if(!isResolve(parent))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else parent=NO_PARENT;var resolution=$q.defer(),result=resolution.promise,promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=!1;if(isDefined(parent.$$failure))return fail(parent.$$failure),result;parent.$$inheritedValues&&merge(values,omit(parent.$$inheritedValues,invocableKeys)),extend(promises,parent.$$promises),parent.$$values?(merged=merge(values,omit(parent.$$values,invocableKeys)),result.$$inheritedValues=omit(parent.$$values,invocableKeys),done()):(parent.$$inheritedValues&&(result.$$inheritedValues=omit(parent.$$inheritedValues,invocableKeys)),parent.then(done,fail));for(var i=0,ii=plan.length;i<ii;i+=3)locals.hasOwnProperty(plan[i])?done():invoke(plan[i],plan[i+1],plan[i+2]);return result}},this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self)}}function $TemplateFactory($http,$templateCache,$injector){this.fromConfig=function(config,params,locals){return isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null},this.fromString=function(template,params){return isFunction(template)?template(params):template},this.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:$http.get(url,{cache:$templateCache,headers:{Accept:"text/html"}}).then(function(response){return response.data})},this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params})}}function UrlMatcher(pattern,config,parentMatcher){function addParameter(id,type,config,location){if(paramNames.push(id),parentParams[id])return parentParams[id];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(params[id])throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");return params[id]=new $$UMFP.Param(id,type,config,location),params[id]}function quoteRegExp(string,pattern,squash,optional){var surroundPattern=["",""],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!pattern)return result;switch(squash){case!1:surroundPattern=["(",")"+(optional?"?":"")];break;case!0:result=result.replace(/\/$/,""),surroundPattern=["(?:/(",")|/)?"];break;default:surroundPattern=["("+squash+"|",")?"]}return result+surroundPattern[0]+pattern+surroundPattern[1]}function matchDetails(m,isSearch){var id,regexp,segment,type,cfg;return id=m[2]||m[3],cfg=config.params[id],segment=pattern.substring(last,m.index),regexp=isSearch?m[4]:m[4]||("*"==m[1]?".*":null),regexp&&(type=$$UMFP.type(regexp)||inherit($$UMFP.type("string"),{pattern:new RegExp(regexp,config.caseInsensitive?"i":undefined)})),{id:id,regexp:regexp,segment:segment,type:type,cfg:cfg}}config=extend({params:{}},isObject(config)?config:{});var m,placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,compiled="^",last=0,segments=this.segments=[],parentParams=parentMatcher?parentMatcher.params:{},params=this.params=parentMatcher?parentMatcher.params.$$new():new $$UMFP.ParamSet,paramNames=[];this.source=pattern;for(var p,param,segment;(m=placeholder.exec(pattern))&&(p=matchDetails(m,!1),!(p.segment.indexOf("?")>=0));)param=addParameter(p.id,p.type,p.cfg,"path"),compiled+=quoteRegExp(p.segment,param.type.pattern.source,param.squash,param.isOptional),segments.push(p.segment),last=placeholder.lastIndex;segment=pattern.substring(last);var i=segment.indexOf("?");if(i>=0){var search=this.sourceSearch=segment.substring(i);if(segment=segment.substring(0,i),this.sourcePath=pattern.substring(0,last+i),search.length>0)for(last=0;m=searchPlaceholder.exec(search);)p=matchDetails(m,!0),param=addParameter(p.id,p.type,p.cfg,"search"),last=placeholder.lastIndex}else this.sourcePath=pattern,this.sourceSearch="";compiled+=quoteRegExp(segment)+(config.strict===!1?"/?":"")+"$",segments.push(segment),this.regexp=new RegExp(compiled,config.caseInsensitive?"i":undefined),this.prefix=segments[0],this.$$paramNames=paramNames}function Type(config){extend(this,config)}function $UrlMatcherFactory(){function valToString(val){return null!=val?val.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):val}function valFromString(val){return null!=val?val.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):val}function getDefaultConfig(){return{strict:isStrictMode,caseInsensitive:isCaseInsensitive}}function isInjectable(value){return isFunction(value)||isArray(value)&&isFunction(value[value.length-1])}function flushTypeQueue(){for(;typeQueue.length;){var type=typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");angular.extend($types[type.name],injector.invoke(type.def));}}function ParamSet(params){extend(this,params||{})}$$UMFP=this;var injector,isCaseInsensitive=!1,isStrictMode=!0,defaultSquashPolicy=!1,$types={},enqueue=!0,typeQueue=[],defaultTypes={string:{encode:valToString,decode:valFromString,is:function(val){return null==val||!isDefined(val)||"string"==typeof val},pattern:/[^\/]*/},int:{encode:valToString,decode:function(val){return parseInt(val,10)},is:function(val){return isDefined(val)&&this.decode(val.toString())===val},pattern:/\d+/},bool:{encode:function(val){return val?1:0},decode:function(val){return 0!==parseInt(val,10)},is:function(val){return val===!0||val===!1},pattern:/0|1/},date:{encode:function(val){return this.is(val)?[val.getFullYear(),("0"+(val.getMonth()+1)).slice(-2),("0"+val.getDate()).slice(-2)].join("-"):undefined},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):undefined},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:angular.toJson,decode:angular.fromJson,is:angular.isObject,equals:angular.equals,pattern:/[^\/]*/},any:{encode:angular.identity,decode:angular.identity,equals:angular.equals,pattern:/.*/}};$UrlMatcherFactory.$$getDefaultValue=function(config){if(!isInjectable(config.value))return config.value;if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.value)},this.caseInsensitive=function(value){return isDefined(value)&&(isCaseInsensitive=value),isCaseInsensitive},this.strictMode=function(value){return isDefined(value)&&(isStrictMode=value),isStrictMode},this.defaultSquashPolicy=function(value){if(!isDefined(value))return defaultSquashPolicy;if(value!==!0&&value!==!1&&!isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return defaultSquashPolicy=value,value},this.compile=function(pattern,config){return new UrlMatcher(pattern,extend(getDefaultConfig(),config))},this.isMatcher=function(o){if(!isObject(o))return!1;var result=!0;return forEach(UrlMatcher.prototype,function(val,name){isFunction(val)&&(result=result&&isDefined(o[name])&&isFunction(o[name]))}),result},this.type=function(name,definition,definitionFn){if(!isDefined(definition))return $types[name];if($types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");return $types[name]=new Type(extend({name:name},definition)),definitionFn&&(typeQueue.push({name:name,def:definitionFn}),enqueue||flushTypeQueue()),this},forEach(defaultTypes,function(type,name){$types[name]=new Type(extend({name:name},type))}),$types=inherit($types,{}),this.$get=["$injector",function($injector){return injector=$injector,enqueue=!1,flushTypeQueue(),forEach(defaultTypes,function(type,name){$types[name]||($types[name]=new Type(type))}),this}],this.Param=function(id,type,config,location){function unwrapShorthand(config){var keys=isObject(config)?objectKeys(config):[],isShorthand=indexOf(keys,"value")===-1&&indexOf(keys,"type")===-1&&indexOf(keys,"squash")===-1&&indexOf(keys,"array")===-1;return isShorthand&&(config={value:config}),config.$$fn=isInjectable(config.value)?config.value:function(){return config.value},config}function getType(config,urlType,location){if(config.type&&urlType)throw new Error("Param '"+id+"' has two type configurations.");return urlType?urlType:config.type?angular.isString(config.type)?$types[config.type]:config.type instanceof Type?config.type:new Type(config.type):"config"===location?$types.any:$types.string}function getArrayMode(){var arrayDefaults={array:"search"===location&&"auto"},arrayParamNomenclature=id.match(/\[\]$/)?{array:!0}:{};return extend(arrayDefaults,arrayParamNomenclature,config).array}function getSquashPolicy(config,isOptional){var squash=config.squash;if(!isOptional||squash===!1)return!1;if(!isDefined(squash)||null==squash)return defaultSquashPolicy;if(squash===!0||isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}function getReplace(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:isOptional||arrayMode?undefined:""},{from:null,to:isOptional||arrayMode?undefined:""}];return replace=isArray(config.replace)?config.replace:[],isString(squash)&&replace.push({from:squash,to:undefined}),configuredKeys=map(replace,function(item){return item.from}),filter(defaultPolicy,function(item){return indexOf(configuredKeys,item.from)===-1}).concat(replace)}function $$getDefaultValue(){if(!injector)throw new Error("Injectable functions cannot be called at configuration time");var defaultValue=injector.invoke(config.$$fn);if(null!==defaultValue&&defaultValue!==undefined&&!self.type.is(defaultValue))throw new Error("Default value ("+defaultValue+") for parameter '"+self.id+"' is not an instance of Type ("+self.type.name+")");return defaultValue}function $value(value){function hasReplaceVal(val){return function(obj){return obj.from===val}}function $replace(value){var replacement=map(filter(self.replace,hasReplaceVal(value)),function(obj){return obj.to});return replacement.length?replacement[0]:value}return value=$replace(value),isDefined(value)?self.type.$normalize(value):$$getDefaultValue()}function toString(){return"{Param:"+id+" "+type+" squash: '"+squash+"' optional: "+isOptional+"}"}var self=this;config=unwrapShorthand(config),type=getType(config,type,location);var arrayMode=getArrayMode();type=arrayMode?type.$asArray(arrayMode,"search"===location):type,"string"!==type.name||arrayMode||"path"!==location||config.value!==undefined||(config.value="");var isOptional=config.value!==undefined,squash=getSquashPolicy(config,isOptional),replace=getReplace(config,arrayMode,isOptional,squash);extend(this,{id:id,type:type,location:location,array:arrayMode,squash:squash,replace:replace,isOptional:isOptional,value:$value,dynamic:undefined,config:config,toString:toString})},ParamSet.prototype={$$new:function(){return inherit(this,extend(new ParamSet,{$$parent:this}))},$$keys:function(){for(var keys=[],chain=[],parent=this,ignore=objectKeys(ParamSet.prototype);parent;)chain.push(parent),parent=parent.$$parent;return chain.reverse(),forEach(chain,function(paramset){forEach(objectKeys(paramset),function(key){indexOf(keys,key)===-1&&indexOf(ignore,key)===-1&&keys.push(key)})}),keys},$$values:function(paramValues){var values={},self=this;return forEach(self.$$keys(),function(key){values[key]=self[key].value(paramValues&&paramValues[key])}),values},$$equals:function(paramValues1,paramValues2){var equal=!0,self=this;return forEach(self.$$keys(),function(key){var left=paramValues1&&paramValues1[key],right=paramValues2&&paramValues2[key];self[key].type.equals(left,right)||(equal=!1)}),equal},$$validates:function(paramValues){var i,param,rawVal,normalized,encoded,keys=this.$$keys();for(i=0;i<keys.length&&(param=this[keys[i]],rawVal=paramValues[keys[i]],rawVal!==undefined&&null!==rawVal||!param.isOptional);i++){if(normalized=param.type.$normalize(rawVal),!param.type.is(normalized))return!1;if(encoded=param.type.encode(normalized),angular.isString(encoded)&&!param.type.pattern.exec(encoded))return!1}return!0},$$parent:undefined},this.ParamSet=ParamSet}function $UrlRouterProvider($locationProvider,$urlMatcherFactory){function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return null!=prefix?prefix[1].replace(/\\(.)/g,"$1"):""}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,function(m,what){return match["$"===what?0:Number(what)]})}function handleIfMatch($injector,handler,match){if(!match)return!1;var result=$injector.invoke(handler,handler,{$match:match});return!isDefined(result)||result}function $get($location,$rootScope,$injector,$browser,$sniffer){function appendBasePath(url,isHtml5,absolute){return"/"===baseHref?url:isHtml5?baseHref.slice(0,-1)+url:absolute?baseHref.slice(1)+url:url}function update(evt){function check(rule){var handled=rule($injector,$location);return!!handled&&(isString(handled)&&$location.replace().url(handled),!0)}if(!evt||!evt.defaultPrevented){lastPushedUrl&&$location.url()===lastPushedUrl;lastPushedUrl=undefined;var i,n=rules.length;for(i=0;i<n;i++)if(check(rules[i]))return;otherwise&&check(otherwise)}}function listen(){return listener=listener||$rootScope.$on("$locationChangeSuccess",update)}var lastPushedUrl,baseHref=$browser.baseHref(),location=$location.url();return interceptDeferred||listen(),{sync:function(){update()},listen:function(){return listen()},update:function(read){return read?void(location=$location.url()):void($location.url()!==location&&($location.url(location),$location.replace()))},push:function(urlMatcher,params,options){var url=urlMatcher.format(params||{});null!==url&&params&&params["#"]&&(url+="#"+params["#"]),$location.url(url),lastPushedUrl=options&&options.$$avoidResync?$location.url():undefined,options&&options.replace&&$location.replace()},href:function(urlMatcher,params,options){if(!urlMatcher.validates(params))return null;var isHtml5=$locationProvider.html5Mode();angular.isObject(isHtml5)&&(isHtml5=isHtml5.enabled),isHtml5=isHtml5&&$sniffer.history;var url=urlMatcher.format(params);if(options=options||{},isHtml5||null===url||(url="#"+$locationProvider.hashPrefix()+url),null!==url&&params&&params["#"]&&(url+="#"+params["#"]),url=appendBasePath(url,isHtml5,options.absolute),!options.absolute||!url)return url;var slash=!isHtml5&&url?"/":"",port=$location.port();return port=80===port||443===port?"":":"+port,[$location.protocol(),"://",$location.host(),port,slash,url].join("")}}}var listener,rules=[],otherwise=null,interceptDeferred=!1;this.rule=function(rule){if(!isFunction(rule))throw new Error("'rule' must be a function");return rules.push(rule),this},this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect}}else if(!isFunction(rule))throw new Error("'rule' must be a function");return otherwise=rule,this},this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what)&&(what=$urlMatcherFactory.compile(what)),!handlerIsString&&!isFunction(handler)&&!isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(what,handler){return handlerIsString&&(redirect=$urlMatcherFactory.compile(handler),handler=["$match",function($match){return redirect.format($match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()))},{prefix:isString(what.prefix)?what.prefix:""})},regex:function(what,handler){if(what.global||what.sticky)throw new Error("when() RegExp must not be global or sticky");return handlerIsString&&(redirect=handler,handler=["$match",function($match){return interpolate(redirect,$match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()))},{prefix:regExpPrefix(what)})}},check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check)if(check[n])return this.rule(strategies[n](what,handler));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(defer){defer===undefined&&(defer=!0),interceptDeferred=defer},this.$get=$get,$get.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function $StateProvider($urlRouterProvider,$urlMatcherFactory){function isRelative(stateName){return 0===stateName.indexOf(".")||0===stateName.indexOf("^")}function findState(stateOrName,base){if(!stateOrName)return undefined;var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name,path=isRelative(name);if(path){if(!base)throw new Error("No reference point given for path '"+name+"'");base=findState(base);for(var rel=name.split("."),i=0,pathLength=rel.length,current=base;i<pathLength;i++)if(""!==rel[i]||0!==i){if("^"!==rel[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");current=current.parent}else current=base;rel=rel.slice(i).join("."),name=current.name+(current.name&&rel?".":"")+rel}var state=states[name];return!state||!isStr&&(isStr||state!==stateOrName&&state.self!==stateOrName)?undefined:state}function queueState(parentName,state){queue[parentName]||(queue[parentName]=[]),queue[parentName].push(state)}function flushQueuedChildren(parentName){for(var queued=queue[parentName]||[];queued.length;)registerState(queued.shift())}function registerState(state){state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name}});var name=state.name;if(!isString(name)||name.indexOf("@")>=0)throw new Error("State must have a valid name");if(states.hasOwnProperty(name))throw new Error("State '"+name+"' is already defined");var parentName=name.indexOf(".")!==-1?name.substring(0,name.lastIndexOf(".")):isString(state.parent)?state.parent:isObject(state.parent)&&isString(state.parent.name)?state.parent.name:"";if(parentName&&!states[parentName])return queueState(parentName,state.self);for(var key in stateBuilder)isFunction(stateBuilder[key])&&(state[key]=stateBuilder[key](state,stateBuilder.$delegates[key]));return states[name]=state,!state[abstractKey]&&state.url&&$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){$state.$current.navigable==state&&equalForKeys($match,$stateParams)||$state.transitionTo(state,$match,{inherit:!0,location:!1})}]),flushQueuedChildren(name),state}function isGlob(text){return text.indexOf("*")>-1}function doesStateMatchGlob(glob){for(var globSegments=glob.split("."),segments=$state.$current.name.split("."),i=0,l=globSegments.length;i<l;i++)"*"===globSegments[i]&&(segments[i]="*");return"**"===globSegments[0]&&(segments=segments.slice(indexOf(segments,globSegments[1])),segments.unshift("**")),"**"===globSegments[globSegments.length-1]&&(segments.splice(indexOf(segments,globSegments[globSegments.length-2])+1,Number.MAX_VALUE),segments.push("**")),globSegments.length==segments.length&&segments.join("")===globSegments.join("")}function decorator(name,func){return isString(name)&&!isDefined(func)?stateBuilder[name]:isFunction(func)&&isString(name)?(stateBuilder[name]&&!stateBuilder.$delegates[name]&&(stateBuilder.$delegates[name]=stateBuilder[name]),stateBuilder[name]=func,this):this}function state(name,definition){return isObject(name)?definition=name:definition.name=name,registerState(definition),this}function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$urlRouter,$location,$urlMatcherFactory){function handleRedirect(redirect,state,params,options){var evt=$rootScope.$broadcast("$stateNotFound",redirect,state,params);if(evt.defaultPrevented)return $urlRouter.update(),TransitionAborted;if(!evt.retry)return null;if(options.$retry)return $urlRouter.update(),TransitionFailed;var retryTransition=$state.transition=$q.when(evt.retry);return retryTransition.then(function(){return retryTransition!==$state.transition?TransitionSuperseded:(redirect.options.$retry=!0,$state.transitionTo(redirect.to,redirect.toParams,redirect.options))},function(){return TransitionAborted}),$urlRouter.update(),retryTransition}function resolveState(state,params,paramsAreFiltered,inherited,dst,options){function resolveViews(){var viewsPromises=[];return forEach(state.views,function(view,name){var injectables=view.resolve&&view.resolve!==state.resolve?view.resolve:{};injectables.$template=[function(){return $view.load(name,{view:view,locals:dst.globals,params:$stateParams,notify:options.notify})||""}],viewsPromises.push($resolve.resolve(injectables,dst.globals,dst.resolve,state).then(function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,dst.globals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals)}else result.$$controller=view.controller;result.$$state=state,result.$$controllerAs=view.controllerAs,result.$$resolveAs=view.resolveAs,dst[name]=result}))}),$q.all(viewsPromises).then(function(){return dst.globals})}var $stateParams=paramsAreFiltered?params:filterByKeys(state.params.$$keys(),params),locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then(function(globals){dst.globals=globals})];return inherited&&promises.push(inherited),$q.all(promises).then(resolveViews).then(function(values){return dst})}var TransitionSuperseded=$q.reject(new Error("transition superseded")),TransitionPrevented=$q.reject(new Error("transition prevented")),TransitionAborted=$q.reject(new Error("transition aborted")),TransitionFailed=$q.reject(new Error("transition failed"));return root.locals={resolve:null,globals:{$stateParams:{}}},$state={params:{},current:root.self,$current:root,transition:null},$state.reload=function(state){return $state.transitionTo($state.current,$stateParams,{reload:state||!0,inherit:!1,notify:!0})},$state.go=function(to,params,options){return $state.transitionTo(to,params,extend({inherit:!0,relative:$state.$current},options))},$state.transitionTo=function(to,toParams,options){toParams=toParams||{},options=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},options||{});var evt,from=$state.$current,fromParams=$state.params,fromPath=from.path,toState=findState(to,options.relative),hash=toParams["#"];if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options},redirectResult=handleRedirect(redirect,from.self,fromParams,options);if(redirectResult)return redirectResult;if(to=redirect.to,toParams=redirect.toParams,options=redirect.options,toState=findState(to,options.relative),!isDefined(toState)){if(!options.relative)throw new Error("No such state '"+to+"'");throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'")}}if(toState[abstractKey])throw new Error("Cannot transition to abstract state '"+to+"'");if(options.inherit&&(toParams=inheritParams($stateParams,toParams||{},$state.$current,toState)),!toState.params.$$validates(toParams))return TransitionFailed;toParams=toState.params.$$values(toParams),to=toState;var toPath=to.path,keep=0,state=toPath[keep],locals=root.locals,toLocals=[];if(options.reload){if(isString(options.reload)||isObject(options.reload)){if(isObject(options.reload)&&!options.reload.name)throw new Error("Invalid reload state object");var reloadState=options.reload===!0?fromPath[0]:findState(options.reload);if(options.reload&&!reloadState)throw new Error("No such reload state '"+(isString(options.reload)?options.reload:options.reload.name)+"'");for(;state&&state===fromPath[keep]&&state!==reloadState;)locals=toLocals[keep]=state.locals,keep++,state=toPath[keep]}}else for(;state&&state===fromPath[keep]&&state.ownParams.$$equals(toParams,fromParams);)locals=toLocals[keep]=state.locals,keep++,state=toPath[keep];if(shouldSkipReload(to,toParams,from,fromParams,locals,options))return hash&&(toParams["#"]=hash),$state.params=toParams,copy($state.params,$stateParams),copy(filterByKeys(to.params.$$keys(),$stateParams),to.locals.globals.$stateParams),options.location&&to.navigable&&to.navigable.url&&($urlRouter.push(to.navigable.url,toParams,{$$avoidResync:!0,replace:"replace"===options.location}),$urlRouter.update(!0)),$state.transition=null,$q.when($state.current);if(toParams=filterByKeys(to.params.$$keys(),toParams||{}),hash&&(toParams["#"]=hash),options.notify&&$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams,options).defaultPrevented)return $rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),null==$state.transition&&$urlRouter.update(),TransitionPrevented;for(var resolved=$q.when(locals),l=keep;l<toPath.length;l++,state=toPath[l])locals=toLocals[l]=inherit(locals),resolved=resolveState(state,toParams,state===to,resolved,locals,options);var transition=$state.transition=resolved.then(function(){var l,entering,exiting;if($state.transition!==transition)return TransitionSuperseded;for(l=fromPath.length-1;l>=keep;l--)exiting=fromPath[l],exiting.self.onExit&&$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals),exiting.locals=null;for(l=keep;l<toPath.length;l++)entering=toPath[l],entering.locals=toLocals[l],entering.self.onEnter&&$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals);return $state.transition!==transition?TransitionSuperseded:($state.$current=to,$state.current=to.self,$state.params=toParams,copy($state.params,$stateParams),$state.transition=null,options.location&&to.navigable&&$urlRouter.push(to.navigable.url,to.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===options.location}),options.notify&&$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams),$urlRouter.update(!0),$state.current)}).then(null,function(error){return $state.transition!==transition?TransitionSuperseded:($state.transition=null,evt=$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error),evt.defaultPrevented||$urlRouter.update(),$q.reject(error))});return transition},$state.is=function(stateOrName,params,options){options=extend({relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);return isDefined(state)?$state.$current===state&&(!params||equalForKeys(state.params.$$values(params),$stateParams)):undefined},$state.includes=function(stateOrName,params,options){if(options=extend({relative:$state.$current},options||{}),isString(stateOrName)&&isGlob(stateOrName)){if(!doesStateMatchGlob(stateOrName))return!1;stateOrName=$state.$current.name}var state=findState(stateOrName,options.relative);return isDefined(state)?!!isDefined($state.$current.includes[state.name])&&(!params||equalForKeys(state.params.$$values(params),$stateParams,objectKeys(params))):undefined},$state.href=function(stateOrName,params,options){options=extend({lossy:!0,inherit:!0,absolute:!1,relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);if(!isDefined(state))return null;options.inherit&&(params=inheritParams($stateParams,params||{},$state.$current,state));var nav=state&&options.lossy?state.navigable:state;return nav&&nav.url!==undefined&&null!==nav.url?$urlRouter.href(nav.url,filterByKeys(state.params.$$keys().concat("#"),params||{}),{absolute:options.absolute}):null},$state.get=function(stateOrName,context){if(0===arguments.length)return map(objectKeys(states),function(name){return states[name].self});var state=findState(stateOrName,context||$state.$current);return state&&state.self?state.self:null},$state}function shouldSkipReload(to,toParams,from,fromParams,locals,options){function nonSearchParamsEqual(fromAndToState,fromParams,toParams){function notSearchParam(key){return"search"!=fromAndToState.params[key].location}var nonQueryParamKeys=fromAndToState.params.$$keys().filter(notSearchParam),nonQueryParams=pick.apply({},[fromAndToState.params].concat(nonQueryParamKeys)),nonQueryParamSet=new $$UMFP.ParamSet(nonQueryParams);return nonQueryParamSet.$$equals(fromParams,toParams)}if(!options.reload&&to===from&&(locals===from.locals||to.self.reloadOnSearch===!1&&nonSearchParamsEqual(from,fromParams,toParams)))return!0}var root,$state,states={},queue={},abstractKey="abstract",stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent)return findState(state.parent);var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root},data:function(state){return state.parent&&state.parent.data&&(state.data=state.self.data=inherit(state.parent.data,state.data)),state.data},url:function(state){var url=state.url,config={params:state.params||{}};if(isString(url))return"^"==url.charAt(0)?$urlMatcherFactory.compile(url.substring(1),config):(state.parent.navigable||root).url.concat(url,config);if(!url||$urlMatcherFactory.isMatcher(url))return url;throw new Error("Invalid url '"+url+"' in state '"+state+"'")},navigable:function(state){return state.url?state:state.parent?state.parent.navigable:null},ownParams:function(state){var params=state.url&&state.url.params||new $$UMFP.ParamSet;return forEach(state.params||{},function(config,id){params[id]||(params[id]=new $$UMFP.Param(id,null,config,"config"))}),params},params:function(state){var ownParams=pick(state.ownParams,state.ownParams.$$keys());return state.parent&&state.parent.params?extend(state.parent.params.$$new(),ownParams):new $$UMFP.ParamSet},views:function(state){var views={};return forEach(isDefined(state.views)?state.views:{"":state},function(view,name){name.indexOf("@")<0&&(name+="@"+state.parent.name),view.resolveAs=view.resolveAs||state.resolveAs||"$resolve",views[name]=view}),views},path:function(state){return state.parent?state.parent.path.concat(state):[]},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes},$delegates:{}};root=registerState({name:"",url:"^",views:null,abstract:!0}),root.navigable=null,this.decorator=decorator,this.state=state,this.$get=$get,$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function $ViewProvider(){function $get($rootScope,$templateFactory){return{load:function(name,options){var result,defaults={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return options=extend(defaults,options),options.view&&(result=$templateFactory.fromConfig(options.view,options.params,options.locals)),result}}}this.$get=$get,$get.$inject=["$rootScope","$templateFactory"]}function $ViewScrollProvider(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){return $timeout(function(){$element[0].scrollIntoView()},0,!1)}}]}function $ViewDirective($state,$injector,$uiViewScroll,$interpolate,$q){function getService(){return $injector.has?function(service){return $injector.has(service)?$injector.get(service):null}:function(service){try{return $injector.get(service)}catch(e){return null}}}function getRenderer(attrs,scope){var statics=function(){return{enter:function(element,target,cb){target.after(element),cb()},leave:function(element,cb){element.remove(),cb()}}};if($animate)return{enter:function(element,target,cb){angular.version.minor>2?$animate.enter(element,null,target).then(cb):$animate.enter(element,null,target,cb)},leave:function(element,cb){angular.version.minor>2?$animate.leave(element).then(cb):$animate.leave(element,cb)}};if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target),cb()},leave:function(element,cb){animate.leave(element),cb()}}}return statics()}var service=getService(),$animator=service("$animator"),$animate=service("$animate"),directive={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){function cleanupLastView(){if(previousEl&&(previousEl.remove(),previousEl=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentEl){var $uiViewData=currentEl.data("$uiViewAnim");renderer.leave(currentEl,function(){$uiViewData.$$animLeave.resolve(),previousEl=null}),previousEl=currentEl,currentEl=null}}function updateView(firstTime){var newScope,name=getUiViewName(scope,attrs,$element,$interpolate),previousLocals=name&&$state.$current&&$state.$current.locals[name];if(firstTime||previousLocals!==latestLocals){newScope=scope.$new(),latestLocals=$state.$current.locals[name],newScope.$emit("$viewContentLoading",name);var clone=$transclude(newScope,function(clone){var animEnter=$q.defer(),animLeave=$q.defer(),viewAnimData={$animEnter:animEnter.promise,$animLeave:animLeave.promise,$$animLeave:animLeave};clone.data("$uiViewAnim",viewAnimData),renderer.enter(clone,$element,function(){animEnter.resolve(),currentScope&&currentScope.$emit("$viewContentAnimationEnded"),(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)}),cleanupLastView()});currentEl=clone,currentScope=newScope,currentScope.$emit("$viewContentLoaded",name),currentScope.$eval(onloadExp)}}var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope);$element.inheritedData("$uiView");scope.$on("$stateChangeSuccess",function(){updateView(!1)}),updateView(!0)}}};return directive}function $ViewDirectiveFill($compile,$controller,$state,$interpolate){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return function(scope,$element,attrs){var current=$state.$current,name=getUiViewName(scope,attrs,$element,$interpolate),locals=current&&current.locals[name];if(locals){$element.data("$uiView",{name:name,state:locals.$$state}),$element.html(locals.$template?locals.$template:initial);var resolveData=angular.extend({},locals);scope[locals.$$resolveAs]=resolveData;var link=$compile($element.contents());if(locals.$$controller){locals.$scope=scope,locals.$element=$element;var controller=$controller(locals.$$controller,locals);locals.$$controllerAs&&(scope[locals.$$controllerAs]=controller,scope[locals.$$controllerAs][locals.$$resolveAs]=resolveData),isFunction(controller.$onInit)&&controller.$onInit(),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}}}function getUiViewName(scope,attrs,element,$interpolate){var name=$interpolate(attrs.uiView||attrs.name||"")(scope),uiViewCreatedBy=element.inheritedData("$uiView");return name.indexOf("@")>=0?name:name+"@"+(uiViewCreatedBy?uiViewCreatedBy.state.name:"")}function parseStateRef(ref,current){var parsed,preparsed=ref.match(/^\s*({[^}]*})\s*$/);if(preparsed&&(ref=current+"("+preparsed[1]+")"),parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!parsed||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");if(stateData&&stateData.state&&stateData.state.name)return stateData.state}function getTypeInfo(el){var isSvg="[object SVGAnimatedString]"===Object.prototype.toString.call(el.prop("href")),isForm="FORM"===el[0].nodeName;return{attr:isForm?"action":isSvg?"xlink:href":"href",isAnchor:"A"===el.prop("tagName").toUpperCase(),clickable:!isForm}}function clickHook(el,$state,$timeout,type,current){return function(e){var button=e.which||e.button,target=current();if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||el.attr("target"))){var transition=$timeout(function(){$state.go(target.state,target.params,target.options)});e.preventDefault();var ignorePreventDefaultCount=type.isAnchor&&!target.href?1:0;e.preventDefault=function(){ignorePreventDefaultCount--<=0&&$timeout.cancel(transition)}}}}function defaultOpts(el,$state){return{relative:stateContext(el)||$state.$current,inherit:!0}}function $StateRefDirective($state,$timeout){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var hookFn,ref=parseStateRef(attrs.uiSref,$state.current.name),def={state:ref.state,href:null,params:null},type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],unlinkInfoFn=null;def.options=extend(defaultOpts(element,$state),attrs.uiSrefOpts?scope.$eval(attrs.uiSrefOpts):{});var update=function(val){val&&(def.params=angular.copy(val)),def.href=$state.href(ref.state,def.params,def.options),unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(ref.state,def.params)),null!==def.href&&attrs.$set(type.attr,def.href)};ref.paramExpr&&(scope.$watch(ref.paramExpr,function(val){val!==def.params&&update(val)},!0),def.params=angular.copy(scope.$eval(ref.paramExpr))),update(),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,function(){return def}),element.bind("click",hookFn),scope.$on("$destroy",function(){element.unbind("click",hookFn)}))}}}function $StateRefDynamicDirective($state,$timeout){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){function runStateRefLink(group){def.state=group[0],def.params=group[1],def.options=group[2],def.href=$state.href(def.state,def.params,def.options),unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(def.state,def.params)),def.href&&attrs.$set(type.attr,def.href)}var hookFn,type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],group=[attrs.uiState,attrs.uiStateParams||null,attrs.uiStateOpts||null],watch="["+group.map(function(val){return val||"null"}).join(", ")+"]",def={state:null,params:null,options:null,href:null},unlinkInfoFn=null;scope.$watch(watch,runStateRefLink,!0),runStateRefLink(scope.$eval(watch)),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,function(){return def}),element.bind("click",hookFn),scope.$on("$destroy",function(){element.unbind("click",hookFn)}))}}}function $StateRefActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function($scope,$element,$attrs,$timeout){function addState(stateName,stateParams,activeClass){var state=$state.get(stateName,stateContext($element)),stateHash=createStateHash(stateName,stateParams),stateInfo={state:state||{name:stateName},params:stateParams,hash:stateHash};return states.push(stateInfo),activeClasses[stateHash]=activeClass,function(){var idx=states.indexOf(stateInfo);idx!==-1&&states.splice(idx,1)}}function createStateHash(state,params){if(!isString(state))throw new Error("state should be a string");return isObject(params)?state+toJson(params):(params=$scope.$eval(params),isObject(params)?state+toJson(params):state)}function update(){for(var i=0;i<states.length;i++)anyMatch(states[i].state,states[i].params)?addClass($element,activeClasses[states[i].hash]):removeClass($element,activeClasses[states[i].hash]),exactMatch(states[i].state,states[i].params)?addClass($element,activeEqClass):removeClass($element,activeEqClass)}function addClass(el,className){$timeout(function(){el.addClass(className)})}function removeClass(el,className){el.removeClass(className)}function anyMatch(state,params){return $state.includes(state.name,params)}function exactMatch(state,params){return $state.is(state.name,params)}var activeEqClass,uiSrefActive,states=[],activeClasses={};activeEqClass=$interpolate($attrs.uiSrefActiveEq||"",!1)($scope);try{uiSrefActive=$scope.$eval($attrs.uiSrefActive)}catch(e){}uiSrefActive=uiSrefActive||$interpolate($attrs.uiSrefActive||"",!1)($scope),isObject(uiSrefActive)&&forEach(uiSrefActive,function(stateOrName,activeClass){if(isString(stateOrName)){var ref=parseStateRef(stateOrName,$state.current.name);addState(ref.state,$scope.$eval(ref.paramExpr),activeClass)}}),this.$$addStateInfo=function(newState,newParams){if(!(isObject(uiSrefActive)&&states.length>0)){var deregister=addState(newState,newParams,uiSrefActive);return update(),deregister}},$scope.$on("$stateChangeSuccess",update),update()}]}}function $IsStateFilter($state){var isFilter=function(state,params){return $state.is(state,params)};return isFilter.$stateful=!0,isFilter}function $IncludedByStateFilter($state){var includesFilter=function(state,params,options){return $state.includes(state,params,options)};return includesFilter.$stateful=!0,includesFilter}var isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,toJson=angular.toJson;angular.module("ui.router.util",["ng"]),angular.module("ui.router.router",["ui.router.util"]),angular.module("ui.router.state",["ui.router.router","ui.router.util"]),angular.module("ui.router",["ui.router.state"]),angular.module("ui.router.compat",["ui.router"]),$Resolve.$inject=["$q","$injector"],angular.module("ui.router.util").service("$resolve",$Resolve),$TemplateFactory.$inject=["$http","$templateCache","$injector"],angular.module("ui.router.util").service("$templateFactory",$TemplateFactory);var $$UMFP;UrlMatcher.prototype.concat=function(pattern,config){var defaultConfig={caseInsensitive:$$UMFP.caseInsensitive(),strict:$$UMFP.strictMode(),squash:$$UMFP.defaultSquashPolicy()};return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch,extend(defaultConfig,config),this)},UrlMatcher.prototype.toString=function(){return this.source},UrlMatcher.prototype.exec=function(path,searchParams){function decodePathArray(string){function reverseString(str){return str.split("").reverse().join("")}function unquoteDashes(str){return str.replace(/\\-/g,"-")}var split=reverseString(string).split(/-(?!\\)/),allReversed=map(split,reverseString);return map(allReversed,unquoteDashes).reverse()}var m=this.regexp.exec(path);if(!m)return null;searchParams=searchParams||{};var i,j,paramName,paramNames=this.parameters(),nTotal=paramNames.length,nPath=this.segments.length-1,values={};if(nPath!==m.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var param,paramVal;for(i=0;i<nPath;i++){for(paramName=paramNames[i],param=this.params[paramName],paramVal=m[i+1],j=0;j<param.replace.length;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);paramVal&&param.array===!0&&(paramVal=decodePathArray(paramVal)),isDefined(paramVal)&&(paramVal=param.type.decode(paramVal)),values[paramName]=param.value(paramVal)}for(;i<nTotal;i++){for(paramName=paramNames[i],values[paramName]=this.params[paramName].value(searchParams[paramName]),param=this.params[paramName],paramVal=searchParams[paramName],j=0;j<param.replace.length;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);isDefined(paramVal)&&(paramVal=param.type.decode(paramVal)),values[paramName]=param.value(paramVal)}return values},UrlMatcher.prototype.parameters=function(param){return isDefined(param)?this.params[param]||null:this.$$paramNames},UrlMatcher.prototype.validates=function(params){return this.params.$$validates(params)},UrlMatcher.prototype.format=function(values){function encodeDashes(str){return encodeURIComponent(str).replace(/-/g,function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()})}values=values||{};var segments=this.segments,params=this.parameters(),paramset=this.params;if(!this.validates(values))return null;var i,search=!1,nPath=segments.length-1,nTotal=params.length,result=segments[0];for(i=0;i<nTotal;i++){var isPathParam=i<nPath,name=params[i],param=paramset[name],value=param.value(values[name]),isDefaultValue=param.isOptional&&param.type.equals(param.value(),value),squash=!!isDefaultValue&&param.squash,encoded=param.type.encode(value);if(isPathParam){var nextSegment=segments[i+1],isFinalPathParam=i+1===nPath;if(squash===!1)null!=encoded&&(result+=isArray(encoded)?map(encoded,encodeDashes).join("-"):encodeURIComponent(encoded)),result+=nextSegment;else if(squash===!0){var capture=result.match(/\/$/)?/\/?(.*)/:/(.*)/;result+=nextSegment.match(capture)[1]}else isString(squash)&&(result+=squash+nextSegment);isFinalPathParam&&param.squash===!0&&"/"===result.slice(-1)&&(result=result.slice(0,-1))}else{if(null==encoded||isDefaultValue&&squash!==!1)continue;if(isArray(encoded)||(encoded=[encoded]),0===encoded.length)continue;encoded=map(encoded,encodeURIComponent).join("&"+name+"="),result+=(search?"&":"?")+(name+"="+encoded),search=!0}}return result},Type.prototype.is=function(val,key){return!0},Type.prototype.encode=function(val,key){return val},Type.prototype.decode=function(val,key){return val},Type.prototype.equals=function(a,b){return a==b},Type.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)},Type.prototype.pattern=/.*/,Type.prototype.toString=function(){return"{Type:"+this.name+"}"},Type.prototype.$normalize=function(val){return this.is(val)?val:this.decode(val)},Type.prototype.$asArray=function(mode,isSearch){function ArrayType(type,mode){function bindTo(type,callbackName){return function(){return type[callbackName].apply(type,arguments)}}function arrayWrap(val){return isArray(val)?val:isDefined(val)?[val]:[]}function arrayUnwrap(val){switch(val.length){case 0:return undefined;case 1:return"auto"===mode?val[0]:val;default:return val}}function falsey(val){return!val}function arrayHandler(callback,allTruthyMode){return function(val){if(isArray(val)&&0===val.length)return val;val=arrayWrap(val);var result=map(val,callback);return allTruthyMode===!0?0===filter(result,falsey).length:arrayUnwrap(result)}}function arrayEqualsHandler(callback){return function(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(!callback(left[i],right[i]))return!1;return!0}}this.encode=arrayHandler(bindTo(type,"encode")),this.decode=arrayHandler(bindTo(type,"decode")),this.is=arrayHandler(bindTo(type,"is"),!0),this.equals=arrayEqualsHandler(bindTo(type,"equals")),this.pattern=type.pattern,this.$normalize=arrayHandler(bindTo(type,"$normalize")),this.name=type.name,this.$arrayMode=mode}if(!mode)return this;if("auto"===mode&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,mode)},angular.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory),angular.module("ui.router.util").run(["$urlMatcherFactory",function($urlMatcherFactory){}]),$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider),$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",$StateProvider).run(["$injector",function($injector){$injector.get("$state.runtime").autoinject&&$injector.get("$state")}]),$ViewProvider.$inject=[],angular.module("ui.router.state").provider("$view",$ViewProvider),angular.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider),$ViewDirective.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],$ViewDirectiveFill.$inject=["$compile","$controller","$state","$interpolate"],angular.module("ui.router.state").directive("uiView",$ViewDirective),angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill),$StateRefDirective.$inject=["$state","$timeout"],$StateRefDynamicDirective.$inject=["$state","$timeout"],$StateRefActiveDirective.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateRefActiveDirective).directive("uiSrefActiveEq",$StateRefActiveDirective).directive("uiState",$StateRefDynamicDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter)}(window,window.angular),function(root,factory){"function"==typeof define&&define.amd?define([],function(){return factory()}):"object"==typeof exports?module.exports=factory():factory()}(this,function(){function runTranslate($translate){"use strict";var key=$translate.storageKey(),storage=$translate.storage(),fallbackFromIncorrectStorageValue=function(){var preferred=$translate.preferredLanguage();angular.isString(preferred)?$translate.use(preferred):storage.put(key,$translate.use())};fallbackFromIncorrectStorageValue.displayName="fallbackFromIncorrectStorageValue",storage?storage.get(key)?$translate.use(storage.get(key)).catch(fallbackFromIncorrectStorageValue):fallbackFromIncorrectStorageValue():angular.isString($translate.preferredLanguage())&&$translate.use($translate.preferredLanguage())}function $translateSanitizationProvider(){"use strict";var $sanitize,strategies,currentStrategy=null,hasConfiguredStrategy=!1,hasShownNoStrategyConfiguredWarning=!1;strategies={sanitize:function(value,mode){return"text"===mode&&(value=htmlSanitizeValue(value)),value},escape:function(value,mode){return"text"===mode&&(value=htmlEscapeValue(value)),value},sanitizeParameters:function(value,mode){return"params"===mode&&(value=mapInterpolationParameters(value,htmlSanitizeValue)),value},escapeParameters:function(value,mode){return"params"===mode&&(value=mapInterpolationParameters(value,htmlEscapeValue)),value}},strategies.escaped=strategies.escapeParameters,this.addStrategy=function(strategyName,strategyFunction){return strategies[strategyName]=strategyFunction,this},this.removeStrategy=function(strategyName){return delete strategies[strategyName],this},this.useStrategy=function(strategy){return hasConfiguredStrategy=!0,currentStrategy=strategy,this},this.$get=["$injector","$log",function($injector,$log){var cachedStrategyMap={},applyStrategies=function(value,mode,selectedStrategies){return angular.forEach(selectedStrategies,function(selectedStrategy){if(angular.isFunction(selectedStrategy))value=selectedStrategy(value,mode);else if(angular.isFunction(strategies[selectedStrategy]))value=strategies[selectedStrategy](value,mode);else{if(!angular.isString(strategies[selectedStrategy]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+selectedStrategy+"'");if(!cachedStrategyMap[strategies[selectedStrategy]])try{cachedStrategyMap[strategies[selectedStrategy]]=$injector.get(strategies[selectedStrategy])}catch(e){throw cachedStrategyMap[strategies[selectedStrategy]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+selectedStrategy+"'")}value=cachedStrategyMap[strategies[selectedStrategy]](value,mode)}}),value},showNoStrategyConfiguredWarning=function(){hasConfiguredStrategy||hasShownNoStrategyConfiguredWarning||($log.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),hasShownNoStrategyConfiguredWarning=!0)};return $injector.has("$sanitize")&&($sanitize=$injector.get("$sanitize")),{useStrategy:function(self){return function(strategy){self.useStrategy(strategy)}}(this),sanitize:function(value,mode,strategy){if(currentStrategy||showNoStrategyConfiguredWarning(),arguments.length<3&&(strategy=currentStrategy),!strategy)return value;var selectedStrategies=angular.isArray(strategy)?strategy:[strategy];return applyStrategies(value,mode,selectedStrategies)}}}];var htmlEscapeValue=function(value){var element=angular.element("<div></div>");return element.text(value),element.html()},htmlSanitizeValue=function(value){if(!$sanitize)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return $sanitize(value)},mapInterpolationParameters=function(value,iteratee,stack){if(angular.isObject(value)){var result=angular.isArray(value)?[]:{};if(stack){if(stack.indexOf(value)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else stack=[];return stack.push(value),angular.forEach(value,function(propertyValue,propertyKey){result[propertyKey]=mapInterpolationParameters(propertyValue,iteratee,stack)}),stack.splice(-1,1),result}return angular.isNumber(value)?value:iteratee(value)}}function $translate($STORAGE_KEY,$windowProvider,$translateSanitizationProvider,pascalprechtTranslateOverrider){"use strict";var $preferredLanguage,$languageKeyAliases,$fallbackLanguage,$fallbackWasString,$uses,$nextLang,$storageFactory,$storagePrefix,$missingTranslationHandlerFactory,$interpolationFactory,$loaderFactory,$loaderOptions,$notFoundIndicatorLeft,$notFoundIndicatorRight,loaderCache,postProcessFn,$translationTable={},$availableLanguageKeys=[],$storageKey=$STORAGE_KEY,$interpolatorFactories=[],$cloakClassName="translate-cloak",$postCompilingEnabled=!1,$forceAsyncReloadEnabled=!1,$nestedObjectDelimeter=".",$isReady=!1,directivePriority=0,statefulFilter=!0,uniformLanguageTagResolver="default",languageTagResolver={default:function(tag){return(tag||"").split("-").join("_")},java:function(tag){var temp=(tag||"").split("-").join("_"),parts=temp.split("_");return parts.length>1?parts[0].toLowerCase()+"_"+parts[1].toUpperCase():temp},bcp47:function(tag){var temp=(tag||"").split("_").join("-"),parts=temp.split("-");return parts.length>1?parts[0].toLowerCase()+"-"+parts[1].toUpperCase():temp},"iso639-1":function(tag){var temp=(tag||"").split("_").join("-"),parts=temp.split("-");return parts[0].toLowerCase()}},version="2.11.0",getFirstBrowserLanguage=function(){if(angular.isFunction(pascalprechtTranslateOverrider.getLocale))return pascalprechtTranslateOverrider.getLocale();var i,language,nav=$windowProvider.$get().navigator,browserLanguagePropertyKeys=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(nav.languages))for(i=0;i<nav.languages.length;i++)if(language=nav.languages[i],language&&language.length)return language;for(i=0;i<browserLanguagePropertyKeys.length;i++)if(language=nav[browserLanguagePropertyKeys[i]],language&&language.length)return language;return null};getFirstBrowserLanguage.displayName="angular-translate/service: getFirstBrowserLanguage";var getLocale=function(){var locale=getFirstBrowserLanguage()||"";return languageTagResolver[uniformLanguageTagResolver]&&(locale=languageTagResolver[uniformLanguageTagResolver](locale)),locale};getLocale.displayName="angular-translate/service: getLocale";var indexOf=function(array,searchElement){for(var i=0,len=array.length;i<len;i++)if(array[i]===searchElement)return i;return-1},trim=function(){return this.toString().replace(/^\s+|\s+$/g,"")},negotiateLocale=function(preferred){if(preferred){for(var avail=[],locale=angular.lowercase(preferred),i=0,n=$availableLanguageKeys.length;i<n;i++)avail.push(angular.lowercase($availableLanguageKeys[i]));if(indexOf(avail,locale)>-1)return preferred;if($languageKeyAliases){var alias;for(var langKeyAlias in $languageKeyAliases)if($languageKeyAliases.hasOwnProperty(langKeyAlias)){var hasWildcardKey=!1,hasExactKey=Object.prototype.hasOwnProperty.call($languageKeyAliases,langKeyAlias)&&angular.lowercase(langKeyAlias)===angular.lowercase(preferred);if("*"===langKeyAlias.slice(-1)&&(hasWildcardKey=langKeyAlias.slice(0,-1)===preferred.slice(0,langKeyAlias.length-1)),(hasExactKey||hasWildcardKey)&&(alias=$languageKeyAliases[langKeyAlias],indexOf(avail,angular.lowercase(alias))>-1))return alias}}var parts=preferred.split("_");return parts.length>1&&indexOf(avail,angular.lowercase(parts[0]))>-1?parts[0]:void 0}},translations=function(langKey,translationTable){if(!langKey&&!translationTable)return $translationTable;if(langKey&&!translationTable){if(angular.isString(langKey))return $translationTable[langKey]}else angular.isObject($translationTable[langKey])||($translationTable[langKey]={}),angular.extend($translationTable[langKey],flatObject(translationTable));return this};this.translations=translations,this.cloakClassName=function(name){return name?($cloakClassName=name,this):$cloakClassName},this.nestedObjectDelimeter=function(delimiter){return delimiter?($nestedObjectDelimeter=delimiter,this):$nestedObjectDelimeter};var flatObject=function(data,path,result,prevKey){var key,keyWithPath,keyWithShortPath,val;path||(path=[]),result||(result={});for(key in data)Object.prototype.hasOwnProperty.call(data,key)&&(val=data[key],angular.isObject(val)?flatObject(val,path.concat(key),result,key):(keyWithPath=path.length?""+path.join($nestedObjectDelimeter)+$nestedObjectDelimeter+key:key,path.length&&key===prevKey&&(keyWithShortPath=""+path.join($nestedObjectDelimeter),result[keyWithShortPath]="@:"+keyWithPath),result[keyWithPath]=val));return result};flatObject.displayName="flatObject",this.addInterpolation=function(factory){return $interpolatorFactories.push(factory),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(factory){return $interpolationFactory=factory,this},this.useSanitizeValueStrategy=function(value){return $translateSanitizationProvider.useStrategy(value),this},this.preferredLanguage=function(langKey){return langKey?(setupPreferredLanguage(langKey),this):$preferredLanguage};var setupPreferredLanguage=function(langKey){return langKey&&($preferredLanguage=langKey),$preferredLanguage};this.translationNotFoundIndicator=function(indicator){return this.translationNotFoundIndicatorLeft(indicator),this.translationNotFoundIndicatorRight(indicator),this},this.translationNotFoundIndicatorLeft=function(indicator){return indicator?($notFoundIndicatorLeft=indicator,this):$notFoundIndicatorLeft},this.translationNotFoundIndicatorRight=function(indicator){return indicator?($notFoundIndicatorRight=indicator,this):$notFoundIndicatorRight},this.fallbackLanguage=function(langKey){return fallbackStack(langKey),this};var fallbackStack=function(langKey){return langKey?(angular.isString(langKey)?($fallbackWasString=!0,$fallbackLanguage=[langKey]):angular.isArray(langKey)&&($fallbackWasString=!1,$fallbackLanguage=langKey),angular.isString($preferredLanguage)&&indexOf($fallbackLanguage,$preferredLanguage)<0&&$fallbackLanguage.push($preferredLanguage),this):$fallbackWasString?$fallbackLanguage[0]:$fallbackLanguage};this.use=function(langKey){if(langKey){if(!$translationTable[langKey]&&!$loaderFactory)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+langKey+"'");return $uses=langKey,this}return $uses},this.resolveClientLocale=function(){return getLocale()};var storageKey=function(key){return key?($storageKey=key,this):$storagePrefix?$storagePrefix+$storageKey:$storageKey};this.storageKey=storageKey,this.useUrlLoader=function(url,options){return this.useLoader("$translateUrlLoader",angular.extend({url:url},options))},this.useStaticFilesLoader=function(options){return this.useLoader("$translateStaticFilesLoader",options)},this.useLoader=function(loaderFactory,options){return $loaderFactory=loaderFactory,$loaderOptions=options||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(storageFactory){return $storageFactory=storageFactory,this},this.storagePrefix=function(prefix){return prefix?($storagePrefix=prefix,this):prefix},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(factory){return $missingTranslationHandlerFactory=factory,this},this.usePostCompiling=function(value){return $postCompilingEnabled=!!value,this},this.forceAsyncReload=function(value){return $forceAsyncReloadEnabled=!!value,this},this.uniformLanguageTag=function(options){return options?angular.isString(options)&&(options={standard:options}):options={},uniformLanguageTagResolver=options.standard,this},this.determinePreferredLanguage=function(fn){var locale=fn&&angular.isFunction(fn)?fn():getLocale();return $preferredLanguage=$availableLanguageKeys.length?negotiateLocale(locale)||locale:locale,this},this.registerAvailableLanguageKeys=function(languageKeys,aliases){return languageKeys?($availableLanguageKeys=languageKeys,aliases&&($languageKeyAliases=aliases),this):$availableLanguageKeys},this.useLoaderCache=function(cache){return cache===!1?loaderCache=void 0:cache===!0?loaderCache=!0:"undefined"==typeof cache?loaderCache="$translationCache":cache&&(loaderCache=cache),this},this.directivePriority=function(priority){return void 0===priority?directivePriority:(directivePriority=priority,this)},this.statefulFilter=function(state){return void 0===state?statefulFilter:(statefulFilter=state,this)},this.postProcess=function(fn){return postProcessFn=fn?fn:void 0,this},this.$get=["$log","$injector","$rootScope","$q",function($log,$injector,$rootScope,$q){var Storage,fallbackIndex,startFallbackIteration,defaultInterpolator=$injector.get($interpolationFactory||"$translateDefaultInterpolation"),pendingLoader=!1,interpolatorHashMap={},langPromises={},$translate=function(translationId,interpolateParams,interpolationId,defaultTranslationText,forceLanguage){!$uses&&$preferredLanguage&&($uses=$preferredLanguage);var uses=forceLanguage&&forceLanguage!==$uses?negotiateLocale(forceLanguage)||forceLanguage:$uses;if(forceLanguage&&loadTranslationsIfMissing(forceLanguage),angular.isArray(translationId)){var translateAll=function(translationIds){for(var results={},promises=[],translate=function(translationId){var deferred=$q.defer(),regardless=function(value){results[translationId]=value,deferred.resolve([translationId,value])};return $translate(translationId,interpolateParams,interpolationId,defaultTranslationText,forceLanguage).then(regardless,regardless),deferred.promise},i=0,c=translationIds.length;i<c;i++)promises.push(translate(translationIds[i]));return $q.all(promises).then(function(){return results})};return translateAll(translationId)}var deferred=$q.defer();translationId&&(translationId=trim.apply(translationId));var promiseToWaitFor=function(){var promise=$preferredLanguage?langPromises[$preferredLanguage]:langPromises[uses];if(fallbackIndex=0,$storageFactory&&!promise){var langKey=Storage.get($storageKey);if(promise=langPromises[langKey],$fallbackLanguage&&$fallbackLanguage.length){var index=indexOf($fallbackLanguage,langKey);fallbackIndex=0===index?1:0,indexOf($fallbackLanguage,$preferredLanguage)<0&&$fallbackLanguage.push($preferredLanguage)}}return promise}();if(promiseToWaitFor){var promiseResolved=function(){forceLanguage||(uses=$uses),determineTranslation(translationId,interpolateParams,interpolationId,defaultTranslationText,uses).then(deferred.resolve,deferred.reject)};promiseResolved.displayName="promiseResolved",promiseToWaitFor.finally(promiseResolved)}else determineTranslation(translationId,interpolateParams,interpolationId,defaultTranslationText,uses).then(deferred.resolve,deferred.reject);return deferred.promise},applyNotFoundIndicators=function(translationId){return $notFoundIndicatorLeft&&(translationId=[$notFoundIndicatorLeft,translationId].join(" ")),$notFoundIndicatorRight&&(translationId=[translationId,$notFoundIndicatorRight].join(" ")),translationId},useLanguage=function(key){$uses=key,$storageFactory&&Storage.put($translate.storageKey(),$uses),$rootScope.$emit("$translateChangeSuccess",{language:key}),defaultInterpolator.setLocale($uses);var eachInterpolator=function(interpolator,id){interpolatorHashMap[id].setLocale($uses)};eachInterpolator.displayName="eachInterpolatorLocaleSetter",angular.forEach(interpolatorHashMap,eachInterpolator),$rootScope.$emit("$translateChangeEnd",{language:key})},loadAsync=function(key){if(!key)throw"No language key specified for loading.";var deferred=$q.defer();$rootScope.$emit("$translateLoadingStart",{language:key}),pendingLoader=!0;var cache=loaderCache;"string"==typeof cache&&(cache=$injector.get(cache));var loaderOptions=angular.extend({},$loaderOptions,{key:key,$http:angular.extend({},{cache:cache},$loaderOptions.$http)}),onLoaderSuccess=function(data){var translationTable={};$rootScope.$emit("$translateLoadingSuccess",{language:key}),angular.isArray(data)?angular.forEach(data,function(table){angular.extend(translationTable,flatObject(table))}):angular.extend(translationTable,flatObject(data)),pendingLoader=!1,deferred.resolve({key:key,table:translationTable}),$rootScope.$emit("$translateLoadingEnd",{language:key})};onLoaderSuccess.displayName="onLoaderSuccess";var onLoaderError=function(key){$rootScope.$emit("$translateLoadingError",{language:key}),deferred.reject(key),$rootScope.$emit("$translateLoadingEnd",{language:key})};return onLoaderError.displayName="onLoaderError",$injector.get($loaderFactory)(loaderOptions).then(onLoaderSuccess,onLoaderError),deferred.promise};if($storageFactory&&(Storage=$injector.get($storageFactory),!Storage.get||!Storage.put))throw new Error("Couldn't use storage '"+$storageFactory+"', missing get() or put() method!");if($interpolatorFactories.length){var eachInterpolationFactory=function(interpolatorFactory){var interpolator=$injector.get(interpolatorFactory);interpolator.setLocale($preferredLanguage||$uses),interpolatorHashMap[interpolator.getInterpolationIdentifier()]=interpolator};eachInterpolationFactory.displayName="interpolationFactoryAdder",angular.forEach($interpolatorFactories,eachInterpolationFactory)}var getTranslationTable=function(langKey){var deferred=$q.defer();if(Object.prototype.hasOwnProperty.call($translationTable,langKey))deferred.resolve($translationTable[langKey]);else if(langPromises[langKey]){var onResolve=function(data){translations(data.key,data.table),deferred.resolve(data.table)};onResolve.displayName="translationTableResolver",langPromises[langKey].then(onResolve,deferred.reject)}else deferred.reject();return deferred.promise},getFallbackTranslation=function(langKey,translationId,interpolateParams,Interpolator){var deferred=$q.defer(),onResolve=function(translationTable){if(Object.prototype.hasOwnProperty.call(translationTable,translationId)){Interpolator.setLocale(langKey);var translation=translationTable[translationId];if("@:"===translation.substr(0,2))getFallbackTranslation(langKey,translation.substr(2),interpolateParams,Interpolator).then(deferred.resolve,deferred.reject);else{var interpolatedValue=Interpolator.interpolate(translationTable[translationId],interpolateParams);interpolatedValue=applyPostProcessing(translationId,translationTable[translationId],interpolatedValue,interpolateParams,langKey),deferred.resolve(interpolatedValue)}Interpolator.setLocale($uses)}else deferred.reject()};return onResolve.displayName="fallbackTranslationResolver",getTranslationTable(langKey).then(onResolve,deferred.reject),deferred.promise},getFallbackTranslationInstant=function(langKey,translationId,interpolateParams,Interpolator){var result,translationTable=$translationTable[langKey];if(translationTable&&Object.prototype.hasOwnProperty.call(translationTable,translationId)){if(Interpolator.setLocale(langKey),result=Interpolator.interpolate(translationTable[translationId],interpolateParams),"@:"===result.substr(0,2))return getFallbackTranslationInstant(langKey,result.substr(2),interpolateParams,Interpolator);Interpolator.setLocale($uses)}return result},translateByHandler=function(translationId,interpolateParams,defaultTranslationText){if($missingTranslationHandlerFactory){var resultString=$injector.get($missingTranslationHandlerFactory)(translationId,$uses,interpolateParams,defaultTranslationText);return void 0!==resultString?resultString:translationId}return translationId},resolveForFallbackLanguage=function(fallbackLanguageIndex,translationId,interpolateParams,Interpolator,defaultTranslationText){var deferred=$q.defer();if(fallbackLanguageIndex<$fallbackLanguage.length){var langKey=$fallbackLanguage[fallbackLanguageIndex];getFallbackTranslation(langKey,translationId,interpolateParams,Interpolator).then(function(data){deferred.resolve(data)},function(){return resolveForFallbackLanguage(fallbackLanguageIndex+1,translationId,interpolateParams,Interpolator,defaultTranslationText).then(deferred.resolve,deferred.reject);})}else defaultTranslationText?deferred.resolve(defaultTranslationText):$missingTranslationHandlerFactory?deferred.resolve(translateByHandler(translationId,interpolateParams)):deferred.reject(translateByHandler(translationId,interpolateParams));return deferred.promise},resolveForFallbackLanguageInstant=function(fallbackLanguageIndex,translationId,interpolateParams,Interpolator){var result;if(fallbackLanguageIndex<$fallbackLanguage.length){var langKey=$fallbackLanguage[fallbackLanguageIndex];result=getFallbackTranslationInstant(langKey,translationId,interpolateParams,Interpolator),result||(result=resolveForFallbackLanguageInstant(fallbackLanguageIndex+1,translationId,interpolateParams,Interpolator))}return result},fallbackTranslation=function(translationId,interpolateParams,Interpolator,defaultTranslationText){return resolveForFallbackLanguage(startFallbackIteration>0?startFallbackIteration:fallbackIndex,translationId,interpolateParams,Interpolator,defaultTranslationText)},fallbackTranslationInstant=function(translationId,interpolateParams,Interpolator){return resolveForFallbackLanguageInstant(startFallbackIteration>0?startFallbackIteration:fallbackIndex,translationId,interpolateParams,Interpolator)},determineTranslation=function(translationId,interpolateParams,interpolationId,defaultTranslationText,uses){var deferred=$q.defer(),table=uses?$translationTable[uses]:$translationTable,Interpolator=interpolationId?interpolatorHashMap[interpolationId]:defaultInterpolator;if(table&&Object.prototype.hasOwnProperty.call(table,translationId)){var translation=table[translationId];if("@:"===translation.substr(0,2))$translate(translation.substr(2),interpolateParams,interpolationId,defaultTranslationText,uses).then(deferred.resolve,deferred.reject);else{var resolvedTranslation=Interpolator.interpolate(translation,interpolateParams);resolvedTranslation=applyPostProcessing(translationId,translation,resolvedTranslation,interpolateParams,uses),deferred.resolve(resolvedTranslation)}}else{var missingTranslationHandlerTranslation;$missingTranslationHandlerFactory&&!pendingLoader&&(missingTranslationHandlerTranslation=translateByHandler(translationId,interpolateParams,defaultTranslationText)),uses&&$fallbackLanguage&&$fallbackLanguage.length?fallbackTranslation(translationId,interpolateParams,Interpolator,defaultTranslationText).then(function(translation){deferred.resolve(translation)},function(_translationId){deferred.reject(applyNotFoundIndicators(_translationId))}):$missingTranslationHandlerFactory&&!pendingLoader&&missingTranslationHandlerTranslation?defaultTranslationText?deferred.resolve(defaultTranslationText):deferred.resolve(missingTranslationHandlerTranslation):defaultTranslationText?deferred.resolve(defaultTranslationText):deferred.reject(applyNotFoundIndicators(translationId))}return deferred.promise},determineTranslationInstant=function(translationId,interpolateParams,interpolationId,uses){var result,table=uses?$translationTable[uses]:$translationTable,Interpolator=defaultInterpolator;if(interpolatorHashMap&&Object.prototype.hasOwnProperty.call(interpolatorHashMap,interpolationId)&&(Interpolator=interpolatorHashMap[interpolationId]),table&&Object.prototype.hasOwnProperty.call(table,translationId)){var translation=table[translationId];result="@:"===translation.substr(0,2)?determineTranslationInstant(translation.substr(2),interpolateParams,interpolationId,uses):Interpolator.interpolate(translation,interpolateParams)}else{var missingTranslationHandlerTranslation;$missingTranslationHandlerFactory&&!pendingLoader&&(missingTranslationHandlerTranslation=translateByHandler(translationId,interpolateParams)),uses&&$fallbackLanguage&&$fallbackLanguage.length?(fallbackIndex=0,result=fallbackTranslationInstant(translationId,interpolateParams,Interpolator)):result=$missingTranslationHandlerFactory&&!pendingLoader&&missingTranslationHandlerTranslation?missingTranslationHandlerTranslation:applyNotFoundIndicators(translationId)}return result},clearNextLangAndPromise=function(key){$nextLang===key&&($nextLang=void 0),langPromises[key]=void 0},applyPostProcessing=function(translationId,translation,resolvedTranslation,interpolateParams,uses){var fn=postProcessFn;return fn&&("string"==typeof fn&&(fn=$injector.get(fn)),fn)?fn(translationId,translation,resolvedTranslation,interpolateParams,uses):resolvedTranslation},loadTranslationsIfMissing=function(key){$translationTable[key]||!$loaderFactory||langPromises[key]||(langPromises[key]=loadAsync(key).then(function(translation){translations(translation.key,translation.table)}))};$translate.preferredLanguage=function(langKey){return langKey&&setupPreferredLanguage(langKey),$preferredLanguage},$translate.cloakClassName=function(){return $cloakClassName},$translate.nestedObjectDelimeter=function(){return $nestedObjectDelimeter},$translate.fallbackLanguage=function(langKey){if(void 0!==langKey&&null!==langKey){if(fallbackStack(langKey),$loaderFactory&&$fallbackLanguage&&$fallbackLanguage.length)for(var i=0,len=$fallbackLanguage.length;i<len;i++)langPromises[$fallbackLanguage[i]]||(langPromises[$fallbackLanguage[i]]=loadAsync($fallbackLanguage[i]));$translate.use($translate.use())}return $fallbackWasString?$fallbackLanguage[0]:$fallbackLanguage},$translate.useFallbackLanguage=function(langKey){if(void 0!==langKey&&null!==langKey)if(langKey){var langKeyPosition=indexOf($fallbackLanguage,langKey);langKeyPosition>-1&&(startFallbackIteration=langKeyPosition)}else startFallbackIteration=0},$translate.proposedLanguage=function(){return $nextLang},$translate.storage=function(){return Storage},$translate.negotiateLocale=negotiateLocale,$translate.use=function(key){if(!key)return $uses;var deferred=$q.defer();$rootScope.$emit("$translateChangeStart",{language:key});var aliasedKey=negotiateLocale(key);return $availableLanguageKeys.length>0&&!aliasedKey?$q.reject(key):(aliasedKey&&(key=aliasedKey),$nextLang=key,!$forceAsyncReloadEnabled&&$translationTable[key]||!$loaderFactory||langPromises[key]?langPromises[key]?langPromises[key].then(function(translation){return $nextLang===translation.key&&useLanguage(translation.key),deferred.resolve(translation.key),translation},function(key){return!$uses&&$fallbackLanguage&&$fallbackLanguage.length>0?$translate.use($fallbackLanguage[0]).then(deferred.resolve,deferred.reject):deferred.reject(key)}):(deferred.resolve(key),useLanguage(key)):(langPromises[key]=loadAsync(key).then(function(translation){return translations(translation.key,translation.table),deferred.resolve(translation.key),$nextLang===key&&useLanguage(translation.key),translation},function(key){return $rootScope.$emit("$translateChangeError",{language:key}),deferred.reject(key),$rootScope.$emit("$translateChangeEnd",{language:key}),$q.reject(key)}),langPromises[key].finally(function(){clearNextLangAndPromise(key)})),deferred.promise)},$translate.resolveClientLocale=function(){return getLocale()},$translate.storageKey=function(){return storageKey()},$translate.isPostCompilingEnabled=function(){return $postCompilingEnabled},$translate.isForceAsyncReloadEnabled=function(){return $forceAsyncReloadEnabled},$translate.refresh=function(langKey){function resolve(){deferred.resolve(),$rootScope.$emit("$translateRefreshEnd",{language:langKey})}function reject(){deferred.reject(),$rootScope.$emit("$translateRefreshEnd",{language:langKey})}if(!$loaderFactory)throw new Error("Couldn't refresh translation table, no loader registered!");var deferred=$q.defer();if($rootScope.$emit("$translateRefreshStart",{language:langKey}),langKey)if($translationTable[langKey]){var oneTranslationsLoaded=function(data){translations(data.key,data.table),langKey===$uses&&useLanguage($uses),resolve()};oneTranslationsLoaded.displayName="refreshPostProcessor",loadAsync(langKey).then(oneTranslationsLoaded,reject)}else reject();else{var tables=[],loadingKeys={};if($fallbackLanguage&&$fallbackLanguage.length)for(var i=0,len=$fallbackLanguage.length;i<len;i++)tables.push(loadAsync($fallbackLanguage[i])),loadingKeys[$fallbackLanguage[i]]=!0;$uses&&!loadingKeys[$uses]&&tables.push(loadAsync($uses));var allTranslationsLoaded=function(tableData){$translationTable={},angular.forEach(tableData,function(data){translations(data.key,data.table)}),$uses&&useLanguage($uses),resolve()};allTranslationsLoaded.displayName="refreshPostProcessor",$q.all(tables).then(allTranslationsLoaded,reject)}return deferred.promise},$translate.instant=function(translationId,interpolateParams,interpolationId,forceLanguage){var uses=forceLanguage&&forceLanguage!==$uses?negotiateLocale(forceLanguage)||forceLanguage:$uses;if(null===translationId||angular.isUndefined(translationId))return translationId;if(forceLanguage&&loadTranslationsIfMissing(forceLanguage),angular.isArray(translationId)){for(var results={},i=0,c=translationId.length;i<c;i++)results[translationId[i]]=$translate.instant(translationId[i],interpolateParams,interpolationId,forceLanguage);return results}if(angular.isString(translationId)&&translationId.length<1)return translationId;translationId&&(translationId=trim.apply(translationId));var result,possibleLangKeys=[];$preferredLanguage&&possibleLangKeys.push($preferredLanguage),uses&&possibleLangKeys.push(uses),$fallbackLanguage&&$fallbackLanguage.length&&(possibleLangKeys=possibleLangKeys.concat($fallbackLanguage));for(var j=0,d=possibleLangKeys.length;j<d;j++){var possibleLangKey=possibleLangKeys[j];if($translationTable[possibleLangKey]&&"undefined"!=typeof $translationTable[possibleLangKey][translationId]&&(result=determineTranslationInstant(translationId,interpolateParams,interpolationId,uses)),"undefined"!=typeof result)break}return result||""===result||($notFoundIndicatorLeft||$notFoundIndicatorRight?result=applyNotFoundIndicators(translationId):(result=defaultInterpolator.interpolate(translationId,interpolateParams),$missingTranslationHandlerFactory&&!pendingLoader&&(result=translateByHandler(translationId,interpolateParams)))),result},$translate.versionInfo=function(){return version},$translate.loaderCache=function(){return loaderCache},$translate.directivePriority=function(){return directivePriority},$translate.statefulFilter=function(){return statefulFilter},$translate.isReady=function(){return $isReady};var $onReadyDeferred=$q.defer();$onReadyDeferred.promise.then(function(){$isReady=!0}),$translate.onReady=function(fn){var deferred=$q.defer();return angular.isFunction(fn)&&deferred.promise.then(fn),$isReady?deferred.resolve():$onReadyDeferred.promise.then(deferred.resolve),deferred.promise},$translate.getAvailableLanguageKeys=function(){return $availableLanguageKeys.length>0?$availableLanguageKeys:null};var globalOnReadyListener=$rootScope.$on("$translateReady",function(){$onReadyDeferred.resolve(),globalOnReadyListener(),globalOnReadyListener=null}),globalOnChangeListener=$rootScope.$on("$translateChangeEnd",function(){$onReadyDeferred.resolve(),globalOnChangeListener(),globalOnChangeListener=null});if($loaderFactory){if(angular.equals($translationTable,{})&&$translate.use()&&$translate.use($translate.use()),$fallbackLanguage&&$fallbackLanguage.length)for(var processAsyncResult=function(translation){return translations(translation.key,translation.table),$rootScope.$emit("$translateChangeEnd",{language:translation.key}),translation},i=0,len=$fallbackLanguage.length;i<len;i++){var fallbackLanguageId=$fallbackLanguage[i];!$forceAsyncReloadEnabled&&$translationTable[fallbackLanguageId]||(langPromises[fallbackLanguageId]=loadAsync(fallbackLanguageId).then(processAsyncResult))}}else $rootScope.$emit("$translateReady",{language:$translate.use()});return $translate}]}function $translateDefaultInterpolation($interpolate,$translateSanitization){"use strict";var $locale,$translateInterpolator={},$identifier="default";return $translateInterpolator.setLocale=function(locale){$locale=locale},$translateInterpolator.getInterpolationIdentifier=function(){return $identifier},$translateInterpolator.useSanitizeValueStrategy=function(value){return $translateSanitization.useStrategy(value),this},$translateInterpolator.interpolate=function(string,interpolationParams){interpolationParams=interpolationParams||{},interpolationParams=$translateSanitization.sanitize(interpolationParams,"params");var interpolatedText=$interpolate(string)(interpolationParams);return interpolatedText=$translateSanitization.sanitize(interpolatedText,"text")},$translateInterpolator}function translateDirective($translate,$q,$interpolate,$compile,$parse,$rootScope){"use strict";var trim=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:$translate.directivePriority(),compile:function(tElement,tAttr){var translateValuesExist=tAttr.translateValues?tAttr.translateValues:void 0,translateInterpolation=tAttr.translateInterpolation?tAttr.translateInterpolation:void 0,translateValueExist=tElement[0].outerHTML.match(/translate-value-+/i),interpolateRegExp="^(.*)("+$interpolate.startSymbol()+".*"+$interpolate.endSymbol()+")(.*)",watcherRegExp="^(.*)"+$interpolate.startSymbol()+"(.*)"+$interpolate.endSymbol()+"(.*)";return function(scope,iElement,iAttr){scope.interpolateParams={},scope.preText="",scope.postText="",scope.translateNamespace=getTranslateNamespace(scope);var translationIds={},initInterpolationParams=function(interpolateParams,iAttr,tAttr){if(iAttr.translateValues&&angular.extend(interpolateParams,$parse(iAttr.translateValues)(scope.$parent)),translateValueExist)for(var attr in tAttr)if(Object.prototype.hasOwnProperty.call(iAttr,attr)&&"translateValue"===attr.substr(0,14)&&"translateValues"!==attr){var attributeName=angular.lowercase(attr.substr(14,1))+attr.substr(15);interpolateParams[attributeName]=tAttr[attr]}},observeElementTranslation=function(translationId){if(angular.isFunction(observeElementTranslation._unwatchOld)&&(observeElementTranslation._unwatchOld(),observeElementTranslation._unwatchOld=void 0),angular.equals(translationId,"")||!angular.isDefined(translationId)){var iElementText=trim.apply(iElement.text()),interpolateMatches=iElementText.match(interpolateRegExp);if(angular.isArray(interpolateMatches)){scope.preText=interpolateMatches[1],scope.postText=interpolateMatches[3],translationIds.translate=$interpolate(interpolateMatches[2])(scope.$parent);var watcherMatches=iElementText.match(watcherRegExp);angular.isArray(watcherMatches)&&watcherMatches[2]&&watcherMatches[2].length&&(observeElementTranslation._unwatchOld=scope.$watch(watcherMatches[2],function(newValue){translationIds.translate=newValue,updateTranslations()}))}else translationIds.translate=iElementText?iElementText:void 0}else translationIds.translate=translationId;updateTranslations()},observeAttributeTranslation=function(translateAttr){iAttr.$observe(translateAttr,function(translationId){translationIds[translateAttr]=translationId,updateTranslations()})};initInterpolationParams(scope.interpolateParams,iAttr,tAttr);var firstAttributeChangedEvent=!0;iAttr.$observe("translate",function(translationId){"undefined"==typeof translationId?observeElementTranslation(""):""===translationId&&firstAttributeChangedEvent||(translationIds.translate=translationId,updateTranslations()),firstAttributeChangedEvent=!1});for(var translateAttr in iAttr)iAttr.hasOwnProperty(translateAttr)&&"translateAttr"===translateAttr.substr(0,13)&&observeAttributeTranslation(translateAttr);if(iAttr.$observe("translateDefault",function(value){scope.defaultText=value,updateTranslations()}),translateValuesExist&&iAttr.$observe("translateValues",function(interpolateParams){interpolateParams&&scope.$parent.$watch(function(){angular.extend(scope.interpolateParams,$parse(interpolateParams)(scope.$parent))})}),translateValueExist){var observeValueAttribute=function(attrName){iAttr.$observe(attrName,function(value){var attributeName=angular.lowercase(attrName.substr(14,1))+attrName.substr(15);scope.interpolateParams[attributeName]=value})};for(var attr in iAttr)Object.prototype.hasOwnProperty.call(iAttr,attr)&&"translateValue"===attr.substr(0,14)&&"translateValues"!==attr&&observeValueAttribute(attr)}var updateTranslations=function(){for(var key in translationIds)translationIds.hasOwnProperty(key)&&void 0!==translationIds[key]&&updateTranslation(key,translationIds[key],scope,scope.interpolateParams,scope.defaultText,scope.translateNamespace)},updateTranslation=function(translateAttr,translationId,scope,interpolateParams,defaultTranslationText,translateNamespace){translationId?(translateNamespace&&"."===translationId.charAt(0)&&(translationId=translateNamespace+translationId),$translate(translationId,interpolateParams,translateInterpolation,defaultTranslationText,scope.translateLanguage).then(function(translation){applyTranslation(translation,scope,!0,translateAttr)},function(translationId){applyTranslation(translationId,scope,!1,translateAttr)})):applyTranslation(translationId,scope,!1,translateAttr)},applyTranslation=function(value,scope,successful,translateAttr){if(successful||"undefined"!=typeof scope.defaultText&&(value=scope.defaultText),"translate"===translateAttr){(successful||!successful&&"undefined"==typeof iAttr.translateKeepContent)&&iElement.empty().append(scope.preText+value+scope.postText);var globallyEnabled=$translate.isPostCompilingEnabled(),locallyDefined="undefined"!=typeof tAttr.translateCompile,locallyEnabled=locallyDefined&&"false"!==tAttr.translateCompile;(globallyEnabled&&!locallyDefined||locallyEnabled)&&$compile(iElement.contents())(scope)}else{var attributeName=iAttr.$attr[translateAttr];"data-"===attributeName.substr(0,5)&&(attributeName=attributeName.substr(5)),attributeName=attributeName.substr(15),iElement.attr(attributeName,value)}};(translateValuesExist||translateValueExist||iAttr.translateDefault)&&scope.$watch("interpolateParams",updateTranslations,!0);var unbindTranslateLanguage=scope.$on("translateLanguageChanged",updateTranslations),unbind=$rootScope.$on("$translateChangeSuccess",updateTranslations);iElement.text().length?observeElementTranslation(iAttr.translate?iAttr.translate:""):iAttr.translate&&observeElementTranslation(iAttr.translate),updateTranslations(),scope.$on("$destroy",function(){unbindTranslateLanguage(),unbind()})}}}}function getTranslateNamespace(scope){"use strict";return scope.translateNamespace?scope.translateNamespace:scope.$parent?getTranslateNamespace(scope.$parent):void 0}function translateCloakDirective($translate,$rootScope){"use strict";return{compile:function(tElement){var applyCloak=function(){tElement.addClass($translate.cloakClassName())},removeCloak=function(){tElement.removeClass($translate.cloakClassName())};return $translate.onReady(function(){removeCloak()}),applyCloak(),function(scope,iElement,iAttr){iAttr.translateCloak&&iAttr.translateCloak.length&&(iAttr.$observe("translateCloak",function(translationId){$translate(translationId).then(removeCloak,applyCloak)}),$rootScope.$on("$translateChangeSuccess",function(){$translate(iAttr.translateCloak).then(removeCloak,applyCloak)}))}}}}function translateNamespaceDirective(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(scope,iElement,iAttrs){scope.translateNamespace=getTranslateNamespace(scope),scope.translateNamespace&&"."===iAttrs.translateNamespace.charAt(0)?scope.translateNamespace+=iAttrs.translateNamespace:scope.translateNamespace=iAttrs.translateNamespace}}}}}function getTranslateNamespace(scope){"use strict";return scope.translateNamespace?scope.translateNamespace:scope.$parent?getTranslateNamespace(scope.$parent):void 0}function translateLanguageDirective(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(scope,iElement,iAttrs){iAttrs.$observe("translateLanguage",function(newTranslateLanguage){scope.translateLanguage=newTranslateLanguage}),scope.$watch("translateLanguage",function(){scope.$broadcast("translateLanguageChanged")})}}}}function translateFilterFactory($parse,$translate){"use strict";var translateFilter=function(translationId,interpolateParams,interpolation,forceLanguage){return angular.isObject(interpolateParams)||(interpolateParams=$parse(interpolateParams)(this)),$translate.instant(translationId,interpolateParams,interpolation,forceLanguage)};return $translate.statefulFilter()&&(translateFilter.$stateful=!0),translateFilter}function $translationCache($cacheFactory){"use strict";return $cacheFactory("translations")}return runTranslate.$inject=["$translate"],$translate.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],$translateDefaultInterpolation.$inject=["$interpolate","$translateSanitization"],translateDirective.$inject=["$translate","$q","$interpolate","$compile","$parse","$rootScope"],translateCloakDirective.$inject=["$translate","$rootScope"],translateFilterFactory.$inject=["$parse","$translate"],$translationCache.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(runTranslate),runTranslate.$inject=["$translate"],runTranslate.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",$translateSanitizationProvider),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",$translate),$translate.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],$translate.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",$translateDefaultInterpolation),$translateDefaultInterpolation.$inject=["$interpolate","$translateSanitization"],$translateDefaultInterpolation.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",translateDirective),translateDirective.$inject=["$translate","$q","$interpolate","$compile","$parse","$rootScope"],translateDirective.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateCloak",translateCloakDirective),translateCloakDirective.$inject=["$translate","$rootScope"],translateCloakDirective.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",translateNamespaceDirective),translateNamespaceDirective.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",translateLanguageDirective),translateLanguageDirective.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",translateFilterFactory),translateFilterFactory.$inject=["$parse","$translate"],translateFilterFactory.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",$translationCache),$translationCache.$inject=["$cacheFactory"],$translationCache.displayName="$translationCache","pascalprecht.translate"}),function(root,factory){"function"==typeof define&&define.amd?define([],function(){return factory()}):"object"==typeof exports?module.exports=factory():factory()}(this,function(){function $translateStaticFilesLoader($q,$http){"use strict";return function(options){if(!(options&&(angular.isArray(options.files)||angular.isString(options.prefix)&&angular.isString(options.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");options.files||(options.files=[{prefix:options.prefix,suffix:options.suffix}]);for(var load=function(file){if(!file||!angular.isString(file.prefix)||!angular.isString(file.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");return $http(angular.extend({url:[file.prefix,options.key,file.suffix].join(""),method:"GET",params:""},options.$http)).then(function(result){return result.data},function(){return $q.reject(options.key)})},promises=[],length=options.files.length,i=0;i<length;i++)promises.push(load({prefix:options.files[i].prefix,key:options.key,suffix:options.files[i].suffix}));return $q.all(promises).then(function(data){for(var length=data.length,mergedData={},i=0;i<length;i++)for(var key in data[i])mergedData[key]=data[i][key];return mergedData})}}return $translateStaticFilesLoader.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",$translateStaticFilesLoader),$translateStaticFilesLoader.$inject=["$q","$http"],$translateStaticFilesLoader.displayName="$translateStaticFilesLoader","pascalprecht.translate"}),angular.module("lr.upload",["lr.upload.formdata","lr.upload.iframe","lr.upload.directives"]),angular.module("lr.upload.directives",[]),angular.module("lr.upload.directives").directive("uploadButton",["upload",function(upload){return{restrict:"EA",scope:{data:"=?data",url:"@",param:"@",method:"@",onUpload:"&",onSuccess:"&",onError:"&",onComplete:"&"},link:function(scope,element,attr){var el=angular.element(element),fileInput=angular.element('<input type="file" />');if(el.append(fileInput),fileInput.on("change",function(){var fileInput=angular.element(this);if(!fileInput[0].files||0!==fileInput[0].files.length){var options={url:scope.url,method:scope.method||"POST",forceIFrameUpload:scope.$eval(attr.forceIframeUpload)||!1,data:scope.data||{}};options.data[scope.param||"file"]=fileInput,scope.$apply(function(){scope.onUpload({files:fileInput[0].files})}),upload(options).then(function(response){scope.onSuccess({response:response}),scope.onComplete({response:response})},function(response){scope.onError({response:response}),scope.onComplete({response:response})})}}),"required"in attr&&attr.$observe("required",function(value){var required=""===value||scope.$eval(value);fileInput.attr("required",required),element.toggleClass("ng-valid",!required),element.toggleClass("ng-invalid ng-invalid-required",required)}),"accept"in attr&&attr.$observe("accept",function(value){fileInput.attr("accept",value)}),upload.support.formData){var uploadButtonMultipleObserve=function(){fileInput.attr("multiple",!(!scope.$eval(attr.multiple)||scope.$eval(attr.forceIframeUpload)))};attr.$observe("multiple",uploadButtonMultipleObserve),attr.$observe("forceIframeUpload",uploadButtonMultipleObserve)}}}}]),angular.module("lr.upload.formdata",[]).factory("formDataTransform",function(){return function(data){var formData=new FormData;return angular.forEach(data,function(value,key){if(angular.isElement(value)){var files=[];angular.forEach(value,function(el){angular.forEach(el.files,function(file){files.push(file)}),el.value=""}),0!==files.length&&(files.length>1?angular.forEach(files,function(file,index){formData.append(key+"["+index+"]",file)}):formData.append(key,files[0]))}else formData.append(key,value)}),formData}}).factory("formDataUpload",["$http","formDataTransform",function($http,formDataTransform){return function(config){return config.transformRequest=formDataTransform,config.method=config.method||"POST",config.headers=angular.extend(config.headers||{},{"Content-Type":void 0}),$http(config)}}]),angular.module("lr.upload.iframe",[]).factory("iFrameUpload",["$q","$http","$document","$rootScope",function($q,$http,$document,$rootScope){function indexOf(array,obj){if(array.indexOf)return array.indexOf(obj);for(var i=0;i<array.length;i++)if(obj===array[i])return i;return-1}function iFrameUpload(config){var files=[],deferred=$q.defer(),promise=deferred.promise;angular.forEach(config.data||{},function(value,key){angular.isElement(value)&&(delete config.data[key],value.attr("name",key),files.push(value))});var addParamChar=/\?/.test(config.url)?"&":"?";"DELETE"===config.method?(config.url=config.url+addParamChar+"_method=DELETE",config.method="POST"):"PUT"===config.method?(config.url=config.url+addParamChar+"_method=PUT",config.method="POST"):"PATCH"===config.method&&(config.url=config.url+addParamChar+"_method=PATCH",config.method="POST");var body=angular.element($document[0].body),uniqueScope=$rootScope.$new(),uniqueName="iframe-transport-"+uniqueScope.$id;uniqueScope.$destroy();var form=angular.element("<form></form>");form.attr("target",uniqueName),form.attr("action",config.url),form.attr("method",config.method||"POST"),form.css("display","none"),files.length&&(form.attr("enctype","multipart/form-data"),form.attr("encoding","multipart/form-data"));var iframe=angular.element('<iframe name="'+uniqueName+'" src="javascript:false;"></iframe>');return iframe.on("load",function(){function transformData(data,fns){var headers=[];return angular.isFunction(fns)?fns(data,headers):(angular.forEach(fns,function(fn){data=fn(data,headers)}),data)}function removePendingReq(){var idx=indexOf($http.pendingRequests,config);idx!==-1&&($http.pendingRequests.splice(idx,1),config.$iframeTransportForm.remove(),delete config.$iframeTransportForm)}iframe.off("load").on("load",function(){var response;try{var doc=this.contentWindow?this.contentWindow.document:this.contentDocument;if(response=angular.element(doc.body).text(),!response.length)throw new Error}catch(e){}form.append(angular.element('<iframe src="javascript:false;"></iframe>'));try{response=transformData(response,$http.defaults.transformResponse)}catch(e){}deferred.resolve({data:response,status:200,headers:[],config:config})}),angular.forEach(config.data,function(value,name){var input=angular.element('<input type="hidden" />');input.attr("name",name),input.val(value),form.append(input)}),angular.forEach(files,function(input){var clone=input.clone(!0);input.after(clone),form.append(input)}),config.$iframeTransportForm=form,$http.pendingRequests.push(config),form[0].submit(),promise.then(removePendingReq,removePendingReq)}),form.append(iframe),body.append(form),promise}return iFrameUpload}]),angular.module("lr.upload").factory("upload",["$window","formDataUpload","iFrameUpload",function($window,formDataUpload,iFrameUpload){function upload(config){return support.formData&&!config.forceIFrameUpload?formDataUpload(config):iFrameUpload(config)}var support={fileInput:!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test($window.navigator.userAgent)||angular.element('<input type="file">').prop("disabled")),fileUpload:!(!$window.XMLHttpRequestUpload||!$window.FileReader),formData:!!$window.FormData};return upload.support=support,upload}]);var angularEmbedly=angular.module("angular-embedly",[]);!function(module){module.provider("embedlyService",function(){function getProtocol(){return"https"}function embedly($http){this.embed=function(inputUrl,maxwidth,scheme){var escapedUrl=encodeURIComponent(inputUrl),embedlyRequest=getProtocol()+"://api.embed.ly/1/oembed?key="+key+"&url="+escapedUrl;return"undefined"!=typeof maxwidth&&(embedlyRequest=embedlyRequest+"&maxwidth="+maxwidth),"undefined"!=typeof scheme&&(embedlyRequest=embedlyRequest+"&scheme="+scheme),$http({method:"GET",url:embedlyRequest})},this.extract=function(inputUrl){var escapedUrl=encodeURIComponent(inputUrl),embedlyRequest=getProtocol()+"://api.embed.ly/1/extract?key="+key+"&url="+escapedUrl;return $http({method:"GET",url:embedlyRequest})}}var key,secure;this.setKey=function(userKey){return key=userKey},this.getKey=function(){return key},this.secure=function(value){return value?void(secure=value):secure},this.$get=["$http",function($http){return new embedly($http)}]})}(angularEmbedly),function(module){module.controller("emEmbedCtrl",["$scope",function($scope){$scope.embedCode=""}])}(angularEmbedly),function(module){module.directive("emEmbed",["embedlyService",function(embedlyService){return{restrict:"E",scope:{urlsearch:"@",maxwidth:"@",scheme:"@",onempty:"&"},controller:"emEmbedCtrl",link:function(scope,element,attributes){function handleEmpty(){void 0!=scope.onempty&&"function"==typeof scope.onempty&&scope.onempty()}scope.$parent.loading_embedly=!1,scope.$watch("urlsearch",function(newVal){var previousEmbedCode=scope.embedCode;newVal&&(scope.$parent.loading_embedly=!0,embedlyService.embed(newVal,scope.maxwidth,scope.scheme).then(function(data){switch(scope.$parent.loading_embedly=!1,data.data.type){case"video":void 0==data.data.html?handleEmpty():scope.embedCode=data.data.html;break;case"rich":void 0==data.data.html?handleEmpty():scope.embedCode=data.data.html;break;case"photo":void 0==data.data.url?handleEmpty():scope.embedCode='<img src="'+data.data.url+'">';break;default:handleEmpty(),scope.embedCode=""}previousEmbedCode!==scope.embedCode&&element.html("<div>"+scope.embedCode+"</div>")},function(error){scope.$parent.loading_embedly=!1;var previousEmbedCode=scope.embedCode;scope.embedCode="",previousEmbedCode!==scope.embedCode&&element.html("<div>"+scope.embedCode+"</div>")}))})}}}])}(angularEmbedly);var duScrollDefaultEasing=function(x){"use strict";return x<.5?Math.pow(2*x,2)/2:1-Math.pow(2*(1-x),2)/2},duScroll=angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",duScrollDefaultEasing).value("duScrollCancelOnEvents","scroll mousedown mousewheel touchmove keydown").value("duScrollBottomSpy",!1).value("duScrollActiveClass","active");"undefined"!=typeof module&&module&&module.exports&&(module.exports=duScroll),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset","duScrollCancelOnEvents",function($window,$q,cancelAnimation,requestAnimation,duScrollEasing,duScrollDuration,duScrollOffset,duScrollCancelOnEvents){"use strict";var proto={},isDocument=function(el){return"undefined"!=typeof HTMLDocument&&el instanceof HTMLDocument||el.nodeType&&el.nodeType===el.DOCUMENT_NODE},isElement=function(el){return"undefined"!=typeof HTMLElement&&el instanceof HTMLElement||el.nodeType&&el.nodeType===el.ELEMENT_NODE},unwrap=function(el){return isElement(el)||isDocument(el)?el:el[0]};proto.duScrollTo=function(left,top,duration,easing){var aliasFn;if(angular.isElement(left)?aliasFn=this.duScrollToElement:angular.isDefined(duration)&&(aliasFn=this.duScrollToAnimated),aliasFn)return aliasFn.apply(this,arguments);var el=unwrap(this);return isDocument(el)?$window.scrollTo(left,top):(el.scrollLeft=left,void(el.scrollTop=top))};var scrollAnimation,deferred;proto.duScrollToAnimated=function(left,top,duration,easing){duration&&!easing&&(easing=duScrollEasing);var startLeft=this.duScrollLeft(),startTop=this.duScrollTop(),deltaLeft=Math.round(left-startLeft),deltaTop=Math.round(top-startTop),startTime=null,progress=0,el=this,cancelScrollAnimation=function($event){(!$event||progress&&$event.which>0)&&(duScrollCancelOnEvents&&el.unbind(duScrollCancelOnEvents,cancelScrollAnimation),cancelAnimation(scrollAnimation),deferred.reject(),scrollAnimation=null)};if(scrollAnimation&&cancelScrollAnimation(),deferred=$q.defer(),0===duration||!deltaLeft&&!deltaTop)return 0===duration&&el.duScrollTo(left,top),deferred.resolve(),deferred.promise;var animationStep=function(timestamp){null===startTime&&(startTime=timestamp),progress=timestamp-startTime;var percent=progress>=duration?1:easing(progress/duration);el.scrollTo(startLeft+Math.ceil(deltaLeft*percent),startTop+Math.ceil(deltaTop*percent)),percent<1?scrollAnimation=requestAnimation(animationStep):(duScrollCancelOnEvents&&el.unbind(duScrollCancelOnEvents,cancelScrollAnimation),scrollAnimation=null,deferred.resolve())};return el.duScrollTo(startLeft,startTop),duScrollCancelOnEvents&&el.bind(duScrollCancelOnEvents,cancelScrollAnimation),scrollAnimation=requestAnimation(animationStep),deferred.promise},proto.duScrollToElement=function(target,offset,duration,easing){var el=unwrap(this);angular.isNumber(offset)&&!isNaN(offset)||(offset=duScrollOffset);var top=this.duScrollTop()+unwrap(target).getBoundingClientRect().top-offset;return isElement(el)&&(top-=el.getBoundingClientRect().top),this.duScrollTo(0,top,duration,easing)},proto.duScrollLeft=function(value,duration,easing){if(angular.isNumber(value))return this.duScrollTo(value,this.duScrollTop(),duration,easing);var el=unwrap(this);return isDocument(el)?$window.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:el.scrollLeft},proto.duScrollTop=function(value,duration,easing){if(angular.isNumber(value))return this.duScrollTo(this.duScrollLeft(),value,duration,easing);var el=unwrap(this);return isDocument(el)?$window.scrollY||document.documentElement.scrollTop||document.body.scrollTop:el.scrollTop},proto.duScrollToElementAnimated=function(target,offset,duration,easing){return this.duScrollToElement(target,offset,duration||duScrollDuration,easing)},proto.duScrollTopAnimated=function(top,duration,easing){return this.duScrollTop(top,duration||duScrollDuration,easing)},proto.duScrollLeftAnimated=function(left,duration,easing){return this.duScrollLeft(left,duration||duScrollDuration,easing)},angular.forEach(proto,function(fn,key){angular.element.prototype[key]=fn;var unprefixed=key.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[unprefixed])&&(angular.element.prototype[unprefixed]=fn)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function($window){"use strict";var vendors=["webkit","moz","o","ms"];return function(fnName,fallback){if($window[fnName])return $window[fnName];for(var key,suffix=fnName.substr(0,1).toUpperCase()+fnName.substr(1),i=0;i<vendors.length;i++)if(key=vendors[i]+suffix,$window[key])return $window[key];return fallback}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(polyfill,$timeout){"use strict";var lastTime=0,fallback=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=$timeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id};return polyfill("requestAnimationFrame",fallback)}]).factory("cancelAnimation",["polyfill","$timeout",function(polyfill,$timeout){"use strict";var fallback=function(promise){$timeout.cancel(promise)};return polyfill("cancelAnimationFrame",fallback)}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollBottomSpy","duScrollActiveClass",function($rootScope,$timeout,$window,$document,scrollContainerAPI,duScrollGreedy,duScrollSpyWait,duScrollBottomSpy,duScrollActiveClass){"use strict";var createScrollHandler=function(context){var timer=!1,queued=!1,handler=function(){queued=!1;var bottomReached,container=context.container,containerEl=container[0],containerOffset=0;if("undefined"!=typeof HTMLElement&&containerEl instanceof HTMLElement||containerEl.nodeType&&containerEl.nodeType===containerEl.ELEMENT_NODE)containerOffset=containerEl.getBoundingClientRect().top,bottomReached=Math.round(containerEl.scrollTop+containerEl.clientHeight)>=containerEl.scrollHeight;else{var documentScrollHeight=$document[0].body.scrollHeight||$document[0].documentElement.scrollHeight;bottomReached=Math.round($window.pageYOffset+$window.innerHeight)>=documentScrollHeight}var i,currentlyActive,toBeActive,spies,spy,pos,compareProperty=duScrollBottomSpy&&bottomReached?"bottom":"top";for(spies=context.spies,currentlyActive=context.currentlyActive,toBeActive=void 0,i=0;i<spies.length;i++)spy=spies[i],pos=spy.getTargetPosition(),pos&&(duScrollBottomSpy&&bottomReached||pos.top+spy.offset-containerOffset<20&&(duScrollGreedy||pos.top*-1+containerOffset)<pos.height)&&(!toBeActive||toBeActive[compareProperty]<pos[compareProperty])&&(toBeActive={spy:spy},toBeActive[compareProperty]=pos[compareProperty]);toBeActive&&(toBeActive=toBeActive.spy),currentlyActive===toBeActive||duScrollGreedy&&!toBeActive||(currentlyActive&&(currentlyActive.$element.removeClass(duScrollActiveClass),$rootScope.$broadcast("duScrollspy:becameInactive",currentlyActive.$element,angular.element(currentlyActive.getTargetElement()))),toBeActive&&(toBeActive.$element.addClass(duScrollActiveClass),$rootScope.$broadcast("duScrollspy:becameActive",toBeActive.$element,angular.element(toBeActive.getTargetElement()))),context.currentlyActive=toBeActive)};return duScrollSpyWait?function(){timer?queued=!0:(handler(),timer=$timeout(function(){timer=!1,queued&&handler()},duScrollSpyWait,!1))}:handler},contexts={},createContext=function($scope){var id=$scope.$id,context={spies:[]};return context.handler=createScrollHandler(context),contexts[id]=context,$scope.$on("$destroy",function(){destroyContext($scope)}),id},destroyContext=function($scope){var id=$scope.$id,context=contexts[id],container=context.container;container&&container.off("scroll",context.handler),delete contexts[id]},defaultContextId=createContext($rootScope),getContextForScope=function(scope){return contexts[scope.$id]?contexts[scope.$id]:scope.$parent?getContextForScope(scope.$parent):contexts[defaultContextId]},getContextForSpy=function(spy){var context,contextId,scope=spy.$scope;if(scope)return getContextForScope(scope);for(contextId in contexts)if(context=contexts[contextId],context.spies.indexOf(spy)!==-1)return context},isElementInDocument=function(element){for(;element.parentNode;)if(element=element.parentNode,element===document)return!0;return!1},addSpy=function(spy){var context=getContextForSpy(spy);context&&(context.spies.push(spy),context.container&&isElementInDocument(context.container)||(context.container&&context.container.off("scroll",context.handler),context.container=scrollContainerAPI.getContainer(spy.$scope),context.container.on("scroll",context.handler).triggerHandler("scroll")))},removeSpy=function(spy){var context=getContextForSpy(spy);spy===context.currentlyActive&&($rootScope.$broadcast("duScrollspy:becameInactive",context.currentlyActive.$element),context.currentlyActive=null);var i=context.spies.indexOf(spy);i!==-1&&context.spies.splice(i,1),spy.$element=null};return{addSpy:addSpy,removeSpy:removeSpy,createContext:createContext,destroyContext:destroyContext,getContextForScope:getContextForScope}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function($document){"use strict";var containers={},setContainer=function(scope,element){var id=scope.$id;return containers[id]=element,id},getContainerId=function(scope){return containers[scope.$id]?scope.$id:scope.$parent?getContainerId(scope.$parent):void 0},getContainer=function(scope){var id=getContainerId(scope);return id?containers[id]:$document},removeContainer=function(scope){var id=getContainerId(scope);id&&delete containers[id]};return{getContainerId:getContainerId,getContainer:getContainer,setContainer:setContainer,removeContainer:removeContainer}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(duScrollDuration,duScrollOffset,scrollContainerAPI){"use strict";return{link:function($scope,$element,$attr){$element.on("click",function(e){if($attr.href&&$attr.href.indexOf("#")!==-1||""!==$attr.duSmoothScroll){var id=$attr.href?$attr.href.replace(/.*(?=#[^\s]+$)/,"").substring(1):$attr.duSmoothScroll,target=document.getElementById(id)||document.getElementsByName(id)[0];if(target&&target.getBoundingClientRect){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var offset=$attr.offset?parseInt($attr.offset,10):duScrollOffset,duration=$attr.duration?parseInt($attr.duration,10):duScrollDuration,container=scrollContainerAPI.getContainer($scope);container.duScrollToElement(angular.element(target),isNaN(offset)?0:offset,isNaN(duration)?0:duration)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(spyAPI){"use strict";return{restrict:"A",scope:!0,compile:function(tElement,tAttrs,transclude){return{pre:function($scope,iElement,iAttrs,controller){spyAPI.createContext($scope)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(scrollContainerAPI){"use strict";return{restrict:"A",scope:!0,compile:function(tElement,tAttrs,transclude){return{pre:function($scope,iElement,iAttrs,controller){iAttrs.$observe("duScrollContainer",function(element){angular.isString(element)&&(element=document.getElementById(element)),element=angular.isElement(element)?angular.element(element):iElement,scrollContainerAPI.setContainer($scope,element),$scope.$on("$destroy",function(){scrollContainerAPI.removeContainer($scope)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(spyAPI,duScrollOffset,$timeout,$rootScope){"use strict";var Spy=function(targetElementOrId,$scope,$element,offset){angular.isElement(targetElementOrId)?this.target=targetElementOrId:angular.isString(targetElementOrId)&&(this.targetId=targetElementOrId),this.$scope=$scope,this.$element=$element,this.offset=offset};return Spy.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0]),this.target},Spy.prototype.getTargetPosition=function(){var target=this.getTargetElement();if(target)return target.getBoundingClientRect()},Spy.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function($scope,$element,$attr){var targetId,href=$attr.ngHref||$attr.href;if(href&&href.indexOf("#")!==-1?targetId=href.replace(/.*(?=#[^\s]+$)/,"").substring(1):$attr.duScrollspy?targetId=$attr.duScrollspy:$attr.duSmoothScroll&&(targetId=$attr.duSmoothScroll),targetId){var timeoutPromise=$timeout(function(){var spy=new Spy(targetId,$scope,$element,(-($attr.offset?parseInt($attr.offset,10):duScrollOffset)));spyAPI.addSpy(spy),$scope.$on("$locationChangeSuccess",spy.flushTargetCache.bind(spy));var deregisterOnStateChange=$rootScope.$on("$stateChangeSuccess",spy.flushTargetCache.bind(spy));$scope.$on("$destroy",function(){spyAPI.removeSpy(spy),deregisterOnStateChange()})},0,!1);$scope.$on("$destroy",function(){$timeout.cancel(timeoutPromise)})}}}}]),angular.module("mentio",[]).directive("mentio",["mentioUtil","$document","$compile","$log","$timeout",function(mentioUtil,$document,$compile,$log,$timeout){return{restrict:"A",scope:{macros:"=mentioMacros",search:"&mentioSearch",select:"&mentioSelect",items:"=mentioItems",typedTerm:"=mentioTypedTerm",altId:"=mentioId",iframeElement:"=mentioIframeElement",requireLeadingSpace:"=mentioRequireLeadingSpace",selectNotFound:"=mentioSelectNotFound",trimTerm:"=mentioTrimTerm",ngModel:"="},controller:["$scope","$timeout","$attrs",function($scope,$timeout,$attrs){$scope.query=function(triggerChar,triggerText){var remoteScope=$scope.triggerCharMap[triggerChar];(void 0===$scope.trimTerm||$scope.trimTerm)&&(triggerText=triggerText.trim()),remoteScope.showMenu(),remoteScope.search({term:triggerText}),remoteScope.typedTerm=triggerText},$scope.defaultSearch=function(locals){var results=[];angular.forEach($scope.items,function(item){item.label.toUpperCase().indexOf(locals.term.toUpperCase())>=0&&results.push(item)}),$scope.localItems=results},$scope.bridgeSearch=function(termString){var searchFn=$attrs.mentioSearch?$scope.search:$scope.defaultSearch;searchFn({term:termString})},$scope.defaultSelect=function(locals){return $scope.defaultTriggerChar+locals.item.label},$scope.bridgeSelect=function(itemVar){var selectFn=$attrs.mentioSelect?$scope.select:$scope.defaultSelect;return selectFn({item:itemVar})},$scope.setTriggerText=function(text){$scope.syncTriggerText&&($scope.typedTerm=void 0===$scope.trimTerm||$scope.trimTerm?text.trim():text)},$scope.context=function(){if($scope.iframeElement)return{iframe:$scope.iframeElement}},$scope.replaceText=function(text,hasTrailingSpace){if($scope.hideAll(),mentioUtil.replaceTriggerText($scope.context(),$scope.targetElement,$scope.targetElementPath,$scope.targetElementSelectedOffset,$scope.triggerCharSet,text,$scope.requireLeadingSpace,hasTrailingSpace),!hasTrailingSpace&&($scope.setTriggerText(""),angular.element($scope.targetElement).triggerHandler("change"),$scope.isContentEditable())){$scope.contentEditableMenuPasted=!0;var timer=$timeout(function(){$scope.contentEditableMenuPasted=!1},200);$scope.$on("$destroy",function(){$timeout.cancel(timer)})}},$scope.hideAll=function(){for(var key in $scope.triggerCharMap)$scope.triggerCharMap.hasOwnProperty(key)&&$scope.triggerCharMap[key].hideMenu()},$scope.getActiveMenuScope=function(){for(var key in $scope.triggerCharMap)if($scope.triggerCharMap.hasOwnProperty(key)&&$scope.triggerCharMap[key].visible)return $scope.triggerCharMap[key];return null},$scope.selectActive=function(){for(var key in $scope.triggerCharMap)$scope.triggerCharMap.hasOwnProperty(key)&&$scope.triggerCharMap[key].visible&&$scope.triggerCharMap[key].selectActive()},$scope.isActive=function(){for(var key in $scope.triggerCharMap)if($scope.triggerCharMap.hasOwnProperty(key)&&$scope.triggerCharMap[key].visible)return!0;return!1},$scope.isContentEditable=function(){return"INPUT"!==$scope.targetElement.nodeName&&"TEXTAREA"!==$scope.targetElement.nodeName},$scope.replaceMacro=function(macro,hasTrailingSpace){hasTrailingSpace?mentioUtil.replaceMacroText($scope.context(),$scope.targetElement,$scope.targetElementPath,$scope.targetElementSelectedOffset,$scope.macros,$scope.macros[macro]):($scope.replacingMacro=!0,$scope.timer=$timeout(function(){mentioUtil.replaceMacroText($scope.context(),$scope.targetElement,$scope.targetElementPath,$scope.targetElementSelectedOffset,$scope.macros,$scope.macros[macro]),angular.element($scope.targetElement).triggerHandler("change"),$scope.replacingMacro=!1},300),$scope.$on("$destroy",function(){$timeout.cancel($scope.timer)}))},$scope.addMenu=function(menuScope){menuScope.parentScope&&$scope.triggerCharMap.hasOwnProperty(menuScope.triggerChar)||($scope.triggerCharMap[menuScope.triggerChar]=menuScope,void 0===$scope.triggerCharSet&&($scope.triggerCharSet=[]),$scope.triggerCharSet.push(menuScope.triggerChar),menuScope.setParent($scope))},$scope.$on("menuCreated",function(event,data){void 0===$attrs.id&&void 0===$attrs.mentioId||($attrs.id===data.targetElement||void 0!==$attrs.mentioId&&$scope.altId===data.targetElement)&&$scope.addMenu(data.scope)}),$document.on("click",function(){$scope.isActive()&&$scope.$apply(function(){$scope.hideAll()})}),$document.on("keydown keypress paste",function(event){var activeMenuScope=$scope.getActiveMenuScope();activeMenuScope&&(9!==event.which&&13!==event.which||(event.preventDefault(),activeMenuScope.selectActive()),27===event.which&&(event.preventDefault(),activeMenuScope.$apply(function(){activeMenuScope.hideMenu()})),40===event.which&&(event.preventDefault(),activeMenuScope.$apply(function(){activeMenuScope.activateNextItem()}),activeMenuScope.adjustScroll(1)),38===event.which&&(event.preventDefault(),activeMenuScope.$apply(function(){activeMenuScope.activatePreviousItem()}),activeMenuScope.adjustScroll(-1)),37!==event.which&&39!==event.which||event.preventDefault())})}],link:function(scope,element,attrs){function keyHandler(event){function stopEvent(event){event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation()}var activeMenuScope=scope.getActiveMenuScope();if(activeMenuScope){if(9===event.which||13===event.which)return stopEvent(event),activeMenuScope.selectActive(),!1;if(27===event.which)return stopEvent(event),activeMenuScope.$apply(function(){activeMenuScope.hideMenu()}),!1;if(40===event.which)return stopEvent(event),activeMenuScope.$apply(function(){activeMenuScope.activateNextItem()}),activeMenuScope.adjustScroll(1),!1;if(38===event.which)return stopEvent(event),activeMenuScope.$apply(function(){activeMenuScope.activatePreviousItem()}),activeMenuScope.adjustScroll(-1),!1;if(37===event.which||39===event.which)return stopEvent(event),!1}}if(scope.triggerCharMap={},scope.targetElement=element,attrs.$set("autocomplete","off"),attrs.mentioItems){scope.localItems=[],scope.parentScope=scope;var itemsRef=attrs.mentioSearch?' mentio-items="items"':' mentio-items="localItems"';scope.defaultTriggerChar=attrs.mentioTriggerChar?scope.$eval(attrs.mentioTriggerChar):"@";var html='<mentio-menu mentio-search="bridgeSearch(term)" mentio-select="bridgeSelect(item)"'+itemsRef;attrs.mentioTemplateUrl&&(html=html+' mentio-template-url="'+attrs.mentioTemplateUrl+'"'),html=html+" mentio-trigger-char=\"'"+scope.defaultTriggerChar+'\'" mentio-parent-scope="parentScope"/>';var linkFn=$compile(html),el=linkFn(scope);element.parent().append(el),scope.$on("$destroy",function(){el.remove()})}attrs.mentioTypedTerm&&(scope.syncTriggerText=!0),scope.$watch("iframeElement",function(newValue){if(newValue){var iframeDocument=newValue.contentWindow.document;iframeDocument.addEventListener("click",function(){scope.isActive()&&scope.$apply(function(){scope.hideAll()})}),iframeDocument.addEventListener("keydown",keyHandler,!0),scope.$on("$destroy",function(){iframeDocument.removeEventListener("keydown",keyHandler)})}}),scope.$watch("ngModel",function(newValue){if(newValue&&""!==newValue||scope.isActive()){if(void 0===scope.triggerCharSet)return void $log.error("Error, no mentio-items attribute was provided, and no separate mentio-menus were specified.  Nothing to do.");if(scope.contentEditableMenuPasted)return void(scope.contentEditableMenuPasted=!1);scope.replacingMacro&&($timeout.cancel(scope.timer),scope.replacingMacro=!1);var isActive=scope.isActive(),isContentEditable=scope.isContentEditable(),mentionInfo=mentioUtil.getTriggerInfo(scope.context(),scope.triggerCharSet,scope.requireLeadingSpace,isActive);if(void 0!==mentionInfo&&(!isActive||isActive&&(isContentEditable&&mentionInfo.mentionTriggerChar===scope.currentMentionTriggerChar||!isContentEditable&&mentionInfo.mentionPosition===scope.currentMentionPosition)))mentionInfo.mentionSelectedElement&&(scope.targetElement=mentionInfo.mentionSelectedElement,scope.targetElementPath=mentionInfo.mentionSelectedPath,scope.targetElementSelectedOffset=mentionInfo.mentionSelectedOffset),scope.setTriggerText(mentionInfo.mentionText),scope.currentMentionPosition=mentionInfo.mentionPosition,scope.currentMentionTriggerChar=mentionInfo.mentionTriggerChar,scope.query(mentionInfo.mentionTriggerChar,mentionInfo.mentionText);else{var currentTypedTerm=scope.typedTerm;scope.setTriggerText(""),scope.hideAll();var macroMatchInfo=mentioUtil.getMacroMatch(scope.context(),scope.macros);if(void 0!==macroMatchInfo)scope.targetElement=macroMatchInfo.macroSelectedElement,scope.targetElementPath=macroMatchInfo.macroSelectedPath,scope.targetElementSelectedOffset=macroMatchInfo.macroSelectedOffset,scope.replaceMacro(macroMatchInfo.macroText,macroMatchInfo.macroHasTrailingSpace);else if(scope.selectNotFound&&currentTypedTerm&&""!==currentTypedTerm){var lastScope=scope.triggerCharMap[scope.currentMentionTriggerChar];if(lastScope){var text=lastScope.select({item:{label:currentTypedTerm}});"function"==typeof text.then?text.then(scope.replaceText):scope.replaceText(text,!0)}}}}})}}}]).directive("mentioMenu",["mentioUtil","$rootScope","$log","$window","$document",function(mentioUtil,$rootScope,$log,$window,$document){return{restrict:"E",scope:{search:"&mentioSearch",select:"&mentioSelect",items:"=mentioItems",triggerChar:"=mentioTriggerChar",forElem:"=mentioFor",parentScope:"=mentioParentScope"},templateUrl:function(tElement,tAttrs){return void 0!==tAttrs.mentioTemplateUrl?tAttrs.mentioTemplateUrl:"mentio-menu.tpl.html"},controller:["$scope",function($scope){$scope.visible=!1,this.activate=$scope.activate=function(item){$scope.activeItem=item},this.isActive=$scope.isActive=function(item){return $scope.activeItem===item},this.selectItem=$scope.selectItem=function(item){var text=$scope.select({item:item});"function"==typeof text.then?text.then($scope.parentMentio.replaceText):$scope.parentMentio.replaceText(text)},$scope.activateNextItem=function(){var index=$scope.items.indexOf($scope.activeItem);this.activate($scope.items[(index+1)%$scope.items.length])},$scope.activatePreviousItem=function(){var index=$scope.items.indexOf($scope.activeItem);this.activate($scope.items[0===index?$scope.items.length-1:index-1])},$scope.isFirstItemActive=function(){var index=$scope.items.indexOf($scope.activeItem);return 0===index},$scope.isLastItemActive=function(){var index=$scope.items.indexOf($scope.activeItem);return index===$scope.items.length-1},$scope.selectActive=function(){$scope.selectItem($scope.activeItem)},$scope.isVisible=function(){return $scope.visible},$scope.showMenu=function(){$scope.visible||($scope.requestVisiblePendingSearch=!0)},$scope.setParent=function(scope){$scope.parentMentio=scope,$scope.targetElement=scope.targetElement}}],link:function(scope,element){if(element[0].parentNode.removeChild(element[0]),$document[0].body.appendChild(element[0]),scope.menuElement=element,scope.parentScope)scope.parentScope.addMenu(scope);else{if(!scope.forElem)return void $log.error("mentio-menu requires a target element in tbe mentio-for attribute");if(!scope.triggerChar)return void $log.error("mentio-menu requires a trigger char");$rootScope.$broadcast("menuCreated",{targetElement:scope.forElem,scope:scope})}angular.element($window).bind("resize",function(){if(scope.isVisible()){var triggerCharSet=[];triggerCharSet.push(scope.triggerChar),mentioUtil.popUnderMention(scope.parentMentio.context(),triggerCharSet,element,scope.requireLeadingSpace)}}),scope.$watch("items",function(items){items&&items.length>0?(scope.activate(items[0]),!scope.visible&&scope.requestVisiblePendingSearch&&(scope.visible=!0,scope.requestVisiblePendingSearch=!1)):scope.hideMenu()}),scope.$watch("isVisible()",function(visible){if(visible){var triggerCharSet=[];triggerCharSet.push(scope.triggerChar),mentioUtil.popUnderMention(scope.parentMentio.context(),triggerCharSet,element,scope.requireLeadingSpace)}}),scope.parentMentio.$on("$destroy",function(){element.remove()}),scope.hideMenu=function(){scope.visible=!1,element.css("display","none")},scope.adjustScroll=function(direction){var menuEl=element[0],menuItemsList=menuEl.querySelector("ul"),menuItem=menuEl.querySelector("[mentio-menu-item].active")||menuEl.querySelector("[data-mentio-menu-item].active");return scope.isFirstItemActive()?menuItemsList.scrollTop=0:scope.isLastItemActive()?menuItemsList.scrollTop=menuItemsList.scrollHeight:void(1===direction?menuItemsList.scrollTop+=menuItem.offsetHeight:menuItemsList.scrollTop-=menuItem.offsetHeight)}}}}]).directive("mentioMenuItem",function(){return{restrict:"A",scope:{item:"=mentioMenuItem"},require:"^mentioMenu",link:function(scope,element,attrs,controller){scope.$watch(function(){return controller.isActive(scope.item)},function(active){active?element.addClass("active"):element.removeClass("active")}),element.bind("mouseenter",function(){scope.$apply(function(){controller.activate(scope.item)})}),element.bind("click",function(){return controller.selectItem(scope.item),!1})}}}).filter("unsafe",["$sce",function($sce){return function(val){return $sce.trustAsHtml(val)}}]).filter("mentioHighlight",function(){function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(matchItem,query,hightlightClass){if(query){var replaceText=hightlightClass?'<span class="'+hightlightClass+'">$&</span>':"<strong>$&</strong>";return(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),replaceText)}return matchItem}}),angular.module("mentio").factory("mentioUtil",["$window","$location","$anchorScroll","$timeout",function($window,$location,$anchorScroll,$timeout){function popUnderMention(ctx,triggerCharSet,selectionEl,requireLeadingSpace){var coordinates,mentionInfo=getTriggerInfo(ctx,triggerCharSet,requireLeadingSpace,!1);void 0!==mentionInfo?(coordinates=selectedElementIsTextAreaOrInput(ctx)?getTextAreaOrInputUnderlinePosition(ctx,getDocument(ctx).activeElement,mentionInfo.mentionPosition):getContentEditableCaretPosition(ctx,mentionInfo.mentionPosition),selectionEl.css({top:coordinates.top+"px",left:coordinates.left+"px",position:"absolute",zIndex:1e4,display:"block"}),$timeout(function(){scrollIntoView(ctx,selectionEl)},0)):selectionEl.css({display:"none"})}function scrollIntoView(ctx,elem){for(var clientRect,reasonableBuffer=20,maxScrollDisplacement=100,e=elem[0];void 0===clientRect||0===clientRect.height;)if(clientRect=e.getBoundingClientRect(),0===clientRect.height&&(e=e.childNodes[0],void 0===e||!e.getBoundingClientRect))return;var elemTop=clientRect.top,elemBottom=elemTop+clientRect.height;if(elemTop<0)$window.scrollTo(0,$window.pageYOffset+clientRect.top-reasonableBuffer);else if(elemBottom>$window.innerHeight){var maxY=$window.pageYOffset+clientRect.top-reasonableBuffer;maxY-$window.pageYOffset>maxScrollDisplacement&&(maxY=$window.pageYOffset+maxScrollDisplacement);var targetY=$window.pageYOffset-($window.innerHeight-elemBottom);targetY>maxY&&(targetY=maxY),$window.scrollTo(0,targetY)}}function selectedElementIsTextAreaOrInput(ctx){var element=getDocument(ctx).activeElement;if(null!==element){var nodeName=element.nodeName,type=element.getAttribute("type");return"INPUT"===nodeName&&"text"===type||"TEXTAREA"===nodeName}return!1}function selectElement(ctx,targetElement,path,offset){var range,elem=targetElement;if(path)for(var i=0;i<path.length;i++){if(elem=elem.childNodes[path[i]],void 0===elem)return;for(;elem.length<offset;)offset-=elem.length,elem=elem.nextSibling;0!==elem.childNodes.length||elem.length||(elem=elem.previousSibling)}var sel=getWindowSelection(ctx);range=getDocument(ctx).createRange(),range.setStart(elem,offset),range.setEnd(elem,offset),range.collapse(!0);try{sel.removeAllRanges()}catch(error){}sel.addRange(range),targetElement.focus()}function pasteHtml(ctx,html,startPos,endPos){var range,sel;sel=getWindowSelection(ctx),range=getDocument(ctx).createRange(),range.setStart(sel.anchorNode,startPos),range.setEnd(sel.anchorNode,endPos),range.deleteContents();var el=getDocument(ctx).createElement("div");el.innerHTML=html;for(var node,lastNode,frag=getDocument(ctx).createDocumentFragment();node=el.firstChild;)lastNode=frag.appendChild(node);range.insertNode(frag),lastNode&&(range=range.cloneRange(),range.setStartAfter(lastNode),range.collapse(!0),sel.removeAllRanges(),sel.addRange(range))}function resetSelection(ctx,targetElement,path,offset){var nodeName=targetElement.nodeName;"INPUT"===nodeName||"TEXTAREA"===nodeName?targetElement!==getDocument(ctx).activeElement&&targetElement.focus():selectElement(ctx,targetElement,path,offset)}function replaceMacroText(ctx,targetElement,path,offset,macros,text){resetSelection(ctx,targetElement,path,offset);var macroMatchInfo=getMacroMatch(ctx,macros);if(macroMatchInfo.macroHasTrailingSpace&&(macroMatchInfo.macroText=macroMatchInfo.macroText+"Â ",text+="Â "),void 0!==macroMatchInfo){var element=getDocument(ctx).activeElement;if(selectedElementIsTextAreaOrInput(ctx)){var startPos=macroMatchInfo.macroPosition,endPos=macroMatchInfo.macroPosition+macroMatchInfo.macroText.length;element.value=element.value.substring(0,startPos)+text+element.value.substring(endPos,element.value.length),element.selectionStart=startPos+text.length,element.selectionEnd=startPos+text.length}else pasteHtml(ctx,text,macroMatchInfo.macroPosition,macroMatchInfo.macroPosition+macroMatchInfo.macroText.length)}}function replaceTriggerText(ctx,targetElement,path,offset,triggerCharSet,text,requireLeadingSpace,hasTrailingSpace){resetSelection(ctx,targetElement,path,offset);var mentionInfo=getTriggerInfo(ctx,triggerCharSet,requireLeadingSpace,!0,hasTrailingSpace);if(void 0!==mentionInfo)if(selectedElementIsTextAreaOrInput()){var myField=getDocument(ctx).activeElement;text+=" ";var startPos=mentionInfo.mentionPosition,endPos=mentionInfo.mentionPosition+mentionInfo.mentionText.length+1;myField.value=myField.value.substring(0,startPos)+text+myField.value.substring(endPos,myField.value.length),myField.selectionStart=startPos+text.length,myField.selectionEnd=startPos+text.length}else text+="Â ",pasteHtml(ctx,text,mentionInfo.mentionPosition,mentionInfo.mentionPosition+mentionInfo.mentionText.length+1)}function getNodePositionInParent(ctx,elem){if(null===elem.parentNode)return 0;for(var i=0;i<elem.parentNode.childNodes.length;i++){var node=elem.parentNode.childNodes[i];if(node===elem)return i}}function getMacroMatch(ctx,macros){var selected,offset,path=[];if(selectedElementIsTextAreaOrInput(ctx))selected=getDocument(ctx).activeElement;else{var selectionInfo=getContentEditableSelectedPath(ctx);selectionInfo&&(selected=selectionInfo.selected,path=selectionInfo.path,offset=selectionInfo.offset)}var effectiveRange=getTextPrecedingCurrentSelection(ctx);if(void 0!==effectiveRange&&null!==effectiveRange){var matchInfo,hasTrailingSpace=!1;if(effectiveRange.length>0&&("Â "===effectiveRange.charAt(effectiveRange.length-1)||" "===effectiveRange.charAt(effectiveRange.length-1))&&(hasTrailingSpace=!0,effectiveRange=effectiveRange.substring(0,effectiveRange.length-1)),angular.forEach(macros,function(macro,c){var idx=effectiveRange.toUpperCase().lastIndexOf(c.toUpperCase());if(idx>=0&&c.length+idx===effectiveRange.length){var prevCharPos=idx-1;0!==idx&&"Â "!==effectiveRange.charAt(prevCharPos)&&" "!==effectiveRange.charAt(prevCharPos)||(matchInfo={macroPosition:idx,macroText:c,macroSelectedElement:selected,macroSelectedPath:path,macroSelectedOffset:offset,macroHasTrailingSpace:hasTrailingSpace})}}),matchInfo)return matchInfo}}function getContentEditableSelectedPath(ctx){var offset,sel=getWindowSelection(ctx),selected=sel.anchorNode,path=[];if(null!=selected){for(var i,ce=selected.contentEditable;null!==selected&&"true"!==ce;)i=getNodePositionInParent(ctx,selected),path.push(i),selected=selected.parentNode,null!==selected&&(ce=selected.contentEditable);return path.reverse(),offset=sel.getRangeAt(0).startOffset,{selected:selected,path:path,offset:offset}}}function getTriggerInfo(ctx,triggerCharSet,requireLeadingSpace,menuAlreadyActive,hasTrailingSpace){var selected,path,offset;if(selectedElementIsTextAreaOrInput(ctx))selected=getDocument(ctx).activeElement;else{var selectionInfo=getContentEditableSelectedPath(ctx);selectionInfo&&(selected=selectionInfo.selected,path=selectionInfo.path,offset=selectionInfo.offset)}var effectiveRange=getTextPrecedingCurrentSelection(ctx);if(void 0!==effectiveRange&&null!==effectiveRange){var triggerChar,mostRecentTriggerCharPos=-1;if(triggerCharSet.forEach(function(c){var idx=effectiveRange.lastIndexOf(c);idx>mostRecentTriggerCharPos&&(mostRecentTriggerCharPos=idx,triggerChar=c)}),mostRecentTriggerCharPos>=0&&(0===mostRecentTriggerCharPos||!requireLeadingSpace||/[\xA0\s]/g.test(effectiveRange.substring(mostRecentTriggerCharPos-1,mostRecentTriggerCharPos)))){var currentTriggerSnippet=effectiveRange.substring(mostRecentTriggerCharPos+1,effectiveRange.length);triggerChar=effectiveRange.substring(mostRecentTriggerCharPos,mostRecentTriggerCharPos+1);var firstSnippetChar=currentTriggerSnippet.substring(0,1),leadingSpace=currentTriggerSnippet.length>0&&(" "===firstSnippetChar||"Â "===firstSnippetChar);if(hasTrailingSpace&&(currentTriggerSnippet=currentTriggerSnippet.trim()),!leadingSpace&&(menuAlreadyActive||!/[\xA0\s]/g.test(currentTriggerSnippet)))return{mentionPosition:mostRecentTriggerCharPos,mentionText:currentTriggerSnippet,mentionSelectedElement:selected,mentionSelectedPath:path,mentionSelectedOffset:offset,mentionTriggerChar:triggerChar}}}}function getWindowSelection(ctx){return ctx?ctx.iframe.contentWindow.getSelection():window.getSelection()}function getDocument(ctx){return ctx?ctx.iframe.contentWindow.document:document}function getTextPrecedingCurrentSelection(ctx){var text;if(selectedElementIsTextAreaOrInput(ctx)){var textComponent=getDocument(ctx).activeElement,startPos=textComponent.selectionStart;text=textComponent.value.substring(0,startPos)}else{var selectedElem=getWindowSelection(ctx).anchorNode;if(null!=selectedElem){var workingNodeContent=selectedElem.textContent,selectStartOffset=getWindowSelection(ctx).getRangeAt(0).startOffset;selectStartOffset>=0&&(text=workingNodeContent.substring(0,selectStartOffset))}}return text}function getContentEditableCaretPosition(ctx,selectedNodePosition){var markerEl,range,markerTextChar="\ufeff",markerId="sel_"+(new Date).getTime()+"_"+Math.random().toString().substr(2),sel=getWindowSelection(ctx),prevRange=sel.getRangeAt(0);range=getDocument(ctx).createRange(),range.setStart(sel.anchorNode,selectedNodePosition),range.setEnd(sel.anchorNode,selectedNodePosition),range.collapse(!1),markerEl=getDocument(ctx).createElement("span"),markerEl.id=markerId,markerEl.appendChild(getDocument(ctx).createTextNode(markerTextChar)),range.insertNode(markerEl),sel.removeAllRanges(),sel.addRange(prevRange);var coordinates={left:0,top:markerEl.offsetHeight};return localToGlobalCoordinates(ctx,markerEl,coordinates),markerEl.parentNode.removeChild(markerEl),coordinates}function localToGlobalCoordinates(ctx,element,coordinates){for(var obj=element,iframe=ctx?ctx.iframe:null;obj;)coordinates.left+=obj.offsetLeft+obj.clientLeft,coordinates.top+=obj.offsetTop+obj.clientTop,obj=obj.offsetParent,!obj&&iframe&&(obj=iframe,iframe=null);for(obj=element,iframe=ctx?ctx.iframe:null;obj!==getDocument().body;)obj.scrollTop&&obj.scrollTop>0&&(coordinates.top-=obj.scrollTop),obj.scrollLeft&&obj.scrollLeft>0&&(coordinates.left-=obj.scrollLeft),obj=obj.parentNode,!obj&&iframe&&(obj=iframe,iframe=null)}function getTextAreaOrInputUnderlinePosition(ctx,element,position){var properties=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],isFirefox=null!==window.mozInnerScreenX,div=getDocument(ctx).createElement("div");div.id="input-textarea-caret-position-mirror-div",getDocument(ctx).body.appendChild(div);var style=div.style,computed=window.getComputedStyle?getComputedStyle(element):element.currentStyle;style.whiteSpace="pre-wrap","INPUT"!==element.nodeName&&(style.wordWrap="break-word"),style.position="absolute",style.visibility="hidden",properties.forEach(function(prop){style[prop]=computed[prop]}),isFirefox?(style.width=parseInt(computed.width)-2+"px",element.scrollHeight>parseInt(computed.height)&&(style.overflowY="scroll")):style.overflow="hidden",div.textContent=element.value.substring(0,position),"INPUT"===element.nodeName&&(div.textContent=div.textContent.replace(/\s/g,"Â "));var span=getDocument(ctx).createElement("span");span.textContent=element.value.substring(position)||".",div.appendChild(span);var coordinates={top:span.offsetTop+parseInt(computed.borderTopWidth)+parseInt(computed.fontSize),left:span.offsetLeft+parseInt(computed.borderLeftWidth)};return localToGlobalCoordinates(ctx,element,coordinates),getDocument(ctx).body.removeChild(div),coordinates}return{popUnderMention:popUnderMention,replaceMacroText:replaceMacroText,replaceTriggerText:replaceTriggerText,getMacroMatch:getMacroMatch,getTriggerInfo:getTriggerInfo,selectElement:selectElement,getTextAreaOrInputUnderlinePosition:getTextAreaOrInputUnderlinePosition,getTextPrecedingCurrentSelection:getTextPrecedingCurrentSelection,getContentEditableSelectedPath:getContentEditableSelectedPath,getNodePositionInParent:getNodePositionInParent,getContentEditableCaretPosition:getContentEditableCaretPosition,pasteHtml:pasteHtml,resetSelection:resetSelection,scrollIntoView:scrollIntoView}}]),angular.module("mentio").run(["$templateCache",function($templateCache){$templateCache.put("mentio-menu.tpl.html",'<style>\n.scrollable-menu {\n    height: auto;\n    max-height: 300px;\n    overflow: auto;\n}\n\n.menu-highlighted {\n    font-weight: bold;\n}\n</style>\n<ul class="dropdown-menu scrollable-menu" style="display:block">\n    <li mentio-menu-item="item" ng-repeat="item in items track by $index">\n        <a class="text-primary" ng-bind-html="item.label | mentioHighlight:typedTerm:\'menu-highlighted\' | unsafe"></a>\n    </li>\n</ul>')}]);var getUserMedia=null,attachMediaStream=null,reattachMediaStream=null,webrtcDetectedBrowser=null,webrtcDetectedVersion=null,webrtcMinimumVersion=null,webrtcUtils={log:function(){"undefined"!=typeof module||"function"==typeof require&&"function"==typeof define||console.log.apply(console,arguments)},extractVersion:function(uastring,expr,pos){var match=uastring.match(expr);return match&&match.length>=pos&&parseInt(match[pos],10)}};if("object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return"mozSrcObject"in this?this.mozSrcObject:this._srcObject},set:function(stream){"mozSrcObject"in this?this.mozSrcObject=stream:(this._srcObject=stream,this.src=URL.createObjectURL(stream))}}),getUserMedia=window.navigator&&window.navigator.getUserMedia),attachMediaStream=function(element,stream){element.srcObject=stream},reattachMediaStream=function(to,from){to.srcObject=from.srcObject},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){if(webrtcUtils.log("This appears to be Firefox"),webrtcDetectedBrowser="firefox",webrtcDetectedVersion=webrtcUtils.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),webrtcMinimumVersion=31,window.RTCPeerConnection=function(pcConfig,pcConstraints){if(webrtcDetectedVersion<38&&pcConfig&&pcConfig.iceServers){for(var newIceServers=[],i=0;i<pcConfig.iceServers.length;i++){var server=pcConfig.iceServers[i];if(server.hasOwnProperty("urls"))for(var j=0;j<server.urls.length;j++){var newServer={url:server.urls[j]};0===server.urls[j].indexOf("turn")&&(newServer.username=server.username,newServer.credential=server.credential),newIceServers.push(newServer)}else newIceServers.push(pcConfig.iceServers[i])}pcConfig.iceServers=newIceServers}return new mozRTCPeerConnection(pcConfig,pcConstraints)},mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return arguments.length?mozRTCPeerConnection.generateCertificate.apply(null,arguments):mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),getUserMedia=function(constraints,onSuccess,onError){var constraintsToFF37=function(c){if("object"!=typeof c||c.require)return c;var require=[];return Object.keys(c).forEach(function(key){if("require"!==key&&"advanced"!==key&&"mediaSource"!==key){var r=c[key]="object"==typeof c[key]?c[key]:{ideal:c[key]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||require.push(key),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:c[key]=r.exact,delete r.exact),void 0!==r.ideal){c.advanced=c.advanced||[];var oc={};"number"==typeof r.ideal?oc[key]={min:r.ideal,max:r.ideal}:oc[key]=r.ideal,c.advanced.push(oc),delete r.ideal,Object.keys(r).length||delete c[key]}}}),require.length&&(c.require=require),c};return webrtcDetectedVersion<38&&(webrtcUtils.log("spec: "+JSON.stringify(constraints)),constraints.audio&&(constraints.audio=constraintsToFF37(constraints.audio)),constraints.video&&(constraints.video=constraintsToFF37(constraints.video)),webrtcUtils.log("ff37: "+JSON.stringify(constraints))),navigator.mozGetUserMedia(constraints,onSuccess,onError)},navigator.getUserMedia=getUserMedia,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:requestUserMedia,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(resolve){var infos=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];resolve(infos)})},webrtcDetectedVersion<41){var orgEnumerateDevices=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return orgEnumerateDevices().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){webrtcUtils.log("This appears to be Chrome"),webrtcDetectedBrowser="chrome",webrtcDetectedVersion=webrtcUtils.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),webrtcMinimumVersion=38,window.RTCPeerConnection=function(pcConfig,pcConstraints){pcConfig&&pcConfig.iceTransportPolicy&&(pcConfig.iceTransports=pcConfig.iceTransportPolicy);var pc=new webkitRTCPeerConnection(pcConfig,pcConstraints),origGetStats=pc.getStats.bind(pc);return pc.getStats=function(selector,successCallback,errorCallback){var self=this,args=arguments;if(arguments.length>0&&"function"==typeof selector)return origGetStats(selector,successCallback);var fixChromeStats=function(response){var standardReport={},reports=response.result();return reports.forEach(function(report){var standardStats={id:report.id,timestamp:report.timestamp,type:report.type};report.names().forEach(function(name){standardStats[name]=report.stat(name)}),standardReport[standardStats.id]=standardStats}),standardReport};if(arguments.length>=2){var successCallbackWrapper=function(response){args[1](fixChromeStats(response))};return origGetStats.apply(this,[successCallbackWrapper,arguments[0]])}return new Promise(function(resolve,reject){1===args.length&&null===selector?origGetStats.apply(self,[function(response){resolve.apply(null,[fixChromeStats(response)])},reject]):origGetStats.apply(self,[resolve,reject])})},pc},webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return arguments.length?webkitRTCPeerConnection.generateCertificate.apply(null,arguments):webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(method){var nativeMethod=webkitRTCPeerConnection.prototype[method];webkitRTCPeerConnection.prototype[method]=function(){var self=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var opts=1===arguments.length?arguments[0]:void 0;return new Promise(function(resolve,reject){nativeMethod.apply(self,[resolve,reject,opts])})}return nativeMethod.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(method){var nativeMethod=webkitRTCPeerConnection.prototype[method];webkitRTCPeerConnection.prototype[method]=function(){var args=arguments,self=this;return new Promise(function(resolve,reject){nativeMethod.apply(self,[args[0],function(){resolve(),args.length>=2&&args[1].apply(null,[])},function(err){reject(err),args.length>=3&&args[2].apply(null,[err])}])})}});var constraintsToChrome=function(c){if("object"!=typeof c||c.mandatory||c.optional)return c;var cc={};return Object.keys(c).forEach(function(key){if("require"!==key&&"advanced"!==key&&"mediaSource"!==key){var r="object"==typeof c[key]?c[key]:{ideal:c[key]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var oldname=function(prefix,name){return prefix?prefix+name.charAt(0).toUpperCase()+name.slice(1):"deviceId"===name?"sourceId":name};if(void 0!==r.ideal){cc.optional=cc.optional||[];var oc={};"number"==typeof r.ideal?(oc[oldname("min",key)]=r.ideal,cc.optional.push(oc),oc={},oc[oldname("max",key)]=r.ideal,cc.optional.push(oc)):(oc[oldname("",key)]=r.ideal,cc.optional.push(oc))}void 0!==r.exact&&"number"!=typeof r.exact?(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname("",key)]=r.exact):["min","max"].forEach(function(mix){void 0!==r[mix]&&(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname(mix,key)]=r[mix])})}}),c.advanced&&(cc.optional=(cc.optional||[]).concat(c.advanced)),cc};if(getUserMedia=function(constraints,onSuccess,onError){return constraints.audio&&(constraints.audio=constraintsToChrome(constraints.audio)),constraints.video&&(constraints.video=constraintsToChrome(constraints.video)),webrtcUtils.log("chrome: "+JSON.stringify(constraints)),navigator.webkitGetUserMedia(constraints,onSuccess,onError)},navigator.getUserMedia=getUserMedia,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:requestUserMedia,enumerateDevices:function(){return new Promise(function(resolve){var kinds={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(devices){resolve(devices.map(function(device){return{label:device.label,kind:kinds[device.kind],deviceId:device.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var origGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(c){return webrtcUtils.log("spec:   "+JSON.stringify(c)),c.audio=constraintsToChrome(c.audio),c.video=constraintsToChrome(c.video),webrtcUtils.log("chrome: "+JSON.stringify(c)),origGetUserMedia(c)}}else navigator.mediaDevices.getUserMedia=function(constraints){return requestUserMedia(constraints)};"undefined"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){webrtcUtils.log("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){webrtcUtils.log("Dummy mediaDevices.removeEventListener called.")}),attachMediaStream=function(element,stream){webrtcDetectedVersion>=43?element.srcObject=stream:"undefined"!=typeof element.src?element.src=URL.createObjectURL(stream):webrtcUtils.log("Error attaching stream to element.")},reattachMediaStream=function(to,from){webrtcDetectedVersion>=43?to.srcObject=from.srcObject:to.src=from.src}}else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)){if(webrtcUtils.log("This appears to be Edge"),webrtcDetectedBrowser="edge",webrtcDetectedVersion=webrtcUtils.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),webrtcMinimumVersion=10547,RTCIceGatherer){var generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},localCName=generateIdentifier(),SDPUtils={};SDPUtils.splitLines=function(blob){return blob.trim().split("\n").map(function(line){return line.trim()})},SDPUtils.splitSections=function(blob){var parts=blob.split("\r\nm=");return parts.map(function(part,index){return(index>0?"m="+part:part).trim()+"\r\n"})},SDPUtils.matchPrefix=function(blob,prefix){return SDPUtils.splitLines(blob).filter(function(line){return 0===line.indexOf(prefix)})},SDPUtils.parseCandidate=function(line){var parts;parts=0===line.indexOf("a=candidate:")?line.substring(12).split(" "):line.substring(10).split(" ");for(var candidate={foundation:parts[0],component:parts[1],protocol:parts[2].toLowerCase(),priority:parseInt(parts[3],10),ip:parts[4],port:parseInt(parts[5],10),type:parts[7]},i=8;i<parts.length;i+=2)switch(parts[i]){case"raddr":candidate.relatedAddress=parts[i+1];break;case"rport":candidate.relatedPort=parseInt(parts[i+1],10);break;case"tcptype":candidate.tcpType=parts[i+1]}return candidate},SDPUtils.writeCandidate=function(candidate){var sdp=[];sdp.push(candidate.foundation),sdp.push(candidate.component),sdp.push(candidate.protocol.toUpperCase()),sdp.push(candidate.priority),sdp.push(candidate.ip),sdp.push(candidate.port);var type=candidate.type;return sdp.push("typ"),sdp.push(type),"host"!==type&&candidate.relatedAddress&&candidate.relatedPort&&(sdp.push("raddr"),sdp.push(candidate.relatedAddress),sdp.push("rport"),sdp.push(candidate.relatedPort)),candidate.tcpType&&"tcp"===candidate.protocol.toLowerCase()&&(sdp.push("tcptype"),sdp.push(candidate.tcpType)),"candidate:"+sdp.join(" ")},SDPUtils.parseRtpMap=function(line){var parts=line.substr(9).split(" "),parsed={payloadType:parseInt(parts.shift(),10)};return parts=parts[0].split("/"),parsed.name=parts[0],parsed.clockRate=parseInt(parts[1],10),parsed.numChannels=3===parts.length?parseInt(parts[2],10):1,parsed},SDPUtils.writeRtpMap=function(codec){var pt=codec.payloadType;return void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType),"a=rtpmap:"+pt+" "+codec.name+"/"+codec.clockRate+(1!==codec.numChannels?"/"+codec.numChannels:"")+"\r\n"},SDPUtils.parseFmtp=function(line){for(var kv,parsed={},parts=line.substr(line.indexOf(" ")+1).split(";"),j=0;j<parts.length;j++)kv=parts[j].trim().split("="),parsed[kv[0].trim()]=kv[1];return parsed},SDPUtils.writeFtmp=function(codec){var line="",pt=codec.payloadType;if(void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType),codec.parameters&&codec.parameters.length){var params=[];Object.keys(codec.parameters).forEach(function(param){params.push(param+"="+codec.parameters[param])}),line+="a=fmtp:"+pt+" "+params.join(";")+"\r\n"}return line},SDPUtils.parseRtcpFb=function(line){var parts=line.substr(line.indexOf(" ")+1).split(" ");return{type:parts.shift(),parameter:parts.join(" ")}},SDPUtils.writeRtcpFb=function(codec){var lines="",pt=codec.payloadType;return void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType),codec.rtcpFeedback&&codec.rtcpFeedback.length&&codec.rtcpFeedback.forEach(function(fb){lines+="a=rtcp-fb:"+pt+" "+fb.type+" "+fb.parameter+"\r\n"}),lines},SDPUtils.parseSsrcMedia=function(line){var sp=line.indexOf(" "),parts={ssrc:line.substr(7,sp-7)},colon=line.indexOf(":",sp);return colon>-1?(parts.attribute=line.substr(sp+1,colon-sp-1),parts.value=line.substr(colon+1)):parts.attribute=line.substr(sp+1),parts},SDPUtils.getDtlsParameters=function(mediaSection,sessionpart){var lines=SDPUtils.splitLines(mediaSection);lines=lines.concat(SDPUtils.splitLines(sessionpart));var fpLine=lines.filter(function(line){return 0===line.indexOf("a=fingerprint:")})[0].substr(14),dtlsParameters={role:"auto",fingerprints:[{algorithm:fpLine.split(" ")[0],value:fpLine.split(" ")[1]}]};return dtlsParameters},SDPUtils.writeDtlsParameters=function(params,setupType){var sdp="a=setup:"+setupType+"\r\n";return params.fingerprints.forEach(function(fp){sdp+="a=fingerprint:"+fp.algorithm+" "+fp.value+"\r\n"}),sdp},SDPUtils.getIceParameters=function(mediaSection,sessionpart){var lines=SDPUtils.splitLines(mediaSection);lines=lines.concat(SDPUtils.splitLines(sessionpart));var iceParameters={usernameFragment:lines.filter(function(line){return 0===line.indexOf("a=ice-ufrag:")})[0].substr(12),password:lines.filter(function(line){return 0===line.indexOf("a=ice-pwd:")})[0].substr(10)};return iceParameters},SDPUtils.writeIceParameters=function(params){return"a=ice-ufrag:"+params.usernameFragment+"\r\na=ice-pwd:"+params.password+"\r\n"},SDPUtils.parseRtpParameters=function(mediaSection){for(var description={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},lines=SDPUtils.splitLines(mediaSection),mline=lines[0].split(" "),i=3;i<mline.length;i++){var pt=mline[i],rtpmapline=SDPUtils.matchPrefix(mediaSection,"a=rtpmap:"+pt+" ")[0];if(rtpmapline){var codec=SDPUtils.parseRtpMap(rtpmapline),fmtps=SDPUtils.matchPrefix(mediaSection,"a=fmtp:"+pt+" ");codec.parameters=fmtps.length?SDPUtils.parseFmtp(fmtps[0]):{},codec.rtcpFeedback=SDPUtils.matchPrefix(mediaSection,"a=rtcp-fb:"+pt+" ").map(SDPUtils.parseRtcpFb),description.codecs.push(codec)}}return description},SDPUtils.writeRtpDescription=function(kind,caps){var sdp="";return sdp+="m="+kind+" ",sdp+=caps.codecs.length>0?"9":"0",sdp+=" UDP/TLS/RTP/SAVPF ",sdp+=caps.codecs.map(function(codec){return void 0!==codec.preferredPayloadType?codec.preferredPayloadType:codec.payloadType}).join(" ")+"\r\n",sdp+="c=IN IP4 0.0.0.0\r\n",sdp+="a=rtcp:9 IN IP4 0.0.0.0\r\n",caps.codecs.forEach(function(codec){sdp+=SDPUtils.writeRtpMap(codec),sdp+=SDPUtils.writeFtmp(codec),sdp+=SDPUtils.writeRtcpFb(codec)}),sdp+="a=rtcp-mux\r\n"},SDPUtils.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},SDPUtils.writeMediaSection=function(transceiver,caps,type,stream){var sdp=SDPUtils.writeRtpDescription(transceiver.kind,caps);if(sdp+=SDPUtils.writeIceParameters(transceiver.iceGatherer.getLocalParameters()),sdp+=SDPUtils.writeDtlsParameters(transceiver.dtlsTransport.getLocalParameters(),"offer"===type?"actpass":"active"),sdp+="a=mid:"+transceiver.mid+"\r\n",sdp+=transceiver.rtpSender&&transceiver.rtpReceiver?"a=sendrecv\r\n":transceiver.rtpSender?"a=sendonly\r\n":transceiver.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",transceiver.rtpSender){var msid="msid:"+stream.id+" "+transceiver.rtpSender.track.id+"\r\n";sdp+="a="+msid,sdp+="a=ssrc:"+transceiver.sendSsrc+" "+msid}return sdp+="a=ssrc:"+transceiver.sendSsrc+" cname:"+localCName+"\r\n"},SDPUtils.getDirection=function(mediaSection,sessionpart){for(var lines=SDPUtils.splitLines(mediaSection),i=0;i<lines.length;i++)switch(lines[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return lines[i].substr(2)}return sessionpart?SDPUtils.getDirection(sessionpart):"sendrecv"},window.RTCIceCandidate||(window.RTCIceCandidate=function(args){return args}),window.RTCSessionDescription||(window.RTCSessionDescription=function(args){return args}),window.RTCPeerConnection=function(config){var self=this;if(this.onicecandidate=null,this.onaddstream=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return self.localStreams},this.getRemoteStreams=function(){return self.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},config&&config.iceTransportPolicy)switch(config.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=config.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}config&&config.iceServers&&config.iceServers.forEach(function(server){if(server.urls){var url;url="string"==typeof server.urls?server.urls:server.urls[0],url.indexOf("transport=udp")!==-1&&self.iceServers.push({username:server.username,credential:server.credential,urls:url})}}),this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var self=this;this._localIceCandidatesBuffer.forEach(function(event){null!==self.onicecandidate&&self.onicecandidate(event)}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(stream){this.localStreams.push(stream.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(stream){var idx=this.localStreams.indexOf(stream);idx>-1&&(this.localStreams.splice(idx,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype._getCommonCapabilities=function(localCapabilities,remoteCapabilities){var commonCapabilities={codecs:[],headerExtensions:[],fecMechanisms:[]};return localCapabilities.codecs.forEach(function(lCodec){for(var i=0;i<remoteCapabilities.codecs.length;i++){var rCodec=remoteCapabilities.codecs[i];if(lCodec.name.toLowerCase()===rCodec.name.toLowerCase()&&lCodec.clockRate===rCodec.clockRate&&lCodec.numChannels===rCodec.numChannels){commonCapabilities.codecs.push(rCodec);break}}}),localCapabilities.headerExtensions.forEach(function(lHeaderExtension){for(var i=0;i<remoteCapabilities.headerExtensions.length;i++){var rHeaderExtension=remoteCapabilities.headerExtensions[i];if(lHeaderExtension.uri===rHeaderExtension.uri){commonCapabilities.headerExtensions.push(rHeaderExtension);break}}}),commonCapabilities},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(mid,sdpMLineIndex){var self=this,iceGatherer=new RTCIceGatherer(self.iceOptions),iceTransport=new RTCIceTransport(iceGatherer);iceGatherer.onlocalcandidate=function(evt){var event={};event.candidate={sdpMid:mid,sdpMLineIndex:sdpMLineIndex};var cand=evt.candidate;cand&&0!==Object.keys(cand).length?(cand.component="RTCP"===iceTransport.component?2:1,event.candidate.candidate=SDPUtils.writeCandidate(cand)):(void 0===iceGatherer.state&&(iceGatherer.state="completed"),event.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates");var complete=self.transceivers.every(function(transceiver){return transceiver.iceGatherer&&"completed"===transceiver.iceGatherer.state});null!==self.onicecandidate&&(self.localDescription&&""===self.localDescription.type?(self._localIceCandidatesBuffer.push(event),complete&&self._localIceCandidatesBuffer.push({})):(self.onicecandidate(event),complete&&self.onicecandidate({})))},iceTransport.onicestatechange=function(){self._updateConnectionState()};var dtlsTransport=new RTCDtlsTransport(iceTransport);return dtlsTransport.ondtlsstatechange=function(){self._updateConnectionState()},dtlsTransport.onerror=function(){dtlsTransport.state="failed",self._updateConnectionState()},{iceGatherer:iceGatherer,iceTransport:iceTransport,dtlsTransport:dtlsTransport}},window.RTCPeerConnection.prototype._transceive=function(transceiver,send,recv){var params=this._getCommonCapabilities(transceiver.localCapabilities,transceiver.remoteCapabilities);send&&transceiver.rtpSender&&(params.encodings=[{ssrc:transceiver.sendSsrc}],params.rtcp={cname:localCName,ssrc:transceiver.recvSsrc},transceiver.rtpSender.send(params)),recv&&transceiver.rtpReceiver&&(params.encodings=[{ssrc:transceiver.recvSsrc}],params.rtcp={cname:transceiver.cname,ssrc:transceiver.sendSsrc},transceiver.rtpReceiver.receive(params))},window.RTCPeerConnection.prototype.setLocalDescription=function(description){var self=this;if("offer"===description.type)this._pendingOffer&&(this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===description.type){var sections=SDPUtils.splitSections(self.remoteDescription.sdp),sessionpart=sections.shift();sections.forEach(function(mediaSection,sdpMLineIndex){var transceiver=self.transceivers[sdpMLineIndex],iceGatherer=transceiver.iceGatherer,iceTransport=transceiver.iceTransport,dtlsTransport=transceiver.dtlsTransport,localCapabilities=transceiver.localCapabilities,remoteCapabilities=transceiver.remoteCapabilities,rejected="0"===mediaSection.split("\n",1)[0].split(" ",2)[1];if(!rejected){var remoteIceParameters=SDPUtils.getIceParameters(mediaSection,sessionpart);iceTransport.start(iceGatherer,remoteIceParameters,"controlled");var remoteDtlsParameters=SDPUtils.getDtlsParameters(mediaSection,sessionpart);dtlsTransport.start(remoteDtlsParameters);var params=self._getCommonCapabilities(localCapabilities,remoteCapabilities);self._transceive(transceiver,params.codecs.length>0,!1)}})}switch(this.localDescription=description,description.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+description.type+'"')}var hasCallback=arguments.length>1&&"function"==typeof arguments[1];if(hasCallback){var cb=arguments[1];window.setTimeout(function(){cb(),self._emitBufferedCandidates()},0)}var p=Promise.resolve();return p.then(function(){hasCallback||window.setTimeout(self._emitBufferedCandidates.bind(self),0)}),p},window.RTCPeerConnection.prototype.setRemoteDescription=function(description){var self=this,stream=new MediaStream,sections=SDPUtils.splitSections(description.sdp),sessionpart=sections.shift();switch(sections.forEach(function(mediaSection,sdpMLineIndex){var transceiver,iceGatherer,iceTransport,dtlsTransport,rtpSender,rtpReceiver,sendSsrc,recvSsrc,localCapabilities,remoteIceParameters,remoteDtlsParameters,lines=SDPUtils.splitLines(mediaSection),mline=lines[0].substr(2).split(" "),kind=mline[0],rejected="0"===mline[1],direction=SDPUtils.getDirection(mediaSection,sessionpart),remoteCapabilities=SDPUtils.parseRtpParameters(mediaSection);rejected||(remoteIceParameters=SDPUtils.getIceParameters(mediaSection,sessionpart),remoteDtlsParameters=SDPUtils.getDtlsParameters(mediaSection,sessionpart));var cname,mid=SDPUtils.matchPrefix(mediaSection,"a=mid:")[0].substr(6),remoteSsrc=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map(function(line){return SDPUtils.parseSsrcMedia(line)}).filter(function(obj){return"cname"===obj.attribute})[0];if(remoteSsrc&&(recvSsrc=parseInt(remoteSsrc.ssrc,10),cname=remoteSsrc.value),"offer"===description.type){var transports=self._createIceAndDtlsTransports(mid,sdpMLineIndex);if(localCapabilities=RTCRtpReceiver.getCapabilities(kind),sendSsrc=1001*(2*sdpMLineIndex+2),rtpReceiver=new RTCRtpReceiver(transports.dtlsTransport,kind),stream.addTrack(rtpReceiver.track),self.localStreams.length>0&&self.localStreams[0].getTracks().length>=sdpMLineIndex){var localtrack=self.localStreams[0].getTracks()[sdpMLineIndex];rtpSender=new RTCRtpSender(localtrack,transports.dtlsTransport)}self.transceivers[sdpMLineIndex]={iceGatherer:transports.iceGatherer,iceTransport:transports.iceTransport,dtlsTransport:transports.dtlsTransport,localCapabilities:localCapabilities,remoteCapabilities:remoteCapabilities,rtpSender:rtpSender,rtpReceiver:rtpReceiver,kind:kind,mid:mid,cname:cname,sendSsrc:sendSsrc,recvSsrc:recvSsrc},self._transceive(self.transceivers[sdpMLineIndex],!1,"sendrecv"===direction||"sendonly"===direction)}else"answer"!==description.type||rejected||(transceiver=self.transceivers[sdpMLineIndex],iceGatherer=transceiver.iceGatherer,iceTransport=transceiver.iceTransport,dtlsTransport=transceiver.dtlsTransport,rtpSender=transceiver.rtpSender,rtpReceiver=transceiver.rtpReceiver,sendSsrc=transceiver.sendSsrc,localCapabilities=transceiver.localCapabilities,self.transceivers[sdpMLineIndex].recvSsrc=recvSsrc,self.transceivers[sdpMLineIndex].remoteCapabilities=remoteCapabilities,self.transceivers[sdpMLineIndex].cname=cname,iceTransport.start(iceGatherer,remoteIceParameters,"controlling"),dtlsTransport.start(remoteDtlsParameters),self._transceive(transceiver,"sendrecv"===direction||"recvonly"===direction,"sendrecv"===direction||"sendonly"===direction),!rtpReceiver||"sendrecv"!==direction&&"sendonly"!==direction?delete transceiver.rtpReceiver:stream.addTrack(rtpReceiver.track))}),this.remoteDescription=description,description.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+description.type+'"')}return window.setTimeout(function(){null!==self.onaddstream&&stream.getTracks().length&&(self.remoteStreams.push(stream),window.setTimeout(function(){self.onaddstream({stream:stream})},0))},0),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(transceiver){transceiver.iceTransport&&transceiver.iceTransport.stop(),transceiver.dtlsTransport&&transceiver.dtlsTransport.stop(),transceiver.rtpSender&&transceiver.rtpSender.stop(),transceiver.rtpReceiver&&transceiver.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(newState){this.signalingState=newState,null!==this.onsignalingstatechange&&this.onsignalingstatechange()},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){null!==this.onnegotiationneeded&&this.onnegotiationneeded()},window.RTCPeerConnection.prototype._updateConnectionState=function(){var newState,self=this,states={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};this.transceivers.forEach(function(transceiver){states[transceiver.iceTransport.state]++,states[transceiver.dtlsTransport.state]++}),states.connected+=states.completed,newState="new",states.failed>0?newState="failed":states.connecting>0||states.checking>0?newState="connecting":states.disconnected>0?newState="disconnected":states.new>0?newState="new":(states.connecting>0||states.completed>0)&&(newState="connected"),newState!==self.iceConnectionState&&(self.iceConnectionState=newState,null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange())},window.RTCPeerConnection.prototype.createOffer=function(){var self=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var offerOptions;1===arguments.length&&"function"!=typeof arguments[0]?offerOptions=arguments[0]:3===arguments.length&&(offerOptions=arguments[2]);var tracks=[],numAudioTracks=0,numVideoTracks=0;if(this.localStreams.length&&(numAudioTracks=this.localStreams[0].getAudioTracks().length,numVideoTracks=this.localStreams[0].getVideoTracks().length),offerOptions){if(offerOptions.mandatory||offerOptions.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==offerOptions.offerToReceiveAudio&&(numAudioTracks=offerOptions.offerToReceiveAudio),void 0!==offerOptions.offerToReceiveVideo&&(numVideoTracks=offerOptions.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(track){tracks.push({kind:track.kind,track:track,wantReceive:"audio"===track.kind?numAudioTracks>0:numVideoTracks>0}),"audio"===track.kind?numAudioTracks--:"video"===track.kind&&numVideoTracks--});numAudioTracks>0||numVideoTracks>0;)numAudioTracks>0&&(tracks.push({kind:"audio",wantReceive:!0}),numAudioTracks--),numVideoTracks>0&&(tracks.push({kind:"video",wantReceive:!0}),numVideoTracks--);var sdp=SDPUtils.writeSessionBoilerplate(),transceivers=[];tracks.forEach(function(mline,sdpMLineIndex){var rtpSender,rtpReceiver,track=mline.track,kind=mline.kind,mid=generateIdentifier(),transports=self._createIceAndDtlsTransports(mid,sdpMLineIndex),localCapabilities=RTCRtpSender.getCapabilities(kind),sendSsrc=1001*(2*sdpMLineIndex+1);track&&(rtpSender=new RTCRtpSender(track,transports.dtlsTransport)),mline.wantReceive&&(rtpReceiver=new RTCRtpReceiver(transports.dtlsTransport,kind)),transceivers[sdpMLineIndex]={iceGatherer:transports.iceGatherer,iceTransport:transports.iceTransport,dtlsTransport:transports.dtlsTransport,localCapabilities:localCapabilities,remoteCapabilities:null,rtpSender:rtpSender,rtpReceiver:rtpReceiver,kind:kind,mid:mid,sendSsrc:sendSsrc,recvSsrc:null};var transceiver=transceivers[sdpMLineIndex];sdp+=SDPUtils.writeMediaSection(transceiver,transceiver.localCapabilities,"offer",self.localStreams[0])}),this._pendingOffer=transceivers;var desc=new RTCSessionDescription({type:"offer",sdp:sdp});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,desc),Promise.resolve(desc)},window.RTCPeerConnection.prototype.createAnswer=function(){var answerOptions,self=this;1===arguments.length&&"function"!=typeof arguments[0]?answerOptions=arguments[0]:3===arguments.length&&(answerOptions=arguments[2]);var sdp=SDPUtils.writeSessionBoilerplate();this.transceivers.forEach(function(transceiver){var commonCapabilities=self._getCommonCapabilities(transceiver.localCapabilities,transceiver.remoteCapabilities);sdp+=SDPUtils.writeMediaSection(transceiver,commonCapabilities,"answer",self.localStreams[0])});var desc=new RTCSessionDescription({type:"answer",sdp:sdp});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,desc),Promise.resolve(desc)},window.RTCPeerConnection.prototype.addIceCandidate=function(candidate){var mLineIndex=candidate.sdpMLineIndex;if(candidate.sdpMid)for(var i=0;i<this.transceivers.length;i++)if(this.transceivers[i].mid===candidate.sdpMid){mLineIndex=i;break}var transceiver=this.transceivers[mLineIndex];if(transceiver){var cand=Object.keys(candidate.candidate).length>0?SDPUtils.parseCandidate(candidate.candidate):{};if("tcp"===cand.protocol&&0===cand.port)return;if("1"!==cand.component)return;"endOfCandidates"===cand.type&&(cand={}),transceiver.iceTransport.addRemoteCandidate(cand)}return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var promises=[];this.transceivers.forEach(function(transceiver){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(method){transceiver[method]&&promises.push(transceiver[method].getStats())})});var cb=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(resolve){var results={};Promise.all(promises).then(function(res){res.forEach(function(result){Object.keys(result).forEach(function(id){results[id]=result[id]})}),cb&&window.setTimeout(cb,0,results),resolve(results)})})}}}else webrtcUtils.log("Browser does not appear to be WebRTC-capable");else webrtcUtils.log("This does not appear to be a browser"),webrtcDetectedBrowser="not a browser";var webrtcTesting={};try{Object.defineProperty(webrtcTesting,"version",{set:function(version){webrtcDetectedVersion=version}})}catch(e){}if("undefined"!=typeof module){var RTCPeerConnection,RTCIceCandidate,RTCSessionDescription;"undefined"!=typeof window&&(RTCPeerConnection=window.RTCPeerConnection,RTCIceCandidate=window.RTCIceCandidate,RTCSessionDescription=window.RTCSessionDescription),module.exports={RTCPeerConnection:RTCPeerConnection,RTCIceCandidate:RTCIceCandidate,RTCSessionDescription:RTCSessionDescription,getUserMedia:getUserMedia,attachMediaStream:attachMediaStream,reattachMediaStream:reattachMediaStream,webrtcDetectedBrowser:webrtcDetectedBrowser,webrtcDetectedVersion:webrtcDetectedVersion,webrtcMinimumVersion:webrtcMinimumVersion,webrtcTesting:webrtcTesting,webrtcUtils:webrtcUtils}}else"function"==typeof require&&"function"==typeof define&&define([],function(){return{RTCPeerConnection:window.RTCPeerConnection,RTCIceCandidate:window.RTCIceCandidate,RTCSessionDescription:window.RTCSessionDescription,getUserMedia:getUserMedia,attachMediaStream:attachMediaStream,reattachMediaStream:reattachMediaStream,webrtcDetectedBrowser:webrtcDetectedBrowser,webrtcDetectedVersion:webrtcDetectedVersion,webrtcMinimumVersion:webrtcMinimumVersion,webrtcTesting:webrtcTesting,webrtcUtils:webrtcUtils}});!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.React=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";var ReactDOM=_dereq_(35),ReactDOMServer=_dereq_(45),ReactIsomorphic=_dereq_(63),assign=_dereq_(23),deprecated=_dereq_(106),React={};assign(React,ReactIsomorphic),assign(React,{findDOMNode:deprecated("findDOMNode","ReactDOM","react-dom",ReactDOM,ReactDOM.findDOMNode),render:deprecated("render","ReactDOM","react-dom",ReactDOM,ReactDOM.render),unmountComponentAtNode:deprecated("unmountComponentAtNode","ReactDOM","react-dom",ReactDOM,ReactDOM.unmountComponentAtNode),renderToString:deprecated("renderToString","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToString),renderToStaticMarkup:deprecated("renderToStaticMarkup","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToStaticMarkup)}),React.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOM,React.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOMServer,module.exports=React},{106:106,23:23,35:35,45:45,63:63}],2:[function(_dereq_,module,exports){"use strict";var ReactMount=_dereq_(65),findDOMNode=_dereq_(108),focusNode=_dereq_(138),Mixin={componentDidMount:function(){this.props.autoFocus&&focusNode(findDOMNode(this))}},AutoFocusUtils={Mixin:Mixin,focusDOMComponent:function(){focusNode(ReactMount.getNode(this._rootNodeID))}};module.exports=AutoFocusUtils},{108:108,138:138,65:65}],3:[function(_dereq_,module,exports){"use strict";function isPresto(){var opera=window.opera;return"object"==typeof opera&&"function"==typeof opera.version&&parseInt(opera.version(),10)<=12}function isKeypressCommand(nativeEvent){return(nativeEvent.ctrlKey||nativeEvent.altKey||nativeEvent.metaKey)&&!(nativeEvent.ctrlKey&&nativeEvent.altKey)}function getCompositionEventType(topLevelType){switch(topLevelType){case topLevelTypes.topCompositionStart:return eventTypes.compositionStart;case topLevelTypes.topCompositionEnd:return eventTypes.compositionEnd;case topLevelTypes.topCompositionUpdate:return eventTypes.compositionUpdate}}function isFallbackCompositionStart(topLevelType,nativeEvent){return topLevelType===topLevelTypes.topKeyDown&&nativeEvent.keyCode===START_KEYCODE}function isFallbackCompositionEnd(topLevelType,nativeEvent){switch(topLevelType){case topLevelTypes.topKeyUp:return END_KEYCODES.indexOf(nativeEvent.keyCode)!==-1;case topLevelTypes.topKeyDown:return nativeEvent.keyCode!==START_KEYCODE;case topLevelTypes.topKeyPress:case topLevelTypes.topMouseDown:case topLevelTypes.topBlur:return!0;default:return!1}}function getDataFromCustomEvent(nativeEvent){var detail=nativeEvent.detail;return"object"==typeof detail&&"data"in detail?detail.data:null}function extractCompositionEvent(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){var eventType,fallbackData;if(canUseCompositionEvent?eventType=getCompositionEventType(topLevelType):currentComposition?isFallbackCompositionEnd(topLevelType,nativeEvent)&&(eventType=eventTypes.compositionEnd):isFallbackCompositionStart(topLevelType,nativeEvent)&&(eventType=eventTypes.compositionStart),!eventType)return null;useFallbackCompositionData&&(currentComposition||eventType!==eventTypes.compositionStart?eventType===eventTypes.compositionEnd&&currentComposition&&(fallbackData=currentComposition.getData()):currentComposition=FallbackCompositionState.getPooled(topLevelTarget));var event=SyntheticCompositionEvent.getPooled(eventType,topLevelTargetID,nativeEvent,nativeEventTarget);if(fallbackData)event.data=fallbackData;else{var customData=getDataFromCustomEvent(nativeEvent);null!==customData&&(event.data=customData)}return EventPropagators.accumulateTwoPhaseDispatches(event),event}function getNativeBeforeInputChars(topLevelType,nativeEvent){switch(topLevelType){case topLevelTypes.topCompositionEnd:return getDataFromCustomEvent(nativeEvent);case topLevelTypes.topKeyPress:var which=nativeEvent.which;return which!==SPACEBAR_CODE?null:(hasSpaceKeypress=!0,SPACEBAR_CHAR);case topLevelTypes.topTextInput:var chars=nativeEvent.data;return chars===SPACEBAR_CHAR&&hasSpaceKeypress?null:chars;default:return null}}function getFallbackBeforeInputChars(topLevelType,nativeEvent){if(currentComposition){if(topLevelType===topLevelTypes.topCompositionEnd||isFallbackCompositionEnd(topLevelType,nativeEvent)){var chars=currentComposition.getData();return FallbackCompositionState.release(currentComposition),currentComposition=null,chars}return null}switch(topLevelType){case topLevelTypes.topPaste:return null;case topLevelTypes.topKeyPress:return nativeEvent.which&&!isKeypressCommand(nativeEvent)?String.fromCharCode(nativeEvent.which):null;case topLevelTypes.topCompositionEnd:return useFallbackCompositionData?null:nativeEvent.data;default:return null}}function extractBeforeInputEvent(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){var chars;if(chars=canUseTextInputEvent?getNativeBeforeInputChars(topLevelType,nativeEvent):getFallbackBeforeInputChars(topLevelType,nativeEvent),!chars)return null;var event=SyntheticInputEvent.getPooled(eventTypes.beforeInput,topLevelTargetID,nativeEvent,nativeEventTarget);return event.data=chars,EventPropagators.accumulateTwoPhaseDispatches(event),event}var EventConstants=_dereq_(15),EventPropagators=_dereq_(19),ExecutionEnvironment=_dereq_(130),FallbackCompositionState=_dereq_(20),SyntheticCompositionEvent=_dereq_(90),SyntheticInputEvent=_dereq_(94),keyOf=_dereq_(148),END_KEYCODES=[9,13,27,32],START_KEYCODE=229,canUseCompositionEvent=ExecutionEnvironment.canUseDOM&&"CompositionEvent"in window,documentMode=null;ExecutionEnvironment.canUseDOM&&"documentMode"in document&&(documentMode=document.documentMode);var canUseTextInputEvent=ExecutionEnvironment.canUseDOM&&"TextEvent"in window&&!documentMode&&!isPresto(),useFallbackCompositionData=ExecutionEnvironment.canUseDOM&&(!canUseCompositionEvent||documentMode&&documentMode>8&&documentMode<=11),SPACEBAR_CODE=32,SPACEBAR_CHAR=String.fromCharCode(SPACEBAR_CODE),topLevelTypes=EventConstants.topLevelTypes,eventTypes={beforeInput:{phasedRegistrationNames:{bubbled:keyOf({onBeforeInput:null}),captured:keyOf({onBeforeInputCapture:null})},dependencies:[topLevelTypes.topCompositionEnd,topLevelTypes.topKeyPress,topLevelTypes.topTextInput,topLevelTypes.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:keyOf({onCompositionEnd:null}),captured:keyOf({onCompositionEndCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionEnd,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:keyOf({onCompositionStart:null}),captured:keyOf({onCompositionStartCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionStart,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:keyOf({onCompositionUpdate:null}),captured:keyOf({onCompositionUpdateCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionUpdate,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]}},hasSpaceKeypress=!1,currentComposition=null,BeforeInputEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){return[extractCompositionEvent(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget),extractBeforeInputEvent(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget)]}};module.exports=BeforeInputEventPlugin},{130:130,148:148,15:15,19:19,20:20,90:90,94:94}],4:[function(_dereq_,module,exports){"use strict";function prefixKey(prefix,key){return prefix+key.charAt(0).toUpperCase()+key.substring(1)}var isUnitlessNumber={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},prefixes=["Webkit","ms","Moz","O"];Object.keys(isUnitlessNumber).forEach(function(prop){prefixes.forEach(function(prefix){isUnitlessNumber[prefixKey(prefix,prop)]=isUnitlessNumber[prop]})});var shorthandPropertyExpansions={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},CSSProperty={isUnitlessNumber:isUnitlessNumber,shorthandPropertyExpansions:shorthandPropertyExpansions};module.exports=CSSProperty},{}],5:[function(_dereq_,module,exports){"use strict";var CSSProperty=_dereq_(4),ExecutionEnvironment=_dereq_(130),ReactPerf=_dereq_(71),camelizeStyleName=_dereq_(132),dangerousStyleValue=_dereq_(105),hyphenateStyleName=_dereq_(143),memoizeStringOnly=_dereq_(150),warning=_dereq_(155),processStyleName=memoizeStringOnly(function(styleName){return hyphenateStyleName(styleName)}),hasShorthandPropertyBug=!1,styleFloatAccessor="cssFloat";if(ExecutionEnvironment.canUseDOM){var tempStyle=document.createElement("div").style;try{tempStyle.font=""}catch(e){hasShorthandPropertyBug=!0}void 0===document.documentElement.style.cssFloat&&(styleFloatAccessor="styleFloat")}var badVendoredStyleNamePattern=/^(?:webkit|moz|o)[A-Z]/,badStyleValueWithSemicolonPattern=/;\s*$/,warnedStyleNames={},warnedStyleValues={},warnHyphenatedStyleName=function(name){warnedStyleNames.hasOwnProperty(name)&&warnedStyleNames[name]||(warnedStyleNames[name]=!0,warning(!1,"Unsupported style property %s. Did you mean %s?",name,camelizeStyleName(name)))},warnBadVendoredStyleName=function(name){warnedStyleNames.hasOwnProperty(name)&&warnedStyleNames[name]||(warnedStyleNames[name]=!0,warning(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?",name,name.charAt(0).toUpperCase()+name.slice(1)))},warnStyleValueWithSemicolon=function(name,value){warnedStyleValues.hasOwnProperty(value)&&warnedStyleValues[value]||(warnedStyleValues[value]=!0,warning(!1,'Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',name,value.replace(badStyleValueWithSemicolonPattern,"")))},warnValidStyle=function(name,value){name.indexOf("-")>-1?warnHyphenatedStyleName(name):badVendoredStyleNamePattern.test(name)?warnBadVendoredStyleName(name):badStyleValueWithSemicolonPattern.test(value)&&warnStyleValueWithSemicolon(name,value)},CSSPropertyOperations={createMarkupForStyles:function(styles){var serialized="";for(var styleName in styles)if(styles.hasOwnProperty(styleName)){var styleValue=styles[styleName];warnValidStyle(styleName,styleValue),null!=styleValue&&(serialized+=processStyleName(styleName)+":",serialized+=dangerousStyleValue(styleName,styleValue)+";")}return serialized||null},setValueForStyles:function(node,styles){var style=node.style;for(var styleName in styles)if(styles.hasOwnProperty(styleName)){warnValidStyle(styleName,styles[styleName]);var styleValue=dangerousStyleValue(styleName,styles[styleName]);if("float"===styleName&&(styleName=styleFloatAccessor),styleValue)style[styleName]=styleValue;else{var expansion=hasShorthandPropertyBug&&CSSProperty.shorthandPropertyExpansions[styleName];if(expansion)for(var individualStyleName in expansion)style[individualStyleName]="";else style[styleName]=""}}}};ReactPerf.measureMethods(CSSPropertyOperations,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),module.exports=CSSPropertyOperations},{105:105,130:130,132:132,143:143,150:150,155:155,4:4,71:71}],6:[function(_dereq_,module,exports){"use strict";function CallbackQueue(){this._callbacks=null,this._contexts=null}var PooledClass=_dereq_(24),assign=_dereq_(23),invariant=_dereq_(144);assign(CallbackQueue.prototype,{enqueue:function(callback,context){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(callback),this._contexts.push(context)},notifyAll:function(){var callbacks=this._callbacks,contexts=this._contexts;if(callbacks){callbacks.length!==contexts.length?invariant(!1,"Mismatched list of contexts in callback queue"):void 0,this._callbacks=null,this._contexts=null;for(var i=0;i<callbacks.length;i++)callbacks[i].call(contexts[i]);callbacks.length=0,contexts.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),PooledClass.addPoolingTo(CallbackQueue),module.exports=CallbackQueue},{144:144,23:23,24:24}],7:[function(_dereq_,module,exports){"use strict";function shouldUseChangeEvent(elem){var nodeName=elem.nodeName&&elem.nodeName.toLowerCase();return"select"===nodeName||"input"===nodeName&&"file"===elem.type}function manualDispatchChangeEvent(nativeEvent){var event=SyntheticEvent.getPooled(eventTypes.change,activeElementID,nativeEvent,getEventTarget(nativeEvent));EventPropagators.accumulateTwoPhaseDispatches(event),ReactUpdates.batchedUpdates(runEventInBatch,event)}function runEventInBatch(event){EventPluginHub.enqueueEvents(event),EventPluginHub.processEventQueue(!1)}function startWatchingForChangeEventIE8(target,targetID){activeElement=target,activeElementID=targetID,activeElement.attachEvent("onchange",manualDispatchChangeEvent)}function stopWatchingForChangeEventIE8(){activeElement&&(activeElement.detachEvent("onchange",manualDispatchChangeEvent),activeElement=null,activeElementID=null)}function getTargetIDForChangeEvent(topLevelType,topLevelTarget,topLevelTargetID){if(topLevelType===topLevelTypes.topChange)return topLevelTargetID}function handleEventsForChangeEventIE8(topLevelType,topLevelTarget,topLevelTargetID){topLevelType===topLevelTypes.topFocus?(stopWatchingForChangeEventIE8(),startWatchingForChangeEventIE8(topLevelTarget,topLevelTargetID)):topLevelType===topLevelTypes.topBlur&&stopWatchingForChangeEventIE8()}function startWatchingForValueChange(target,targetID){activeElement=target,activeElementID=targetID,activeElementValue=target.value,activeElementValueProp=Object.getOwnPropertyDescriptor(target.constructor.prototype,"value"),Object.defineProperty(activeElement,"value",newValueProp),activeElement.attachEvent("onpropertychange",handlePropertyChange)}function stopWatchingForValueChange(){activeElement&&(delete activeElement.value,activeElement.detachEvent("onpropertychange",handlePropertyChange),activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null)}function handlePropertyChange(nativeEvent){if("value"===nativeEvent.propertyName){var value=nativeEvent.srcElement.value;value!==activeElementValue&&(activeElementValue=value,manualDispatchChangeEvent(nativeEvent))}}function getTargetIDForInputEvent(topLevelType,topLevelTarget,topLevelTargetID){if(topLevelType===topLevelTypes.topInput)return topLevelTargetID}function handleEventsForInputEventIE(topLevelType,topLevelTarget,topLevelTargetID){topLevelType===topLevelTypes.topFocus?(stopWatchingForValueChange(),startWatchingForValueChange(topLevelTarget,topLevelTargetID)):topLevelType===topLevelTypes.topBlur&&stopWatchingForValueChange()}function getTargetIDForInputEventIE(topLevelType,topLevelTarget,topLevelTargetID){if((topLevelType===topLevelTypes.topSelectionChange||topLevelType===topLevelTypes.topKeyUp||topLevelType===topLevelTypes.topKeyDown)&&activeElement&&activeElement.value!==activeElementValue)return activeElementValue=activeElement.value,activeElementID}function shouldUseClickEvent(elem){return elem.nodeName&&"input"===elem.nodeName.toLowerCase()&&("checkbox"===elem.type||"radio"===elem.type)}function getTargetIDForClickEvent(topLevelType,topLevelTarget,topLevelTargetID){if(topLevelType===topLevelTypes.topClick)return topLevelTargetID}var EventConstants=_dereq_(15),EventPluginHub=_dereq_(16),EventPropagators=_dereq_(19),ExecutionEnvironment=_dereq_(130),ReactUpdates=_dereq_(83),SyntheticEvent=_dereq_(92),getEventTarget=_dereq_(114),isEventSupported=_dereq_(119),isTextInputElement=_dereq_(120),keyOf=_dereq_(148),topLevelTypes=EventConstants.topLevelTypes,eventTypes={change:{phasedRegistrationNames:{bubbled:keyOf({onChange:null}),captured:keyOf({onChangeCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topChange,topLevelTypes.topClick,topLevelTypes.topFocus,topLevelTypes.topInput,topLevelTypes.topKeyDown,topLevelTypes.topKeyUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null,doesChangeEventBubble=!1;ExecutionEnvironment.canUseDOM&&(doesChangeEventBubble=isEventSupported("change")&&(!("documentMode"in document)||document.documentMode>8));var isInputEventSupported=!1;ExecutionEnvironment.canUseDOM&&(isInputEventSupported=isEventSupported("input")&&(!("documentMode"in document)||document.documentMode>9));var newValueProp={get:function(){return activeElementValueProp.get.call(this)},set:function(val){activeElementValue=""+val,activeElementValueProp.set.call(this,val)}},ChangeEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){var getTargetIDFunc,handleEventFunc;if(shouldUseChangeEvent(topLevelTarget)?doesChangeEventBubble?getTargetIDFunc=getTargetIDForChangeEvent:handleEventFunc=handleEventsForChangeEventIE8:isTextInputElement(topLevelTarget)?isInputEventSupported?getTargetIDFunc=getTargetIDForInputEvent:(getTargetIDFunc=getTargetIDForInputEventIE,handleEventFunc=handleEventsForInputEventIE):shouldUseClickEvent(topLevelTarget)&&(getTargetIDFunc=getTargetIDForClickEvent),getTargetIDFunc){var targetID=getTargetIDFunc(topLevelType,topLevelTarget,topLevelTargetID);if(targetID){var event=SyntheticEvent.getPooled(eventTypes.change,targetID,nativeEvent,nativeEventTarget);return event.type="change",EventPropagators.accumulateTwoPhaseDispatches(event),event}}handleEventFunc&&handleEventFunc(topLevelType,topLevelTarget,topLevelTargetID)}};module.exports=ChangeEventPlugin},{114:114,119:119,120:120,130:130,148:148,15:15,16:16,19:19,83:83,92:92}],8:[function(_dereq_,module,exports){"use strict";var nextReactRootIndex=0,ClientReactRootIndex={createReactRootIndex:function(){return nextReactRootIndex++}};module.exports=ClientReactRootIndex},{}],9:[function(_dereq_,module,exports){"use strict";function insertChildAt(parentNode,childNode,index){var beforeChild=index>=parentNode.childNodes.length?null:parentNode.childNodes.item(index);parentNode.insertBefore(childNode,beforeChild)}var Danger=_dereq_(12),ReactMultiChildUpdateTypes=_dereq_(67),ReactPerf=_dereq_(71),setInnerHTML=_dereq_(124),setTextContent=_dereq_(125),invariant=_dereq_(144),DOMChildrenOperations={dangerouslyReplaceNodeWithMarkup:Danger.dangerouslyReplaceNodeWithMarkup,updateTextContent:setTextContent,processUpdates:function(updates,markupList){for(var update,initialChildren=null,updatedChildren=null,i=0;i<updates.length;i++)if(update=updates[i],update.type===ReactMultiChildUpdateTypes.MOVE_EXISTING||update.type===ReactMultiChildUpdateTypes.REMOVE_NODE){var updatedIndex=update.fromIndex,updatedChild=update.parentNode.childNodes[updatedIndex],parentID=update.parentID;updatedChild?void 0:invariant(!1,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",updatedIndex,parentID),initialChildren=initialChildren||{},initialChildren[parentID]=initialChildren[parentID]||[],initialChildren[parentID][updatedIndex]=updatedChild,updatedChildren=updatedChildren||[],updatedChildren.push(updatedChild)}var renderedMarkup;if(renderedMarkup=markupList.length&&"string"==typeof markupList[0]?Danger.dangerouslyRenderMarkup(markupList):markupList,updatedChildren)for(var j=0;j<updatedChildren.length;j++)updatedChildren[j].parentNode.removeChild(updatedChildren[j]);for(var k=0;k<updates.length;k++)switch(update=updates[k],update.type){case ReactMultiChildUpdateTypes.INSERT_MARKUP:insertChildAt(update.parentNode,renderedMarkup[update.markupIndex],update.toIndex);break;case ReactMultiChildUpdateTypes.MOVE_EXISTING:insertChildAt(update.parentNode,initialChildren[update.parentID][update.fromIndex],update.toIndex);break;case ReactMultiChildUpdateTypes.SET_MARKUP:setInnerHTML(update.parentNode,update.content);break;case ReactMultiChildUpdateTypes.TEXT_CONTENT:setTextContent(update.parentNode,update.content);break;case ReactMultiChildUpdateTypes.REMOVE_NODE:}}};ReactPerf.measureMethods(DOMChildrenOperations,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),module.exports=DOMChildrenOperations},{12:12,124:124,125:125,144:144,67:67,71:71}],10:[function(_dereq_,module,exports){"use strict";function checkMask(value,bitmask){return(value&bitmask)===bitmask}var invariant=_dereq_(144),DOMPropertyInjection={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(domPropertyConfig){var Injection=DOMPropertyInjection,Properties=domPropertyConfig.Properties||{},DOMAttributeNamespaces=domPropertyConfig.DOMAttributeNamespaces||{},DOMAttributeNames=domPropertyConfig.DOMAttributeNames||{},DOMPropertyNames=domPropertyConfig.DOMPropertyNames||{},DOMMutationMethods=domPropertyConfig.DOMMutationMethods||{};domPropertyConfig.isCustomAttribute&&DOMProperty._isCustomAttributeFunctions.push(domPropertyConfig.isCustomAttribute);for(var propName in Properties){DOMProperty.properties.hasOwnProperty(propName)?invariant(!1,"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",propName):void 0;var lowerCased=propName.toLowerCase(),propConfig=Properties[propName],propertyInfo={attributeName:lowerCased,attributeNamespace:null,propertyName:propName,mutationMethod:null,mustUseAttribute:checkMask(propConfig,Injection.MUST_USE_ATTRIBUTE),mustUseProperty:checkMask(propConfig,Injection.MUST_USE_PROPERTY),hasSideEffects:checkMask(propConfig,Injection.HAS_SIDE_EFFECTS),hasBooleanValue:checkMask(propConfig,Injection.HAS_BOOLEAN_VALUE),hasNumericValue:checkMask(propConfig,Injection.HAS_NUMERIC_VALUE),hasPositiveNumericValue:checkMask(propConfig,Injection.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:checkMask(propConfig,Injection.HAS_OVERLOADED_BOOLEAN_VALUE)};if(propertyInfo.mustUseAttribute&&propertyInfo.mustUseProperty?invariant(!1,"DOMProperty: Cannot require using both attribute and property: %s",propName):void 0,!propertyInfo.mustUseProperty&&propertyInfo.hasSideEffects?invariant(!1,"DOMProperty: Properties that have side effects must use property: %s",propName):void 0,propertyInfo.hasBooleanValue+propertyInfo.hasNumericValue+propertyInfo.hasOverloadedBooleanValue<=1?void 0:invariant(!1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",propName),DOMProperty.getPossibleStandardName[lowerCased]=propName,DOMAttributeNames.hasOwnProperty(propName)){var attributeName=DOMAttributeNames[propName];propertyInfo.attributeName=attributeName,DOMProperty.getPossibleStandardName[attributeName]=propName}DOMAttributeNamespaces.hasOwnProperty(propName)&&(propertyInfo.attributeNamespace=DOMAttributeNamespaces[propName]),DOMPropertyNames.hasOwnProperty(propName)&&(propertyInfo.propertyName=DOMPropertyNames[propName]),DOMMutationMethods.hasOwnProperty(propName)&&(propertyInfo.mutationMethod=DOMMutationMethods[propName]),DOMProperty.properties[propName]=propertyInfo}}},defaultValueCache={},DOMProperty={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(attributeName){for(var i=0;i<DOMProperty._isCustomAttributeFunctions.length;i++){var isCustomAttributeFn=DOMProperty._isCustomAttributeFunctions[i];if(isCustomAttributeFn(attributeName))return!0}return!1},getDefaultValueForProperty:function(nodeName,prop){var testElement,nodeDefaults=defaultValueCache[nodeName];return nodeDefaults||(defaultValueCache[nodeName]=nodeDefaults={}),prop in nodeDefaults||(testElement=document.createElement(nodeName),nodeDefaults[prop]=testElement[prop]),nodeDefaults[prop]},injection:DOMPropertyInjection};module.exports=DOMProperty},{144:144}],11:[function(_dereq_,module,exports){"use strict";function isAttributeNameSafe(attributeName){return!!validatedAttributeNameCache.hasOwnProperty(attributeName)||!illegalAttributeNameCache.hasOwnProperty(attributeName)&&(VALID_ATTRIBUTE_NAME_REGEX.test(attributeName)?(validatedAttributeNameCache[attributeName]=!0,!0):(illegalAttributeNameCache[attributeName]=!0,warning(!1,"Invalid attribute name: `%s`",attributeName),!1))}function shouldIgnoreValue(propertyInfo,value){return null==value||propertyInfo.hasBooleanValue&&!value||propertyInfo.hasNumericValue&&isNaN(value)||propertyInfo.hasPositiveNumericValue&&value<1||propertyInfo.hasOverloadedBooleanValue&&value===!1}var DOMProperty=_dereq_(10),ReactPerf=_dereq_(71),quoteAttributeValueForBrowser=_dereq_(122),warning=_dereq_(155),VALID_ATTRIBUTE_NAME_REGEX=/^[a-zA-Z_][\w\.\-]*$/,illegalAttributeNameCache={},validatedAttributeNameCache={},reactProps={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},warnedProperties={},warnUnknownProperty=function(name){if(!(reactProps.hasOwnProperty(name)&&reactProps[name]||warnedProperties.hasOwnProperty(name)&&warnedProperties[name])){warnedProperties[name]=!0;var lowerCasedName=name.toLowerCase(),standardName=DOMProperty.isCustomAttribute(lowerCasedName)?lowerCasedName:DOMProperty.getPossibleStandardName.hasOwnProperty(lowerCasedName)?DOMProperty.getPossibleStandardName[lowerCasedName]:null;warning(null==standardName,"Unknown DOM property %s. Did you mean %s?",name,standardName)}},DOMPropertyOperations={createMarkupForID:function(id){return DOMProperty.ID_ATTRIBUTE_NAME+"="+quoteAttributeValueForBrowser(id)},setAttributeForID:function(node,id){node.setAttribute(DOMProperty.ID_ATTRIBUTE_NAME,id)},createMarkupForProperty:function(name,value){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){if(shouldIgnoreValue(propertyInfo,value))return"";var attributeName=propertyInfo.attributeName;return propertyInfo.hasBooleanValue||propertyInfo.hasOverloadedBooleanValue&&value===!0?attributeName+'=""':attributeName+"="+quoteAttributeValueForBrowser(value)}return DOMProperty.isCustomAttribute(name)?null==value?"":name+"="+quoteAttributeValueForBrowser(value):(warnUnknownProperty(name),null)},createMarkupForCustomAttribute:function(name,value){return isAttributeNameSafe(name)&&null!=value?name+"="+quoteAttributeValueForBrowser(value):""},setValueForProperty:function(node,name,value){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){var mutationMethod=propertyInfo.mutationMethod;if(mutationMethod)mutationMethod(node,value);else if(shouldIgnoreValue(propertyInfo,value))this.deleteValueForProperty(node,name);else if(propertyInfo.mustUseAttribute){var attributeName=propertyInfo.attributeName,namespace=propertyInfo.attributeNamespace;namespace?node.setAttributeNS(namespace,attributeName,""+value):propertyInfo.hasBooleanValue||propertyInfo.hasOverloadedBooleanValue&&value===!0?node.setAttribute(attributeName,""):node.setAttribute(attributeName,""+value)}else{var propName=propertyInfo.propertyName;propertyInfo.hasSideEffects&&""+node[propName]==""+value||(node[propName]=value)}}else DOMProperty.isCustomAttribute(name)?DOMPropertyOperations.setValueForAttribute(node,name,value):warnUnknownProperty(name)},setValueForAttribute:function(node,name,value){isAttributeNameSafe(name)&&(null==value?node.removeAttribute(name):node.setAttribute(name,""+value))},deleteValueForProperty:function(node,name){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){var mutationMethod=propertyInfo.mutationMethod;if(mutationMethod)mutationMethod(node,void 0);else if(propertyInfo.mustUseAttribute)node.removeAttribute(propertyInfo.attributeName);else{var propName=propertyInfo.propertyName,defaultValue=DOMProperty.getDefaultValueForProperty(node.nodeName,propName);propertyInfo.hasSideEffects&&""+node[propName]===defaultValue||(node[propName]=defaultValue)}}else DOMProperty.isCustomAttribute(name)?node.removeAttribute(name):warnUnknownProperty(name)}};ReactPerf.measureMethods(DOMPropertyOperations,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),module.exports=DOMPropertyOperations},{10:10,122:122,155:155,71:71}],12:[function(_dereq_,module,exports){"use strict";function getNodeName(markup){return markup.substring(1,markup.indexOf(" "))}var ExecutionEnvironment=_dereq_(130),createNodesFromMarkup=_dereq_(135),emptyFunction=_dereq_(136),getMarkupWrap=_dereq_(140),invariant=_dereq_(144),OPEN_TAG_NAME_EXP=/^(<[^ \/>]+)/,RESULT_INDEX_ATTR="data-danger-index",Danger={dangerouslyRenderMarkup:function(markupList){ExecutionEnvironment.canUseDOM?void 0:invariant(!1,"dangerouslyRenderMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString for server rendering.");for(var nodeName,markupByNodeName={},i=0;i<markupList.length;i++)markupList[i]?void 0:invariant(!1,"dangerouslyRenderMarkup(...): Missing markup."),nodeName=getNodeName(markupList[i]),nodeName=getMarkupWrap(nodeName)?nodeName:"*",markupByNodeName[nodeName]=markupByNodeName[nodeName]||[],markupByNodeName[nodeName][i]=markupList[i];var resultList=[],resultListAssignmentCount=0;for(nodeName in markupByNodeName)if(markupByNodeName.hasOwnProperty(nodeName)){var resultIndex,markupListByNodeName=markupByNodeName[nodeName];for(resultIndex in markupListByNodeName)if(markupListByNodeName.hasOwnProperty(resultIndex)){var markup=markupListByNodeName[resultIndex];markupListByNodeName[resultIndex]=markup.replace(OPEN_TAG_NAME_EXP,"$1 "+RESULT_INDEX_ATTR+'="'+resultIndex+'" ')}for(var renderNodes=createNodesFromMarkup(markupListByNodeName.join(""),emptyFunction),j=0;j<renderNodes.length;++j){var renderNode=renderNodes[j];renderNode.hasAttribute&&renderNode.hasAttribute(RESULT_INDEX_ATTR)?(resultIndex=+renderNode.getAttribute(RESULT_INDEX_ATTR),renderNode.removeAttribute(RESULT_INDEX_ATTR),resultList.hasOwnProperty(resultIndex)?invariant(!1,"Danger: Assigning to an already-occupied result index."):void 0,resultList[resultIndex]=renderNode,resultListAssignmentCount+=1):console.error("Danger: Discarding unexpected node:",renderNode)}}return resultListAssignmentCount!==resultList.length?invariant(!1,"Danger: Did not assign to every index of resultList."):void 0,resultList.length!==markupList.length?invariant(!1,"Danger: Expected markup to render %s nodes, but rendered %s.",markupList.length,resultList.length):void 0,resultList},dangerouslyReplaceNodeWithMarkup:function(oldChild,markup){ExecutionEnvironment.canUseDOM?void 0:invariant(!1,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString() for server rendering."),markup?void 0:invariant(!1,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."),"html"===oldChild.tagName.toLowerCase()?invariant(!1,"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See ReactDOMServer.renderToString()."):void 0;var newChild;newChild="string"==typeof markup?createNodesFromMarkup(markup,emptyFunction)[0]:markup,oldChild.parentNode.replaceChild(newChild,oldChild)}};module.exports=Danger},{130:130,135:135,136:136,140:140,144:144}],13:[function(_dereq_,module,exports){"use strict";var keyOf=_dereq_(148),DefaultEventPluginOrder=[keyOf({ResponderEventPlugin:null}),keyOf({SimpleEventPlugin:null}),keyOf({TapEventPlugin:null}),keyOf({EnterLeaveEventPlugin:null}),keyOf({ChangeEventPlugin:null}),keyOf({SelectEventPlugin:null}),keyOf({BeforeInputEventPlugin:null})];module.exports=DefaultEventPluginOrder},{148:148}],14:[function(_dereq_,module,exports){"use strict";var EventConstants=_dereq_(15),EventPropagators=_dereq_(19),SyntheticMouseEvent=_dereq_(96),ReactMount=_dereq_(65),keyOf=_dereq_(148),topLevelTypes=EventConstants.topLevelTypes,getFirstReactDOM=ReactMount.getFirstReactDOM,eventTypes={mouseEnter:{registrationName:keyOf({onMouseEnter:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]},mouseLeave:{registrationName:keyOf({onMouseLeave:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]}},extractedEvents=[null,null],EnterLeaveEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){if(topLevelType===topLevelTypes.topMouseOver&&(nativeEvent.relatedTarget||nativeEvent.fromElement))return null;if(topLevelType!==topLevelTypes.topMouseOut&&topLevelType!==topLevelTypes.topMouseOver)return null;var win;if(topLevelTarget.window===topLevelTarget)win=topLevelTarget;else{var doc=topLevelTarget.ownerDocument;win=doc?doc.defaultView||doc.parentWindow:window}var from,to,fromID="",toID="";if(topLevelType===topLevelTypes.topMouseOut?(from=topLevelTarget,fromID=topLevelTargetID,to=getFirstReactDOM(nativeEvent.relatedTarget||nativeEvent.toElement),to?toID=ReactMount.getID(to):to=win,to=to||win):(from=win,to=topLevelTarget,toID=topLevelTargetID),from===to)return null;var leave=SyntheticMouseEvent.getPooled(eventTypes.mouseLeave,fromID,nativeEvent,nativeEventTarget);leave.type="mouseleave",leave.target=from,leave.relatedTarget=to;var enter=SyntheticMouseEvent.getPooled(eventTypes.mouseEnter,toID,nativeEvent,nativeEventTarget);return enter.type="mouseenter",enter.target=to,enter.relatedTarget=from,EventPropagators.accumulateEnterLeaveDispatches(leave,enter,fromID,toID),extractedEvents[0]=leave,extractedEvents[1]=enter,extractedEvents}};module.exports=EnterLeaveEventPlugin},{148:148,15:15,19:19,65:65,96:96}],15:[function(_dereq_,module,exports){"use strict";var keyMirror=_dereq_(147),PropagationPhases=keyMirror({bubbled:null,captured:null}),topLevelTypes=keyMirror({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),EventConstants={topLevelTypes:topLevelTypes,PropagationPhases:PropagationPhases};module.exports=EventConstants},{147:147}],16:[function(_dereq_,module,exports){"use strict";function validateInstanceHandle(){var valid=InstanceHandle&&InstanceHandle.traverseTwoPhase&&InstanceHandle.traverseEnterLeave;warning(valid,"InstanceHandle not injected before use!")}var EventPluginRegistry=_dereq_(17),EventPluginUtils=_dereq_(18),ReactErrorUtils=_dereq_(56),accumulateInto=_dereq_(102),forEachAccumulated=_dereq_(110),invariant=_dereq_(144),warning=_dereq_(155),listenerBank={},eventQueue=null,executeDispatchesAndRelease=function(event,simulated){event&&(EventPluginUtils.executeDispatchesInOrder(event,simulated),event.isPersistent()||event.constructor.release(event))},executeDispatchesAndReleaseSimulated=function(e){return executeDispatchesAndRelease(e,!0)},executeDispatchesAndReleaseTopLevel=function(e){return executeDispatchesAndRelease(e,!1)},InstanceHandle=null,EventPluginHub={injection:{injectMount:EventPluginUtils.injection.injectMount,injectInstanceHandle:function(InjectedInstanceHandle){InstanceHandle=InjectedInstanceHandle,validateInstanceHandle()},getInstanceHandle:function(){return validateInstanceHandle(),InstanceHandle},injectEventPluginOrder:EventPluginRegistry.injectEventPluginOrder,injectEventPluginsByName:EventPluginRegistry.injectEventPluginsByName},eventNameDispatchConfigs:EventPluginRegistry.eventNameDispatchConfigs,registrationNameModules:EventPluginRegistry.registrationNameModules,putListener:function(id,registrationName,listener){"function"!=typeof listener?invariant(!1,"Expected %s listener to be a function, instead got type %s",registrationName,typeof listener):void 0;var bankForRegistrationName=listenerBank[registrationName]||(listenerBank[registrationName]={});bankForRegistrationName[id]=listener;var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];PluginModule&&PluginModule.didPutListener&&PluginModule.didPutListener(id,registrationName,listener)},getListener:function(id,registrationName){var bankForRegistrationName=listenerBank[registrationName];return bankForRegistrationName&&bankForRegistrationName[id]},deleteListener:function(id,registrationName){var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];PluginModule&&PluginModule.willDeleteListener&&PluginModule.willDeleteListener(id,registrationName);var bankForRegistrationName=listenerBank[registrationName];bankForRegistrationName&&delete bankForRegistrationName[id]},deleteAllListeners:function(id){for(var registrationName in listenerBank)if(listenerBank[registrationName][id]){var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];PluginModule&&PluginModule.willDeleteListener&&PluginModule.willDeleteListener(id,registrationName),delete listenerBank[registrationName][id]}},extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){for(var events,plugins=EventPluginRegistry.plugins,i=0;i<plugins.length;i++){var possiblePlugin=plugins[i];if(possiblePlugin){var extractedEvents=possiblePlugin.extractEvents(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget);extractedEvents&&(events=accumulateInto(events,extractedEvents))}}return events},enqueueEvents:function(events){events&&(eventQueue=accumulateInto(eventQueue,events))},processEventQueue:function(simulated){var processingEventQueue=eventQueue;eventQueue=null,simulated?forEachAccumulated(processingEventQueue,executeDispatchesAndReleaseSimulated):forEachAccumulated(processingEventQueue,executeDispatchesAndReleaseTopLevel),eventQueue?invariant(!1,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."):void 0,ReactErrorUtils.rethrowCaughtError()},__purge:function(){listenerBank={}},__getListenerBank:function(){return listenerBank}};module.exports=EventPluginHub},{102:102,110:110,144:144,155:155,17:17,18:18,56:56}],17:[function(_dereq_,module,exports){"use strict";function recomputePluginOrdering(){if(EventPluginOrder)for(var pluginName in namesToPlugins){var PluginModule=namesToPlugins[pluginName],pluginIndex=EventPluginOrder.indexOf(pluginName);if(pluginIndex>-1?void 0:invariant(!1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",pluginName),!EventPluginRegistry.plugins[pluginIndex]){PluginModule.extractEvents?void 0:invariant(!1,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",pluginName),EventPluginRegistry.plugins[pluginIndex]=PluginModule;var publishedEvents=PluginModule.eventTypes;for(var eventName in publishedEvents)publishEventForPlugin(publishedEvents[eventName],PluginModule,eventName)?void 0:invariant(!1,"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",eventName,pluginName)}}}function publishEventForPlugin(dispatchConfig,PluginModule,eventName){EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(eventName)?invariant(!1,"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",eventName):void 0,EventPluginRegistry.eventNameDispatchConfigs[eventName]=dispatchConfig;var phasedRegistrationNames=dispatchConfig.phasedRegistrationNames;if(phasedRegistrationNames){for(var phaseName in phasedRegistrationNames)if(phasedRegistrationNames.hasOwnProperty(phaseName)){var phasedRegistrationName=phasedRegistrationNames[phaseName];publishRegistrationName(phasedRegistrationName,PluginModule,eventName)}return!0}return!!dispatchConfig.registrationName&&(publishRegistrationName(dispatchConfig.registrationName,PluginModule,eventName),!0)}function publishRegistrationName(registrationName,PluginModule,eventName){EventPluginRegistry.registrationNameModules[registrationName]?invariant(!1,"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",registrationName):void 0,EventPluginRegistry.registrationNameModules[registrationName]=PluginModule,EventPluginRegistry.registrationNameDependencies[registrationName]=PluginModule.eventTypes[eventName].dependencies}var invariant=_dereq_(144),EventPluginOrder=null,namesToPlugins={},EventPluginRegistry={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(InjectedEventPluginOrder){EventPluginOrder?invariant(!1,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."):void 0,EventPluginOrder=Array.prototype.slice.call(InjectedEventPluginOrder),recomputePluginOrdering()},injectEventPluginsByName:function(injectedNamesToPlugins){var isOrderingDirty=!1;for(var pluginName in injectedNamesToPlugins)if(injectedNamesToPlugins.hasOwnProperty(pluginName)){var PluginModule=injectedNamesToPlugins[pluginName];namesToPlugins.hasOwnProperty(pluginName)&&namesToPlugins[pluginName]===PluginModule||(namesToPlugins[pluginName]?invariant(!1,"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",pluginName):void 0,namesToPlugins[pluginName]=PluginModule,isOrderingDirty=!0)}isOrderingDirty&&recomputePluginOrdering()},getPluginModuleForEvent:function(event){var dispatchConfig=event.dispatchConfig;if(dispatchConfig.registrationName)return EventPluginRegistry.registrationNameModules[dispatchConfig.registrationName]||null;for(var phase in dispatchConfig.phasedRegistrationNames)if(dispatchConfig.phasedRegistrationNames.hasOwnProperty(phase)){var PluginModule=EventPluginRegistry.registrationNameModules[dispatchConfig.phasedRegistrationNames[phase]];if(PluginModule)return PluginModule}return null},_resetEventPlugins:function(){EventPluginOrder=null;for(var pluginName in namesToPlugins)namesToPlugins.hasOwnProperty(pluginName)&&delete namesToPlugins[pluginName];EventPluginRegistry.plugins.length=0;var eventNameDispatchConfigs=EventPluginRegistry.eventNameDispatchConfigs;for(var eventName in eventNameDispatchConfigs)eventNameDispatchConfigs.hasOwnProperty(eventName)&&delete eventNameDispatchConfigs[eventName];var registrationNameModules=EventPluginRegistry.registrationNameModules;for(var registrationName in registrationNameModules)registrationNameModules.hasOwnProperty(registrationName)&&delete registrationNameModules[registrationName]}};module.exports=EventPluginRegistry},{144:144}],18:[function(_dereq_,module,exports){"use strict";function isEndish(topLevelType){return topLevelType===topLevelTypes.topMouseUp||topLevelType===topLevelTypes.topTouchEnd||topLevelType===topLevelTypes.topTouchCancel}function isMoveish(topLevelType){return topLevelType===topLevelTypes.topMouseMove||topLevelType===topLevelTypes.topTouchMove}function isStartish(topLevelType){return topLevelType===topLevelTypes.topMouseDown||topLevelType===topLevelTypes.topTouchStart}function executeDispatch(event,simulated,listener,domID){var type=event.type||"unknown-event";event.currentTarget=injection.Mount.getNode(domID),simulated?ReactErrorUtils.invokeGuardedCallbackWithCatch(type,listener,event,domID):ReactErrorUtils.invokeGuardedCallback(type,listener,event,domID),event.currentTarget=null}function executeDispatchesInOrder(event,simulated){var dispatchListeners=event._dispatchListeners,dispatchIDs=event._dispatchIDs;if(validateEventDispatches(event),Array.isArray(dispatchListeners))for(var i=0;i<dispatchListeners.length&&!event.isPropagationStopped();i++)executeDispatch(event,simulated,dispatchListeners[i],dispatchIDs[i]);else dispatchListeners&&executeDispatch(event,simulated,dispatchListeners,dispatchIDs);event._dispatchListeners=null,event._dispatchIDs=null}function executeDispatchesInOrderStopAtTrueImpl(event){var dispatchListeners=event._dispatchListeners,dispatchIDs=event._dispatchIDs;if(validateEventDispatches(event),Array.isArray(dispatchListeners)){for(var i=0;i<dispatchListeners.length&&!event.isPropagationStopped();i++)if(dispatchListeners[i](event,dispatchIDs[i]))return dispatchIDs[i]}else if(dispatchListeners&&dispatchListeners(event,dispatchIDs))return dispatchIDs;return null}function executeDispatchesInOrderStopAtTrue(event){var ret=executeDispatchesInOrderStopAtTrueImpl(event);return event._dispatchIDs=null,event._dispatchListeners=null,ret}function executeDirectDispatch(event){validateEventDispatches(event);var dispatchListener=event._dispatchListeners,dispatchID=event._dispatchIDs;Array.isArray(dispatchListener)?invariant(!1,"executeDirectDispatch(...): Invalid `event`."):void 0;var res=dispatchListener?dispatchListener(event,dispatchID):null;return event._dispatchListeners=null,event._dispatchIDs=null,res}function hasDispatches(event){return!!event._dispatchListeners}var validateEventDispatches,EventConstants=_dereq_(15),ReactErrorUtils=_dereq_(56),invariant=_dereq_(144),warning=_dereq_(155),injection={Mount:null,injectMount:function(InjectedMount){injection.Mount=InjectedMount,warning(InjectedMount&&InjectedMount.getNode&&InjectedMount.getID,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode or getID.")}},topLevelTypes=EventConstants.topLevelTypes;validateEventDispatches=function(event){var dispatchListeners=event._dispatchListeners,dispatchIDs=event._dispatchIDs,listenersIsArr=Array.isArray(dispatchListeners),idsIsArr=Array.isArray(dispatchIDs),IDsLen=idsIsArr?dispatchIDs.length:dispatchIDs?1:0,listenersLen=listenersIsArr?dispatchListeners.length:dispatchListeners?1:0;warning(idsIsArr===listenersIsArr&&IDsLen===listenersLen,"EventPluginUtils: Invalid `event`.")};var EventPluginUtils={isEndish:isEndish,isMoveish:isMoveish,isStartish:isStartish,executeDirectDispatch:executeDirectDispatch,executeDispatchesInOrder:executeDispatchesInOrder,executeDispatchesInOrderStopAtTrue:executeDispatchesInOrderStopAtTrue,hasDispatches:hasDispatches,getNode:function(id){return injection.Mount.getNode(id)},getID:function(node){return injection.Mount.getID(node)},injection:injection};module.exports=EventPluginUtils},{144:144,15:15,155:155,56:56}],19:[function(_dereq_,module,exports){"use strict";function listenerAtPhase(id,event,propagationPhase){var registrationName=event.dispatchConfig.phasedRegistrationNames[propagationPhase];return getListener(id,registrationName)}function accumulateDirectionalDispatches(domID,upwards,event){warning(domID,"Dispatching id must not be null");var phase=upwards?PropagationPhases.bubbled:PropagationPhases.captured,listener=listenerAtPhase(domID,event,phase);listener&&(event._dispatchListeners=accumulateInto(event._dispatchListeners,listener),event._dispatchIDs=accumulateInto(event._dispatchIDs,domID))}function accumulateTwoPhaseDispatchesSingle(event){event&&event.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhase(event.dispatchMarker,accumulateDirectionalDispatches,event)}function accumulateTwoPhaseDispatchesSingleSkipTarget(event){event&&event.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(event.dispatchMarker,accumulateDirectionalDispatches,event)}function accumulateDispatches(id,ignoredDirection,event){if(event&&event.dispatchConfig.registrationName){var registrationName=event.dispatchConfig.registrationName,listener=getListener(id,registrationName);listener&&(event._dispatchListeners=accumulateInto(event._dispatchListeners,listener),event._dispatchIDs=accumulateInto(event._dispatchIDs,id))}}function accumulateDirectDispatchesSingle(event){event&&event.dispatchConfig.registrationName&&accumulateDispatches(event.dispatchMarker,null,event)}function accumulateTwoPhaseDispatches(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingle)}function accumulateTwoPhaseDispatchesSkipTarget(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingleSkipTarget)}function accumulateEnterLeaveDispatches(leave,enter,fromID,toID){EventPluginHub.injection.getInstanceHandle().traverseEnterLeave(fromID,toID,accumulateDispatches,leave,enter)}function accumulateDirectDispatches(events){forEachAccumulated(events,accumulateDirectDispatchesSingle)}var EventConstants=_dereq_(15),EventPluginHub=_dereq_(16),warning=_dereq_(155),accumulateInto=_dereq_(102),forEachAccumulated=_dereq_(110),PropagationPhases=EventConstants.PropagationPhases,getListener=EventPluginHub.getListener,EventPropagators={accumulateTwoPhaseDispatches:accumulateTwoPhaseDispatches,accumulateTwoPhaseDispatchesSkipTarget:accumulateTwoPhaseDispatchesSkipTarget,accumulateDirectDispatches:accumulateDirectDispatches,accumulateEnterLeaveDispatches:accumulateEnterLeaveDispatches};module.exports=EventPropagators},{102:102,110:110,15:15,155:155,16:16}],20:[function(_dereq_,module,exports){"use strict";function FallbackCompositionState(root){this._root=root,this._startText=this.getText(),this._fallbackText=null}var PooledClass=_dereq_(24),assign=_dereq_(23),getTextContentAccessor=_dereq_(117);assign(FallbackCompositionState.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[getTextContentAccessor()]},getData:function(){if(this._fallbackText)return this._fallbackText;var start,end,startValue=this._startText,startLength=startValue.length,endValue=this.getText(),endLength=endValue.length;for(start=0;start<startLength&&startValue[start]===endValue[start];start++);var minEnd=startLength-start;for(end=1;end<=minEnd&&startValue[startLength-end]===endValue[endLength-end];end++);var sliceTail=end>1?1-end:void 0;return this._fallbackText=endValue.slice(start,sliceTail),this._fallbackText}}),PooledClass.addPoolingTo(FallbackCompositionState),module.exports=FallbackCompositionState},{117:117,23:23,24:24}],21:[function(_dereq_,module,exports){"use strict";var hasSVG,DOMProperty=_dereq_(10),ExecutionEnvironment=_dereq_(130),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,MUST_USE_PROPERTY=DOMProperty.injection.MUST_USE_PROPERTY,HAS_BOOLEAN_VALUE=DOMProperty.injection.HAS_BOOLEAN_VALUE,HAS_SIDE_EFFECTS=DOMProperty.injection.HAS_SIDE_EFFECTS,HAS_NUMERIC_VALUE=DOMProperty.injection.HAS_NUMERIC_VALUE,HAS_POSITIVE_NUMERIC_VALUE=DOMProperty.injection.HAS_POSITIVE_NUMERIC_VALUE,HAS_OVERLOADED_BOOLEAN_VALUE=DOMProperty.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(ExecutionEnvironment.canUseDOM){var implementation=document.implementation;hasSVG=implementation&&implementation.hasFeature&&implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var HTMLDOMPropertyConfig={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,allowTransparency:MUST_USE_ATTRIBUTE,alt:null,async:HAS_BOOLEAN_VALUE,autoComplete:null,autoPlay:HAS_BOOLEAN_VALUE,capture:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,cellPadding:null,cellSpacing:null,charSet:MUST_USE_ATTRIBUTE,challenge:MUST_USE_ATTRIBUTE,checked:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,classID:MUST_USE_ATTRIBUTE,className:hasSVG?MUST_USE_ATTRIBUTE:MUST_USE_PROPERTY,cols:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,colSpan:null,content:null,contentEditable:null,contextMenu:MUST_USE_ATTRIBUTE,controls:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,coords:null,crossOrigin:null,data:null,dateTime:MUST_USE_ATTRIBUTE,default:HAS_BOOLEAN_VALUE,defer:HAS_BOOLEAN_VALUE,dir:null,disabled:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,download:HAS_OVERLOADED_BOOLEAN_VALUE,draggable:null,encType:null,form:MUST_USE_ATTRIBUTE,formAction:MUST_USE_ATTRIBUTE,formEncType:MUST_USE_ATTRIBUTE,formMethod:MUST_USE_ATTRIBUTE,formNoValidate:HAS_BOOLEAN_VALUE,formTarget:MUST_USE_ATTRIBUTE,frameBorder:MUST_USE_ATTRIBUTE,headers:null,height:MUST_USE_ATTRIBUTE,hidden:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:MUST_USE_PROPERTY,inputMode:MUST_USE_ATTRIBUTE,integrity:null,is:MUST_USE_ATTRIBUTE,keyParams:MUST_USE_ATTRIBUTE,keyType:MUST_USE_ATTRIBUTE,kind:null,label:null,lang:null,list:MUST_USE_ATTRIBUTE,loop:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,low:null,manifest:MUST_USE_ATTRIBUTE,marginHeight:null,marginWidth:null,max:null,maxLength:MUST_USE_ATTRIBUTE,media:MUST_USE_ATTRIBUTE,mediaGroup:null,method:null,min:null,minLength:MUST_USE_ATTRIBUTE,multiple:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,muted:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,name:null,nonce:MUST_USE_ATTRIBUTE,noValidate:HAS_BOOLEAN_VALUE,open:HAS_BOOLEAN_VALUE,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,rel:null,required:HAS_BOOLEAN_VALUE,reversed:HAS_BOOLEAN_VALUE,role:MUST_USE_ATTRIBUTE,rows:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,rowSpan:null,sandbox:null,scope:null,scoped:HAS_BOOLEAN_VALUE,scrolling:null,seamless:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,selected:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,shape:null,size:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,sizes:MUST_USE_ATTRIBUTE,span:HAS_POSITIVE_NUMERIC_VALUE,spellCheck:null,src:null,srcDoc:MUST_USE_PROPERTY,srcLang:null,srcSet:MUST_USE_ATTRIBUTE,start:HAS_NUMERIC_VALUE,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:MUST_USE_PROPERTY|HAS_SIDE_EFFECTS,width:MUST_USE_ATTRIBUTE,wmode:MUST_USE_ATTRIBUTE,wrap:null,about:MUST_USE_ATTRIBUTE,datatype:MUST_USE_ATTRIBUTE,inlist:MUST_USE_ATTRIBUTE,prefix:MUST_USE_ATTRIBUTE,property:MUST_USE_ATTRIBUTE,resource:MUST_USE_ATTRIBUTE,typeof:MUST_USE_ATTRIBUTE,vocab:MUST_USE_ATTRIBUTE,autoCapitalize:null,autoCorrect:null,autoSave:null,color:null,itemProp:MUST_USE_ATTRIBUTE,itemScope:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,itemType:MUST_USE_ATTRIBUTE,itemID:MUST_USE_ATTRIBUTE,itemRef:MUST_USE_ATTRIBUTE,results:null,security:MUST_USE_ATTRIBUTE,unselectable:MUST_USE_ATTRIBUTE},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};module.exports=HTMLDOMPropertyConfig},{10:10,130:130}],22:[function(_dereq_,module,exports){"use strict";function _assertSingleLink(inputProps){null!=inputProps.checkedLink&&null!=inputProps.valueLink?invariant(!1,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa."):void 0}function _assertValueLink(inputProps){_assertSingleLink(inputProps),null!=inputProps.value||null!=inputProps.onChange?invariant(!1,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink."):void 0}function _assertCheckedLink(inputProps){_assertSingleLink(inputProps),null!=inputProps.checked||null!=inputProps.onChange?invariant(!1,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink"):void 0}function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name)return" Check the render method of `"+name+"`."}return""}var ReactPropTypes=_dereq_(74),ReactPropTypeLocations=_dereq_(73),invariant=_dereq_(144),warning=_dereq_(155),hasReadOnlyValue={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},propTypes={value:function(props,propName,componentName){return!props[propName]||hasReadOnlyValue[props.type]||props.onChange||props.readOnly||props.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(props,propName,componentName){return!props[propName]||props.onChange||props.readOnly||props.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:ReactPropTypes.func},loggedTypeFailures={},LinkedValueUtils={checkPropTypes:function(tagName,props,owner){for(var propName in propTypes){if(propTypes.hasOwnProperty(propName))var error=propTypes[propName](props,propName,tagName,ReactPropTypeLocations.prop);if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=!0;var addendum=getDeclarationErrorAddendum(owner);warning(!1,"Failed form propType: %s%s",error.message,addendum)}}},getValue:function(inputProps){return inputProps.valueLink?(_assertValueLink(inputProps),inputProps.valueLink.value):inputProps.value},getChecked:function(inputProps){return inputProps.checkedLink?(_assertCheckedLink(inputProps),inputProps.checkedLink.value):inputProps.checked},executeOnChange:function(inputProps,event){return inputProps.valueLink?(_assertValueLink(inputProps),inputProps.valueLink.requestChange(event.target.value)):inputProps.checkedLink?(_assertCheckedLink(inputProps),inputProps.checkedLink.requestChange(event.target.checked)):inputProps.onChange?inputProps.onChange.call(void 0,event):void 0}};module.exports=LinkedValueUtils},{144:144,155:155,73:73,74:74}],23:[function(_dereq_,module,exports){"use strict";function assign(target,sources){if(null==target)throw new TypeError("Object.assign target cannot be null or undefined");for(var to=Object(target),hasOwnProperty=Object.prototype.hasOwnProperty,nextIndex=1;nextIndex<arguments.length;nextIndex++){var nextSource=arguments[nextIndex];if(null!=nextSource){var from=Object(nextSource);for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key])}}return to}module.exports=assign},{}],24:[function(_dereq_,module,exports){"use strict";var invariant=_dereq_(144),oneArgumentPooler=function(copyFieldsFrom){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,copyFieldsFrom),instance}return new Klass(copyFieldsFrom)},twoArgumentPooler=function(a1,a2){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2),instance}return new Klass(a1,a2)},threeArgumentPooler=function(a1,a2,a3){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3),instance}return new Klass(a1,a2,a3)},fourArgumentPooler=function(a1,a2,a3,a4){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3,a4),instance}return new Klass(a1,a2,a3,a4)},fiveArgumentPooler=function(a1,a2,a3,a4,a5){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3,a4,a5),instance}return new Klass(a1,a2,a3,a4,a5)},standardReleaser=function(instance){var Klass=this;instance instanceof Klass?void 0:invariant(!1,"Trying to release an instance into a pool of a different type."),instance.destructor(),Klass.instancePool.length<Klass.poolSize&&Klass.instancePool.push(instance)},DEFAULT_POOL_SIZE=10,DEFAULT_POOLER=oneArgumentPooler,addPoolingTo=function(CopyConstructor,pooler){var NewKlass=CopyConstructor;return NewKlass.instancePool=[],NewKlass.getPooled=pooler||DEFAULT_POOLER,NewKlass.poolSize||(NewKlass.poolSize=DEFAULT_POOL_SIZE),NewKlass.release=standardReleaser,NewKlass},PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler,fiveArgumentPooler:fiveArgumentPooler};module.exports=PooledClass},{144:144}],25:[function(_dereq_,module,exports){"use strict";var ReactInstanceMap=_dereq_(62),findDOMNode=_dereq_(108),warning=_dereq_(155),didWarnKey="_getDOMNodeDidWarn",ReactBrowserComponentMixin={getDOMNode:function(){return warning(this.constructor[didWarnKey],"%s.getDOMNode(...) is deprecated. Please use ReactDOM.findDOMNode(instance) instead.",ReactInstanceMap.get(this).getName()||this.tagName||"Unknown"),this.constructor[didWarnKey]=!0,findDOMNode(this)}};module.exports=ReactBrowserComponentMixin},{108:108,155:155,62:62}],26:[function(_dereq_,module,exports){"use strict";function getListeningForDocument(mountAt){return Object.prototype.hasOwnProperty.call(mountAt,topListenersIDKey)||(mountAt[topListenersIDKey]=reactTopListenersCounter++,alreadyListeningTo[mountAt[topListenersIDKey]]={}),alreadyListeningTo[mountAt[topListenersIDKey]]}var EventConstants=_dereq_(15),EventPluginHub=_dereq_(16),EventPluginRegistry=_dereq_(17),ReactEventEmitterMixin=_dereq_(57),ReactPerf=_dereq_(71),ViewportMetrics=_dereq_(101),assign=_dereq_(23),isEventSupported=_dereq_(119),alreadyListeningTo={},isMonitoringScrollValue=!1,reactTopListenersCounter=0,topEventMapping={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},topListenersIDKey="_reactListenersID"+String(Math.random()).slice(2),ReactBrowserEventEmitter=assign({},ReactEventEmitterMixin,{ReactEventListener:null,injection:{injectReactEventListener:function(ReactEventListener){ReactEventListener.setHandleTopLevel(ReactBrowserEventEmitter.handleTopLevel),ReactBrowserEventEmitter.ReactEventListener=ReactEventListener}},setEnabled:function(enabled){ReactBrowserEventEmitter.ReactEventListener&&ReactBrowserEventEmitter.ReactEventListener.setEnabled(enabled)},isEnabled:function(){return!(!ReactBrowserEventEmitter.ReactEventListener||!ReactBrowserEventEmitter.ReactEventListener.isEnabled())},listenTo:function(registrationName,contentDocumentHandle){for(var mountAt=contentDocumentHandle,isListening=getListeningForDocument(mountAt),dependencies=EventPluginRegistry.registrationNameDependencies[registrationName],topLevelTypes=EventConstants.topLevelTypes,i=0;i<dependencies.length;i++){var dependency=dependencies[i];isListening.hasOwnProperty(dependency)&&isListening[dependency]||(dependency===topLevelTypes.topWheel?isEventSupported("wheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topWheel,"wheel",mountAt):isEventSupported("mousewheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topWheel,"mousewheel",mountAt):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topWheel,"DOMMouseScroll",mountAt):dependency===topLevelTypes.topScroll?isEventSupported("scroll",!0)?ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelTypes.topScroll,"scroll",mountAt):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topScroll,"scroll",ReactBrowserEventEmitter.ReactEventListener.WINDOW_HANDLE):dependency===topLevelTypes.topFocus||dependency===topLevelTypes.topBlur?(isEventSupported("focus",!0)?(ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelTypes.topFocus,"focus",mountAt),ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelTypes.topBlur,"blur",mountAt)):isEventSupported("focusin")&&(ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topFocus,"focusin",mountAt),ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topBlur,"focusout",mountAt)),isListening[topLevelTypes.topBlur]=!0,isListening[topLevelTypes.topFocus]=!0):topEventMapping.hasOwnProperty(dependency)&&ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(dependency,topEventMapping[dependency],mountAt),isListening[dependency]=!0)}},trapBubbledEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelType,handlerBaseName,handle)},trapCapturedEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelType,handlerBaseName,handle)},ensureScrollValueMonitoring:function(){if(!isMonitoringScrollValue){var refresh=ViewportMetrics.refreshScrollValues;ReactBrowserEventEmitter.ReactEventListener.monitorScrollValue(refresh),isMonitoringScrollValue=!0}},eventNameDispatchConfigs:EventPluginHub.eventNameDispatchConfigs,registrationNameModules:EventPluginHub.registrationNameModules,putListener:EventPluginHub.putListener,getListener:EventPluginHub.getListener,deleteListener:EventPluginHub.deleteListener,deleteAllListeners:EventPluginHub.deleteAllListeners});ReactPerf.measureMethods(ReactBrowserEventEmitter,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),module.exports=ReactBrowserEventEmitter},{101:101,119:119,15:15,16:16,17:17,23:23,57:57,71:71}],27:[function(_dereq_,module,exports){"use strict";function instantiateChild(childInstances,child,name){var keyUnique=void 0===childInstances[name];warning(keyUnique,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",name),null!=child&&keyUnique&&(childInstances[name]=instantiateReactComponent(child,null))}var ReactReconciler=_dereq_(76),instantiateReactComponent=_dereq_(118),shouldUpdateReactComponent=_dereq_(126),traverseAllChildren=_dereq_(127),warning=_dereq_(155),ReactChildReconciler={instantiateChildren:function(nestedChildNodes,transaction,context){if(null==nestedChildNodes)return null;var childInstances={};return traverseAllChildren(nestedChildNodes,instantiateChild,childInstances),childInstances},updateChildren:function(prevChildren,nextChildren,transaction,context){if(!nextChildren&&!prevChildren)return null;var name;for(name in nextChildren)if(nextChildren.hasOwnProperty(name)){var prevChild=prevChildren&&prevChildren[name],prevElement=prevChild&&prevChild._currentElement,nextElement=nextChildren[name];if(null!=prevChild&&shouldUpdateReactComponent(prevElement,nextElement))ReactReconciler.receiveComponent(prevChild,nextElement,transaction,context),nextChildren[name]=prevChild;else{prevChild&&ReactReconciler.unmountComponent(prevChild,name);var nextChildInstance=instantiateReactComponent(nextElement,null);nextChildren[name]=nextChildInstance}}for(name in prevChildren)!prevChildren.hasOwnProperty(name)||nextChildren&&nextChildren.hasOwnProperty(name)||ReactReconciler.unmountComponent(prevChildren[name]);return nextChildren},unmountChildren:function(renderedChildren){for(var name in renderedChildren)if(renderedChildren.hasOwnProperty(name)){var renderedChild=renderedChildren[name];ReactReconciler.unmountComponent(renderedChild)}}};module.exports=ReactChildReconciler},{118:118,126:126,127:127,155:155,76:76}],28:[function(_dereq_,module,exports){"use strict";function escapeUserProvidedKey(text){return(""+text).replace(userProvidedKeyEscapeRegex,"//")}function ForEachBookKeeping(forEachFunction,forEachContext){this.func=forEachFunction,this.context=forEachContext,this.count=0}function forEachSingleChild(bookKeeping,child,name){var func=bookKeeping.func,context=bookKeeping.context;func.call(context,child,bookKeeping.count++)}function forEachChildren(children,forEachFunc,forEachContext){if(null==children)return children;var traverseContext=ForEachBookKeeping.getPooled(forEachFunc,forEachContext);traverseAllChildren(children,forEachSingleChild,traverseContext),ForEachBookKeeping.release(traverseContext)}function MapBookKeeping(mapResult,keyPrefix,mapFunction,mapContext){this.result=mapResult,this.keyPrefix=keyPrefix,this.func=mapFunction,this.context=mapContext,this.count=0}function mapSingleChildIntoContext(bookKeeping,child,childKey){var result=bookKeeping.result,keyPrefix=bookKeeping.keyPrefix,func=bookKeeping.func,context=bookKeeping.context,mappedChild=func.call(context,child,bookKeeping.count++);Array.isArray(mappedChild)?mapIntoWithKeyPrefixInternal(mappedChild,result,childKey,emptyFunction.thatReturnsArgument):null!=mappedChild&&(ReactElement.isValidElement(mappedChild)&&(mappedChild=ReactElement.cloneAndReplaceKey(mappedChild,keyPrefix+(mappedChild!==child?escapeUserProvidedKey(mappedChild.key||"")+"/":"")+childKey)),result.push(mappedChild))}function mapIntoWithKeyPrefixInternal(children,array,prefix,func,context){var escapedPrefix="";null!=prefix&&(escapedPrefix=escapeUserProvidedKey(prefix)+"/");var traverseContext=MapBookKeeping.getPooled(array,escapedPrefix,func,context);traverseAllChildren(children,mapSingleChildIntoContext,traverseContext),MapBookKeeping.release(traverseContext)}function mapChildren(children,func,context){if(null==children)return children;var result=[];return mapIntoWithKeyPrefixInternal(children,result,null,func,context),result}function forEachSingleChildDummy(traverseContext,child,name){return null}function countChildren(children,context){return traverseAllChildren(children,forEachSingleChildDummy,null)}function toArray(children){var result=[];return mapIntoWithKeyPrefixInternal(children,result,null,emptyFunction.thatReturnsArgument),result}var PooledClass=_dereq_(24),ReactElement=_dereq_(52),emptyFunction=_dereq_(136),traverseAllChildren=_dereq_(127),twoArgumentPooler=PooledClass.twoArgumentPooler,fourArgumentPooler=PooledClass.fourArgumentPooler,userProvidedKeyEscapeRegex=/\/(?!\/)/g;ForEachBookKeeping.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler),MapBookKeeping.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren},{127:127,136:136,24:24,52:52}],29:[function(_dereq_,module,exports){"use strict";function warnSetProps(){warnedSetProps||(warnedSetProps=!0,warning(!1,"setProps(...) and replaceProps(...) are deprecated. Instead, call render again at the top level."))}function validateTypeDef(Constructor,typeDef,location){for(var propName in typeDef)typeDef.hasOwnProperty(propName)&&warning("function"==typeof typeDef[propName],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",Constructor.displayName||"ReactClass",ReactPropTypeLocationNames[location],propName)}function validateMethodOverride(proto,name){var specPolicy=ReactClassInterface.hasOwnProperty(name)?ReactClassInterface[name]:null;ReactClassMixin.hasOwnProperty(name)&&(specPolicy!==SpecPolicy.OVERRIDE_BASE?invariant(!1,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",name):void 0),proto.hasOwnProperty(name)&&(specPolicy!==SpecPolicy.DEFINE_MANY&&specPolicy!==SpecPolicy.DEFINE_MANY_MERGED?invariant(!1,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",name):void 0)}function mixSpecIntoComponent(Constructor,spec){if(spec){"function"==typeof spec?invariant(!1,"ReactClass: You're attempting to use a component class as a mixin. Instead, just use a regular object."):void 0,ReactElement.isValidElement(spec)?invariant(!1,"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object."):void 0;var proto=Constructor.prototype;spec.hasOwnProperty(MIXINS_KEY)&&RESERVED_SPEC_KEYS.mixins(Constructor,spec.mixins);for(var name in spec)if(spec.hasOwnProperty(name)&&name!==MIXINS_KEY){var property=spec[name];if(validateMethodOverride(proto,name),RESERVED_SPEC_KEYS.hasOwnProperty(name))RESERVED_SPEC_KEYS[name](Constructor,property);else{var isReactClassMethod=ReactClassInterface.hasOwnProperty(name),isAlreadyDefined=proto.hasOwnProperty(name),isFunction="function"==typeof property,shouldAutoBind=isFunction&&!isReactClassMethod&&!isAlreadyDefined&&spec.autobind!==!1;if(shouldAutoBind)proto.__reactAutoBindMap||(proto.__reactAutoBindMap={}),proto.__reactAutoBindMap[name]=property,proto[name]=property;else if(isAlreadyDefined){var specPolicy=ReactClassInterface[name];!isReactClassMethod||specPolicy!==SpecPolicy.DEFINE_MANY_MERGED&&specPolicy!==SpecPolicy.DEFINE_MANY?invariant(!1,"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",specPolicy,name):void 0,specPolicy===SpecPolicy.DEFINE_MANY_MERGED?proto[name]=createMergedResultFunction(proto[name],property):specPolicy===SpecPolicy.DEFINE_MANY&&(proto[name]=createChainedFunction(proto[name],property))}else proto[name]=property,"function"==typeof property&&spec.displayName&&(proto[name].displayName=spec.displayName+"_"+name)}}}}function mixStaticSpecIntoComponent(Constructor,statics){if(statics)for(var name in statics){var property=statics[name];if(statics.hasOwnProperty(name)){var isReserved=name in RESERVED_SPEC_KEYS;isReserved?invariant(!1,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',name):void 0;var isInherited=name in Constructor;isInherited?invariant(!1,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",name):void 0,Constructor[name]=property}}}function mergeIntoWithNoDuplicateKeys(one,two){one&&two&&"object"==typeof one&&"object"==typeof two?void 0:invariant(!1,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var key in two)two.hasOwnProperty(key)&&(void 0!==one[key]?invariant(!1,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",key):void 0,one[key]=two[key]);return one}function createMergedResultFunction(one,two){return function(){var a=one.apply(this,arguments),b=two.apply(this,arguments);if(null==a)return b;if(null==b)return a;var c={};return mergeIntoWithNoDuplicateKeys(c,a),mergeIntoWithNoDuplicateKeys(c,b),c}}function createChainedFunction(one,two){return function(){one.apply(this,arguments),two.apply(this,arguments)}}function bindAutoBindMethod(component,method){var boundMethod=method.bind(component);boundMethod.__reactBoundContext=component,boundMethod.__reactBoundMethod=method,boundMethod.__reactBoundArguments=null;var componentName=component.constructor.displayName,_bind=boundMethod.bind;return boundMethod.bind=function(newThis){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];if(newThis!==component&&null!==newThis)warning(!1,"bind(): React component methods may only be bound to the component instance. See %s",componentName);else if(!args.length)return warning(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",componentName),boundMethod;var reboundMethod=_bind.apply(boundMethod,arguments);return reboundMethod.__reactBoundContext=component,reboundMethod.__reactBoundMethod=method,reboundMethod.__reactBoundArguments=args,reboundMethod},boundMethod}function bindAutoBindMethods(component){for(var autoBindKey in component.__reactAutoBindMap)if(component.__reactAutoBindMap.hasOwnProperty(autoBindKey)){var method=component.__reactAutoBindMap[autoBindKey];component[autoBindKey]=bindAutoBindMethod(component,method)}}var ReactComponent=_dereq_(30),ReactElement=_dereq_(52),ReactPropTypeLocations=_dereq_(73),ReactPropTypeLocationNames=_dereq_(72),ReactNoopUpdateQueue=_dereq_(69),assign=_dereq_(23),emptyObject=_dereq_(137),invariant=_dereq_(144),keyMirror=_dereq_(147),keyOf=_dereq_(148),warning=_dereq_(155),MIXINS_KEY=keyOf({mixins:null}),SpecPolicy=keyMirror({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),injectedMixins=[],warnedSetProps=!1,ReactClassInterface={mixins:SpecPolicy.DEFINE_MANY,statics:SpecPolicy.DEFINE_MANY,propTypes:SpecPolicy.DEFINE_MANY,contextTypes:SpecPolicy.DEFINE_MANY,childContextTypes:SpecPolicy.DEFINE_MANY,getDefaultProps:SpecPolicy.DEFINE_MANY_MERGED,getInitialState:SpecPolicy.DEFINE_MANY_MERGED,getChildContext:SpecPolicy.DEFINE_MANY_MERGED,render:SpecPolicy.DEFINE_ONCE,componentWillMount:SpecPolicy.DEFINE_MANY,componentDidMount:SpecPolicy.DEFINE_MANY,componentWillReceiveProps:SpecPolicy.DEFINE_MANY,shouldComponentUpdate:SpecPolicy.DEFINE_ONCE,componentWillUpdate:SpecPolicy.DEFINE_MANY,componentDidUpdate:SpecPolicy.DEFINE_MANY,componentWillUnmount:SpecPolicy.DEFINE_MANY,updateComponent:SpecPolicy.OVERRIDE_BASE},RESERVED_SPEC_KEYS={displayName:function(Constructor,displayName){Constructor.displayName=displayName},mixins:function(Constructor,mixins){if(mixins)for(var i=0;i<mixins.length;i++)mixSpecIntoComponent(Constructor,mixins[i])},childContextTypes:function(Constructor,childContextTypes){validateTypeDef(Constructor,childContextTypes,ReactPropTypeLocations.childContext),Constructor.childContextTypes=assign({},Constructor.childContextTypes,childContextTypes)},contextTypes:function(Constructor,contextTypes){validateTypeDef(Constructor,contextTypes,ReactPropTypeLocations.context),Constructor.contextTypes=assign({},Constructor.contextTypes,contextTypes)},getDefaultProps:function(Constructor,getDefaultProps){Constructor.getDefaultProps?Constructor.getDefaultProps=createMergedResultFunction(Constructor.getDefaultProps,getDefaultProps):Constructor.getDefaultProps=getDefaultProps},propTypes:function(Constructor,propTypes){validateTypeDef(Constructor,propTypes,ReactPropTypeLocations.prop),Constructor.propTypes=assign({},Constructor.propTypes,propTypes)},statics:function(Constructor,statics){mixStaticSpecIntoComponent(Constructor,statics)},autobind:function(){}},ReactClassMixin={replaceState:function(newState,callback){this.updater.enqueueReplaceState(this,newState),callback&&this.updater.enqueueCallback(this,callback)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(partialProps,callback){warnSetProps(),this.updater.enqueueSetProps(this,partialProps),callback&&this.updater.enqueueCallback(this,callback)},replaceProps:function(newProps,callback){warnSetProps(),this.updater.enqueueReplaceProps(this,newProps),callback&&this.updater.enqueueCallback(this,callback)}},ReactClassComponent=function(){};assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);var ReactClass={createClass:function(spec){var Constructor=function(props,context,updater){warning(this instanceof Constructor,"Something is calling a React component directly. Use a factory or JSX instead. See: https://fb.me/react-legacyfactory"),this.__reactAutoBindMap&&bindAutoBindMethods(this),this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue,this.state=null;var initialState=this.getInitialState?this.getInitialState():null;"undefined"==typeof initialState&&this.getInitialState._isMockFunction&&(initialState=null),"object"!=typeof initialState||Array.isArray(initialState)?invariant(!1,"%s.getInitialState(): must return an object or null",Constructor.displayName||"ReactCompositeComponent"):void 0,this.state=initialState};Constructor.prototype=new ReactClassComponent,Constructor.prototype.constructor=Constructor,injectedMixins.forEach(mixSpecIntoComponent.bind(null,Constructor)),mixSpecIntoComponent(Constructor,spec),Constructor.getDefaultProps&&(Constructor.defaultProps=Constructor.getDefaultProps()),Constructor.getDefaultProps&&(Constructor.getDefaultProps.isReactClassApproved={}),Constructor.prototype.getInitialState&&(Constructor.prototype.getInitialState.isReactClassApproved={}),Constructor.prototype.render?void 0:invariant(!1,"createClass(...): Class specification must implement a `render` method."),warning(!Constructor.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",spec.displayName||"A component"),warning(!Constructor.prototype.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",spec.displayName||"A component");for(var methodName in ReactClassInterface)Constructor.prototype[methodName]||(Constructor.prototype[methodName]=null);return Constructor},injection:{injectMixin:function(mixin){injectedMixins.push(mixin)}}};module.exports=ReactClass},{137:137,144:144,147:147,148:148,155:155,23:23,30:30,52:52,69:69,72:72,73:73}],30:[function(_dereq_,module,exports){"use strict";function ReactComponent(props,context,updater){this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue}var ReactNoopUpdateQueue=_dereq_(69),canDefineProperty=_dereq_(104),emptyObject=_dereq_(137),invariant=_dereq_(144),warning=_dereq_(155);ReactComponent.prototype.isReactComponent={},ReactComponent.prototype.setState=function(partialState,callback){"object"!=typeof partialState&&"function"!=typeof partialState&&null!=partialState?invariant(!1,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."):void 0,warning(null!=partialState,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."),this.updater.enqueueSetState(this,partialState),callback&&this.updater.enqueueCallback(this,callback)},ReactComponent.prototype.forceUpdate=function(callback){this.updater.enqueueForceUpdate(this),callback&&this.updater.enqueueCallback(this,callback)};var deprecatedAPIs={getDOMNode:["getDOMNode","Use ReactDOM.findDOMNode(component) instead."],isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceProps:["replaceProps","Instead, call render again at the top level."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."],setProps:["setProps","Instead, call render again at the top level."]},defineDeprecationWarning=function(methodName,info){canDefineProperty&&Object.defineProperty(ReactComponent.prototype,methodName,{get:function(){warning(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",info[0],info[1])}})};for(var fnName in deprecatedAPIs)deprecatedAPIs.hasOwnProperty(fnName)&&defineDeprecationWarning(fnName,deprecatedAPIs[fnName]);module.exports=ReactComponent},{104:104,137:137,144:144,155:155,69:69}],31:[function(_dereq_,module,exports){"use strict";var ReactDOMIDOperations=_dereq_(40),ReactMount=_dereq_(65),ReactComponentBrowserEnvironment={processChildrenUpdates:ReactDOMIDOperations.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:ReactDOMIDOperations.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(rootNodeID){ReactMount.purgeID(rootNodeID)}};module.exports=ReactComponentBrowserEnvironment},{40:40,65:65}],32:[function(_dereq_,module,exports){"use strict";var invariant=_dereq_(144),injected=!1,ReactComponentEnvironment={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(environment){injected?invariant(!1,"ReactCompositeComponent: injectEnvironment() can only be called once."):void 0,ReactComponentEnvironment.unmountIDFromEnvironment=environment.unmountIDFromEnvironment,ReactComponentEnvironment.replaceNodeWithMarkupByID=environment.replaceNodeWithMarkupByID,ReactComponentEnvironment.processChildrenUpdates=environment.processChildrenUpdates,injected=!0}}};module.exports=ReactComponentEnvironment},{144:144}],33:[function(_dereq_,module,exports){"use strict";function getDeclarationErrorAddendum(component){var owner=component._currentElement._owner||null;if(owner){var name=owner.getName();if(name)return" Check the render method of `"+name+"`."}return""}function StatelessComponent(Component){}var ReactComponentEnvironment=_dereq_(32),ReactCurrentOwner=_dereq_(34),ReactElement=_dereq_(52),ReactInstanceMap=_dereq_(62),ReactPerf=_dereq_(71),ReactPropTypeLocations=_dereq_(73),ReactPropTypeLocationNames=_dereq_(72),ReactReconciler=_dereq_(76),ReactUpdateQueue=_dereq_(82),assign=_dereq_(23),emptyObject=_dereq_(137),invariant=_dereq_(144),shouldUpdateReactComponent=_dereq_(126),warning=_dereq_(155);StatelessComponent.prototype.render=function(){var Component=ReactInstanceMap.get(this)._currentElement.type;return Component(this.props,this.context,this.updater)};var nextMountID=1,ReactCompositeComponentMixin={construct:function(element){this._currentElement=element,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(rootID,transaction,context){this._context=context,this._mountOrder=nextMountID++,this._rootNodeID=rootID;var inst,renderedElement,publicProps=this._processProps(this._currentElement.props),publicContext=this._processContext(context),Component=this._currentElement.type,canInstantiate="prototype"in Component;if(canInstantiate){ReactCurrentOwner.current=this;try{inst=new Component(publicProps,publicContext,ReactUpdateQueue)}finally{ReactCurrentOwner.current=null}}canInstantiate&&null!==inst&&inst!==!1&&!ReactElement.isValidElement(inst)||(renderedElement=inst,inst=new StatelessComponent(Component)),null==inst.render?warning(!1,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`, returned null/false from a stateless component, or tried to render an element whose type is a function that isn't a React component.",Component.displayName||Component.name||"Component"):warning(Component.prototype&&Component.prototype.isReactComponent||!canInstantiate||!(inst instanceof Component),"%s(...): React component classes must extend React.Component.",Component.displayName||Component.name||"Component"),inst.props=publicProps,inst.context=publicContext,inst.refs=emptyObject,inst.updater=ReactUpdateQueue,this._instance=inst,ReactInstanceMap.set(inst,this),warning(!inst.getInitialState||inst.getInitialState.isReactClassApproved,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",this.getName()||"a component"),warning(!inst.getDefaultProps||inst.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",this.getName()||"a component"),warning(!inst.propTypes,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",this.getName()||"a component"),warning(!inst.contextTypes,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",this.getName()||"a component"),warning("function"!=typeof inst.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",this.getName()||"A component"),warning("function"!=typeof inst.componentDidUnmount,"%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",this.getName()||"A component"),warning("function"!=typeof inst.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",this.getName()||"A component");var initialState=inst.state;void 0===initialState&&(inst.state=initialState=null),"object"!=typeof initialState||Array.isArray(initialState)?invariant(!1,"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,inst.componentWillMount&&(inst.componentWillMount(),this._pendingStateQueue&&(inst.state=this._processPendingState(inst.props,inst.context))),void 0===renderedElement&&(renderedElement=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(renderedElement);var markup=ReactReconciler.mountComponent(this._renderedComponent,rootID,transaction,this._processChildContext(context));return inst.componentDidMount&&transaction.getReactMountReady().enqueue(inst.componentDidMount,inst),markup},unmountComponent:function(){var inst=this._instance;inst.componentWillUnmount&&inst.componentWillUnmount(),ReactReconciler.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,ReactInstanceMap.remove(inst)},_maskContext:function(context){var maskedContext=null,Component=this._currentElement.type,contextTypes=Component.contextTypes;if(!contextTypes)return emptyObject;maskedContext={};for(var contextName in contextTypes)maskedContext[contextName]=context[contextName];return maskedContext},_processContext:function(context){var maskedContext=this._maskContext(context),Component=this._currentElement.type;return Component.contextTypes&&this._checkPropTypes(Component.contextTypes,maskedContext,ReactPropTypeLocations.context),maskedContext},_processChildContext:function(currentContext){var Component=this._currentElement.type,inst=this._instance,childContext=inst.getChildContext&&inst.getChildContext();if(childContext){"object"!=typeof Component.childContextTypes?invariant(!1,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"):void 0,this._checkPropTypes(Component.childContextTypes,childContext,ReactPropTypeLocations.childContext);for(var name in childContext)name in Component.childContextTypes?void 0:invariant(!1,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",name);return assign({},currentContext,childContext)}return currentContext},_processProps:function(newProps){var Component=this._currentElement.type;return Component.propTypes&&this._checkPropTypes(Component.propTypes,newProps,ReactPropTypeLocations.prop),newProps},_checkPropTypes:function(propTypes,props,location){var componentName=this.getName();for(var propName in propTypes)if(propTypes.hasOwnProperty(propName)){var error;try{"function"!=typeof propTypes[propName]?invariant(!1,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",componentName||"React class",ReactPropTypeLocationNames[location],propName):void 0,error=propTypes[propName](props,propName,componentName,location)}catch(ex){error=ex}if(error instanceof Error){var addendum=getDeclarationErrorAddendum(this);location===ReactPropTypeLocations.prop?warning(!1,"Failed Composite propType: %s%s",error.message,addendum):warning(!1,"Failed Context Types: %s%s",error.message,addendum)}}},receiveComponent:function(nextElement,transaction,nextContext){var prevElement=this._currentElement,prevContext=this._context;this._pendingElement=null,this.updateComponent(transaction,prevElement,nextElement,prevContext,nextContext)},performUpdateIfNecessary:function(transaction){null!=this._pendingElement&&ReactReconciler.receiveComponent(this,this._pendingElement||this._currentElement,transaction,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(transaction,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(transaction,prevParentElement,nextParentElement,prevUnmaskedContext,nextUnmaskedContext){var nextProps,inst=this._instance,nextContext=this._context===nextUnmaskedContext?inst.context:this._processContext(nextUnmaskedContext);prevParentElement===nextParentElement?nextProps=nextParentElement.props:(nextProps=this._processProps(nextParentElement.props),inst.componentWillReceiveProps&&inst.componentWillReceiveProps(nextProps,nextContext));var nextState=this._processPendingState(nextProps,nextContext),shouldUpdate=this._pendingForceUpdate||!inst.shouldComponentUpdate||inst.shouldComponentUpdate(nextProps,nextState,nextContext);warning("undefined"!=typeof shouldUpdate,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"),shouldUpdate?(this._pendingForceUpdate=!1,this._performComponentUpdate(nextParentElement,nextProps,nextState,nextContext,transaction,nextUnmaskedContext)):(this._currentElement=nextParentElement,this._context=nextUnmaskedContext,inst.props=nextProps,inst.state=nextState,inst.context=nextContext)},_processPendingState:function(props,context){var inst=this._instance,queue=this._pendingStateQueue,replace=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!queue)return inst.state;if(replace&&1===queue.length)return queue[0];for(var nextState=assign({},replace?queue[0]:inst.state),i=replace?1:0;i<queue.length;i++){var partial=queue[i];assign(nextState,"function"==typeof partial?partial.call(inst,nextState,props,context):partial)}return nextState},_performComponentUpdate:function(nextElement,nextProps,nextState,nextContext,transaction,unmaskedContext){var prevProps,prevState,prevContext,inst=this._instance,hasComponentDidUpdate=Boolean(inst.componentDidUpdate);hasComponentDidUpdate&&(prevProps=inst.props,prevState=inst.state,prevContext=inst.context),inst.componentWillUpdate&&inst.componentWillUpdate(nextProps,nextState,nextContext),this._currentElement=nextElement,this._context=unmaskedContext,inst.props=nextProps,inst.state=nextState,inst.context=nextContext,this._updateRenderedComponent(transaction,unmaskedContext),hasComponentDidUpdate&&transaction.getReactMountReady().enqueue(inst.componentDidUpdate.bind(inst,prevProps,prevState,prevContext),inst)},_updateRenderedComponent:function(transaction,context){var prevComponentInstance=this._renderedComponent,prevRenderedElement=prevComponentInstance._currentElement,nextRenderedElement=this._renderValidatedComponent();if(shouldUpdateReactComponent(prevRenderedElement,nextRenderedElement))ReactReconciler.receiveComponent(prevComponentInstance,nextRenderedElement,transaction,this._processChildContext(context));else{var thisID=this._rootNodeID,prevComponentID=prevComponentInstance._rootNodeID;ReactReconciler.unmountComponent(prevComponentInstance),this._renderedComponent=this._instantiateReactComponent(nextRenderedElement);var nextMarkup=ReactReconciler.mountComponent(this._renderedComponent,thisID,transaction,this._processChildContext(context));this._replaceNodeWithMarkupByID(prevComponentID,nextMarkup)}},_replaceNodeWithMarkupByID:function(prevComponentID,nextMarkup){ReactComponentEnvironment.replaceNodeWithMarkupByID(prevComponentID,nextMarkup)},_renderValidatedComponentWithoutOwnerOrContext:function(){var inst=this._instance,renderedComponent=inst.render();return"undefined"==typeof renderedComponent&&inst.render._isMockFunction&&(renderedComponent=null),renderedComponent},_renderValidatedComponent:function(){var renderedComponent;ReactCurrentOwner.current=this;try{renderedComponent=this._renderValidatedComponentWithoutOwnerOrContext()}finally{ReactCurrentOwner.current=null}return null===renderedComponent||renderedComponent===!1||ReactElement.isValidElement(renderedComponent)?void 0:invariant(!1,"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"),renderedComponent},attachRef:function(ref,component){var inst=this.getPublicInstance();null==inst?invariant(!1,"Stateless function components cannot have refs."):void 0;var publicComponentInstance=component.getPublicInstance(),componentName=component&&component.getName?component.getName():"a component";warning(null!=publicComponentInstance,'Stateless function components cannot be given refs (See ref "%s" in %s created by %s). Attempts to access this ref will fail.',ref,componentName,this.getName());var refs=inst.refs===emptyObject?inst.refs={}:inst.refs;refs[ref]=publicComponentInstance},detachRef:function(ref){var refs=this.getPublicInstance().refs;delete refs[ref]},getName:function(){var type=this._currentElement.type,constructor=this._instance&&this._instance.constructor;return type.displayName||constructor&&constructor.displayName||type.name||constructor&&constructor.name||null},getPublicInstance:function(){var inst=this._instance;return inst instanceof StatelessComponent?null:inst},_instantiateReactComponent:null};ReactPerf.measureMethods(ReactCompositeComponentMixin,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var ReactCompositeComponent={Mixin:ReactCompositeComponentMixin};module.exports=ReactCompositeComponent},{126:126,137:137,144:144,155:155,23:23,32:32,34:34,52:52,62:62,71:71,72:72,73:73,76:76,82:82}],34:[function(_dereq_,module,exports){"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner},{}],35:[function(_dereq_,module,exports){"use strict";var ReactCurrentOwner=_dereq_(34),ReactDOMTextComponent=_dereq_(46),ReactDefaultInjection=_dereq_(49),ReactInstanceHandles=_dereq_(61),ReactMount=_dereq_(65),ReactPerf=_dereq_(71),ReactReconciler=_dereq_(76),ReactUpdates=_dereq_(83),ReactVersion=_dereq_(84),findDOMNode=_dereq_(108),renderSubtreeIntoContainer=_dereq_(123),warning=_dereq_(155);ReactDefaultInjection.inject();var render=ReactPerf.measure("React","render",ReactMount.render),React={findDOMNode:findDOMNode,render:render,unmountComponentAtNode:ReactMount.unmountComponentAtNode,version:ReactVersion,unstable_batchedUpdates:ReactUpdates.batchedUpdates,unstable_renderSubtreeIntoContainer:renderSubtreeIntoContainer};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:ReactCurrentOwner,InstanceHandles:ReactInstanceHandles,Mount:ReactMount,Reconciler:ReactReconciler,TextComponent:ReactDOMTextComponent});var ExecutionEnvironment=_dereq_(130);if(ExecutionEnvironment.canUseDOM&&window.top===window.self){"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)&&console.debug("Download the React DevTools for a better development experience: https://fb.me/react-devtools");var ieCompatibilityMode=document.documentMode&&document.documentMode<8;warning(!ieCompatibilityMode,'Internet Explorer is running in compatibility mode; please add the following tag to your HTML to prevent this from happening: <meta http-equiv="X-UA-Compatible" content="IE=edge" />');for(var expectedFeatures=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze],i=0;i<expectedFeatures.length;i++)if(!expectedFeatures[i]){console.error("One or more ES5 shim/shams expected by React are not available: https://fb.me/react-warning-polyfills");break}}module.exports=React},{108:108,123:123,130:130,155:155,34:34,46:46,49:49,61:61,65:65,71:71,76:76,83:83,84:84}],36:[function(_dereq_,module,exports){"use strict";var mouseListenerNames={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},ReactDOMButton={getNativeProps:function(inst,props,context){if(!props.disabled)return props;var nativeProps={};for(var key in props)props.hasOwnProperty(key)&&!mouseListenerNames[key]&&(nativeProps[key]=props[key]);return nativeProps}};module.exports=ReactDOMButton},{}],37:[function(_dereq_,module,exports){"use strict";function getDeclarationErrorAddendum(internalInstance){if(internalInstance){var owner=internalInstance._currentElement._owner||null;if(owner){var name=owner.getName();if(name)return" This DOM node was rendered by `"+name+"`."}}return""}function legacyGetDOMNode(){var component=this._reactInternalComponent;return warning(!1,"ReactDOMComponent: Do not access .getDOMNode() of a DOM node; instead, use the node directly.%s",getDeclarationErrorAddendum(component)),this}function legacyIsMounted(){var component=this._reactInternalComponent;return warning(!1,"ReactDOMComponent: Do not access .isMounted() of a DOM node.%s",getDeclarationErrorAddendum(component)),!!component}function legacySetStateEtc(){var component=this._reactInternalComponent;warning(!1,"ReactDOMComponent: Do not access .setState(), .replaceState(), or .forceUpdate() of a DOM node. This is a no-op.%s",getDeclarationErrorAddendum(component))}function legacySetProps(partialProps,callback){var component=this._reactInternalComponent;warning(!1,"ReactDOMComponent: Do not access .setProps() of a DOM node. Instead, call ReactDOM.render again at the top level.%s",getDeclarationErrorAddendum(component)),component&&(ReactUpdateQueue.enqueueSetPropsInternal(component,partialProps),callback&&ReactUpdateQueue.enqueueCallbackInternal(component,callback))}function legacyReplaceProps(partialProps,callback){var component=this._reactInternalComponent;warning(!1,"ReactDOMComponent: Do not access .replaceProps() of a DOM node. Instead, call ReactDOM.render again at the top level.%s",getDeclarationErrorAddendum(component)),component&&(ReactUpdateQueue.enqueueReplacePropsInternal(component,partialProps),callback&&ReactUpdateQueue.enqueueCallbackInternal(component,callback))}function friendlyStringify(obj){if("object"==typeof obj){if(Array.isArray(obj))return"["+obj.map(friendlyStringify).join(", ")+"]";var pairs=[];for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var keyEscaped=/^[a-z$_][\w$_]*$/i.test(key)?key:JSON.stringify(key);pairs.push(keyEscaped+": "+friendlyStringify(obj[key]))}return"{"+pairs.join(", ")+"}"}return"string"==typeof obj?JSON.stringify(obj):"function"==typeof obj?"[function object]":String(obj)}function checkAndWarnForMutatedStyle(style1,style2,component){if(null!=style1&&null!=style2&&!shallowEqual(style1,style2)){var ownerName,componentName=component._tag,owner=component._currentElement._owner;owner&&(ownerName=owner.getName());var hash=ownerName+"|"+componentName;styleMutationWarning.hasOwnProperty(hash)||(styleMutationWarning[hash]=!0,warning(!1,"`%s` was passed a style object that has previously been mutated. Mutating `style` is deprecated. Consider cloning it beforehand. Check the `render` %s. Previous style: %s. Mutated style: %s.",componentName,owner?"of `"+ownerName+"`":"using <"+componentName+">",friendlyStringify(style1),friendlyStringify(style2)))}}function assertValidProps(component,props){props&&(voidElementTags[component._tag]&&warning(null==props.children&&null==props.dangerouslySetInnerHTML,"%s is a void element tag and must not have `children` or use `props.dangerouslySetInnerHTML`.%s",component._tag,component._currentElement._owner?" Check the render method of "+component._currentElement._owner.getName()+".":""),null!=props.dangerouslySetInnerHTML&&(null!=props.children?invariant(!1,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):void 0,"object"==typeof props.dangerouslySetInnerHTML&&HTML in props.dangerouslySetInnerHTML?void 0:invariant(!1,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information.")),warning(null==props.innerHTML,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),warning(!props.contentEditable||null==props.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),null!=props.style&&"object"!=typeof props.style?invariant(!1,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.%s",getDeclarationErrorAddendum(component)):void 0)}function enqueuePutListener(id,registrationName,listener,transaction){warning("onScroll"!==registrationName||isEventSupported("scroll",!0),"This browser doesn't support the `onScroll` event");var container=ReactMount.findReactContainerForID(id);if(container){var doc=container.nodeType===ELEMENT_NODE_TYPE?container.ownerDocument:container;listenTo(registrationName,doc)}transaction.getReactMountReady().enqueue(putListener,{id:id,registrationName:registrationName,listener:listener})}function putListener(){var listenerToPut=this;ReactBrowserEventEmitter.putListener(listenerToPut.id,listenerToPut.registrationName,listenerToPut.listener)}function trapBubbledEventsLocal(){var inst=this;inst._rootNodeID?void 0:invariant(!1,"Must be mounted to trap events");var node=ReactMount.getNode(inst._rootNodeID);switch(node?void 0:invariant(!1,"trapBubbledEvent(...): Requires node to be rendered."),inst._tag){case"iframe":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",node)];break;case"video":case"audio":inst._wrapperState.listeners=[];for(var event in mediaEvents)mediaEvents.hasOwnProperty(event)&&inst._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes[event],mediaEvents[event],node));break;case"img":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topError,"error",node),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",node)];break;case"form":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topReset,"reset",node),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topSubmit,"submit",node)]}}function mountReadyInputWrapper(){ReactDOMInput.mountReadyWrapper(this)}function postUpdateSelectWrapper(){ReactDOMSelect.postUpdateWrapper(this)}function validateDangerousTag(tag){hasOwnProperty.call(validatedTagCache,tag)||(VALID_TAG_REGEX.test(tag)?void 0:invariant(!1,"Invalid tag: %s",tag),validatedTagCache[tag]=!0)}function processChildContextDev(context,inst){context=assign({},context);var info=context[validateDOMNesting.ancestorInfoContextKey];return context[validateDOMNesting.ancestorInfoContextKey]=validateDOMNesting.updatedAncestorInfo(info,inst._tag,inst),context}function isCustomComponent(tagName,props){return tagName.indexOf("-")>=0||null!=props.is}function ReactDOMComponent(tag){validateDangerousTag(tag),this._tag=tag.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null,this._unprocessedContextDev=null,this._processedContextDev=null}var legacyPropsDescriptor,AutoFocusUtils=_dereq_(2),CSSPropertyOperations=_dereq_(5),DOMProperty=_dereq_(10),DOMPropertyOperations=_dereq_(11),EventConstants=_dereq_(15),ReactBrowserEventEmitter=_dereq_(26),ReactComponentBrowserEnvironment=_dereq_(31),ReactDOMButton=_dereq_(36),ReactDOMInput=_dereq_(41),ReactDOMOption=_dereq_(42),ReactDOMSelect=_dereq_(43),ReactDOMTextarea=_dereq_(47),ReactMount=_dereq_(65),ReactMultiChild=_dereq_(66),ReactPerf=_dereq_(71),ReactUpdateQueue=_dereq_(82),assign=_dereq_(23),canDefineProperty=_dereq_(104),escapeTextContentForBrowser=_dereq_(107),invariant=_dereq_(144),isEventSupported=_dereq_(119),keyOf=_dereq_(148),setInnerHTML=_dereq_(124),setTextContent=_dereq_(125),shallowEqual=_dereq_(153),validateDOMNesting=_dereq_(128),warning=_dereq_(155),deleteListener=ReactBrowserEventEmitter.deleteListener,listenTo=ReactBrowserEventEmitter.listenTo,registrationNameModules=ReactBrowserEventEmitter.registrationNameModules,CONTENT_TYPES={string:!0,number:!0},CHILDREN=keyOf({children:null}),STYLE=keyOf({style:null}),HTML=keyOf({__html:null}),ELEMENT_NODE_TYPE=1;legacyPropsDescriptor={props:{enumerable:!1,get:function(){var component=this._reactInternalComponent;return warning(!1,"ReactDOMComponent: Do not access .props of a DOM node; instead, recreate the props as `render` did originally or read the DOM properties/attributes directly from this node (e.g., this.refs.box.className).%s",getDeclarationErrorAddendum(component)),component._currentElement.props}}};var styleMutationWarning={},mediaEvents={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},omittedCloseTags={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},newlineEatingTags={listing:!0,pre:!0,textarea:!0},voidElementTags=assign({menuitem:!0},omittedCloseTags),VALID_TAG_REGEX=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,validatedTagCache={},hasOwnProperty={}.hasOwnProperty;ReactDOMComponent.displayName="ReactDOMComponent",ReactDOMComponent.Mixin={construct:function(element){this._currentElement=element},mountComponent:function(rootID,transaction,context){this._rootNodeID=rootID;var props=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"button":props=ReactDOMButton.getNativeProps(this,props,context);break;case"input":ReactDOMInput.mountWrapper(this,props,context),props=ReactDOMInput.getNativeProps(this,props,context);break;case"option":ReactDOMOption.mountWrapper(this,props,context),props=ReactDOMOption.getNativeProps(this,props,context);break;case"select":ReactDOMSelect.mountWrapper(this,props,context),props=ReactDOMSelect.getNativeProps(this,props,context),context=ReactDOMSelect.processChildContext(this,props,context);break;case"textarea":ReactDOMTextarea.mountWrapper(this,props,context),props=ReactDOMTextarea.getNativeProps(this,props,context)}assertValidProps(this,props),context[validateDOMNesting.ancestorInfoContextKey]&&validateDOMNesting(this._tag,this,context[validateDOMNesting.ancestorInfoContextKey]),this._unprocessedContextDev=context,this._processedContextDev=processChildContextDev(context,this),context=this._processedContextDev;var mountImage;if(transaction.useCreateElement){var ownerDocument=context[ReactMount.ownerDocumentContextKey],el=ownerDocument.createElement(this._currentElement.type);DOMPropertyOperations.setAttributeForID(el,this._rootNodeID),ReactMount.getID(el),this._updateDOMProperties({},props,transaction,el),this._createInitialChildren(transaction,props,context,el),mountImage=el}else{var tagOpen=this._createOpenTagMarkupAndPutListeners(transaction,props),tagContent=this._createContentMarkup(transaction,props,context);mountImage=!tagContent&&omittedCloseTags[this._tag]?tagOpen+"/>":tagOpen+">"+tagContent+"</"+this._currentElement.type+">"}switch(this._tag){case"input":transaction.getReactMountReady().enqueue(mountReadyInputWrapper,this);case"button":case"select":case"textarea":props.autoFocus&&transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}return mountImage},_createOpenTagMarkupAndPutListeners:function(transaction,props){var ret="<"+this._currentElement.type;for(var propKey in props)if(props.hasOwnProperty(propKey)){var propValue=props[propKey];if(null!=propValue)if(registrationNameModules.hasOwnProperty(propKey))propValue&&enqueuePutListener(this._rootNodeID,propKey,propValue,transaction);else{propKey===STYLE&&(propValue&&(this._previousStyle=propValue,propValue=this._previousStyleCopy=assign({},props.style)),propValue=CSSPropertyOperations.createMarkupForStyles(propValue));var markup=null;null!=this._tag&&isCustomComponent(this._tag,props)?propKey!==CHILDREN&&(markup=DOMPropertyOperations.createMarkupForCustomAttribute(propKey,propValue)):markup=DOMPropertyOperations.createMarkupForProperty(propKey,propValue),markup&&(ret+=" "+markup)}}if(transaction.renderToStaticMarkup)return ret;var markupForID=DOMPropertyOperations.createMarkupForID(this._rootNodeID);return ret+" "+markupForID},_createContentMarkup:function(transaction,props,context){var ret="",innerHTML=props.dangerouslySetInnerHTML;if(null!=innerHTML)null!=innerHTML.__html&&(ret=innerHTML.__html);else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null,childrenToUse=null!=contentToUse?null:props.children;if(null!=contentToUse)ret=escapeTextContentForBrowser(contentToUse);else if(null!=childrenToUse){var mountImages=this.mountChildren(childrenToUse,transaction,context);ret=mountImages.join("")}}return newlineEatingTags[this._tag]&&"\n"===ret.charAt(0)?"\n"+ret:ret},_createInitialChildren:function(transaction,props,context,el){var innerHTML=props.dangerouslySetInnerHTML;if(null!=innerHTML)null!=innerHTML.__html&&setInnerHTML(el,innerHTML.__html);else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null,childrenToUse=null!=contentToUse?null:props.children;if(null!=contentToUse)setTextContent(el,contentToUse);else if(null!=childrenToUse)for(var mountImages=this.mountChildren(childrenToUse,transaction,context),i=0;i<mountImages.length;i++)el.appendChild(mountImages[i])}},receiveComponent:function(nextElement,transaction,context){var prevElement=this._currentElement;this._currentElement=nextElement,this.updateComponent(transaction,prevElement,nextElement,context)},updateComponent:function(transaction,prevElement,nextElement,context){var lastProps=prevElement.props,nextProps=this._currentElement.props;switch(this._tag){case"button":lastProps=ReactDOMButton.getNativeProps(this,lastProps),nextProps=ReactDOMButton.getNativeProps(this,nextProps);break;case"input":ReactDOMInput.updateWrapper(this),lastProps=ReactDOMInput.getNativeProps(this,lastProps),nextProps=ReactDOMInput.getNativeProps(this,nextProps);break;case"option":lastProps=ReactDOMOption.getNativeProps(this,lastProps),nextProps=ReactDOMOption.getNativeProps(this,nextProps);break;case"select":lastProps=ReactDOMSelect.getNativeProps(this,lastProps),nextProps=ReactDOMSelect.getNativeProps(this,nextProps);break;case"textarea":ReactDOMTextarea.updateWrapper(this),lastProps=ReactDOMTextarea.getNativeProps(this,lastProps),nextProps=ReactDOMTextarea.getNativeProps(this,nextProps)}this._unprocessedContextDev!==context&&(this._unprocessedContextDev=context,this._processedContextDev=processChildContextDev(context,this)),context=this._processedContextDev,assertValidProps(this,nextProps),this._updateDOMProperties(lastProps,nextProps,transaction,null),this._updateDOMChildren(lastProps,nextProps,transaction,context),!canDefineProperty&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=nextProps),"select"===this._tag&&transaction.getReactMountReady().enqueue(postUpdateSelectWrapper,this)},_updateDOMProperties:function(lastProps,nextProps,transaction,node){var propKey,styleName,styleUpdates;for(propKey in lastProps)if(!nextProps.hasOwnProperty(propKey)&&lastProps.hasOwnProperty(propKey))if(propKey===STYLE){var lastStyle=this._previousStyleCopy;for(styleName in lastStyle)lastStyle.hasOwnProperty(styleName)&&(styleUpdates=styleUpdates||{},styleUpdates[styleName]="");this._previousStyleCopy=null}else registrationNameModules.hasOwnProperty(propKey)?lastProps[propKey]&&deleteListener(this._rootNodeID,propKey):(DOMProperty.properties[propKey]||DOMProperty.isCustomAttribute(propKey))&&(node||(node=ReactMount.getNode(this._rootNodeID)),DOMPropertyOperations.deleteValueForProperty(node,propKey));for(propKey in nextProps){var nextProp=nextProps[propKey],lastProp=propKey===STYLE?this._previousStyleCopy:lastProps[propKey];if(nextProps.hasOwnProperty(propKey)&&nextProp!==lastProp)if(propKey===STYLE)if(nextProp?(checkAndWarnForMutatedStyle(this._previousStyleCopy,this._previousStyle,this),this._previousStyle=nextProp,nextProp=this._previousStyleCopy=assign({},nextProp)):this._previousStyleCopy=null,lastProp){for(styleName in lastProp)!lastProp.hasOwnProperty(styleName)||nextProp&&nextProp.hasOwnProperty(styleName)||(styleUpdates=styleUpdates||{},styleUpdates[styleName]="");for(styleName in nextProp)nextProp.hasOwnProperty(styleName)&&lastProp[styleName]!==nextProp[styleName]&&(styleUpdates=styleUpdates||{},styleUpdates[styleName]=nextProp[styleName])}else styleUpdates=nextProp;else registrationNameModules.hasOwnProperty(propKey)?nextProp?enqueuePutListener(this._rootNodeID,propKey,nextProp,transaction):lastProp&&deleteListener(this._rootNodeID,propKey):isCustomComponent(this._tag,nextProps)?(node||(node=ReactMount.getNode(this._rootNodeID)),propKey===CHILDREN&&(nextProp=null),DOMPropertyOperations.setValueForAttribute(node,propKey,nextProp)):(DOMProperty.properties[propKey]||DOMProperty.isCustomAttribute(propKey))&&(node||(node=ReactMount.getNode(this._rootNodeID)),null!=nextProp?DOMPropertyOperations.setValueForProperty(node,propKey,nextProp):DOMPropertyOperations.deleteValueForProperty(node,propKey))}styleUpdates&&(node||(node=ReactMount.getNode(this._rootNodeID)),CSSPropertyOperations.setValueForStyles(node,styleUpdates))},_updateDOMChildren:function(lastProps,nextProps,transaction,context){var lastContent=CONTENT_TYPES[typeof lastProps.children]?lastProps.children:null,nextContent=CONTENT_TYPES[typeof nextProps.children]?nextProps.children:null,lastHtml=lastProps.dangerouslySetInnerHTML&&lastProps.dangerouslySetInnerHTML.__html,nextHtml=nextProps.dangerouslySetInnerHTML&&nextProps.dangerouslySetInnerHTML.__html,lastChildren=null!=lastContent?null:lastProps.children,nextChildren=null!=nextContent?null:nextProps.children,lastHasContentOrHtml=null!=lastContent||null!=lastHtml,nextHasContentOrHtml=null!=nextContent||null!=nextHtml;null!=lastChildren&&null==nextChildren?this.updateChildren(null,transaction,context):lastHasContentOrHtml&&!nextHasContentOrHtml&&this.updateTextContent(""),null!=nextContent?lastContent!==nextContent&&this.updateTextContent(""+nextContent):null!=nextHtml?lastHtml!==nextHtml&&this.updateMarkup(""+nextHtml):null!=nextChildren&&this.updateChildren(nextChildren,transaction,context)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var listeners=this._wrapperState.listeners;if(listeners)for(var i=0;i<listeners.length;i++)listeners[i].remove();break;case"input":ReactDOMInput.unmountWrapper(this);break;case"html":case"head":case"body":invariant(!1,"<%s> tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this._tag)}if(this.unmountChildren(),ReactBrowserEventEmitter.deleteAllListeners(this._rootNodeID),ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){var node=this._nodeWithLegacyProperties;node._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var node=ReactMount.getNode(this._rootNodeID);node._reactInternalComponent=this,node.getDOMNode=legacyGetDOMNode,node.isMounted=legacyIsMounted,node.setState=legacySetStateEtc,node.replaceState=legacySetStateEtc,node.forceUpdate=legacySetStateEtc,node.setProps=legacySetProps,node.replaceProps=legacyReplaceProps,canDefineProperty?Object.defineProperties(node,legacyPropsDescriptor):node.props=this._currentElement.props,this._nodeWithLegacyProperties=node}return this._nodeWithLegacyProperties}},ReactPerf.measureMethods(ReactDOMComponent,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin),module.exports=ReactDOMComponent},{10:10,104:104,107:107,11:11,119:119,124:124,125:125,128:128,144:144,148:148,15:15,153:153,155:155,2:2,23:23,26:26,31:31,36:36,41:41,42:42,43:43,47:47,5:5,65:65,66:66,71:71,82:82}],38:[function(_dereq_,module,exports){"use strict";function createDOMFactory(tag){return ReactElementValidator.createFactory(tag)}var ReactElementValidator=(_dereq_(52),_dereq_(53)),mapObject=_dereq_(149),ReactDOMFactories=mapObject({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul",var:"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},createDOMFactory);module.exports=ReactDOMFactories},{149:149,52:52,53:53}],39:[function(_dereq_,module,exports){"use strict";var ReactDOMFeatureFlags={useCreateElement:!1};module.exports=ReactDOMFeatureFlags},{}],40:[function(_dereq_,module,exports){"use strict";var DOMChildrenOperations=_dereq_(9),DOMPropertyOperations=_dereq_(11),ReactMount=_dereq_(65),ReactPerf=_dereq_(71),invariant=_dereq_(144),INVALID_PROPERTY_ERRORS={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},ReactDOMIDOperations={updatePropertyByID:function(id,name,value){var node=ReactMount.getNode(id);INVALID_PROPERTY_ERRORS.hasOwnProperty(name)?invariant(!1,"updatePropertyByID(...): %s",INVALID_PROPERTY_ERRORS[name]):void 0,null!=value?DOMPropertyOperations.setValueForProperty(node,name,value):DOMPropertyOperations.deleteValueForProperty(node,name)},dangerouslyReplaceNodeWithMarkupByID:function(id,markup){var node=ReactMount.getNode(id);DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup(node,markup)},dangerouslyProcessChildrenUpdates:function(updates,markup){for(var i=0;i<updates.length;i++)updates[i].parentNode=ReactMount.getNode(updates[i].parentID);DOMChildrenOperations.processUpdates(updates,markup)}};ReactPerf.measureMethods(ReactDOMIDOperations,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),module.exports=ReactDOMIDOperations},{11:11,144:144,65:65,71:71,9:9}],41:[function(_dereq_,module,exports){"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMInput.updateWrapper(this)}function _handleChange(event){var props=this._currentElement.props,returnValue=LinkedValueUtils.executeOnChange(props,event);ReactUpdates.asap(forceUpdateIfMounted,this);var name=props.name;if("radio"===props.type&&null!=name){for(var rootNode=ReactMount.getNode(this._rootNodeID),queryRoot=rootNode;queryRoot.parentNode;)queryRoot=queryRoot.parentNode;for(var group=queryRoot.querySelectorAll("input[name="+JSON.stringify(""+name)+'][type="radio"]'),i=0;i<group.length;i++){var otherNode=group[i];if(otherNode!==rootNode&&otherNode.form===rootNode.form){var otherID=ReactMount.getID(otherNode);otherID?void 0:invariant(!1,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");var otherInstance=instancesByReactID[otherID];otherInstance?void 0:invariant(!1,"ReactDOMInput: Unknown radio button ID %s.",otherID),ReactUpdates.asap(forceUpdateIfMounted,otherInstance)}}}return returnValue}var ReactDOMIDOperations=_dereq_(40),LinkedValueUtils=_dereq_(22),ReactMount=_dereq_(65),ReactUpdates=_dereq_(83),assign=_dereq_(23),invariant=_dereq_(144),instancesByReactID={},ReactDOMInput={getNativeProps:function(inst,props,context){var value=LinkedValueUtils.getValue(props),checked=LinkedValueUtils.getChecked(props),nativeProps=assign({},props,{defaultChecked:void 0,defaultValue:void 0,value:null!=value?value:inst._wrapperState.initialValue,checked:null!=checked?checked:inst._wrapperState.initialChecked,onChange:inst._wrapperState.onChange});return nativeProps},mountWrapper:function(inst,props){LinkedValueUtils.checkPropTypes("input",props,inst._currentElement._owner);var defaultValue=props.defaultValue;inst._wrapperState={initialChecked:props.defaultChecked||!1,initialValue:null!=defaultValue?defaultValue:null,onChange:_handleChange.bind(inst)}},mountReadyWrapper:function(inst){instancesByReactID[inst._rootNodeID]=inst},unmountWrapper:function(inst){delete instancesByReactID[inst._rootNodeID]},updateWrapper:function(inst){var props=inst._currentElement.props,checked=props.checked;null!=checked&&ReactDOMIDOperations.updatePropertyByID(inst._rootNodeID,"checked",checked||!1);var value=LinkedValueUtils.getValue(props);null!=value&&ReactDOMIDOperations.updatePropertyByID(inst._rootNodeID,"value",""+value)}};module.exports=ReactDOMInput},{144:144,22:22,23:23,40:40,65:65,83:83}],42:[function(_dereq_,module,exports){"use strict";var ReactChildren=_dereq_(28),ReactDOMSelect=_dereq_(43),assign=_dereq_(23),warning=_dereq_(155),valueContextKey=ReactDOMSelect.valueContextKey,ReactDOMOption={mountWrapper:function(inst,props,context){warning(null==props.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.");var selectValue=context[valueContextKey],selected=null;if(null!=selectValue)if(selected=!1,Array.isArray(selectValue)){for(var i=0;i<selectValue.length;i++)if(""+selectValue[i]==""+props.value){selected=!0;break}}else selected=""+selectValue==""+props.value;inst._wrapperState={selected:selected}},getNativeProps:function(inst,props,context){var nativeProps=assign({selected:void 0,children:void 0},props);null!=inst._wrapperState.selected&&(nativeProps.selected=inst._wrapperState.selected);var content="";return ReactChildren.forEach(props.children,function(child){null!=child&&("string"==typeof child||"number"==typeof child?content+=child:warning(!1,"Only strings and numbers are supported as <option> children."))}),nativeProps.children=content,nativeProps}};module.exports=ReactDOMOption},{155:155,23:23,28:28,43:43}],43:[function(_dereq_,module,exports){"use strict";function updateOptionsIfPendingUpdateAndMounted(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var props=this._currentElement.props,value=LinkedValueUtils.getValue(props);null!=value&&updateOptions(this,props,value)}}function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name)return" Check the render method of `"+name+"`."}return""}function checkSelectPropTypes(inst,props){var owner=inst._currentElement._owner;LinkedValueUtils.checkPropTypes("select",props,owner);for(var i=0;i<valuePropNames.length;i++){var propName=valuePropNames[i];null!=props[propName]&&(props.multiple?warning(Array.isArray(props[propName]),"The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",propName,getDeclarationErrorAddendum(owner)):warning(!Array.isArray(props[propName]),"The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",propName,getDeclarationErrorAddendum(owner)))}}function updateOptions(inst,multiple,propValue){var selectedValue,i,options=ReactMount.getNode(inst._rootNodeID).options;if(multiple){for(selectedValue={},i=0;i<propValue.length;i++)selectedValue[""+propValue[i]]=!0;for(i=0;i<options.length;i++){var selected=selectedValue.hasOwnProperty(options[i].value);options[i].selected!==selected&&(options[i].selected=selected)}}else{for(selectedValue=""+propValue,i=0;i<options.length;i++)if(options[i].value===selectedValue)return void(options[i].selected=!0);options.length&&(options[0].selected=!0)}}function _handleChange(event){var props=this._currentElement.props,returnValue=LinkedValueUtils.executeOnChange(props,event);return this._wrapperState.pendingUpdate=!0,ReactUpdates.asap(updateOptionsIfPendingUpdateAndMounted,this),returnValue}var LinkedValueUtils=_dereq_(22),ReactMount=_dereq_(65),ReactUpdates=_dereq_(83),assign=_dereq_(23),warning=_dereq_(155),valueContextKey="__ReactDOMSelect_value$"+Math.random().toString(36).slice(2),valuePropNames=["value","defaultValue"],ReactDOMSelect={valueContextKey:valueContextKey,getNativeProps:function(inst,props,context){return assign({},props,{onChange:inst._wrapperState.onChange,value:void 0})},mountWrapper:function(inst,props){checkSelectPropTypes(inst,props);var value=LinkedValueUtils.getValue(props);inst._wrapperState={pendingUpdate:!1,initialValue:null!=value?value:props.defaultValue,onChange:_handleChange.bind(inst),wasMultiple:Boolean(props.multiple)}},processChildContext:function(inst,props,context){var childContext=assign({},context);return childContext[valueContextKey]=inst._wrapperState.initialValue,childContext},postUpdateWrapper:function(inst){var props=inst._currentElement.props;inst._wrapperState.initialValue=void 0;var wasMultiple=inst._wrapperState.wasMultiple;inst._wrapperState.wasMultiple=Boolean(props.multiple);var value=LinkedValueUtils.getValue(props);null!=value?(inst._wrapperState.pendingUpdate=!1,updateOptions(inst,Boolean(props.multiple),value)):wasMultiple!==Boolean(props.multiple)&&(null!=props.defaultValue?updateOptions(inst,Boolean(props.multiple),props.defaultValue):updateOptions(inst,Boolean(props.multiple),props.multiple?[]:""))}};module.exports=ReactDOMSelect},{155:155,22:22,23:23,65:65,83:83}],44:[function(_dereq_,module,exports){"use strict";function isCollapsed(anchorNode,anchorOffset,focusNode,focusOffset){return anchorNode===focusNode&&anchorOffset===focusOffset}function getIEOffsets(node){var selection=document.selection,selectedRange=selection.createRange(),selectedLength=selectedRange.text.length,fromStart=selectedRange.duplicate();fromStart.moveToElementText(node),fromStart.setEndPoint("EndToStart",selectedRange);var startOffset=fromStart.text.length,endOffset=startOffset+selectedLength;return{start:startOffset,end:endOffset}}function getModernOffsets(node){var selection=window.getSelection&&window.getSelection();if(!selection||0===selection.rangeCount)return null;var anchorNode=selection.anchorNode,anchorOffset=selection.anchorOffset,focusNode=selection.focusNode,focusOffset=selection.focusOffset,currentRange=selection.getRangeAt(0);try{currentRange.startContainer.nodeType,currentRange.endContainer.nodeType}catch(e){return null}var isSelectionCollapsed=isCollapsed(selection.anchorNode,selection.anchorOffset,selection.focusNode,selection.focusOffset),rangeLength=isSelectionCollapsed?0:currentRange.toString().length,tempRange=currentRange.cloneRange();tempRange.selectNodeContents(node),tempRange.setEnd(currentRange.startContainer,currentRange.startOffset);var isTempRangeCollapsed=isCollapsed(tempRange.startContainer,tempRange.startOffset,tempRange.endContainer,tempRange.endOffset),start=isTempRangeCollapsed?0:tempRange.toString().length,end=start+rangeLength,detectionRange=document.createRange();detectionRange.setStart(anchorNode,anchorOffset),detectionRange.setEnd(focusNode,focusOffset);var isBackward=detectionRange.collapsed;return{start:isBackward?end:start,end:isBackward?start:end}}function setIEOffsets(node,offsets){var start,end,range=document.selection.createRange().duplicate();"undefined"==typeof offsets.end?(start=offsets.start,end=start):offsets.start>offsets.end?(start=offsets.end,end=offsets.start):(start=offsets.start,end=offsets.end),range.moveToElementText(node),range.moveStart("character",start),range.setEndPoint("EndToStart",range),range.moveEnd("character",end-start),range.select()}function setModernOffsets(node,offsets){if(window.getSelection){var selection=window.getSelection(),length=node[getTextContentAccessor()].length,start=Math.min(offsets.start,length),end="undefined"==typeof offsets.end?start:Math.min(offsets.end,length);if(!selection.extend&&start>end){var temp=end;end=start,start=temp}var startMarker=getNodeForCharacterOffset(node,start),endMarker=getNodeForCharacterOffset(node,end);if(startMarker&&endMarker){var range=document.createRange();range.setStart(startMarker.node,startMarker.offset),selection.removeAllRanges(),start>end?(selection.addRange(range),selection.extend(endMarker.node,endMarker.offset)):(range.setEnd(endMarker.node,endMarker.offset),selection.addRange(range))}}}var ExecutionEnvironment=_dereq_(130),getNodeForCharacterOffset=_dereq_(116),getTextContentAccessor=_dereq_(117),useIEOffsets=ExecutionEnvironment.canUseDOM&&"selection"in document&&!("getSelection"in window),ReactDOMSelection={getOffsets:useIEOffsets?getIEOffsets:getModernOffsets,setOffsets:useIEOffsets?setIEOffsets:setModernOffsets};module.exports=ReactDOMSelection},{116:116,117:117,130:130}],45:[function(_dereq_,module,exports){"use strict";var ReactDefaultInjection=_dereq_(49),ReactServerRendering=_dereq_(80),ReactVersion=_dereq_(84);ReactDefaultInjection.inject();var ReactDOMServer={renderToString:ReactServerRendering.renderToString,renderToStaticMarkup:ReactServerRendering.renderToStaticMarkup,version:ReactVersion};module.exports=ReactDOMServer},{49:49,80:80,84:84}],46:[function(_dereq_,module,exports){"use strict";var DOMChildrenOperations=_dereq_(9),DOMPropertyOperations=_dereq_(11),ReactComponentBrowserEnvironment=_dereq_(31),ReactMount=_dereq_(65),assign=_dereq_(23),escapeTextContentForBrowser=_dereq_(107),setTextContent=_dereq_(125),validateDOMNesting=_dereq_(128),ReactDOMTextComponent=function(props){};assign(ReactDOMTextComponent.prototype,{construct:function(text){this._currentElement=text,this._stringText=""+text,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(rootID,transaction,context){if(context[validateDOMNesting.ancestorInfoContextKey]&&validateDOMNesting("span",null,context[validateDOMNesting.ancestorInfoContextKey]),this._rootNodeID=rootID,transaction.useCreateElement){var ownerDocument=context[ReactMount.ownerDocumentContextKey],el=ownerDocument.createElement("span");return DOMPropertyOperations.setAttributeForID(el,rootID),ReactMount.getID(el),setTextContent(el,this._stringText),el}var escapedText=escapeTextContentForBrowser(this._stringText);return transaction.renderToStaticMarkup?escapedText:"<span "+DOMPropertyOperations.createMarkupForID(rootID)+">"+escapedText+"</span>"},receiveComponent:function(nextText,transaction){if(nextText!==this._currentElement){this._currentElement=nextText;var nextStringText=""+nextText;if(nextStringText!==this._stringText){this._stringText=nextStringText;var node=ReactMount.getNode(this._rootNodeID);DOMChildrenOperations.updateTextContent(node,nextStringText)}}},unmountComponent:function(){ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID)}}),module.exports=ReactDOMTextComponent},{107:107,11:11,125:125,128:128,23:23,31:31,65:65,9:9}],47:[function(_dereq_,module,exports){"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMTextarea.updateWrapper(this)}function _handleChange(event){var props=this._currentElement.props,returnValue=LinkedValueUtils.executeOnChange(props,event);return ReactUpdates.asap(forceUpdateIfMounted,this),returnValue}var LinkedValueUtils=_dereq_(22),ReactDOMIDOperations=_dereq_(40),ReactUpdates=_dereq_(83),assign=_dereq_(23),invariant=_dereq_(144),warning=_dereq_(155),ReactDOMTextarea={getNativeProps:function(inst,props,context){null!=props.dangerouslySetInnerHTML?invariant(!1,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):void 0;var nativeProps=assign({},props,{defaultValue:void 0,value:void 0,children:inst._wrapperState.initialValue,onChange:inst._wrapperState.onChange});return nativeProps},mountWrapper:function(inst,props){LinkedValueUtils.checkPropTypes("textarea",props,inst._currentElement._owner);var defaultValue=props.defaultValue,children=props.children;null!=children&&(warning(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),null!=defaultValue?invariant(!1,"If you supply `defaultValue` on a <textarea>, do not pass children."):void 0,Array.isArray(children)&&(children.length<=1?void 0:invariant(!1,"<textarea> can only have at most one child."),children=children[0]),defaultValue=""+children),null==defaultValue&&(defaultValue="");var value=LinkedValueUtils.getValue(props);inst._wrapperState={initialValue:""+(null!=value?value:defaultValue),onChange:_handleChange.bind(inst)}},updateWrapper:function(inst){var props=inst._currentElement.props,value=LinkedValueUtils.getValue(props);null!=value&&ReactDOMIDOperations.updatePropertyByID(inst._rootNodeID,"value",""+value)}};module.exports=ReactDOMTextarea},{144:144,155:155,22:22,23:23,40:40,83:83}],48:[function(_dereq_,module,exports){"use strict";function ReactDefaultBatchingStrategyTransaction(){this.reinitializeTransaction()}var ReactUpdates=_dereq_(83),Transaction=_dereq_(100),assign=_dereq_(23),emptyFunction=_dereq_(136),RESET_BATCHED_UPDATES={initialize:emptyFunction,close:function(){ReactDefaultBatchingStrategy.isBatchingUpdates=!1}},FLUSH_BATCHED_UPDATES={initialize:emptyFunction,close:ReactUpdates.flushBatchedUpdates.bind(ReactUpdates)},TRANSACTION_WRAPPERS=[FLUSH_BATCHED_UPDATES,RESET_BATCHED_UPDATES];assign(ReactDefaultBatchingStrategyTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS}});var transaction=new ReactDefaultBatchingStrategyTransaction,ReactDefaultBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(callback,a,b,c,d,e){var alreadyBatchingUpdates=ReactDefaultBatchingStrategy.isBatchingUpdates;ReactDefaultBatchingStrategy.isBatchingUpdates=!0,alreadyBatchingUpdates?callback(a,b,c,d,e):transaction.perform(callback,null,a,b,c,d,e)}};module.exports=ReactDefaultBatchingStrategy},{100:100,136:136,23:23,83:83}],49:[function(_dereq_,module,exports){"use strict";function inject(){if(!alreadyInjected){alreadyInjected=!0,ReactInjection.EventEmitter.injectReactEventListener(ReactEventListener),ReactInjection.EventPluginHub.injectEventPluginOrder(DefaultEventPluginOrder),ReactInjection.EventPluginHub.injectInstanceHandle(ReactInstanceHandles),ReactInjection.EventPluginHub.injectMount(ReactMount),ReactInjection.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:SimpleEventPlugin,EnterLeaveEventPlugin:EnterLeaveEventPlugin,ChangeEventPlugin:ChangeEventPlugin,SelectEventPlugin:SelectEventPlugin,BeforeInputEventPlugin:BeforeInputEventPlugin}),ReactInjection.NativeComponent.injectGenericComponentClass(ReactDOMComponent),ReactInjection.NativeComponent.injectTextComponentClass(ReactDOMTextComponent),ReactInjection.Class.injectMixin(ReactBrowserComponentMixin),ReactInjection.DOMProperty.injectDOMPropertyConfig(HTMLDOMPropertyConfig),ReactInjection.DOMProperty.injectDOMPropertyConfig(SVGDOMPropertyConfig),ReactInjection.EmptyComponent.injectEmptyComponent("noscript"),ReactInjection.Updates.injectReconcileTransaction(ReactReconcileTransaction),ReactInjection.Updates.injectBatchingStrategy(ReactDefaultBatchingStrategy),ReactInjection.RootIndex.injectCreateReactRootIndex(ExecutionEnvironment.canUseDOM?ClientReactRootIndex.createReactRootIndex:ServerReactRootIndex.createReactRootIndex),ReactInjection.Component.injectEnvironment(ReactComponentBrowserEnvironment);var url=ExecutionEnvironment.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(url)){var ReactDefaultPerf=_dereq_(50);ReactDefaultPerf.start()}}}var BeforeInputEventPlugin=_dereq_(3),ChangeEventPlugin=_dereq_(7),ClientReactRootIndex=_dereq_(8),DefaultEventPluginOrder=_dereq_(13),EnterLeaveEventPlugin=_dereq_(14),ExecutionEnvironment=_dereq_(130),HTMLDOMPropertyConfig=_dereq_(21),ReactBrowserComponentMixin=_dereq_(25),ReactComponentBrowserEnvironment=_dereq_(31),ReactDefaultBatchingStrategy=_dereq_(48),ReactDOMComponent=_dereq_(37),ReactDOMTextComponent=_dereq_(46),ReactEventListener=_dereq_(58),ReactInjection=_dereq_(59),ReactInstanceHandles=_dereq_(61),ReactMount=_dereq_(65),ReactReconcileTransaction=_dereq_(75),SelectEventPlugin=_dereq_(86),ServerReactRootIndex=_dereq_(87),SimpleEventPlugin=_dereq_(88),SVGDOMPropertyConfig=_dereq_(85),alreadyInjected=!1;module.exports={inject:inject}},{13:13,130:130,14:14,21:21,25:25,3:3,31:31,37:37,46:46,48:48,50:50,58:58,59:59,61:61,65:65,7:7,75:75,8:8,85:85,86:86,87:87,88:88}],50:[function(_dereq_,module,exports){"use strict";function roundFloat(val){return Math.floor(100*val)/100}function addValue(obj,key,val){obj[key]=(obj[key]||0)+val}var DOMProperty=_dereq_(10),ReactDefaultPerfAnalysis=_dereq_(51),ReactMount=_dereq_(65),ReactPerf=_dereq_(71),performanceNow=_dereq_(152),ReactDefaultPerf={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){ReactDefaultPerf._injected||ReactPerf.injection.injectMeasure(ReactDefaultPerf.measure),ReactDefaultPerf._allMeasurements.length=0,ReactPerf.enableMeasure=!0},stop:function(){ReactPerf.enableMeasure=!1},getLastMeasurements:function(){return ReactDefaultPerf._allMeasurements},printExclusive:function(measurements){measurements=measurements||ReactDefaultPerf._allMeasurements;var summary=ReactDefaultPerfAnalysis.getExclusiveSummary(measurements);console.table(summary.map(function(item){return{"Component class name":item.componentName,"Total inclusive time (ms)":roundFloat(item.inclusive),"Exclusive mount time (ms)":roundFloat(item.exclusive),"Exclusive render time (ms)":roundFloat(item.render),"Mount time per instance (ms)":roundFloat(item.exclusive/item.count),"Render time per instance (ms)":roundFloat(item.render/item.count),Instances:item.count}}))},printInclusive:function(measurements){measurements=measurements||ReactDefaultPerf._allMeasurements;var summary=ReactDefaultPerfAnalysis.getInclusiveSummary(measurements);console.table(summary.map(function(item){return{"Owner > component":item.componentName,"Inclusive time (ms)":roundFloat(item.time),Instances:item.count}})),console.log("Total time:",ReactDefaultPerfAnalysis.getTotalTime(measurements).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(measurements){var summary=ReactDefaultPerfAnalysis.getInclusiveSummary(measurements,!0);return summary.map(function(item){return{"Owner > component":item.componentName,"Wasted time (ms)":item.time,Instances:item.count}})},printWasted:function(measurements){measurements=measurements||ReactDefaultPerf._allMeasurements,console.table(ReactDefaultPerf.getMeasurementsSummaryMap(measurements)),console.log("Total time:",ReactDefaultPerfAnalysis.getTotalTime(measurements).toFixed(2)+" ms")},printDOM:function(measurements){measurements=measurements||ReactDefaultPerf._allMeasurements;var summary=ReactDefaultPerfAnalysis.getDOMSummary(measurements);console.table(summary.map(function(item){var result={};return result[DOMProperty.ID_ATTRIBUTE_NAME]=item.id,result.type=item.type,result.args=JSON.stringify(item.args),result})),console.log("Total time:",ReactDefaultPerfAnalysis.getTotalTime(measurements).toFixed(2)+" ms");},_recordWrite:function(id,fnName,totalTime,args){var writes=ReactDefaultPerf._allMeasurements[ReactDefaultPerf._allMeasurements.length-1].writes;writes[id]=writes[id]||[],writes[id].push({type:fnName,time:totalTime,args:args})},measure:function(moduleName,fnName,func){return function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var totalTime,rv,start;if("_renderNewRootComponent"===fnName||"flushBatchedUpdates"===fnName)return ReactDefaultPerf._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0,created:{}}),start=performanceNow(),rv=func.apply(this,args),ReactDefaultPerf._allMeasurements[ReactDefaultPerf._allMeasurements.length-1].totalTime=performanceNow()-start,rv;if("_mountImageIntoNode"===fnName||"ReactBrowserEventEmitter"===moduleName||"ReactDOMIDOperations"===moduleName||"CSSPropertyOperations"===moduleName||"DOMChildrenOperations"===moduleName||"DOMPropertyOperations"===moduleName){if(start=performanceNow(),rv=func.apply(this,args),totalTime=performanceNow()-start,"_mountImageIntoNode"===fnName){var mountID=ReactMount.getID(args[1]);ReactDefaultPerf._recordWrite(mountID,fnName,totalTime,args[0])}else if("dangerouslyProcessChildrenUpdates"===fnName)args[0].forEach(function(update){var writeArgs={};null!==update.fromIndex&&(writeArgs.fromIndex=update.fromIndex),null!==update.toIndex&&(writeArgs.toIndex=update.toIndex),null!==update.textContent&&(writeArgs.textContent=update.textContent),null!==update.markupIndex&&(writeArgs.markup=args[1][update.markupIndex]),ReactDefaultPerf._recordWrite(update.parentID,update.type,totalTime,writeArgs)});else{var id=args[0];"object"==typeof id&&(id=ReactMount.getID(args[0])),ReactDefaultPerf._recordWrite(id,fnName,totalTime,Array.prototype.slice.call(args,1))}return rv}if("ReactCompositeComponent"!==moduleName||"mountComponent"!==fnName&&"updateComponent"!==fnName&&"_renderValidatedComponent"!==fnName)return func.apply(this,args);if(this._currentElement.type===ReactMount.TopLevelWrapper)return func.apply(this,args);var rootNodeID="mountComponent"===fnName?args[0]:this._rootNodeID,isRender="_renderValidatedComponent"===fnName,isMount="mountComponent"===fnName,mountStack=ReactDefaultPerf._mountStack,entry=ReactDefaultPerf._allMeasurements[ReactDefaultPerf._allMeasurements.length-1];if(isRender?addValue(entry.counts,rootNodeID,1):isMount&&(entry.created[rootNodeID]=!0,mountStack.push(0)),start=performanceNow(),rv=func.apply(this,args),totalTime=performanceNow()-start,isRender)addValue(entry.render,rootNodeID,totalTime);else if(isMount){var subMountTime=mountStack.pop();mountStack[mountStack.length-1]+=totalTime,addValue(entry.exclusive,rootNodeID,totalTime-subMountTime),addValue(entry.inclusive,rootNodeID,totalTime)}else addValue(entry.inclusive,rootNodeID,totalTime);return entry.displayNames[rootNodeID]={current:this.getName(),owner:this._currentElement._owner?this._currentElement._owner.getName():"<root>"},rv}}};module.exports=ReactDefaultPerf},{10:10,152:152,51:51,65:65,71:71}],51:[function(_dereq_,module,exports){"use strict";function getTotalTime(measurements){for(var totalTime=0,i=0;i<measurements.length;i++){var measurement=measurements[i];totalTime+=measurement.totalTime}return totalTime}function getDOMSummary(measurements){var items=[];return measurements.forEach(function(measurement){Object.keys(measurement.writes).forEach(function(id){measurement.writes[id].forEach(function(write){items.push({id:id,type:DOM_OPERATION_TYPES[write.type]||write.type,args:write.args})})})}),items}function getExclusiveSummary(measurements){for(var displayName,candidates={},i=0;i<measurements.length;i++){var measurement=measurements[i],allIDs=assign({},measurement.exclusive,measurement.inclusive);for(var id in allIDs)displayName=measurement.displayNames[id].current,candidates[displayName]=candidates[displayName]||{componentName:displayName,inclusive:0,exclusive:0,render:0,count:0},measurement.render[id]&&(candidates[displayName].render+=measurement.render[id]),measurement.exclusive[id]&&(candidates[displayName].exclusive+=measurement.exclusive[id]),measurement.inclusive[id]&&(candidates[displayName].inclusive+=measurement.inclusive[id]),measurement.counts[id]&&(candidates[displayName].count+=measurement.counts[id])}var arr=[];for(displayName in candidates)candidates[displayName].exclusive>=DONT_CARE_THRESHOLD&&arr.push(candidates[displayName]);return arr.sort(function(a,b){return b.exclusive-a.exclusive}),arr}function getInclusiveSummary(measurements,onlyClean){for(var inclusiveKey,candidates={},i=0;i<measurements.length;i++){var cleanComponents,measurement=measurements[i],allIDs=assign({},measurement.exclusive,measurement.inclusive);onlyClean&&(cleanComponents=getUnchangedComponents(measurement));for(var id in allIDs)if(!onlyClean||cleanComponents[id]){var displayName=measurement.displayNames[id];inclusiveKey=displayName.owner+" > "+displayName.current,candidates[inclusiveKey]=candidates[inclusiveKey]||{componentName:inclusiveKey,time:0,count:0},measurement.inclusive[id]&&(candidates[inclusiveKey].time+=measurement.inclusive[id]),measurement.counts[id]&&(candidates[inclusiveKey].count+=measurement.counts[id])}}var arr=[];for(inclusiveKey in candidates)candidates[inclusiveKey].time>=DONT_CARE_THRESHOLD&&arr.push(candidates[inclusiveKey]);return arr.sort(function(a,b){return b.time-a.time}),arr}function getUnchangedComponents(measurement){var cleanComponents={},dirtyLeafIDs=Object.keys(measurement.writes),allIDs=assign({},measurement.exclusive,measurement.inclusive);for(var id in allIDs){for(var isDirty=!1,i=0;i<dirtyLeafIDs.length;i++)if(0===dirtyLeafIDs[i].indexOf(id)){isDirty=!0;break}measurement.created[id]&&(isDirty=!0),!isDirty&&measurement.counts[id]>0&&(cleanComponents[id]=!0)}return cleanComponents}var assign=_dereq_(23),DONT_CARE_THRESHOLD=1.2,DOM_OPERATION_TYPES={_mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",SET_MARKUP:"set innerHTML",TEXT_CONTENT:"set textContent",setValueForProperty:"update attribute",setValueForAttribute:"update attribute",deleteValueForProperty:"remove attribute",dangerouslyReplaceNodeWithMarkupByID:"replace"},ReactDefaultPerfAnalysis={getExclusiveSummary:getExclusiveSummary,getInclusiveSummary:getInclusiveSummary,getDOMSummary:getDOMSummary,getTotalTime:getTotalTime};module.exports=ReactDefaultPerfAnalysis},{23:23}],52:[function(_dereq_,module,exports){"use strict";var ReactCurrentOwner=_dereq_(34),assign=_dereq_(23),canDefineProperty=_dereq_(104),REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,RESERVED_PROPS={key:!0,ref:!0,__self:!0,__source:!0},ReactElement=function(type,key,ref,self,source,owner,props){var element={$$typeof:REACT_ELEMENT_TYPE,type:type,key:key,ref:ref,props:props,_owner:owner};return element._store={},canDefineProperty?(Object.defineProperty(element._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(element,"_self",{configurable:!1,enumerable:!1,writable:!1,value:self}),Object.defineProperty(element,"_source",{configurable:!1,enumerable:!1,writable:!1,value:source})):(element._store.validated=!1,element._self=self,element._source=source),Object.freeze(element.props),Object.freeze(element),element};ReactElement.createElement=function(type,config,children){var propName,props={},key=null,ref=null,self=null,source=null;if(null!=config){ref=void 0===config.ref?null:config.ref,key=void 0===config.key?null:""+config.key,self=void 0===config.__self?null:config.__self,source=void 0===config.__source?null:config.__source;for(propName in config)config.hasOwnProperty(propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;i<childrenLength;i++)childArray[i]=arguments[i+2];props.children=childArray}if(type&&type.defaultProps){var defaultProps=type.defaultProps;for(propName in defaultProps)"undefined"==typeof props[propName]&&(props[propName]=defaultProps[propName])}return ReactElement(type,key,ref,self,source,ReactCurrentOwner.current,props)},ReactElement.createFactory=function(type){var factory=ReactElement.createElement.bind(null,type);return factory.type=type,factory},ReactElement.cloneAndReplaceKey=function(oldElement,newKey){var newElement=ReactElement(oldElement.type,newKey,oldElement.ref,oldElement._self,oldElement._source,oldElement._owner,oldElement.props);return newElement},ReactElement.cloneAndReplaceProps=function(oldElement,newProps){var newElement=ReactElement(oldElement.type,oldElement.key,oldElement.ref,oldElement._self,oldElement._source,oldElement._owner,newProps);return newElement._store.validated=oldElement._store.validated,newElement},ReactElement.cloneElement=function(element,config,children){var propName,props=assign({},element.props),key=element.key,ref=element.ref,self=element._self,source=element._source,owner=element._owner;if(null!=config){void 0!==config.ref&&(ref=config.ref,owner=ReactCurrentOwner.current),void 0!==config.key&&(key=""+config.key);for(propName in config)config.hasOwnProperty(propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;i<childrenLength;i++)childArray[i]=arguments[i+2];props.children=childArray}return ReactElement(element.type,key,ref,self,source,owner,props)},ReactElement.isValidElement=function(object){return"object"==typeof object&&null!==object&&object.$$typeof===REACT_ELEMENT_TYPE},module.exports=ReactElement},{104:104,23:23,34:34}],53:[function(_dereq_,module,exports){"use strict";function getDeclarationErrorAddendum(){if(ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();if(name)return" Check the render method of `"+name+"`."}return""}function validateExplicitKey(element,parentType){if(element._store&&!element._store.validated&&null==element.key){element._store.validated=!0;var addenda=getAddendaForKeyUse("uniqueKey",element,parentType);null!==addenda&&warning(!1,'Each child in an array or iterator should have a unique "key" prop.%s%s%s',addenda.parentOrOwner||"",addenda.childOwner||"",addenda.url||"")}}function getAddendaForKeyUse(messageType,element,parentType){var addendum=getDeclarationErrorAddendum();if(!addendum){var parentName="string"==typeof parentType?parentType:parentType.displayName||parentType.name;parentName&&(addendum=" Check the top-level render call using <"+parentName+">.")}var memoizer=ownerHasKeyUseWarning[messageType]||(ownerHasKeyUseWarning[messageType]={});if(memoizer[addendum])return null;memoizer[addendum]=!0;var addenda={parentOrOwner:addendum,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return element&&element._owner&&element._owner!==ReactCurrentOwner.current&&(addenda.childOwner=" It was passed a child from "+element._owner.getName()+"."),addenda}function validateChildKeys(node,parentType){if("object"==typeof node)if(Array.isArray(node))for(var i=0;i<node.length;i++){var child=node[i];ReactElement.isValidElement(child)&&validateExplicitKey(child,parentType)}else if(ReactElement.isValidElement(node))node._store&&(node._store.validated=!0);else if(node){var iteratorFn=getIteratorFn(node);if(iteratorFn&&iteratorFn!==node.entries)for(var step,iterator=iteratorFn.call(node);!(step=iterator.next()).done;)ReactElement.isValidElement(step.value)&&validateExplicitKey(step.value,parentType)}}function checkPropTypes(componentName,propTypes,props,location){for(var propName in propTypes)if(propTypes.hasOwnProperty(propName)){var error;try{"function"!=typeof propTypes[propName]?invariant(!1,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",componentName||"React class",ReactPropTypeLocationNames[location],propName):void 0,error=propTypes[propName](props,propName,componentName,location)}catch(ex){error=ex}if(warning(!error||error instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",componentName||"React class",ReactPropTypeLocationNames[location],propName,typeof error),error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=!0;var addendum=getDeclarationErrorAddendum();warning(!1,"Failed propType: %s%s",error.message,addendum)}}}function validatePropTypes(element){var componentClass=element.type;if("function"==typeof componentClass){var name=componentClass.displayName||componentClass.name;componentClass.propTypes&&checkPropTypes(name,componentClass.propTypes,element.props,ReactPropTypeLocations.prop),"function"==typeof componentClass.getDefaultProps&&warning(componentClass.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var ReactElement=_dereq_(52),ReactPropTypeLocations=_dereq_(73),ReactPropTypeLocationNames=_dereq_(72),ReactCurrentOwner=_dereq_(34),canDefineProperty=_dereq_(104),getIteratorFn=_dereq_(115),invariant=_dereq_(144),warning=_dereq_(155),ownerHasKeyUseWarning={},loggedTypeFailures={},ReactElementValidator={createElement:function(type,props,children){var validType="string"==typeof type||"function"==typeof type;warning(validType,"React.createElement: type should not be null, undefined, boolean, or number. It should be a string (for DOM elements) or a ReactClass (for composite components).%s",getDeclarationErrorAddendum());var element=ReactElement.createElement.apply(this,arguments);if(null==element)return element;if(validType)for(var i=2;i<arguments.length;i++)validateChildKeys(arguments[i],type);return validatePropTypes(element),element},createFactory:function(type){var validatedFactory=ReactElementValidator.createElement.bind(null,type);return validatedFactory.type=type,canDefineProperty&&Object.defineProperty(validatedFactory,"type",{enumerable:!1,get:function(){return warning(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:type}),type}}),validatedFactory},cloneElement:function(element,props,children){for(var newElement=ReactElement.cloneElement.apply(this,arguments),i=2;i<arguments.length;i++)validateChildKeys(arguments[i],newElement.type);return validatePropTypes(newElement),newElement}};module.exports=ReactElementValidator},{104:104,115:115,144:144,155:155,34:34,52:52,72:72,73:73}],54:[function(_dereq_,module,exports){"use strict";var placeholderElement,ReactElement=_dereq_(52),ReactEmptyComponentRegistry=_dereq_(55),ReactReconciler=_dereq_(76),assign=_dereq_(23),ReactEmptyComponentInjection={injectEmptyComponent:function(component){placeholderElement=ReactElement.createElement(component)}},ReactEmptyComponent=function(instantiate){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=instantiate(placeholderElement)};assign(ReactEmptyComponent.prototype,{construct:function(element){},mountComponent:function(rootID,transaction,context){return ReactEmptyComponentRegistry.registerNullComponentID(rootID),this._rootNodeID=rootID,ReactReconciler.mountComponent(this._renderedComponent,rootID,transaction,context)},receiveComponent:function(){},unmountComponent:function(rootID,transaction,context){ReactReconciler.unmountComponent(this._renderedComponent),ReactEmptyComponentRegistry.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),ReactEmptyComponent.injection=ReactEmptyComponentInjection,module.exports=ReactEmptyComponent},{23:23,52:52,55:55,76:76}],55:[function(_dereq_,module,exports){"use strict";function isNullComponentID(id){return!!nullComponentIDsRegistry[id]}function registerNullComponentID(id){nullComponentIDsRegistry[id]=!0}function deregisterNullComponentID(id){delete nullComponentIDsRegistry[id]}var nullComponentIDsRegistry={},ReactEmptyComponentRegistry={isNullComponentID:isNullComponentID,registerNullComponentID:registerNullComponentID,deregisterNullComponentID:deregisterNullComponentID};module.exports=ReactEmptyComponentRegistry},{}],56:[function(_dereq_,module,exports){"use strict";function invokeGuardedCallback(name,func,a,b){try{return func(a,b)}catch(x){return void(null===caughtError&&(caughtError=x))}}var caughtError=null,ReactErrorUtils={invokeGuardedCallback:invokeGuardedCallback,invokeGuardedCallbackWithCatch:invokeGuardedCallback,rethrowCaughtError:function(){if(caughtError){var error=caughtError;throw caughtError=null,error}}};if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var fakeNode=document.createElement("react");ReactErrorUtils.invokeGuardedCallback=function(name,func,a,b){var boundFunc=func.bind(null,a,b),evtType="react-"+name;fakeNode.addEventListener(evtType,boundFunc,!1);var evt=document.createEvent("Event");evt.initEvent(evtType,!1,!1),fakeNode.dispatchEvent(evt),fakeNode.removeEventListener(evtType,boundFunc,!1)}}module.exports=ReactErrorUtils},{}],57:[function(_dereq_,module,exports){"use strict";function runEventQueueInBatch(events){EventPluginHub.enqueueEvents(events),EventPluginHub.processEventQueue(!1)}var EventPluginHub=_dereq_(16),ReactEventEmitterMixin={handleTopLevel:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){var events=EventPluginHub.extractEvents(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget);runEventQueueInBatch(events)}};module.exports=ReactEventEmitterMixin},{16:16}],58:[function(_dereq_,module,exports){"use strict";function findParent(node){var nodeID=ReactMount.getID(node),rootID=ReactInstanceHandles.getReactRootIDFromNodeID(nodeID),container=ReactMount.findReactContainerForID(rootID),parent=ReactMount.getFirstReactDOM(container);return parent}function TopLevelCallbackBookKeeping(topLevelType,nativeEvent){this.topLevelType=topLevelType,this.nativeEvent=nativeEvent,this.ancestors=[]}function handleTopLevelImpl(bookKeeping){handleTopLevelWithoutPath(bookKeeping)}function handleTopLevelWithoutPath(bookKeeping){for(var topLevelTarget=ReactMount.getFirstReactDOM(getEventTarget(bookKeeping.nativeEvent))||window,ancestor=topLevelTarget;ancestor;)bookKeeping.ancestors.push(ancestor),ancestor=findParent(ancestor);for(var i=0;i<bookKeeping.ancestors.length;i++){topLevelTarget=bookKeeping.ancestors[i];var topLevelTargetID=ReactMount.getID(topLevelTarget)||"";ReactEventListener._handleTopLevel(bookKeeping.topLevelType,topLevelTarget,topLevelTargetID,bookKeeping.nativeEvent,getEventTarget(bookKeeping.nativeEvent))}}function scrollValueMonitor(cb){var scrollPosition=getUnboundedScrollPosition(window);cb(scrollPosition)}var EventListener=_dereq_(129),ExecutionEnvironment=_dereq_(130),PooledClass=_dereq_(24),ReactInstanceHandles=_dereq_(61),ReactMount=_dereq_(65),ReactUpdates=_dereq_(83),assign=_dereq_(23),getEventTarget=_dereq_(114),getUnboundedScrollPosition=_dereq_(141);assign(TopLevelCallbackBookKeeping.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),PooledClass.addPoolingTo(TopLevelCallbackBookKeeping,PooledClass.twoArgumentPooler);var ReactEventListener={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:ExecutionEnvironment.canUseDOM?window:null,setHandleTopLevel:function(handleTopLevel){ReactEventListener._handleTopLevel=handleTopLevel},setEnabled:function(enabled){ReactEventListener._enabled=!!enabled},isEnabled:function(){return ReactEventListener._enabled},trapBubbledEvent:function(topLevelType,handlerBaseName,handle){var element=handle;return element?EventListener.listen(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType)):null},trapCapturedEvent:function(topLevelType,handlerBaseName,handle){var element=handle;return element?EventListener.capture(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType)):null},monitorScrollValue:function(refresh){var callback=scrollValueMonitor.bind(null,refresh);EventListener.listen(window,"scroll",callback)},dispatchEvent:function(topLevelType,nativeEvent){if(ReactEventListener._enabled){var bookKeeping=TopLevelCallbackBookKeeping.getPooled(topLevelType,nativeEvent);try{ReactUpdates.batchedUpdates(handleTopLevelImpl,bookKeeping)}finally{TopLevelCallbackBookKeeping.release(bookKeeping)}}}};module.exports=ReactEventListener},{114:114,129:129,130:130,141:141,23:23,24:24,61:61,65:65,83:83}],59:[function(_dereq_,module,exports){"use strict";var DOMProperty=_dereq_(10),EventPluginHub=_dereq_(16),ReactComponentEnvironment=_dereq_(32),ReactClass=_dereq_(29),ReactEmptyComponent=_dereq_(54),ReactBrowserEventEmitter=_dereq_(26),ReactNativeComponent=_dereq_(68),ReactPerf=_dereq_(71),ReactRootIndex=_dereq_(78),ReactUpdates=_dereq_(83),ReactInjection={Component:ReactComponentEnvironment.injection,Class:ReactClass.injection,DOMProperty:DOMProperty.injection,EmptyComponent:ReactEmptyComponent.injection,EventPluginHub:EventPluginHub.injection,EventEmitter:ReactBrowserEventEmitter.injection,NativeComponent:ReactNativeComponent.injection,Perf:ReactPerf.injection,RootIndex:ReactRootIndex.injection,Updates:ReactUpdates.injection};module.exports=ReactInjection},{10:10,16:16,26:26,29:29,32:32,54:54,68:68,71:71,78:78,83:83}],60:[function(_dereq_,module,exports){"use strict";function isInDocument(node){return containsNode(document.documentElement,node)}var ReactDOMSelection=_dereq_(44),containsNode=_dereq_(133),focusNode=_dereq_(138),getActiveElement=_dereq_(139),ReactInputSelection={hasSelectionCapabilities:function(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return nodeName&&("input"===nodeName&&"text"===elem.type||"textarea"===nodeName||"true"===elem.contentEditable)},getSelectionInformation:function(){var focusedElem=getActiveElement();return{focusedElem:focusedElem,selectionRange:ReactInputSelection.hasSelectionCapabilities(focusedElem)?ReactInputSelection.getSelection(focusedElem):null}},restoreSelection:function(priorSelectionInformation){var curFocusedElem=getActiveElement(),priorFocusedElem=priorSelectionInformation.focusedElem,priorSelectionRange=priorSelectionInformation.selectionRange;curFocusedElem!==priorFocusedElem&&isInDocument(priorFocusedElem)&&(ReactInputSelection.hasSelectionCapabilities(priorFocusedElem)&&ReactInputSelection.setSelection(priorFocusedElem,priorSelectionRange),focusNode(priorFocusedElem))},getSelection:function(input){var selection;if("selectionStart"in input)selection={start:input.selectionStart,end:input.selectionEnd};else if(document.selection&&input.nodeName&&"input"===input.nodeName.toLowerCase()){var range=document.selection.createRange();range.parentElement()===input&&(selection={start:-range.moveStart("character",-input.value.length),end:-range.moveEnd("character",-input.value.length)})}else selection=ReactDOMSelection.getOffsets(input);return selection||{start:0,end:0}},setSelection:function(input,offsets){var start=offsets.start,end=offsets.end;if("undefined"==typeof end&&(end=start),"selectionStart"in input)input.selectionStart=start,input.selectionEnd=Math.min(end,input.value.length);else if(document.selection&&input.nodeName&&"input"===input.nodeName.toLowerCase()){var range=input.createTextRange();range.collapse(!0),range.moveStart("character",start),range.moveEnd("character",end-start),range.select()}else ReactDOMSelection.setOffsets(input,offsets)}};module.exports=ReactInputSelection},{133:133,138:138,139:139,44:44}],61:[function(_dereq_,module,exports){"use strict";function getReactRootIDString(index){return SEPARATOR+index.toString(36)}function isBoundary(id,index){return id.charAt(index)===SEPARATOR||index===id.length}function isValidID(id){return""===id||id.charAt(0)===SEPARATOR&&id.charAt(id.length-1)!==SEPARATOR}function isAncestorIDOf(ancestorID,descendantID){return 0===descendantID.indexOf(ancestorID)&&isBoundary(descendantID,ancestorID.length)}function getParentID(id){return id?id.substr(0,id.lastIndexOf(SEPARATOR)):""}function getNextDescendantID(ancestorID,destinationID){if(isValidID(ancestorID)&&isValidID(destinationID)?void 0:invariant(!1,"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",ancestorID,destinationID),isAncestorIDOf(ancestorID,destinationID)?void 0:invariant(!1,"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",ancestorID,destinationID),ancestorID===destinationID)return ancestorID;var i,start=ancestorID.length+SEPARATOR_LENGTH;for(i=start;i<destinationID.length&&!isBoundary(destinationID,i);i++);return destinationID.substr(0,i)}function getFirstCommonAncestorID(oneID,twoID){var minLength=Math.min(oneID.length,twoID.length);if(0===minLength)return"";for(var lastCommonMarkerIndex=0,i=0;i<=minLength;i++)if(isBoundary(oneID,i)&&isBoundary(twoID,i))lastCommonMarkerIndex=i;else if(oneID.charAt(i)!==twoID.charAt(i))break;var longestCommonID=oneID.substr(0,lastCommonMarkerIndex);return isValidID(longestCommonID)?void 0:invariant(!1,"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",oneID,twoID,longestCommonID),longestCommonID}function traverseParentPath(start,stop,cb,arg,skipFirst,skipLast){start=start||"",stop=stop||"",start===stop?invariant(!1,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",start):void 0;var traverseUp=isAncestorIDOf(stop,start);traverseUp||isAncestorIDOf(start,stop)?void 0:invariant(!1,"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",start,stop);for(var depth=0,traverse=traverseUp?getParentID:getNextDescendantID,id=start;;id=traverse(id,stop)){var ret;if(skipFirst&&id===start||skipLast&&id===stop||(ret=cb(id,traverseUp,arg)),ret===!1||id===stop)break;depth++<MAX_TREE_DEPTH?void 0:invariant(!1,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",start,stop,id)}}var ReactRootIndex=_dereq_(78),invariant=_dereq_(144),SEPARATOR=".",SEPARATOR_LENGTH=SEPARATOR.length,MAX_TREE_DEPTH=1e4,ReactInstanceHandles={createReactRootID:function(){return getReactRootIDString(ReactRootIndex.createReactRootIndex())},createReactID:function(rootID,name){return rootID+name},getReactRootIDFromNodeID:function(id){if(id&&id.charAt(0)===SEPARATOR&&id.length>1){var index=id.indexOf(SEPARATOR,1);return index>-1?id.substr(0,index):id}return null},traverseEnterLeave:function(leaveID,enterID,cb,upArg,downArg){var ancestorID=getFirstCommonAncestorID(leaveID,enterID);ancestorID!==leaveID&&traverseParentPath(leaveID,ancestorID,cb,upArg,!1,!0),ancestorID!==enterID&&traverseParentPath(ancestorID,enterID,cb,downArg,!0,!1)},traverseTwoPhase:function(targetID,cb,arg){targetID&&(traverseParentPath("",targetID,cb,arg,!0,!1),traverseParentPath(targetID,"",cb,arg,!1,!0))},traverseTwoPhaseSkipTarget:function(targetID,cb,arg){targetID&&(traverseParentPath("",targetID,cb,arg,!0,!0),traverseParentPath(targetID,"",cb,arg,!0,!0))},traverseAncestors:function(targetID,cb,arg){traverseParentPath("",targetID,cb,arg,!0,!1)},getFirstCommonAncestorID:getFirstCommonAncestorID,_getNextDescendantID:getNextDescendantID,isAncestorIDOf:isAncestorIDOf,SEPARATOR:SEPARATOR};module.exports=ReactInstanceHandles},{144:144,78:78}],62:[function(_dereq_,module,exports){"use strict";var ReactInstanceMap={remove:function(key){key._reactInternalInstance=void 0},get:function(key){return key._reactInternalInstance},has:function(key){return void 0!==key._reactInternalInstance},set:function(key,value){key._reactInternalInstance=value}};module.exports=ReactInstanceMap},{}],63:[function(_dereq_,module,exports){"use strict";var ReactChildren=_dereq_(28),ReactComponent=_dereq_(30),ReactClass=_dereq_(29),ReactDOMFactories=_dereq_(38),ReactElement=_dereq_(52),ReactElementValidator=_dereq_(53),ReactPropTypes=_dereq_(74),ReactVersion=_dereq_(84),assign=_dereq_(23),onlyChild=_dereq_(121),createElement=ReactElement.createElement,createFactory=ReactElement.createFactory,cloneElement=ReactElement.cloneElement;createElement=ReactElementValidator.createElement,createFactory=ReactElementValidator.createFactory,cloneElement=ReactElementValidator.cloneElement;var React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:ReactClass.createClass,createFactory:createFactory,createMixin:function(mixin){return mixin},DOM:ReactDOMFactories,version:ReactVersion,__spread:assign};module.exports=React},{121:121,23:23,28:28,29:29,30:30,38:38,52:52,53:53,74:74,84:84}],64:[function(_dereq_,module,exports){"use strict";var adler32=_dereq_(103),TAG_END=/\/?>/,ReactMarkupChecksum={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(markup){var checksum=adler32(markup);return markup.replace(TAG_END," "+ReactMarkupChecksum.CHECKSUM_ATTR_NAME+'="'+checksum+'"$&')},canReuseMarkup:function(markup,element){var existingChecksum=element.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);existingChecksum=existingChecksum&&parseInt(existingChecksum,10);var markupChecksum=adler32(markup);return markupChecksum===existingChecksum}};module.exports=ReactMarkupChecksum},{103:103}],65:[function(_dereq_,module,exports){"use strict";function firstDifferenceIndex(string1,string2){for(var minLen=Math.min(string1.length,string2.length),i=0;i<minLen;i++)if(string1.charAt(i)!==string2.charAt(i))return i;return string1.length===string2.length?-1:minLen}function getReactRootElementInContainer(container){return container?container.nodeType===DOC_NODE_TYPE?container.documentElement:container.firstChild:null}function getReactRootID(container){var rootElement=getReactRootElementInContainer(container);return rootElement&&ReactMount.getID(rootElement)}function getID(node){var id=internalGetID(node);if(id)if(nodeCache.hasOwnProperty(id)){var cached=nodeCache[id];cached!==node&&(isValid(cached,id)?invariant(!1,"ReactMount: Two valid but unequal nodes with the same `%s`: %s",ATTR_NAME,id):void 0,nodeCache[id]=node)}else nodeCache[id]=node;return id}function internalGetID(node){return node&&node.getAttribute&&node.getAttribute(ATTR_NAME)||""}function setID(node,id){var oldID=internalGetID(node);oldID!==id&&delete nodeCache[oldID],node.setAttribute(ATTR_NAME,id),nodeCache[id]=node}function getNode(id){return nodeCache.hasOwnProperty(id)&&isValid(nodeCache[id],id)||(nodeCache[id]=ReactMount.findReactNodeByID(id)),nodeCache[id]}function getNodeFromInstance(instance){var id=ReactInstanceMap.get(instance)._rootNodeID;return ReactEmptyComponentRegistry.isNullComponentID(id)?null:(nodeCache.hasOwnProperty(id)&&isValid(nodeCache[id],id)||(nodeCache[id]=ReactMount.findReactNodeByID(id)),nodeCache[id])}function isValid(node,id){if(node){internalGetID(node)!==id?invariant(!1,"ReactMount: Unexpected modification of `%s`",ATTR_NAME):void 0;var container=ReactMount.findReactContainerForID(id);if(container&&containsNode(container,node))return!0}return!1}function purgeID(id){delete nodeCache[id]}function findDeepestCachedAncestorImpl(ancestorID){var ancestor=nodeCache[ancestorID];return!(!ancestor||!isValid(ancestor,ancestorID))&&void(deepestNodeSoFar=ancestor)}function findDeepestCachedAncestor(targetID){deepestNodeSoFar=null,ReactInstanceHandles.traverseAncestors(targetID,findDeepestCachedAncestorImpl);var foundNode=deepestNodeSoFar;return deepestNodeSoFar=null,foundNode}function mountComponentIntoNode(componentInstance,rootID,container,transaction,shouldReuseMarkup,context){ReactDOMFeatureFlags.useCreateElement&&(context=assign({},context),container.nodeType===DOC_NODE_TYPE?context[ownerDocumentContextKey]=container:context[ownerDocumentContextKey]=container.ownerDocument),context===emptyObject&&(context={});var tag=container.nodeName.toLowerCase();context[validateDOMNesting.ancestorInfoContextKey]=validateDOMNesting.updatedAncestorInfo(null,tag,null);var markup=ReactReconciler.mountComponent(componentInstance,rootID,transaction,context);componentInstance._renderedComponent._topLevelWrapper=componentInstance,ReactMount._mountImageIntoNode(markup,container,shouldReuseMarkup,transaction)}function batchedMountComponentIntoNode(componentInstance,rootID,container,shouldReuseMarkup,context){var transaction=ReactUpdates.ReactReconcileTransaction.getPooled(shouldReuseMarkup);transaction.perform(mountComponentIntoNode,null,componentInstance,rootID,container,transaction,shouldReuseMarkup,context),ReactUpdates.ReactReconcileTransaction.release(transaction)}function unmountComponentFromNode(instance,container){for(ReactReconciler.unmountComponent(instance),container.nodeType===DOC_NODE_TYPE&&(container=container.documentElement);container.lastChild;)container.removeChild(container.lastChild)}function hasNonRootReactChild(node){var reactRootID=getReactRootID(node);return!!reactRootID&&reactRootID!==ReactInstanceHandles.getReactRootIDFromNodeID(reactRootID)}function findFirstReactDOMImpl(node){for(;node&&node.parentNode!==node;node=node.parentNode)if(1===node.nodeType){var nodeID=internalGetID(node);if(nodeID){var lastID,reactRootID=ReactInstanceHandles.getReactRootIDFromNodeID(nodeID),current=node;do if(lastID=internalGetID(current),current=current.parentNode,null==current)return null;while(lastID!==reactRootID);if(current===containersByReactRootID[reactRootID])return node}}return null}var DOMProperty=_dereq_(10),ReactBrowserEventEmitter=_dereq_(26),ReactCurrentOwner=_dereq_(34),ReactDOMFeatureFlags=_dereq_(39),ReactElement=_dereq_(52),ReactEmptyComponentRegistry=_dereq_(55),ReactInstanceHandles=_dereq_(61),ReactInstanceMap=_dereq_(62),ReactMarkupChecksum=_dereq_(64),ReactPerf=_dereq_(71),ReactReconciler=_dereq_(76),ReactUpdateQueue=_dereq_(82),ReactUpdates=_dereq_(83),assign=_dereq_(23),emptyObject=_dereq_(137),containsNode=_dereq_(133),instantiateReactComponent=_dereq_(118),invariant=_dereq_(144),setInnerHTML=_dereq_(124),shouldUpdateReactComponent=_dereq_(126),validateDOMNesting=_dereq_(128),warning=_dereq_(155),ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME,nodeCache={},ELEMENT_NODE_TYPE=1,DOC_NODE_TYPE=9,DOCUMENT_FRAGMENT_NODE_TYPE=11,ownerDocumentContextKey="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),instancesByReactRootID={},containersByReactRootID={},rootElementsByReactRootID={},findComponentRootReusableArray=[],deepestNodeSoFar=null,TopLevelWrapper=function(){};TopLevelWrapper.prototype.isReactComponent={},TopLevelWrapper.displayName="TopLevelWrapper",TopLevelWrapper.prototype.render=function(){return this.props};var ReactMount={TopLevelWrapper:TopLevelWrapper,_instancesByReactRootID:instancesByReactRootID,scrollMonitor:function(container,renderCallback){renderCallback()},_updateRootComponent:function(prevComponent,nextElement,container,callback){return ReactMount.scrollMonitor(container,function(){ReactUpdateQueue.enqueueElementInternal(prevComponent,nextElement),callback&&ReactUpdateQueue.enqueueCallbackInternal(prevComponent,callback)}),rootElementsByReactRootID[getReactRootID(container)]=getReactRootElementInContainer(container),prevComponent},_registerComponent:function(nextComponent,container){!container||container.nodeType!==ELEMENT_NODE_TYPE&&container.nodeType!==DOC_NODE_TYPE&&container.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE?invariant(!1,"_registerComponent(...): Target container is not a DOM element."):void 0,ReactBrowserEventEmitter.ensureScrollValueMonitoring();var reactRootID=ReactMount.registerContainer(container);return instancesByReactRootID[reactRootID]=nextComponent,reactRootID},_renderNewRootComponent:function(nextElement,container,shouldReuseMarkup,context){warning(null==ReactCurrentOwner.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate. Check the render method of %s.",ReactCurrentOwner.current&&ReactCurrentOwner.current.getName()||"ReactCompositeComponent");var componentInstance=instantiateReactComponent(nextElement,null),reactRootID=ReactMount._registerComponent(componentInstance,container);return ReactUpdates.batchedUpdates(batchedMountComponentIntoNode,componentInstance,reactRootID,container,shouldReuseMarkup,context),rootElementsByReactRootID[reactRootID]=getReactRootElementInContainer(container),componentInstance},renderSubtreeIntoContainer:function(parentComponent,nextElement,container,callback){return null==parentComponent||null==parentComponent._reactInternalInstance?invariant(!1,"parentComponent must be a valid React Component"):void 0,ReactMount._renderSubtreeIntoContainer(parentComponent,nextElement,container,callback)},_renderSubtreeIntoContainer:function(parentComponent,nextElement,container,callback){ReactElement.isValidElement(nextElement)?void 0:invariant(!1,"ReactDOM.render(): Invalid component element.%s","string"==typeof nextElement?" Instead of passing an element string, make sure to instantiate it by passing it to React.createElement.":"function"==typeof nextElement?" Instead of passing a component class, make sure to instantiate it by passing it to React.createElement.":null!=nextElement&&void 0!==nextElement.props?" This may be caused by unintentionally loading two independent copies of React.":""),warning(!container||!container.tagName||"BODY"!==container.tagName.toUpperCase(),"render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.");var nextWrappedElement=new ReactElement(TopLevelWrapper,null,null,null,null,null,nextElement),prevComponent=instancesByReactRootID[getReactRootID(container)];if(prevComponent){var prevWrappedElement=prevComponent._currentElement,prevElement=prevWrappedElement.props;if(shouldUpdateReactComponent(prevElement,nextElement)){var publicInst=prevComponent._renderedComponent.getPublicInstance(),updatedCallback=callback&&function(){callback.call(publicInst)};return ReactMount._updateRootComponent(prevComponent,nextWrappedElement,container,updatedCallback),publicInst}ReactMount.unmountComponentAtNode(container)}var reactRootElement=getReactRootElementInContainer(container),containerHasReactMarkup=reactRootElement&&!!internalGetID(reactRootElement),containerHasNonRootReactChild=hasNonRootReactChild(container);if(warning(!containerHasNonRootReactChild,"render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),!containerHasReactMarkup||reactRootElement.nextSibling)for(var rootElementSibling=reactRootElement;rootElementSibling;){if(internalGetID(rootElementSibling)){warning(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup.");break}rootElementSibling=rootElementSibling.nextSibling}var shouldReuseMarkup=containerHasReactMarkup&&!prevComponent&&!containerHasNonRootReactChild,component=ReactMount._renderNewRootComponent(nextWrappedElement,container,shouldReuseMarkup,null!=parentComponent?parentComponent._reactInternalInstance._processChildContext(parentComponent._reactInternalInstance._context):emptyObject)._renderedComponent.getPublicInstance();return callback&&callback.call(component),component},render:function(nextElement,container,callback){return ReactMount._renderSubtreeIntoContainer(null,nextElement,container,callback)},registerContainer:function(container){var reactRootID=getReactRootID(container);return reactRootID&&(reactRootID=ReactInstanceHandles.getReactRootIDFromNodeID(reactRootID)),reactRootID||(reactRootID=ReactInstanceHandles.createReactRootID()),containersByReactRootID[reactRootID]=container,reactRootID},unmountComponentAtNode:function(container){warning(null==ReactCurrentOwner.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate. Check the render method of %s.",ReactCurrentOwner.current&&ReactCurrentOwner.current.getName()||"ReactCompositeComponent"),!container||container.nodeType!==ELEMENT_NODE_TYPE&&container.nodeType!==DOC_NODE_TYPE&&container.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE?invariant(!1,"unmountComponentAtNode(...): Target container is not a DOM element."):void 0;var reactRootID=getReactRootID(container),component=instancesByReactRootID[reactRootID];if(!component){var containerHasNonRootReactChild=hasNonRootReactChild(container),containerID=internalGetID(container),isContainerReactRoot=containerID&&containerID===ReactInstanceHandles.getReactRootIDFromNodeID(containerID);return warning(!containerHasNonRootReactChild,"unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",isContainerReactRoot?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."),!1}return ReactUpdates.batchedUpdates(unmountComponentFromNode,component,container),delete instancesByReactRootID[reactRootID],delete containersByReactRootID[reactRootID],delete rootElementsByReactRootID[reactRootID],!0},findReactContainerForID:function(id){var reactRootID=ReactInstanceHandles.getReactRootIDFromNodeID(id),container=containersByReactRootID[reactRootID],rootElement=rootElementsByReactRootID[reactRootID];if(rootElement&&rootElement.parentNode!==container){warning(internalGetID(rootElement)===reactRootID,"ReactMount: Root element ID differed from reactRootID.");var containerChild=container.firstChild;containerChild&&reactRootID===internalGetID(containerChild)?rootElementsByReactRootID[reactRootID]=containerChild:warning(!1,"ReactMount: Root element has been removed from its original container. New container: %s",rootElement.parentNode)}return container},findReactNodeByID:function(id){var reactRoot=ReactMount.findReactContainerForID(id);return ReactMount.findComponentRoot(reactRoot,id)},getFirstReactDOM:function(node){return findFirstReactDOMImpl(node)},findComponentRoot:function(ancestorNode,targetID){var firstChildren=findComponentRootReusableArray,childIndex=0,deepestAncestor=findDeepestCachedAncestor(targetID)||ancestorNode;for(warning(null!=deepestAncestor,"React can't find the root component node for data-reactid value `%s`. If you're seeing this message, it probably means that you've loaded two copies of React on the page. At this time, only a single copy of React can be loaded at a time.",targetID),firstChildren[0]=deepestAncestor.firstChild,firstChildren.length=1;childIndex<firstChildren.length;){for(var targetChild,child=firstChildren[childIndex++];child;){var childID=ReactMount.getID(child);childID?targetID===childID?targetChild=child:ReactInstanceHandles.isAncestorIDOf(childID,targetID)&&(firstChildren.length=childIndex=0,firstChildren.push(child.firstChild)):firstChildren.push(child.firstChild),child=child.nextSibling}if(targetChild)return firstChildren.length=0,targetChild}firstChildren.length=0,invariant(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",targetID,ReactMount.getID(ancestorNode))},_mountImageIntoNode:function(markup,container,shouldReuseMarkup,transaction){if(!container||container.nodeType!==ELEMENT_NODE_TYPE&&container.nodeType!==DOC_NODE_TYPE&&container.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE?invariant(!1,"mountComponentIntoNode(...): Target container is not valid."):void 0,shouldReuseMarkup){var rootElement=getReactRootElementInContainer(container);if(ReactMarkupChecksum.canReuseMarkup(markup,rootElement))return;var checksum=rootElement.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);rootElement.removeAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);var rootMarkup=rootElement.outerHTML;rootElement.setAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME,checksum);var normalizer,normalizedMarkup=markup;container.nodeType===ELEMENT_NODE_TYPE?(normalizer=document.createElement("div"),normalizer.innerHTML=markup,normalizedMarkup=normalizer.innerHTML):(normalizer=document.createElement("iframe"),document.body.appendChild(normalizer),normalizer.contentDocument.write(markup),normalizedMarkup=normalizer.contentDocument.documentElement.outerHTML,document.body.removeChild(normalizer));var diffIndex=firstDifferenceIndex(normalizedMarkup,rootMarkup),difference=" (client) "+normalizedMarkup.substring(diffIndex-20,diffIndex+20)+"\n (server) "+rootMarkup.substring(diffIndex-20,diffIndex+20);container.nodeType===DOC_NODE_TYPE?invariant(!1,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",difference):void 0,warning(!1,"React attempted to reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server:\n%s",difference)}if(container.nodeType===DOC_NODE_TYPE?invariant(!1,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See ReactDOMServer.renderToString() for server rendering."):void 0,transaction.useCreateElement){for(;container.lastChild;)container.removeChild(container.lastChild);container.appendChild(markup)}else setInnerHTML(container,markup)},ownerDocumentContextKey:ownerDocumentContextKey,getReactRootID:getReactRootID,getID:getID,setID:setID,getNode:getNode,getNodeFromInstance:getNodeFromInstance,isValid:isValid,purgeID:purgeID};ReactPerf.measureMethods(ReactMount,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),module.exports=ReactMount},{10:10,118:118,124:124,126:126,128:128,133:133,137:137,144:144,155:155,23:23,26:26,34:34,39:39,52:52,55:55,61:61,62:62,64:64,71:71,76:76,82:82,83:83}],66:[function(_dereq_,module,exports){"use strict";function enqueueInsertMarkup(parentID,markup,toIndex){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.INSERT_MARKUP,markupIndex:markupQueue.push(markup)-1,content:null,fromIndex:null,toIndex:toIndex})}function enqueueMove(parentID,fromIndex,toIndex){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:fromIndex,toIndex:toIndex})}function enqueueRemove(parentID,fromIndex){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.REMOVE_NODE,markupIndex:null,content:null,fromIndex:fromIndex,toIndex:null})}function enqueueSetMarkup(parentID,markup){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.SET_MARKUP,markupIndex:null,content:markup,fromIndex:null,toIndex:null})}function enqueueTextContent(parentID,textContent){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.TEXT_CONTENT,markupIndex:null,content:textContent,fromIndex:null,toIndex:null})}function processQueue(){updateQueue.length&&(ReactComponentEnvironment.processChildrenUpdates(updateQueue,markupQueue),clearQueue())}function clearQueue(){updateQueue.length=0,markupQueue.length=0}var ReactComponentEnvironment=_dereq_(32),ReactMultiChildUpdateTypes=_dereq_(67),ReactCurrentOwner=_dereq_(34),ReactReconciler=_dereq_(76),ReactChildReconciler=_dereq_(27),flattenChildren=_dereq_(109),updateDepth=0,updateQueue=[],markupQueue=[],ReactMultiChild={Mixin:{_reconcilerInstantiateChildren:function(nestedChildren,transaction,context){if(this._currentElement)try{return ReactCurrentOwner.current=this._currentElement._owner,ReactChildReconciler.instantiateChildren(nestedChildren,transaction,context)}finally{ReactCurrentOwner.current=null}return ReactChildReconciler.instantiateChildren(nestedChildren,transaction,context)},_reconcilerUpdateChildren:function(prevChildren,nextNestedChildrenElements,transaction,context){var nextChildren;if(this._currentElement){try{ReactCurrentOwner.current=this._currentElement._owner,nextChildren=flattenChildren(nextNestedChildrenElements)}finally{ReactCurrentOwner.current=null}return ReactChildReconciler.updateChildren(prevChildren,nextChildren,transaction,context)}return nextChildren=flattenChildren(nextNestedChildrenElements),ReactChildReconciler.updateChildren(prevChildren,nextChildren,transaction,context)},mountChildren:function(nestedChildren,transaction,context){var children=this._reconcilerInstantiateChildren(nestedChildren,transaction,context);this._renderedChildren=children;var mountImages=[],index=0;for(var name in children)if(children.hasOwnProperty(name)){var child=children[name],rootID=this._rootNodeID+name,mountImage=ReactReconciler.mountComponent(child,rootID,transaction,context);child._mountIndex=index++,mountImages.push(mountImage)}return mountImages},updateTextContent:function(nextContent){updateDepth++;var errorThrown=!0;try{var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren);for(var name in prevChildren)prevChildren.hasOwnProperty(name)&&this._unmountChild(prevChildren[name]);this.setTextContent(nextContent),errorThrown=!1}finally{updateDepth--,updateDepth||(errorThrown?clearQueue():processQueue())}},updateMarkup:function(nextMarkup){updateDepth++;var errorThrown=!0;try{var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren);for(var name in prevChildren)prevChildren.hasOwnProperty(name)&&this._unmountChildByName(prevChildren[name],name);this.setMarkup(nextMarkup),errorThrown=!1}finally{updateDepth--,updateDepth||(errorThrown?clearQueue():processQueue())}},updateChildren:function(nextNestedChildrenElements,transaction,context){updateDepth++;var errorThrown=!0;try{this._updateChildren(nextNestedChildrenElements,transaction,context),errorThrown=!1}finally{updateDepth--,updateDepth||(errorThrown?clearQueue():processQueue())}},_updateChildren:function(nextNestedChildrenElements,transaction,context){var prevChildren=this._renderedChildren,nextChildren=this._reconcilerUpdateChildren(prevChildren,nextNestedChildrenElements,transaction,context);if(this._renderedChildren=nextChildren,nextChildren||prevChildren){var name,lastIndex=0,nextIndex=0;for(name in nextChildren)if(nextChildren.hasOwnProperty(name)){var prevChild=prevChildren&&prevChildren[name],nextChild=nextChildren[name];prevChild===nextChild?(this.moveChild(prevChild,nextIndex,lastIndex),lastIndex=Math.max(prevChild._mountIndex,lastIndex),prevChild._mountIndex=nextIndex):(prevChild&&(lastIndex=Math.max(prevChild._mountIndex,lastIndex),this._unmountChild(prevChild)),this._mountChildByNameAtIndex(nextChild,name,nextIndex,transaction,context)),nextIndex++}for(name in prevChildren)!prevChildren.hasOwnProperty(name)||nextChildren&&nextChildren.hasOwnProperty(name)||this._unmountChild(prevChildren[name])}},unmountChildren:function(){var renderedChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(renderedChildren),this._renderedChildren=null},moveChild:function(child,toIndex,lastIndex){child._mountIndex<lastIndex&&enqueueMove(this._rootNodeID,child._mountIndex,toIndex)},createChild:function(child,mountImage){enqueueInsertMarkup(this._rootNodeID,mountImage,child._mountIndex)},removeChild:function(child){enqueueRemove(this._rootNodeID,child._mountIndex)},setTextContent:function(textContent){enqueueTextContent(this._rootNodeID,textContent)},setMarkup:function(markup){enqueueSetMarkup(this._rootNodeID,markup)},_mountChildByNameAtIndex:function(child,name,index,transaction,context){var rootID=this._rootNodeID+name,mountImage=ReactReconciler.mountComponent(child,rootID,transaction,context);child._mountIndex=index,this.createChild(child,mountImage)},_unmountChild:function(child){this.removeChild(child),child._mountIndex=null}}};module.exports=ReactMultiChild},{109:109,27:27,32:32,34:34,67:67,76:76}],67:[function(_dereq_,module,exports){"use strict";var keyMirror=_dereq_(147),ReactMultiChildUpdateTypes=keyMirror({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});module.exports=ReactMultiChildUpdateTypes},{147:147}],68:[function(_dereq_,module,exports){"use strict";function getComponentClassForElement(element){if("function"==typeof element.type)return element.type;var tag=element.type,componentClass=tagToComponentClass[tag];return null==componentClass&&(tagToComponentClass[tag]=componentClass=autoGenerateWrapperClass(tag)),componentClass}function createInternalComponent(element){return genericComponentClass?void 0:invariant(!1,"There is no registered component for the tag %s",element.type),new genericComponentClass(element.type,element.props)}function createInstanceForText(text){return new textComponentClass(text)}function isTextComponent(component){return component instanceof textComponentClass}var assign=_dereq_(23),invariant=_dereq_(144),autoGenerateWrapperClass=null,genericComponentClass=null,tagToComponentClass={},textComponentClass=null,ReactNativeComponentInjection={injectGenericComponentClass:function(componentClass){genericComponentClass=componentClass},injectTextComponentClass:function(componentClass){textComponentClass=componentClass},injectComponentClasses:function(componentClasses){assign(tagToComponentClass,componentClasses)}},ReactNativeComponent={getComponentClassForElement:getComponentClassForElement,createInternalComponent:createInternalComponent,createInstanceForText:createInstanceForText,isTextComponent:isTextComponent,injection:ReactNativeComponentInjection};module.exports=ReactNativeComponent},{144:144,23:23}],69:[function(_dereq_,module,exports){"use strict";function warnTDZ(publicInstance,callerName){warning(!1,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op. Please check the code for the %s component.",callerName,callerName,publicInstance.constructor&&publicInstance.constructor.displayName||"")}var warning=_dereq_(155),ReactNoopUpdateQueue={isMounted:function(publicInstance){return!1},enqueueCallback:function(publicInstance,callback){},enqueueForceUpdate:function(publicInstance){warnTDZ(publicInstance,"forceUpdate")},enqueueReplaceState:function(publicInstance,completeState){warnTDZ(publicInstance,"replaceState")},enqueueSetState:function(publicInstance,partialState){warnTDZ(publicInstance,"setState")},enqueueSetProps:function(publicInstance,partialProps){warnTDZ(publicInstance,"setProps")},enqueueReplaceProps:function(publicInstance,props){warnTDZ(publicInstance,"replaceProps")}};module.exports=ReactNoopUpdateQueue},{155:155}],70:[function(_dereq_,module,exports){"use strict";var invariant=_dereq_(144),ReactOwner={isValidOwner:function(object){return!(!object||"function"!=typeof object.attachRef||"function"!=typeof object.detachRef)},addComponentAsRefTo:function(component,ref,owner){ReactOwner.isValidOwner(owner)?void 0:invariant(!1,"addComponentAsRefTo(...): Only a ReactOwner can have refs. You might be adding a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."),owner.attachRef(ref,component)},removeComponentAsRefFrom:function(component,ref,owner){ReactOwner.isValidOwner(owner)?void 0:invariant(!1,"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. You might be removing a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."),owner.getPublicInstance().refs[ref]===component.getPublicInstance()&&owner.detachRef(ref)}};module.exports=ReactOwner},{144:144}],71:[function(_dereq_,module,exports){"use strict";function _noMeasure(objName,fnName,func){return func}var ReactPerf={enableMeasure:!1,storedMeasure:_noMeasure,measureMethods:function(object,objectName,methodNames){for(var key in methodNames)methodNames.hasOwnProperty(key)&&(object[key]=ReactPerf.measure(objectName,methodNames[key],object[key]))},measure:function(objName,fnName,func){var measuredFunc=null,wrapper=function(){return ReactPerf.enableMeasure?(measuredFunc||(measuredFunc=ReactPerf.storedMeasure(objName,fnName,func)),measuredFunc.apply(this,arguments)):func.apply(this,arguments)};return wrapper.displayName=objName+"_"+fnName,wrapper},injection:{injectMeasure:function(measure){ReactPerf.storedMeasure=measure}}};module.exports=ReactPerf},{}],72:[function(_dereq_,module,exports){"use strict";var ReactPropTypeLocationNames={};ReactPropTypeLocationNames={prop:"prop",context:"context",childContext:"child context"},module.exports=ReactPropTypeLocationNames},{}],73:[function(_dereq_,module,exports){"use strict";var keyMirror=_dereq_(147),ReactPropTypeLocations=keyMirror({prop:null,context:null,childContext:null});module.exports=ReactPropTypeLocations},{147:147}],74:[function(_dereq_,module,exports){"use strict";function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location,propFullName){if(componentName=componentName||ANONYMOUS,propFullName=propFullName||propName,null==props[propName]){var locationName=ReactPropTypeLocationNames[location];return isRequired?new Error("Required "+locationName+" `"+propFullName+"` was not specified in "+("`"+componentName+"`.")):null}return validate(props,propName,componentName,location,propFullName)}var chainedCheckType=checkType.bind(null,!1);return chainedCheckType.isRequired=checkType.bind(null,!0),chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if(propType!==expectedType){var locationName=ReactPropTypeLocationNames[location],preciseType=getPreciseType(propValue);return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+preciseType+"` supplied to `"+componentName+"`, expected ")+("`"+expectedType+"`."))}return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns(null))}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!Array.isArray(propValue)){var locationName=ReactPropTypeLocationNames[location],propType=getPropType(propValue);return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]");if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){if(!ReactElement.isValidElement(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var locationName=ReactPropTypeLocationNames[location],expectedClassName=expectedClass.name||ANONYMOUS,actualClassName=getClassName(props[propName]);return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+actualClassName+"` supplied to `"+componentName+"`, expected ")+("instance of `"+expectedClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){function validate(props,propName,componentName,location,propFullName){for(var propValue=props[propName],i=0;i<expectedValues.length;i++)if(propValue===expectedValues[i])return null;var locationName=ReactPropTypeLocationNames[location],valuesString=JSON.stringify(expectedValues);return new Error("Invalid "+locationName+" `"+propFullName+"` of value `"+propValue+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return createChainableTypeChecker(Array.isArray(expectedValues)?validate:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue)if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key);if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(null==checker(props,propName,componentName,location,propFullName))return null}var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`."))}return createChainableTypeChecker(Array.isArray(arrayOfTypeCheckers)?validate:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(checker){var error=checker(propValue,key,componentName,location,propFullName+"."+key);if(error)return error}}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return!0;case"boolean":return!propValue;case"object":if(Array.isArray(propValue))return propValue.every(isNode);if(null===propValue||ReactElement.isValidElement(propValue))return!0;var iteratorFn=getIteratorFn(propValue);if(!iteratorFn)return!1;var step,iterator=iteratorFn.call(propValue);if(iteratorFn!==propValue.entries){for(;!(step=iterator.next()).done;)if(!isNode(step.value))return!1}else for(;!(step=iterator.next()).done;){var entry=step.value;if(entry&&!isNode(entry[1]))return!1}return!0;default:return!1}}function getPropType(propValue){var propType=typeof propValue;return Array.isArray(propValue)?"array":propValue instanceof RegExp?"object":propType}function getPreciseType(propValue){var propType=getPropType(propValue);if("object"===propType){if(propValue instanceof Date)return"date";if(propValue instanceof RegExp)return"regexp"}return propType}function getClassName(propValue){return propValue.constructor&&propValue.constructor.name?propValue.constructor.name:"<<anonymous>>"}var ReactElement=_dereq_(52),ReactPropTypeLocationNames=_dereq_(72),emptyFunction=_dereq_(136),getIteratorFn=_dereq_(115),ANONYMOUS="<<anonymous>>",ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};module.exports=ReactPropTypes},{115:115,136:136,52:52,72:72}],75:[function(_dereq_,module,exports){"use strict";function ReactReconcileTransaction(forceHTML){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!forceHTML&&ReactDOMFeatureFlags.useCreateElement}var CallbackQueue=_dereq_(6),PooledClass=_dereq_(24),ReactBrowserEventEmitter=_dereq_(26),ReactDOMFeatureFlags=_dereq_(39),ReactInputSelection=_dereq_(60),Transaction=_dereq_(100),assign=_dereq_(23),SELECTION_RESTORATION={initialize:ReactInputSelection.getSelectionInformation,close:ReactInputSelection.restoreSelection},EVENT_SUPPRESSION={initialize:function(){var currentlyEnabled=ReactBrowserEventEmitter.isEnabled();return ReactBrowserEventEmitter.setEnabled(!1),currentlyEnabled},close:function(previouslyEnabled){ReactBrowserEventEmitter.setEnabled(previouslyEnabled)}},ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},TRANSACTION_WRAPPERS=[SELECTION_RESTORATION,EVENT_SUPPRESSION,ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactReconcileTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactReconcileTransaction),module.exports=ReactReconcileTransaction},{100:100,23:23,24:24,26:26,39:39,6:6,60:60}],76:[function(_dereq_,module,exports){"use strict";function attachRefs(){ReactRef.attachRefs(this,this._currentElement)}var ReactRef=_dereq_(77),ReactReconciler={mountComponent:function(internalInstance,rootID,transaction,context){var markup=internalInstance.mountComponent(rootID,transaction,context);return internalInstance._currentElement&&null!=internalInstance._currentElement.ref&&transaction.getReactMountReady().enqueue(attachRefs,internalInstance),markup},unmountComponent:function(internalInstance){ReactRef.detachRefs(internalInstance,internalInstance._currentElement),internalInstance.unmountComponent()},receiveComponent:function(internalInstance,nextElement,transaction,context){var prevElement=internalInstance._currentElement;if(nextElement!==prevElement||context!==internalInstance._context){var refsChanged=ReactRef.shouldUpdateRefs(prevElement,nextElement);refsChanged&&ReactRef.detachRefs(internalInstance,prevElement),internalInstance.receiveComponent(nextElement,transaction,context),refsChanged&&internalInstance._currentElement&&null!=internalInstance._currentElement.ref&&transaction.getReactMountReady().enqueue(attachRefs,internalInstance)}},performUpdateIfNecessary:function(internalInstance,transaction){internalInstance.performUpdateIfNecessary(transaction)}};module.exports=ReactReconciler},{77:77}],77:[function(_dereq_,module,exports){"use strict";function attachRef(ref,component,owner){"function"==typeof ref?ref(component.getPublicInstance()):ReactOwner.addComponentAsRefTo(component,ref,owner)}function detachRef(ref,component,owner){"function"==typeof ref?ref(null):ReactOwner.removeComponentAsRefFrom(component,ref,owner)}var ReactOwner=_dereq_(70),ReactRef={};ReactRef.attachRefs=function(instance,element){if(null!==element&&element!==!1){var ref=element.ref;null!=ref&&attachRef(ref,instance,element._owner)}},ReactRef.shouldUpdateRefs=function(prevElement,nextElement){var prevEmpty=null===prevElement||prevElement===!1,nextEmpty=null===nextElement||nextElement===!1;return prevEmpty||nextEmpty||nextElement._owner!==prevElement._owner||nextElement.ref!==prevElement.ref},ReactRef.detachRefs=function(instance,element){if(null!==element&&element!==!1){var ref=element.ref;null!=ref&&detachRef(ref,instance,element._owner)}},module.exports=ReactRef},{70:70}],78:[function(_dereq_,module,exports){"use strict";var ReactRootIndexInjection={injectCreateReactRootIndex:function(_createReactRootIndex){ReactRootIndex.createReactRootIndex=_createReactRootIndex}},ReactRootIndex={createReactRootIndex:null,injection:ReactRootIndexInjection};module.exports=ReactRootIndex},{}],79:[function(_dereq_,module,exports){"use strict";var ReactServerBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(callback){}};module.exports=ReactServerBatchingStrategy},{}],80:[function(_dereq_,module,exports){"use strict";function renderToString(element){ReactElement.isValidElement(element)?void 0:invariant(!1,"renderToString(): You must pass a valid ReactElement.");var transaction;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var id=ReactInstanceHandles.createReactRootID();return transaction=ReactServerRenderingTransaction.getPooled(!1),transaction.perform(function(){var componentInstance=instantiateReactComponent(element,null),markup=componentInstance.mountComponent(id,transaction,emptyObject);return ReactMarkupChecksum.addChecksumToMarkup(markup)},null)}finally{ReactServerRenderingTransaction.release(transaction),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}function renderToStaticMarkup(element){ReactElement.isValidElement(element)?void 0:invariant(!1,"renderToStaticMarkup(): You must pass a valid ReactElement.");var transaction;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var id=ReactInstanceHandles.createReactRootID();return transaction=ReactServerRenderingTransaction.getPooled(!0),transaction.perform(function(){var componentInstance=instantiateReactComponent(element,null);return componentInstance.mountComponent(id,transaction,emptyObject)},null)}finally{ReactServerRenderingTransaction.release(transaction),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}var ReactDefaultBatchingStrategy=_dereq_(48),ReactElement=_dereq_(52),ReactInstanceHandles=_dereq_(61),ReactMarkupChecksum=_dereq_(64),ReactServerBatchingStrategy=_dereq_(79),ReactServerRenderingTransaction=_dereq_(81),ReactUpdates=_dereq_(83),emptyObject=_dereq_(137),instantiateReactComponent=_dereq_(118),invariant=_dereq_(144);module.exports={renderToString:renderToString,renderToStaticMarkup:renderToStaticMarkup}},{118:118,137:137,144:144,48:48,52:52,61:61,64:64,79:79,81:81,83:83}],81:[function(_dereq_,module,exports){"use strict";function ReactServerRenderingTransaction(renderToStaticMarkup){this.reinitializeTransaction(),this.renderToStaticMarkup=renderToStaticMarkup,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!1}var PooledClass=_dereq_(24),CallbackQueue=_dereq_(6),Transaction=_dereq_(100),assign=_dereq_(23),emptyFunction=_dereq_(136),ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:emptyFunction},TRANSACTION_WRAPPERS=[ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactServerRenderingTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactServerRenderingTransaction),module.exports=ReactServerRenderingTransaction},{100:100,136:136,23:23,24:24,6:6}],82:[function(_dereq_,module,exports){"use strict";function enqueueUpdate(internalInstance){ReactUpdates.enqueueUpdate(internalInstance)}function getInternalInstanceReadyForUpdate(publicInstance,callerName){var internalInstance=ReactInstanceMap.get(publicInstance);return internalInstance?(warning(null==ReactCurrentOwner.current,"%s(...): Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state.",callerName),internalInstance):(warning(!callerName,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op. Please check the code for the %s component.",callerName,callerName,publicInstance.constructor.displayName),null)}var ReactCurrentOwner=_dereq_(34),ReactElement=_dereq_(52),ReactInstanceMap=_dereq_(62),ReactUpdates=_dereq_(83),assign=_dereq_(23),invariant=_dereq_(144),warning=_dereq_(155),ReactUpdateQueue={isMounted:function(publicInstance){var owner=ReactCurrentOwner.current;null!==owner&&(warning(owner._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",owner.getName()||"A component"),owner._warnedAboutRefsInRender=!0);var internalInstance=ReactInstanceMap.get(publicInstance);return!!internalInstance&&!!internalInstance._renderedComponent},enqueueCallback:function(publicInstance,callback){"function"!=typeof callback?invariant(!1,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."):void 0;var internalInstance=getInternalInstanceReadyForUpdate(publicInstance);return internalInstance?(internalInstance._pendingCallbacks?internalInstance._pendingCallbacks.push(callback):internalInstance._pendingCallbacks=[callback],void enqueueUpdate(internalInstance)):null},enqueueCallbackInternal:function(internalInstance,callback){"function"!=typeof callback?invariant(!1,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."):void 0,internalInstance._pendingCallbacks?internalInstance._pendingCallbacks.push(callback):internalInstance._pendingCallbacks=[callback],enqueueUpdate(internalInstance)},enqueueForceUpdate:function(publicInstance){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"forceUpdate");internalInstance&&(internalInstance._pendingForceUpdate=!0,enqueueUpdate(internalInstance))},enqueueReplaceState:function(publicInstance,completeState){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"replaceState");internalInstance&&(internalInstance._pendingStateQueue=[completeState],internalInstance._pendingReplaceState=!0,enqueueUpdate(internalInstance))},enqueueSetState:function(publicInstance,partialState){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"setState");if(internalInstance){var queue=internalInstance._pendingStateQueue||(internalInstance._pendingStateQueue=[]);queue.push(partialState),enqueueUpdate(internalInstance)}},enqueueSetProps:function(publicInstance,partialProps){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"setProps");internalInstance&&ReactUpdateQueue.enqueueSetPropsInternal(internalInstance,partialProps)},enqueueSetPropsInternal:function(internalInstance,partialProps){var topLevelWrapper=internalInstance._topLevelWrapper;topLevelWrapper?void 0:invariant(!1,"setProps(...): You called `setProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created.");var wrapElement=topLevelWrapper._pendingElement||topLevelWrapper._currentElement,element=wrapElement.props,props=assign({},element.props,partialProps);topLevelWrapper._pendingElement=ReactElement.cloneAndReplaceProps(wrapElement,ReactElement.cloneAndReplaceProps(element,props)),enqueueUpdate(topLevelWrapper)},enqueueReplaceProps:function(publicInstance,props){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"replaceProps");internalInstance&&ReactUpdateQueue.enqueueReplacePropsInternal(internalInstance,props)},enqueueReplacePropsInternal:function(internalInstance,props){var topLevelWrapper=internalInstance._topLevelWrapper;topLevelWrapper?void 0:invariant(!1,"replaceProps(...): You called `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created.");var wrapElement=topLevelWrapper._pendingElement||topLevelWrapper._currentElement,element=wrapElement.props;topLevelWrapper._pendingElement=ReactElement.cloneAndReplaceProps(wrapElement,ReactElement.cloneAndReplaceProps(element,props)),enqueueUpdate(topLevelWrapper)},enqueueElementInternal:function(internalInstance,newElement){internalInstance._pendingElement=newElement,enqueueUpdate(internalInstance)}};module.exports=ReactUpdateQueue},{144:144,155:155,23:23,34:34,52:52,62:62,83:83}],83:[function(_dereq_,module,exports){"use strict";function ensureInjected(){ReactUpdates.ReactReconcileTransaction&&batchingStrategy?void 0:invariant(!1,"ReactUpdates: must inject a reconcile transaction class and batching strategy")}function ReactUpdatesFlushTransaction(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=CallbackQueue.getPooled(),this.reconcileTransaction=ReactUpdates.ReactReconcileTransaction.getPooled(!1)}function batchedUpdates(callback,a,b,c,d,e){ensureInjected(),batchingStrategy.batchedUpdates(callback,a,b,c,d,e)}function mountOrderComparator(c1,c2){return c1._mountOrder-c2._mountOrder}function runBatchedUpdates(transaction){var len=transaction.dirtyComponentsLength;len!==dirtyComponents.length?invariant(!1,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",len,dirtyComponents.length):void 0,dirtyComponents.sort(mountOrderComparator);for(var i=0;i<len;i++){var component=dirtyComponents[i],callbacks=component._pendingCallbacks;if(component._pendingCallbacks=null,ReactReconciler.performUpdateIfNecessary(component,transaction.reconcileTransaction),callbacks)for(var j=0;j<callbacks.length;j++)transaction.callbackQueue.enqueue(callbacks[j],component.getPublicInstance())}}function enqueueUpdate(component){return ensureInjected(),batchingStrategy.isBatchingUpdates?void dirtyComponents.push(component):void batchingStrategy.batchedUpdates(enqueueUpdate,component)}function asap(callback,context){batchingStrategy.isBatchingUpdates?void 0:invariant(!1,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),asapCallbackQueue.enqueue(callback,context),asapEnqueued=!0}var CallbackQueue=_dereq_(6),PooledClass=_dereq_(24),ReactPerf=_dereq_(71),ReactReconciler=_dereq_(76),Transaction=_dereq_(100),assign=_dereq_(23),invariant=_dereq_(144),dirtyComponents=[],asapCallbackQueue=CallbackQueue.getPooled(),asapEnqueued=!1,batchingStrategy=null,NESTED_UPDATES={initialize:function(){this.dirtyComponentsLength=dirtyComponents.length},close:function(){this.dirtyComponentsLength!==dirtyComponents.length?(dirtyComponents.splice(0,this.dirtyComponentsLength),flushBatchedUpdates()):dirtyComponents.length=0}},UPDATE_QUEUEING={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},TRANSACTION_WRAPPERS=[NESTED_UPDATES,UPDATE_QUEUEING];assign(ReactUpdatesFlushTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},destructor:function(){this.dirtyComponentsLength=null,CallbackQueue.release(this.callbackQueue),this.callbackQueue=null,ReactUpdates.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(method,scope,a){return Transaction.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,method,scope,a)}}),PooledClass.addPoolingTo(ReactUpdatesFlushTransaction);var flushBatchedUpdates=function(){for(;dirtyComponents.length||asapEnqueued;){if(dirtyComponents.length){var transaction=ReactUpdatesFlushTransaction.getPooled();transaction.perform(runBatchedUpdates,null,transaction),ReactUpdatesFlushTransaction.release(transaction)}if(asapEnqueued){asapEnqueued=!1;var queue=asapCallbackQueue;asapCallbackQueue=CallbackQueue.getPooled(),queue.notifyAll(),CallbackQueue.release(queue)}}};flushBatchedUpdates=ReactPerf.measure("ReactUpdates","flushBatchedUpdates",flushBatchedUpdates);var ReactUpdatesInjection={injectReconcileTransaction:function(ReconcileTransaction){ReconcileTransaction?void 0:invariant(!1,"ReactUpdates: must provide a reconcile transaction class"),ReactUpdates.ReactReconcileTransaction=ReconcileTransaction},injectBatchingStrategy:function(_batchingStrategy){_batchingStrategy?void 0:invariant(!1,"ReactUpdates: must provide a batching strategy"),"function"!=typeof _batchingStrategy.batchedUpdates?invariant(!1,"ReactUpdates: must provide a batchedUpdates() function"):void 0,"boolean"!=typeof _batchingStrategy.isBatchingUpdates?invariant(!1,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"):void 0,batchingStrategy=_batchingStrategy}},ReactUpdates={ReactReconcileTransaction:null,batchedUpdates:batchedUpdates,enqueueUpdate:enqueueUpdate,flushBatchedUpdates:flushBatchedUpdates,injection:ReactUpdatesInjection,asap:asap};module.exports=ReactUpdates},{100:100,144:144,23:23,24:24,6:6,71:71,76:76}],84:[function(_dereq_,module,exports){"use strict";module.exports="0.14.3"},{}],85:[function(_dereq_,module,exports){"use strict";var DOMProperty=_dereq_(10),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,NS={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},SVGDOMPropertyConfig={Properties:{clipPath:MUST_USE_ATTRIBUTE,cx:MUST_USE_ATTRIBUTE,cy:MUST_USE_ATTRIBUTE,d:MUST_USE_ATTRIBUTE,dx:MUST_USE_ATTRIBUTE,dy:MUST_USE_ATTRIBUTE,fill:MUST_USE_ATTRIBUTE,fillOpacity:MUST_USE_ATTRIBUTE,fontFamily:MUST_USE_ATTRIBUTE,fontSize:MUST_USE_ATTRIBUTE,fx:MUST_USE_ATTRIBUTE,fy:MUST_USE_ATTRIBUTE,gradientTransform:MUST_USE_ATTRIBUTE,gradientUnits:MUST_USE_ATTRIBUTE,markerEnd:MUST_USE_ATTRIBUTE,markerMid:MUST_USE_ATTRIBUTE,markerStart:MUST_USE_ATTRIBUTE,offset:MUST_USE_ATTRIBUTE,opacity:MUST_USE_ATTRIBUTE,patternContentUnits:MUST_USE_ATTRIBUTE,patternUnits:MUST_USE_ATTRIBUTE,points:MUST_USE_ATTRIBUTE,preserveAspectRatio:MUST_USE_ATTRIBUTE,r:MUST_USE_ATTRIBUTE,rx:MUST_USE_ATTRIBUTE,ry:MUST_USE_ATTRIBUTE,spreadMethod:MUST_USE_ATTRIBUTE,stopColor:MUST_USE_ATTRIBUTE,stopOpacity:MUST_USE_ATTRIBUTE,stroke:MUST_USE_ATTRIBUTE,strokeDasharray:MUST_USE_ATTRIBUTE,strokeLinecap:MUST_USE_ATTRIBUTE,strokeOpacity:MUST_USE_ATTRIBUTE,strokeWidth:MUST_USE_ATTRIBUTE,textAnchor:MUST_USE_ATTRIBUTE,transform:MUST_USE_ATTRIBUTE,version:MUST_USE_ATTRIBUTE,viewBox:MUST_USE_ATTRIBUTE,x1:MUST_USE_ATTRIBUTE,x2:MUST_USE_ATTRIBUTE,x:MUST_USE_ATTRIBUTE,xlinkActuate:MUST_USE_ATTRIBUTE,xlinkArcrole:MUST_USE_ATTRIBUTE,xlinkHref:MUST_USE_ATTRIBUTE,xlinkRole:MUST_USE_ATTRIBUTE,xlinkShow:MUST_USE_ATTRIBUTE,xlinkTitle:MUST_USE_ATTRIBUTE,xlinkType:MUST_USE_ATTRIBUTE,xmlBase:MUST_USE_ATTRIBUTE,xmlLang:MUST_USE_ATTRIBUTE,xmlSpace:MUST_USE_ATTRIBUTE,y1:MUST_USE_ATTRIBUTE,y2:MUST_USE_ATTRIBUTE,y:MUST_USE_ATTRIBUTE},DOMAttributeNamespaces:{xlinkActuate:NS.xlink,xlinkArcrole:NS.xlink,xlinkHref:NS.xlink,xlinkRole:NS.xlink,xlinkShow:NS.xlink,xlinkTitle:NS.xlink,xlinkType:NS.xlink,xmlBase:NS.xml,xmlLang:NS.xml,xmlSpace:NS.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};module.exports=SVGDOMPropertyConfig},{10:10}],86:[function(_dereq_,module,exports){"use strict";function getSelection(node){if("selectionStart"in node&&ReactInputSelection.hasSelectionCapabilities(node))return{start:node.selectionStart,end:node.selectionEnd};if(window.getSelection){var selection=window.getSelection();return{anchorNode:selection.anchorNode,anchorOffset:selection.anchorOffset,focusNode:selection.focusNode,focusOffset:selection.focusOffset}}if(document.selection){var range=document.selection.createRange();return{parentElement:range.parentElement(),text:range.text,top:range.boundingTop,left:range.boundingLeft}}}function constructSelectEvent(nativeEvent,nativeEventTarget){if(mouseDown||null==activeElement||activeElement!==getActiveElement())return null;var currentSelection=getSelection(activeElement);if(!lastSelection||!shallowEqual(lastSelection,currentSelection)){lastSelection=currentSelection;var syntheticEvent=SyntheticEvent.getPooled(eventTypes.select,activeElementID,nativeEvent,nativeEventTarget);return syntheticEvent.type="select",syntheticEvent.target=activeElement,EventPropagators.accumulateTwoPhaseDispatches(syntheticEvent),syntheticEvent}return null}var EventConstants=_dereq_(15),EventPropagators=_dereq_(19),ExecutionEnvironment=_dereq_(130),ReactInputSelection=_dereq_(60),SyntheticEvent=_dereq_(92),getActiveElement=_dereq_(139),isTextInputElement=_dereq_(120),keyOf=_dereq_(148),shallowEqual=_dereq_(153),topLevelTypes=EventConstants.topLevelTypes,skipSelectionChangeEvent=ExecutionEnvironment.canUseDOM&&"documentMode"in document&&document.documentMode<=11,eventTypes={select:{phasedRegistrationNames:{bubbled:keyOf({onSelect:null}),captured:keyOf({onSelectCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topContextMenu,topLevelTypes.topFocus,topLevelTypes.topKeyDown,topLevelTypes.topMouseDown,topLevelTypes.topMouseUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,lastSelection=null,mouseDown=!1,hasListener=!1,ON_SELECT_KEY=keyOf({onSelect:null}),SelectEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){if(!hasListener)return null;switch(topLevelType){case topLevelTypes.topFocus:(isTextInputElement(topLevelTarget)||"true"===topLevelTarget.contentEditable)&&(activeElement=topLevelTarget,activeElementID=topLevelTargetID,lastSelection=null);break;case topLevelTypes.topBlur:activeElement=null,activeElementID=null,lastSelection=null;break;case topLevelTypes.topMouseDown:mouseDown=!0;break;case topLevelTypes.topContextMenu:case topLevelTypes.topMouseUp:return mouseDown=!1,constructSelectEvent(nativeEvent,nativeEventTarget);case topLevelTypes.topSelectionChange:if(skipSelectionChangeEvent)break;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:return constructSelectEvent(nativeEvent,nativeEventTarget)}return null},didPutListener:function(id,registrationName,listener){registrationName===ON_SELECT_KEY&&(hasListener=!0)}};module.exports=SelectEventPlugin},{120:120,130:130,139:139,148:148,15:15,153:153,19:19,60:60,92:92}],87:[function(_dereq_,module,exports){"use strict";var GLOBAL_MOUNT_POINT_MAX=Math.pow(2,53),ServerReactRootIndex={createReactRootIndex:function(){return Math.ceil(Math.random()*GLOBAL_MOUNT_POINT_MAX)}};module.exports=ServerReactRootIndex},{}],88:[function(_dereq_,module,exports){"use strict";var EventConstants=_dereq_(15),EventListener=_dereq_(129),EventPropagators=_dereq_(19),ReactMount=_dereq_(65),SyntheticClipboardEvent=_dereq_(89),SyntheticEvent=_dereq_(92),SyntheticFocusEvent=_dereq_(93),SyntheticKeyboardEvent=_dereq_(95),SyntheticMouseEvent=_dereq_(96),SyntheticDragEvent=_dereq_(91),SyntheticTouchEvent=_dereq_(97),SyntheticUIEvent=_dereq_(98),SyntheticWheelEvent=_dereq_(99),emptyFunction=_dereq_(136),getEventCharCode=_dereq_(111),invariant=_dereq_(144),keyOf=_dereq_(148),topLevelTypes=EventConstants.topLevelTypes,eventTypes={abort:{phasedRegistrationNames:{bubbled:keyOf({onAbort:!0}),captured:keyOf({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:keyOf({onBlur:!0}),captured:keyOf({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:keyOf({onCanPlay:!0}),captured:keyOf({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:keyOf({onCanPlayThrough:!0}),captured:keyOf({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:keyOf({onClick:!0}),captured:keyOf({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:keyOf({onContextMenu:!0}),captured:keyOf({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:keyOf({onCopy:!0}),captured:keyOf({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:keyOf({onCut:!0}),captured:keyOf({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:keyOf({onDoubleClick:!0}),captured:keyOf({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:keyOf({onDrag:!0}),captured:keyOf({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:keyOf({onDragEnd:!0}),captured:keyOf({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:keyOf({onDragEnter:!0}),captured:keyOf({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:keyOf({onDragExit:!0}),captured:keyOf({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:keyOf({onDragLeave:!0}),captured:keyOf({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:keyOf({onDragOver:!0}),captured:keyOf({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:keyOf({onDragStart:!0}),captured:keyOf({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:keyOf({onDrop:!0}),captured:keyOf({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:keyOf({onDurationChange:!0}),captured:keyOf({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:keyOf({onEmptied:!0}),captured:keyOf({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:keyOf({onEncrypted:!0}),captured:keyOf({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:keyOf({onEnded:!0}),captured:keyOf({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:keyOf({onError:!0}),captured:keyOf({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:keyOf({onFocus:!0}),captured:keyOf({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:keyOf({onInput:!0}),captured:keyOf({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:keyOf({onKeyDown:!0}),captured:keyOf({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:keyOf({onKeyPress:!0}),captured:keyOf({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:keyOf({onKeyUp:!0}),captured:keyOf({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:keyOf({onLoad:!0}),captured:keyOf({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:keyOf({onLoadedData:!0}),captured:keyOf({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:keyOf({onLoadedMetadata:!0}),captured:keyOf({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:keyOf({onLoadStart:!0}),captured:keyOf({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:keyOf({onMouseDown:!0}),captured:keyOf({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:keyOf({onMouseMove:!0}),captured:keyOf({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:keyOf({onMouseOut:!0}),captured:keyOf({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:keyOf({onMouseOver:!0}),captured:keyOf({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:keyOf({onMouseUp:!0}),captured:keyOf({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:keyOf({onPaste:!0}),captured:keyOf({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:keyOf({onPause:!0}),captured:keyOf({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:keyOf({onPlay:!0}),captured:keyOf({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:keyOf({onPlaying:!0}),captured:keyOf({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:keyOf({onProgress:!0}),captured:keyOf({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:keyOf({onRateChange:!0}),captured:keyOf({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:keyOf({onReset:!0}),captured:keyOf({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:keyOf({onScroll:!0}),captured:keyOf({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:keyOf({onSeeked:!0}),captured:keyOf({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:keyOf({onSeeking:!0}),captured:keyOf({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:keyOf({onStalled:!0}),captured:keyOf({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:keyOf({onSubmit:!0}),captured:keyOf({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:keyOf({onSuspend:!0}),captured:keyOf({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:keyOf({onTimeUpdate:!0}),captured:keyOf({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:keyOf({onTouchCancel:!0}),captured:keyOf({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:keyOf({onTouchEnd:!0}),captured:keyOf({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:keyOf({onTouchMove:!0}),captured:keyOf({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:keyOf({onTouchStart:!0}),captured:keyOf({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:keyOf({onVolumeChange:!0}),captured:keyOf({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:keyOf({onWaiting:!0}),captured:keyOf({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:keyOf({onWheel:!0}),captured:keyOf({onWheelCapture:!0})}}},topLevelEventsToDispatchConfig={topAbort:eventTypes.abort,topBlur:eventTypes.blur,topCanPlay:eventTypes.canPlay,topCanPlayThrough:eventTypes.canPlayThrough,topClick:eventTypes.click,topContextMenu:eventTypes.contextMenu,topCopy:eventTypes.copy,topCut:eventTypes.cut,topDoubleClick:eventTypes.doubleClick,topDrag:eventTypes.drag,topDragEnd:eventTypes.dragEnd,topDragEnter:eventTypes.dragEnter,topDragExit:eventTypes.dragExit,topDragLeave:eventTypes.dragLeave,topDragOver:eventTypes.dragOver,topDragStart:eventTypes.dragStart,topDrop:eventTypes.drop,topDurationChange:eventTypes.durationChange,topEmptied:eventTypes.emptied,topEncrypted:eventTypes.encrypted,topEnded:eventTypes.ended,topError:eventTypes.error,topFocus:eventTypes.focus,topInput:eventTypes.input,topKeyDown:eventTypes.keyDown,topKeyPress:eventTypes.keyPress,topKeyUp:eventTypes.keyUp,topLoad:eventTypes.load,topLoadedData:eventTypes.loadedData,topLoadedMetadata:eventTypes.loadedMetadata,topLoadStart:eventTypes.loadStart,topMouseDown:eventTypes.mouseDown,topMouseMove:eventTypes.mouseMove,topMouseOut:eventTypes.mouseOut,topMouseOver:eventTypes.mouseOver,topMouseUp:eventTypes.mouseUp,topPaste:eventTypes.paste,topPause:eventTypes.pause,topPlay:eventTypes.play,topPlaying:eventTypes.playing,topProgress:eventTypes.progress,topRateChange:eventTypes.rateChange,topReset:eventTypes.reset,topScroll:eventTypes.scroll,topSeeked:eventTypes.seeked,topSeeking:eventTypes.seeking,topStalled:eventTypes.stalled,topSubmit:eventTypes.submit,topSuspend:eventTypes.suspend,topTimeUpdate:eventTypes.timeUpdate,topTouchCancel:eventTypes.touchCancel,topTouchEnd:eventTypes.touchEnd,topTouchMove:eventTypes.touchMove,topTouchStart:eventTypes.touchStart,topVolumeChange:eventTypes.volumeChange,topWaiting:eventTypes.waiting,topWheel:eventTypes.wheel};for(var type in topLevelEventsToDispatchConfig)topLevelEventsToDispatchConfig[type].dependencies=[type];var ON_CLICK_KEY=keyOf({onClick:null}),onClickListeners={},SimpleEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){var dispatchConfig=topLevelEventsToDispatchConfig[topLevelType];if(!dispatchConfig)return null;var EventConstructor;switch(topLevelType){case topLevelTypes.topAbort:case topLevelTypes.topCanPlay:case topLevelTypes.topCanPlayThrough:case topLevelTypes.topDurationChange:case topLevelTypes.topEmptied:case topLevelTypes.topEncrypted:case topLevelTypes.topEnded:case topLevelTypes.topError:case topLevelTypes.topInput:case topLevelTypes.topLoad:case topLevelTypes.topLoadedData:case topLevelTypes.topLoadedMetadata:case topLevelTypes.topLoadStart:case topLevelTypes.topPause:case topLevelTypes.topPlay:case topLevelTypes.topPlaying:case topLevelTypes.topProgress:case topLevelTypes.topRateChange:case topLevelTypes.topReset:case topLevelTypes.topSeeked:case topLevelTypes.topSeeking:case topLevelTypes.topStalled:case topLevelTypes.topSubmit:case topLevelTypes.topSuspend:case topLevelTypes.topTimeUpdate:case topLevelTypes.topVolumeChange:case topLevelTypes.topWaiting:EventConstructor=SyntheticEvent;break;case topLevelTypes.topKeyPress:if(0===getEventCharCode(nativeEvent))return null;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:EventConstructor=SyntheticKeyboardEvent;break;case topLevelTypes.topBlur:case topLevelTypes.topFocus:EventConstructor=SyntheticFocusEvent;break;case topLevelTypes.topClick:if(2===nativeEvent.button)return null;case topLevelTypes.topContextMenu:case topLevelTypes.topDoubleClick:case topLevelTypes.topMouseDown:case topLevelTypes.topMouseMove:case topLevelTypes.topMouseOut:case topLevelTypes.topMouseOver:case topLevelTypes.topMouseUp:EventConstructor=SyntheticMouseEvent;break;case topLevelTypes.topDrag:case topLevelTypes.topDragEnd:case topLevelTypes.topDragEnter:case topLevelTypes.topDragExit:case topLevelTypes.topDragLeave:case topLevelTypes.topDragOver:case topLevelTypes.topDragStart:case topLevelTypes.topDrop:EventConstructor=SyntheticDragEvent;break;case topLevelTypes.topTouchCancel:case topLevelTypes.topTouchEnd:case topLevelTypes.topTouchMove:case topLevelTypes.topTouchStart:EventConstructor=SyntheticTouchEvent;break;case topLevelTypes.topScroll:EventConstructor=SyntheticUIEvent;break;case topLevelTypes.topWheel:EventConstructor=SyntheticWheelEvent;break;case topLevelTypes.topCopy:case topLevelTypes.topCut:case topLevelTypes.topPaste:EventConstructor=SyntheticClipboardEvent}EventConstructor?void 0:invariant(!1,"SimpleEventPlugin: Unhandled event type, `%s`.",topLevelType);var event=EventConstructor.getPooled(dispatchConfig,topLevelTargetID,nativeEvent,nativeEventTarget);return EventPropagators.accumulateTwoPhaseDispatches(event),event},didPutListener:function(id,registrationName,listener){if(registrationName===ON_CLICK_KEY){var node=ReactMount.getNode(id);onClickListeners[id]||(onClickListeners[id]=EventListener.listen(node,"click",emptyFunction))}},willDeleteListener:function(id,registrationName){registrationName===ON_CLICK_KEY&&(onClickListeners[id].remove(),delete onClickListeners[id])}};module.exports=SimpleEventPlugin},{111:111,129:129,136:136,144:144,148:148,15:15,19:19,65:65,89:89,91:91,92:92,93:93,95:95,96:96,97:97,98:98,99:99}],89:[function(_dereq_,module,exports){"use strict";function SyntheticClipboardEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=_dereq_(92),ClipboardEventInterface={clipboardData:function(event){return"clipboardData"in event?event.clipboardData:window.clipboardData}};SyntheticEvent.augmentClass(SyntheticClipboardEvent,ClipboardEventInterface),module.exports=SyntheticClipboardEvent},{92:92}],90:[function(_dereq_,module,exports){"use strict";function SyntheticCompositionEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=_dereq_(92),CompositionEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticCompositionEvent,CompositionEventInterface),module.exports=SyntheticCompositionEvent},{92:92}],91:[function(_dereq_,module,exports){"use strict";function SyntheticDragEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticMouseEvent=_dereq_(96),DragEventInterface={dataTransfer:null};SyntheticMouseEvent.augmentClass(SyntheticDragEvent,DragEventInterface),module.exports=SyntheticDragEvent},{96:96}],92:[function(_dereq_,module,exports){"use strict";function SyntheticEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){this.dispatchConfig=dispatchConfig,this.dispatchMarker=dispatchMarker,this.nativeEvent=nativeEvent,this.target=nativeEventTarget,this.currentTarget=nativeEventTarget;var Interface=this.constructor.Interface;for(var propName in Interface)if(Interface.hasOwnProperty(propName)){var normalize=Interface[propName];normalize?this[propName]=normalize(nativeEvent):this[propName]=nativeEvent[propName]}var defaultPrevented=null!=nativeEvent.defaultPrevented?nativeEvent.defaultPrevented:nativeEvent.returnValue===!1;defaultPrevented?this.isDefaultPrevented=emptyFunction.thatReturnsTrue:this.isDefaultPrevented=emptyFunction.thatReturnsFalse,this.isPropagationStopped=emptyFunction.thatReturnsFalse}var PooledClass=_dereq_(24),assign=_dereq_(23),emptyFunction=_dereq_(136),warning=_dereq_(155),EventInterface={type:null,currentTarget:emptyFunction.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(event){return event.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};assign(SyntheticEvent.prototype,{preventDefault:function(){this.defaultPrevented=!0;var event=this.nativeEvent;warning(event,"This synthetic event is reused for performance reasons. If you're seeing this, you're calling `preventDefault` on a released/nullified synthetic event. This is a no-op. See https://fb.me/react-event-pooling for more information."),event&&(event.preventDefault?event.preventDefault():event.returnValue=!1,this.isDefaultPrevented=emptyFunction.thatReturnsTrue)},stopPropagation:function(){var event=this.nativeEvent;warning(event,"This synthetic event is reused for performance reasons. If you're seeing this, you're calling `stopPropagation` on a released/nullified synthetic event. This is a no-op. See https://fb.me/react-event-pooling for more information."),event&&(event.stopPropagation?event.stopPropagation():event.cancelBubble=!0,this.isPropagationStopped=emptyFunction.thatReturnsTrue)},persist:function(){this.isPersistent=emptyFunction.thatReturnsTrue},isPersistent:emptyFunction.thatReturnsFalse,destructor:function(){var Interface=this.constructor.Interface;for(var propName in Interface)this[propName]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),SyntheticEvent.Interface=EventInterface,SyntheticEvent.augmentClass=function(Class,Interface){var Super=this,prototype=Object.create(Super.prototype);assign(prototype,Class.prototype),Class.prototype=prototype,Class.prototype.constructor=Class,Class.Interface=assign({},Super.Interface,Interface),Class.augmentClass=Super.augmentClass,PooledClass.addPoolingTo(Class,PooledClass.fourArgumentPooler)},PooledClass.addPoolingTo(SyntheticEvent,PooledClass.fourArgumentPooler),module.exports=SyntheticEvent},{136:136,155:155,23:23,24:24}],93:[function(_dereq_,module,exports){"use strict";function SyntheticFocusEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticUIEvent=_dereq_(98),FocusEventInterface={relatedTarget:null};SyntheticUIEvent.augmentClass(SyntheticFocusEvent,FocusEventInterface),module.exports=SyntheticFocusEvent},{98:98}],94:[function(_dereq_,module,exports){"use strict";function SyntheticInputEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=_dereq_(92),InputEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticInputEvent,InputEventInterface),module.exports=SyntheticInputEvent},{92:92}],95:[function(_dereq_,module,exports){"use strict";function SyntheticKeyboardEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticUIEvent=_dereq_(98),getEventCharCode=_dereq_(111),getEventKey=_dereq_(112),getEventModifierState=_dereq_(113),KeyboardEventInterface={key:getEventKey,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:getEventModifierState,charCode:function(event){return"keypress"===event.type?getEventCharCode(event):0},keyCode:function(event){return"keydown"===event.type||"keyup"===event.type?event.keyCode:0},which:function(event){return"keypress"===event.type?getEventCharCode(event):"keydown"===event.type||"keyup"===event.type?event.keyCode:0}};SyntheticUIEvent.augmentClass(SyntheticKeyboardEvent,KeyboardEventInterface),module.exports=SyntheticKeyboardEvent},{111:111,112:112,113:113,98:98}],96:[function(_dereq_,module,exports){"use strict";function SyntheticMouseEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticUIEvent=_dereq_(98),ViewportMetrics=_dereq_(101),getEventModifierState=_dereq_(113),MouseEventInterface={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:getEventModifierState,button:function(event){var button=event.button;return"which"in event?button:2===button?2:4===button?1:0},buttons:null,relatedTarget:function(event){return event.relatedTarget||(event.fromElement===event.srcElement?event.toElement:event.fromElement)},pageX:function(event){return"pageX"in event?event.pageX:event.clientX+ViewportMetrics.currentScrollLeft},pageY:function(event){return"pageY"in event?event.pageY:event.clientY+ViewportMetrics.currentScrollTop}};SyntheticUIEvent.augmentClass(SyntheticMouseEvent,MouseEventInterface),module.exports=SyntheticMouseEvent},{101:101,113:113,98:98}],97:[function(_dereq_,module,exports){"use strict";function SyntheticTouchEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticUIEvent=_dereq_(98),getEventModifierState=_dereq_(113),TouchEventInterface={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:getEventModifierState};SyntheticUIEvent.augmentClass(SyntheticTouchEvent,TouchEventInterface),module.exports=SyntheticTouchEvent},{113:113,98:98}],98:[function(_dereq_,module,exports){"use strict";function SyntheticUIEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=_dereq_(92),getEventTarget=_dereq_(114),UIEventInterface={view:function(event){if(event.view)return event.view;var target=getEventTarget(event);if(null!=target&&target.window===target)return target;var doc=target.ownerDocument;return doc?doc.defaultView||doc.parentWindow:window},detail:function(event){return event.detail||0}};SyntheticEvent.augmentClass(SyntheticUIEvent,UIEventInterface),module.exports=SyntheticUIEvent},{114:114,92:92}],99:[function(_dereq_,module,exports){"use strict";function SyntheticWheelEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticMouseEvent=_dereq_(96),WheelEventInterface={deltaX:function(event){return"deltaX"in event?event.deltaX:"wheelDeltaX"in event?-event.wheelDeltaX:0},deltaY:function(event){return"deltaY"in event?event.deltaY:"wheelDeltaY"in event?-event.wheelDeltaY:"wheelDelta"in event?-event.wheelDelta:0},deltaZ:null,deltaMode:null};SyntheticMouseEvent.augmentClass(SyntheticWheelEvent,WheelEventInterface),module.exports=SyntheticWheelEvent},{96:96}],100:[function(_dereq_,module,exports){"use strict";var invariant=_dereq_(144),Mixin={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(method,scope,a,b,c,d,e,f){this.isInTransaction()?invariant(!1,"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):void 0;var errorThrown,ret;try{this._isInTransaction=!0,errorThrown=!0,this.initializeAll(0),ret=method.call(scope,a,b,c,d,e,f),errorThrown=!1}finally{try{if(errorThrown)try{this.closeAll(0)}catch(err){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return ret},initializeAll:function(startIndex){for(var transactionWrappers=this.transactionWrappers,i=startIndex;i<transactionWrappers.length;i++){var wrapper=transactionWrappers[i];try{this.wrapperInitData[i]=Transaction.OBSERVED_ERROR,this.wrapperInitData[i]=wrapper.initialize?wrapper.initialize.call(this):null}finally{if(this.wrapperInitData[i]===Transaction.OBSERVED_ERROR)try{this.initializeAll(i+1)}catch(err){}}}},closeAll:function(startIndex){this.isInTransaction()?void 0:invariant(!1,"Transaction.closeAll(): Cannot close transaction when none are open.");for(var transactionWrappers=this.transactionWrappers,i=startIndex;i<transactionWrappers.length;i++){var errorThrown,wrapper=transactionWrappers[i],initData=this.wrapperInitData[i];try{errorThrown=!0,initData!==Transaction.OBSERVED_ERROR&&wrapper.close&&wrapper.close.call(this,initData),errorThrown=!1}finally{if(errorThrown)try{this.closeAll(i+1)}catch(e){}}}this.wrapperInitData.length=0}},Transaction={Mixin:Mixin,OBSERVED_ERROR:{}};module.exports=Transaction},{144:144}],101:[function(_dereq_,module,exports){"use strict";var ViewportMetrics={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(scrollPosition){ViewportMetrics.currentScrollLeft=scrollPosition.x,ViewportMetrics.currentScrollTop=scrollPosition.y}};module.exports=ViewportMetrics},{}],102:[function(_dereq_,module,exports){"use strict";function accumulateInto(current,next){if(null==next?invariant(!1,"accumulateInto(...): Accumulated items must not be null or undefined."):void 0,null==current)return next;var currentIsArray=Array.isArray(current),nextIsArray=Array.isArray(next);return currentIsArray&&nextIsArray?(current.push.apply(current,next),current):currentIsArray?(current.push(next),current):nextIsArray?[current].concat(next):[current,next]}var invariant=_dereq_(144);module.exports=accumulateInto},{144:144}],103:[function(_dereq_,module,exports){"use strict";function adler32(data){for(var a=1,b=0,i=0,l=data.length,m=l&-4;i<m;){for(;i<Math.min(i+4096,m);i+=4)b+=(a+=data.charCodeAt(i))+(a+=data.charCodeAt(i+1))+(a+=data.charCodeAt(i+2))+(a+=data.charCodeAt(i+3));a%=MOD,b%=MOD}for(;i<l;i++)b+=a+=data.charCodeAt(i);return a%=MOD,b%=MOD,a|b<<16}var MOD=65521;module.exports=adler32},{}],104:[function(_dereq_,module,exports){"use strict";var canDefineProperty=!1;try{Object.defineProperty({},"x",{get:function(){}}),canDefineProperty=!0}catch(x){}module.exports=canDefineProperty},{}],105:[function(_dereq_,module,exports){"use strict";function dangerousStyleValue(name,value){var isEmpty=null==value||"boolean"==typeof value||""===value;if(isEmpty)return"";var isNonNumeric=isNaN(value);return isNonNumeric||0===value||isUnitlessNumber.hasOwnProperty(name)&&isUnitlessNumber[name]?""+value:("string"==typeof value&&(value=value.trim()),value+"px")}var CSSProperty=_dereq_(4),isUnitlessNumber=CSSProperty.isUnitlessNumber;module.exports=dangerousStyleValue},{4:4}],106:[function(_dereq_,module,exports){"use strict";function deprecated(fnName,newModule,newPackage,ctx,fn){var warned=!1,newFn=function(){return warning(warned,"React.%s is deprecated. Please use %s.%s from require('%s') instead.",fnName,newModule,fnName,newPackage),warned=!0,fn.apply(ctx,arguments)};return assign(newFn,fn)}var assign=_dereq_(23),warning=_dereq_(155);module.exports=deprecated},{155:155,23:23}],107:[function(_dereq_,module,exports){"use strict";function escaper(match){return ESCAPE_LOOKUP[match]}function escapeTextContentForBrowser(text){return(""+text).replace(ESCAPE_REGEX,escaper)}var ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;module.exports=escapeTextContentForBrowser},{}],108:[function(_dereq_,module,exports){"use strict";function findDOMNode(componentOrElement){var owner=ReactCurrentOwner.current;return null!==owner&&(warning(owner._warnedAboutRefsInRender,"%s is accessing getDOMNode or findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",owner.getName()||"A component"),owner._warnedAboutRefsInRender=!0),null==componentOrElement?null:1===componentOrElement.nodeType?componentOrElement:ReactInstanceMap.has(componentOrElement)?ReactMount.getNodeFromInstance(componentOrElement):(null!=componentOrElement.render&&"function"==typeof componentOrElement.render?invariant(!1,"findDOMNode was called on an unmounted component."):void 0,void invariant(!1,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(componentOrElement)))}var ReactCurrentOwner=_dereq_(34),ReactInstanceMap=_dereq_(62),ReactMount=_dereq_(65),invariant=_dereq_(144),warning=_dereq_(155);module.exports=findDOMNode},{144:144,155:155,34:34,62:62,65:65}],109:[function(_dereq_,module,exports){"use strict";function flattenSingleChildIntoContext(traverseContext,child,name){var result=traverseContext,keyUnique=void 0===result[name];warning(keyUnique,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",name),keyUnique&&null!=child&&(result[name]=child)}function flattenChildren(children){if(null==children)return children;var result={};return traverseAllChildren(children,flattenSingleChildIntoContext,result),result}var traverseAllChildren=_dereq_(127),warning=_dereq_(155);module.exports=flattenChildren},{127:127,155:155}],110:[function(_dereq_,module,exports){"use strict";var forEachAccumulated=function(arr,cb,scope){Array.isArray(arr)?arr.forEach(cb,scope):arr&&cb.call(scope,arr)};module.exports=forEachAccumulated},{}],111:[function(_dereq_,module,exports){"use strict";function getEventCharCode(nativeEvent){var charCode,keyCode=nativeEvent.keyCode;return"charCode"in nativeEvent?(charCode=nativeEvent.charCode,0===charCode&&13===keyCode&&(charCode=13)):charCode=keyCode,charCode>=32||13===charCode?charCode:0}module.exports=getEventCharCode},{}],112:[function(_dereq_,module,exports){"use strict";function getEventKey(nativeEvent){if(nativeEvent.key){var key=normalizeKey[nativeEvent.key]||nativeEvent.key;if("Unidentified"!==key)return key}if("keypress"===nativeEvent.type){var charCode=getEventCharCode(nativeEvent);return 13===charCode?"Enter":String.fromCharCode(charCode)}return"keydown"===nativeEvent.type||"keyup"===nativeEvent.type?translateToKey[nativeEvent.keyCode]||"Unidentified":""}var getEventCharCode=_dereq_(111),normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};module.exports=getEventKey},{111:111}],113:[function(_dereq_,module,exports){"use strict";function modifierStateGetter(keyArg){var syntheticEvent=this,nativeEvent=syntheticEvent.nativeEvent;if(nativeEvent.getModifierState)return nativeEvent.getModifierState(keyArg);var keyProp=modifierKeyToProp[keyArg];return!!keyProp&&!!nativeEvent[keyProp]}function getEventModifierState(nativeEvent){return modifierStateGetter}var modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};module.exports=getEventModifierState},{}],114:[function(_dereq_,module,exports){"use strict";function getEventTarget(nativeEvent){var target=nativeEvent.target||nativeEvent.srcElement||window;return 3===target.nodeType?target.parentNode:target}module.exports=getEventTarget},{}],115:[function(_dereq_,module,exports){"use strict";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if("function"==typeof iteratorFn)return iteratorFn}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator";module.exports=getIteratorFn},{}],116:[function(_dereq_,module,exports){"use strict";function getLeafNode(node){for(;node&&node.firstChild;)node=node.firstChild;return node}function getSiblingNode(node){for(;node;){if(node.nextSibling)return node.nextSibling;node=node.parentNode}}function getNodeForCharacterOffset(root,offset){for(var node=getLeafNode(root),nodeStart=0,nodeEnd=0;node;){if(3===node.nodeType){if(nodeEnd=nodeStart+node.textContent.length,nodeStart<=offset&&nodeEnd>=offset)return{node:node,offset:offset-nodeStart};nodeStart=nodeEnd}node=getLeafNode(getSiblingNode(node))}}module.exports=getNodeForCharacterOffset},{}],117:[function(_dereq_,module,exports){"use strict";function getTextContentAccessor(){return!contentKey&&ExecutionEnvironment.canUseDOM&&(contentKey="textContent"in document.documentElement?"textContent":"innerText"),contentKey}var ExecutionEnvironment=_dereq_(130),contentKey=null;module.exports=getTextContentAccessor},{130:130}],118:[function(_dereq_,module,exports){"use strict";function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name)return" Check the render method of `"+name+"`."}return""}function isInternalComponentType(type){return"function"==typeof type&&"undefined"!=typeof type.prototype&&"function"==typeof type.prototype.mountComponent&&"function"==typeof type.prototype.receiveComponent}function instantiateReactComponent(node){var instance;if(null===node||node===!1)instance=new ReactEmptyComponent(instantiateReactComponent);else if("object"==typeof node){var element=node;!element||"function"!=typeof element.type&&"string"!=typeof element.type?invariant(!1,"Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",null==element.type?element.type:typeof element.type,getDeclarationErrorAddendum(element._owner)):void 0,instance="string"==typeof element.type?ReactNativeComponent.createInternalComponent(element):isInternalComponentType(element.type)?new element.type(element):new ReactCompositeComponentWrapper}else"string"==typeof node||"number"==typeof node?instance=ReactNativeComponent.createInstanceForText(node):invariant(!1,"Encountered invalid React node of type %s",typeof node);return warning("function"==typeof instance.construct&&"function"==typeof instance.mountComponent&&"function"==typeof instance.receiveComponent&&"function"==typeof instance.unmountComponent,"Only React Components can be mounted."),instance.construct(node),instance._mountIndex=0,instance._mountImage=null,instance._isOwnerNecessary=!1,instance._warnedAboutRefsInRender=!1,Object.preventExtensions&&Object.preventExtensions(instance),instance}var ReactCompositeComponent=_dereq_(33),ReactEmptyComponent=_dereq_(54),ReactNativeComponent=_dereq_(68),assign=_dereq_(23),invariant=_dereq_(144),warning=_dereq_(155),ReactCompositeComponentWrapper=function(){};assign(ReactCompositeComponentWrapper.prototype,ReactCompositeComponent.Mixin,{_instantiateReactComponent:instantiateReactComponent}),module.exports=instantiateReactComponent},{144:144,155:155,23:23,33:33,54:54,68:68}],119:[function(_dereq_,module,exports){"use strict";function isEventSupported(eventNameSuffix,capture){if(!ExecutionEnvironment.canUseDOM||capture&&!("addEventListener"in document))return!1;var eventName="on"+eventNameSuffix,isSupported=eventName in document;if(!isSupported){var element=document.createElement("div");element.setAttribute(eventName,"return;"),isSupported="function"==typeof element[eventName]}return!isSupported&&useHasFeature&&"wheel"===eventNameSuffix&&(isSupported=document.implementation.hasFeature("Events.wheel","3.0")),isSupported}var useHasFeature,ExecutionEnvironment=_dereq_(130);ExecutionEnvironment.canUseDOM&&(useHasFeature=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),module.exports=isEventSupported},{130:130}],120:[function(_dereq_,module,exports){"use strict";function isTextInputElement(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return nodeName&&("input"===nodeName&&supportedInputTypes[elem.type]||"textarea"===nodeName)}var supportedInputTypes={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};module.exports=isTextInputElement},{}],121:[function(_dereq_,module,exports){"use strict";function onlyChild(children){return ReactElement.isValidElement(children)?void 0:invariant(!1,"onlyChild must be passed a children with exactly one child."),children}var ReactElement=_dereq_(52),invariant=_dereq_(144);module.exports=onlyChild},{144:144,52:52}],122:[function(_dereq_,module,exports){"use strict";function quoteAttributeValueForBrowser(value){return'"'+escapeTextContentForBrowser(value)+'"'}var escapeTextContentForBrowser=_dereq_(107);module.exports=quoteAttributeValueForBrowser},{107:107}],123:[function(_dereq_,module,exports){"use strict";var ReactMount=_dereq_(65);module.exports=ReactMount.renderSubtreeIntoContainer},{65:65}],124:[function(_dereq_,module,exports){"use strict";var ExecutionEnvironment=_dereq_(130),WHITESPACE_TEST=/^[ \r\n\t\f]/,NONVISIBLE_TEST=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,setInnerHTML=function(node,html){node.innerHTML=html};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(setInnerHTML=function(node,html){MSApp.execUnsafeLocalFunction(function(){node.innerHTML=html})}),ExecutionEnvironment.canUseDOM){var testElement=document.createElement("div");testElement.innerHTML=" ",""===testElement.innerHTML&&(setInnerHTML=function(node,html){if(node.parentNode&&node.parentNode.replaceChild(node,node),WHITESPACE_TEST.test(html)||"<"===html[0]&&NONVISIBLE_TEST.test(html)){node.innerHTML=String.fromCharCode(65279)+html;var textNode=node.firstChild;1===textNode.data.length?node.removeChild(textNode):textNode.deleteData(0,1)}else node.innerHTML=html})}module.exports=setInnerHTML},{130:130}],125:[function(_dereq_,module,exports){"use strict";var ExecutionEnvironment=_dereq_(130),escapeTextContentForBrowser=_dereq_(107),setInnerHTML=_dereq_(124),setTextContent=function(node,text){node.textContent=text};ExecutionEnvironment.canUseDOM&&("textContent"in document.documentElement||(setTextContent=function(node,text){setInnerHTML(node,escapeTextContentForBrowser(text))})),module.exports=setTextContent},{107:107,124:124,130:130}],126:[function(_dereq_,module,exports){"use strict";function shouldUpdateReactComponent(prevElement,nextElement){var prevEmpty=null===prevElement||prevElement===!1,nextEmpty=null===nextElement||nextElement===!1;if(prevEmpty||nextEmpty)return prevEmpty===nextEmpty;var prevType=typeof prevElement,nextType=typeof nextElement;return"string"===prevType||"number"===prevType?"string"===nextType||"number"===nextType:"object"===nextType&&prevElement.type===nextElement.type&&prevElement.key===nextElement.key}module.exports=shouldUpdateReactComponent},{}],127:[function(_dereq_,module,exports){"use strict";function userProvidedKeyEscaper(match){return userProvidedKeyEscaperLookup[match]}function getComponentKey(component,index){return component&&null!=component.key?wrapUserProvidedKey(component.key):index.toString(36)}function escapeUserProvidedKey(text){return(""+text).replace(userProvidedKeyEscapeRegex,userProvidedKeyEscaper)}function wrapUserProvidedKey(key){return"$"+escapeUserProvidedKey(key)}function traverseAllChildrenImpl(children,nameSoFar,callback,traverseContext){var type=typeof children;if("undefined"!==type&&"boolean"!==type||(children=null),null===children||"string"===type||"number"===type||ReactElement.isValidElement(children))return callback(traverseContext,children,""===nameSoFar?SEPARATOR+getComponentKey(children,0):nameSoFar),1;var child,nextName,subtreeCount=0,nextNamePrefix=""===nameSoFar?SEPARATOR:nameSoFar+SUBSEPARATOR;if(Array.isArray(children))for(var i=0;i<children.length;i++)child=children[i],nextName=nextNamePrefix+getComponentKey(child,i),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext);else{var iteratorFn=getIteratorFn(children);if(iteratorFn){var step,iterator=iteratorFn.call(children);if(iteratorFn!==children.entries)for(var ii=0;!(step=iterator.next()).done;)child=step.value,nextName=nextNamePrefix+getComponentKey(child,ii++),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext);else for(warning(didWarnAboutMaps,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead."),didWarnAboutMaps=!0;!(step=iterator.next()).done;){var entry=step.value;entry&&(child=entry[1],nextName=nextNamePrefix+wrapUserProvidedKey(entry[0])+SUBSEPARATOR+getComponentKey(child,0),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext))}}else if("object"===type){var addendum="";if(addendum=" If you meant to render a collection of children, use an array instead or wrap the object using createFragment(object) from the React add-ons.",children._isReactElement&&(addendum=" It looks like you're using an element created by a different version of React. Make sure to use only one copy of React."),ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();name&&(addendum+=" Check the render method of `"+name+"`.")}var childrenString=String(children);invariant(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===childrenString?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum)}}return subtreeCount}function traverseAllChildren(children,callback,traverseContext){return null==children?0:traverseAllChildrenImpl(children,"",callback,traverseContext)}var ReactCurrentOwner=_dereq_(34),ReactElement=_dereq_(52),ReactInstanceHandles=_dereq_(61),getIteratorFn=_dereq_(115),invariant=_dereq_(144),warning=_dereq_(155),SEPARATOR=ReactInstanceHandles.SEPARATOR,SUBSEPARATOR=":",userProvidedKeyEscaperLookup={"=":"=0",".":"=1",":":"=2"},userProvidedKeyEscapeRegex=/[=.:]/g,didWarnAboutMaps=!1;module.exports=traverseAllChildren},{115:115,144:144,155:155,34:34,52:52,61:61}],128:[function(_dereq_,module,exports){"use strict";var assign=_dereq_(23),emptyFunction=_dereq_(136),warning=_dereq_(155),validateDOMNesting=emptyFunction,specialTags=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],inScopeTags=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],buttonScopeTags=inScopeTags.concat(["button"]),impliedEndTags=["dd","dt","li","option","optgroup","p","rp","rt"],emptyAncestorInfo={parentTag:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null},updatedAncestorInfo=function(oldInfo,tag,instance){var ancestorInfo=assign({},oldInfo||emptyAncestorInfo),info={tag:tag,instance:instance};return inScopeTags.indexOf(tag)!==-1&&(ancestorInfo.aTagInScope=null,ancestorInfo.buttonTagInScope=null,ancestorInfo.nobrTagInScope=null),buttonScopeTags.indexOf(tag)!==-1&&(ancestorInfo.pTagInButtonScope=null),specialTags.indexOf(tag)!==-1&&"address"!==tag&&"div"!==tag&&"p"!==tag&&(ancestorInfo.listItemTagAutoclosing=null,ancestorInfo.dlItemTagAutoclosing=null),ancestorInfo.parentTag=info,"form"===tag&&(ancestorInfo.formTag=info),"a"===tag&&(ancestorInfo.aTagInScope=info),"button"===tag&&(ancestorInfo.buttonTagInScope=info),"nobr"===tag&&(ancestorInfo.nobrTagInScope=info),"p"===tag&&(ancestorInfo.pTagInButtonScope=info),"li"===tag&&(ancestorInfo.listItemTagAutoclosing=info),"dd"!==tag&&"dt"!==tag||(ancestorInfo.dlItemTagAutoclosing=info),ancestorInfo},isTagValidWithParent=function(tag,parentTag){switch(parentTag){case"select":return"option"===tag||"optgroup"===tag||"#text"===tag;case"optgroup":return"option"===tag||"#text"===tag;case"option":return"#text"===tag;case"tr":return"th"===tag||"td"===tag||"style"===tag||"script"===tag||"template"===tag;case"tbody":case"thead":case"tfoot":return"tr"===tag||"style"===tag||"script"===tag||"template"===tag;case"colgroup":return"col"===tag||"template"===tag;case"table":return"caption"===tag||"colgroup"===tag||"tbody"===tag||"tfoot"===tag||"thead"===tag||"style"===tag||"script"===tag||"template"===tag;case"head":return"base"===tag||"basefont"===tag||"bgsound"===tag||"link"===tag||"meta"===tag||"title"===tag||"noscript"===tag||"noframes"===tag||"style"===tag||"script"===tag||"template"===tag;case"html":return"head"===tag||"body"===tag}switch(tag){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==parentTag&&"h2"!==parentTag&&"h3"!==parentTag&&"h4"!==parentTag&&"h5"!==parentTag&&"h6"!==parentTag;case"rp":case"rt":return impliedEndTags.indexOf(parentTag)===-1;case"caption":case"col":case"colgroup":case"frame":case"head":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==parentTag}return!0},findInvalidAncestorForTag=function(tag,ancestorInfo){switch(tag){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return ancestorInfo.pTagInButtonScope;case"form":return ancestorInfo.formTag||ancestorInfo.pTagInButtonScope;case"li":return ancestorInfo.listItemTagAutoclosing;case"dd":case"dt":return ancestorInfo.dlItemTagAutoclosing;case"button":return ancestorInfo.buttonTagInScope;case"a":return ancestorInfo.aTagInScope;case"nobr":return ancestorInfo.nobrTagInScope}return null},findOwnerStack=function(instance){if(!instance)return[];var stack=[];do stack.push(instance);while(instance=instance._currentElement._owner);return stack.reverse(),stack},didWarn={};validateDOMNesting=function(childTag,childInstance,ancestorInfo){ancestorInfo=ancestorInfo||emptyAncestorInfo;var parentInfo=ancestorInfo.parentTag,parentTag=parentInfo&&parentInfo.tag,invalidParent=isTagValidWithParent(childTag,parentTag)?null:parentInfo,invalidAncestor=invalidParent?null:findInvalidAncestorForTag(childTag,ancestorInfo),problematic=invalidParent||invalidAncestor;if(problematic){var i,ancestorTag=problematic.tag,ancestorInstance=problematic.instance,childOwner=childInstance&&childInstance._currentElement._owner,ancestorOwner=ancestorInstance&&ancestorInstance._currentElement._owner,childOwners=findOwnerStack(childOwner),ancestorOwners=findOwnerStack(ancestorOwner),minStackLen=Math.min(childOwners.length,ancestorOwners.length),deepestCommon=-1;for(i=0;i<minStackLen&&childOwners[i]===ancestorOwners[i];i++)deepestCommon=i;var UNKNOWN="(unknown)",childOwnerNames=childOwners.slice(deepestCommon+1).map(function(inst){return inst.getName()||UNKNOWN}),ancestorOwnerNames=ancestorOwners.slice(deepestCommon+1).map(function(inst){return inst.getName()||UNKNOWN}),ownerInfo=[].concat(deepestCommon!==-1?childOwners[deepestCommon].getName()||UNKNOWN:[],ancestorOwnerNames,ancestorTag,invalidAncestor?["..."]:[],childOwnerNames,childTag).join(" > "),warnKey=!!invalidParent+"|"+childTag+"|"+ancestorTag+"|"+ownerInfo;if(didWarn[warnKey])return;if(didWarn[warnKey]=!0,invalidParent){var info="";"table"===ancestorTag&&"tr"===childTag&&(info+=" Add a <tbody> to your code to match the DOM tree generated by the browser."),warning(!1,"validateDOMNesting(...): <%s> cannot appear as a child of <%s>. See %s.%s",childTag,ancestorTag,ownerInfo,info)}else warning(!1,"validateDOMNesting(...): <%s> cannot appear as a descendant of <%s>. See %s.",childTag,ancestorTag,ownerInfo)}},validateDOMNesting.ancestorInfoContextKey="__validateDOMNesting_ancestorInfo$"+Math.random().toString(36).slice(2),validateDOMNesting.updatedAncestorInfo=updatedAncestorInfo,validateDOMNesting.isTagValidInContext=function(tag,ancestorInfo){ancestorInfo=ancestorInfo||emptyAncestorInfo;var parentInfo=ancestorInfo.parentTag,parentTag=parentInfo&&parentInfo.tag;return isTagValidWithParent(tag,parentTag)&&!findInvalidAncestorForTag(tag,ancestorInfo)},module.exports=validateDOMNesting},{136:136,155:155,23:23}],129:[function(_dereq_,module,exports){"use strict";var emptyFunction=_dereq_(136),EventListener={listen:function(target,eventType,callback){return target.addEventListener?(target.addEventListener(eventType,callback,!1),{remove:function(){target.removeEventListener(eventType,callback,!1)}}):target.attachEvent?(target.attachEvent("on"+eventType,callback),{remove:function(){target.detachEvent("on"+eventType,callback)}}):void 0},capture:function(target,eventType,callback){return target.addEventListener?(target.addEventListener(eventType,callback,!0),{remove:function(){target.removeEventListener(eventType,callback,!0)}}):(console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:emptyFunction})},registerDefault:function(){}};module.exports=EventListener},{136:136}],130:[function(_dereq_,module,exports){"use strict";var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:canUseDOM&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment},{}],131:[function(_dereq_,module,exports){"use strict";function camelize(string){return string.replace(_hyphenPattern,function(_,character){return character.toUpperCase()})}var _hyphenPattern=/-(.)/g;module.exports=camelize},{}],132:[function(_dereq_,module,exports){"use strict";function camelizeStyleName(string){return camelize(string.replace(msPattern,"ms-"))}var camelize=_dereq_(131),msPattern=/^-ms-/;module.exports=camelizeStyleName},{131:131}],133:[function(_dereq_,module,exports){"use strict";function containsNode(_x,_x2){var _again=!0;_function:for(;_again;){var outerNode=_x,innerNode=_x2;if(_again=!1,outerNode&&innerNode){if(outerNode===innerNode)return!0;if(isTextNode(outerNode))return!1;if(isTextNode(innerNode)){_x=outerNode,_x2=innerNode.parentNode,_again=!0;continue _function}return outerNode.contains?outerNode.contains(innerNode):!!outerNode.compareDocumentPosition&&!!(16&outerNode.compareDocumentPosition(innerNode))}return!1}}var isTextNode=_dereq_(146);module.exports=containsNode},{146:146}],134:[function(_dereq_,module,exports){"use strict";function hasArrayNature(obj){return!!obj&&("object"==typeof obj||"function"==typeof obj)&&"length"in obj&&!("setInterval"in obj)&&"number"!=typeof obj.nodeType&&(Array.isArray(obj)||"callee"in obj||"item"in obj)}function createArrayFromMixed(obj){return hasArrayNature(obj)?Array.isArray(obj)?obj.slice():toArray(obj):[obj]}var toArray=_dereq_(154);module.exports=createArrayFromMixed},{154:154}],135:[function(_dereq_,module,exports){"use strict";function getNodeName(markup){var nodeNameMatch=markup.match(nodeNamePattern);return nodeNameMatch&&nodeNameMatch[1].toLowerCase()}function createNodesFromMarkup(markup,handleScript){var node=dummyNode;dummyNode?void 0:invariant(!1,"createNodesFromMarkup dummy not initialized");var nodeName=getNodeName(markup),wrap=nodeName&&getMarkupWrap(nodeName);if(wrap){node.innerHTML=wrap[1]+markup+wrap[2];for(var wrapDepth=wrap[0];wrapDepth--;)node=node.lastChild}else node.innerHTML=markup;var scripts=node.getElementsByTagName("script");scripts.length&&(handleScript?void 0:invariant(!1,"createNodesFromMarkup(...): Unexpected <script> element rendered."),createArrayFromMixed(scripts).forEach(handleScript));for(var nodes=createArrayFromMixed(node.childNodes);node.lastChild;)node.removeChild(node.lastChild);return nodes}var ExecutionEnvironment=_dereq_(130),createArrayFromMixed=_dereq_(134),getMarkupWrap=_dereq_(140),invariant=_dereq_(144),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,nodeNamePattern=/^\s*<(\w+)/;module.exports=createNodesFromMarkup},{130:130,134:134,140:140,144:144}],136:[function(_dereq_,module,exports){"use strict";function makeEmptyFunction(arg){return function(){return arg}}function emptyFunction(){}emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(arg){return arg},module.exports=emptyFunction},{}],137:[function(_dereq_,module,exports){"use strict";var emptyObject={};Object.freeze(emptyObject),module.exports=emptyObject},{}],138:[function(_dereq_,module,exports){"use strict";function focusNode(node){try{node.focus()}catch(e){}}module.exports=focusNode},{}],139:[function(_dereq_,module,exports){"use strict";function getActiveElement(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}module.exports=getActiveElement},{}],140:[function(_dereq_,module,exports){"use strict";function getMarkupWrap(nodeName){return dummyNode?void 0:invariant(!1,"Markup wrapping node not initialized"),markupWrap.hasOwnProperty(nodeName)||(nodeName="*"),shouldWrap.hasOwnProperty(nodeName)||("*"===nodeName?dummyNode.innerHTML="<link />":dummyNode.innerHTML="<"+nodeName+"></"+nodeName+">",shouldWrap[nodeName]=!dummyNode.firstChild),shouldWrap[nodeName]?markupWrap[nodeName]:null}var ExecutionEnvironment=_dereq_(130),invariant=_dereq_(144),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,shouldWrap={},selectWrap=[1,'<select multiple="true">',"</select>"],tableWrap=[1,"<table>","</table>"],trWrap=[3,"<table><tbody><tr>","</tr></tbody></table>"],svgWrap=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],markupWrap={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:selectWrap,option:selectWrap,caption:tableWrap,colgroup:tableWrap,tbody:tableWrap,tfoot:tableWrap,thead:tableWrap,td:trWrap,th:trWrap},svgElements=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];svgElements.forEach(function(nodeName){markupWrap[nodeName]=svgWrap,shouldWrap[nodeName]=!0}),module.exports=getMarkupWrap},{130:130,144:144}],141:[function(_dereq_,module,exports){"use strict";function getUnboundedScrollPosition(scrollable){return scrollable===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:scrollable.scrollLeft,y:scrollable.scrollTop}}module.exports=getUnboundedScrollPosition},{}],142:[function(_dereq_,module,exports){"use strict";function hyphenate(string){return string.replace(_uppercasePattern,"-$1").toLowerCase()}var _uppercasePattern=/([A-Z])/g;module.exports=hyphenate},{}],143:[function(_dereq_,module,exports){"use strict";function hyphenateStyleName(string){return hyphenate(string).replace(msPattern,"-ms-")}var hyphenate=_dereq_(142),msPattern=/^ms-/;module.exports=hyphenateStyleName},{142:142}],144:[function(_dereq_,module,exports){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(void 0===format)throw new Error("invariant requires an error message argument");if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error("Invariant Violation: "+format.replace(/%s/g,function(){return args[argIndex++]}))}throw error.framesToPop=1,error}};module.exports=invariant},{}],145:[function(_dereq_,module,exports){"use strict";function isNode(object){return!(!object||!("function"==typeof Node?object instanceof Node:"object"==typeof object&&"number"==typeof object.nodeType&&"string"==typeof object.nodeName))}module.exports=isNode},{}],146:[function(_dereq_,module,exports){"use strict";function isTextNode(object){return isNode(object)&&3==object.nodeType}var isNode=_dereq_(145);module.exports=isTextNode},{145:145}],147:[function(_dereq_,module,exports){"use strict";var invariant=_dereq_(144),keyMirror=function(obj){var key,ret={};obj instanceof Object&&!Array.isArray(obj)?void 0:invariant(!1,"keyMirror(...): Argument must be an object.");for(key in obj)obj.hasOwnProperty(key)&&(ret[key]=key);return ret};module.exports=keyMirror},{144:144}],148:[function(_dereq_,module,exports){"use strict";var keyOf=function(oneKeyObj){var key;for(key in oneKeyObj)if(oneKeyObj.hasOwnProperty(key))return key;return null};module.exports=keyOf},{}],149:[function(_dereq_,module,exports){"use strict";function mapObject(object,callback,context){if(!object)return null;var result={};for(var name in object)hasOwnProperty.call(object,name)&&(result[name]=callback.call(context,object[name],name,object));return result}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=mapObject},{}],150:[function(_dereq_,module,exports){"use strict";function memoizeStringOnly(callback){var cache={};return function(string){return cache.hasOwnProperty(string)||(cache[string]=callback.call(this,string)),cache[string]}}module.exports=memoizeStringOnly},{}],151:[function(_dereq_,module,exports){"use strict";var performance,ExecutionEnvironment=_dereq_(130);ExecutionEnvironment.canUseDOM&&(performance=window.performance||window.msPerformance||window.webkitPerformance),module.exports=performance||{}},{130:130}],152:[function(_dereq_,module,exports){"use strict";var performance=_dereq_(151),curPerformance=performance;curPerformance&&curPerformance.now||(curPerformance=Date);var performanceNow=curPerformance.now.bind(curPerformance);module.exports=performanceNow},{151:151}],153:[function(_dereq_,module,exports){"use strict";function shallowEqual(objA,objB){if(objA===objB)return!0;if("object"!=typeof objA||null===objA||"object"!=typeof objB||null===objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var bHasOwnProperty=hasOwnProperty.bind(objB),i=0;i<keysA.length;i++)if(!bHasOwnProperty(keysA[i])||objA[keysA[i]]!==objB[keysA[i]])return!1;return!0}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=shallowEqual},{}],154:[function(_dereq_,module,exports){"use strict";function toArray(obj){var length=obj.length;if(Array.isArray(obj)||"object"!=typeof obj&&"function"!=typeof obj?invariant(!1,"toArray: Array-like object expected"):void 0,"number"!=typeof length?invariant(!1,"toArray: Object needs a length property"):void 0,0===length||length-1 in obj?void 0:invariant(!1,"toArray: Object should have keys for indices"),obj.hasOwnProperty)try{return Array.prototype.slice.call(obj)}catch(e){}for(var ret=Array(length),ii=0;ii<length;ii++)ret[ii]=obj[ii];return ret}var invariant=_dereq_(144);module.exports=toArray},{144:144}],155:[function(_dereq_,module,exports){"use strict";var emptyFunction=_dereq_(136),warning=emptyFunction;warning=function(condition,format){for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)args[_key-2]=arguments[_key];if(void 0===format)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==format.indexOf("Failed Composite propType: ")&&!condition){var argIndex=0,message="Warning: "+format.replace(/%s/g,function(){return args[argIndex++]});"undefined"!=typeof console&&console.error(message);try{throw new Error(message)}catch(x){}}},module.exports=warning},{136:136}]},{},[1])(1)}),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f(require("react"));else if("function"==typeof define&&define.amd)define(["react"],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.ReactDOM=f(g.React)}}(function(React){return React.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED}),function(root,factory){"undefined"!=typeof module&&module.exports?module.exports=factory(require("react"),require("react-dom"),require("angular")):"function"==typeof define&&define.amd?define(["react","react-dom","angular"],function(react,reactDOM,angular){return root.ngReact=factory(react,reactDOM,angular)}):root.ngReact=factory(root.React,root.ReactDOM,root.angular)}(this,function(React,ReactDOM,angular){"use strict";function getReactComponent(name,$injector){if(angular.isFunction(name))return name;if(!name)throw new Error("ReactComponent name attribute must be specified");var reactComponent;try{reactComponent=$injector.get(name)}catch(e){}if(!reactComponent)try{reactComponent=name.split(".").reduce(function(current,namePart){return current[namePart]},window)}catch(e){}if(!reactComponent)throw Error("Cannot find react component "+name);return reactComponent}function applied(fn,scope){if(fn.wrappedInApply)return fn;var wrapped=function(){var args=arguments,phase=scope.$root.$$phase;return"$apply"===phase||"$digest"===phase?fn.apply(null,args):scope.$apply(function(){return fn.apply(null,args)})};return wrapped.wrappedInApply=!0,wrapped}function applyFunctions(obj,scope){return Object.keys(obj||{}).reduce(function(prev,key){var value=obj[key];return prev[key]=angular.isFunction(value)?applied(value,scope):value,prev},{})}function watchProps(watchDepth,scope,watchExpressions,listener){"collection"===watchDepth&&angular.isFunction(scope.$watchCollection)?watchExpressions.forEach(function(expr){scope.$watchCollection(expr,listener)}):"reference"===watchDepth?angular.isFunction(scope.$watchGroup)?scope.$watchGroup(watchExpressions,listener):watchExpressions.forEach(function(expr){scope.$watch(expr,listener)}):watchExpressions.forEach(function(expr){scope.$watch(expr,listener,!0)})}function renderComponent(component,props,$timeout,elem){$timeout(function(){ReactDOM.render(React.createElement(component,props),elem[0])})}var reactComponent=function($timeout,$injector){return{restrict:"E",replace:!0,link:function(scope,elem,attrs){var reactComponent=getReactComponent(attrs.name,$injector),renderMyComponent=function(){var scopeProps=scope.$eval(attrs.props),props=applyFunctions(scopeProps,scope);renderComponent(reactComponent,props,$timeout,elem)};attrs.props?watchProps(attrs.watchDepth,scope,[attrs.props],renderMyComponent):renderMyComponent(),scope.$on("$destroy",function(){ReactDOM.unmountComponentAtNode(elem[0])})}}},reactDirective=function($timeout,$injector){return function(reactComponentName,propNames,conf){var directive={restrict:"E",replace:!0,link:function(scope,elem,attrs){var reactComponent=getReactComponent(reactComponentName,$injector);propNames=propNames||Object.keys(reactComponent.propTypes||{});var renderMyComponent=function(){var props={};propNames.forEach(function(propName){props[propName]=scope.$eval(attrs[propName])}),renderComponent(reactComponent,applyFunctions(props,scope),$timeout,elem)},propExpressions=propNames.map(function(k){return attrs[k]});watchProps(attrs.watchDepth,scope,propExpressions,renderMyComponent),renderMyComponent(),scope.$on("$destroy",function(){ReactDOM.unmountComponentAtNode(elem[0])})}};return angular.extend(directive,conf)}};return angular.module("react",[]).directive("reactComponent",["$timeout","$injector",reactComponent]).factory("reactDirective",["$timeout","$injector",reactDirective])}),function(window,undefined){"use strict";var LIBVERSION="0.7.9",EMPTY="",UNKNOWN="?",FUNC_TYPE="function",UNDEF_TYPE="undefined",OBJ_TYPE="object",STR_TYPE="string",MAJOR="major",MODEL="model",NAME="name",TYPE="type",VENDOR="vendor",VERSION="version",ARCHITECTURE="architecture",CONSOLE="console",MOBILE="mobile",TABLET="tablet",SMARTTV="smarttv",WEARABLE="wearable",EMBEDDED="embedded",util={extend:function(regexes,extensions){for(var i in extensions)"browser cpu device engine os".indexOf(i)!==-1&&extensions[i].length%2===0&&(regexes[i]=extensions[i].concat(regexes[i]));return regexes},has:function(str1,str2){return"string"==typeof str1&&str2.toLowerCase().indexOf(str1.toLowerCase())!==-1},lowerize:function(str){return str.toLowerCase()},major:function(version){return typeof version===STR_TYPE?version.split(".")[0]:undefined}},mapper={rgx:function(){for(var result,j,k,p,q,matches,match,i=0,args=arguments;i<args.length&&!matches;){var regex=args[i],props=args[i+1];if(typeof result===UNDEF_TYPE){result={};for(p in props)q=props[p],typeof q===OBJ_TYPE?result[q[0]]=undefined:result[q]=undefined}for(j=k=0;j<regex.length&&!matches;)if(matches=regex[j++].exec(this.getUA()))for(p=0;p<props.length;p++)match=matches[++k],q=props[p],typeof q===OBJ_TYPE&&q.length>0?2==q.length?typeof q[1]==FUNC_TYPE?result[q[0]]=q[1].call(this,match):result[q[0]]=q[1]:3==q.length?typeof q[1]!==FUNC_TYPE||q[1].exec&&q[1].test?result[q[0]]=match?match.replace(q[1],q[2]):undefined:result[q[0]]=match?q[1].call(this,match,q[2]):undefined:4==q.length&&(result[q[0]]=match?q[3].call(this,match.replace(q[1],q[2])):undefined):result[q]=match?match:undefined;i+=2}return result},str:function(str,map){for(var i in map)if(typeof map[i]===OBJ_TYPE&&map[i].length>0){for(var j=0;j<map[i].length;j++)if(util.has(map[i][j],str))return i===UNKNOWN?undefined:i}else if(util.has(map[i],str))return i===UNKNOWN?undefined:i;return str}},maps={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},regexes={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[NAME,VERSION],[/\s(opr)\/([\w\.]+)/i],[[NAME,"Opera"],VERSION],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium)\/([\w\.-]+)/i],[NAME,VERSION],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[NAME,"IE"],VERSION],[/(edge)\/((\d+)?[\w\.]+)/i],[NAME,VERSION],[/(yabrowser)\/([\w\.]+)/i],[[NAME,"Yandex"],VERSION],[/(comodo_dragon)\/([\w\.]+)/i],[[NAME,/_/g," "],VERSION],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[NAME,VERSION],[/(dolfin)\/([\w\.]+)/i],[[NAME,"Dolphin"],VERSION],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[NAME,"Chrome"],VERSION],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[VERSION,[NAME,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[VERSION,[NAME,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[VERSION,[NAME,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[VERSION,[NAME,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[VERSION,NAME],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[NAME,[VERSION,mapper.str,maps.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[NAME,VERSION],[/(navigator|netscape)\/([\w\.-]+)/i],[[NAME,"Netscape"],VERSION],[/fxios\/([\w\.-]+)/i],[VERSION,[NAME,"Firefox"]],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[NAME,VERSION]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[ARCHITECTURE,"amd64"]],[/(ia32(?=;))/i],[[ARCHITECTURE,util.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[ARCHITECTURE,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[ARCHITECTURE,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[ARCHITECTURE,/ower/,"",util.lowerize]],[/(sun4\w)[;\)]/i],[[ARCHITECTURE,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[ARCHITECTURE,util.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[MODEL,VENDOR,[TYPE,TABLET]],[/applecoremedia\/[\w\.]+ \((ipad)/],[MODEL,[VENDOR,"Apple"],[TYPE,TABLET]],[/(apple\s{0,1}tv)/i],[[MODEL,"Apple TV"],[VENDOR,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[VENDOR,MODEL,[TYPE,TABLET]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[MODEL,[VENDOR,"Amazon"],[TYPE,TABLET]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[MODEL,mapper.str,maps.device.amazon.model],[VENDOR,"Amazon"],[TYPE,MOBILE]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[MODEL,VENDOR,[TYPE,MOBILE]],[/\((ip[honed|\s\w*]+);/i],[MODEL,[VENDOR,"Apple"],[TYPE,MOBILE]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/\(bb10;\s(\w+)/i],[MODEL,[VENDOR,"BlackBerry"],[TYPE,MOBILE]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[MODEL,[VENDOR,"Asus"],[TYPE,TABLET]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[VENDOR,"Sony"],[MODEL,"Xperia Tablet"],[TYPE,TABLET]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[VENDOR,"Sony"],[MODEL,"Xperia Phone"],[TYPE,MOBILE]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[VENDOR,MODEL,[TYPE,CONSOLE]],[/android.+;\s(shield)\sbuild/i],[MODEL,[VENDOR,"Nvidia"],[TYPE,CONSOLE]],[/(playstation\s[3portablevi]+)/i],[MODEL,[VENDOR,"Sony"],[TYPE,CONSOLE]],[/(sprint\s(\w+))/i],[[VENDOR,mapper.str,maps.device.sprint.vendor],[MODEL,mapper.str,maps.device.sprint.model],[TYPE,MOBILE]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[VENDOR,MODEL,[TYPE,TABLET]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[VENDOR,[MODEL,/_/g," "],[TYPE,MOBILE]],[/(nexus\s9)/i],[MODEL,[VENDOR,"HTC"],[TYPE,TABLET]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[MODEL,[VENDOR,"Microsoft"],[TYPE,CONSOLE]],[/(kin\.[onetw]{3})/i],[[MODEL,/\./g," "],[VENDOR,"Microsoft"],[TYPE,MOBILE]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i],[MODEL,[VENDOR,"Motorola"],[TYPE,MOBILE]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[MODEL,[VENDOR,"Motorola"],[TYPE,TABLET]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[VENDOR,"Samsung"],MODEL,[TYPE,TABLET]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[VENDOR,"Samsung"],MODEL,[TYPE,MOBILE]],[/(samsung);smarttv/i],[VENDOR,MODEL,[TYPE,SMARTTV]],[/\(dtv[\);].+(aquos)/i],[MODEL,[VENDOR,"Sharp"],[TYPE,SMARTTV]],[/sie-(\w+)*/i],[MODEL,[VENDOR,"Siemens"],[TYPE,MOBILE]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[VENDOR,"Nokia"],MODEL,[TYPE,MOBILE]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[MODEL,[VENDOR,"Acer"],[TYPE,TABLET]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[VENDOR,"LG"],MODEL,[TYPE,TABLET]],[/(lg) netcast\.tv/i],[VENDOR,MODEL,[TYPE,SMARTTV]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[MODEL,[VENDOR,"LG"],[TYPE,MOBILE]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[MODEL,[VENDOR,"Lenovo"],[TYPE,TABLET]],[/linux;.+((jolla));/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/((pebble))app\/[\d\.]+\s/i],[VENDOR,MODEL,[TYPE,WEARABLE]],[/android.+;\s(glass)\s\d/i],[MODEL,[VENDOR,"Google"],[TYPE,WEARABLE]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[MODEL,/_/g," "],[VENDOR,"Xiaomi"],[TYPE,MOBILE]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[TYPE,util.lowerize],VENDOR,MODEL]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[VERSION,[NAME,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[NAME,VERSION],[/rv\:([\w\.]+).*(gecko)/i],[VERSION,NAME]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[NAME,VERSION],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[NAME,[VERSION,mapper.str,maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[NAME,"Windows"],[VERSION,mapper.str,maps.os.windows.version]],[/\((bb)(10);/i],[[NAME,"BlackBerry"],VERSION],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[NAME,VERSION],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[NAME,"Symbian"],VERSION],[/\((series40);/i],[NAME],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[NAME,"Firefox OS"],VERSION],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[NAME,VERSION],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[NAME,"Chromium OS"],VERSION],[/(sunos)\s?([\w\.]+\d)*/i],[[NAME,"Solaris"],VERSION],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[NAME,VERSION],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[NAME,"iOS"],[VERSION,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[NAME,"Mac OS"],[VERSION,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[NAME,VERSION]]},UAParser=function(uastring,extensions){if(!(this instanceof UAParser))return new UAParser(uastring,extensions).getResult();var ua=uastring||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:EMPTY),rgxmap=extensions?util.extend(regexes,extensions):regexes;return this.getBrowser=function(){var browser=mapper.rgx.apply(this,rgxmap.browser);return browser.major=util.major(browser.version),browser},this.getCPU=function(){return mapper.rgx.apply(this,rgxmap.cpu)},this.getDevice=function(){return mapper.rgx.apply(this,rgxmap.device)},this.getEngine=function(){return mapper.rgx.apply(this,rgxmap.engine)},this.getOS=function(){return mapper.rgx.apply(this,rgxmap.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ua},this.setUA=function(uastring){return ua=uastring,this},this.setUA(ua),this};UAParser.VERSION=LIBVERSION,UAParser.BROWSER={NAME:NAME,MAJOR:MAJOR,VERSION:VERSION},UAParser.CPU={ARCHITECTURE:ARCHITECTURE},UAParser.DEVICE={MODEL:MODEL,VENDOR:VENDOR,TYPE:TYPE,CONSOLE:CONSOLE,MOBILE:MOBILE,SMARTTV:SMARTTV,TABLET:TABLET,WEARABLE:WEARABLE,EMBEDDED:EMBEDDED},UAParser.ENGINE={NAME:NAME,VERSION:VERSION},UAParser.OS={NAME:NAME,VERSION:VERSION},typeof exports!==UNDEF_TYPE?(typeof module!==UNDEF_TYPE&&module.exports&&(exports=module.exports=UAParser),exports.UAParser=UAParser):typeof define===FUNC_TYPE&&define.amd?define(function(){return UAParser}):window.UAParser=UAParser;var $=window.jQuery||window.Zepto;if(typeof $!==UNDEF_TYPE){var parser=new UAParser;$.ua=parser.getResult(),$.ua.get=function(){return parser.getUA()},$.ua.set=function(uastring){parser.setUA(uastring);var result=parser.getResult();for(var prop in result)$.ua[prop]=result[prop]}}}("object"==typeof window?window:this),angular.module("dcbImgFallback",[]).directive("fallbackSrc",function(){var missingDefault="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBoRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAASAAAATgAAAAAAAABgAAAAAQAAAGAAAAABUGFpbnQuTkVUIHYzLjUuMTEA/9sAQwAEAgMDAwIEAwMDBAQEBAUJBgUFBQULCAgGCQ0LDQ0NCwwMDhAUEQ4PEw8MDBIYEhMVFhcXFw4RGRsZFhoUFhcW/9sAQwEEBAQFBQUKBgYKFg8MDxYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYW/8AAEQgB9AH0AwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A+ggKcBQBRQAUAZpQKUUAFOAxRSgUAIBThQBTqAAClAoApwFACU4CilAoAQCnYoxTsUAJilpcUtACYpaXFLQAmKXFLiloAbilxTsUuKAG0YNOowaAExS4FLilxQA2inYooAbRg07BpcGgBmDRg0/FGKAGYNFPxSYNADaKdg0UANxSYp+BSYoAbikwafikoAbikxT6TFADMUYp2KMUAR4oxT8UmKAGYpMU/FJigCPFJin4pMUAMpCKfSEUAMIppFSEU2gBhFIRTyKaRQAykIp9NoAaRmm08ikNADaQilooAbiilxRQAtKBSAZpwoABTqKUCgAApwFAFKKAACnAUU4CgBAKUClApQKAClApaUCgBMU7FGKdigBMUuKUClxQAmKXFLiloATFLS4paAG4NLinYpcUANpcUtLigBuKXAp2KKAG0YNOooATFGKWigBMUYpaKAExRilooATBpMGnUUANowKdRigBmKTBp+KMUAMxSYp9JigBlGKdijFADMUmKdiigBmKTFPxSYoAjxSYp+KTFADKQin00igBpFNxTyKQigCMikIp5FIRQAwim08ikNAEZGKQin00jFADTTaeRSEUANooooAdTqAMUoFAABTgKAKUUAAFOopwoAAKUCgCnAUAAFLQBTqADGKUClApQKAEApwFFOAoATFLRinAUAJilpcUuKAExS0uKWgBMUuKKKACijBpcUAJRTqMGgBMGjFOxRigBuKXAp2BRigBuBRgU6igBuBSYp9GBQAzFGKfgUmKAGYNFPxSYoAbRTsUmKAEpMUtFADcUYp1GKAI8UYp+KTFAEeKMU7FJigBmKQin0hFADKaRipCKaaAGEUhFPIpCKAI6aRUlNNADCKQjNPIppFADCKbUhFNNAEZGKQinn0ptADaKXFFACgU4CgU4UAAp1ApwFAAKUChRTgKAAClAzQBmnAUAFOFAFOAoAQClApQKWgApQKUClAoAQCnYop2KAExS0UUAFFLiloATFLS4paAExS4pcUuKAG0uKXBpcUANxS4FOxRigBtFOowaAG0U7BowaAG0U7BowaAG4oxTqMCgBmKTBp+KMUAMpMU+kxQAzBoxTsUYoAZikp+KSgBtGKXFJQA0ikxT6QigBlNIqTFNIoAaRTaeRSUARkUhFPIpCKAGEZptPIpCKAIzSEU+mmgBjCmkU8jFIwoAYRmmmnsKawoAZRTqKAHAUqihRTgKABR3pyikApwoAUClAoFOoAKcBQKcBQAAYpQKAKWgApwFFOAxQAgFOAoApaACiilAoAAKWgCnUAJilxS4paAExS4pcUuKAExS0uKWgBuDS4p2KMUAJgUU6igBuDS4pcGlwaAG4oxTsUYoAbijBp2KTBoAbg0U7BooAbgUmKfikxQAzFGKdg0YoAZikxT8UlADMUmKfikoAZikxTyKQigCOinUhFACYzTadRQAwimkU8jFIRQAymkYp5FJQAwimkU8jFIRQAwjNNNPYU0igBh9KaakIppoAjPFNIqQ02gBmKKWigBwp1ApVoAUU4UiinKKAFHFOApFFOUUACinAUgFOoAKdQBTgMUAAGKUCgCloAKKAM07FAAKUClAxSgUAJinUAU7FACYpaXFLQAYoxTsUUAJilpcUtADcGlxTsUYoATFGDTqMGgBMGjFOxRigBuKMU7FGKAG4oxTsUYoAZg0U/FJg0ANxSYp+KTFADKKdg0YoAZikp+KSgBmKSn4pKAIyKQin4pCKAGU0ipKaRigBhFJTyKQigBtNIxTqKAGEU0inkYpCKAGU008ikoAjIxSMKeaaaAGMKawp5ppFADGFNanmmmgBtFLiigBRThQKcKAAU4UCnCgAFOFApwoAKcBSKKcooAAKcooApaACgDNFOHpQAU4UClAoAAKcBQBSgZoAAKcBRinAUAIBS0YzTsUAJilpcUtACYpaXFLigBMUuKXFLigBuKXFLg0uKAG4pcCnYoxQA3AowKdRQA3ApMU+jAoAZijBp2KMUAMpMU/FGKAI8UYp+KTFADMUmKfikxQBHiinYpMUAMxSEU+kIoAYRTSKkIptADCKaRTzSEUAMIzTaeRSEUANppp1FAEZFIwp9NNADSKaacaRhQAw0009qa1ADDTTT29aa1ADKKdiigBVpy0lOoAVactIKcKAFWlFFOFAAKcKBThQAUUUq0AKKcBikUU5RQAAU4ChRSgZoAUClAoAp1ABSgUAUoFAAKcBRTgKAEApaUCloATFLilxS4oATFLS4pcUAJijFOxS4oAbiinUYNADaKdg0YNADaKdg0YNADcCkxT8UmKAGYNGKfikoAZikp+KSgBmKTFPxSEUAR4pCKeRSEUAMptSEZptADCKQinEYpCKAGEU01IRTaAIyKRhT6aaAGMKSnGmmgANNNOpGoAYabT2prUAMNNNPamtQAw0009qa1ADKKdRQAq05aSnCgBVpy0gp1ACrTlpKcKAFWloooAVaUUU4UAApwoFOFAAKcPSgU4CgApQKFFKBQAoFKKBTgKAClApQKUCgAApaAKdQAmKXFLilxQAYoxTsUYoATFLilxS0ANwaXBpaKAExRilooATFJg06igBtGKdRigBmKSn4pKAGYpKfikoAZikxT8UhFAEZFIRTzTSKAGEUhp5FNIoAZTSMVIaaaAGEUhFOpGFADDTTT2pretADDTae1NagBlFK1JQA00009qa1ADKaae1IaAIzTTUjUxqAGUU6igBVpy0gp1ACrTlpKcKAFWnLSU6gApVpKdQAq05aQU4UAKtOX1pBThQAq0o5opwoABTqBThQAU4CkApwFAABTgKAKUDNAABTqKcBQAgFLilApaADFFFFABRS4paAG4NLinYNGKAG4oxTsUYoAbijBp2KMUAMop2DRigBtFLikoATFJTqKAGEU0inkUhFADCKaakIzTaAGEU0inkU0jFADGFIRTiKRhQAwim09qa3rQAw001IaaaAIzTTUhppoAjNNNSNTWoAbTTTqRqAGU2ntTWoAYaaae1NagBlFOxRQALT1pq09elAAKetNWnrQAq0tA6UUAKtOWkFOFACrTlpBThQA5actNFOoAVactJTqAFWnLSU4UAKopQKKdQACnUCnCgAFKBQBS0AFFFOAoAQClxSgUuKAExS4p2KMUAJijFOxS4FADcCjAp1FADcCkxT6MUAMxSU/FJQAzFJT8UlADCKSnEUhFACUhFLRQAwikIp5FNYUAMNNp7CmtQAymmntSNQBGaaakamtQBHSNTmpDQAxqYakNNNAEZppp7U1qAGUUrUlADTTTT2prUAMpppx60jUAMooPWigB1Opq9acOtADqcKRactAC0L1opVoActOWkXpTh0oAVactIKcKAFWnLSU4UAKtOWkpwoAVactIKcKAFWnLSCnCgBVpyikFOoAKKKcKACnAUAUoFAABS4pQKWgAxRinYoxQAmKWnYooAbRg07BpcGgBlGKdg0UAMxSU/FJQAzFJTyKQigCMikIp9NIxQAwikp7CmsKAEppp1BoAjNNNSGmmgCM001IaaaAIzTTUhpjUAMNNp7U1qAGNTTT2prUAMNNp7U1qAGGm09qYetAA3SmNT6bQAxqa1PNNoAbRRRQAq05aRelOXpQAq09elNHSnUAFOFNFOHWgB1OHWkWnLQAq9aetNWnLQAq9aetNWnLQA5actIOlOFACrTlpBThQA5acKaKcKAHCiiigBVpy0gpwoAVRTgKQU4UAAFOFApwoAAKMUoFKBQAYowadijBoATFGKdijFADcGkp+KTFADMUlPxSUAMIpCKeRTWFADCKbTyKQigCM001IaaaAIzRTjTaAEamtT6aaAGNTGqQ0xqAGGmmntTWoAZTTT2pjdaAG00049aa3WgBpprdKcetNNADGprU8009KAG0jdaWkagBh602ntTW60AMNFK1FAC04U2nUAOp1NHWnUAKvWnLTVpy0AOWnr0pq9KcKAHDpTqbTqAHCnU0dacvWgBwpy9aRactADlpy01aevSgBVpy0gp1ABSrSU6gBVp600U4UAOFOFNFOWgBwrUt9GlkgSUTIN6hgCDxkVlrXU27FNHjdeqwAj/vmgDN/sOX/nun5Gl/sSX/AJ7p+RqMaxdntH/3zS/2vd+kf/fNAEn9iy/89k/I0f2LL/z2T8jTP7WuvSP/AL5pf7Vu/SP/AL5oAf8A2NJ/z2X8jR/Y0n/PZPyNN/tW6/6Z/wDfNH9q3X/TP/vmgB39iy/89l/I0n9jS/8APZPyNN/tW6/6Z/8AfNJ/at16R/8AfNADv7Fl/wCeyfkaP7El/wCe6fkab/a136R/980n9r3fpH/3zQA7+w5v+e6fkaralpr2cAlaRWDNtwB7H/CrVnqlzLdxxsI9rMAcLVjxR/yD0/66j+RoA55qa1PppoAY1NanmmmgCNqaae1NagBKa3WnUjUAMNNNPamtQAw009KcetNNADW6UxqfTT0oAY1NanN0pG6UAMamt1pzU1qAGHrTae1MPWgBtDdKKDQAxqa1PbpTGoASiiigApy9aaOtPXrQA5aWkWloAVaevSmr0pwoAdTqbTh1oAcvWnDrSLTl60AOXrTlpq05aAHLT16U1elOHSgBw6U6m04daAHDrTqRetLQADrT1601actADlpy01aeOlACrT1ptOoAcK6aP/kCL/17j/0GuZHWumj/AOQKv/XuP/QaAOdFOFItKKAFAp2DU+mQ+feIhHyg5b6Crus2fW4iH++B/OgDLxS4FOxRQAzFLDG0syxKOWOBSkVPpTqmoRlvUj8xQBqWun20SAGNZG7swz+lQ6lpkUkTPAmyQDOB0b2xWhSOwRCzHAUZJoA5rTf+QhD/ANdB/OtTxR/yD0/66j+RrNsTnU4jjrIP51peKP8AkHr/ANdR/I0AYDU1qe3SmNQAw9aaae1NagBlNPSnN1ppoAbQelFFADW6UxqeelNbpQAxqa3WnNTWoAYetNp7daYetADT0ptOptADW6Uxqeaa3SgBjU1qc1NagBjdaKVqSgBtNbpTjTT0oAbRRRQAL1p60xetPWgBy0tItLQA5elOpq9KdQA6nL1ptOXrQA9actNWnLQA5actNWnLQA9elOpq9KdQA6nL1ptOXrQA9aWkWloAVactNWnLQA9elOpq9KdQA6nL1po609aAHLXSx/8AIFX/AK9x/wCg1zS10sf/ACBV/wCvcf8AoNAHPLTlpF6U6MFmCgZJOBQBr+HodsLTEcscD6Vo9eDTLaMQ26RD+EYp9AGPqVp5Em9B+7Y8e3tVWuglRZIyjjIPWsW8haCUoeR/CfUUAQMKa1Oanx280kLSIhKqMk0ATW+qTRKFdRIB0J61FfX81yuw4VPRe/1qu1MbrQBLp3/IQh/3xWp4m/48E/66j+RrM0//AJCEP++P51p+Jv8AjwT/AK6j+RoAwDTW6U4009KAGNTWpzU1qAGtTG609qY3WgBtFFFADaa3SnGmt0oAY1NanNTWoAa1MbrT2pjdaAG02nU2gBtNbpTqa3SgBjU1qc1NagBrUlK1JQA2m06m0ANooooAF609aZTl60APWlpFpaAHL0p1MXpTx0oAdTl602nDrQA9actNXrSr1oAetOWmrTloAevSnUxaeOlADqcvWm04UAPWlpq9adQAq05aavWnLQA9elOFMWnr0oAdTh1po6U6gB610sf/ACBV/wCvcf8AoNcyK6aP/kCr/wBe4/8AQaAOeWr+gw+ZebyPljGfx7f59qzxW/oMPlWIcj5pDn8O3+fegC7RRRQAVFeQLcQlG6/wn0NS0UAZlnpzFt1xwAeFB61pKoVdqgADoBS0UAYesWvkXG5R+7fp7H0qjXTXcK3Fu0T9+h9D61zdxG0MrRuMMpwaAH6d/wAhCH/fFanib/jwT/rqP5GsrTf+QhD/ANdB/OtTxR/yD0/66j+RoAwTTW6UrU1qAGtTWpzU1utADWph6049abQA2iiigBtNbpTj0pjUANamtTmprUANamN1pzdaaaAG02nU2gBtNbpTj0prdKAGNTWpzU1qAGtSUN1ooAbTacaa3SgBtFFFABTh1ptOoAevWlpo606gBVp69KYtOWgB46U6mr0pw6UAOHWnCm06gBy9aetMpw60APWnLTV605aAHr0pwpi05aAH06mr0pwoAKcOtNpwoAetOWmCnUAPWnLTKcKAHrXTx/8AIDX/AK9x/wCg1y4rqIudEXH/AD7j/wBBoAwLOMz3CRD+I4rqFUKoVRgKMAVy0IuI33xrIrDoQDU/2i//AOek/wCtAHR0VzouL7/npN+tL599/wA9Jv1oA6Giue8++/56TfrR59//AM9Jv1oA6Giue8++/wCek360faL7/npN+tAHQ1n69aebD56D54xz7is37Rf/APPSb9aabi//AOek/wCtADdN/wCQjD/10H861PFH/IPT/rqP5GszTo5BqEJMbf6wZ+WtPxV/yD0/66j+RoA58000401qAGmm0rU1qAENNPSlamtQAlDdKKRqAGtTWpzUw9aAEamN1pxptADTTacelNbpQA09KaelK1NbpQAjdKY1OamtQA1qa3WnN1ph60ANPWiig9KAGnpTW6U5ulMagBKKKKAAU4dKYvSnLQA+nU1elOHSgAXrT1plOFAD1py0wdaetAD16U4dKYtOWgB46U4UxactAD6cKYtPFADh1p60wU4UAPWnLTKdQA6lWkooAetOWmU4UAPWnKaYKcDQA9TXQWeqWcdnFG0jbljUH5T1ArngaUGgDpf7Wsf+erf98Gl/tay/56N/3ya5oGnZoA6P+1bL/no3/fJo/tWy/wCejf8AfJrnc0uaAOi/tSz/AOejf98mj+1LP/no3/fJrncmjJoA6L+1LP8A56N/3yaT+1bL/no3/fJrnqM0AdD/AGrZf89G/wC+TSf2tY/89G/75Nc7mgmgDov7Wsf+ejf98GqOvX9tc2axwuSwkBOVI4wf8ayc00mgAJpppSaaxoAQ000rGmtQAhptK1JQAU005qY1ACU00rU1qAEPSmNTmprUANamtSt1ppoARqa1LTT1oARutMPWnU00ANpppx6U1ulADaRulLSNQA1qa1ObrTD1oAKKa3WigBVpy0wdadQA9actMHWnrQAtOHSm0q0APFOFMWnLQA8U5etNFOFADqcOtNpwoActPWmCnCgB605aYKdQA9actMp1AD1pabTqAFU0oNNpVNADwadTAaUGgCQGlBplOBoAeDS5pmaXNAD80uaZmjNAD80ZpuRRmgB2aTNJkUmaAFzRmm5ozQAE0hNJmkJoACaQmgmm0ABNNNBNNJoAKKKRjQAhpppWprUAIaaaVqa1ACGmmlamtQAhpp6UrU1qAEpp6UrU1qAEbpTGpzUxqAEamtSmm0AFNPWnU00ANNNpx6U00ANooooABTqYtOWgB4pwpi05aAH0Ui0tADh1py00U4UAPWnLTBThQA9actMp1AD1py0wU4UAPWnLTBTgaAHrTlpgpwNADwaUGmA05TQA+ikBpaAFBpwNMpQaAH5p2ajBp2aAH5pc0zNLmgB2TS5pmaXNADs0ZpuaM0AOzRmm5oyaAFzSZpM0maAFzSE0maTNACk00mjNNJoAUmkoooADTSaKaTQAU2gmkY0AJTaVjTWNACGmmlamtQAlNpWprUAIabStTWoAQ000rU1qAEPSm0rUlACNTWpW6000AI1Nalpp60AITRSUUAApwpq04UAOpwpopy0AOFOpopwoAVactMpwoAetOWmCnCgB605aYKcKAHCnCmilWgB4pwNMU05TQA8GnA0xTSg0ASA04GowadQA8GnA0wGlBoAfRTQadmgAzTs02igB2aXNMzS5oAfRk03NGTQA/NGaZk0ZNAD8mkyabk0ZoAdmkzSZpM0ALmkzSUUAFFFITQAuabQTTSaAAmkJoJppNAAxpCaCabQAE00mimk0ABppoNNNABTTStTWoAQ02lamtQAhptK1NagBKKKRqAENNbpStTWoAQ000rU1qAEopCaKAEWnrTBThQA9aUU0U6gBwp60wU4UAOpVpBRQA9acppgpwNADgacKYppymgB4p1MU05TQA8U4Go6dQA8GnKaYDSg0ASA0oNMBpQaAJAaUGmUuaAH5p2ajzTs0APzS0zNLmgB1FNyaXNAC0UZFFABmjNFFABRRRQAUUZFJmgBaM03NJmgBc0maTNJmgBaaTRSE0ABNITQTTaACmk0E0hNAATTWNBNITQAjGkNFNNAAaaaCaaaAA000E0jGgBDTaVqSgApppWprUAIabStTWoASm0rU1qAEopM0UAC05aYKcKAHrTlpgpwoAcKcKaKVaAHg06mLTlNAC04U2lU0APpwqMGnA0ASA04GowadQA9TSg00GlBoAfTgajBpwNADwaUGmg0oNAD6UGmZp2aAHZp2ajzTs0APzS5qPNLmgB+aXNMzS5oAfmjNMzS5FADs0Z96bkUZFADs0ZFNyKTNADs0ZpuaTJoAdSZpM0maAFzSZpM0maAFpCaSkJoAUmm0E00mgBSaaTQTSE0ABNNopCaAEJpGNDGmk0ADGmsaUmmk0AIxpCaCabQAUGimk0ABppoNNNABTaVqa1ACU00rU1qAEopM0UAIKcKYtOWgB4pwpi05aAHinUxTTlNADxThUYNOBoAkBopop1ACqacpplOBoAeDSg0wGnA0APBpwNRg06gB4NLTQaUGgB4NKDTKXNAD807NR5p2aAHZp2ajzS5oAfmlzTM0uaAH5oyabmjNAD80ZpuTRmgB2aM03NGaAHZozTc0ZoAdmkzTcmjNADs0mabmjNAC5pM0maTNAC5pM0maTNAC5puaM03NACk0lGabmgAJpCaCaaTQAE0hNBNNoACaaTQTSMaAEJoopCaABjTWNKTTSaAEY0hoppNAAaaaDTTQAGmmg000AFFITRQAlOFMU05TQA+nUxTSg0ASCnA1GDTgaAJAaVTTKdQA8GlBpimnA0APopoNOoAcDSg0ynA0AOBp1MBpQaAJAaUGmA0uaAH5p2ajzTs0AOpc03NLmgB2aXNMpc0APpc0zNGTQBJmimZpcigB2TS5NMzRk0APzRmmZNGTQA/NJk03JoyaAHZozTc0ZFAC5pMmkzSZoAdmkzSZpM0ALSZpKTNAC0maTNJmgBc00mjNNzQApNITSE0hNAATTSaCaQmgAJpKKCaAAmmk0U0mgAJptBNIxoAGNNY0pNNJoARjTWpSaaaAEY0jUU00AFFNooAAacDUYNOFAEgNKppgpwNAD1NOU0wGnA0AOBpwNMBpymgB9KDTAadQA8GlBpgNOBoAfRTQadQAoNKDTaAaAJM0oNMpQaAH5p2ajzTs0APzS5qPNOzQA7NLmmZpc0APoyabmjJoAfmjNNzS5FADs0ZpuaKAHZozTaKAHZozTaKAHZFJmkzSZoAdmkpM0mTQA6kzSZpM0ALmkzSUmaAFzSZpKTNAC5ppNGaQmgAJpCaCabQAE0UUhNACk02gmmk0ABNITQTSE0ABNNJoptABTSaCaQmgBCaaTSsaaxoAGNNY0MaQmgBM0UlFACKacppgNKDQA8GnA0xTTgaAH04VGDTgaAJAaVTTKcDQA8GlBpgNOBoAfSg0wGnUAOBp1MBpQaAJAaKaDS5oAWlzSUUAOzTs1HmnZoAdmlzTM0uaAH5pc0ylzQA/NGTTc0ZoAfmjNNyaM0APyKM0zNLkUAOzRmm5FGRQA7NGabkUZoAdkUmabmjNADsmkpuTRmgB2aTNNzSZoAdmkzSZpM0ALmkzSUmaAFzSZpKKACijNNJoAUmkJpCaQmgAJppNFITQApNNoJptAATTSaCaQmgAJprGgmkJoACaaTRTSaACm0E00mgAopM0UAJThTFNKKAJAaUGmU4GgB6mnA0wGlBoAeDTqYDSg0ASA0oNMBpQaAHg04GmA0uaAJAaM03NKDQA8GlBplKDQA/NLmmZpc0APopuaXNAC0uaSigB2aXNMoyaAH5pc0zNLkUAOyaXJpmaMmgB+aM03NGaAHZozTc0ZoAdmjNNzRmgB2aMmm5NJk0AOozTc0ZoAXNJmkzSUAOzSZpKKACiikzQAtJmkzSZoAXNNzRmm5oAUmkozTSaAFJpCaQmkJoAKaTQTSE0ABNNJoJpCaAAmm0U0mgAJpCaGNNJoAGNNY0pNNoAKKbmigABpVNMpwNADgadTAaUGgCQGnA1HTgaAHg0oNMBpwNAD804GowacDQA8GlzTAaUGgCQGlBpmaXNAD80uaZmlzQA+lzTM07NADqXNMpc0APzS5pmaXNAD80UzNLmgB1FJk0ZoAWijIozQAZNLk0lFAC5ozSUUALmkyaKKADJooozQAUUmaM0ALRTcmjNAC5pMmkzSZoAdmkzSZpM0ALmkzSUmaAFpM0lJmgBc03NGabmgBSaQmkzSZoACaQmkJpCaAFJptBNNJoACaQmgmmk0ABNITQTTaACmk0pNNY0AGaKSigAopFNLQA4GlBplOBoAcDTs0wGloAkBpQaYDSg0APzTgajBp1ADwaXNMBpQaAJM0uaZmlzQA/NLmmZpc0APzTs1HmlzQA/NLmmZpc0APoyabmlzQA7NLmmZpaAHZNLmmUuTQA7NLkUzNGaAH5ozTcijIoAdmjNNzRmgB2aM03NGRQA7NGRTcikzQA7NGTTc0mTQA7NGabRmgBc0lJmkyaAHZpM0maTNAC0maSkzQAtJmkzSZoAXNNzRmm5oAUmkozTc0AKTTSaCaQmgAppNFNJoAUmkJpCaSgApCaQmkJoACaSiigAoptFAAtKtFFAC0UUUAOpVoooAWnUUUAKtLRRQA6lWiigBacKKKACnUUUAFOoooAKcKKKACjJoooAdRRRQAZpc0UUALRRRQAUUUUAFFFFABRRRQAUUUUABpuTRRQAUUUUAITSUUUAFITRRQAlI1FFACUjUUUAJSMaKKAEptFFACNSUUUANpGoooASmmiigBGpKKKACm0UUAITRRRQB//Z";return{restrict:"A",link:function(scope,element,attr){var errorHanlder=function(){element.off("error",errorHanlder);var newSrc=attr.fallbackSrc||missingDefault;element[0].src!==newSrc&&(element[0].src=newSrc)};element.on("error",errorHanlder)}}}).directive("loadingSrc",["$interpolate",function($interpolate){var loadingDefault="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBoRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAASAAAATgAAAAAAAABgAAAAAQAAAGAAAAABUGFpbnQuTkVUIHYzLjUuMTEA/9sAQwAEAgMDAwIEAwMDBAQEBAUJBgUFBQULCAgGCQ0LDQ0NCwwMDhAUEQ4PEw8MDBIYEhMVFhcXFw4RGRsZFhoUFhcW/9sAQwEEBAQFBQUKBgYKFg8MDxYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYW/8AAEQgB9AH0AwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A+ggKcBQBRQAUAZpQKUUAFOAxRSgUAIBThQBTqAAClAoApwFACU4CilAoAQCnYoxTsUAJilpcUtACYpaXFLQAmKXFLiloAbilxTsUuKAG0YNOowaAExS4FLilxQA2inYooAbRg07BpcGgBmDRg0/FGKAGYNFPxSYNADaKdg0UANxSYp+BSYoAbikwafikoAbikxT6TFADMUYp2KMUAR4oxT8UmKAGYpMU/FJigCPFJin4pMUAMpCKfSEUAMIppFSEU2gBhFIRTyKaRQAykIp9NoAaRmm08ikNADaQilooAbiilxRQAtKBSAZpwoABTqKUCgAApwFAFKKAACnAUU4CgBAKUClApQKAClApaUCgBMU7FGKdigBMUuKUClxQAmKXFLiloATFLS4paAG4NLinYpcUANpcUtLigBuKXAp2KKAG0YNOooATFGKWigBMUYpaKAExRilooATBpMGnUUANowKdRigBmKTBp+KMUAMxSYp9JigBlGKdijFADMUmKdiigBmKTFPxSYoAjxSYp+KTFADKQin00igBpFNxTyKQigCMikIp5FIRQAwim08ikNAEZGKQin00jFADTTaeRSEUANooooAdTqAMUoFAABTgKAKUUAAFOopwoAAKUCgCnAUAAFLQBTqADGKUClApQKAEApwFFOAoATFLRinAUAJilpcUuKAExS0uKWgBMUuKKKACijBpcUAJRTqMGgBMGjFOxRigBuKXAp2BRigBuBRgU6igBuBSYp9GBQAzFGKfgUmKAGYNFPxSYoAbRTsUmKAEpMUtFADcUYp1GKAI8UYp+KTFAEeKMU7FJigBmKQin0hFADKaRipCKaaAGEUhFPIpCKAI6aRUlNNADCKQjNPIppFADCKbUhFNNAEZGKQinn0ptADaKXFFACgU4CgU4UAAp1ApwFAAKUChRTgKAAClAzQBmnAUAFOFAFOAoAQClApQKWgApQKUClAoAQCnYop2KAExS0UUAFFLiloATFLS4paAExS4pcUuKAG0uKXBpcUANxS4FOxRigBtFOowaAG0U7BowaAG0U7BowaAG4oxTqMCgBmKTBp+KMUAMpMU+kxQAzBoxTsUYoAZikp+KSgBtGKXFJQA0ikxT6QigBlNIqTFNIoAaRTaeRSUARkUhFPIpCKAGEZptPIpCKAIzSEU+mmgBjCmkU8jFIwoAYRmmmnsKawoAZRTqKAHAUqihRTgKABR3pyikApwoAUClAoFOoAKcBQKcBQAAYpQKAKWgApwFFOAxQAgFOAoApaACiilAoAAKWgCnUAJilxS4paAExS4pcUuKAExS0uKWgBuDS4p2KMUAJgUU6igBuDS4pcGlwaAG4oxTsUYoAbijBp2KTBoAbg0U7BooAbgUmKfikxQAzFGKdg0YoAZikxT8UlADMUmKfikoAZikxTyKQigCOinUhFACYzTadRQAwimkU8jFIRQAymkYp5FJQAwimkU8jFIRQAwjNNNPYU0igBh9KaakIppoAjPFNIqQ02gBmKKWigBwp1ApVoAUU4UiinKKAFHFOApFFOUUACinAUgFOoAKdQBTgMUAAGKUCgCloAKKAM07FAAKUClAxSgUAJinUAU7FACYpaXFLQAYoxTsUUAJilpcUtADcGlxTsUYoATFGDTqMGgBMGjFOxRigBuKMU7FGKAG4oxTsUYoAZg0U/FJg0ANxSYp+KTFADKKdg0YoAZikp+KSgBmKSn4pKAIyKQin4pCKAGU0ipKaRigBhFJTyKQigBtNIxTqKAGEU0inkYpCKAGU008ikoAjIxSMKeaaaAGMKawp5ppFADGFNanmmmgBtFLiigBRThQKcKAAU4UCnCgAFOFApwoAKcBSKKcooAAKcooApaACgDNFOHpQAU4UClAoAAKcBQBSgZoAAKcBRinAUAIBS0YzTsUAJilpcUtACYpaXFLigBMUuKXFLigBuKXFLg0uKAG4pcCnYoxQA3AowKdRQA3ApMU+jAoAZijBp2KMUAMpMU/FGKAI8UYp+KTFADMUmKfikxQBHiinYpMUAMxSEU+kIoAYRTSKkIptADCKaRTzSEUAMIzTaeRSEUANppp1FAEZFIwp9NNADSKaacaRhQAw0009qa1ADDTTT29aa1ADKKdiigBVpy0lOoAVactIKcKAFWlFFOFAAKcKBThQAUUUq0AKKcBikUU5RQAAU4ChRSgZoAUClAoAp1ABSgUAUoFAAKcBRTgKAEApaUCloATFLilxS4oATFLS4pcUAJijFOxS4oAbiinUYNADaKdg0YNADaKdg0YNADcCkxT8UmKAGYNGKfikoAZikp+KSgBmKTFPxSEUAR4pCKeRSEUAMptSEZptADCKQinEYpCKAGEU01IRTaAIyKRhT6aaAGMKSnGmmgANNNOpGoAYabT2prUAMNNNPamtQAw0009qa1ADKKdRQAq05aSnCgBVpy0gp1ACrTlpKcKAFWloooAVaUUU4UAApwoFOFAAKcPSgU4CgApQKFFKBQAoFKKBTgKAClApQKUCgAApaAKdQAmKXFLilxQAYoxTsUYoATFLilxS0ANwaXBpaKAExRilooATFJg06igBtGKdRigBmKSn4pKAGYpKfikoAZikxT8UhFAEZFIRTzTSKAGEUhp5FNIoAZTSMVIaaaAGEUhFOpGFADDTTT2pretADDTae1NagBlFK1JQA00009qa1ADKaae1IaAIzTTUjUxqAGUU6igBVpy0gp1ACrTlpKcKAFWnLSU6gApVpKdQAq05aQU4UAKtOX1pBThQAq0o5opwoABTqBThQAU4CkApwFAABTgKAKUDNAABTqKcBQAgFLilApaADFFFFABRS4paAG4NLinYNGKAG4oxTsUYoAbijBp2KMUAMop2DRigBtFLikoATFJTqKAGEU0inkUhFADCKaakIzTaAGEU0inkU0jFADGFIRTiKRhQAwim09qa3rQAw001IaaaAIzTTUhppoAjNNNSNTWoAbTTTqRqAGU2ntTWoAYaaae1NagBlFOxRQALT1pq09elAAKetNWnrQAq0tA6UUAKtOWkFOFACrTlpBThQA5actNFOoAVactJTqAFWnLSU4UAKopQKKdQACnUCnCgAFKBQBS0AFFFOAoAQClxSgUuKAExS4p2KMUAJijFOxS4FADcCjAp1FADcCkxT6MUAMxSU/FJQAzFJT8UlADCKSnEUhFACUhFLRQAwikIp5FNYUAMNNp7CmtQAymmntSNQBGaaakamtQBHSNTmpDQAxqYakNNNAEZppp7U1qAGUUrUlADTTTT2prUAMpppx60jUAMooPWigB1Opq9acOtADqcKRactAC0L1opVoActOWkXpTh0oAVactIKcKAFWnLSU4UAKtOWkpwoAVactIKcKAFWnLSCnCgBVpyikFOoAKKKcKACnAUAUoFAABS4pQKWgAxRinYoxQAmKWnYooAbRg07BpcGgBlGKdg0UAMxSU/FJQAzFJTyKQigCMikIp9NIxQAwikp7CmsKAEppp1BoAjNNNSGmmgCM001IaaaAIzTTUhpjUAMNNp7U1qAGNTTT2prUAMNNp7U1qAGGm09qYetAA3SmNT6bQAxqa1PNNoAbRRRQAq05aRelOXpQAq09elNHSnUAFOFNFOHWgB1OHWkWnLQAq9aetNWnLQAq9aetNWnLQA5actIOlOFACrTlpBThQA5acKaKcKAHCiiigBVpy0gpwoAVRTgKQU4UAAFOFApwoAAKMUoFKBQAYowadijBoATFGKdijFADcGkp+KTFADMUlPxSUAMIpCKeRTWFADCKbTyKQigCM001IaaaAIzRTjTaAEamtT6aaAGNTGqQ0xqAGGmmntTWoAZTTT2pjdaAG00049aa3WgBpprdKcetNNADGprU8009KAG0jdaWkagBh602ntTW60AMNFK1FAC04U2nUAOp1NHWnUAKvWnLTVpy0AOWnr0pq9KcKAHDpTqbTqAHCnU0dacvWgBwpy9aRactADlpy01aevSgBVpy0gp1ABSrSU6gBVp600U4UAOFOFNFOWgBwrUt9GlkgSUTIN6hgCDxkVlrXU27FNHjdeqwAj/vmgDN/sOX/nun5Gl/sSX/AJ7p+RqMaxdntH/3zS/2vd+kf/fNAEn9iy/89k/I0f2LL/z2T8jTP7WuvSP/AL5pf7Vu/SP/AL5oAf8A2NJ/z2X8jR/Y0n/PZPyNN/tW6/6Z/wDfNH9qXXon/fNADv7Fl/57L+RpP7Gl/wCeyfkab/at1/0z/wC+aT+1br0j/wC+aAHf2LL/AM9k/I0f2JL/AM90/I03+1rv0j/75pP7Xu/SP/vmgB39hzf890/I1W1LTXs4BK0isGbbgD2P+FWrPVLmW7jjYR7WYA4WrHij/kHp/wBdR/I0Ac81Nan000AMamtTzTTQBG1NNPamtQAlNbrTqRqAGGmmntTWoAYaaelOPWmmgBrdKY1Ppp6UAMamtTm6UjdKAGNTW605qa1ADD1ptPamHrQA2hulFBoAY1Nant0pjUAJRRRQAU5etNHWnr1oActLSLS0AKtPXpTV6U4UAOp1Npw60AOXrTh1pFpy9aAHL1py01actADlp69KavSnDpQA4dKdTacOtADh1p1IvWloAB1p69aatOWgBy05aatPHSgBVp602nUAOFdNH/yBF/69x/6DXMjrXTR/8gVf+vcf+g0Ac6KcKRaUUAOjQuwVQST0ArVs9LULvuT/AMBB/mafpsEdna/aZ/vEZ+g9PrVK9vJbliM7U7KP60AaIn0+3O1TGp/2Rn9RThf2bceYPxU1i4ooA2pLOzuEyqrz/ElZeoWElv8AMPnj/vDt9aZBLJC++Jip7jsa2bG5S7hOQNw4dTQBzp4pGq9q1p9nmyg/dv8Ad9vaqVAEmm/8hCH/AK6D+danij/kHp/11H8jWZpv/IQh/wCug/nWn4o/5B6/9dR/I0AYDU1qe3SmNQAw9aaae1NagBlNPSnN1ppoAbQelFFADW6UxqeelNbpQAxqa3WnNTWoAYetNp7daYetADT0ptOptADW6Uxqeaa3SgBjU1qc1NagBjdaKVqSgBtNbpTjTT0oAbRRRQAL1p60xetPWgBy0tItLQA5elOpq9KdQA6nL1ptOXrQA9actNWnLQA5actNWnLQA9elOpq9KdQA6nL1ptOXrQA9aWkWloAVactNWnLQA9elOpq9KdQA6nL1po609aAHLXSx/wDIFX/r3H/oNc0tdLH/AMgVf+vcf+g0Ac8tWdLi868RD0zk/QVXXpV/w7/x/H/cP9KAJNdnLXAhB+VOv1qkKddktdSE/wB8/wA6bQA4CiilJoAawqSymMF0smeM4b6VG1NagDd1OITWTrjJA3L9RXOnrXT253W6HPVR/Kuak4kIHrQA/Tv+QhD/AL4rU8Tf8eCf9dR/I1maf/yEIf8AfH860/E3/Hgn/XUfyNAGAaa3SnGmnpQAxqa1OamtQA1qY3WntTG60ANooooAbTW6U401ulADGprU5qa1ADWpjdae1MbrQA2m06m0ANprdKdTW6UAMamtTmprUANakpWpKAG02nU2gBtFFFAAvWnrTKcvWgB60tItLQA5elOpi9KeOlADqcvWm04daAHrTlpq9aVetAD1py01actAD16U6mLTx0oAdTl602nCgB60tNXrTqAFWnLTV605aAHr0pwpi09elADqcOtNHSnUAPWulj/5Aq/9e4/9BrmRXTR/8gVf+vcf+g0Ac8tXdEkEeoLno2VqiKepKsGBwQcg0AWdSj8u+kX1bI/HmolNX7oC+s1uY/8AWRjDrWeDQA8GjNNzRmgBSaaaM0sal2wOB1J9BQBILi4S38tZWCt29qrU+ZgW+Xp0A9qYaAJdO/5CEP8AvitTxN/x4J/11H8jWVpv/IQh/wCug/nWp4o/5B6f9dR/I0AYJprdKVqa1ADWprU5qa3WgBrUw9acetNoAbRRRQA2mt0px6UxqAGtTWpzU1qAGtTG605utNNADabTqbQA2mt0px6U1ulADGprU5qa1ADWpKG60UANptONNbpQA2iiigApw602nUAPXrS00dadQAq09elMWnLQA8dKdTV6U4dKAHDrThTadQA5etPWmU4daAHrTlpq9actAD16U4UxactAD6dTV6U4UAFOHWm04UAPWnLTBTqAHrTlplOFAD1rp4/+QGv/AF7j/wBBrlxXURc6IuP+fcf+g0Ac4tOBo8qX/nm//fJpfLl/55v/AN8mgCWzuJLaXfGfqD0NXGjtr354HEMp6o3Q/SqAjk/55t/3zR5cn/PNv++aAJ5rW5iOGhb6gZH6UwRyngRsf+AmnRyXkYwjTADtzStPfN1eb9aAD7M6jdOwiX/a+9+VMmlXb5cQ2p3z1b60xklJyUc/gaTy5P8Anm3/AHzQA2mk08xy/wDPNv8AvmkMcv8Azzf/AL5NAEmm/wDIRh/66D+danij/kHp/wBdR/I1mabHINQhJjYfOO1afir/AJB6f9dR/I0Ac+aaacaa1ADTTaVqa1ACGmnpStTWoAShulFI1ADWprU5qYetACNTG60402gBpptOPSmt0oAaelNPSlamt0oARulManNTWoAa1NbrTm60w9aAGnrRRQelADT0prdKc3SmNQAlFFFAAKcOlMXpTloAfTqavSnDpQAL1p60ynCgB605aYOtPWgB69KcOlMWnLQA8dKcKYtOWgB9OFMWnigBw609aYKcKAHrTlplOoAdSrSUUAPWnLTKcKAHrTlNMFOBoAeproLPVLOOzijaRtyxqD8p6gVzwNKDQB0v9rWP/PVv++DS/wBrWX/PRv8Avk1zQNOzQB0f9q2X/PRv++TR/atl/wA9G/75Nc7mlzQB0X9qWf8Az0b/AL5NH9qWf/PRv++TXO5NGTQB0X9qWf8Az0b/AL5NJ/atl/z0b/vk1z1GaAOh/tWy/wCejf8AfJpP7Wsf+ejf98mudzQTQB0X9rWP/PRv++DVHXr+2ubNY4XJYSAnKkcYP+NZOaaTQAE000pNNY0AIaaaVjTWoAQ02lakoAKaac1MagBKaaVqa1ACHpTGpzU1qAGtTWpW6000AI1Nalpp60AI3WmHrTqaaAG00049Ka3SgBtI3SlpGoAa1NanN1ph60AFFNbrRQAq05aYOtOoAetOWmDrT1oAWnDpTaVaAHinCmLTloAeKcvWminCgB1OHWm04UAOWnrTBThQA9actMFOoAetOWmU6gB60tNp1ACqaUGm0qmgB4NOpgNKDQBIDSg0ynA0APBpc0zNLmgB+aXNMzRmgB+aM03IozQA7NJmkyKTNAC5ozTc0ZoACaQmkzSE0ABNITQTTaAAmmmgmmk0AFFFIxoAQ000rU1qAENNNK1NagBDTTStTWoAQ009KVqa1ACU09KVqa1ACN0pjU5qY1ACNTWpTTaACmnrTqaaAGmm049KaaAG0UUUAAp1MWnLQA8U4UxactAD6KRaWgBw605aaKcKAHrTlpgpwoAetOWmU6gB605aYKcKAHrTlpgpwNAD1py0wU4GgB4NKDTAacpoAfRSA0tACg04GmUoNAD807NRg07NAD80uaZmlzQA7Jpc0zNLmgB2aM03NGaAHZozTc0ZNAC5pM0maTNAC5pCaTNJmgBSaaTRmmk0AKTSUUUABppNFNJoAKbQTSMaAEptKxprGgBDTTStTWoASm0rU1qAENNpWprUAIaaaVqa1ACHpTaVqSgBGprUrdaaaAEamtS009aAEJopKKAAU4U1acKAHU4U0U5aAHCnU0U4UAKtOWmU4UAPWnLTBThQA9actMFOFADhThTRSrQA8U4GmKacpoAeDTgaYppQaAJAacDUYNOoAeDTgaYDSg0APopoNOzQAZp2abRQA7NLmmZpc0APoyabmjJoAfmjNMyaMmgB+TSZNNyaM0AOzSZpM0maAFzSZpKKACiikJoAXNNoJppNAATSE0E00mgAY0hNBNNoACaaTRTSaAA000GmmgApppWprUAIabStTWoAQ02lamtQAlFFI1ACGmt0pWprUAIaaaVqa1ACUUhNFACLT1pgpwoAetKKaKdQA4U9aYKcKAHUq0gooAetOU0wU4GgBwNOFMU05TQA8U6mKacpoAeKcDUdOoAeDTlNMBpQaAJAaUGmA0oNAEgNKDTKXNAD807NR5p2aAH5paZmlzQA6im5NLmgBaKMiigAzRmiigAooooAKKMikzQAtGabmkzQAuaTNJmkzQAtNJopCaAAmkJoJptABTSaCaQmgAJprGgmkJoARjSGimmgANNNBNNNAAaaaCaRjQAhptK1JQAU00rU1qAENNpWprUAJTaVqa1ACUUmaKABactMFOFAD1py0wU4UAOFOFNFKtADwadTFpymgBacKbSqaAH04VGDTgaAJAacDUYNOoAeppQaaDSg0APpwNRg04GgB4NKDTQaUGgB9KDTM07NADs07NR5p2aAH5pc1HmlzQA/NLmmZpc0APzRmmZpcigB2aM+9NyKMigB2aMim5FJmgB2aM03NJk0AOpM0maTNAC5pM0maTNAC0hNJSE0AKTTaCaaTQApNNJoJpCaAAmm0UhNACE0jGhjTSaABjTWNKTTSaAEY0hNBNNoAKDRTSaAA000GmmgAptK1NagBKaaVqa1ACUUmaKAEFOFMWnLQA8U4UxactADxTqYppymgB4pwqMGnA0ASA0U0U6gBVNOU0ynA0APBpQaYDTgaAHg04GowadQA8GlpoNKDQA8GlBplLmgB+admo807NADs07NR5pc0APzS5pmaXNAD80ZNNzRmgB+aM03JozQA7NGabmjNADs0ZpuaM0AOzSZpuTRmgB2aTNNzRmgBc0maTNJmgBc0maTNJmgBc03NGabmgBSaSjNNzQAE0hNBNNJoACaQmgmm0ABNNJoJpGNACE0UUhNAAxprGlJppNACMaQ0U0mgANNNBppoADTTQaaaACikJooASnCmKacpoAfTqYppQaAJBTgajBpwNAEgNKpplOoAeDSg0xTTgaAH0U0GnUAOBpQaZTgaAHA06mA0oNAEgNKDTAaXNAD807NR5p2aAHUuabmlzQA7NLmmUuaAH0uaZmjJoAkzRTM0uRQA7JpcmmZoyaAH5ozTMmjJoAfmkyabk0ZNADs0ZpuaMigBc0mTSZpM0AOzSZpM0maAFpM0lJmgBaTNJmkzQAuaaTRmm5oAUmkJpCaQmgAJppNBNITQAE0lFBNAATTSaKaTQAE02gmkY0ADGmsaUmmk0AIxprUpNNNACMaRqKaaACim0UAANOBqMGnCgCQGlU0wU4GgB6mnKaYDTgaAHA04GmA05TQA+lBpgNOoAeDSg0wGnA0APopoNOoAUGlBptANAEmaUGmUoNAD807NR5p2aAH5pc1HmnZoAdmlzTM0uaAH0ZNNzRk0APzRmm5pcigB2aM03NFADs0ZptFADs0ZptFADsikzSZpM0AOzSUmaTJoAdSZpM0maAFzSZpKTNAC5pM0lJmgBc00mjNITQAE0hNBNNoACaKKQmgBSabQTTSaAAmkJoJpCaAAmmk0U2gAppNBNITQAhNNJpWNNY0ADGmsaGNITQAmaKSigBFNOU0wGlBoAeDTgaYppwNAD6cKjBpwNAEgNKpplOBoAeDSg0wGnA0APpQaYDTqAHA06mA0oNAEgNFNBpc0ALS5pKKAHZp2ajzTs0AOzS5pmaXNAD80uaZS5oAfmjJpuaM0APzRmm5NGaAH5FGaZmlyKAHZozTcijIoAdmjNNyKM0AOyKTNNzRmgB2TSU3JozQA7NJmm5pM0AOzSZpM0maAFzSZpKTNAC5pM0lFABRRmmk0AKTSE0hNITQAE00mikJoAUmm0E02gAJppNBNITQAE01jQTSE0ABNNJoppNABTaCaaTQAUUmaKAEpwpimlFAEgNKDTKcDQA9TTgaYDSg0APBp1MBpQaAJAaUGmA0oNADwacDTAaXNAEgNGabmlBoAeDSg0ylBoAfmlzTM0uaAH0U3NLmgBaXNJRQA7NLmmUZNAD80uaZmlyKAHZNLk0zNGTQA/NGabmjNADs0ZpuaM0AOzRmm5ozQA7NGTTcmkyaAHUZpuaM0ALmkzSZpKAHZpM0lFABRRSZoAWkzSZpM0ALmm5ozTc0AKTSUZppNACk0hNITSE0AFNJoJpCaAAmmk0E0hNAATTaKaTQAE0hNDGmk0ADGmsaUmm0AFFNzRQAA0qmmU4GgBwNOpgNKDQBIDTgajpwNADwaUGmA04GgB+acDUYNOBoAeDS5pgNKDQBIDSg0zNLmgB+aXNMzS5oAfS5pmadmgB1LmmUuaAH5pc0zNLmgB+aKZmlzQA6ikyaM0ALRRkUZoAMmlyaSigBc0ZpKKAFzSZNFFABk0UUZoAKKTNGaAFopuTRmgBc0mTSZpM0AOzSZpM0maAFzSZpKTNAC0maSkzQAuabmjNNzQApNITSZpM0ABNITSE0hNACk02gmmk0ABNITQTTSaAAmkJoJptABTSaUmmsaADNFJRQAUUimloAcDSg0ynA0AOBp2aYDS0ASA0oNMBpQaAH5pwNRg06gB4NLmmA0oNAEmaXNMzS5oAfmlzTM0uaAH5p2ajzS5oAfmlzTM0uaAH0ZNNzS5oAdmlzTM0tADsmlzTKXJoAdmlyKZmjNAD80ZpuRRkUAOzRmm5ozQA7NGabmjIoAdmjIpuRSZoAdmjJpuaTJoAdmjNNozQAuaSkzSZNADs0maTNJmgBaTNJSZoAWkzSZpM0ALmm5ozTc0AKTSUZpuaAFJppNBNITQAU0mimk0AKTSE0hNJQAUhNITSE0ABNJRRQAUU2igAWlWiigBaKKKAHUq0UUALTqKKAFWloooAdSrRRQAtOFFFABTqKKACnUUUAFOFFFABRk0UUAOooooAM0uaKKAFooooAKKKKACiiigAooooAKKKKAA03JoooAKKKKAEJpKKKACkJoooASkaiigBKRqKKAEpGNFFACU2iigBGpKKKAG0jUUUAJTTRRQAjUlFFABTaKKAEJooooA//2Q==",linkFunction=function(scope,element,attr){element[0].src=attr.loadingSrc||loadingDefault;var img=new Image;img.src=$interpolate(attr.imgSrc)(scope),img.onload=function(){img.onload=null,element[0].src!==img.src&&(element[0].src=img.src)}};return{restrict:"A",compile:function(el,attr){return attr.imgSrc=attr.ngSrc,delete attr.ngSrc,linkFunction}}}]),function(){"use strict";var root=this,previous=root.Chart,Chart=function(context){this.canvas=context.canvas,this.ctx=context;var computeDimension=function(element,dimension){return element["offset"+dimension]?element["offset"+dimension]:document.defaultView.getComputedStyle(element).getPropertyValue(dimension)},width=this.width=computeDimension(context.canvas,"Width"),height=this.height=computeDimension(context.canvas,"Height");context.canvas.width=width,context.canvas.height=height;var width=this.width=context.canvas.width,height=this.height=context.canvas.height;return this.aspectRatio=this.width/this.height,helpers.retinaScale(this),this};Chart.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},Chart.types={};var helpers=Chart.helpers={},each=helpers.each=function(loopable,callback,self){var additionalArgs=Array.prototype.slice.call(arguments,3);if(loopable)if(loopable.length===+loopable.length){var i;for(i=0;i<loopable.length;i++)callback.apply(self,[loopable[i],i].concat(additionalArgs))}else for(var item in loopable)callback.apply(self,[loopable[item],item].concat(additionalArgs))},clone=helpers.clone=function(obj){var objClone={};return each(obj,function(value,key){obj.hasOwnProperty(key)&&(objClone[key]=value)}),objClone},extend=helpers.extend=function(base){return each(Array.prototype.slice.call(arguments,1),function(extensionObject){each(extensionObject,function(value,key){extensionObject.hasOwnProperty(key)&&(base[key]=value)})}),base},merge=helpers.merge=function(base,master){var args=Array.prototype.slice.call(arguments,0);return args.unshift({}),extend.apply(null,args)},indexOf=helpers.indexOf=function(arrayToSearch,item){if(Array.prototype.indexOf)return arrayToSearch.indexOf(item);for(var i=0;i<arrayToSearch.length;i++)if(arrayToSearch[i]===item)return i;return-1},inherits=(helpers.where=function(collection,filterCallback){var filtered=[];return helpers.each(collection,function(item){filterCallback(item)&&filtered.push(item)}),filtered},helpers.findNextWhere=function(arrayToSearch,filterCallback,startIndex){startIndex||(startIndex=-1);for(var i=startIndex+1;i<arrayToSearch.length;i++){var currentItem=arrayToSearch[i];if(filterCallback(currentItem))return currentItem}},helpers.findPreviousWhere=function(arrayToSearch,filterCallback,startIndex){startIndex||(startIndex=arrayToSearch.length);for(var i=startIndex-1;i>=0;i--){var currentItem=arrayToSearch[i];if(filterCallback(currentItem))return currentItem}},helpers.inherits=function(extensions){var parent=this,ChartElement=extensions&&extensions.hasOwnProperty("constructor")?extensions.constructor:function(){return parent.apply(this,arguments)},Surrogate=function(){this.constructor=ChartElement};return Surrogate.prototype=parent.prototype,ChartElement.prototype=new Surrogate,ChartElement.extend=inherits,extensions&&extend(ChartElement.prototype,extensions),ChartElement.__super__=parent.prototype,ChartElement}),noop=helpers.noop=function(){},uid=helpers.uid=function(){var id=0;return function(){return"chart-"+id++}}(),warn=helpers.warn=function(str){window.console&&"function"==typeof window.console.warn&&console.warn(str)},amd=helpers.amd="function"==typeof define&&define.amd,isNumber=helpers.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},max=helpers.max=function(array){return Math.max.apply(Math,array)},min=helpers.min=function(array){return Math.min.apply(Math,array)},getDecimalPlaces=(helpers.cap=function(valueToCap,maxValue,minValue){if(isNumber(maxValue)){if(valueToCap>maxValue)return maxValue}else if(isNumber(minValue)&&valueToCap<minValue)return minValue;return valueToCap},helpers.getDecimalPlaces=function(num){return num%1!==0&&isNumber(num)?num.toString().split(".")[1].length:0}),toRadians=helpers.radians=function(degrees){return degrees*(Math.PI/180)},aliasPixel=(helpers.getAngleFromPoint=function(centrePoint,anglePoint){var distanceFromXCenter=anglePoint.x-centrePoint.x,distanceFromYCenter=anglePoint.y-centrePoint.y,radialDistanceFromCenter=Math.sqrt(distanceFromXCenter*distanceFromXCenter+distanceFromYCenter*distanceFromYCenter),angle=2*Math.PI+Math.atan2(distanceFromYCenter,distanceFromXCenter);return distanceFromXCenter<0&&distanceFromYCenter<0&&(angle+=2*Math.PI),{angle:angle,distance:radialDistanceFromCenter}},helpers.aliasPixel=function(pixelWidth){return pixelWidth%2===0?0:.5}),calculateOrderOfMagnitude=(helpers.splineCurve=function(FirstPoint,MiddlePoint,AfterPoint,t){var d01=Math.sqrt(Math.pow(MiddlePoint.x-FirstPoint.x,2)+Math.pow(MiddlePoint.y-FirstPoint.y,2)),d12=Math.sqrt(Math.pow(AfterPoint.x-MiddlePoint.x,2)+Math.pow(AfterPoint.y-MiddlePoint.y,2)),fa=t*d01/(d01+d12),fb=t*d12/(d01+d12);return{inner:{x:MiddlePoint.x-fa*(AfterPoint.x-FirstPoint.x),y:MiddlePoint.y-fa*(AfterPoint.y-FirstPoint.y)},outer:{x:MiddlePoint.x+fb*(AfterPoint.x-FirstPoint.x),y:MiddlePoint.y+fb*(AfterPoint.y-FirstPoint.y)}}},helpers.calculateOrderOfMagnitude=function(val){return Math.floor(Math.log(val)/Math.LN10)}),template=(helpers.calculateScaleRange=function(valuesArray,drawingSize,textSize,startFromZero,integersOnly){var minSteps=2,maxSteps=Math.floor(drawingSize/(1.5*textSize)),skipFitting=minSteps>=maxSteps,maxValue=max(valuesArray),minValue=min(valuesArray);maxValue===minValue&&(maxValue+=.5,minValue>=.5&&!startFromZero?minValue-=.5:maxValue+=.5);for(var valueRange=Math.abs(maxValue-minValue),rangeOrderOfMagnitude=calculateOrderOfMagnitude(valueRange),graphMax=Math.ceil(maxValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude),graphMin=startFromZero?0:Math.floor(minValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude),graphRange=graphMax-graphMin,stepValue=Math.pow(10,rangeOrderOfMagnitude),numberOfSteps=Math.round(graphRange/stepValue);(numberOfSteps>maxSteps||2*numberOfSteps<maxSteps)&&!skipFitting;)if(numberOfSteps>maxSteps)stepValue*=2,numberOfSteps=Math.round(graphRange/stepValue),numberOfSteps%1!==0&&(skipFitting=!0);else if(integersOnly&&rangeOrderOfMagnitude>=0){if(stepValue/2%1!==0)break;stepValue/=2,numberOfSteps=Math.round(graphRange/stepValue)}else stepValue/=2,numberOfSteps=Math.round(graphRange/stepValue);return skipFitting&&(numberOfSteps=minSteps,stepValue=graphRange/numberOfSteps),{steps:numberOfSteps,stepValue:stepValue,min:graphMin,max:graphMin+numberOfSteps*stepValue}},helpers.template=function(templateString,valuesObject){function tmpl(str,data){var fn=/\W/.test(str)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+str.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[str]=cache[str];return data?fn(data):fn}if(templateString instanceof Function)return templateString(valuesObject);var cache={};return tmpl(templateString,valuesObject)}),easingEffects=(helpers.generateLabels=function(templateString,numberOfSteps,graphMin,stepValue){var labelsArray=new Array(numberOfSteps);return labelTemplateString&&each(labelsArray,function(val,index){labelsArray[index]=template(templateString,{value:graphMin+stepValue*(index+1)})}),labelsArray},helpers.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var s=1.70158,p=0,a=1;return 0===t?0:1==(t/=1)?1:(p||(p=.3),a<Math.abs(1)?(a=1,s=p/4):s=p/(2*Math.PI)*Math.asin(1/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p)))},easeOutElastic:function(t){var s=1.70158,p=0,a=1;return 0===t?0:1==(t/=1)?1:(p||(p=.3),a<Math.abs(1)?(a=1,s=p/4):s=p/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*t)*Math.sin((1*t-s)*(2*Math.PI)/p)+1)},easeInOutElastic:function(t){var s=1.70158,p=0,a=1;return 0===t?0:2==(t/=.5)?1:(p||(p=1*(.3*1.5)),a<Math.abs(1)?(a=1,s=p/4):s=p/(2*Math.PI)*Math.asin(1/a),t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p)):a*Math.pow(2,-10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p)*.5+1)},easeInBack:function(t){var s=1.70158;return 1*(t/=1)*t*((s+1)*t-s)},easeOutBack:function(t){var s=1.70158;return 1*((t=t/1-1)*t*((s+1)*t+s)+1)},easeInOutBack:function(t){var s=1.70158;return(t/=.5)<1?.5*(t*t*(((s*=1.525)+1)*t-s)):.5*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)},easeInBounce:function(t){return 1-easingEffects.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?1*(7.5625*t*t):t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*easingEffects.easeInBounce(2*t):.5*easingEffects.easeOutBounce(2*t-1)+.5}}),requestAnimFrame=helpers.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return window.setTimeout(callback,1e3/60)}}(),cancelAnimFrame=helpers.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(callback){return window.clearTimeout(callback,1e3/60)}}(),addEvent=(helpers.animationLoop=function(callback,totalSteps,easingString,onProgress,onComplete,chartInstance){var currentStep=0,easingFunction=easingEffects[easingString]||easingEffects.linear,animationFrame=function(){currentStep++;var stepDecimal=currentStep/totalSteps,easeDecimal=easingFunction(stepDecimal);callback.call(chartInstance,easeDecimal,stepDecimal,currentStep),onProgress.call(chartInstance,easeDecimal,stepDecimal),currentStep<totalSteps?chartInstance.animationFrame=requestAnimFrame(animationFrame):onComplete.apply(chartInstance)};requestAnimFrame(animationFrame)},helpers.getRelativePosition=function(evt){var mouseX,mouseY,e=evt.originalEvent||evt,canvas=evt.currentTarget||evt.srcElement,boundingRect=canvas.getBoundingClientRect();return e.touches?(mouseX=e.touches[0].clientX-boundingRect.left,mouseY=e.touches[0].clientY-boundingRect.top):(mouseX=e.clientX-boundingRect.left,mouseY=e.clientY-boundingRect.top),{x:mouseX,y:mouseY}},helpers.addEvent=function(node,eventType,method){node.addEventListener?node.addEventListener(eventType,method):node.attachEvent?node.attachEvent("on"+eventType,method):node["on"+eventType]=method}),removeEvent=helpers.removeEvent=function(node,eventType,handler){node.removeEventListener?node.removeEventListener(eventType,handler,!1):node.detachEvent?node.detachEvent("on"+eventType,handler):node["on"+eventType]=noop},unbindEvents=(helpers.bindEvents=function(chartInstance,arrayOfEvents,handler){chartInstance.events||(chartInstance.events={}),each(arrayOfEvents,function(eventName){chartInstance.events[eventName]=function(){handler.apply(chartInstance,arguments)},addEvent(chartInstance.chart.canvas,eventName,chartInstance.events[eventName])})},helpers.unbindEvents=function(chartInstance,arrayOfEvents){each(arrayOfEvents,function(handler,eventName){removeEvent(chartInstance.chart.canvas,eventName,handler)})}),getMaximumWidth=helpers.getMaximumWidth=function(domNode){var container=domNode.parentNode;return container.clientWidth},getMaximumHeight=helpers.getMaximumHeight=function(domNode){var container=domNode.parentNode;return container.clientHeight},retinaScale=(helpers.getMaximumSize=helpers.getMaximumWidth,helpers.retinaScale=function(chart){var ctx=chart.ctx,width=chart.canvas.width,height=chart.canvas.height;window.devicePixelRatio&&(ctx.canvas.style.width=width+"px",ctx.canvas.style.height=height+"px",ctx.canvas.height=height*window.devicePixelRatio,ctx.canvas.width=width*window.devicePixelRatio,ctx.scale(window.devicePixelRatio,window.devicePixelRatio))}),clear=helpers.clear=function(chart){chart.ctx.clearRect(0,0,chart.width,chart.height)},fontString=helpers.fontString=function(pixelSize,fontStyle,fontFamily){return fontStyle+" "+pixelSize+"px "+fontFamily},longestText=helpers.longestText=function(ctx,font,arrayOfStrings){ctx.font=font;var longest=0;return each(arrayOfStrings,function(string){var textWidth=ctx.measureText(string).width;longest=textWidth>longest?textWidth:longest}),longest},drawRoundedRectangle=helpers.drawRoundedRectangle=function(ctx,x,y,width,height,radius){ctx.beginPath(),ctx.moveTo(x+radius,y),ctx.lineTo(x+width-radius,y),ctx.quadraticCurveTo(x+width,y,x+width,y+radius),ctx.lineTo(x+width,y+height-radius),ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height),ctx.lineTo(x+radius,y+height),ctx.quadraticCurveTo(x,y+height,x,y+height-radius),ctx.lineTo(x,y+radius),ctx.quadraticCurveTo(x,y,x+radius,y),ctx.closePath()};Chart.instances={},Chart.Type=function(data,options,chart){this.options=options,this.chart=chart,this.id=uid(),Chart.instances[this.id]=this,options.responsive&&this.resize(),this.initialize.call(this,data)},extend(Chart.Type.prototype,{initialize:function(){return this},clear:function(){return clear(this.chart),this},stop:function(){return cancelAnimFrame(this.animationFrame),this},resize:function(callback){this.stop();var canvas=this.chart.canvas,newWidth=getMaximumWidth(this.chart.canvas),newHeight=this.options.maintainAspectRatio?newWidth/this.chart.aspectRatio:getMaximumHeight(this.chart.canvas);return canvas.width=this.chart.width=newWidth,canvas.height=this.chart.height=newHeight,retinaScale(this.chart),"function"==typeof callback&&callback.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:noop,render:function(reflow){return reflow&&this.reflow(),this.options.animation&&!reflow?helpers.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return template(this.options.legendTemplate,this)},destroy:function(){this.clear(),unbindEvents(this,this.events);var canvas=this.chart.canvas;canvas.width=this.chart.width,canvas.height=this.chart.height,canvas.style.removeProperty?(canvas.style.removeProperty("width"),canvas.style.removeProperty("height")):(canvas.style.removeAttribute("width"),canvas.style.removeAttribute("height")),delete Chart.instances[this.id]},showTooltip:function(ChartElements,forceRedraw){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var isChanged=function(Elements){var changed=!1;return Elements.length!==this.activeElements.length?changed=!0:(each(Elements,function(element,index){element!==this.activeElements[index]&&(changed=!0)},this),changed)}.call(this,ChartElements);if(isChanged||forceRedraw){if(this.activeElements=ChartElements,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),ChartElements.length>0)if(this.datasets&&this.datasets.length>1){for(var dataArray,dataIndex,i=this.datasets.length-1;i>=0&&(dataArray=this.datasets[i].points||this.datasets[i].bars||this.datasets[i].segments,dataIndex=indexOf(dataArray,ChartElements[0]),dataIndex===-1);i--);var tooltipLabels=[],tooltipColors=[],medianPosition=function(index){var dataCollection,xMax,yMax,xMin,yMin,Elements=[],xPositions=[],yPositions=[];return helpers.each(this.datasets,function(dataset){dataCollection=dataset.points||dataset.bars||dataset.segments,dataCollection[dataIndex]&&dataCollection[dataIndex].hasValue()&&Elements.push(dataCollection[dataIndex])}),helpers.each(Elements,function(element){xPositions.push(element.x),yPositions.push(element.y),tooltipLabels.push(helpers.template(this.options.multiTooltipTemplate,element)),tooltipColors.push({fill:element._saved.fillColor||element.fillColor,stroke:element._saved.strokeColor||element.strokeColor})},this),yMin=min(yPositions),yMax=max(yPositions),xMin=min(xPositions),xMax=max(xPositions),{x:xMin>this.chart.width/2?xMin:xMax,y:(yMin+yMax)/2}}.call(this,dataIndex);new Chart.MultiTooltip({x:medianPosition.x,y:medianPosition.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:tooltipLabels,legendColors:tooltipColors,legendColorBackground:this.options.multiTooltipKeyBackground,title:ChartElements[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else each(ChartElements,function(Element){var tooltipPosition=Element.tooltipPosition();new Chart.Tooltip({x:Math.round(tooltipPosition.x),y:Math.round(tooltipPosition.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:template(this.options.tooltipTemplate,Element),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),Chart.Type.extend=function(extensions){var parent=this,ChartType=function(){return parent.apply(this,arguments)};if(ChartType.prototype=clone(parent.prototype),extend(ChartType.prototype,extensions),ChartType.extend=Chart.Type.extend,extensions.name||parent.prototype.name){var chartName=extensions.name||parent.prototype.name,baseDefaults=Chart.defaults[parent.prototype.name]?clone(Chart.defaults[parent.prototype.name]):{};Chart.defaults[chartName]=extend(baseDefaults,extensions.defaults),Chart.types[chartName]=ChartType,Chart.prototype[chartName]=function(data,options){var config=merge(Chart.defaults.global,Chart.defaults[chartName],options||{});return new ChartType(data,config,this)}}else warn("Name not provided for this chart, so it hasn't been registered");return parent},Chart.Element=function(configuration){extend(this,configuration),this.initialize.apply(this,arguments),this.save()},extend(Chart.Element.prototype,{initialize:function(){},restore:function(props){return props?each(props,function(key){this[key]=this._saved[key]},this):extend(this,this._saved),this},save:function(){return this._saved=clone(this),delete this._saved._saved,this},update:function(newProps){return each(newProps,function(value,key){this._saved[key]=this[key],this[key]=value},this),this},transition:function(props,ease){return each(props,function(value,key){this[key]=(value-this._saved[key])*ease+this._saved[key]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return isNumber(this.value)}}),Chart.Element.extend=inherits,Chart.Point=Chart.Element.extend({display:!0,inRange:function(chartX,chartY){var hitDetectionRange=this.hitDetectionRadius+this.radius;return Math.pow(chartX-this.x,2)+Math.pow(chartY-this.y,2)<Math.pow(hitDetectionRange,2)},draw:function(){if(this.display){var ctx=this.ctx;ctx.beginPath(),ctx.arc(this.x,this.y,this.radius,0,2*Math.PI),ctx.closePath(),ctx.strokeStyle=this.strokeColor,ctx.lineWidth=this.strokeWidth,ctx.fillStyle=this.fillColor,ctx.fill(),ctx.stroke()}}}),Chart.Arc=Chart.Element.extend({inRange:function(chartX,chartY){var pointRelativePosition=helpers.getAngleFromPoint(this,{x:chartX,y:chartY}),betweenAngles=pointRelativePosition.angle>=this.startAngle&&pointRelativePosition.angle<=this.endAngle,withinRadius=pointRelativePosition.distance>=this.innerRadius&&pointRelativePosition.distance<=this.outerRadius;return betweenAngles&&withinRadius},tooltipPosition:function(){var centreAngle=this.startAngle+(this.endAngle-this.startAngle)/2,rangeFromCentre=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(centreAngle)*rangeFromCentre,y:this.y+Math.sin(centreAngle)*rangeFromCentre}},draw:function(animationPercent){var ctx=this.ctx;ctx.beginPath(),ctx.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),ctx.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),ctx.closePath(),ctx.strokeStyle=this.strokeColor,ctx.lineWidth=this.strokeWidth,ctx.fillStyle=this.fillColor,ctx.fill(),ctx.lineJoin="bevel",this.showStroke&&ctx.stroke()}}),Chart.Rectangle=Chart.Element.extend({draw:function(){var ctx=this.ctx,halfWidth=this.width/2,leftX=this.x-halfWidth,rightX=this.x+halfWidth,top=this.base-(this.base-this.y),halfStroke=this.strokeWidth/2;this.showStroke&&(leftX+=halfStroke,rightX-=halfStroke,top+=halfStroke),ctx.beginPath(),ctx.fillStyle=this.fillColor,ctx.strokeStyle=this.strokeColor,ctx.lineWidth=this.strokeWidth,ctx.moveTo(leftX,this.base),ctx.lineTo(leftX,top),ctx.lineTo(rightX,top),ctx.lineTo(rightX,this.base),ctx.fill(),this.showStroke&&ctx.stroke()},height:function(){return this.base-this.y},inRange:function(chartX,chartY){return chartX>=this.x-this.width/2&&chartX<=this.x+this.width/2&&chartY>=this.y&&chartY<=this.base}}),Chart.Tooltip=Chart.Element.extend({draw:function(){var ctx=this.chart.ctx;ctx.font=fontString(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var caretPadding=this.caretPadding=2,tooltipWidth=ctx.measureText(this.text).width+2*this.xPadding,tooltipRectHeight=this.fontSize+2*this.yPadding,tooltipHeight=tooltipRectHeight+this.caretHeight+caretPadding;this.x+tooltipWidth/2>this.chart.width?this.xAlign="left":this.x-tooltipWidth/2<0&&(this.xAlign="right"),this.y-tooltipHeight<0&&(this.yAlign="below");var tooltipX=this.x-tooltipWidth/2,tooltipY=this.y-tooltipHeight;if(ctx.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":ctx.beginPath(),ctx.moveTo(this.x,this.y-caretPadding),ctx.lineTo(this.x+this.caretHeight,this.y-(caretPadding+this.caretHeight)),ctx.lineTo(this.x-this.caretHeight,this.y-(caretPadding+this.caretHeight)),ctx.closePath(),ctx.fill();break;case"below":tooltipY=this.y+caretPadding+this.caretHeight,ctx.beginPath(),ctx.moveTo(this.x,this.y+caretPadding),ctx.lineTo(this.x+this.caretHeight,this.y+caretPadding+this.caretHeight),ctx.lineTo(this.x-this.caretHeight,this.y+caretPadding+this.caretHeight),ctx.closePath(),ctx.fill()}switch(this.xAlign){case"left":tooltipX=this.x-tooltipWidth+(this.cornerRadius+this.caretHeight);break;case"right":tooltipX=this.x-(this.cornerRadius+this.caretHeight)}drawRoundedRectangle(ctx,tooltipX,tooltipY,tooltipWidth,tooltipRectHeight,this.cornerRadius),ctx.fill(),ctx.fillStyle=this.textColor,ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText(this.text,tooltipX+tooltipWidth/2,tooltipY+tooltipRectHeight/2)}}}),Chart.MultiTooltip=Chart.Element.extend({initialize:function(){this.font=fontString(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=fontString(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var titleWidth=this.ctx.measureText(this.title).width,labelWidth=longestText(this.ctx,this.font,this.labels)+this.fontSize+3,longestTextWidth=max([labelWidth,titleWidth]);this.width=longestTextWidth+2*this.xPadding;var halfHeight=this.height/2;this.y-halfHeight<0?this.y=halfHeight:this.y+halfHeight>this.chart.height&&(this.y=this.chart.height-halfHeight),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(index){var baseLineHeight=this.y-this.height/2+this.yPadding,afterTitleIndex=index-1;return 0===index?baseLineHeight+this.titleFontSize/2:baseLineHeight+(1.5*this.fontSize*afterTitleIndex+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{drawRoundedRectangle(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var ctx=this.ctx;ctx.fillStyle=this.fillColor,ctx.fill(),ctx.closePath(),ctx.textAlign="left",ctx.textBaseline="middle",ctx.fillStyle=this.titleTextColor,ctx.font=this.titleFont,ctx.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),ctx.font=this.font,helpers.each(this.labels,function(label,index){ctx.fillStyle=this.textColor,ctx.fillText(label,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(index+1)),ctx.fillStyle=this.legendColorBackground,ctx.fillRect(this.x+this.xPadding,this.getLineHeight(index+1)-this.fontSize/2,this.fontSize,this.fontSize),ctx.fillStyle=this.legendColors[index].fill,ctx.fillRect(this.x+this.xPadding,this.getLineHeight(index+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),Chart.Scale=Chart.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var stepDecimalPlaces=getDecimalPlaces(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(template(this.templateString,{value:(this.min+i*this.stepValue).toFixed(stepDecimalPlaces)}));this.yLabelWidth=this.display&&this.showLabels?longestText(this.ctx,this.font,this.yLabels):0},addXLabel:function(label){this.xLabels.push(label),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var cachedYLabelWidth,cachedHeight=this.endPoint-this.startPoint;for(this.calculateYRange(cachedHeight),this.buildYLabels(),this.calculateXLabelRotation();cachedHeight>this.endPoint-this.startPoint;)cachedHeight=this.endPoint-this.startPoint,cachedYLabelWidth=this.yLabelWidth,this.calculateYRange(cachedHeight),this.buildYLabels(),cachedYLabelWidth<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var firstRotated,lastRotated,firstWidth=this.ctx.measureText(this.xLabels[0]).width,lastWidth=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=lastWidth/2+3,this.xScalePaddingLeft=firstWidth/2>this.yLabelWidth+10?firstWidth/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var cosRotation,originalLabelWidth=longestText(this.ctx,this.font,this.xLabels);this.xLabelWidth=originalLabelWidth;for(var xGridWidth=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>xGridWidth&&0===this.xLabelRotation||this.xLabelWidth>xGridWidth&&this.xLabelRotation<=90&&this.xLabelRotation>0;)cosRotation=Math.cos(toRadians(this.xLabelRotation)),firstRotated=cosRotation*firstWidth,lastRotated=cosRotation*lastWidth,firstRotated+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=firstRotated+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=cosRotation*originalLabelWidth;this.xLabelRotation>0&&(this.endPoint-=Math.sin(toRadians(this.xLabelRotation))*originalLabelWidth+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:noop,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(value){var scalingFactor=this.drawingArea()/(this.min-this.max);return this.endPoint-scalingFactor*(value-this.min)},calculateX:function(index){var innerWidth=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),valueWidth=innerWidth/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),valueOffset=valueWidth*index+this.xScalePaddingLeft;return this.offsetGridLines&&(valueOffset+=valueWidth/2),Math.round(valueOffset)},update:function(newProps){helpers.extend(this,newProps),this.fit()},draw:function(){var ctx=this.ctx,yLabelGap=(this.endPoint-this.startPoint)/this.steps,xStart=Math.round(this.xScalePaddingLeft);this.display&&(ctx.fillStyle=this.textColor,ctx.font=this.font,each(this.yLabels,function(labelString,index){var yLabelCenter=this.endPoint-yLabelGap*index,linePositionY=Math.round(yLabelCenter),drawHorizontalLine=this.showHorizontalLines;ctx.textAlign="right",ctx.textBaseline="middle",this.showLabels&&ctx.fillText(labelString,xStart-10,yLabelCenter),0!==index||drawHorizontalLine||(drawHorizontalLine=!0),drawHorizontalLine&&ctx.beginPath(),index>0?(ctx.lineWidth=this.gridLineWidth,ctx.strokeStyle=this.gridLineColor):(ctx.lineWidth=this.lineWidth,ctx.strokeStyle=this.lineColor),linePositionY+=helpers.aliasPixel(ctx.lineWidth),drawHorizontalLine&&(ctx.moveTo(xStart,linePositionY),ctx.lineTo(this.width,linePositionY),ctx.stroke(),ctx.closePath()),ctx.lineWidth=this.lineWidth,ctx.strokeStyle=this.lineColor,ctx.beginPath(),ctx.moveTo(xStart-5,linePositionY),ctx.lineTo(xStart,linePositionY),ctx.stroke(),ctx.closePath()},this),each(this.xLabels,function(label,index){var xPos=this.calculateX(index)+aliasPixel(this.lineWidth),linePos=this.calculateX(index-(this.offsetGridLines?.5:0))+aliasPixel(this.lineWidth),isRotated=this.xLabelRotation>0,drawVerticalLine=this.showVerticalLines;0!==index||drawVerticalLine||(drawVerticalLine=!0),drawVerticalLine&&ctx.beginPath(),index>0?(ctx.lineWidth=this.gridLineWidth,ctx.strokeStyle=this.gridLineColor):(ctx.lineWidth=this.lineWidth,ctx.strokeStyle=this.lineColor),drawVerticalLine&&(ctx.moveTo(linePos,this.endPoint),ctx.lineTo(linePos,this.startPoint-3),ctx.stroke(),ctx.closePath()),ctx.lineWidth=this.lineWidth,ctx.strokeStyle=this.lineColor,ctx.beginPath(),ctx.moveTo(linePos,this.endPoint),ctx.lineTo(linePos,this.endPoint+5),ctx.stroke(),ctx.closePath(),ctx.save(),ctx.translate(xPos,isRotated?this.endPoint+12:this.endPoint+8),ctx.rotate(toRadians(this.xLabelRotation)*-1),ctx.font=this.font,ctx.textAlign=isRotated?"right":"center",ctx.textBaseline=isRotated?"middle":"top",ctx.fillText(label,0,0),ctx.restore()},this))}}),Chart.RadialScale=Chart.Element.extend({initialize:function(){this.size=min([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(value){var scalingFactor=this.drawingArea/(this.max-this.min);return(value-this.min)*scalingFactor},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var stepDecimalPlaces=getDecimalPlaces(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(template(this.templateString,{value:(this.min+i*this.stepValue).toFixed(stepDecimalPlaces)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var pointPosition,i,textWidth,halfTextWidth,furthestRightIndex,furthestRightAngle,furthestLeftIndex,furthestLeftAngle,xProtrusionLeft,xProtrusionRight,radiusReductionRight,radiusReductionLeft,largestPossibleRadius=min([this.height/2-this.pointLabelFontSize-5,this.width/2]),furthestRight=this.width,furthestLeft=0;for(this.ctx.font=fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),i=0;i<this.valuesCount;i++)pointPosition=this.getPointPosition(i,largestPossibleRadius),textWidth=this.ctx.measureText(template(this.templateString,{value:this.labels[i]})).width+5,0===i||i===this.valuesCount/2?(halfTextWidth=textWidth/2,pointPosition.x+halfTextWidth>furthestRight&&(furthestRight=pointPosition.x+halfTextWidth,furthestRightIndex=i),pointPosition.x-halfTextWidth<furthestLeft&&(furthestLeft=pointPosition.x-halfTextWidth,furthestLeftIndex=i)):i<this.valuesCount/2?pointPosition.x+textWidth>furthestRight&&(furthestRight=pointPosition.x+textWidth,furthestRightIndex=i):i>this.valuesCount/2&&pointPosition.x-textWidth<furthestLeft&&(furthestLeft=pointPosition.x-textWidth,furthestLeftIndex=i);xProtrusionLeft=furthestLeft,xProtrusionRight=Math.ceil(furthestRight-this.width),furthestRightAngle=this.getIndexAngle(furthestRightIndex),furthestLeftAngle=this.getIndexAngle(furthestLeftIndex),radiusReductionRight=xProtrusionRight/Math.sin(furthestRightAngle+Math.PI/2),radiusReductionLeft=xProtrusionLeft/Math.sin(furthestLeftAngle+Math.PI/2),radiusReductionRight=isNumber(radiusReductionRight)?radiusReductionRight:0,radiusReductionLeft=isNumber(radiusReductionLeft)?radiusReductionLeft:0,this.drawingArea=largestPossibleRadius-(radiusReductionLeft+radiusReductionRight)/2,this.setCenterPoint(radiusReductionLeft,radiusReductionRight)},setCenterPoint:function(leftMovement,rightMovement){var maxRight=this.width-rightMovement-this.drawingArea,maxLeft=leftMovement+this.drawingArea;this.xCenter=(maxLeft+maxRight)/2,this.yCenter=this.height/2},getIndexAngle:function(index){var angleMultiplier=2*Math.PI/this.valuesCount;return index*angleMultiplier-Math.PI/2},getPointPosition:function(index,distanceFromCenter){var thisAngle=this.getIndexAngle(index);return{x:Math.cos(thisAngle)*distanceFromCenter+this.xCenter,y:Math.sin(thisAngle)*distanceFromCenter+this.yCenter}},draw:function(){if(this.display){var ctx=this.ctx;if(each(this.yLabels,function(label,index){if(index>0){var pointPosition,yCenterOffset=index*(this.drawingArea/this.steps),yHeight=this.yCenter-yCenterOffset;if(this.lineWidth>0)if(ctx.strokeStyle=this.lineColor,ctx.lineWidth=this.lineWidth,this.lineArc)ctx.beginPath(),ctx.arc(this.xCenter,this.yCenter,yCenterOffset,0,2*Math.PI),ctx.closePath(),ctx.stroke();else{ctx.beginPath();for(var i=0;i<this.valuesCount;i++)pointPosition=this.getPointPosition(i,this.calculateCenterOffset(this.min+index*this.stepValue)),0===i?ctx.moveTo(pointPosition.x,pointPosition.y):ctx.lineTo(pointPosition.x,pointPosition.y);ctx.closePath(),ctx.stroke()}if(this.showLabels){if(ctx.font=fontString(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var labelWidth=ctx.measureText(label).width;ctx.fillStyle=this.backdropColor,ctx.fillRect(this.xCenter-labelWidth/2-this.backdropPaddingX,yHeight-this.fontSize/2-this.backdropPaddingY,labelWidth+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillStyle=this.fontColor,ctx.fillText(label,this.xCenter,yHeight)}}},this),!this.lineArc){ctx.lineWidth=this.angleLineWidth,ctx.strokeStyle=this.angleLineColor;for(var i=this.valuesCount-1;i>=0;i--){if(this.angleLineWidth>0){var outerPosition=this.getPointPosition(i,this.calculateCenterOffset(this.max));ctx.beginPath(),ctx.moveTo(this.xCenter,this.yCenter),ctx.lineTo(outerPosition.x,outerPosition.y),ctx.stroke(),ctx.closePath()}var pointLabelPosition=this.getPointPosition(i,this.calculateCenterOffset(this.max)+5);ctx.font=fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),ctx.fillStyle=this.pointLabelFontColor;var labelsCount=this.labels.length,halfLabelsCount=this.labels.length/2,quarterLabelsCount=halfLabelsCount/2,upperHalf=i<quarterLabelsCount||i>labelsCount-quarterLabelsCount,exactQuarter=i===quarterLabelsCount||i===labelsCount-quarterLabelsCount;0===i?ctx.textAlign="center":i===halfLabelsCount?ctx.textAlign="center":i<halfLabelsCount?ctx.textAlign="left":ctx.textAlign="right",exactQuarter?ctx.textBaseline="middle":upperHalf?ctx.textBaseline="bottom":ctx.textBaseline="top",ctx.fillText(this.labels[i],pointLabelPosition.x,pointLabelPosition.y)}}}}}),helpers.addEvent(window,"resize",function(){var timeout;return function(){clearTimeout(timeout),timeout=setTimeout(function(){each(Chart.instances,function(instance){instance.options.responsive&&instance.resize(instance.render,!0)})},50)}}()),amd?define(function(){return Chart}):"object"==typeof module&&module.exports&&(module.exports=Chart),root.Chart=Chart,Chart.noConflict=function(){return root.Chart=previous,Chart}}.call(this),function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers,defaultConfig={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};Chart.Type.extend({name:"Bar",defaults:defaultConfig,initialize:function(data){var options=this.options;this.ScaleClass=Chart.Scale.extend({offsetGridLines:!0,calculateBarX:function(datasetCount,datasetIndex,barIndex){var xWidth=this.calculateBaseWidth(),xAbsolute=this.calculateX(barIndex)-xWidth/2,barWidth=this.calculateBarWidth(datasetCount);return xAbsolute+barWidth*datasetIndex+datasetIndex*options.barDatasetSpacing+barWidth/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*options.barValueSpacing},calculateBarWidth:function(datasetCount){var baseWidth=this.calculateBaseWidth()-(datasetCount-1)*options.barDatasetSpacing;return baseWidth/datasetCount}}),this.datasets=[],this.options.showTooltips&&helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeBars="mouseout"!==evt.type?this.getBarsAtEvent(evt):[];this.eachBars(function(bar){bar.restore(["fillColor","strokeColor"])}),helpers.each(activeBars,function(activeBar){activeBar.fillColor=activeBar.highlightFill,activeBar.strokeColor=activeBar.highlightStroke}),this.showTooltip(activeBars)}),this.BarClass=Chart.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),helpers.each(data.datasets,function(dataset,datasetIndex){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,bars:[]};this.datasets.push(datasetObject),helpers.each(dataset.data,function(dataPoint,index){datasetObject.bars.push(new this.BarClass({value:dataPoint,label:data.labels[index],datasetLabel:dataset.label,strokeColor:dataset.strokeColor,fillColor:dataset.fillColor,highlightFill:dataset.highlightFill||dataset.fillColor,highlightStroke:dataset.highlightStroke||dataset.strokeColor}))},this)},this),this.buildScale(data.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(bar,index,datasetIndex){helpers.extend(bar,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,datasetIndex,index),y:this.scale.endPoint}),bar.save()},this),this.render()},update:function(){this.scale.update(),helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor","strokeColor"])}),this.eachBars(function(bar){bar.save()}),this.render()},eachBars:function(callback){helpers.each(this.datasets,function(dataset,datasetIndex){helpers.each(dataset.bars,callback,this,datasetIndex)},this)},getBarsAtEvent:function(e){for(var barIndex,barsArray=[],eventPosition=helpers.getRelativePosition(e),datasetIterator=function(dataset){barsArray.push(dataset.bars[barIndex])},datasetIndex=0;datasetIndex<this.datasets.length;datasetIndex++)for(barIndex=0;barIndex<this.datasets[datasetIndex].bars.length;barIndex++)if(this.datasets[datasetIndex].bars[barIndex].inRange(eventPosition.x,eventPosition.y))return helpers.each(this.datasets,datasetIterator),barsArray;return barsArray},buildScale:function(labels){var self=this,dataTotal=function(){var values=[];return self.eachBars(function(bar){values.push(bar.value)}),values},scaleOptions={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:labels.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(currentHeight){var updatedRanges=helpers.calculateScaleRange(dataTotal(),currentHeight,this.fontSize,this.beginAtZero,this.integersOnly);helpers.extend(this,updatedRanges)},xLabels:labels,font:helpers.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&helpers.extend(scaleOptions,{calculateYRange:helpers.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(scaleOptions)},addData:function(valuesArray,label){helpers.each(valuesArray,function(value,datasetIndex){this.datasets[datasetIndex].bars.push(new this.BarClass({value:value,label:label,x:this.scale.calculateBarX(this.datasets.length,datasetIndex,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[datasetIndex].strokeColor,fillColor:this.datasets[datasetIndex].fillColor}))},this),this.scale.addXLabel(label),this.update()},removeData:function(){this.scale.removeXLabel(),helpers.each(this.datasets,function(dataset){dataset.bars.shift()},this),this.update()},reflow:function(){helpers.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var newScaleProps=helpers.extend({height:this.chart.height,width:this.chart.width});this.scale.update(newScaleProps)},draw:function(ease){var easingDecimal=ease||1;this.clear();this.chart.ctx;this.scale.draw(easingDecimal),helpers.each(this.datasets,function(dataset,datasetIndex){helpers.each(dataset.bars,function(bar,index){bar.hasValue()&&(bar.base=this.scale.endPoint,bar.transition({x:this.scale.calculateBarX(this.datasets.length,datasetIndex,index),y:this.scale.calculateY(bar.value),width:this.scale.calculateBarWidth(this.datasets.length)},easingDecimal).draw())},this)},this)}})}.call(this),function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers,defaultConfig={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};Chart.Type.extend({name:"Doughnut",defaults:defaultConfig,initialize:function(data){this.segments=[],this.outerRadius=(helpers.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=Chart.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeSegments="mouseout"!==evt.type?this.getSegmentsAtEvent(evt):[];helpers.each(this.segments,function(segment){segment.restore(["fillColor"])}),helpers.each(activeSegments,function(activeSegment){activeSegment.fillColor=activeSegment.highlightColor}),this.showTooltip(activeSegments)}),this.calculateTotal(data),helpers.each(data,function(datapoint,index){this.addData(datapoint,index,!0)},this),this.render()},getSegmentsAtEvent:function(e){var segmentsArray=[],location=helpers.getRelativePosition(e);return helpers.each(this.segments,function(segment){segment.inRange(location.x,location.y)&&segmentsArray.push(segment)},this),segmentsArray},addData:function(segment,atIndex,silent){var index=atIndex||this.segments.length;this.segments.splice(index,0,new this.SegmentArc({value:segment.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:segment.color,highlightColor:segment.highlight||segment.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(segment.value),label:segment.label})),silent||(this.reflow(),this.update())},calculateCircumference:function(value){return 2*Math.PI*(Math.abs(value)/this.total)},calculateTotal:function(data){this.total=0,helpers.each(data,function(segment){this.total+=Math.abs(segment.value)},this)},update:function(){this.calculateTotal(this.segments),helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor"])}),helpers.each(this.segments,function(segment){segment.save()}),this.render()},removeData:function(atIndex){var indexToDelete=helpers.isNumber(atIndex)?atIndex:this.segments.length-1;this.segments.splice(indexToDelete,1),this.reflow(),this.update()},reflow:function(){helpers.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(helpers.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,helpers.each(this.segments,function(segment){segment.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(easeDecimal){var animDecimal=easeDecimal?easeDecimal:1;this.clear(),helpers.each(this.segments,function(segment,index){segment.transition({circumference:this.calculateCircumference(segment.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},animDecimal),segment.endAngle=segment.startAngle+segment.circumference,segment.draw(),0===index&&(segment.startAngle=1.5*Math.PI),index<this.segments.length-1&&(this.segments[index+1].startAngle=segment.endAngle)},this)}}),Chart.types.Doughnut.extend({name:"Pie",defaults:helpers.merge(defaultConfig,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers,defaultConfig={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};Chart.Type.extend({name:"Line",defaults:defaultConfig,initialize:function(data){this.PointClass=Chart.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(mouseX){return Math.pow(mouseX-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activePoints="mouseout"!==evt.type?this.getPointsAtEvent(evt):[];this.eachPoints(function(point){point.restore(["fillColor","strokeColor"])}),helpers.each(activePoints,function(activePoint){activePoint.fillColor=activePoint.highlightFill,activePoint.strokeColor=activePoint.highlightStroke}),this.showTooltip(activePoints)}),helpers.each(data.datasets,function(dataset){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,pointColor:dataset.pointColor,pointStrokeColor:dataset.pointStrokeColor,points:[]};this.datasets.push(datasetObject),helpers.each(dataset.data,function(dataPoint,index){datasetObject.points.push(new this.PointClass({value:dataPoint,label:data.labels[index],datasetLabel:dataset.label,strokeColor:dataset.pointStrokeColor,fillColor:dataset.pointColor,highlightFill:dataset.pointHighlightFill||dataset.pointColor,highlightStroke:dataset.pointHighlightStroke||dataset.pointStrokeColor}))},this),this.buildScale(data.labels),this.eachPoints(function(point,index){helpers.extend(point,{x:this.scale.calculateX(index),y:this.scale.endPoint}),point.save()},this)},this),this.render()},update:function(){this.scale.update(),helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor","strokeColor"])}),this.eachPoints(function(point){point.save()}),this.render()},eachPoints:function(callback){helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,callback,this)},this)},getPointsAtEvent:function(e){var pointsArray=[],eventPosition=helpers.getRelativePosition(e);return helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,function(point){point.inRange(eventPosition.x,eventPosition.y)&&pointsArray.push(point)})},this),pointsArray},buildScale:function(labels){var self=this,dataTotal=function(){var values=[];return self.eachPoints(function(point){values.push(point.value)}),values},scaleOptions={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:labels.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(currentHeight){var updatedRanges=helpers.calculateScaleRange(dataTotal(),currentHeight,this.fontSize,this.beginAtZero,this.integersOnly);helpers.extend(this,updatedRanges)},xLabels:labels,font:helpers.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&helpers.extend(scaleOptions,{calculateYRange:helpers.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new Chart.Scale(scaleOptions)},addData:function(valuesArray,label){helpers.each(valuesArray,function(value,datasetIndex){this.datasets[datasetIndex].points.push(new this.PointClass({value:value,label:label,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[datasetIndex].pointStrokeColor,fillColor:this.datasets[datasetIndex].pointColor}))},this),this.scale.addXLabel(label),this.update()},removeData:function(){this.scale.removeXLabel(),helpers.each(this.datasets,function(dataset){dataset.points.shift()},this),this.update()},reflow:function(){var newScaleProps=helpers.extend({height:this.chart.height,width:this.chart.width});this.scale.update(newScaleProps)},draw:function(ease){var easingDecimal=ease||1;this.clear();var ctx=this.chart.ctx,hasValue=function(item){return null!==item.value},nextPoint=function(point,collection,index){return helpers.findNextWhere(collection,hasValue,index)||point},previousPoint=function(point,collection,index){return helpers.findPreviousWhere(collection,hasValue,index)||point};this.scale.draw(easingDecimal),helpers.each(this.datasets,function(dataset){var pointsWithValues=helpers.where(dataset.points,hasValue);helpers.each(dataset.points,function(point,index){point.hasValue()&&point.transition({y:this.scale.calculateY(point.value),x:this.scale.calculateX(index)},easingDecimal)},this),this.options.bezierCurve&&helpers.each(pointsWithValues,function(point,index){var tension=index>0&&index<pointsWithValues.length-1?this.options.bezierCurveTension:0;point.controlPoints=helpers.splineCurve(previousPoint(point,pointsWithValues,index),point,nextPoint(point,pointsWithValues,index),tension),point.controlPoints.outer.y>this.scale.endPoint?point.controlPoints.outer.y=this.scale.endPoint:point.controlPoints.outer.y<this.scale.startPoint&&(point.controlPoints.outer.y=this.scale.startPoint),point.controlPoints.inner.y>this.scale.endPoint?point.controlPoints.inner.y=this.scale.endPoint:point.controlPoints.inner.y<this.scale.startPoint&&(point.controlPoints.inner.y=this.scale.startPoint)},this),ctx.lineWidth=this.options.datasetStrokeWidth,ctx.strokeStyle=dataset.strokeColor,ctx.beginPath(),helpers.each(pointsWithValues,function(point,index){if(0===index)ctx.moveTo(point.x,point.y);else if(this.options.bezierCurve){var previous=previousPoint(point,pointsWithValues,index);ctx.bezierCurveTo(previous.controlPoints.outer.x,previous.controlPoints.outer.y,point.controlPoints.inner.x,point.controlPoints.inner.y,point.x,point.y)}else ctx.lineTo(point.x,point.y)},this),ctx.stroke(),this.options.datasetFill&&pointsWithValues.length>0&&(ctx.lineTo(pointsWithValues[pointsWithValues.length-1].x,this.scale.endPoint),ctx.lineTo(pointsWithValues[0].x,this.scale.endPoint),ctx.fillStyle=dataset.fillColor,ctx.closePath(),ctx.fill()),helpers.each(pointsWithValues,function(point){point.draw()})},this)}})}.call(this),function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers,defaultConfig={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};Chart.Type.extend({name:"PolarArea",defaults:defaultConfig,initialize:function(data){this.segments=[],this.SegmentArc=Chart.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new Chart.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:data.length}),this.updateScaleRange(data),this.scale.update(),helpers.each(data,function(segment,index){this.addData(segment,index,!0)},this),this.options.showTooltips&&helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeSegments="mouseout"!==evt.type?this.getSegmentsAtEvent(evt):[];helpers.each(this.segments,function(segment){segment.restore(["fillColor"])}),helpers.each(activeSegments,function(activeSegment){activeSegment.fillColor=activeSegment.highlightColor}),this.showTooltip(activeSegments)}),this.render()},getSegmentsAtEvent:function(e){var segmentsArray=[],location=helpers.getRelativePosition(e);return helpers.each(this.segments,function(segment){segment.inRange(location.x,location.y)&&segmentsArray.push(segment)},this),segmentsArray},addData:function(segment,atIndex,silent){var index=atIndex||this.segments.length;this.segments.splice(index,0,new this.SegmentArc({fillColor:segment.color,highlightColor:segment.highlight||segment.color,label:segment.label,value:segment.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(segment.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),silent||(this.reflow(),this.update())},removeData:function(atIndex){var indexToDelete=helpers.isNumber(atIndex)?atIndex:this.segments.length-1;this.segments.splice(indexToDelete,1),this.reflow(),this.update()},calculateTotal:function(data){this.total=0,helpers.each(data,function(segment){this.total+=segment.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(datapoints){var valuesArray=[];helpers.each(datapoints,function(segment){valuesArray.push(segment.value)});var scaleSizes=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:helpers.calculateScaleRange(valuesArray,helpers.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);helpers.extend(this.scale,scaleSizes,{size:helpers.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),helpers.each(this.segments,function(segment){segment.save()}),this.reflow(),this.render()},reflow:function(){helpers.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),helpers.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),helpers.each(this.segments,function(segment){segment.update({outerRadius:this.scale.calculateCenterOffset(segment.value)})},this)},draw:function(ease){var easingDecimal=ease||1;this.clear(),helpers.each(this.segments,function(segment,index){segment.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(segment.value)},easingDecimal),segment.endAngle=segment.startAngle+segment.circumference,0===index&&(segment.startAngle=1.5*Math.PI),index<this.segments.length-1&&(this.segments[index+1].startAngle=segment.endAngle),segment.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers;Chart.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(data){this.PointClass=Chart.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(data),this.options.showTooltips&&helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activePointsCollection="mouseout"!==evt.type?this.getPointsAtEvent(evt):[];this.eachPoints(function(point){point.restore(["fillColor","strokeColor"])}),helpers.each(activePointsCollection,function(activePoint){activePoint.fillColor=activePoint.highlightFill,activePoint.strokeColor=activePoint.highlightStroke}),this.showTooltip(activePointsCollection)}),helpers.each(data.datasets,function(dataset){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,pointColor:dataset.pointColor,pointStrokeColor:dataset.pointStrokeColor,points:[]};this.datasets.push(datasetObject),helpers.each(dataset.data,function(dataPoint,index){var pointPosition;this.scale.animation||(pointPosition=this.scale.getPointPosition(index,this.scale.calculateCenterOffset(dataPoint))),datasetObject.points.push(new this.PointClass({value:dataPoint,label:data.labels[index],datasetLabel:dataset.label,x:this.options.animation?this.scale.xCenter:pointPosition.x,y:this.options.animation?this.scale.yCenter:pointPosition.y,strokeColor:dataset.pointStrokeColor,fillColor:dataset.pointColor,highlightFill:dataset.pointHighlightFill||dataset.pointColor,highlightStroke:dataset.pointHighlightStroke||dataset.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(callback){helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,callback,this)},this)},getPointsAtEvent:function(evt){var mousePosition=helpers.getRelativePosition(evt),fromCenter=helpers.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},mousePosition),anglePerIndex=2*Math.PI/this.scale.valuesCount,pointIndex=Math.round((fromCenter.angle-1.5*Math.PI)/anglePerIndex),activePointsCollection=[];return(pointIndex>=this.scale.valuesCount||pointIndex<0)&&(pointIndex=0),fromCenter.distance<=this.scale.drawingArea&&helpers.each(this.datasets,function(dataset){activePointsCollection.push(dataset.points[pointIndex])}),activePointsCollection},buildScale:function(data){this.scale=new Chart.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:data.labels,valuesCount:data.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(data.datasets),this.scale.buildYLabels()},updateScaleRange:function(datasets){var valuesArray=function(){var totalDataArray=[];return helpers.each(datasets,function(dataset){dataset.data?totalDataArray=totalDataArray.concat(dataset.data):helpers.each(dataset.points,function(point){totalDataArray.push(point.value)})}),totalDataArray}(),scaleSizes=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:helpers.calculateScaleRange(valuesArray,helpers.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);helpers.extend(this.scale,scaleSizes)},addData:function(valuesArray,label){this.scale.valuesCount++,helpers.each(valuesArray,function(value,datasetIndex){var pointPosition=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(value));this.datasets[datasetIndex].points.push(new this.PointClass({value:value,label:label,x:pointPosition.x,y:pointPosition.y,strokeColor:this.datasets[datasetIndex].pointStrokeColor,fillColor:this.datasets[datasetIndex].pointColor}))},this),this.scale.labels.push(label),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),helpers.each(this.datasets,function(dataset){dataset.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(point){point.save()}),this.reflow(),this.render()},reflow:function(){helpers.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:helpers.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(ease){var easeDecimal=ease||1,ctx=this.chart.ctx;this.clear(),this.scale.draw(),helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,function(point,index){point.hasValue()&&point.transition(this.scale.getPointPosition(index,this.scale.calculateCenterOffset(point.value)),easeDecimal)},this),ctx.lineWidth=this.options.datasetStrokeWidth,ctx.strokeStyle=dataset.strokeColor,ctx.beginPath(),helpers.each(dataset.points,function(point,index){0===index?ctx.moveTo(point.x,point.y):ctx.lineTo(point.x,point.y)},this),ctx.closePath(),ctx.stroke(),ctx.fillStyle=dataset.fillColor,ctx.fill(),helpers.each(dataset.points,function(point){point.hasValue()&&point.draw()})},this)}})}.call(this),function(factory){"use strict";"object"==typeof exports?module.exports=factory(require("angular"),require("Chart.js")):"function"==typeof define&&define.amd?define(["angular","chart"],factory):factory(angular,Chart)}(function(angular,Chart){"use strict";function ChartJsProvider(){var options={},ChartJs={Chart:Chart,getOptions:function(type){var typeOptions=type&&options[type]||{};return angular.extend({},options,typeOptions)}};this.setOptions=function(type,customOptions){return customOptions?void(options[type]=angular.extend(options[type]||{},customOptions)):(customOptions=type,void(options=angular.extend(options,customOptions)))},this.$get=function(){return ChartJs}}function ChartJsFactory(ChartJs,$timeout){function canUpdateChart(newVal,oldVal){return!!(newVal&&oldVal&&newVal.length&&oldVal.length)&&(Array.isArray(newVal[0])?newVal.length===oldVal.length&&newVal.every(function(element,index){return element.length===oldVal[index].length}):oldVal.reduce(sum,0)>0&&newVal.length===oldVal.length)}function sum(carry,val){return carry+val}function getEventHandler(scope,chart,action,triggerOnlyOnChange){var lastState=null;return function(evt){var atEvent=chart.getPointsAtEvent||chart.getBarsAtEvent||chart.getSegmentsAtEvent;if(atEvent){var activePoints=atEvent.call(chart,evt);triggerOnlyOnChange!==!1&&angular.equals(lastState,activePoints)!==!1||(lastState=activePoints,scope[action](activePoints,evt),scope.$apply())}}}function getColours(type,scope){for(var colours=angular.copy(scope.colours||ChartJs.getOptions(type).colours||Chart.defaults.global.colours);colours.length<scope.data.length;)colours.push(scope.getColour());return colours.map(convertColour)}function convertColour(colour){return"object"==typeof colour&&null!==colour?colour:"string"==typeof colour&&"#"===colour[0]?getColour(hexToRgb(colour.substr(1))):getRandomColour()}function getRandomColour(){var colour=[getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)];return getColour(colour)}function getColour(colour){return{fillColor:rgba(colour,.2),strokeColor:rgba(colour,1),pointColor:rgba(colour,1),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:rgba(colour,.8)}}function getRandomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}function rgba(colour,alpha){return usingExcanvas?"rgb("+colour.join(",")+")":"rgba("+colour.concat(alpha).join(",")+")"}function hexToRgb(hex){var bigint=parseInt(hex,16),r=bigint>>16&255,g=bigint>>8&255,b=255&bigint;return[r,g,b]}function getDataSets(labels,data,series,colours){return{labels:labels,datasets:data.map(function(item,i){return angular.extend({},colours[i],{label:series[i],data:item})})}}function getData(labels,data,colours){return labels.map(function(label,i){return angular.extend({},colours[i],{label:label,value:data[i],color:colours[i].strokeColor,highlight:colours[i].pointHighlightStroke})})}function setLegend(elem,chart){var $parent=elem.parent(),$oldLegend=$parent.find("chart-legend"),legend="<chart-legend>"+chart.generateLegend()+"</chart-legend>";$oldLegend.length?$oldLegend.replaceWith(legend):$parent.append(legend)}function updateChart(chart,values,scope,elem){Array.isArray(scope.data[0])?chart.datasets.forEach(function(dataset,i){(dataset.points||dataset.bars).forEach(function(dataItem,j){dataItem.value=values[i][j]})}):chart.segments.forEach(function(segment,i){segment.value=values[i]}),chart.update(),scope.$emit("update",chart),scope.legend&&"false"!==scope.legend&&setLegend(elem,chart)}function isEmpty(value){return!value||Array.isArray(value)&&!value.length||"object"==typeof value&&!Object.keys(value).length}function isResponsive(type,scope){var options=angular.extend({},Chart.defaults.global,ChartJs.getOptions(type),scope.options);return options.responsive}return function(type){return{restrict:"CA",scope:{data:"=?",labels:"=?",options:"=?",series:"=?",colours:"=?",getColour:"=?",chartType:"=",legend:"@",click:"=?",hover:"=?",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColours:"=?",chartLegend:"@",chartClick:"=?",chartHover:"=?"},link:function(scope,elem){function aliasVar(fromName,toName){scope.$watch(fromName,function(newVal){"undefined"!=typeof newVal&&(scope[toName]=newVal)})}function resetChart(newVal,oldVal){if(!isEmpty(newVal)&&!angular.equals(newVal,oldVal)){var chartType=type||scope.chartType;chartType&&(chart&&chart.destroy(),createChart(chartType))}}function createChart(type){if(isResponsive(type,scope)&&0===elem[0].clientHeight&&0===container.clientHeight)return $timeout(function(){createChart(type)},50,!1);if(scope.data&&scope.data.length){scope.getColour="function"==typeof scope.getColour?scope.getColour:getRandomColour,scope.colours=getColours(type,scope);var cvs=elem[0],ctx=cvs.getContext("2d"),data=Array.isArray(scope.data[0])?getDataSets(scope.labels,scope.data,scope.series||[],scope.colours):getData(scope.labels,scope.data,scope.colours),options=angular.extend({},ChartJs.getOptions(type),scope.options);chart=new ChartJs.Chart(ctx)[type](data,options),scope.$emit("create",chart),cvs.onclick=scope.click?getEventHandler(scope,chart,"click",!1):angular.noop,cvs.onmousemove=scope.hover?getEventHandler(scope,chart,"hover",!0):angular.noop,scope.legend&&"false"!==scope.legend&&setLegend(elem,chart)}}function deprecated(attr){if("undefined"!=typeof console&&"test"!==ChartJs.getOptions().env){var warn="function"==typeof console.warn?console.warn:console.log;scope[attr]&&warn.call(console,'"%s" is deprecated and will be removed in a future version. Please use "chart-%s" instead.',attr,attr)}}var chart,container=document.createElement("div");container.className="chart-container",elem.replaceWith(container),container.appendChild(elem[0]),usingExcanvas&&window.G_vmlCanvasManager.initElement(elem[0]),["data","labels","options","series","colours","legend","click","hover"].forEach(deprecated),aliasVar("chartData","data"),aliasVar("chartLabels","labels"),aliasVar("chartOptions","options"),aliasVar("chartSeries","series"),aliasVar("chartColours","colours"),aliasVar("chartLegend","legend"),aliasVar("chartClick","click"),aliasVar("chartHover","hover"),scope.$watch("data",function(newVal,oldVal){if(newVal&&newVal.length&&(!Array.isArray(newVal[0])||newVal[0].length)){var chartType=type||scope.chartType;if(chartType){if(chart){if(canUpdateChart(newVal,oldVal))return updateChart(chart,newVal,scope,elem);chart.destroy()}createChart(chartType)}}},!0),scope.$watch("series",resetChart,!0),scope.$watch("labels",resetChart,!0),scope.$watch("options",resetChart,!0),scope.$watch("colours",resetChart,!0),scope.$watch("chartType",function(newVal,oldVal){isEmpty(newVal)||angular.equals(newVal,oldVal)||(chart&&chart.destroy(),createChart(newVal))}),scope.$on("$destroy",function(){chart&&chart.destroy()})}}}}Chart.defaults.global.responsive=!0,Chart.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",Chart.defaults.global.colours=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var usingExcanvas="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return usingExcanvas&&(Chart.defaults.global.animation=!1),angular.module("chart.js",[]).provider("ChartJs",ChartJsProvider).factory("ChartJsFactory",["ChartJs","$timeout",ChartJsFactory]).directive("chartBase",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory}]).directive("chartLine",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Line")}]).directive("chartBar",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Bar")}]).directive("chartRadar",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Radar")}]).directive("chartDoughnut",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Doughnut")}]).directive("chartPie",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Pie")}]).directive("chartPolarArea",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("PolarArea")}])}),angular.module("bootstrap-templates",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n\t  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only" translate="_OK"></span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n\t<li ng-transclude></li>\n\t<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n\t\t<span class="btn-group pull-left">\n\t\t\t<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n\t\t\t<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n\t\t</span>\n\t\t<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n\t</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/window.html",'<div tabindex="-1" id="modalWindow" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" yn-modal-draggable ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/timepicker/timepicker.html",'<table>\n\t<tbody>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n\t\t\t\t<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td>:</td>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n\t\t\t\t<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n\t\t</tr>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t</tbody>\n</table>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="::{ \'margin-top\': \'31px\', width: \'270px\', left: 0}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-mousedown="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]);(function(){angular.module('younow.core.services',['younow.core.services.channel']);angular.module('younow.core.directives',[]);angular.module('younow.core',["younow.core.services","younow.core.directives"]);})();(function(){angular.module('younow.core.directives').directive('ynModalDraggable',["$timeout","$document","$window",function($timeout,$document,$window){return{restrict:'A',compile:function compile(scope,elem,attr,ctrl){return{post:function postLink(){$timeout(function(){if(elem.$$element.parent().attr("window-class")!=="profile-summary-wrapper"){return false;}
var element=elem.$$element,x,y;element.css({position:'fixed',left:'40%'});element.on('mousedown',function(event){var noDragging=false;var target=event.originalEvent?event.originalEvent.target:event.target;if(target.className.indexOf("yn-modal-draggable")===-1){noDragging=true;}
if(target.tagName==='TEXTAREA'||target.tagName==='INPUT'||target.tagName==='BUTTON'){noDragging=true;}
if(!noDragging){element.css({cursor:'move'});if(event.which===3){return false;}
event.preventDefault();$document.on('mousemove',mousemove);$document.on('mouseup',mouseup);}});function mousemove(event){angular.element(document.getElementById('modalWindow'))[0].style.setProperty('top','0','important');y=event.clientY-element[0].clientHeight;x=event.clientX-(element[0].clientWidth/2);element.css({top:y+'px',left:x+'px'});}
function mouseup(){element.css({cursor:'default'});$document.unbind('mousemove',mousemove);$document.unbind('mouseup',mouseup);}},0);}};}};}]).directive('windowClass',["$timeout",function($timeout){return{restrict:'A',compile:function compile(scope,elem,attr,ctrl){return{post:function postLink(){$timeout(function(){angular.element(elem.$$element[0]).removeClass(elem.windowClass);angular.element(elem.$$element[0]).children().addClass(elem.windowClass);},0);}};}};}]);})();(function(){angular.module('younow.core.directives').directive('scrolledClass',function($window){return{restrict:'A',scope:{scrolledClass:'@'},link:function(scope,element,attrs){angular.element($window).on("scroll",function(){if(this.pageYOffset>(scope.scrolledClass||0)){element.addClass('scrolled');}else{element.removeClass('scrolled');}});scope.$on('$destroy',function(){angular.element($window).off("scroll");});}};}).directive('scrolledInView',function($window,$timeout){return{restrict:'A',scope:{leftView:'&',enteredView:'&'},link:function(scope,element,attrs){var line=(window.innerHeight/2);var lastState;function isElementInView(el){var elementRect=el.getBoundingClientRect();return(elementRect.top<=line&&elementRect.bottom>=line);}
$timeout(function(){lastState=isElementInView(element[0])?'enteredView':'leftView';if(lastState==='enteredView'){scope.enteredView();}
$window.addEventListener("scroll",function(){if(isElementInView(element[0])&&lastState==='leftView'){lastState='enteredView';scope.enteredView();}else if(!isElementInView(element[0])&&lastState==='enteredView'){lastState='leftView';scope.leftView();}});scope.$on('$destroy',function(){$window.removeEventListener("scroll");});});}};}).directive('onlyScroll',function(){return{restrict:'A',link:function(scope,element,attrs){var horizontalScroll=element[0].attributes['horizontal-scroll'];element.on('mousewheel',function(event){event.preventDefault();var wheelDelta=event.originalEvent?event.originalEvent.wheelDelta:event.wheelDelta;if(horizontalScroll===undefined){element.scrollTop(element.scrollTop()-wheelDelta);}else{element.scrollLeft(element.scrollLeft()-wheelDelta);}});}};}).directive('getScrollDirection',function(){return{link:function(scope,element,attrs){element.bind('mousewheel',direction);element.on('$destroy',function(){element.unbind('mousewheel',direction);});function direction(e){var change=e.wheelDeltaY<0?'down':'up';attrs.$set('direction',change);}}};}).directive('infiniteScroll',["$window","$document",function($window,$document){return{scope:{infiniteScroll:'&',canLoad:'&'},link:function(scope,element,attrs){var offset=parseInt(attrs.threshold)||0;var e=element[0];var atBottom=function(){return e.scrollTop+e.offsetHeight>=e.scrollHeight-offset;};var scrollHandler=function(){if(!scope.loading&&scope.canLoad()&&atBottom()){scope.loading=true;var request=scope.infiniteScroll();if(request&&request.then){request.then(function(){scope.loading=false;});}else{scope.loading=false;}}};if(attrs.pagescroll){element.on('$destroy',function(){$document.unbind('scroll',scrollHandler);});element=$document;atBottom=function(){return $document.scrollTop()+$window.innerHeight>=$document[0].body.offsetHeight-offset;};}
if(scope.canLoad()===undefined){scope.canLoad=function(){return true;};}
element.bind('scroll',scrollHandler);}};}]);})();(function(){window.clearSelection=function(){var sel;if((sel=document.selection)&&sel.empty){sel.empty();}else{if(window.getSelection){window.getSelection().removeAllRanges();}
var activeEl=document.activeElement;if(activeEl){var tagName=activeEl.nodeName.toLowerCase();if(tagName=="textarea"||(tagName=="input"&&activeEl.type=="text")){activeEl.selectionStart=activeEl.selectionEnd;}}}};angular.module('younow.core.directives').directive('ynEnter',function(){return{restrict:'A',link:function(scope,elements,attrs){elements.bind('keydown keypress',function(event){if(event.which===13){scope.$apply(function(){scope.$eval(attrs.ynEnter);});event.preventDefault();}});}};}).directive('preventDefault',function(){return{restrict:'A',link:function(scope,elem,attrs){if(attrs.ngClick||attrs.href===''||attrs.href==='#'){elem.on('click dblclick',function(e){e.preventDefault();});}}};}).directive('copyOnClick',function($timeout){return{restrict:'A',link:function(scope,element,attrs){element.on('click',function(){this.select();if(window.document.execCommand('copy')){window.copyHref=angular.element(this);$timeout(function(){window.clearSelection();},1000);}});}};}).directive('ynOnChange',function(){return{restrict:'A',link:function(scope,element,attrs){var onChangeHandler=scope.$eval(attrs.ynOnChange);element.bind('change',function(event){var params=attrs.params.split(',');for(var i=0;i<params.length;i++){if(params[i]!=='event'&&params[i]!=='$event'){if(scope[params[i]]!==undefined){params[i]=scope[params[i]];}else{params.splice(i,1);}}else{params[i]=event;}}
onChangeHandler.apply(this,params);});}};}).directive('cameraValid',function($interval){return{restrict:'A',scope:{onValid:'&',onInvalid:'&'},link:function(scope,ele,attrs){var attemptsLeft=20;var checkForDuration;if(ele[0].tagName=='VIDEO'){ele[0].onplay=function(){if(checkForDuration!==undefined){$interval.cancel(checkForDuration);attemptsLeft=20;}
checkForDuration=$interval(function(){if(attemptsLeft>0){--attemptsLeft;}else{$interval.cancel(checkForDuration);}
if(ele[0].readyState>0||!attemptsLeft){if(ele[0].duration===Infinity&&scope.onValid!==undefined){scope.onValid();}
if(ele[0].duration!==Infinity&&scope.onInvalid!==undefined){scope.onInvalid();}
$interval.cancel(checkForDuration);}},200);};scope.$on('$destroy',function(){if(checkForDuration!==undefined){$interval.cancel(checkForDuration);}});}else{throw new Error('This element must be a tag! '+(ele.id||''));}}};}).directive('passFocusTo',function($timeout,$window){return{link:function(scope,element,attrs){element.on('click',function($event){if($window.getSelection().toString().length>0){return false;}
$timeout(function(){var elem=element.parent();while(elem[0].id!=attrs.focusParent){elem=elem.parent();}
angular.element(document.querySelector("#"+attrs.passFocusTo))[0].focus();});});}};}).directive('bindHtmlCompile',["$compile",function($compile){return{restrict:'A',replace:true,link:function(scope,ele,attrs){scope.$watch(attrs.bindHtmlCompile,function(html){if(html&&html.$$unwrapTrustedValue){html=html.$$unwrapTrustedValue();}
if(/<[^>]+>/gm.test(html)){ele.html(html);$compile(ele.contents())(scope);}else{ele.html(html);}});}};}]);})();(function(){angular.module('younow.core.directives').directive('videojsPlayer',function($animate,$timeout){return{restrict:'E',replace:true,scope:{options:'='},template:'<span><video class="video-js vjs-default-skin"><source></video></span>',link:function(scope,element,attrs){var video=element[0].children[0];var recordedTime=0;var lastBrokeAt=false;var clearLastBrokeAt=false;var playlist;var brokenSentinel=0;var destroyEventHandler;var stuckStuck=0;var lastCurrentTime=0;function callEvent(name){if(scope.options&&scope.options[name]){scope.options[name](scope.options.playerEl);}}
function loadVideoJs(url){if(!scope.options.breakages){scope.options.breakages={};}
if(url.indexOf('rtmp')!==-1){video.childNodes[0].type='rtmp/mp4';}else{video.childNodes[0].type='application/x-mpegURL';}
video.childNodes[0].src=url;scope.options.playerEl=window.videojs(video,scope.options.player).ready(function(){callEvent('onReady');try{window.HTMLMediaElement.prototype.autoplay();window.Html5.prototype.autoplay=window.HTMLMediaElement.prototype.autoplay();}catch(e){}
try{this.tech_.stopTrackingCurrentTime();}catch(e){}
this.on('pause',function(){callEvent('onPause');});this.on('error',function(){callEvent('onError');brokenSentinel++;if(scope.options.playerEl&&video.childNodes&&video.childNodes[0].src&&video.childNodes[0].type==='application/x-mpegURL'&&brokenSentinel<=10){var url=scope.options.url;var brokeStart;$timeout.cancel(clearLastBrokeAt);clearLastBrokeAt=false;var hls=scope.options.playerEl.tech({IWillNotUseThisInPlugins:true}).hls;if(hls){playlist=hls.playlists.media();}
if(playlist&&playlist.segments){if(lastBrokeAt===false){lastBrokeAt=recordedTime;}
if(lastBrokeAt!==false){brokeStart=Math.floor(lastBrokeAt);}else{brokeStart=Math.floor(recordedTime);}
if(!scope.options.breakages[url]){scope.options.breakages[url]={};}
var segmentToSkip=Math.ceil(recordedTime);if(segmentToSkip%2!==0){segmentToSkip+=1;}
scope.options.breakages[url][brokeStart]=playlist.segments[(segmentToSkip/playlist.targetDuration)>0?(segmentToSkip/playlist.targetDuration)-1:(segmentToSkip/playlist.targetDuration)].duration+segmentToSkip+0.1;reload(url);}else{console.warn('No segments');}}});this.on('loadedmetadata',function(){checkForBreakage();callEvent('onLoadedMetadata');var video=document.querySelectorAll('*[id^="vjs_video"]')[0];if(video){video.style.background='black';video.style.backgroundSize='contain';video.style.backgroundPosition='center center';video.style.backgroundRepeat='no-repeat';}});this.on('play',function(){callEvent('onPlay');});this.on('timeupdate',function(){if(scope.options){if(!lastBrokeAt&&scope.options.playerEl){recordedTime=scope.options.playerEl.currentTime();}
if(scope.options.playerEl&&!scope.options.playerEl.paused()&&scope.options.playerEl.currentTime()===lastCurrentTime){stuckStuck++;if(stuckStuck>=5){var skipTo=((Math.floor(scope.options.playerEl.currentTime()/2)+1)*2)+0.1;scope.options.playerEl.currentTime(skipTo);stuckStuck=0;}}else{stuckStuck=0;}
lastCurrentTime=scope.options.playerEl.currentTime();checkForBreakage();callEvent('onTimeupdate');}});this.on('click',function(){callEvent('onClick');});this.on('ended',function(){callEvent('onEnded');});this.on('canplay',function(){callEvent('onCanplay');});if(destroyEventHandler){destroyEventHandler();}
destroyEventHandler=scope.$on('$destroy',function(){scope.options.playerEl.dispose();scope.options.playerEl=undefined;});});}
var waitsForUrl=scope.$watch(function(){return scope.options;},function(newVal,oldVal){if(newVal&&newVal.url){waitsForUrl();loadVideoJs(scope.options.url);}});function reload(src){scope.options.playerEl.dispose();video=angular.element('<video class="video-js vjs-default-skin"><source></video>');$animate.leave(angular.element(element[0].children[0])).then(function(){$animate.enter(video,element).then(function(){video=video[0];loadVideoJs(src);});});}
function checkForBreakage(){var breakHistory=scope.options.breakages[scope.options.url];var checkThisTime=Math.floor(recordedTime);if(scope.options.playerEl&&breakHistory&&breakHistory[checkThisTime]){scope.options.playerEl.currentTime(breakHistory[checkThisTime]);recordedTime=breakHistory[checkThisTime];}
if(scope.options.playerEl&&scope.options.playerEl.currentTime()>lastBrokeAt&&!clearLastBrokeAt){clearLastBrokeAt=$timeout(function(){lastBrokeAt=false;},500);}}}};});})();(function(){angular.module('younow.core.services').directive('ab',["ab","$http","$compile","$templateCache",function(ab,$http,$compile,$templateCache){return{restrict:'AE',link:function(scope,elem,attrs,controller){var template="angularjsapp/src/"+ab.app+"/services/ab/"+attrs.id+".tpl.html";var tpl=$templateCache.get(template);if(tpl===undefined){$http.get(template).then(function(response){tpl=$compile(response.data)(scope);elem.append(tpl);});}else{elem.append(tpl);}
var experiment=ab.experiments[attrs.id];var split=ab.variant(attrs.id);scope.abexperiment=attrs.id;scope.abvariant=split;if(experiment.variants&&experiment.variants[split]){scope.abvalue=experiment.variants[split];}
elem.addClass('ab-'+attrs.id);elem.addClass('ab-'+attrs.id+'-'+split);}};}]).factory('AbCore',function($location,ApiCore){var AbCore={};var params=$location.search();var Api;AbCore.Base=function(options){"use strict";if(!(this instanceof AbCore.Base)){throw new Error("abCore.Base needs to be called with the new keyword");}
if(!options.experiments){throw new Error('An experiments option is required for the abCore');}
if(!options.app){throw new Error('An app option (mobile or desktop) must be specified');}
if(!options.captureCallback){throw new Error('A captureCallback option must be specified for tracking');}
if(options.app=='mobile'){this.app='mobile';}else{this.app='app';}
Api=new ApiCore.Base(options.config);this.experiments=options.experiments;this.variant=function(id,conditionsMap){var experiment=this.experiments[id];if(params['ab_'+id]){return params['ab_'+id];}
if(experiment.backendExperiment){return options.BEexperiments&&options.BEexperiments[id]?options.BEexperiments[id]:experiment.na;}
if(experiment.variantOverload){return experiment.variantOverload;}
if(Api.store('ab_'+id)){var local=Api.store('ab_'+id);return(local=='na')?'control':local;}
var conditions=experiment.selectionAttributes;if(conditions){if(conditionsMap){for(var item in conditionsMap){if(item!=='newVisitor'&&conditionsMap[item]!=conditions[item]){Api.store('ab_'+id,'na');return'control';}}}
if(conditions.newVisitor&&!window.newVisitor){Api.store('ab_'+id,'na');return'control';}}
if(Math.random()*100>experiment.trafficAllocation){Api.store('ab_'+id,'na');return'control';}
var split;if(!Array.isArray(experiment.variants)){var variants=[];for(var variant in experiment.variants){variants.push(variant);}
split=variants[Math.floor((Math.random()*100)/(100/variants.length))];}else{split=experiment.variants[Math.floor((Math.random()*100)/(100/experiment.variants.length))];}
Api.store('ab_'+id,split);options.captureCallback({event:'JOINED_EXPERIMENT',extradata:id,field1:split,field2:experiment.version,field3:options.app_version});return split;};};return AbCore;});})();angular.module('younow.core.services.channel',[]).factory('broadcasterServiceCore',function(){var service={};service.Base=function(){this.channelFormat=function(data,data2){if(!data){return data;}
if(data2){data=angular.extend(data,data2);}
if(data.user){data=angular.extend(data,data.user);}
data.profile=data.profileUrlString=data.profile||data.profileUrlString;if(data.length){data.length=parseInt(data.length);}
if(data.viewers){data.viewers=parseInt(data.viewers);}
if(data.likes){data.likes=parseInt(data.likes);}
if(data.shares){data.shares=parseInt(data.shares);}
if(data.latestSubscriptions&&data.totalSubscriptions){data.latestSubscriptionsPlus=(data.totalSubscriptions-data.latestSubscriptions.length)||0;}
if(data.disabledGoodies){for(var goodie in data.disabledGoodies){if(data.disabledGoodies[goodie]!==true){data.disabledGoodies[data.disabledGoodies[goodie]]=true;delete data.disabledGoodies[goodie];}}}
if(data.subscribersCount){data.subscribersCount=parseInt(data.subscribersCount);if(data.subscribersCount>0){data.subscribersString=data.subscribersCount+' Subscriber'+(data.subscribersCount!=1?'s':'');}else{data.subscribersString='0 Subscribers';}}
if(data.latestSubscriptions&&Object.keys(data.latestSubscriptions).length>3){var latestSubscriptions=data.latestSubscriptions;var latestSubscriptionsAdd=0;data.latestSubscriptions={};var i=0;for(var k in latestSubscriptions){if(i<5){data.latestSubscriptions[k]=latestSubscriptions[k];}else{latestSubscriptionsAdd++;}
i++;}
data.latestSubscriptionsPlus=(data.latestSubscriptionsPlus||0)+latestSubscriptionsAdd;}
return data;};};return service;});(function(){angular.module('younow.core.services').factory('ConfigCore',function($location){var ConfigCore={};ConfigCore.Base=function(){this.params=$location.search();this.settings=formatConfig(window.bootstrapConfig);this.host=this.params.host||window.location.host;this.buybarsiframe=false;this.newVisitor=window.newVisitor=!window.localStorage.trpx_device_id?true:false;this.bootstrap={adminRoles:[1,2,3,4,5],cdnDev:"cdnv2-vd.younow.com",cdnProduction:"cdn2.younow.com",facebookAppId:171373592926306,flashVersion:"47.35",googleClientId:"619368150599-2ef6s6o5dqgv6oqoq5tevtqo1k7gni12.apps.googleusercontent.com",googleAnalyticsId:"UA-24148895-1",TM_DOMAIN:"images1.younow.com",TM_ID:"7jnw4jh4"};};function formatConfig(data){if(window.location.protocol==='https:'&&data.ServerCDNBaseUrl.indexOf('https')===-1){data.ServerCDNBaseUrl=data.ServerCDNBaseUrl.replace("http","https");}
if(window.location.protocol==='https:'&&data.ServerLocalBaseUrl.indexOf('https')===-1){data.ServerLocalBaseUrl=data.ServerLocalBaseUrl.replace("http","https");}
if(window.location.protocol==='https:'&&data.ServerRecommendationsBaseUrl.indexOf('https')===-1){data.ServerRecommendationsBaseUrl=data.ServerRecommendationsBaseUrl.replace("http","https");}
if(window.location.protocol==='https:'&&data.TrackingHost.indexOf('https')===-1){data.TrackingHost=data.TrackingHost.replace("http","https");}
if(window.location.protocol==='https:'&&data.PlayDataBaseUrl.indexOf('https')===-1){data.PlayDataBaseUrl=data.PlayDataBaseUrl.replace("http","https");}
if(window.location.protocol==='https:'&&data.ServerHomeBaseUrl.indexOf('https')===-1){data.ServerHomeBaseUrl=data.ServerHomeBaseUrl.replace("http","https");}
if(window.location.protocol==='https:'&&data.BadgeBaseUrl.indexOf('https')===-1){data.BadgeBaseUrl=data.BadgeBaseUrl.replace("http","https");}
return data;}
return ConfigCore;});})();angular.module('younow.core.services').factory('TrackingPixelCore',function($state,$http,$window,ApiCore){var TrackingPixelCore={};var Api;var localVars={_paramsMap:{'host':0,'event':1,'dateday':2,'userid':3,'session':4,'broadcastid':5,'doorid':6,'userlevel':7,'broadcastscount':8,'unspentcoins':9,'usertype':10,'extradata':11,'coins':12,'points':13,'platform':14,'sourceid':15,'domain':16,'field1':17,'field2':18,'field3':19,'field4':20,'field5':21,'field6':22,'field7':23,'pixel':24},_paramTypes:{'host':'string','event':'string','dateday':'string','userid':'number','session':'string','broadcastid':'number','doorid':'number','userlevel':'number','broadcastscount':'number','unspentcoins':'number','usertype':'number','extradata':'string','coins':'number','points':'number','platform':'number','sourceid':'number','domain':'string','field1':'string','field2':'string','field3':'string','field4':'string','field5':'string','field6':'string','field7':'string','pixel':'string'},_localStorageDeviceId:'trpx_device_id'};TrackingPixelCore.Base=function(options){"use strict";if(!(this instanceof TrackingPixelCore.Base)){throw new Error("TrackingPixelCore.Base needs to be called with the new keyword");}
Api=new ApiCore.Base(options.config);if(options.paramsMap&&typeof options.paramsMap=='object'){angular.extend(localVars._paramsMap,options.paramsMap);}
if(options.paramTypes&&typeof options.paramTypes=='object'){angular.extend(localVars._paramTypes,options.paramTypes);}
localVars._countSessions=Api.store('countSessions');if(Api.store(localVars._localStorageDeviceId)&&(localVars._countSessions==null||localVars._countSessions[0])){Api.store('countSessionsEnable',null);Api.store('countSessions',0);Api.store('countSessionArrivals',0);}
if(!Api.store(localVars._localStorageDeviceId)){Api.store(localVars._localStorageDeviceId,generateTrackingId());Api.store('countSessionsEnable','true');Api.store('countSessions',0);Api.store('countSessionArrivals',0);}
this.checkTrpxSession=function(){var lastTrpxSessionTime=Api.store('trpxTime'),currentTime=new Date().getTime();if(!lastTrpxSessionTime||Api.store('trpxId')===null){incrementSession();}else
if(lastTrpxSessionTime&&(currentTime-lastTrpxSessionTime>1800000)){incrementSession();}};this.checkTrpxSession();this.captureHelper=function(params){for(var param in params){if(localVars._paramTypes[param]=='number'&&!isNaN(params[param])){params[param]=parseInt(params[param])||0;}
if(typeof params[param]!==localVars._paramTypes[param]){console.warn('Warning: '+param+' should have a type of '+localVars._paramTypes[param]);}}
return $http.get(Api.buildPixelTracking(formatParams(params)));};this.trackArrivalHelper=function(track){if(!track.broadcastscount){track.broadcastscount=2;}
track.field3=Api.getLinkType(window.location.pathname,window.location.search);track.field6=Api.getReferrer();var linkTerm=Api.getLinkTerm(window.location.pathname,window.location.search,track.field3);var referralPath=Api.getReferrerPath();if(linkTerm){track.field2=linkTerm;}
if(referralPath){track.field7=referralPath;}
if(!track.field5){track.field5='';}
if(!track.field6){track.field6='';}
return this.capture(track);};this.trackClick=function(action,params){var track={event:'CLICK',extradata:action,points:Api.store('countSessionsEnable')?Api.store('countSessions')||0:0};track=angular.extend(track,params);return this.capture(track);};this._getLocalVar=function(varName){return localVars['_'+varName];};};function generateTrackingId(){var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;i<10;i++){text+=possible.charAt(Math.floor(Math.random()*possible.length));}
return text;}
function incrementSession(){Api.store('trpxId',generateTrackingId());if(Api.store('countSessionsEnable')){Api.store('countSessions',Api.store('countSessions')+1);}
Api.store('countSessionArrivals',0);Api.store('trpxTime',new Date().getTime());}
function formatParams(params){var result={};for(var param in params){result[localVars._paramsMap[param]]=params[param];}
return result;}
return TrackingPixelCore;});(function(){angular.module('younow.core.services').factory('ApiCore',function($window,$http,$document,$q,$sce,$timeout,$interval,$rootScope,$location,$filter){var ApiCore={};ApiCore.Base=function(config){if(!config){throw new Error('The ApiCore requires a config');}
if(window.UAParser){var parser=new window.UAParser();this.os=parser.getOS();this.browser=parser.getBrowser();if(!this.browser.name){this.browser.name='Unknown';}
if(navigator.userAgent&&navigator.userAgent.indexOf('Electron')!==-1){this.browser.name='Electron';}
if(!this.browser.version){this.browser.version='0';}else{this.browser.version=this.browser.version.substr(0,6);}
if(!this.browser.major){this.browser.major=''+this.browser.version.substring(0,(this.browser.version.indexOf('.')||1))||this.browser.version;}
if(!this.os.name){this.os.name='Unknown';}
if(!this.os.version){this.os.version='0';}
if(!this.os.major){this.os.major=''+this.os.version.substring(0,(this.os.version.indexOf('.')||1))||this.os.version;}
var htmlTag=document.getElementsByTagName('html')[0];htmlTag.className+=' '+this.os.name;htmlTag.className+=' v'+this.os.major;}
this.sortObject=function(obj){var keys=[];var sorted_obj={};for(var key in obj){if(obj.hasOwnProperty(key)){keys.push(key);}}
keys.sort();angular.forEach(keys,function(i,key){sorted_obj[keys[key]]=obj[keys[key]];});return sorted_obj;};this.splitter=function(options){if(options&&typeof options!="object"){throw new Error('Splitter can only take an array');}
var randomNum=Math.floor(Math.random()*100);var option;var i=0;var optionsArray=[];for(option in options){optionsArray.push(Number(option));}
optionsArray.sort(function(a,b){return a-b;});for(i;i<optionsArray.length;i++){if(randomNum<=optionsArray[i]||(randomNum>=optionsArray[i]&&optionsArray.length-1===i)){return options[optionsArray[i]];}}};this.get=function(method,data,usecdn){var base;if(usecdn){base=config.settings.ServerCDNBaseUrl;}else if(config.settings.ServerLocalBaseUrl.indexOf('admin')!=-1){base=config.settings.ServerLocalBaseUrl;}else{base=config.settings.apiMap.DNS.DEFAULT;}
var url;if(config.settings.apiMap[method]!==undefined){url=this.generateDynamicApi(method);}else if(method.substr(0,4)==='http'){url=method;}else{url=base+'/php/api/'+method;}
data=data?data:{};if(config.params.host==='www.younow.com'){data.callback="JSON_CALLBACK";}
if(data){data=this.sortObject(data);}
angular.forEach(data,function(value,key){url+="/"+key+"="+value;});this.addToStack(method,'lastApiStack');if(window.YouNow.loadingTime&&window.YouNow.loadingTime.request){window.YouNow.loadingTime.request();}
if(data.callback){return $http.jsonp(url).success(function(data){if(window.YouNow.loadingTime&&window.YouNow.loadingTime.response){window.YouNow.loadingTime.response();}});}else{return $http.get(url,{withCredentials:true}).success(function(data){if(window.YouNow.loadingTime&&window.YouNow.loadingTime.response){window.YouNow.loadingTime.response();}});}};this.post=function(method,data,secured,customUrl,noSerialize){var url;var base;if(config.settings.ServerLocalBaseUrl.indexOf('admin')!=-1){base=config.settings.ServerLocalBaseUrl;}else{base=config.settings.apiMap.DNS.DEFAULT;}
var headers={'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'};data=data?data:{};if(this.prepost){var prepostResult=this.prepost(method);if(prepostResult&&prepostResult.then){return prepostResult.then;}}
if(this.store('trpxId')){data.tsi=this.store('trpxId');data.tdi=this.store('trpx_device_id');}
if(config.settings.apiMap[method]!==undefined){url=this.generateDynamicApi(method);}else if(method.substr(0,4)==='http'){url=method;}else if(customUrl){url=customUrl;}else if(secured){url=config.settings.ServerSecureLocalBaseUrl+'/php/api/'+method;}else{url=base+'/php/api/'+method;}
data=noSerialize?data:this.serialize(data);if(window.YouNow.loadingTime&&window.YouNow.loadingTime.request){window.YouNow.loadingTime.request();}
if(this.requestBy){headers['X-Requested-By']=this.requestBy;}
if(this.showError){var showError=this.showError;}
return $http({method:'POST',headers:headers,data:data,withCredentials:true,url:url}).success(function(data){if(window.YouNow.loadingTime&&window.YouNow.loadingTime.response){window.YouNow.loadingTime.response();}
if(showError){showError(data);}});};this.polls={};this.poll=function(callback,id,delay,defaultDelay){if(!this.polls){this.polls={};}
if(this.polls[id]){$interval.cancel(this.polls[id]);}
if(!defaultDelay){defaultDelay=30;}
if(!delay){delay=defaultDelay;}
this.polls[id]=$interval(function(){callback();},delay*1000);};this.trustedSrc=function(src){return $sce.trustAsResourceUrl(src);};this.trustedHTML=function(text){if(!text.$$unwrapTrustedValue){return $sce.trustAsHtml(text);}else{return text;}};this.serialize=function(obj){var query='',name,value,fullSubName,subName,subValue,innerObj,i;for(name in obj){value=obj[name];if(value instanceof Array){for(i=0;i<value.length;++i){subValue=value[i];fullSubName=name+'['+i+']';innerObj={};innerObj[fullSubName]=subValue;query+=this.serialize(innerObj)+'&';}}else if(value instanceof Object){for(subName in value){subValue=value[subName];fullSubName=name+'['+subName+']';innerObj={};innerObj[fullSubName]=subValue;query+=this.serialize(innerObj)+'&';}}else if(value!==undefined&&value!==null){query+=encodeURIComponent(name)+'='+encodeURIComponent(value)+'&';}}
return query.length?query.substr(0,query.length-1):query;};this.fullName=function(user){if(!user){return'';}
var profile=user.profile||user.profileUrlString;var useprofile=user.useprofile||user.useProfile;if(useprofile==1){return profile;}
if(!user.firstName&&user.username){return user.username;}
return(user.firstName||'')+(user.lastName?' '+user.lastName:'');};this.friendlyName=function(user){return user.useprofile!=="0"?user.profile:user.firstName;};this.cleanLocation=function(data,twopart){if(twopart&&data.state&&!data.city){data.city=data.state;}
return(data.city?data.city+', ':'')+(data.state&&!twopart?data.state+' ':'')+data.country;};this.linksniffer=/((http(s?)(:\/\/))?(([w]{3}|(.*))\.)?([a-zA-Z|0-9])+\.(com(\.au)?|org|me|net|ly|be|gl|co|it|info|(co(\.))?uk|ca|nz|tv)(\/[^\s]+)*)+/g;this.findLinks=function(text){if(!text){return[];}
text=text.replace(/:\/\/www./g,'://');text=text.replace(/www./g,' http://');text=text.replace(/&nbsp;/g,' ');var links=[];var linksniffer=this.linksniffer;text.split(/\s+/).map(function(t){if(t.match(linksniffer)){links.push(t);}});return links;};this.linkify=function(text){if(!text){return text;}
if(text.$$unwrapTrustedValue){text=text.$$unwrapTrustedValue(text);}
var htmlStart=text.indexOf('<');var plainText=htmlStart>-1?text.substr(0,htmlStart):text;var html=htmlStart>-1?text.substr(htmlStart):'';var linksniffer=this.linksniffer;var tokens=plainText.split(' ').map(function(t){return t.replace(linksniffer,function(url){var href=url.substr(0,4)!=='http'?'http://'+url:url;return'<a href="'+href.replace(/("|').*$/g,'')+'" target="_blank" rel="nofollow">'+url.replace(/("|').*$/g,'')+'</a>';});});return tokens.join(' ')+html;};this.stripHTML=function(text){return text.replace(/<[^>]+>/gm,'');};this.prepareDescription=function(text){text=this.linkify(text)||"This profile does not have a description";return $sce.trustAsHtml(text);};this.goto=function(path){if(!path){return false;}
if(path.substr(0,4)=='http'){path=path.slice(path.indexOf(path.split('/')[2]));}
$location.path(path);};this.squashedNumber=function(num,size,decimals){if(num===undefined||num===null){return'';}
if(typeof num==="string"){num=Number(num.replace(",",""));}
var digits=num.toString().length;if(decimals===undefined){decimals=(size==digits-1)?1:0;}
if(digits>size&&digits>=10){num=$filter('number')(num/1000000000,decimals)+'B';}else if(digits>size&&digits>=7){num=$filter('number')(num/1000000,decimals)+'M';}else if(digits>size&&digits>=4){num=$filter('number')(num/1000,decimals)+'k';}else{num=$filter('number')(num);}
num=num&&num.indexOf(".0")!==-1?num.replace(".0",""):num;return num;};this.store=function(key,value){var lsSupport=true;try{$window.localStorage.setItem('isLocalStorage',true);}catch(error){lsSupport=false;}
var data;if(typeof value!=="undefined"&&value!==null){if(typeof value==='object'){value=JSON.stringify(value);}
if(lsSupport){$window.localStorage.setItem(key,value);}else{createCookie(key,value,3650);}}
if(typeof value==="undefined"){data=lsSupport?$window.localStorage.getItem(key):readCookie(key);try{data=JSON.parse(data);}catch(e){data=data;}
return data;}
if(value===null){if(lsSupport){$window.localStorage.removeItem(key);}else{createCookie(key,'',-1);}}};this.ArrayToObject=function(array){var newObject={},i;for(i=0;i<array.length;++i){newObject[i]=array[i];}
return newObject;};this.addToStack=function(data,stackName){if($window.bugsnagAdditionalParams&&$window.bugsnagAdditionalParams[stackName]){if($window.bugsnagAdditionalParams[stackName].length===5){$window.bugsnagAdditionalParams[stackName].pop();}
$window.bugsnagAdditionalParams[stackName].unshift(data);$window.bugsnagAdditionalParams[stackName+'Object']=this.ArrayToObject($window.bugsnagAdditionalParams[stackName]);}};this.generateTrackingId=function(){var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;i<10;i++){text+=possible.charAt(Math.floor(Math.random()*possible.length));}
return text;};this.getLinkType=function(requestUri,search){var linkType;var pieces=requestUri.split('/');var entityTypes={"b":"broadcast","p":"post","c":"comment","m":"moment"};if(requestUri=='/'){linkType='root';}else
if(search.indexOf('?yozio')!==-1){linkType='yozio';}else
if(search.indexOf('?q=')!==-1){linkType='search';}else
if(pieces[1]==='explore'){linkType=requestUri.length>9?'tag':'explore';}else
if(['featured','about','info','policy','thankyou','gems-checkout'].indexOf(pieces[1])!==-1){linkType=pieces[1];}else
if(['b','p','c','m'].indexOf(pieces[5])!==-1){linkType=entityTypes[pieces[5]];}else
if(pieces[2]==='channel'){linkType='profile';}else
if(pieces[2]==='0'){linkType='profile';}else
if(pieces.length===2){linkType='profile';}else{linkType='other';}
return linkType;};this.getLinkTerm=function(requestUri,search,linkType){var linkTerm;if(['search'].indexOf(linkType)!==-1){linkTerm=search.split('?q=')[1];}else
if(['info','policy'].indexOf(linkType)!==-1){linkTerm=requestUri.split('/')[3];}else
if(['tag','featured'].indexOf(linkType)!==-1){linkTerm=requestUri.split('/')[2];}else
if(['profile','broadcast','comment','post'].indexOf(linkType)!==-1){linkTerm=requestUri.split('/')[1];}
return linkTerm;};this.getReferrer=function(){var referrer=document.referrer;var domain=document.referrer.split('/')[2];if(document.referrer.length===0){referrer='direct';}else if(document.referrer.indexOf('facebook.com/')!==-1){referrer='facebook';}else if(document.referrer.indexOf('t.co/')!==-1){referrer='twitter';}else if(document.referrer.indexOf('younow.com/')!==-1){referrer='younow';}else if(document.referrer.indexOf('google')!==-1){referrer='google';}else{referrer=domain;}
return referrer;};this.getReferrerPath=function(){var path=document.referrer.substr(document.referrer.indexOf('://')+3);path=encodeURIComponent(path).replace(/_/g,"__").replace(/%/g,"_");path=path.substr(0,299);return path;};this.buildPixelTracking=function(params,size){var url=this.generateDynamicApi('TRACKING')+'/';size=size?size:24;for(var i=1;i<size;i++){if(params[i]!==undefined){url+=params[i]+'/';}else{url+='/';}}
return url+params[size];};this.triggerTooltip=function(el,time){if(!time){time=2000;}
if(!el[0]||!el[0].outerHTML){if(typeof el=='string'){el=angular.element(document.getElementById(el));}}
if(el[0]&&el[0].outerHTML){var tooltip=el;if(tooltip&&tooltip.triggerHandler){$timeout(function(){tooltip.triggerHandler('show');},0);$timeout(function(){tooltip.triggerHandler('hide');},time);}}else{throw new Error('Api.triggerTooltip failed! First attribute must be DOM element or ID string.');}};this.trackError=function(message){if($window.Bugsnag){$window.Bugsnag.notify(message);}};this.pad=function(n,width,z){z=z||'0';n=n+'';return n.length>=width?n:new Array(width-n.length+1).join(z)+n;};this.isMEdge=function(){if(/Edge\/12./i.test(navigator.userAgent)){return true;}else{return false;}};this.pixelSafe=function(string,maxlength){if(!maxlength){maxlength=50;}
string=encodeURIComponent(string).replace(/_/g,"__").replace(/%/g,"_");string=string.substr(0,maxlength-1);return string;};if(!this.store('trpx_device_id')){window.newVisitor=true;}
this.generateDynamicApi=function(key){if(config.settings.apiMap){return config.settings.apiMap.DNS[config.settings.apiMap[key].DNS]+config.settings.apiMap[key].URL;}else{console.warn('Oops, no apiMap provided');}};this.timeSince=function(UNIX_timestamp){var time=new Date([UNIX_timestamp]*1000);var seconds=Math.floor((new Date()-time)/1000);var interval=Math.floor(seconds/31536000);if(interval>1){return{untranslated:interval+" years ago",translationKey:'time_ago_years',unit:interval};}
interval=Math.floor(seconds/2592000);if(interval>1){return{untranslated:interval+" months ago",translationKey:'time_ago_months',unit:interval};}
interval=Math.floor(seconds/86400);if(interval>1){return{untranslated:interval+" days ago",translationKey:'time_ago_days',unit:interval};}
interval=Math.floor(seconds/3600);if(interval>1){return{untranslated:interval+" hours ago",translationKey:'time_ago_hours',unit:interval};}
interval=Math.floor(seconds/60);if(interval>1){return{untranslated:interval+" minutes ago",translationKey:'time_ago_minutes',unit:interval};}
if(interval===0){return{untranslated:'Just Now!',translationKey:'post_just_now',unit:0};}
return{untranslated:Math.floor(seconds)+" seconds ago",translation:'time_ago_seconds',unit:Math.floor(seconds)};};this.getJsonFromUrl=function(url){var query=url.split("?")[1];var result={};if(query){query.split("&").forEach(function(part){var item=part.split("=");result[item[0]]=decodeURIComponent(item[1]);});}
return result;};};$window.countWatchers=function(){var elts=document.getElementsByClassName('ng-scope');var watches=[];var visited_ids={};for(var i=0;i<elts.length;i++){var scope=angular.element(elts[i]).scope();if(scope.$id in visited_ids){continue;}
visited_ids[scope.$id]=true;watches.push.apply(watches,scope.$$watchers);}
return watches.length;};$window.currentScope=function(){return angular.element($window.$0).scope();};$window.getService=function(name){if(window.location.search.indexOf('debugInfoEnabled')==-1&&!window.readCookie('debugInfoEnabled')){console.warn('Use the query param with the debugInfoEnabled option to use this feature.');}else{return angular.element(document.querySelector('.ng-scope')).injector().get(name);}};function createCookie(key,value,exp){var date=new Date();date.setTime(date.getTime()+(exp*24*60*60*1000));var expires="; expires="+date.toGMTString();document.cookie=key+"="+value+expires+"; path=/";}
function readCookie(key){var nameEQ=key+"=";var ca=document.cookie.split(';');for(var i=0,max=ca.length;i<max;i++){var c=ca[i];while(c.charAt(0)===' '){c=c.substring(1,c.length);}
if(c.indexOf(nameEQ)===0){return c.substring(nameEQ.length,c.length);}}
return null;}
return ApiCore;});})();;(function(exports){var Util={extend:function(){arguments[0]=arguments[0]||{};for(var i=1;i<arguments.length;i++)
{for(var key in arguments[i])
{if(arguments[i].hasOwnProperty(key))
{if(typeof(arguments[i][key])==='object'){if(arguments[i][key]instanceof Array){arguments[0][key]=arguments[i][key];}else{arguments[0][key]=Util.extend(arguments[0][key],arguments[i][key]);}}else{arguments[0][key]=arguments[i][key];}}}}
return arguments[0];}};function TimeSeries(options){this.options=Util.extend({},TimeSeries.defaultOptions,options);this.clear();}
TimeSeries.defaultOptions={resetBoundsInterval:3000,resetBounds:true};TimeSeries.prototype.clear=function(){this.data=[];this.maxValue=Number.NaN;this.minValue=Number.NaN;};TimeSeries.prototype.resetBounds=function(){if(this.data.length){this.maxValue=this.data[0][1];this.minValue=this.data[0][1];for(var i=1;i<this.data.length;i++){var value=this.data[i][1];if(value>this.maxValue){this.maxValue=value;}
if(value<this.minValue){this.minValue=value;}}}else{this.maxValue=Number.NaN;this.minValue=Number.NaN;}};TimeSeries.prototype.append=function(timestamp,value,sumRepeatedTimeStampValues){var i=this.data.length-1;while(i>=0&&this.data[i][0]>timestamp){i--;}
if(i===-1){this.data.splice(0,0,[timestamp,value]);}else if(this.data.length>0&&this.data[i][0]===timestamp){if(sumRepeatedTimeStampValues){this.data[i][1]+=value;value=this.data[i][1];}else{this.data[i][1]=value;}}else if(i<this.data.length-1){this.data.splice(i+1,0,[timestamp,value]);}else{this.data.push([timestamp,value]);}
this.maxValue=isNaN(this.maxValue)?value:Math.max(this.maxValue,value);this.minValue=isNaN(this.minValue)?value:Math.min(this.minValue,value);};TimeSeries.prototype.dropOldData=function(oldestValidTime,maxDataSetLength){var removeCount=0;while(this.data.length-removeCount>=maxDataSetLength&&this.data[removeCount+1][0]<oldestValidTime){removeCount++;}
if(removeCount!==0){this.data.splice(0,removeCount);}};function SmoothieChart(options){this.options=Util.extend({},SmoothieChart.defaultChartOptions,options);this.seriesSet=[];this.currentValueRange=1;this.currentVisMinValue=0;this.lastRenderTimeMillis=0;}
SmoothieChart.defaultChartOptions={millisPerPixel:20,enableDpiScaling:true,yMinFormatter:function(min,precision){return parseFloat(min).toFixed(precision);},yMaxFormatter:function(max,precision){return parseFloat(max).toFixed(precision);},maxValueScale:1,minValueScale:1,interpolation:'bezier',scaleSmoothing:0.125,maxDataSetLength:2,scrollBackwards:false,grid:{fillStyle:'#000000',strokeStyle:'#777777',lineWidth:1,sharpLines:false,millisPerLine:1000,verticalSections:2,borderVisible:true},labels:{fillStyle:'#ffffff',disabled:false,fontSize:10,fontFamily:'monospace',precision:2},horizontalLines:[]};SmoothieChart.AnimateCompatibility=(function(){var requestAnimationFrame=function(callback,element){var requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return window.setTimeout(function(){callback(new Date().getTime());},16);};return requestAnimationFrame.call(window,callback,element);},cancelAnimationFrame=function(id){var cancelAnimationFrame=window.cancelAnimationFrame||function(id){clearTimeout(id);};return cancelAnimationFrame.call(window,id);};return{requestAnimationFrame:requestAnimationFrame,cancelAnimationFrame:cancelAnimationFrame};})();SmoothieChart.defaultSeriesPresentationOptions={lineWidth:1,strokeStyle:'#ffffff'};SmoothieChart.prototype.addTimeSeries=function(timeSeries,options){this.seriesSet.push({timeSeries:timeSeries,options:Util.extend({},SmoothieChart.defaultSeriesPresentationOptions,options)});if(timeSeries.options.resetBounds&&timeSeries.options.resetBoundsInterval>0){timeSeries.resetBoundsTimerId=setInterval(function(){timeSeries.resetBounds();},timeSeries.options.resetBoundsInterval);}};SmoothieChart.prototype.removeTimeSeries=function(timeSeries){var numSeries=this.seriesSet.length;for(var i=0;i<numSeries;i++){if(this.seriesSet[i].timeSeries===timeSeries){this.seriesSet.splice(i,1);break;}}
if(timeSeries.resetBoundsTimerId){clearInterval(timeSeries.resetBoundsTimerId);}};SmoothieChart.prototype.getTimeSeriesOptions=function(timeSeries){var numSeries=this.seriesSet.length;for(var i=0;i<numSeries;i++){if(this.seriesSet[i].timeSeries===timeSeries){return this.seriesSet[i].options;}}};SmoothieChart.prototype.bringToFront=function(timeSeries){var numSeries=this.seriesSet.length;for(var i=0;i<numSeries;i++){if(this.seriesSet[i].timeSeries===timeSeries){var set=this.seriesSet.splice(i,1);this.seriesSet.push(set[0]);break;}}};SmoothieChart.prototype.streamTo=function(canvas,delayMillis){this.canvas=canvas;this.delay=delayMillis;this.start();};SmoothieChart.prototype.resize=function(){if(!this.options.enableDpiScaling||!window||window.devicePixelRatio===1)
return;var dpr=window.devicePixelRatio;var width=parseInt(this.canvas.getAttribute('width'));var height=parseInt(this.canvas.getAttribute('height'));if(!this.originalWidth||(Math.floor(this.originalWidth*dpr)!==width)){this.originalWidth=width;this.canvas.setAttribute('width',(Math.floor(width*dpr)).toString());this.canvas.style.width=width+'px';this.canvas.getContext('2d').scale(dpr,dpr);}
if(!this.originalHeight||(Math.floor(this.originalHeight*dpr)!==height)){this.originalHeight=height;this.canvas.setAttribute('height',(Math.floor(height*dpr)).toString());this.canvas.style.height=height+'px';this.canvas.getContext('2d').scale(dpr,dpr);}};SmoothieChart.prototype.start=function(){if(this.frame){return;}
var animate=function(){this.frame=SmoothieChart.AnimateCompatibility.requestAnimationFrame(function(){this.render();animate();}.bind(this));}.bind(this);animate();};SmoothieChart.prototype.stop=function(){if(this.frame){SmoothieChart.AnimateCompatibility.cancelAnimationFrame(this.frame);delete this.frame;}};SmoothieChart.prototype.updateValueRange=function(){var chartOptions=this.options,chartMaxValue=Number.NaN,chartMinValue=Number.NaN;for(var d=0;d<this.seriesSet.length;d++){var timeSeries=this.seriesSet[d].timeSeries;if(!isNaN(timeSeries.maxValue)){chartMaxValue=!isNaN(chartMaxValue)?Math.max(chartMaxValue,timeSeries.maxValue):timeSeries.maxValue;}
if(!isNaN(timeSeries.minValue)){chartMinValue=!isNaN(chartMinValue)?Math.min(chartMinValue,timeSeries.minValue):timeSeries.minValue;}}
if(chartOptions.maxValue!=null){chartMaxValue=chartOptions.maxValue;}else{chartMaxValue*=chartOptions.maxValueScale;}
if(chartOptions.minValue!=null){chartMinValue=chartOptions.minValue;}else{chartMinValue-=Math.abs(chartMinValue*chartOptions.minValueScale-chartMinValue);}
if(this.options.yRangeFunction){var range=this.options.yRangeFunction({min:chartMinValue,max:chartMaxValue});chartMinValue=range.min;chartMaxValue=range.max;}
if(!isNaN(chartMaxValue)&&!isNaN(chartMinValue)){var targetValueRange=chartMaxValue-chartMinValue;var valueRangeDiff=(targetValueRange-this.currentValueRange);var minValueDiff=(chartMinValue-this.currentVisMinValue);this.isAnimatingScale=Math.abs(valueRangeDiff)>0.1||Math.abs(minValueDiff)>0.1;this.currentValueRange+=chartOptions.scaleSmoothing*valueRangeDiff;this.currentVisMinValue+=chartOptions.scaleSmoothing*minValueDiff;}
this.valueRange={min:chartMinValue,max:chartMaxValue};};SmoothieChart.prototype.render=function(canvas,time){var nowMillis=new Date().getTime();if(!this.isAnimatingScale){var maxIdleMillis=Math.min(1000/6,this.options.millisPerPixel);if(nowMillis-this.lastRenderTimeMillis<maxIdleMillis){return;}}
this.resize();this.lastRenderTimeMillis=nowMillis;canvas=canvas||this.canvas;time=time||nowMillis-(this.delay||0);time-=time%this.options.millisPerPixel;var context=canvas.getContext('2d'),chartOptions=this.options,dimensions={top:0,left:0,width:canvas.clientWidth,height:canvas.clientHeight},oldestValidTime=time-(dimensions.width*chartOptions.millisPerPixel),valueToYPixel=function(value){var offset=value-this.currentVisMinValue;return this.currentValueRange===0?dimensions.height:dimensions.height-(Math.round((offset/this.currentValueRange)*dimensions.height));}.bind(this),timeToXPixel=function(t){if(chartOptions.scrollBackwards){return Math.round((time-t)/chartOptions.millisPerPixel);}
return Math.round(dimensions.width-((time-t)/chartOptions.millisPerPixel));};this.updateValueRange();context.font=chartOptions.labels.fontSize+'px '+chartOptions.labels.fontFamily;context.save();context.translate(dimensions.left,dimensions.top);context.beginPath();context.rect(0,0,dimensions.width,dimensions.height);context.clip();context.save();context.fillStyle=chartOptions.grid.fillStyle;context.clearRect(0,0,dimensions.width,dimensions.height);context.fillRect(0,0,dimensions.width,dimensions.height);context.restore();context.save();context.lineWidth=chartOptions.grid.lineWidth;context.strokeStyle=chartOptions.grid.strokeStyle;if(chartOptions.grid.millisPerLine>0){context.beginPath();for(var t=time-(time%chartOptions.grid.millisPerLine);t>=oldestValidTime;t-=chartOptions.grid.millisPerLine){var gx=timeToXPixel(t);if(chartOptions.grid.sharpLines){gx-=0.5;}
context.moveTo(gx,0);context.lineTo(gx,dimensions.height);}
context.stroke();context.closePath();}
for(var v=1;v<chartOptions.grid.verticalSections;v++){var gy=Math.round(v*dimensions.height/chartOptions.grid.verticalSections);if(chartOptions.grid.sharpLines){gy-=0.5;}
context.beginPath();context.moveTo(0,gy);context.lineTo(dimensions.width,gy);context.stroke();context.closePath();}
if(chartOptions.grid.borderVisible){context.beginPath();context.strokeRect(0,0,dimensions.width,dimensions.height);context.closePath();}
context.restore();if(chartOptions.horizontalLines&&chartOptions.horizontalLines.length){for(var hl=0;hl<chartOptions.horizontalLines.length;hl++){var line=chartOptions.horizontalLines[hl],hly=Math.round(valueToYPixel(line.value))-0.5;context.strokeStyle=line.color||'#ffffff';context.lineWidth=line.lineWidth||1;context.beginPath();context.moveTo(0,hly);context.lineTo(dimensions.width,hly);context.stroke();context.closePath();}}
for(var d=0;d<this.seriesSet.length;d++){context.save();var timeSeries=this.seriesSet[d].timeSeries,dataSet=timeSeries.data,seriesOptions=this.seriesSet[d].options;timeSeries.dropOldData(oldestValidTime,chartOptions.maxDataSetLength);context.lineWidth=seriesOptions.lineWidth;context.strokeStyle=seriesOptions.strokeStyle;context.beginPath();var firstX=0,lastX=0,lastY=0;for(var i=0;i<dataSet.length&&dataSet.length!==1;i++){var x=timeToXPixel(dataSet[i][0]),y=valueToYPixel(dataSet[i][1]);if(i===0){firstX=x;context.moveTo(x,y);}else{switch(chartOptions.interpolation){case"linear":case"line":{context.lineTo(x,y);break;}
case"bezier":default:{context.bezierCurveTo(Math.round((lastX+x)/2),lastY,Math.round((lastX+x))/2,y,x,y);break;}
case"step":{context.lineTo(x,lastY);context.lineTo(x,y);break;}}}
lastX=x;lastY=y;}
if(dataSet.length>1){if(seriesOptions.fillStyle){context.lineTo(dimensions.width+seriesOptions.lineWidth+1,lastY);context.lineTo(dimensions.width+seriesOptions.lineWidth+1,dimensions.height+seriesOptions.lineWidth+1);context.lineTo(firstX,dimensions.height+seriesOptions.lineWidth);context.fillStyle=seriesOptions.fillStyle;context.fill();}
if(seriesOptions.strokeStyle&&seriesOptions.strokeStyle!=='none'){context.stroke();}
context.closePath();}
context.restore();}
if(!chartOptions.labels.disabled&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)){var maxValueString=chartOptions.yMaxFormatter(this.valueRange.max,chartOptions.labels.precision),minValueString=chartOptions.yMinFormatter(this.valueRange.min,chartOptions.labels.precision),labelPos=chartOptions.scrollBackwards?0:dimensions.width-context.measureText(maxValueString).width-2;context.fillStyle=chartOptions.labels.fillStyle;context.fillText(maxValueString,labelPos,chartOptions.labels.fontSize);context.fillText(minValueString,labelPos,dimensions.height-2);}
if(chartOptions.timestampFormatter&&chartOptions.grid.millisPerLine>0){var textUntilX=chartOptions.scrollBackwards?context.measureText(minValueString).width:dimensions.width-context.measureText(minValueString).width+4;for(var t=time-(time%chartOptions.grid.millisPerLine);t>=oldestValidTime;t-=chartOptions.grid.millisPerLine){var gx=timeToXPixel(t);if((!chartOptions.scrollBackwards&&gx<textUntilX)||(chartOptions.scrollBackwards&&gx>textUntilX)){var tx=new Date(t),ts=chartOptions.timestampFormatter(tx),tsWidth=context.measureText(ts).width;textUntilX=chartOptions.scrollBackwards?gx+tsWidth+2:gx-tsWidth-2;context.fillStyle=chartOptions.labels.fillStyle;if(chartOptions.scrollBackwards){context.fillText(ts,gx,dimensions.height-2);}else{context.fillText(ts,gx-tsWidth,dimensions.height-2);}}}}
context.restore();};SmoothieChart.timeFormatter=function(date){function pad2(number){return(number<10?'0':'')+number}
return pad2(date.getHours())+':'+pad2(date.getMinutes())+':'+pad2(date.getSeconds());};exports.TimeSeries=TimeSeries;exports.SmoothieChart=SmoothieChart;})(typeof exports==='undefined'?this:exports);(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.io=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){module.exports=_dereq_("./lib/")},{"./lib/":2}],2:[function(_dereq_,module,exports){module.exports=_dereq_("./socket");module.exports.parser=_dereq_("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(_dereq_,module,exports){(function(global){var transports=_dereq_("./transports");var Emitter=_dereq_("component-emitter");var debug=_dereq_("debug")("engine.io-client:socket");var index=_dereq_("indexof");var parser=_dereq_("engine.io-parser");var parseuri=_dereq_("parseuri");var parsejson=_dereq_("parsejson");var parseqs=_dereq_("parseqs");module.exports=Socket;function noop(){}function Socket(uri,opts){if(!(this instanceof Socket))return new Socket(uri,opts);opts=opts||{};if(uri&&"object"==typeof uri){opts=uri;uri=null}if(uri){uri=parseuri(uri);opts.hostname=uri.host;opts.secure=uri.protocol=="https"||uri.protocol=="wss";opts.port=uri.port;if(uri.query)opts.query=uri.query}else if(opts.host){opts.hostname=parseuri(opts.host).host}this.secure=null!=opts.secure?opts.secure:global.location&&"https:"==location.protocol;if(opts.hostname&&!opts.port){opts.port=this.secure?"443":"80"}this.agent=opts.agent||false;this.hostname=opts.hostname||(global.location?location.hostname:"localhost");this.port=opts.port||(global.location&&location.port?location.port:this.secure?443:80);this.query=opts.query||{};if("string"==typeof this.query)this.query=parseqs.decode(this.query);this.upgrade=false!==opts.upgrade;this.path=(opts.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!opts.forceJSONP;this.jsonp=false!==opts.jsonp;this.forceBase64=!!opts.forceBase64;this.enablesXDR=!!opts.enablesXDR;this.timestampParam=opts.timestampParam||"t";this.timestampRequests=opts.timestampRequests;this.transports=opts.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.policyPort=opts.policyPort||843;this.rememberUpgrade=opts.rememberUpgrade||false;this.binaryType=null;this.onlyBinaryUpgrades=opts.onlyBinaryUpgrades;this.perMessageDeflate=false!==opts.perMessageDeflate?opts.perMessageDeflate||{}:false;if(true===this.perMessageDeflate)this.perMessageDeflate={};if(this.perMessageDeflate&&null==this.perMessageDeflate.threshold){this.perMessageDeflate.threshold=1024}this.pfx=opts.pfx||null;this.key=opts.key||null;this.passphrase=opts.passphrase||null;this.cert=opts.cert||null;this.ca=opts.ca||null;this.ciphers=opts.ciphers||null;this.rejectUnauthorized=opts.rejectUnauthorized===undefined?null:opts.rejectUnauthorized;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal){if(opts.extraHeaders&&Object.keys(opts.extraHeaders).length>0){this.extraHeaders=opts.extraHeaders}}this.open()}Socket.priorWebsocketSuccess=false;Emitter(Socket.prototype);Socket.protocol=parser.protocol;Socket.Socket=Socket;Socket.Transport=_dereq_("./transport");Socket.transports=_dereq_("./transports");Socket.parser=_dereq_("engine.io-parser");Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=clone(this.query);query.EIO=parser.protocol;query.transport=name;if(this.id)query.sid=this.id;var transport=new transports[name]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:query,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return transport};function clone(obj){var o={};for(var i in obj){if(obj.hasOwnProperty(i)){o[i]=obj[i]}}return o}Socket.prototype.open=function(){var transport;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1){transport="websocket"}else if(0===this.transports.length){var self=this;setTimeout(function(){self.emit("error","No transports available")},0);return}else{transport=this.transports[0]}this.readyState="opening";try{transport=this.createTransport(transport)}catch(e){this.transports.shift();this.open();return}transport.open();this.setTransport(transport)};Socket.prototype.setTransport=function(transport){debug("setting transport %s",transport.name);var self=this;if(this.transport){debug("clearing existing transport %s",this.transport.name);this.transport.removeAllListeners()}this.transport=transport;transport.on("drain",function(){self.onDrain()}).on("packet",function(packet){self.onPacket(packet)}).on("error",function(e){self.onError(e)}).on("close",function(){self.onClose("transport close")})};Socket.prototype.probe=function(name){debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1}),failed=false,self=this;Socket.priorWebsocketSuccess=false;function onTransportOpen(){if(self.onlyBinaryUpgrades){var upgradeLosesBinary=!this.supportsBinary&&self.transport.supportsBinary;failed=failed||upgradeLosesBinary}if(failed)return;debug('probe transport "%s" opened',name);transport.send([{type:"ping",data:"probe"}]);transport.once("packet",function(msg){if(failed)return;if("pong"==msg.type&&"probe"==msg.data){debug('probe transport "%s" pong',name);self.upgrading=true;self.emit("upgrading",transport);if(!transport)return;Socket.priorWebsocketSuccess="websocket"==transport.name;debug('pausing current transport "%s"',self.transport.name);self.transport.pause(function(){if(failed)return;if("closed"==self.readyState)return;debug("changing transport and sending upgrade packet");cleanup();self.setTransport(transport);transport.send([{type:"upgrade"}]);self.emit("upgrade",transport);transport=null;self.upgrading=false;self.flush()})}else{debug('probe transport "%s" failed',name);var err=new Error("probe error");err.transport=transport.name;self.emit("upgradeError",err)}})}function freezeTransport(){if(failed)return;failed=true;cleanup();transport.close();transport=null}function onerror(err){var error=new Error("probe error: "+err);error.transport=transport.name;freezeTransport();debug('probe transport "%s" failed because of error: %s',name,err);self.emit("upgradeError",error)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(to){if(transport&&to.name!=transport.name){debug('"%s" works - aborting "%s"',to.name,transport.name);freezeTransport()}}function cleanup(){transport.removeListener("open",onTransportOpen);transport.removeListener("error",onerror);transport.removeListener("close",onTransportClose);self.removeListener("close",onclose);self.removeListener("upgrading",onupgrade)}transport.once("open",onTransportOpen);transport.once("error",onerror);transport.once("close",onTransportClose);this.once("close",onclose);this.once("upgrading",onupgrade);transport.open()};Socket.prototype.onOpen=function(){debug("socket open");this.readyState="open";Socket.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var i=0,l=this.upgrades.length;i<l;i++){this.probe(this.upgrades[i])}}};Socket.prototype.onPacket=function(packet){if("opening"==this.readyState||"open"==this.readyState){debug('socket receive: type "%s", data "%s"',packet.type,packet.data);this.emit("packet",packet);this.emit("heartbeat");switch(packet.type){case"open":this.onHandshake(parsejson(packet.data));break;case"pong":this.setPing();this.emit("pong");break;case"error":var err=new Error("server error");err.code=packet.data;this.onError(err);break;case"message":this.emit("data",packet.data);this.emit("message",packet.data);break}}else{debug('packet received with socket readyState "%s"',this.readyState)}};Socket.prototype.onHandshake=function(data){this.emit("handshake",data);this.id=data.sid;this.transport.query.sid=data.sid;this.upgrades=this.filterUpgrades(data.upgrades);this.pingInterval=data.pingInterval;this.pingTimeout=data.pingTimeout;this.onOpen();if("closed"==this.readyState)return;this.setPing();this.removeListener("heartbeat",this.onHeartbeat);this.on("heartbeat",this.onHeartbeat)};Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer);var self=this;self.pingTimeoutTimer=setTimeout(function(){if("closed"==self.readyState)return;self.onClose("ping timeout")},timeout||self.pingInterval+self.pingTimeout)};Socket.prototype.setPing=function(){var self=this;clearTimeout(self.pingIntervalTimer);self.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",self.pingTimeout);self.ping();self.onHeartbeat(self.pingTimeout)},self.pingInterval)};Socket.prototype.ping=function(){var self=this;this.sendPacket("ping",function(){self.emit("ping")})};Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(0===this.writeBuffer.length){this.emit("drain")}else{this.flush()}};Socket.prototype.flush=function(){if("closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){debug("flushing %d packets in socket",this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen=this.writeBuffer.length;this.emit("flush")}};Socket.prototype.write=Socket.prototype.send=function(msg,options,fn){this.sendPacket("message",msg,options,fn);return this};Socket.prototype.sendPacket=function(type,data,options,fn){if("function"==typeof data){fn=data;data=undefined}if("function"==typeof options){fn=options;options=null}if("closing"==this.readyState||"closed"==this.readyState){return}options=options||{};options.compress=false!==options.compress;var packet={type:type,data:data,options:options};this.emit("packetCreate",packet);this.writeBuffer.push(packet);if(fn)this.once("flush",fn);this.flush()};Socket.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var self=this;if(this.writeBuffer.length){this.once("drain",function(){if(this.upgrading){waitForUpgrade()}else{close()}})}else if(this.upgrading){waitForUpgrade()}else{close()}}function close(){self.onClose("forced close");debug("socket closing - telling transport to close");self.transport.close()}function cleanupAndClose(){self.removeListener("upgrade",cleanupAndClose);self.removeListener("upgradeError",cleanupAndClose);close()}function waitForUpgrade(){self.once("upgrade",cleanupAndClose);self.once("upgradeError",cleanupAndClose)}return this};Socket.prototype.onError=function(err){debug("socket error %j",err);Socket.priorWebsocketSuccess=false;this.emit("error",err);this.onClose("transport error",err)};Socket.prototype.onClose=function(reason,desc){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){debug('socket close with reason: "%s"',reason);var self=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",reason,desc);self.writeBuffer=[];self.prevBufferLen=0}};Socket.prototype.filterUpgrades=function(upgrades){var filteredUpgrades=[];for(var i=0,j=upgrades.length;i<j;i++){if(~index(this.transports,upgrades[i]))filteredUpgrades.push(upgrades[i])}return filteredUpgrades}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(_dereq_,module,exports){var parser=_dereq_("engine.io-parser");var Emitter=_dereq_("component-emitter");module.exports=Transport;function Transport(opts){this.path=opts.path;this.hostname=opts.hostname;this.port=opts.port;this.secure=opts.secure;this.query=opts.query;this.timestampParam=opts.timestampParam;this.timestampRequests=opts.timestampRequests;this.readyState="";this.agent=opts.agent||false;this.socket=opts.socket;this.enablesXDR=opts.enablesXDR;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.extraHeaders=opts.extraHeaders}Emitter(Transport.prototype);Transport.prototype.onError=function(msg,desc){var err=new Error(msg);err.type="TransportError";err.description=desc;this.emit("error",err);return this};Transport.prototype.open=function(){if("closed"==this.readyState||""==this.readyState){this.readyState="opening";this.doOpen()}return this};Transport.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.doClose();this.onClose()}return this};Transport.prototype.send=function(packets){if("open"==this.readyState){this.write(packets)}else{throw new Error("Transport not open")}};Transport.prototype.onOpen=function(){this.readyState="open";this.writable=true;this.emit("open")};Transport.prototype.onData=function(data){var packet=parser.decodePacket(data,this.socket.binaryType);this.onPacket(packet)};Transport.prototype.onPacket=function(packet){this.emit("packet",packet)};Transport.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(_dereq_,module,exports){(function(global){var XMLHttpRequest=_dereq_("xmlhttprequest-ssl");var XHR=_dereq_("./polling-xhr");var JSONP=_dereq_("./polling-jsonp");var websocket=_dereq_("./websocket");exports.polling=polling;exports.websocket=websocket;function polling(opts){var xhr;var xd=false;var xs=false;var jsonp=false!==opts.jsonp;if(global.location){var isSSL="https:"==location.protocol;var port=location.port;if(!port){port=isSSL?443:80}xd=opts.hostname!=location.hostname||port!=opts.port;xs=opts.secure!=isSSL}opts.xdomain=xd;opts.xscheme=xs;xhr=new XMLHttpRequest(opts);if("open"in xhr&&!opts.forceJSONP){return new XHR(opts)}else{if(!jsonp)throw new Error("JSONP disabled");return new JSONP(opts)}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(_dereq_,module,exports){(function(global){var Polling=_dereq_("./polling");var inherit=_dereq_("component-inherit");module.exports=JSONPPolling;var rNewline=/\n/g;var rEscapedNewline=/\\n/g;var callbacks;var index=0;function empty(){}function JSONPPolling(opts){Polling.call(this,opts);this.query=this.query||{};if(!callbacks){if(!global.___eio)global.___eio=[];callbacks=global.___eio}this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg)});this.query.j=this.index;if(global.document&&global.addEventListener){global.addEventListener("beforeunload",function(){if(self.script)self.script.onerror=empty},false)}}inherit(JSONPPolling,Polling);JSONPPolling.prototype.supportsBinary=false;JSONPPolling.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}if(this.form){this.form.parentNode.removeChild(this.form);this.form=null;this.iframe=null}Polling.prototype.doClose.call(this)};JSONPPolling.prototype.doPoll=function(){var self=this;var script=document.createElement("script");if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}script.async=true;script.src=this.uri();script.onerror=function(e){self.onError("jsonp poll error",e)};var insertAt=document.getElementsByTagName("script")[0];if(insertAt){insertAt.parentNode.insertBefore(script,insertAt)}else{(document.head||document.body).appendChild(script)}this.script=script;var isUAgecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);if(isUAgecko){setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe);document.body.removeChild(iframe)},100)}};JSONPPolling.prototype.doWrite=function(data,fn){var self=this;if(!this.form){var form=document.createElement("form");var area=document.createElement("textarea");var id=this.iframeId="eio_iframe_"+this.index;var iframe;form.className="socketio";form.style.position="absolute";form.style.top="-1000px";form.style.left="-1000px";form.target=id;form.method="POST";form.setAttribute("accept-charset","utf-8");area.name="d";form.appendChild(area);document.body.appendChild(form);this.form=form;this.area=area}this.form.action=this.uri();function complete(){initIframe();fn()}function initIframe(){if(self.iframe){try{self.form.removeChild(self.iframe)}catch(e){self.onError("jsonp polling iframe removal error",e)}}try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">';iframe=document.createElement(html)}catch(e){iframe=document.createElement("iframe");iframe.name=self.iframeId;iframe.src="javascript:0"}iframe.id=self.iframeId;self.form.appendChild(iframe);self.iframe=iframe}initIframe();data=data.replace(rEscapedNewline,"\\\n");this.area.value=data.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}if(this.iframe.attachEvent){this.iframe.onreadystatechange=function(){if(self.iframe.readyState=="complete"){complete()}}}else{this.iframe.onload=complete}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"./polling":8,"component-inherit":16}],7:[function(_dereq_,module,exports){(function(global){var XMLHttpRequest=_dereq_("xmlhttprequest-ssl");var Polling=_dereq_("./polling");var Emitter=_dereq_("component-emitter");var inherit=_dereq_("component-inherit");var debug=_dereq_("debug")("engine.io-client:polling-xhr");module.exports=XHR;module.exports.Request=Request;function empty(){}function XHR(opts){Polling.call(this,opts);if(global.location){var isSSL="https:"==location.protocol;var port=location.port;if(!port){port=isSSL?443:80}this.xd=opts.hostname!=global.location.hostname||port!=opts.port;this.xs=opts.secure!=isSSL}else{this.extraHeaders=opts.extraHeaders}}inherit(XHR,Polling);XHR.prototype.supportsBinary=true;XHR.prototype.request=function(opts){opts=opts||{};opts.uri=this.uri();opts.xd=this.xd;opts.xs=this.xs;opts.agent=this.agent||false;opts.supportsBinary=this.supportsBinary;opts.enablesXDR=this.enablesXDR;opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;opts.extraHeaders=this.extraHeaders;return new Request(opts)};XHR.prototype.doWrite=function(data,fn){var isBinary=typeof data!=="string"&&data!==undefined;var req=this.request({method:"POST",data:data,isBinary:isBinary});var self=this;req.on("success",fn);req.on("error",function(err){self.onError("xhr post error",err)});this.sendXhr=req};XHR.prototype.doPoll=function(){debug("xhr poll");var req=this.request();var self=this;req.on("data",function(data){self.onData(data)});req.on("error",function(err){self.onError("xhr poll error",err)});this.pollXhr=req};function Request(opts){this.method=opts.method||"GET";this.uri=opts.uri;this.xd=!!opts.xd;this.xs=!!opts.xs;this.async=false!==opts.async;this.data=undefined!=opts.data?opts.data:null;this.agent=opts.agent;this.isBinary=opts.isBinary;this.supportsBinary=opts.supportsBinary;this.enablesXDR=opts.enablesXDR;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.extraHeaders=opts.extraHeaders;this.create()}Emitter(Request.prototype);Request.prototype.create=function(){var opts={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;var xhr=this.xhr=new XMLHttpRequest(opts);var self=this;try{debug("xhr open %s: %s",this.method,this.uri);xhr.open(this.method,this.uri,this.async);try{if(this.extraHeaders){xhr.setDisableHeaderCheck(true);for(var i in this.extraHeaders){if(this.extraHeaders.hasOwnProperty(i)){xhr.setRequestHeader(i,this.extraHeaders[i])}}}}catch(e){}if(this.supportsBinary){xhr.responseType="arraybuffer"}if("POST"==this.method){try{if(this.isBinary){xhr.setRequestHeader("Content-type","application/octet-stream")}else{xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}}catch(e){}}if("withCredentials"in xhr){xhr.withCredentials=true}if(this.hasXDR()){xhr.onload=function(){self.onLoad()};xhr.onerror=function(){self.onError(xhr.responseText)}}else{xhr.onreadystatechange=function(){if(4!=xhr.readyState)return;if(200==xhr.status||1223==xhr.status){self.onLoad()}else{setTimeout(function(){self.onError(xhr.status)},0)}}}debug("xhr data %s",this.data);xhr.send(this.data)}catch(e){setTimeout(function(){self.onError(e)},0);return}if(global.document){this.index=Request.requestsCount++;Request.requests[this.index]=this}};Request.prototype.onSuccess=function(){this.emit("success");this.cleanup()};Request.prototype.onData=function(data){this.emit("data",data);this.onSuccess()};Request.prototype.onError=function(err){this.emit("error",err);this.cleanup(true)};Request.prototype.cleanup=function(fromError){if("undefined"==typeof this.xhr||null===this.xhr){return}if(this.hasXDR()){this.xhr.onload=this.xhr.onerror=empty}else{this.xhr.onreadystatechange=empty}if(fromError){try{this.xhr.abort()}catch(e){}}if(global.document){delete Request.requests[this.index]}this.xhr=null};Request.prototype.onLoad=function(){var data;try{var contentType;try{contentType=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if(contentType==="application/octet-stream"){data=this.xhr.response}else{if(!this.supportsBinary){data=this.xhr.responseText}else{try{data=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){var ui8Arr=new Uint8Array(this.xhr.response);var dataArray=[];for(var idx=0,length=ui8Arr.length;idx<length;idx++){dataArray.push(ui8Arr[idx])}data=String.fromCharCode.apply(null,dataArray)}}}}catch(e){this.onError(e)}if(null!=data){this.onData(data)}};Request.prototype.hasXDR=function(){return"undefined"!==typeof global.XDomainRequest&&!this.xs&&this.enablesXDR};Request.prototype.abort=function(){this.cleanup()};if(global.document){Request.requestsCount=0;Request.requests={};if(global.attachEvent){global.attachEvent("onunload",unloadHandler)}else if(global.addEventListener){global.addEventListener("beforeunload",unloadHandler,false)}}function unloadHandler(){for(var i in Request.requests){if(Request.requests.hasOwnProperty(i)){Request.requests[i].abort()}}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(_dereq_,module,exports){var Transport=_dereq_("../transport");var parseqs=_dereq_("parseqs");var parser=_dereq_("engine.io-parser");var inherit=_dereq_("component-inherit");var yeast=_dereq_("yeast");var debug=_dereq_("debug")("engine.io-client:polling");module.exports=Polling;var hasXHR2=function(){var XMLHttpRequest=_dereq_("xmlhttprequest-ssl");var xhr=new XMLHttpRequest({xdomain:false});return null!=xhr.responseType}();function Polling(opts){var forceBase64=opts&&opts.forceBase64;if(!hasXHR2||forceBase64){this.supportsBinary=false}Transport.call(this,opts)}inherit(Polling,Transport);Polling.prototype.name="polling";Polling.prototype.doOpen=function(){this.poll()};Polling.prototype.pause=function(onPause){var pending=0;var self=this;this.readyState="pausing";function pause(){debug("paused");self.readyState="paused";onPause()}if(this.polling||!this.writable){var total=0;if(this.polling){debug("we are currently polling - waiting to pause");total++;this.once("pollComplete",function(){debug("pre-pause polling complete");--total||pause()})}if(!this.writable){debug("we are currently writing - waiting to pause");total++;this.once("drain",function(){debug("pre-pause writing complete");--total||pause()})}}else{pause()}};Polling.prototype.poll=function(){debug("polling");this.polling=true;this.doPoll();this.emit("poll")};Polling.prototype.onData=function(data){var self=this;debug("polling got data %s",data);var callback=function(packet,index,total){if("opening"==self.readyState){self.onOpen()}if("close"==packet.type){self.onClose();return false}self.onPacket(packet)};parser.decodePayload(data,this.socket.binaryType,callback);if("closed"!=this.readyState){this.polling=false;this.emit("pollComplete");if("open"==this.readyState){this.poll()}else{debug('ignoring poll - transport state "%s"',this.readyState)}}};Polling.prototype.doClose=function(){var self=this;function close(){debug("writing close packet");self.write([{type:"close"}])}if("open"==this.readyState){debug("transport open - closing");close()}else{debug("transport not open - deferring close");this.once("open",close)}};Polling.prototype.write=function(packets){var self=this;this.writable=false;var callbackfn=function(){self.writable=true;self.emit("drain")};var self=this;parser.encodePayload(packets,this.supportsBinary,function(data){self.doWrite(data,callbackfn)})};Polling.prototype.uri=function(){var query=this.query||{};var schema=this.secure?"https":"http";var port="";if(false!==this.timestampRequests){query[this.timestampParam]=yeast()}if(!this.supportsBinary&&!query.sid){query.b64=1}query=parseqs.encode(query);if(this.port&&("https"==schema&&this.port!=443||"http"==schema&&this.port!=80)){port=":"+this.port}if(query.length){query="?"+query}var ipv6=this.hostname.indexOf(":")!==-1;return schema+"://"+(ipv6?"["+this.hostname+"]":this.hostname)+port+this.path+query}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(_dereq_,module,exports){(function(global){var Transport=_dereq_("../transport");var parser=_dereq_("engine.io-parser");var parseqs=_dereq_("parseqs");var inherit=_dereq_("component-inherit");var yeast=_dereq_("yeast");var debug=_dereq_("debug")("engine.io-client:websocket");var BrowserWebSocket=global.WebSocket||global.MozWebSocket;var WebSocket=BrowserWebSocket;if(!WebSocket&&typeof window==="undefined"){try{WebSocket=_dereq_("ws")}catch(e){}}module.exports=WS;function WS(opts){var forceBase64=opts&&opts.forceBase64;if(forceBase64){this.supportsBinary=false}this.perMessageDeflate=opts.perMessageDeflate;Transport.call(this,opts)}inherit(WS,Transport);WS.prototype.name="websocket";WS.prototype.supportsBinary=true;WS.prototype.doOpen=function(){if(!this.check()){return}var self=this;var uri=this.uri();var protocols=void 0;var opts={agent:this.agent,perMessageDeflate:this.perMessageDeflate};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;if(this.extraHeaders){opts.headers=this.extraHeaders}this.ws=BrowserWebSocket?new WebSocket(uri):new WebSocket(uri,protocols,opts);if(this.ws.binaryType===undefined){this.supportsBinary=false}if(this.ws.supports&&this.ws.supports.binary){this.supportsBinary=true;this.ws.binaryType="buffer"}else{this.ws.binaryType="arraybuffer"}this.addEventListeners()};WS.prototype.addEventListeners=function(){var self=this;this.ws.onopen=function(){self.onOpen()};this.ws.onclose=function(){self.onClose()};this.ws.onmessage=function(ev){self.onData(ev.data)};this.ws.onerror=function(e){self.onError("websocket error",e)}};if("undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)){WS.prototype.onData=function(data){var self=this;setTimeout(function(){Transport.prototype.onData.call(self,data)},0)}}WS.prototype.write=function(packets){var self=this;this.writable=false;var total=packets.length;for(var i=0,l=total;i<l;i++){(function(packet){parser.encodePacket(packet,self.supportsBinary,function(data){if(!BrowserWebSocket){var opts={};if(packet.options){opts.compress=packet.options.compress}if(self.perMessageDeflate){var len="string"==typeof data?global.Buffer.byteLength(data):data.length;if(len<self.perMessageDeflate.threshold){opts.compress=false}}}try{if(BrowserWebSocket){self.ws.send(data)}else{self.ws.send(data,opts)}}catch(e){debug("websocket closed before onclose event")}--total||done()})})(packets[i])}function done(){self.emit("flush");setTimeout(function(){self.writable=true;self.emit("drain")},0)}};WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)};WS.prototype.doClose=function(){if(typeof this.ws!=="undefined"){this.ws.close()}};WS.prototype.uri=function(){var query=this.query||{};var schema=this.secure?"wss":"ws";var port="";if(this.port&&("wss"==schema&&this.port!=443||"ws"==schema&&this.port!=80)){port=":"+this.port}if(this.timestampRequests){query[this.timestampParam]=yeast()}if(!this.supportsBinary){query.b64=1}query=parseqs.encode(query);if(query.length){query="?"+query}var ipv6=this.hostname.indexOf(":")!==-1;return schema+"://"+(ipv6?"["+this.hostname+"]":this.hostname)+port+this.path+query};WS.prototype.check=function(){return!!WebSocket&&!("__initialize"in WebSocket&&this.name===WS.prototype.name)}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:undefined,yeast:30}],10:[function(_dereq_,module,exports){var hasCORS=_dereq_("has-cors");module.exports=function(opts){var xdomain=opts.xdomain;var xscheme=opts.xscheme;var enablesXDR=opts.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!xdomain||hasCORS)){return new XMLHttpRequest}}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!xscheme&&enablesXDR){return new XDomainRequest}}catch(e){}if(!xdomain){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}}},{"has-cors":22}],11:[function(_dereq_,module,exports){module.exports=after;function after(count,callback,err_cb){var bail=false;err_cb=err_cb||noop;proxy.count=count;return count===0?callback():proxy;function proxy(err,result){if(proxy.count<=0){throw new Error("after called too many times")}--proxy.count;if(err){bail=true;callback(err);callback=err_cb}else if(proxy.count===0&&!bail){callback(null,result)}}}function noop(){}},{}],12:[function(_dereq_,module,exports){module.exports=function(arraybuffer,start,end){var bytes=arraybuffer.byteLength;start=start||0;end=end||bytes;if(arraybuffer.slice){return arraybuffer.slice(start,end)}if(start<0){start+=bytes}if(end<0){end+=bytes}if(end>bytes){end=bytes}if(start>=bytes||start>=end||bytes===0){return new ArrayBuffer(0)}var abv=new Uint8Array(arraybuffer);var result=new Uint8Array(end-start);for(var i=start,ii=0;i<end;i++,ii++){result[ii]=abv[i]}return result.buffer}},{}],13:[function(_dereq_,module,exports){(function(chars){"use strict";exports.encode=function(arraybuffer){var bytes=new Uint8Array(arraybuffer),i,len=bytes.length,base64="";for(i=0;i<len;i+=3){base64+=chars[bytes[i]>>2];base64+=chars[(bytes[i]&3)<<4|bytes[i+1]>>4];base64+=chars[(bytes[i+1]&15)<<2|bytes[i+2]>>6];base64+=chars[bytes[i+2]&63]}if(len%3===2){base64=base64.substring(0,base64.length-1)+"="}else if(len%3===1){base64=base64.substring(0,base64.length-2)+"=="}return base64};exports.decode=function(base64){var bufferLength=base64.length*.75,len=base64.length,i,p=0,encoded1,encoded2,encoded3,encoded4;if(base64[base64.length-1]==="="){bufferLength--;if(base64[base64.length-2]==="="){bufferLength--}}var arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);for(i=0;i<len;i+=4){encoded1=chars.indexOf(base64[i]);encoded2=chars.indexOf(base64[i+1]);encoded3=chars.indexOf(base64[i+2]);encoded4=chars.indexOf(base64[i+3]);bytes[p++]=encoded1<<2|encoded2>>4;bytes[p++]=(encoded2&15)<<4|encoded3>>2;bytes[p++]=(encoded3&3)<<6|encoded4&63}return arraybuffer}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(_dereq_,module,exports){(function(global){var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder;var blobSupported=function(){try{var a=new Blob(["hi"]);return a.size===2}catch(e){return false}}();var blobSupportsArrayBufferView=blobSupported&&function(){try{var b=new Blob([new Uint8Array([1,2])]);return b.size===2}catch(e){return false}}();var blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;function mapArrayBufferViews(ary){for(var i=0;i<ary.length;i++){var chunk=ary[i];if(chunk.buffer instanceof ArrayBuffer){var buf=chunk.buffer;if(chunk.byteLength!==buf.byteLength){var copy=new Uint8Array(chunk.byteLength);copy.set(new Uint8Array(buf,chunk.byteOffset,chunk.byteLength));buf=copy.buffer}ary[i]=buf}}}function BlobBuilderConstructor(ary,options){options=options||{};var bb=new BlobBuilder;mapArrayBufferViews(ary);for(var i=0;i<ary.length;i++){bb.append(ary[i])}return options.type?bb.getBlob(options.type):bb.getBlob()}function BlobConstructor(ary,options){mapArrayBufferViews(ary);return new Blob(ary,options||{})}module.exports=function(){if(blobSupported){return blobSupportsArrayBufferView?global.Blob:BlobConstructor}else if(blobBuilderSupported){return BlobBuilderConstructor}else{return undefined}}()}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{}],15:[function(_dereq_,module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],16:[function(_dereq_,module,exports){module.exports=function(a,b){var fn=function(){};fn.prototype=b.prototype;a.prototype=new fn;a.prototype.constructor=a}},{}],17:[function(_dereq_,module,exports){exports=module.exports=_dereq_("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":18}],18:[function(_dereq_,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=_dereq_("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:25}],19:[function(_dereq_,module,exports){(function(global){var keys=_dereq_("./keys");var hasBinary=_dereq_("has-binary");var sliceBuffer=_dereq_("arraybuffer.slice");var base64encoder=_dereq_("base64-arraybuffer");var after=_dereq_("after");var utf8=_dereq_("utf8");var isAndroid=navigator.userAgent.match(/Android/i);var isPhantomJS=/PhantomJS/i.test(navigator.userAgent);var dontSendBlobs=isAndroid||isPhantomJS;exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var packetslist=keys(packets);var err={type:"error",data:"parser error"};var Blob=_dereq_("blob");exports.encodePacket=function(packet,supportsBinary,utf8encode,callback){if("function"==typeof supportsBinary){callback=supportsBinary;supportsBinary=false}if("function"==typeof utf8encode){callback=utf8encode;utf8encode=null}var data=packet.data===undefined?undefined:packet.data.buffer||packet.data;if(global.ArrayBuffer&&data instanceof ArrayBuffer){return encodeArrayBuffer(packet,supportsBinary,callback)}else if(Blob&&data instanceof global.Blob){return encodeBlob(packet,supportsBinary,callback)}if(data&&data.base64){return encodeBase64Object(packet,callback)}var encoded=packets[packet.type];if(undefined!==packet.data){encoded+=utf8encode?utf8.encode(String(packet.data)):String(packet.data)}return callback(""+encoded)};function encodeBase64Object(packet,callback){var message="b"+exports.packets[packet.type]+packet.data.data;return callback(message)}function encodeArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback)}var data=packet.data;var contentArray=new Uint8Array(data);var resultBuffer=new Uint8Array(1+data.byteLength);resultBuffer[0]=packets[packet.type];for(var i=0;i<contentArray.length;i++){resultBuffer[i+1]=contentArray[i]}return callback(resultBuffer.buffer)}function encodeBlobAsArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback)}var fr=new FileReader;fr.onload=function(){packet.data=fr.result;exports.encodePacket(packet,supportsBinary,true,callback)};return fr.readAsArrayBuffer(packet.data)}function encodeBlob(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback)}if(dontSendBlobs){return encodeBlobAsArrayBuffer(packet,supportsBinary,callback)}var length=new Uint8Array(1);length[0]=packets[packet.type];var blob=new Blob([length.buffer,packet.data]);return callback(blob)}exports.encodeBase64Packet=function(packet,callback){var message="b"+exports.packets[packet.type];if(Blob&&packet.data instanceof global.Blob){var fr=new FileReader;fr.onload=function(){var b64=fr.result.split(",")[1];callback(message+b64)};return fr.readAsDataURL(packet.data)}var b64data;try{b64data=String.fromCharCode.apply(null,new Uint8Array(packet.data))}catch(e){var typed=new Uint8Array(packet.data);var basic=new Array(typed.length);for(var i=0;i<typed.length;i++){basic[i]=typed[i]}b64data=String.fromCharCode.apply(null,basic)}message+=global.btoa(b64data);return callback(message)};exports.decodePacket=function(data,binaryType,utf8decode){if(typeof data=="string"||data===undefined){if(data.charAt(0)=="b"){return exports.decodeBase64Packet(data.substr(1),binaryType)}if(utf8decode){try{data=utf8.decode(data)}catch(e){return err}}var type=data.charAt(0);if(Number(type)!=type||!packetslist[type]){return err}if(data.length>1){return{type:packetslist[type],data:data.substring(1)}}else{return{type:packetslist[type]}}}var asArray=new Uint8Array(data);var type=asArray[0];var rest=sliceBuffer(data,1);if(Blob&&binaryType==="blob"){rest=new Blob([rest])}return{type:packetslist[type],data:rest}};exports.decodeBase64Packet=function(msg,binaryType){var type=packetslist[msg.charAt(0)];if(!global.ArrayBuffer){return{type:type,data:{base64:true,data:msg.substr(1)}}}var data=base64encoder.decode(msg.substr(1));if(binaryType==="blob"&&Blob){data=new Blob([data])}return{type:type,data:data}};exports.encodePayload=function(packets,supportsBinary,callback){if(typeof supportsBinary=="function"){callback=supportsBinary;supportsBinary=null}var isBinary=hasBinary(packets);if(supportsBinary&&isBinary){if(Blob&&!dontSendBlobs){return exports.encodePayloadAsBlob(packets,callback)}return exports.encodePayloadAsArrayBuffer(packets,callback)}if(!packets.length){return callback("0:")}function setLengthHeader(message){return message.length+":"+message}function encodeOne(packet,doneCallback){exports.encodePacket(packet,!isBinary?false:supportsBinary,true,function(message){doneCallback(null,setLengthHeader(message))})}map(packets,encodeOne,function(err,results){return callback(results.join(""))})};function map(ary,each,done){var result=new Array(ary.length);var next=after(ary.length,done);var eachWithIndex=function(i,el,cb){each(el,function(error,msg){result[i]=msg;cb(error,result)})};for(var i=0;i<ary.length;i++){eachWithIndex(i,ary[i],next)}}exports.decodePayload=function(data,binaryType,callback){if(typeof data!="string"){return exports.decodePayloadAsBinary(data,binaryType,callback)}if(typeof binaryType==="function"){callback=binaryType;binaryType=null}var packet;if(data==""){return callback(err,0,1)}var length="",n,msg;for(var i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(":"!=chr){length+=chr}else{if(""==length||length!=(n=Number(length))){return callback(err,0,1)}msg=data.substr(i+1,n);if(length!=msg.length){return callback(err,0,1)}if(msg.length){packet=exports.decodePacket(msg,binaryType,true);if(err.type==packet.type&&err.data==packet.data){return callback(err,0,1)}var ret=callback(packet,i+n,l);if(false===ret)return}i+=n;length=""}}if(length!=""){return callback(err,0,1)}};exports.encodePayloadAsArrayBuffer=function(packets,callback){if(!packets.length){return callback(new ArrayBuffer(0))}function encodeOne(packet,doneCallback){exports.encodePacket(packet,true,true,function(data){return doneCallback(null,data)})}map(packets,encodeOne,function(err,encodedPackets){var totalLength=encodedPackets.reduce(function(acc,p){var len;if(typeof p==="string"){len=p.length}else{len=p.byteLength}return acc+len.toString().length+len+2},0);var resultArray=new Uint8Array(totalLength);var bufferIndex=0;encodedPackets.forEach(function(p){var isString=typeof p==="string";var ab=p;if(isString){var view=new Uint8Array(p.length);for(var i=0;i<p.length;i++){view[i]=p.charCodeAt(i)}ab=view.buffer}if(isString){resultArray[bufferIndex++]=0}else{resultArray[bufferIndex++]=1}var lenStr=ab.byteLength.toString();for(var i=0;i<lenStr.length;i++){resultArray[bufferIndex++]=parseInt(lenStr[i])}resultArray[bufferIndex++]=255;var view=new Uint8Array(ab);for(var i=0;i<view.length;i++){resultArray[bufferIndex++]=view[i]}});return callback(resultArray.buffer)})};exports.encodePayloadAsBlob=function(packets,callback){function encodeOne(packet,doneCallback){exports.encodePacket(packet,true,true,function(encoded){var binaryIdentifier=new Uint8Array(1);binaryIdentifier[0]=1;if(typeof encoded==="string"){var view=new Uint8Array(encoded.length);for(var i=0;i<encoded.length;i++){view[i]=encoded.charCodeAt(i)}encoded=view.buffer;binaryIdentifier[0]=0}var len=encoded instanceof ArrayBuffer?encoded.byteLength:encoded.size;var lenStr=len.toString();var lengthAry=new Uint8Array(lenStr.length+1);for(var i=0;i<lenStr.length;i++){lengthAry[i]=parseInt(lenStr[i])}lengthAry[lenStr.length]=255;if(Blob){var blob=new Blob([binaryIdentifier.buffer,lengthAry.buffer,encoded]);doneCallback(null,blob)}})}map(packets,encodeOne,function(err,results){return callback(new Blob(results))})};exports.decodePayloadAsBinary=function(data,binaryType,callback){if(typeof binaryType==="function"){callback=binaryType;binaryType=null}var bufferTail=data;var buffers=[];var numberTooLong=false;while(bufferTail.byteLength>0){var tailArray=new Uint8Array(bufferTail);var isString=tailArray[0]===0;var msgLength="";for(var i=1;;i++){if(tailArray[i]==255)break;if(msgLength.length>310){numberTooLong=true;break}msgLength+=tailArray[i]}if(numberTooLong)return callback(err,0,1);bufferTail=sliceBuffer(bufferTail,2+msgLength.length);msgLength=parseInt(msgLength);var msg=sliceBuffer(bufferTail,0,msgLength);if(isString){try{msg=String.fromCharCode.apply(null,new Uint8Array(msg))}catch(e){var typed=new Uint8Array(msg);msg="";for(var i=0;i<typed.length;i++){msg+=String.fromCharCode(typed[i])}}}buffers.push(msg);bufferTail=sliceBuffer(bufferTail,msgLength)}var total=buffers.length;buffers.forEach(function(buffer,i){callback(exports.decodePacket(buffer,binaryType,true),i,total)})}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(_dereq_,module,exports){module.exports=Object.keys||function keys(obj){var arr=[];var has=Object.prototype.hasOwnProperty;for(var i in obj){if(has.call(obj,i)){arr.push(i)}}return arr}},{}],21:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray");module.exports=hasBinary;function hasBinary(data){function _hasBinary(obj){if(!obj)return false;if(global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){return true}if(isArray(obj)){for(var i=0;i<obj.length;i++){if(_hasBinary(obj[i])){return true}}}else if(obj&&"object"==typeof obj){if(obj.toJSON){obj=obj.toJSON()}for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&_hasBinary(obj[key])){return true}}}return false}return _hasBinary(data)}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{isarray:24}],22:[function(_dereq_,module,exports){try{module.exports=typeof XMLHttpRequest!=="undefined"&&"withCredentials"in new XMLHttpRequest}catch(err){module.exports=false}},{}],23:[function(_dereq_,module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}},{}],24:[function(_dereq_,module,exports){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=="[object Array]"}},{}],25:[function(_dereq_,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],26:[function(_dereq_,module,exports){(function(global){var rvalidchars=/^[\],:{}\s]*$/;var rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g;var rtrimLeft=/^\s+/;var rtrimRight=/\s+$/;module.exports=function parsejson(data){if("string"!=typeof data||!data){return null}data=data.replace(rtrimLeft,"").replace(rtrimRight,"");if(global.JSON&&JSON.parse){return JSON.parse(data)}if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return new Function("return "+data)()}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{}],27:[function(_dereq_,module,exports){exports.encode=function(obj){var str="";for(var i in obj){if(obj.hasOwnProperty(i)){if(str.length)str+="&";str+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i])}}return str};exports.decode=function(qs){var qry={};var pairs=qs.split("&");for(var i=0,l=pairs.length;i<l;i++){var pair=pairs[i].split("=");qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return qry}},{}],28:[function(_dereq_,module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function parseuri(str){var src=str,b=str.indexOf("["),e=str.indexOf("]");if(b!=-1&&e!=-1){str=str.substring(0,b)+str.substring(b,e).replace(/:/g,";")+str.substring(e,str.length)}var m=re.exec(str||""),uri={},i=14;while(i--){uri[parts[i]]=m[i]||""}if(b!=-1&&e!=-1){uri.source=src;uri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,":");uri.authority=uri.authority.replace("[","").replace("]","").replace(/;/g,":");uri.ipv6uri=true}return uri}},{}],29:[function(_dereq_,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports;var freeModule=typeof module=="object"&&module&&module.exports==freeExports&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal}var stringFromCharCode=String.fromCharCode;function ucs2decode(string){var output=[];var counter=0;var length=string.length;var value;var extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){var length=array.length;var index=-1;var value;var output="";while(++index<length){value=array[index];if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value)}return output}function checkScalarValue(codePoint){if(codePoint>=55296&&codePoint<=57343){throw Error("Lone surrogate U+"+codePoint.toString(16).toUpperCase()+" is not a scalar value")}}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint){if((codePoint&4294967168)==0){return stringFromCharCode(codePoint)}var symbol="";if((codePoint&4294965248)==0){symbol=stringFromCharCode(codePoint>>6&31|192)}else if((codePoint&4294901760)==0){checkScalarValue(codePoint);symbol=stringFromCharCode(codePoint>>12&15|224);symbol+=createByte(codePoint,6)}else if((codePoint&4292870144)==0){symbol=stringFromCharCode(codePoint>>18&7|240);symbol+=createByte(codePoint,12);symbol+=createByte(codePoint,6)}symbol+=stringFromCharCode(codePoint&63|128);return symbol}function utf8encode(string){var codePoints=ucs2decode(string);var length=codePoints.length;var index=-1;var codePoint;var byteString="";while(++index<length){codePoint=codePoints[index];byteString+=encodeCodePoint(codePoint)}return byteString}function readContinuationByte(){if(byteIndex>=byteCount){throw Error("Invalid byte index")}var continuationByte=byteArray[byteIndex]&255;byteIndex++;if((continuationByte&192)==128){return continuationByte&63}throw Error("Invalid continuation byte")}function decodeSymbol(){var byte1;var byte2;var byte3;var byte4;var codePoint;if(byteIndex>byteCount){throw Error("Invalid byte index")}if(byteIndex==byteCount){return false}byte1=byteArray[byteIndex]&255;byteIndex++;if((byte1&128)==0){return byte1}if((byte1&224)==192){var byte2=readContinuationByte();codePoint=(byte1&31)<<6|byte2;if(codePoint>=128){return codePoint}else{throw Error("Invalid continuation byte")}}if((byte1&240)==224){byte2=readContinuationByte();byte3=readContinuationByte();codePoint=(byte1&15)<<12|byte2<<6|byte3;if(codePoint>=2048){checkScalarValue(codePoint);return codePoint}else{throw Error("Invalid continuation byte")}}if((byte1&248)==240){byte2=readContinuationByte();byte3=readContinuationByte();byte4=readContinuationByte();codePoint=(byte1&15)<<18|byte2<<12|byte3<<6|byte4;if(codePoint>=65536&&codePoint<=1114111){return codePoint}}throw Error("Invalid UTF-8 detected")}var byteArray;var byteCount;var byteIndex;function utf8decode(byteString){byteArray=ucs2decode(byteString);byteCount=byteArray.length;byteIndex=0;var codePoints=[];var tmp;while((tmp=decodeSymbol())!==false){codePoints.push(tmp)}return ucs2encode(codePoints)}var utf8={version:"2.0.0",encode:utf8encode,decode:utf8decode};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return utf8})}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=utf8}else{var object={};var hasOwnProperty=object.hasOwnProperty;for(var key in utf8){hasOwnProperty.call(utf8,key)&&(freeExports[key]=utf8[key])}}}else{root.utf8=utf8}})(this)}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{}],30:[function(_dereq_,module,exports){"use strict";var alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={},seed=0,i=0,prev;function encode(num){var encoded="";do{encoded=alphabet[num%length]+encoded;num=Math.floor(num/length)}while(num>0);return encoded}function decode(str){var decoded=0;for(i=0;i<str.length;i++){decoded=decoded*length+map[str.charAt(i)]}return decoded}function yeast(){var now=encode(+new Date);if(now!==prev)return seed=0,prev=now;return now+"."+encode(seed++)}for(;i<length;i++)map[alphabet[i]]=i;yeast.encode=encode;yeast.decode=decode;module.exports=yeast},{}],31:[function(_dereq_,module,exports){var url=_dereq_("./url");var parser=_dereq_("socket.io-parser");var Manager=_dereq_("./manager");var debug=_dereq_("debug")("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};function lookup(uri,opts){if(typeof uri=="object"){opts=uri;uri=undefined}opts=opts||{};var parsed=url(uri);var source=parsed.source;var id=parsed.id;var path=parsed.path;var sameNamespace=cache[id]&&path in cache[id].nsps;var newConnection=opts.forceNew||opts["force new connection"]||false===opts.multiplex||sameNamespace;var io;if(newConnection){debug("ignoring socket cache for %s",source);io=Manager(source,opts)}else{if(!cache[id]){debug("new io instance for %s",source);cache[id]=Manager(source,opts)}io=cache[id]}return io.socket(parsed.path)}exports.protocol=parser.protocol;exports.connect=lookup;exports.Manager=_dereq_("./manager");exports.Socket=_dereq_("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(_dereq_,module,exports){var eio=_dereq_("engine.io-client");var Socket=_dereq_("./socket");var Emitter=_dereq_("component-emitter");var parser=_dereq_("socket.io-parser");var on=_dereq_("./on");var bind=_dereq_("component-bind");var debug=_dereq_("debug")("socket.io-client:manager");var indexOf=_dereq_("indexof");var Backoff=_dereq_("backo2");var has=Object.prototype.hasOwnProperty;module.exports=Manager;function Manager(uri,opts){if(!(this instanceof Manager))return new Manager(uri,opts);if(uri&&"object"==typeof uri){opts=uri;uri=undefined}opts=opts||{};opts.path=opts.path||"/socket.io";this.nsps={};this.subs=[];this.opts=opts;this.reconnection(opts.reconnection!==false);this.reconnectionAttempts(opts.reconnectionAttempts||Infinity);this.reconnectionDelay(opts.reconnectionDelay||1e3);this.reconnectionDelayMax(opts.reconnectionDelayMax||5e3);this.randomizationFactor(opts.randomizationFactor||.5);this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==opts.timeout?2e4:opts.timeout);this.readyState="closed";this.uri=uri;this.connecting=[];this.lastPing=null;this.encoding=false;this.packetBuffer=[];this.encoder=new parser.Encoder;this.decoder=new parser.Decoder;this.autoConnect=opts.autoConnect!==false;if(this.autoConnect)this.open()}Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var nsp in this.nsps){if(has.call(this.nsps,nsp)){this.nsps[nsp].emit.apply(this.nsps[nsp],arguments)}}};Manager.prototype.updateSocketIds=function(){for(var nsp in this.nsps){if(has.call(this.nsps,nsp)){this.nsps[nsp].id=this.engine.id}}};Emitter(Manager.prototype);Manager.prototype.reconnection=function(v){if(!arguments.length)return this._reconnection;this._reconnection=!!v;return this};Manager.prototype.reconnectionAttempts=function(v){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=v;return this};Manager.prototype.reconnectionDelay=function(v){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=v;this.backoff&&this.backoff.setMin(v);return this};Manager.prototype.randomizationFactor=function(v){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=v;this.backoff&&this.backoff.setJitter(v);return this};Manager.prototype.reconnectionDelayMax=function(v){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=v;this.backoff&&this.backoff.setMax(v);return this};Manager.prototype.timeout=function(v){if(!arguments.length)return this._timeout;this._timeout=v;return this};Manager.prototype.maybeReconnectOnOpen=function(){if(!this.reconnecting&&this._reconnection&&this.backoff.attempts===0){this.reconnect()}};Manager.prototype.open=Manager.prototype.connect=function(fn){debug("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri);this.engine=eio(this.uri,this.opts);var socket=this.engine;var self=this;this.readyState="opening";this.skipReconnect=false;var openSub=on(socket,"open",function(){self.onopen();fn&&fn()});var errorSub=on(socket,"error",function(data){debug("connect_error");self.cleanup();self.readyState="closed";self.emitAll("connect_error",data);if(fn){var err=new Error("Connection error");err.data=data;fn(err)}else{self.maybeReconnectOnOpen()}});if(false!==this._timeout){var timeout=this._timeout;debug("connect attempt will timeout after %d",timeout);var timer=setTimeout(function(){debug("connect attempt timed out after %d",timeout);openSub.destroy();socket.close();socket.emit("error","timeout");self.emitAll("connect_timeout",timeout)},timeout);this.subs.push({destroy:function(){clearTimeout(timer)}})}this.subs.push(openSub);this.subs.push(errorSub);return this};Manager.prototype.onopen=function(){debug("open");this.cleanup();this.readyState="open";this.emit("open");var socket=this.engine;this.subs.push(on(socket,"data",bind(this,"ondata")));this.subs.push(on(socket,"ping",bind(this,"onping")));this.subs.push(on(socket,"pong",bind(this,"onpong")));this.subs.push(on(socket,"error",bind(this,"onerror")));this.subs.push(on(socket,"close",bind(this,"onclose")));this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded")))};Manager.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};Manager.prototype.ondata=function(data){this.decoder.add(data)};Manager.prototype.ondecoded=function(packet){this.emit("packet",packet)};Manager.prototype.onerror=function(err){debug("error",err);this.emitAll("error",err)};Manager.prototype.socket=function(nsp){var socket=this.nsps[nsp];if(!socket){socket=new Socket(this,nsp);this.nsps[nsp]=socket;var self=this;socket.on("connecting",onConnecting);socket.on("connect",function(){socket.id=self.engine.id});if(this.autoConnect){onConnecting()}}function onConnecting(){if(!~indexOf(self.connecting,socket)){self.connecting.push(socket)}}return socket};Manager.prototype.destroy=function(socket){var index=indexOf(this.connecting,socket);if(~index)this.connecting.splice(index,1);if(this.connecting.length)return;this.close()};Manager.prototype.packet=function(packet){debug("writing packet %j",packet);var self=this;if(!self.encoding){self.encoding=true;this.encoder.encode(packet,function(encodedPackets){for(var i=0;i<encodedPackets.length;i++){self.engine.write(encodedPackets[i],packet.options)}self.encoding=false;self.processPacketQueue()})}else{self.packetBuffer.push(packet)}};Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var pack=this.packetBuffer.shift();this.packet(pack)}};Manager.prototype.cleanup=function(){debug("cleanup");var sub;while(sub=this.subs.shift())sub.destroy();this.packetBuffer=[];this.encoding=false;this.lastPing=null;this.decoder.destroy()};Manager.prototype.close=Manager.prototype.disconnect=function(){debug("disconnect");this.skipReconnect=true;this.reconnecting=false;if("opening"==this.readyState){this.cleanup()}this.backoff.reset();this.readyState="closed";if(this.engine)this.engine.close()};Manager.prototype.onclose=function(reason){debug("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",reason);if(this._reconnection&&!this.skipReconnect){this.reconnect()}};Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var self=this;if(this.backoff.attempts>=this._reconnectionAttempts){debug("reconnect failed");this.backoff.reset();this.emitAll("reconnect_failed");this.reconnecting=false}else{var delay=this.backoff.duration();debug("will wait %dms before reconnect attempt",delay);this.reconnecting=true;var timer=setTimeout(function(){if(self.skipReconnect)return;debug("attempting reconnect");self.emitAll("reconnect_attempt",self.backoff.attempts);self.emitAll("reconnecting",self.backoff.attempts);if(self.skipReconnect)return;self.open(function(err){if(err){debug("reconnect attempt error");self.reconnecting=false;self.reconnect();self.emitAll("reconnect_error",err.data)}else{debug("reconnect success");self.onreconnect()}})},delay);this.subs.push({destroy:function(){clearTimeout(timer)}})}};Manager.prototype.onreconnect=function(){var attempt=this.backoff.attempts;this.reconnecting=false;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",attempt)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(_dereq_,module,exports){module.exports=on;function on(obj,ev,fn){obj.on(ev,fn);return{destroy:function(){obj.removeListener(ev,fn)}}}},{}],34:[function(_dereq_,module,exports){var parser=_dereq_("socket.io-parser");var Emitter=_dereq_("component-emitter");var toArray=_dereq_("to-array");var on=_dereq_("./on");var bind=_dereq_("component-bind");var debug=_dereq_("debug")("socket.io-client:socket");var hasBin=_dereq_("has-binary");module.exports=exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1};var emit=Emitter.prototype.emit;function Socket(io,nsp){this.io=io;this.nsp=nsp;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=false;this.disconnected=true;if(this.io.autoConnect)this.open()}Emitter(Socket.prototype);Socket.prototype.subEvents=function(){if(this.subs)return;var io=this.io;this.subs=[on(io,"open",bind(this,"onopen")),on(io,"packet",bind(this,"onpacket")),on(io,"close",bind(this,"onclose"))]};Socket.prototype.open=Socket.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==this.io.readyState)this.onopen();this.emit("connecting");return this};Socket.prototype.send=function(){var args=toArray(arguments);args.unshift("message");this.emit.apply(this,args);return this};Socket.prototype.emit=function(ev){if(events.hasOwnProperty(ev)){emit.apply(this,arguments);return this}var args=toArray(arguments);var parserType=parser.EVENT;if(hasBin(args)){parserType=parser.BINARY_EVENT}var packet={type:parserType,data:args};packet.options={};packet.options.compress=!this.flags||false!==this.flags.compress;if("function"==typeof args[args.length-1]){debug("emitting packet with ack id %d",this.ids);this.acks[this.ids]=args.pop();packet.id=this.ids++}if(this.connected){this.packet(packet)}else{this.sendBuffer.push(packet)}delete this.flags;return this};Socket.prototype.packet=function(packet){packet.nsp=this.nsp;this.io.packet(packet)};Socket.prototype.onopen=function(){debug("transport is open - connecting");if("/"!=this.nsp){this.packet({type:parser.CONNECT})}};Socket.prototype.onclose=function(reason){debug("close (%s)",reason);this.connected=false;this.disconnected=true;delete this.id;this.emit("disconnect",reason)};Socket.prototype.onpacket=function(packet){if(packet.nsp!=this.nsp)return;switch(packet.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:this.onevent(packet);break;case parser.BINARY_EVENT:this.onevent(packet);break;case parser.ACK:this.onack(packet);break;case parser.BINARY_ACK:this.onack(packet);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",packet.data);break}};Socket.prototype.onevent=function(packet){var args=packet.data||[];debug("emitting event %j",args);if(null!=packet.id){debug("attaching ack callback to event");args.push(this.ack(packet.id))}if(this.connected){emit.apply(this,args)}else{this.receiveBuffer.push(args)}};Socket.prototype.ack=function(id){var self=this;var sent=false;return function(){if(sent)return;sent=true;var args=toArray(arguments);debug("sending ack %j",args);var type=hasBin(args)?parser.BINARY_ACK:parser.ACK;self.packet({type:type,id:id,data:args})}};Socket.prototype.onack=function(packet){var ack=this.acks[packet.id];if("function"==typeof ack){debug("calling ack %s with %j",packet.id,packet.data);ack.apply(this,packet.data);delete this.acks[packet.id]}else{debug("bad ack %s",packet.id)}};Socket.prototype.onconnect=function(){this.connected=true;this.disconnected=false;this.emit("connect");this.emitBuffered()};Socket.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++){emit.apply(this,this.receiveBuffer[i])}this.receiveBuffer=[];for(i=0;i<this.sendBuffer.length;i++){this.packet(this.sendBuffer[i])}this.sendBuffer=[]};Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};Socket.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++){this.subs[i].destroy()}this.subs=null}this.io.destroy(this)};Socket.prototype.close=Socket.prototype.disconnect=function(){if(this.connected){debug("performing disconnect (%s)",this.nsp);this.packet({type:parser.DISCONNECT})}this.destroy();if(this.connected){this.onclose("io client disconnect")}return this};Socket.prototype.compress=function(compress){this.flags=this.flags||{};this.flags.compress=compress;return this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(_dereq_,module,exports){(function(global){var parseuri=_dereq_("parseuri");var debug=_dereq_("debug")("socket.io-client:url");module.exports=url;function url(uri,loc){var obj=uri;var loc=loc||global.location;if(null==uri)uri=loc.protocol+"//"+loc.host;if("string"==typeof uri){if("/"==uri.charAt(0)){if("/"==uri.charAt(1)){uri=loc.protocol+uri}else{uri=loc.host+uri}}if(!/^(https?|wss?):\/\//.test(uri)){debug("protocol-less url %s",uri);if("undefined"!=typeof loc){uri=loc.protocol+"//"+uri}else{uri="https://"+uri}}debug("parse %s",uri);obj=parseuri(uri)}if(!obj.port){if(/^(http|ws)$/.test(obj.protocol)){obj.port="80"}else if(/^(http|ws)s$/.test(obj.protocol)){obj.port="443"}}obj.path=obj.path||"/";var ipv6=obj.host.indexOf(":")!==-1;var host=ipv6?"["+obj.host+"]":obj.host;obj.id=obj.protocol+"://"+host+":"+obj.port;obj.href=obj.protocol+"://"+host+(loc&&loc.port==obj.port?"":":"+obj.port);return obj}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{debug:39,parseuri:45}],36:[function(_dereq_,module,exports){module.exports=Backoff;function Backoff(opts){opts=opts||{};this.ms=opts.min||100;this.max=opts.max||1e4;this.factor=opts.factor||2;this.jitter=opts.jitter>0&&opts.jitter<=1?opts.jitter:0;this.attempts=0}Backoff.prototype.duration=function(){var ms=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var rand=Math.random();var deviation=Math.floor(rand*this.jitter*ms);ms=(Math.floor(rand*10)&1)==0?ms-deviation:ms+deviation}return Math.min(ms,this.max)|0};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function(min){this.ms=min};Backoff.prototype.setMax=function(max){this.max=max};Backoff.prototype.setJitter=function(jitter){this.jitter=jitter}},{}],37:[function(_dereq_,module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn)fn=obj[fn];if("function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},{}],38:[function(_dereq_,module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],39:[function(_dereq_,module,exports){arguments[4][17][0].apply(exports,arguments)},{"./debug":40,dup:17}],40:[function(_dereq_,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18,ms:44}],41:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray");module.exports=hasBinary;function hasBinary(data){function _hasBinary(obj){if(!obj)return false;if(global.Buffer&&global.Buffer.isBuffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){return true}if(isArray(obj)){for(var i=0;i<obj.length;i++){if(_hasBinary(obj[i])){return true}}}else if(obj&&"object"==typeof obj){if(obj.toJSON&&"function"==typeof obj.toJSON){obj=obj.toJSON()}for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&_hasBinary(obj[key])){return true}}}return false}return _hasBinary(data)}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{isarray:43}],42:[function(_dereq_,module,exports){arguments[4][23][0].apply(exports,arguments)},{dup:23}],43:[function(_dereq_,module,exports){arguments[4][24][0].apply(exports,arguments)},{dup:24}],44:[function(_dereq_,module,exports){arguments[4][25][0].apply(exports,arguments)},{dup:25}],45:[function(_dereq_,module,exports){arguments[4][28][0].apply(exports,arguments)},{dup:28}],46:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray");var isBuf=_dereq_("./is-buffer");exports.deconstructPacket=function(packet){var buffers=[];var packetData=packet.data;function _deconstructPacket(data){if(!data)return data;if(isBuf(data)){var placeholder={_placeholder:true,num:buffers.length};buffers.push(data);return placeholder}else if(isArray(data)){var newData=new Array(data.length);for(var i=0;i<data.length;i++){newData[i]=_deconstructPacket(data[i])}return newData}else if("object"==typeof data&&!(data instanceof Date)){var newData={};for(var key in data){newData[key]=_deconstructPacket(data[key])}return newData}return data}var pack=packet;pack.data=_deconstructPacket(packetData);pack.attachments=buffers.length;return{packet:pack,buffers:buffers}};exports.reconstructPacket=function(packet,buffers){var curPlaceHolder=0;function _reconstructPacket(data){if(data&&data._placeholder){var buf=buffers[data.num];return buf}else if(isArray(data)){for(var i=0;i<data.length;i++){data[i]=_reconstructPacket(data[i])}return data}else if(data&&"object"==typeof data){for(var key in data){data[key]=_reconstructPacket(data[key])}return data}return data}packet.data=_reconstructPacket(packet.data);packet.attachments=undefined;return packet};exports.removeBlobs=function(data,callback){function _removeBlobs(obj,curKey,containingObject){if(!obj)return obj;if(global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){pendingBlobs++;var fileReader=new FileReader;fileReader.onload=function(){if(containingObject){containingObject[curKey]=this.result}else{bloblessData=this.result}if(!--pendingBlobs){callback(bloblessData)}};fileReader.readAsArrayBuffer(obj)}else if(isArray(obj)){for(var i=0;i<obj.length;i++){_removeBlobs(obj[i],i,obj)}}else if(obj&&"object"==typeof obj&&!isBuf(obj)){for(var key in obj){_removeBlobs(obj[key],key,obj)}}}var pendingBlobs=0;var bloblessData=data;_removeBlobs(bloblessData);if(!pendingBlobs){callback(bloblessData)}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"./is-buffer":48,isarray:43}],47:[function(_dereq_,module,exports){var debug=_dereq_("debug")("socket.io-parser");var json=_dereq_("json3");var isArray=_dereq_("isarray");var Emitter=_dereq_("component-emitter");var binary=_dereq_("./binary");var isBuf=_dereq_("./is-buffer");exports.protocol=4;exports.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"];exports.CONNECT=0;exports.DISCONNECT=1;exports.EVENT=2;exports.ACK=3;exports.ERROR=4;exports.BINARY_EVENT=5;exports.BINARY_ACK=6;exports.Encoder=Encoder;exports.Decoder=Decoder;function Encoder(){}Encoder.prototype.encode=function(obj,callback){debug("encoding packet %j",obj);if(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type){encodeAsBinary(obj,callback)}else{var encoding=encodeAsString(obj);callback([encoding])}};function encodeAsString(obj){var str="";var nsp=false;str+=obj.type;if(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type){str+=obj.attachments;str+="-"}if(obj.nsp&&"/"!=obj.nsp){nsp=true;str+=obj.nsp}if(null!=obj.id){if(nsp){str+=",";nsp=false}str+=obj.id}if(null!=obj.data){if(nsp)str+=",";str+=json.stringify(obj.data)}debug("encoded %j as %s",obj,str);return str}function encodeAsBinary(obj,callback){function writeEncoding(bloblessData){var deconstruction=binary.deconstructPacket(bloblessData);var pack=encodeAsString(deconstruction.packet);var buffers=deconstruction.buffers;buffers.unshift(pack);callback(buffers)}binary.removeBlobs(obj,writeEncoding)}function Decoder(){this.reconstructor=null}Emitter(Decoder.prototype);Decoder.prototype.add=function(obj){var packet;if("string"==typeof obj){packet=decodeString(obj);if(exports.BINARY_EVENT==packet.type||exports.BINARY_ACK==packet.type){this.reconstructor=new BinaryReconstructor(packet);if(this.reconstructor.reconPack.attachments===0){this.emit("decoded",packet)}}else{this.emit("decoded",packet)}}else if(isBuf(obj)||obj.base64){if(!this.reconstructor){throw new Error("got binary data when not reconstructing a packet")}else{packet=this.reconstructor.takeBinaryData(obj);if(packet){this.reconstructor=null;this.emit("decoded",packet)}}}else{throw new Error("Unknown type: "+obj)}};function decodeString(str){var p={};var i=0;p.type=Number(str.charAt(0));if(null==exports.types[p.type])return error();if(exports.BINARY_EVENT==p.type||exports.BINARY_ACK==p.type){var buf="";while(str.charAt(++i)!="-"){buf+=str.charAt(i);if(i==str.length)break}if(buf!=Number(buf)||str.charAt(i)!="-"){throw new Error("Illegal attachments")}p.attachments=Number(buf)}if("/"==str.charAt(i+1)){p.nsp="";while(++i){var c=str.charAt(i);if(","==c)break;p.nsp+=c;if(i==str.length)break}}else{p.nsp="/"}var next=str.charAt(i+1);if(""!==next&&Number(next)==next){p.id="";while(++i){var c=str.charAt(i);if(null==c||Number(c)!=c){--i;break}p.id+=str.charAt(i);if(i==str.length)break}p.id=Number(p.id)}if(str.charAt(++i)){try{p.data=json.parse(str.substr(i))}catch(e){return error()}}debug("decoded %s as %j",str,p);return p}Decoder.prototype.destroy=function(){if(this.reconstructor){this.reconstructor.finishedReconstruction()}};function BinaryReconstructor(packet){this.reconPack=packet;this.buffers=[]}BinaryReconstructor.prototype.takeBinaryData=function(binData){this.buffers.push(binData);if(this.buffers.length==this.reconPack.attachments){var packet=binary.reconstructPacket(this.reconPack,this.buffers);this.finishedReconstruction();return packet}return null};BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]};function error(data){return{type:exports.ERROR,data:"parser error"}}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(_dereq_,module,exports){(function(global){module.exports=isBuf;function isBuf(obj){return global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{}],49:[function(_dereq_,module,exports){arguments[4][15][0].apply(exports,arguments)},{dup:15}],50:[function(_dereq_,module,exports){(function(global){(function(){var isLoader=typeof define==="function"&&define.amd;var objectTypes={"function":true,object:true};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var root=objectTypes[typeof window]&&window||this,freeGlobal=freeExports&&objectTypes[typeof module]&&module&&!module.nodeType&&typeof global=="object"&&global;if(freeGlobal&&(freeGlobal["global"]===freeGlobal||freeGlobal["window"]===freeGlobal||freeGlobal["self"]===freeGlobal)){root=freeGlobal}function runInContext(context,exports){context||(context=root["Object"]());exports||(exports=root["Object"]());var Number=context["Number"]||root["Number"],String=context["String"]||root["String"],Object=context["Object"]||root["Object"],Date=context["Date"]||root["Date"],SyntaxError=context["SyntaxError"]||root["SyntaxError"],TypeError=context["TypeError"]||root["TypeError"],Math=context["Math"]||root["Math"],nativeJSON=context["JSON"]||root["JSON"];if(typeof nativeJSON=="object"&&nativeJSON){exports.stringify=nativeJSON.stringify;exports.parse=nativeJSON.parse}var objectProto=Object.prototype,getClass=objectProto.toString,isProperty,forEach,undef;var isExtended=new Date(-0xc782b5b800cec);try{isExtended=isExtended.getUTCFullYear()==-109252&&isExtended.getUTCMonth()===0&&isExtended.getUTCDate()===1&&isExtended.getUTCHours()==10&&isExtended.getUTCMinutes()==37&&isExtended.getUTCSeconds()==6&&isExtended.getUTCMilliseconds()==708}catch(exception){}function has(name){if(has[name]!==undef){return has[name]}var isSupported;if(name=="bug-string-char-index"){isSupported="a"[0]!="a"}else if(name=="json"){isSupported=has("json-stringify")&&has("json-parse")}else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(name=="json-stringify"){var stringify=exports.stringify,stringifySupported=typeof stringify=="function"&&isExtended;if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported=stringify(0)==="0"&&stringify(new Number)==="0"&&stringify(new String)=='""'&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&stringify(value)==="1"&&stringify([value])=="[1]"&&stringify([undef])=="[null]"&&stringify(null)=="null"&&stringify([undef,getClass,null])=="[null,null,null]"&&stringify({a:[value,true,false,null,"\x00\b\n\f\r "]})==serialized&&stringify(null,value)==="1"&&stringify([1,2],null,1)=="[\n 1,\n 2\n]"&&stringify(new Date(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&stringify(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&&stringify(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"'}catch(exception){stringifySupported=false}}isSupported=stringifySupported}if(name=="json-parse"){var parse=exports.parse;if(typeof parse=="function"){try{if(parse("0")===0&&!parse(false)){value=parse(serialized);var parseSupported=value["a"].length==5&&value["a"][0]===1;if(parseSupported){try{parseSupported=!parse('" "')}catch(exception){}if(parseSupported){try{parseSupported=parse("01")!==1}catch(exception){}}if(parseSupported){try{parseSupported=parse("1.")!==1}catch(exception){}}}}}catch(exception){parseSupported=false}}isSupported=parseSupported}}return has[name]=!!isSupported}if(!has("json")){var functionClass="[object Function]",dateClass="[object Date]",numberClass="[object Number]",stringClass="[object String]",arrayClass="[object Array]",booleanClass="[object Boolean]";var charIndexBuggy=has("bug-string-char-index");if(!isExtended){var floor=Math.floor;var Months=[0,31,59,90,120,151,181,212,243,273,304,334];var getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)}}if(!(isProperty=objectProto.hasOwnProperty)){isProperty=function(property){var members={},constructor;if((members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass){isProperty=function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);this.__proto__=original;return result}}else{constructor=members.constructor;isProperty=function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}}members=null;return isProperty.call(this,property)}}forEach=function(object,callback){var size=0,Properties,members,property;(Properties=function(){this.valueOf=0}).prototype.valueOf=0;members=new Properties;for(property in members){if(isProperty.call(members,property)){size++}}Properties=members=null;if(!size){members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,length;var hasProperty=!isFunction&&typeof object.constructor!="function"&&objectTypes[typeof object.hasOwnProperty]&&object.hasOwnProperty||isProperty;for(property in object){if(!(isFunction&&property=="prototype")&&hasProperty.call(object,property)){callback(property)}}for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}}else if(size==2){forEach=function(object,callback){var members={},isFunction=getClass.call(object)==functionClass,property;for(property in object){if(!(isFunction&&property=="prototype")&&!isProperty.call(members,property)&&(members[property]=1)&&isProperty.call(object,property)){callback(property)}}}}else{forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,isConstructor;for(property in object){if(!(isFunction&&property=="prototype")&&isProperty.call(object,property)&&!(isConstructor=property==="constructor")){callback(property)}}if(isConstructor||isProperty.call(object,property="constructor")){callback(property)}}}return forEach(object,callback)};if(!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var leadingZeroes="000000";var toPaddedString=function(width,value){return(leadingZeroes+(value||0)).slice(-width)};var unicodePrefix="\\u00";var quote=function(value){var result='"',index=0,length=value.length,useCharIndex=!charIndexBuggy||length>10;var symbols=useCharIndex&&(charIndexBuggy?value.split(""):value);for(;index<length;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(charCode<32){result+=unicodePrefix+toPaddedString(2,charCode.toString(16));break}result+=useCharIndex?symbols[index]:value.charAt(index)}}return result+'"'};var serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property]}catch(exception){}if(typeof value=="object"&&value){className=getClass.call(value);if(className==dateClass&&!isProperty.call(value,"toJSON")){if(value>-1/0&&value<1/0){if(getDay){date=floor(value/864e5);for(year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month);time=(value%864e5+864e5)%864e5;hours=floor(time/36e5)%24;minutes=floor(time/6e4)%60;seconds=floor(time/1e3)%60;milliseconds=time%1e3}else{year=value.getUTCFullYear();month=value.getUTCMonth();date=value.getUTCDate();hours=value.getUTCHours();minutes=value.getUTCMinutes();seconds=value.getUTCSeconds();milliseconds=value.getUTCMilliseconds()}value=(year<=0||year>=1e4?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else{value=null}}else if(typeof value.toJSON=="function"&&(className!=numberClass&&className!=stringClass&&className!=arrayClass||isProperty.call(value,"toJSON"))){value=value.toJSON(property)}}if(callback){value=callback.call(object,property,value)}if(value===null){return"null"}className=getClass.call(value);if(className==booleanClass){return""+value}else if(className==numberClass){return value>-1/0&&value<1/0?""+value:"null"}else if(className==stringClass){return quote(""+value)}if(typeof value=="object"){for(length=stack.length;length--;){if(stack[length]===value){throw TypeError()}}stack.push(value);results=[];prefix=indentation;indentation+=whitespace;if(className==arrayClass){for(index=0,length=value.length;index<length;index++){element=serialize(index,value,callback,properties,whitespace,indentation,stack);results.push(element===undef?"null":element)}result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else{forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);if(element!==undef){results.push(quote(property)+":"+(whitespace?" ":"")+element)}});result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}"}stack.pop();return result}};exports.stringify=function(source,filter,width){var whitespace,callback,properties,className;if(objectTypes[typeof filter]&&filter){if((className=getClass.call(filter))==functionClass){callback=filter}else if(className==arrayClass){properties={};for(var index=0,length=filter.length,value;index<length;value=filter[index++],(className=getClass.call(value),className==stringClass||className==numberClass)&&(properties[value]=1));}}if(width){if((className=getClass.call(width))==numberClass){if((width-=width%1)>0){for(whitespace="",width>10&&(width=10);whitespace.length<width;whitespace+=" ");}}else if(className==stringClass){whitespace=width.length<=10?width:width.slice(0,10)}}return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){var fromCharCode=String.fromCharCode;var Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:" ",110:"\n",102:"\f",114:"\r"};var Index,Source;var abort=function(){Index=Source=null;throw SyntaxError()};var lex=function(){var source=Source,length=source.length,value,begin,position,isSigned,charCode;while(Index<length){charCode=source.charCodeAt(Index);switch(charCode){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:value=charIndexBuggy?source.charAt(Index):source[Index];Index++;return value;case 34:for(value="@",Index++;Index<length;){charCode=source.charCodeAt(Index);if(charCode<32){abort()}else if(charCode==92){charCode=source.charCodeAt(++Index);switch(charCode){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode];Index++;break;case 117:begin=++Index;for(position=Index+4;Index<position;Index++){charCode=source.charCodeAt(Index);if(!(charCode>=48&&charCode<=57||charCode>=97&&charCode<=102||charCode>=65&&charCode<=70)){abort()}}value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}}else{if(charCode==34){break}charCode=source.charCodeAt(Index);begin=Index;while(charCode>=32&&charCode!=92&&charCode!=34){charCode=source.charCodeAt(++Index)}value+=source.slice(begin,Index)}}if(source.charCodeAt(Index)==34){Index++;return value}abort();default:begin=Index;if(charCode==45){isSigned=true;charCode=source.charCodeAt(++Index)}if(charCode>=48&&charCode<=57){if(charCode==48&&(charCode=source.charCodeAt(Index+1),charCode>=48&&charCode<=57)){abort()}isSigned=false;for(;Index<length&&(charCode=source.charCodeAt(Index),charCode>=48&&charCode<=57);Index++);if(source.charCodeAt(Index)==46){position=++Index;for(;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}charCode=source.charCodeAt(Index);if(charCode==101||charCode==69){charCode=source.charCodeAt(++Index);if(charCode==43||charCode==45){Index++}for(position=Index;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}return+source.slice(begin,Index)}if(isSigned){abort()}if(source.slice(Index,Index+4)=="true"){Index+=4;return true}else if(source.slice(Index,Index+5)=="false"){Index+=5;return false}else if(source.slice(Index,Index+4)=="null"){Index+=4;return null}abort()}}return"$"};var get=function(value){var results,hasMembers;if(value=="$"){abort()}if(typeof value=="string"){if((charIndexBuggy?value.charAt(0):value[0])=="@"){return value.slice(1)}if(value=="["){results=[];for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="]"){break}if(hasMembers){if(value==","){value=lex();if(value=="]"){abort()}}else{abort()}}if(value==","){abort()}results.push(get(value))}return results}else if(value=="{"){results={};for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="}"){break}if(hasMembers){if(value==","){value=lex();if(value=="}"){abort()}}else{abort()}}if(value==","||typeof value!="string"||(charIndexBuggy?value.charAt(0):value[0])!="@"||lex()!=":"){abort()}results[value.slice(1)]=get(lex())}return results}abort()}return value};var update=function(source,property,callback){var element=walk(source,property,callback);if(element===undef){delete source[property]}else{source[property]=element}};var walk=function(source,property,callback){var value=source[property],length;if(typeof value=="object"&&value){if(getClass.call(value)==arrayClass){for(length=value.length;length--;){update(value,length,callback)}}else{forEach(value,function(property){update(value,property,callback)})}}return callback.call(source,property,value)};exports.parse=function(source,callback){var result,value;Index=0;Source=""+source;result=get(lex());if(lex()!="$"){abort()}Index=Source=null;return callback&&getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result}}}exports["runInContext"]=runInContext;return exports}if(freeExports&&!isLoader){runInContext(root,freeExports)}else{var nativeJSON=root.JSON,previousJSON=root["JSON3"],isRestored=false;var JSON3=runInContext(root,root["JSON3"]={noConflict:function(){if(!isRestored){isRestored=true;root.JSON=nativeJSON;root["JSON3"]=previousJSON;nativeJSON=previousJSON=null}return JSON3}});root.JSON={parse:JSON3.parse,stringify:JSON3.stringify}}if(isLoader){define(function(){return JSON3})}}).call(this)}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{}],51:[function(_dereq_,module,exports){module.exports=toArray;function toArray(list,index){var array=[];index=index||0;for(var i=index||0;i<list.length;i++){array[i-index]=list[i]}return array}},{}]},{},[31])(31)});var head=document.head||document.getElementsByTagName('head')[0],style=document.createElement('style');document.addEventListener("DOMContentLoaded",function(event){document.body.id="default";});window.broadcasterThemes={"14793089":"werwolf","14484509":"kuhlmann","12681330":"drachenlord","8911994":"ml"};var colors={"default":["#111215","#151619","#222327","#343439","#424348","#55565a","#d63","#e74","#f31","#f52","#bbb","#ddd",],"werwolf":["#110002","#150003","#220004","#340005","#420006","#550007","#d63","#e74","#f31","#f52","#bbb","#ddd",],"kuhlmann":["#321700","#321700","#472100","#512500","#602c00","#655a00","#897b00","#756500","#ff4b00","#ff6626","#bbb","#ddd",],"drachenlord":["#14120a","#2c120a","#3b180d","#481d10","#542213","#603a16","#ab6827","#ab9027","#bd5b0d","#cc620e","#bbb","#ddd",],"ml":["#44120a","#55120a","#66180d","#771d10","#882213","#603a16","#ab6827","#ab9027","#bd5b0d","#cc620e","#bbb","#ddd",]};var selectors=[{'background-color':["body","html","#update"]},{'background-color':[".chat-input select, .playerfooterControl .input select","#tasks .list",".left-panel",".chat-mention","#playersystem","div div.sidebar-header",".volume-background","#chatcomments","#globalchatcomments"],'border-color':[".playerfooterControl .content div .right input"]},{'background-color':[".leaderboard .lb-cell",".leaderboard-lists .mini-scroll","#sidebar-container .sidebar-header .tab-icon.selected","#main .main-left .channel-menu-content",".main-content-right",".result","#sidebar-container .sidebar-header",".list-group-item","#settinguppanel",".modal-footer",".tab-icon.selected","#topfan-slider",".level-bar","button.next-fan","button.prev-fan","div.settings-page","div.main-player",".end-of-broadcast-container","div.mini-player","div#chatinput","input","textarea",".editor",".comment-area",".comment-area.form-control",".fan-mail-widget","#sidebar-container",".user-progress-bar",".guest-optin"],'border-color':[".chat-mention",".d_content",".selectUIInput",".broadcast-summary",".modal-footer",".navbar-content .notifications .dropdown-menu .list>*","ul.dropdown-menu li"]},{'background-color':[".playerfooterControl .header div",".search-title","#sharepanel","#momentpanel",".comment-container",".moment-container",".leaderboard .lb-heading","#sidebar-container .sidebar-header .tab-icon","#leftsidebar .panel-title","div #leftsidebar div a:hover",".newFooter, a.activity:hover",".dropdown-menu",".buybars-modal .panel-two",".buybars-modal .panel-four",".verifications-modal .panel-two",".verifications-modal .panel-four",".buybars-modal .content",".verifications-modal .content",".gifttray-premium",".modal-body",".comment-container",".fans-tab-fan",".user-summary",".stats-container",".navbar",".social-panel",".profile-summary-wrapper .profile-summary","div.audience-summary.refresh","ul.dropdown-menu","ul.list li","ul.list",".d_content",".selectUIInput",".eob-header",".guest-preview"],'border-color':[".chat-input select, .playerfooterControl .input select",".playerfooterControl .header",".playerfooterControl",".playerfooterExtra","#tasks .task .progress","#tasks .headline","#playerheader","#sidebar-container .sidebar-header","#sidebar-container .sidebar-header .tab-icon","#main .main-left .channel-menu-content",".main-content-right",".result","#sidebar-container","div.audience-summary",".guest-nav",".modal-header","div.topfan-slider-divider","#guestpanel .guest","div#chatinput","div.main-player","div.mini-player"],'color':[".ynicon.ynicon-carrot-up",".ynicon.ynicon-carrot-dwn",".d_arrow.ynicon.ynicon-carrot-dwn"]},{'background-color':[".playerfooterControl .header div:hover",".playerfooterControl .header div.selected",".main-content.main-async .main-content-left ul.nav","#addSession",".buybars-modal .item:hover",".verifications-modal .item:hover",".buybars-modal .popular",".navbar-content .user-menu .dropdown-menu .user","ul li a:hover","ul.list li:hover",".searchResult:hover","ul.dropdown-menu li.active","ul.dropdown-menu li:hover","ul.dropdown-menu li:active",".mini-scroll::-webkit-scrollbar-thumb"],'color':[".user-menu .ynicon.ynicon-carrot-up","#sidebar-container #chatinput .selfie-container","#sidebar-container .selfie-container .ynicon-icon-selfie"],'border-color':["#leftsidebar .panel-title","legend","#main .main-left .channel-menu-content","#playersystem","textarea",".comment-area.form-control",".comment-area",".line-spacing"],},{'border-color':[".modal-content .actions",".social-panel",".navbar",".tab-header.active",".tab-header:hover",".end-of-broadcast-container .detail-container"]},{'background-color':[".switchHeader div.active","div #leftsidebar div a.active",".user-progress-value",".chiclet",".thumbnail-placeholder",".total-progress",".selfie-chat-view .semi-prog-2",".selfie-chat-view .semi-prog-3","button.btn-primary","div button.edit-profile",".explore_more",".settings-link",".alert","div.typeahead-container .tag",".connect",".nav-pills li a",".total-views",".comment-actions button.btn-cancel",".searchResult-more",".end-of-broadcast-container .social-panel .title",".end-of-broadcast-container .your-stats",".volume-foreground","button.btn-fan"],'color':["a",".ynicon.ynicon-icon-check",".ynbar.ynicon.ynicon-icon-bar",".yncoin.ynicon.ynicon-coins",".main-content.main-async .main-content-left .social-alert .ynicon-carrot-up",".ynicon-broadcast"],'border-color':[".social-panel",".tab-header.active",".tab-header:hover",".end-of-broadcast-container .detail-container"]},{'background-color':[".nav-pills li a:hover"],'border-color':["button.btn-primary","div button.edit-profile",".explore_more",".settings-link",".alert","div.typeahead-container .tag, .connect",".nav-pills li a",".total-views",".comment-actions button.btn-cancel",".searchResult-more","button.btn-fan"]},{'background-color':["div div button.btn-fanned","button.btn-cancel"]},{'border-color':["div div button.btn-fanned","button.btn-cancel"]},{'color':[":placeholder-shown",":-ms-input-placeholder","::-moz-placeholder",":-moz-placeholder","::-webkit-input-placeholder","legend","input:placerholder-shown","textarea:placeholder-shown"]},{'color':[".navbar-content .user-menu .dropdown-menu li .ynicon",".result .thumb a","input","h1","textarea, .comment-area.form-control","button.btn-cancel","button.btn-primary","div button.edit-profile",".explore_more",".settings-link",".alert","div.typeahead-container .tag",".connect",".nav-pills li a",".total-views",".comment-actions button.btn-cancel",".searchResult-more","span","div","ul.dropdown-menu li a"],}];var colorsCSS="";var streamerCSS={};var getStreamerCSS=function(key)
{if(streamerCSS[key]==null)
{var sCSS="";if(colors[key]!=null)
{for(var col=0;col<colors[key].length;col++)
{for(var styleKey in selectors[col])
{var sll="";for(var k=0;k<selectors[col][styleKey].length;k++)
{var sel=selectors[col][styleKey][k];if(sel=="body"||sel=="html")
sel=sel+"#"+key;else
sel="#"+key+" "+sel;if(sel.indexOf("::")>-1)
{sCSS+=sel+"{"+styleKey+":"+colors[key][col]+" !important;}\r\n";}
else if(selectors[col][styleKey][k].startsWith(":"))
{sCSS+=sel+"{"+styleKey+":"+colors[key][col]+" !important;}\r\n";}
else
{if(sll!="")
sll+=",";sll+=sel;}}
sCSS+=sll+"{"+styleKey+":"+colors[key][col]+" !important;}\r\n";}}}
streamerCSS[key]=sCSS;}
return streamerCSS[key];}
var streamerStyle=document.createElement("style");streamerStyle.type='text/css';head.appendChild(streamerStyle);var hearts=[];var heartsCount=50;var heartsInterval=-1;var endML=function()
{clearInterval(heartsInterval);for(var i=0;i<hearts.length;i++)
{hearts[i].el.remove();}
hearts=[];heartsInterval=-1;}
var startML=function()
{if(heartsInterval==-1)
{for(var i=0;i<heartsCount;i++)
{var heart=document.createElement("img");heart.style.position="fixed";heart.style.opacity=0.3+Math.random()*0.7;heart.style.width=(10+Math.random()*15)+"px";heart.style.zIndex=-1;heart.src="https://schwestertester.github.io/img/streamers/ml.png";document.body.appendChild(heart);hearts.push({'el':heart,'phase':Math.random(),'speed':0.5+Math.random()*0.1,'x':Math.random(),'off':Math.random()*6});}
heartsInterval=setInterval(function(){for(var i=0;i<hearts.length;i++)
{hearts[i].phase+=hearts[i].speed*0.01;hearts[i].el.style.top=(window.innerHeight-hearts[i].phase*(window.innerHeight+70))+"px";hearts[i].el.style.left=-50+((window.innerWidth+100)*hearts[i].x+Math.cos(hearts[i].phase*5+hearts[i].off)*30)+"px";if(hearts[i].phase>=1)
{hearts[i].x=Math.random();hearts[i].phase=0;}}},50);}};window.setStreamerID=function(streamerID)
{if(window.broadcasterThemes[streamerID]=="ml")
{startML();}
else{endML();}
if(window.broadcasterThemes[streamerID]!=null&&window.broadcasterThemes[streamerID]!="default")
{var sCSS=getStreamerCSS(window.broadcasterThemes[streamerID]);if(streamerStyle.styleSheet){streamerStyle.styleSheet.cssText=sCSS;}else{streamerStyle.innerText="";streamerStyle.appendChild(document.createTextNode(sCSS));}
document.body.id=window.broadcasterThemes[streamerID];}
else{document.body.id="default";if(streamerStyle.styleSheet){streamerStyle.styleSheet.cssText="";}else{streamerStyle.innerText="";}}}
var colorsCSS=getStreamerCSS("default");var styleText=colorsCSS+window.layoutCSS;style.type='text/css';if(style.styleSheet){style.styleSheet.cssText=styleText;}else{style.appendChild(document.createTextNode(styleText));}
head.appendChild(style);if(window.globalVars&&window.globalVars.pageLanguage=='me'){window.globalVars.pageLanguage='ar';}
if(!window.YouNow){window.YouNow={};}
window.YouNow.track={};window.YouNow.ReactComponents={};String.prototype.capitalize=function(){return this.toLowerCase().replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase();});};window.YouNow.captureError=function(){};if(!window.reset){window.reset=function(){window.localStorage.clear();var c=window.document.cookie.split("; ");for(var i in c){window.document.cookie=/^[^=]+/.exec(c[i])[0]+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT";}
window.location.reload(true);return'cleared cache and cookies and localStorage... reloading...';};}else{console.warn('window.reset() already defined');}
if(!window.readCookie){window.readCookie=function(name,c,C,i){if(window.localStorate){return window.localStorage.getItem(name);}
if(window.readCookies){return window.readCookies[name];}
c=window.document.cookie.split('; ');window.readCookies={};for(i=c.length-1;i>=0;i--){C=c[i].split('=');window.readCookies[C[0]]=C[1];}
return window.readCookies[name];};}
if(!window.createCookie){window.createCookie=function(name,value,days){if(window.localStorate){return window.localStorage.setItem(name,value);}
var expires;if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toGMTString();}else{expires="";}
document.cookie=name+"="+value+expires+"; path=/";};}
window.YouNow.UILanguages={'en':'English','de':'Deutsch','ar':'???????','tr':'Tï¿½rkï¿½e','es':'Espaï¿½ol','fr':'Franï¿½ais','pt':'Portuguï¿½s','id':'Indonesia'};window.YouNow.UILanguageRegex='';for(var la in window.YouNow.UILanguages){window.YouNow.UILanguageRegex+=la+'|';}
window.textReplacementsKeys=["Badword","ðºðð ðððððð","ð¢ð¬ð»ð²ð¹ð½ ð«ð¸ðµð­","ð²ððºððð¾ð","ð¦ðºð®ð¹ð¹ð²ð¿ ð¯ð¼ð¹ð±","ðð®ð¢ð­ð­ð¦ð³ ð¤ð¶ð³ð´ðªð·ð¦","ðð¢ðð¡ð¡ðð§ ððªð§ð¨ðð«ð ðð¤ð¡ð","ððð«ð¢ð ðð¨ð¥ð","ðºðððð ðððð ððððððð","ð±ð¾ðð´ð³","ðð¢ððð ððððð","á¹ á¸±á¸á¹«á¸á¸£áº","â·â¤ââââ¨","ðð¤ðððð¨ ðððððð","ï¼¢ï½ï½ï½ï½","ð«ð®ð½ðªð©",];window.textReplacements={"none":{},"Badword":{"a":"Ð°","b":"b","c":"Ñ","d":"d","e":"Ðµ","f":"f","g":"g","h":"h","i":"Ñ","j":"Ï³","k":"k","l":"Ó","m":"m","n":"n","o":"Î¿","p":"Ñ","q":"q","r":"r","s":"Ñ","t":"t","u":"u","v":"v","w":"w","x":"Ñ","y":"Ñ","z":"z","A":"Ð","B":"Î","C":"Ï¹","D":"D","E":"Î","F":"F","G":"G","H":"Î","I":"Ó","J":"Ð","K":"Î","L":"L","M":"Î","N":"Î","O":"Î","P":"Î¡","Q":"Q","R":"R","S":"Ð","T":"Î¤","U":"U","V":"V","W":"W","X":"Î§","Y":"Î¥","Z":"Î"},"ðºðð ðððððð":{"a":"ð","b":"ð","c":"ð","d":"ð","e":"ð","f":"ð","g":"ð","h":"ð","i":"ð","j":"ð","k":"ð","l":"ð","m":"ð","n":"ð","o":"ð","p":"ð","q":"ð","r":"ð","s":"ð","t":"ð","u":"ð","v":"ð","w":"ð","x":"ð","y":"ð","z":"ð","A":"ð¬","B":"ð­","C":"ð®","D":"ð¯","E":"ð°","F":"ð±","G":"ð²","H":"ð³","I":"ð´","J":"ðµ","K":"ð¶","L":"ð·","M":"ð¸","N":"ð¹","O":"ðº","P":"ð»","Q":"ð¼","R":"ð½","S":"ð¾","T":"ð¿","U":"ð","V":"ð","W":"ð","X":"ð","Y":"ð","Z":"ð"},"ð¢ð¬ð»ð²ð¹ð½ ð«ð¸ðµð­":{"A":"ð","B":"ð","C":"ð","D":"ð","E":"ð","F":"ð","G":"ð","H":"ð","I":"ð","J":"ð","K":"ð","L":"ð","M":"ð","N":"ð","O":"ð","P":"ð","Q":"ð ","R":"ð¡","S":"ð¢","T":"ð£","U":"ð¤","V":"ð¥","W":"ð¦","X":"ð§","Y":"ð¨","Z":"ð©","a":"ðª","b":"ð«","c":"ð¬","d":"ð­","e":"ð®","f":"ð¯","g":"ð°","h":"ð±","i":"ð²","j":"ð³","k":"ð´","l":"ðµ","m":"ð¶","n":"ð·","o":"ð¸","p":"ð¹","q":"ðº","r":"ð»","s":"ð¼","t":"ð½","u":"ð¾","v":"ð¿","w":"ð","x":"ð","y":"ð","z":"ð"},"ð¦ðºð®ð¹ð¹ð²ð¿ ð¯ð¼ð¹ð±":{"A":"ð","B":"ð","C":"ð","D":"ð","E":"ð","F":"ð","G":"ð","H":"ð","I":"ð","J":"ð","K":"ð","L":"ð","M":"ð ","N":"ð¡","O":"ð¢","P":"ð£","Q":"ð¤","R":"ð¥","S":"ð¦","T":"ð§","U":"ð¨","V":"ð©","W":"ðª","X":"ð«","Y":"ð¬","Z":"ð­","a":"ð®","b":"ð¯","c":"ð°","d":"ð±","e":"ð²","f":"ð³","g":"ð´","h":"ðµ","i":"ð¶","j":"ð·","k":"ð¸","l":"ð¹","m":"ðº","n":"ð»","o":"ð¼","p":"ð½","q":"ð¾","r":"ð¿","s":"ð","t":"ð","u":"ð","v":"ð","w":"ð","x":"ð","y":"ð","z":"ð"},"ðð®ð¢ð­ð­ð¦ð³ ð¤ð¶ð³ð´ðªð·ð¦":{"A":"ð","B":"ð","C":"ð","D":"ð","E":"ð","F":"ð","G":"ð","H":"ð","I":"ð","J":"ð","K":"ð","L":"ð","M":"ð","N":"ð","O":"ð","P":"ð","Q":"ð","R":"ð","S":"ð","T":"ð","U":"ð","V":"ð","W":"ð","X":"ð","Y":"ð ","Z":"ð¡","a":"ð¢","b":"ð£","c":"ð¤","d":"ð¥","e":"ð¦","f":"ð§","g":"ð¨","h":"ð©","i":"ðª","j":"ð«","k":"ð¬","l":"ð­","m":"ð®","n":"ð¯","o":"ð°","p":"ð±","q":"ð²","r":"ð³","s":"ð´","t":"ðµ","u":"ð¶","v":"ð·","w":"ð¸","x":"ð¹","y":"ðº","z":"ð»"},"ðð¢ðð¡ð¡ðð§ ððªð§ð¨ðð«ð ðð¤ð¡ð":{"A":"ð¼","B":"ð½","C":"ð¾","D":"ð¿","E":"ð","F":"ð","G":"ð","H":"ð","I":"ð","J":"ð","K":"ð","L":"ð","M":"ð","N":"ð","O":"ð","P":"ð","Q":"ð","R":"ð","S":"ð","T":"ð","U":"ð","V":"ð","W":"ð","X":"ð","Y":"ð","Z":"ð","a":"ð","b":"ð","c":"ð","d":"ð","e":"ð","f":"ð","g":"ð","h":"ð","i":"ð","j":"ð","k":"ð ","l":"ð¡","m":"ð¢","n":"ð£","o":"ð¤","p":"ð¥","q":"ð¦","r":"ð§","s":"ð¨","t":"ð©","u":"ðª","v":"ð«","w":"ð¬","x":"ð­","y":"ð®","z":"ð¯"},"ð²ððºððð¾ð":{"A":"ð ","B":"ð¡","C":"ð¢","D":"ð£","E":"ð¤","F":"ð¥","G":"ð¦","H":"ð§","I":"ð¨","J":"ð©","K":"ðª","L":"ð«","M":"ð¬","N":"ð­","O":"ð®","P":"ð¯","Q":"ð°","R":"ð±","S":"ð²","T":"ð³","U":"ð´","V":"ðµ","W":"ð¶","X":"ð·","Y":"ð¸","Z":"ð¹","a":"ðº","b":"ð»","c":"ð¼","d":"ð½","e":"ð¾","f":"ð¿","g":"ð","h":"ð","i":"ð","j":"ð","k":"ð","l":"ð","m":"ð","n":"ð","o":"ð","p":"ð","q":"ð","r":"ð","s":"ð","t":"ð","u":"ð","v":"ð","w":"ð","x":"ð","y":"ð","z":"ð"},"ððð«ð¢ð ðð¨ð¥ð":{"A":"ð","B":"ð","C":"ð","D":"ð","E":"ð","F":"ð","G":"ð","H":"ð","I":"ð","J":"ð","K":"ð","L":"ð","M":"ð","N":"ð","O":"ð","P":"ð","Q":"ð","R":"ð","S":"ð","T":"ð","U":"ð","V":"ð","W":"ð","X":"ð","Y":"ð","Z":"ð","a":"ð","b":"ð","c":"ð","d":"ð","e":"ð","f":"ð","g":"ð ","h":"ð¡","i":"ð¢","j":"ð£","k":"ð¤","l":"ð¥","m":"ð¦","n":"ð§","o":"ð¨","p":"ð©","q":"ðª","r":"ð«","s":"ð¬","t":"ð­","u":"ð®","v":"ð¯","w":"ð°","x":"ð±","y":"ð²","z":"ð³"},"ðºðððð ðððð ððððððð":{"A":"ð¨","B":"ð©","C":"ðª","D":"ð«","E":"ð¬","F":"ð­","G":"ð®","H":"ð¯","I":"ð°","J":"ð±","K":"ð²","L":"ð³","M":"ð´","N":"ðµ","O":"ð¶","P":"ð·","Q":"ð¸","R":"ð¹","S":"ðº","T":"ð»","U":"ð¼","V":"ð½","W":"ð¾","X":"ð¿","Y":"ð","Z":"ð","a":"ð","b":"ð","c":"ð","d":"ð","e":"ð","f":"ð","g":"ð","h":"ð","i":"ð","j":"ð","k":"ð","l":"ð","m":"ð","n":"ð","o":"ð","p":"ð","q":"ð","r":"ð","s":"ð","t":"ð","u":"ð","v":"ð","w":"ð","x":"ð","y":"ð","z":"ð"},"ð±ð¾ðð´ð³":{"A":"ð°","B":"ð±","C":"ð²","D":"ð³","E":"ð´","F":"ðµ","G":"ð¶","H":"ð·","I":"ð¸","J":"ð¹","K":"ðº","L":"ð»","M":"ð¼","N":"ð½","O":"ð¾","P":"ð¿","Q":"ð","R":"ð","S":"ð","T":"ð","U":"ð","V":"ð","W":"ð","X":"ð","Y":"ð","Z":"ð","a":"ð°","b":"ð±","c":"ð²","d":"ð³","e":"ð´","f":"ðµ","g":"ð¶","h":"ð·","i":"ð¸","j":"ð¹","k":"ðº","l":"ð»","m":"ð¼","n":"ð½","o":"ð¾","p":"ð¿","q":"ð","r":"ð","s":"ð","t":"ð","u":"ð","v":"ð","w":"ð","x":"ð","y":"ð","z":"ð"},"ðð¢ððð ððððð":{"A":"ð°","B":"ð±","C":"ð²","D":"ð³","E":"ð´","F":"ðµ","G":"ð¶","H":"ð·","I":"ð¸","J":"ð¹","K":"ðº","L":"ð»","M":"ð¼","N":"ð½","O":"ð¾","P":"ð¿","Q":"ð","R":"ð","S":"ð","T":"ð","U":"ð","V":"ð","W":"ð","X":"ð","Y":"ð","Z":"ð","a":"ð","b":"ð","c":"ð","d":"ð","e":"ð","f":"ð","g":"ð","h":"ð","i":"ð","j":"ð","k":"ð","l":"ð","m":"ð","n":"ð","o":"ð","p":"ð","q":"ð","r":"ð","s":"ð","t":"ð","u":"ð","v":"ð","w":"ð ","x":"ð¡","y":"ð¢","z":"ð£"},"á¹ á¸±á¸á¹«á¸á¸£áº":{"A":"á¸","a":"á¸","B":"á¸","b":"á¸","C":"á¸","c":"á¸","D":"á¸","d":"á¸","E":"á¸","e":"á¸","F":"á¸","f":"á¸","G":"á¸ ","g":"á¸¡","H":"á¸¢","h":"á¸£","I":"á¸¬","i":"á¸­","K":"á¸°","k":"á¸±","L":"á¸¶","l":"á¸·","M":"á¸¾","m":"á¸¿","N":"á¹","n":"á¹","O":"á¹","o":"á¹","P":"á¹","p":"á¹","R":"á¹","r":"á¹","S":"á¹ ","s":"á¹¡","T":"á¹ª","t":"á¹«","U":"á¹²","u":"á¹³","V":"á¹¼","v":"á¹½","W":"áº","w":"áº","X":"áº","x":"áº","Y":"áº","y":"áº","Z":"áº","z":"áº"},"â·â¤ââââ¨":{"1":"â ","2":"â¡","3":"â¢","4":"â£","5":"â¤","6":"â¥","7":"â¦","8":"â§","9":"â¨","A":"â¶","B":"â·","C":"â¸","D":"â¹","E":"âº","F":"â»","G":"â¼","H":"â½","I":"â¾","J":"â¿","K":"â","L":"â","M":"â","N":"â","O":"â","P":"â","Q":"â","R":"â","S":"â","T":"â","U":"â","V":"â","W":"â","X":"â","Y":"â","Z":"â","a":"â","b":"â","c":"â","d":"â","e":"â","f":"â","g":"â","h":"â","i":"â","j":"â","k":"â","l":"â","m":"â","n":"â","o":"â","p":"â","q":"â ","r":"â¡","s":"â¢","t":"â£","u":"â¤","v":"â¥","w":"â¦","x":"â§","y":"â¨","z":"â©","0":"âª"},"ðð¤ðððð¨ ðððððð":{"A":"ð","B":"ð","C":"ð","D":"ð","E":"ð","F":"ð","G":"ð","H":"ð","I":"ð","J":"ð","K":"ð","L":"ð","M":"ð","N":"ð","O":"ð","P":"ð","Q":"ð ","R":"ð¡","S":"ð¢","T":"ð£","U":"ð¤","V":"ð¥","W":"ð¦","X":"ð§","Y":"ð¨","Z":"ð©","a":"ð","b":"ð","c":"ð","d":"ð","e":"ð","f":"ð","g":"ð","h":"ð","i":"ð","j":"ð","k":"ð","l":"ð","m":"ð","n":"ð","o":"ð","p":"ð","q":"ð ","r":"ð¡","s":"ð¢","t":"ð£","u":"ð¤","v":"ð¥","w":"ð¦","x":"ð§","y":"ð¨","z":"ð©"},"ï¼¢ï½ï½ï½ï½":{"0":"ï¼","1":"ï¼","2":"ï¼","3":"ï¼","4":"ï¼","5":"ï¼","6":"ï¼","7":"ï¼","8":"ï¼","9":"ï¼",":":"ï¼",";":"ï¼","<":"ï¼","=":"ï¼",">":"ï¼","?":"ï¼","@":"ï¼ ","A":"ï¼¡","B":"ï¼¢","C":"ï¼£","D":"ï¼¤","E":"ï¼¥","F":"ï¼¦","G":"ï¼§","H":"ï¼¨","I":"ï¼©","J":"ï¼ª","K":"ï¼«","L":"ï¼¬","M":"ï¼­","N":"ï¼®","O":" ï¼¯","P":"ï¼°","Q":"ï¼±","R":"ï¼²","S":"ï¼³","T":"ï¼´","U":"ï¼µ","V":"ï¼¶","W":"ï¼·","X":"ï¼¸","Y":"ï¼¹","Z":"ï¼º","[":"ï¼»","]":"ï¼½","_":"ï¼¿","^":"ï¼¾","a":"ï½","b":"ï½","c":"ï½","d":"ï½","e":"ï½","f":"ï½","g":"ï½","h":"ï½","i":"ï½","j":"ï½","k":"ï½","l":"ï½","m":"ï½","n":"ï½","o":"ï½","p":"ï½","q":"ï½","r":"ï½","s":"ï½","t":"ï½","u":"ï½","v":"ï½","w":"ï½","x":"ï½","y":"ï½","z":"ï½"},"ð«ð®ð½ðªð©":{"A":"ð¦ ","B":"ð§ ","C":"ð¨ ","D":"ð© ","E":"ðª ","F":"ð« ","G":"ð¬ ","H":"ð­ ","I":"ð® ","J":"ð¯ ","K":"ð° ","L":"ð± ","M":"ð² ","N":"ð³ ","O":"ð´ ","P":"ðµ ","Q":"ð¶ ","R":"ð· ","S":"ð¸ ","T":"ð¹ ","U":"ðº ","V":"ð» ","W":"ð¼ ","X":"ð½ ","Y":"ð¾ ","Z":"ð¿ ","a":"ð¦ ","b":"ð§ ","c":"ð¨ ","d":"ð© ","e":"ðª ","f":"ð« ","g":"ð¬ ","h":"ð­ ","i":"ð® ","j":"ð¯ ","k":"ð° ","l":"ð± ","m":"ð² ","n":"ð³ ","o":"ð´ ","p":"ðµ ","q":"ð¶ ","r":"ð· ","s":"ð¸ ","t":"ð¹ ","u":"ðº ","v":"ð» ","w":"ð¼ ","x":"ð½ ","y":"ð¾ ","z":"ð¿ ",}};try{angular.module('templates');}catch(e){angular.module('templates',[]);}
angular.module('younow',['templates','bootstrap-templates','younow.core','younow.directives','younow.partner','younow.jobs','younow.info','younow.policy','younow.home','younow.about','younow.gettheapp','younow.lockout','younow.bigsister','younow.streetteam','younow.main','younow.leaderboard','younow.missing','younow.mention','younow.post','younow.moment','younow.paidLikes','younow.momentHighlight','younow.reply','younow.fan-button','younow.guest-button','younow.subscribe-button','younow.seach-bar','younow.user-badge','younow.stripe','younow.miniPlayer','younow.modals.alert','younow.modals.vip','younow.modals.confirm','younow.modals.iframe','younow.modals.login','younow.modals.gate','younow.modals.media-player-modal','younow.modals.partner','younow.modals.agreement-acceptance','younow.modals.profile-summary','younow.modals.subscribe-modal','younow.modals.download-broadcast-modal','younow.modals.trap','younow.modals.youtube-subscribe','younow.modals.share-broadcast-modal','younow.modals.onboarding-modal','younow.modals.buybars','younow.modals.verification','younow.modals.ep','younow.modals.spending-redirect','younow.modals.reconnect-modal','younow.modals.likers','younow.services.ab','younow.services.channel','younow.services.config','younow.services.dashboard','younow.services.session','younow.services.pusher','younow.services.swf','younow.services.utils','younow.services.tracking-pixel','younow.services.trpx','younow.services.shareService','younow.services.eventbus','younow.services.debugger','younow.services.web-rtc','younow.services.guest-service','younow.services.external-streamer','younow.services.webpush','younow.services.store','younow.services.reconnect','younow.services.screen','younow.services.audio-service','ui.router','ui.bootstrap','pascalprecht.translate','lr.upload','angular-embedly','duScroll','mentio','react','dcbImgFallback','chart.js']).value('duScrollGreedy',true).config(["$httpProvider","$compileProvider","$locationProvider","$urlRouterProvider","$sceDelegateProvider","$translateProvider","embedlyServiceProvider","$tooltipProvider","$provide",function myAppConfig($httpProvider,$compileProvider,$locationProvider,$urlRouterProvider,$sceDelegateProvider,$translateProvider,embedlyServiceProvider,$tooltipProvider,$provide){$sceDelegateProvider.resourceUrlWhitelist(['self','**']);$urlRouterProvider.otherwise('/');$locationProvider.html5Mode(true);$translateProvider.useSanitizeValueStrategy(null);$translateProvider.preferredLanguage('en').fallbackLanguage('en');$translateProvider.useStaticFilesLoader({prefix:"https://schwestertester.github.io/",suffix:'.json?v='+window.globalVars.JS_VERSION});embedlyServiceProvider.setKey('d4272e7f48454b81849810f8d9258198');$httpProvider.defaults.useXDomain=true;delete $httpProvider.defaults.headers.common['X-Requested-With'];$provide.factory('cacheInterceptor',function($location){var cacheInterceptor={};cacheInterceptor.params=$location.$$search;cacheInterceptor.request=function(request){if(request.url.indexOf('tpl.html')!==-1&&((cacheInterceptor.params&&cacheInterceptor.params.env==='dev')||$location.host().indexOf('www-vpc')!==-1)){request.headers['Cache-Control']="no-cache";}
return request;};return cacheInterceptor;});$httpProvider.interceptors.push('cacheInterceptor');$httpProvider.interceptors.push(function($location){return{'request':function(config){if(config.url.indexOf('tpl.html')!==-1&&(($location.$$search&&$location.$$search.env==='dev')||$location.host().indexOf('www-vpc')!==-1)){config.headers['Cache-Control']="no-cache";}
return config;}};});$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data|javascript):/);if(window.location.search.indexOf('debugInfoEnabled')==-1&&!window.readCookie('debugInfoEnabled')){$compileProvider.debugInfoEnabled(false);}else{window.createCookie('debugInfoEnabled','true');}
$tooltipProvider.setTriggers({'show':'hide','mouseenter':'mouseleave click'});window.isPrerender=window.navigator.userAgent.indexOf('Prerender')!==-1?true:false;}]).config(["$provide",function($provide){$provide.decorator("$exceptionHandler",['$delegate','$window',function($delegate,$window){return function(exception,cause){if($window.bugsnagAdditionalParams&&$window.Bugsnag){$window.Bugsnag.metaData={lastApiStack:$window.bugsnagAdditionalParams.lastApiStackObject,lastClickStack:$window.bugsnagAdditionalParams.lastClickStackObject};}
if($window.Bugsnag){var trpx_device_id=0;try{trpx_device_id=window.localStorage.getItem('trpx_device_id');}catch(e){trpx_device_id=window.readCookie('trpx_device_id');}
if(!trpx_device_id){window.YouNow.captureError(exception.name);}
$window.Bugsnag.notifyException('#INITIAL_ERROR: '+exception);}
$delegate(exception,cause);};}]);window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments);};ga.l=+new Date();var gaKey=window.location.host==='www.younow.com'?"UA-24148895-1":"UA-24148895-2";window.ga('create',gaKey,'auto');window.ga('require','displayfeatures');}]).config(function(configProvider){configProvider.update();}).run(function(config,$q){var deferred=$q.defer();config.deferred=deferred;config.init=deferred.promise;}).controller('AppCtrl',["$window","$document","$location","$rootScope","$scope","$state","$stateParams","$urlRouter","$translate","$modal","$timeout","$q","config","Api","broadcasterService","session","pusher","twitter","swf","trackingPixel","trpx","debug","eventbus","guestService","webpush","dashboard","webRtc","ab","reconnect",function AppCtrl($window,$document,$location,$rootScope,$scope,$state,$stateParams,$urlRouter,$translate,$modal,$timeout,$q,config,Api,broadcasterService,session,pusher,twitter,swf,trackingPixel,trpx,debug,eventbus,guestService,webpush,dashboard,webRtc,ab,reconnect){config.init.then(function(){reconnect.midstreamReconnectEnabled=ab.variant('BRCST_FEEDBACK')==='B';if(session.user&&(session.user.userId=='751445'||session.user.userId=='1114870'||session.user.userId=='1031400'||session.user.userId=='22722205'||session.user.userId=='5718681')){webRtc.turnEnabled=true;}else{webRtc.turnEnabled=false;}});$timeout(function(){if(window.isPrerender){window.prerenderReady=true;}},12000);$rootScope.httpStatus=window.isPrerender?'200':false;$window.bugsnagAdditionalParams={lastApiStack:[],lastClickStack:[],lastApiStackObject:{},lastClickStackObject:{}};window.YouNow.captureError=function(error){trackingPixel.capture({event:'INITIAL_ERROR',extradata:error.name,field1:Api.browser.name+'_'+Api.browser.version});};$rootScope.$watch(function(){return $rootScope.title;},function(title){if(title&&!window.isPrerender){$scope.pageTitle=title;}});$rootScope.gaPage=function(tr){var nonAncillary=['home','explore','tag','profile','live broadcast','archived broadcast'];var ancillaryOnly=['about','info','policy','jobs'];tr=(typeof tr=='object')?tr:{};tr.path=tr.path||window.location.pathname;if(tr.path!==$rootScope.previousPath){$rootScope.previousPath=tr.path;window.ga('set','page',tr.path);}
if(!tr.pageType){tr.pageType=(trackingPixel.getUserLocation()||'ANCILLARY').toLowerCase();}
if(tr.pageType==='brdcst'){tr.pageType='live broadcast';}
tr.linkType=config.linkType;if(!window.YouNow.track.pageFirst&&!window.waitForPageType){if(tr.pageType&&nonAncillary.indexOf(tr.pageType)===-1){if(ancillaryOnly.indexOf(tr.pageType)===-1){window.YouNow.track.pageFirst='other';return false;}
tr.pageType='ancillary';}
setDimensions(tr);$rootScope.gaEvent('LANDING',tr.pageType);window.YouNow.track.pageFirst=tr.pageType;debug.console(['GA','PAGE'],tr);window.ga('send','pageview');}};$rootScope.gaEvent=function(category,action,label,value,extraFields){var fields={'hitType':'event','eventCategory':category,'eventAction':action};if(label){fields.eventLabel=label;}
if(value){fields.eventValue=value;}
if(extraFields){fields=angular.extend(fields,extraFields);}
debug.console(['GA','EVENT',category.toUpperCase()],{category:category,action:action,label:label,value:value,extraFields:extraFields});window.ga('send',fields);};function setDimensions(tr){window.ga('set','contentGroup3',tr.linkType);window.ga('set','dimension4',tr.linkType);debug.console(['GA','DIMENSION'],{linkType:tr.linkType,contentGroup:'contentGroup3',dimensionGroup:'dimension4'});window.ga('set','contentGroup1',tr.pageType);window.ga('set','dimension1',tr.pageType);debug.console(['GA','DIMENSION'],{pageType:tr.pageType,contentGroup:'contentGroup1',dimensionGroup:'dimension1'});window.ga('set','contentGroup4',tr.linkType+' >> '+tr.pageType);window.ga('set','dimension5',tr.linkType+' >> '+tr.pageType);debug.console(['GA','DIMENSION'],{pageType:tr.linkType+' >> '+tr.pageType,contentGroup:'contentGroup4',dimensionGroup:'dimension5'});window.contentSet=true;}
$scope.$on('$stateChangeStart',function(event,toState,toParams,fromState,fromParams){if(window.globalVars.pageLanguage&&window.isPrerender){config.setTempLanguage(window.globalVars.pageLanguage);window.globalVars.pageLanguage=null;}else{config.keepTempLanguage=false;}
$rootScope.fromState=fromState;if(toState.name.indexOf('explore')!==-1||toState.name.indexOf('channel')!==-1){}else{eventbus.notifySubscribers('broadcaster:beforeChange',{});broadcasterService.updateBc({});}
if(!config.linkType){var path=window.location.pathname;var ancillary=["about","info","policy"];var homeRegex=new RegExp(window.YouNow.UILanguageRegex);if(path.indexOf('/jobs')!==-1){config.linkType='ancillary';}else if(ancillary.indexOf(path.split('/')[1])!==-1){config.linkType='ancillary';}else if(path==='/'){config.linkType='home';}else if(homeRegex.test(path)){config.linkType='home';}else if(path.indexOf('/explore')!==-1&&path[9]!==undefined){config.linkType='tag';}else if(path.indexOf('/explore')!==-1){config.linkType='explore';}else if(path.match(/\//g).length>2){config.linkType='brdcst';}else{config.linkType='profile';}
if(config.linkType==='brdcst'||config.linkType==='profile'||config.linkType==='home'){window.waitForPageType=true;}}
if(session.isBroadcasting){if((toParams.profileUrlString!==session.user.profile||toParams.entityId)){session.preventBroadcastInterrupt();event.preventDefault();}
if(guestService.guest&&guestService.guest.userId==session.user.userId){guestService.preventGuestingInterrupt();event.preventDefault();}}
if(!Api.store('younowOldEnough')){var lockout=Api.store('younowAgeLockout');if(lockout&&lockout!=="0"&&toState.name!='lockout'){if(Number(lockout)>(new Date().getTime()/1000)){event.preventDefault();$state.go('lockout');}}}
if(!session.isBroadcasting&&config.params){if(toParams.profileUrlString==='about'){$state.go('about');config.linkType='ancillary';event.preventDefault();}
if(config.params.profile){$modal.profileSummary(config.params.profile);delete config.params.profile;}
if(config.params.channel){broadcasterService.switchBroadcaster(config.params.channel);event.preventDefault();delete config.params.channel;}
if(config.params.broadcastid){$modal.mediaPlayerModal(config.params.broadcastid);delete config.params.broadcastid;}
if(config.params.featured||config.params.tag){var context=config.params.featured||config.params.tag;$rootScope.gaPage({path:'/featured/'+context});broadcasterService.featuredBroadcaster(context);delete config.params[context];}}});$scope.$on('$stateChangeSuccess',function(event,toState,toParams,fromState,fromParams){$rootScope.fromState=fromState;if(config.UILanguageOriginal){if(!config.keepTempLanguage){config.resetTempLanguage();}else{config.keepTempLanguage=false;}}
if(!session.referralData){session.inviteString=$stateParams.inviteString||'';session.srcId=$stateParams.srcId||'';session.profileUrlString=toParams.profileUrlString;session.referralData=true;}
if((!dashboard.tags||!dashboard.users)){dashboard.getTrending();}
if(!window.YouNow.track.pageFirst){$rootScope.gaPage();}
$document.scrollTop(0);$rootScope.title=$rootScope.newTitle||'YouNow | Live Stream Video Chat | Free Apps on Web, iOS and Android';if($window.Bugsnag){$window.Bugsnag.refresh();}});if(config.settings.UseBroadcastThumbs){config.broadcasterThumb=config.settings.ServerCDNBaseUrl+"/php/api/getBroadcastThumb/broadcastId=";}else{config.broadcasterThumb=config.imageApis.thumb;}
if(!window.isPrerender){session.getSession().success(function(data){config.deferred.resolve();$modal.ageGate().then(function(){if(data.userId===0){var silent=session.silentAuth();if(silent){silent.catch(function(response){session.forceLogin('REOPEN');});}else{if(session.profileUrlString){session.forceLogin('LINK');}else{session.forceLogin('REOPEN');}}}});pusher.init();});}else{session.user={'userId':0};config.deferred.resolve();pusher.init();}
window.YouNow.loadingTime.younowReady=(Date.now()-window.YouNow.loadingTime.startTime);config.imageApis={base:config.settings.ServerCDNBaseUrl,image:config.settings.ServerCDNBaseUrl+'/images',imageAssets:config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images',thumb:Api.generateDynamicApi('CHANNEL_IMAGE'),nothumb:'https://ynassets.younow.com/nothumb.jpg',nocover:'https://ynassets.younow.com/nocover.jpg',broadcast:Api.generateDynamicApi('BROADCAST_THUMB'),snapshot:Api.generateDynamicApi('GET_SNAPSHOT')+'/id=',media:Api.generateDynamicApi('POST_MEDIA')+'/channelId=',moment:Api.generateDynamicApi('MOMENT_THUMB'),cover:Api.generateDynamicApi('CHANNEL_COVER'),gifts:Api.generateDynamicApi('IMAGE_GIFTS_GOODIES')+'/',dailySpin:config.settings.DailySpinBaseUrl,background:function(id,type,refresher){type=type||'Image';var extra=type=='Image'?', url('+config.imageApis.nothumb+')':', url('+config.imageApis.nocover+')';return'background:url('+config.imageApis.channelImage(id,type,refresher)+')'+extra+' no-repeat center center; background-size: cover;';},channelImage:function(id,type,refresher){refresher=refresher||'';if(type=='Cover'){return config.imageApis.cover+'/'+id+'/'+id+'.jpg'+refresher;}else if(type=='Image'){return config.imageApis.thumb+'/'+id+'/'+id+'.jpg'+refresher;}}};$scope.cdn=config.imageApis;$modal.loginModal=function(hard,source,data){if(window.isPrerender){return false;}
var modal=$modal.open({templateUrl:'angularjsapp/src/app/components/login-modal/login-modal.tpl.html',controller:'LoginModalCtrl',windowClass:'social-login-modal',backdrop:hard?'static':true,keyboard:hard?false:true,resolve:{soft:function(){return!hard;},source:function(){return source;},data:function(){return data;}}});modal.result.catch(function(){if(source==='LINK'){if($state.is('main.channel.detail')){source=broadcasterService.async?'LINK_PROFILE':'LINK_LIVE';}else{source="LINK_OTHER";}}
$rootScope.gaEvent('LOGIN','DISMISS',source);});return modal;};$modal.profileSummary=function(channelId,params,state){params=params||{};params.channelId=channelId;params.userId=session.loggedIn?session.user.userId:0;params.state=state||false;if(broadcasterService.broadcaster&&broadcasterService.broadcaster.broadcastId){params.broadcastId=broadcasterService.broadcaster.broadcastId;if(broadcasterService.broadcaster.userId===channelId){params.broadcastRelated=1;}}
var modal=$modal.open({templateUrl:'angularjsapp/src/app/components/profile-summary/profile-summary.tpl.html',controller:'ProfileSummaryCtrl',windowClass:'profile-summary-wrapper',resolve:{params:function(){return params;}}});return modal;};$modal.youtube=function(username){return $modal.open({templateUrl:'angularjsapp/src/app/components/youtube-subscribe/youtube-subscribe.tpl.html',controller:'YoutubeSubscribeCtrl',windowClass:'youtube-modal',resolve:{username:function(){return username;}}});};$modal.likersModal=function(momentId,likerStatus){var params={momentId:momentId,likerStatus:likerStatus};return $modal.open({templateUrl:'angularjsapp/src/app/components/likers-modal/likers-modal.tpl.html',controller:"LikersModalCtrl",controllerAs:"vm",windowClass:'likers-modal',resolve:{params:function(){return params;}}});};$modal.subscribeModal=function(channelId,params){params=params||{};params.channelId=channelId;params.userId=session.loggedIn?session.user.userId:0;if(broadcasterService.broadcaster&&broadcasterService.broadcaster.broadcastId){params.broadcastId=broadcasterService.broadcaster.broadcastId;if(broadcasterService.broadcaster.userId===channelId){params.broadcastRelated=1;}}
if(session.user.spendingDisabled){Api.showTopNotification('Spending disabled. Please contact YouNow Support.');return false;}
var modal=$modal.open({templateUrl:'angularjsapp/src/app/components/subscribe-modal/subscribe.tpl.html',controller:'SubscribeModalCtrl',windowClass:'subscribe-modal-wrapper',resolve:{params:function(){return params;}}});return modal;};$modal.downloadBroadcastModal=function(params){var modal=$modal.open({templateUrl:'angularjsapp/src/app/components/download-broadcast-modal/download-broadcast.tpl.html',controller:'DownloadBroadcastModalCtrl',windowClass:'subscribe-modal-wrapper',controllerAs:"vm",resolve:{params:function(){return params;}}});return modal;};$modal.mediaPlayerModal=function(id,params,broadcast){var modal=$modal.open({templateUrl:'angularjsapp/src/app/components/media-player-modal/media-player-modal.tpl.html',controller:'MediaPlayerModalCtrl',windowClass:'media-player-modal',resolve:{broadcastId:function(){return id;},params:function(){return params||{};},broadcast:function(){return broadcast||{};}}});modal.result.catch(function(data){});return modal;};$modal.iframe=function(src,extraClass){var windowClass=extraClass?'iframe-modal '+extraClass:'iframe-modal';return $modal.open({templateUrl:'angularjsapp/src/app/components/iframe-modal/iframe-modal.tpl.html',controller:'IframeModalCtrl',windowClass:windowClass,resolve:{src:function(){return src;}}});};$modal.alert=function(message){return $modal.open({templateUrl:'angularjsapp/src/app/components/alert-modal/alert-modal.tpl.html',controller:'AlertModalCtrl',windowClass:'alert-modal',resolve:{message:function(){return message;}}});};$modal.vip_welcome=function(message){return $modal.open({templateUrl:'angularjsapp/src/app/components/vip-modal/welcome-modal.tpl.html',controller:'VipModalCtrl',windowClass:'vip-modal',resolve:{message:function(){return message;}}});};$modal.gate=function(data){return $modal.open({templateUrl:'angularjsapp/src/app/components/gate-modal/gate-modal.tpl.html',controller:'GateModalCtrl',windowClass:'gate-modal',backdrop:'static',keyboard:false,resolve:{data:function(){return data;}}});};$modal.ageGate=function(){var deferred=$q.defer();var language=(window.navigator.language||window.navigator.browserLanguage||window.navigator.systemLanguage||window.navigator.userLanguage).substr(0,2)||'en';if((language=='de'||language.indexOf('de-')!=-1)&&!Api.store('younowOldEnough')&&!$rootScope.skipAgeGate){$rootScope.skipAgeGate=false;$modal.gate({title:"agegate_modal_title",message:"agegate_modal_message",decline:"agegate_modal_under",confirm:"agegate_modal_over",}).result.then(function(response){if(!response){$state.go('lockout');var lockoutDate=Math.floor(new Date().getTime()/1000)+(24*60*60);Api.store('younowAgeLockout',lockoutDate);}else{Api.store('younowOldEnough',true);deferred.resolve();}});}else{deferred.resolve();}
return deferred.promise;};$modal.trap=function(type,user,source,callback){return $modal.open({templateUrl:'angularjsapp/src/app/components/trap-modal/trap-modal.tpl.html',controller:'TrapModalCtrl',windowClass:'trap-modal',resolve:{data:function(){return{user:user,type:type,callback:callback};},source:function(){return source;}}});};$modal.partner=function(){return $modal.open({templateUrl:'angularjsapp/src/app/components/partner-modal/partner-modal.tpl.html',controller:'PartnerModalCtrl',windowClass:'partner-modal'});};$modal.agreementAcceptance=function(){return $modal.open({templateUrl:'angularjsapp/src/app/components/agreement-acceptance-modal/agreement-acceptance-modal.tpl.html',controller:'AgreementAcceptanceModalCtrl',windowClass:'agreement-acceptance-modal',backdrop:'static',keyboard:false});};$modal.onboarding=function(){ab.ready.then(function(){var variant=ab.variant('ONBOARDING_DEJAVU');if(variant==='A'){return false;}
return $modal.open({templateUrl:'angularjsapp/src/app/components/onboarding-modal/onboarding-modal.tpl.html',controllerAs:'vm',controller:'OnboardingModalCtrl',windowClass:'onboarding-modal',backdrop:'static',keyboard:false,resolve:{data:function(){return{variant:variant};}}});});};$modal.shareBroadcast=function(message,type){return $modal.open({templateUrl:'angularjsapp/src/app/components/share-broadcast-modal/share-broadcast-modal.tpl.html',controller:'ShareBroadcastModalCtrl',windowClass:'share-broadcast-ctrl',resolve:{data:function(){return{message:message,type:type};}}});};$modal.verification=function(params,source){return $modal.open({templateUrl:'angularjsapp/src/app/components/verification-modal/verification-modal.tpl.html',controller:'VerificationModalCtrl',windowClass:'buybars-modal',resolve:{data:function(){return{params:params,source:source};}}});};$modal.buyBars=function(spendingDisabled){if(spendingDisabled||spendingDisabled===undefined){var deferred=$q.defer();deferred.reject('suspending disabled');Api.showTopNotification('Account purchasing disabled. Please email support@younow.com to review this matter.');var result={result:deferred.promise};return result;}
var modal=$modal.open({templateUrl:'angularjsapp/src/app/components/buybars-modal/buybars.tpl.html',controller:'BuybarsModalCtrl',windowClass:'buybars-modal'});return modal;};$modal.ccVerified=function(data){var modal=$modal.open({templateUrl:'angularjsapp/src/app/components/verification-modal/cc-verified.tpl.html',controller:'CcVerifiedModalCtrl',windowClass:'buybars-modal '+data.type,resolve:{data:function(){return{type:data.type,data:data.data};}}});return modal;};$modal.epModal=function(state){var template='angularjsapp/src/app/components/editors-pick-modals/ep-congrats.tpl.html';if(state==='expired'){template='angularjsapp/src/app/components/editors-pick-modals/ep-expired.tpl.html';}
var modal=$modal.open({templateUrl:template,controller:'EpModalCtrl',windowClass:'ep-modal',resolve:{data:function(){return{state:state};}}});return modal;};$modal.spendingFailed=function(params){return $modal.open({templateUrl:'angularjsapp/src/app/components/spending-redirect-modal/failed.tpl.html',controller:'SpendingRedirectModalCtrl',controllerAs:'vm',windowClass:'spending-redirect-modal',resolve:{params:function(){return params;}}});};$modal.spendingRedirect=function(){var modal=$modal.open({templateUrl:'angularjsapp/src/app/components/spending-redirect-modal/spending-redirect-modal.tpl.html',controller:'SpendingRedirectModalCtrl',controllerAs:'vm',windowClass:'spending-redirect-modal',resolve:{params:function(){return{};}}});return modal;};$modal.reconnect=function(){var modal=$modal.open({templateUrl:'angularjsapp/src/app/components/reconnect-modal/reconnect-modal.tpl.html',controller:'ReconnectModalCtrl',controllerAs:'vm',windowClass:'reconnect-modal'});return modal;};var initialVol=80;var newVol=Api.store('younowVol');if(newVol!==undefined&&newVol!==null&&!isNaN(Number(newVol))){initialVol=Number(newVol);}
Api.store('younowVol',initialVol);trackingPixel.startPinging();$document.on("click",function(e){if(!e.target.outerHTML){return false;}
Api.addToStack(e.target.outerHTML.substring(0,100),'lastClickStack');});}]);angular.module('younow.directives',[]).directive('onAnimationEnd',function(config){return{restrict:'A',scope:{onAnimationEnd:'&'},link:function(scope,elem,attrs){if(!config.animationsEvent){var a;var animations={"animation":"animationend","OAnimation":"oAnimationEnd","MozAnimation":"animationend","WebkitAnimation":"webkitAnimationEnd"};for(a in animations){if(elem[0].style[a]!==undefined){config.animationsEventEnd=animations[a];break;}}}
elem.on(config.animationsEventEnd,function(){if(scope.onAnimationEnd){scope.onAnimationEnd();}
elem.addClass('animation-ended');});}};});window.YouNow.loadingTime.event=window.document.createEvent("Event");window.YouNow.loadingTime.event.initEvent("loadTime",true,false);window.YouNow.loadingTime.outstandingRequests=0;window.YouNow.loadingTime.request=function(params){if(window.YouNow.loadingTime.timeout){window.clearTimeout(window.YouNow.loadingTime.timeout);}
window.YouNow.loadingTime.outstandingRequests++;};window.YouNow.loadingTime.response=function(params){if(window.YouNow.loadingTime.timeout){window.clearTimeout(window.YouNow.loadingTime.timeout);}
window.YouNow.loadingTime.outstandingRequests--;window.YouNow.loadingTime.timeout=window.setTimeout(window.YouNow.loadingTime.track,250);};window.YouNow.loadingTime.track=function(params){if(!window.YouNow.loadingTime.outstandingRequests){window.document.dispatchEvent(window.YouNow.loadingTime.event);window.YouNow.loadingTime.request=undefined;window.YouNow.loadingTime.response=undefined;window.YouNow.loadingTime.track=undefined;}};angular.module('younow.activity-panel',['ui.router']).directive('activityPanel',["$http","$window","broadcasterService","Api","swf","session","config","trackingPixel","guestService",function($http,$window,broadcasterService,Api,swf,session,config,trackingPixel,guestService){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/activity-panel/activity-panel.tpl.html',scope:{onlineFriends:'=',source:'@'},link:function(scope){scope.panel={};scope.panel.cdn={thumb:config.imageApis.thumb,nothumb:config.imageApis.nothumb,base:config.settings.ServerCDNBaseUrl};scope.panel.panelCollapsed=false;scope.panel.trackClickFriend=function(friend,source,$index){trackingPixel.trackClick(source.toUpperCase(),{doorid:friend.userId,field1:(friend.status==2?'LIVE':'VIEWING'),sourceid:(($index>=0)?$index+1:0)});};scope.panel.changeBroadcaster=function(channel){if(swf.settingUpBroadcast){session.isBroadcasting=true;}
if(session.isBroadcasting||(guestService.guest&&guestService.guest.userId==session.user.userId)){session.preventBroadcastInterrupt();return false;}
if((swf.broadcast&&broadcasterService&&!broadcasterService.async)&&channel==broadcasterService.broadcaster.userId){return false;}
broadcasterService.switchBroadcaster(channel);};}};}]);angular.module('younow.modals.agreement-acceptance',[]).controller('AgreementAcceptanceModalCtrl',["$scope","$modalInstance","session","$location","$state","Api",function($scope,$modalInstance,session,$location,$state,Api){$scope.genTerms=Api.generateDynamicApi('URL_TERMS');$scope.partnerAgreement=Api.generateDynamicApi('URL_PARTNER_AGREEMENT');$scope.partner=false;$scope.session=session;$scope.acceptParams={userId:session.user.userId,termsOfUseAgreement:'',partnerAgreement:''};$scope.checkAgreementAction=function(hasAgreed){if(hasAgreed===false){$modalInstance.close();session.logout();}else{if(session.user.needsToConfirmTermsOfUse===true&&$scope.partner===true){$scope.acceptParams.termsOfUseAgreement='1';$scope.acceptParams.partnerAgreement='1';}
if(session.user.needsToConfirmTermsOfUse===false&&$scope.partner===true){$scope.acceptParams.termsOfUseAgreement='0';$scope.acceptParams.partnerAgreement='1';}
if(session.user.needsToConfirmTermsOfUse===true&&$scope.partner===false){$scope.acceptParams.termsOfUseAgreement='1';$scope.acceptParams.partnerAgreement='0';}
var postRequest=Api.post('CHANNEL_ACCEPT_AGREEMENT',$scope.acceptParams);postRequest.then(function(response){});$modalInstance.close();if($scope.partner===true){$state.go('/partners');}else{$state.go('main.channel.detail');}}};var checkPartnership=function(user){if(user.partner===6||user.partner===7){$scope.partner=true;}};checkPartnership(session.user);}]);angular.module('younow.modals.alert',[]).controller('AlertModalCtrl',["$scope","message","Api","$filter",function($scope,message,Api,$filter){try{$scope.message=Api.trustedHTML(Api.linkify($filter('translate')(message)));}catch(e){$scope.message=Api.trustedHTML(Api.linkify(message));}}]);angular.module('younow.channel.audience-panel',[]).controller('AudiencePanelCtrl',["$scope","$modal","$element","$interval","$timeout","session","swf","config","Api","trackingPixel",function($scope,$modal,$element,$interval,$timeout,session,swf,config,Api,trackingPixel){var vm=this,audiencelistEl=angular.element(document.getElementById('audiencelist')),audiencePages,previousScroll=0,scrollDirection=1,messageAnimation=[];vm.swf=swf;vm.session=session;vm.baseImageUrlv3=config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images/icons_v3';vm.thumb=config.imageApis.thumb;vm.noThumb=config.imageApis.nothumb;vm.messageNumberInView=0;vm.globalVars=window.globalVars;vm.config=config;swf.audienceLists.currentPage=0;trackingPixel.trackClick('AUDIENCE');vm.openProfileSummary=function(id,source){$modal.profileSummary(id,{source:source});};vm.scrollLoadAudience=function(isRefresh,pageNum){if(swf.audienceLists.hasNext){if(!swf.audienceLists.loading&&!isRefresh){vm.swf.getAudience(pageNum,20,false);}}};vm.clickToRefresh=function(){vm.swf.getAudience(swf.audienceLists.currentPage,20,true);};audiencelistEl.on('scroll',function(){var pages=audiencelistEl.children(),totalHeight=audiencelistEl[0].scrollTop;if(previousScroll<audiencelistEl[0].scrollTop){scrollDirection=1;}
if(previousScroll>audiencelistEl[0].scrollTop){scrollDirection=0;}
previousScroll=audiencelistEl[0].scrollTop;if((audiencelistEl[0].scrollHeight-Math.round(audiencelistEl.scrollTop()))<=audiencelistEl[0].offsetHeight){vm.scrollLoadAudience(false,pages.length,false);}
if(audiencelistEl[0].scrollTop===0){swf.audienceLists.currentPage=0;}
for(var i=0;i<pages.length;i++){var page=angular.element(pages[i]),top=page.prop('offsetTop');if(audiencelistEl.scrollTop()>top&&audiencelistEl.scrollTop()<(950*(i+1))){swf.audienceLists.currentPage=i;if(scrollDirection===0&&swf.audienceLists.prevLoadedPage>swf.audienceLists.currentPage){swf.getAudience(swf.audienceLists.currentPage,20,true);}
if(scrollDirection===1&&swf.audienceLists.prevLoadedPage<swf.audienceLists.currentPage){swf.getAudience(swf.audienceLists.currentPage,20,true);}}}});$scope.$on('$destroy',function(){audiencelistEl.off('scroll');});}]).directive('audiencePanel',["broadcasterService",function(broadcasterService){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/audience-panel/audience-panel.tpl.html',controller:'AudiencePanelCtrl',controllerAs:'vm',scope:{},link:function(scope,element,attrs,controller){var vm=controller;angular.element(element).on('$destroy',function(){if(vm.swf.activeChatTab!=='Chat'&&broadcasterService.async===true){vm.swf.activeChatTab='Chat';}
vm.swf.audienceLists=null;vm.swf.audienceLists={};});}};}]).directive('audienceMessage',["$interval","swf","session","$filter",function($interval,swf,session,$filter){return{restrict:'A',scope:{viewer:'='},link:function(scope,element,attrs,controller){var vm=controller,messageAnimation,isBroadcaster=swf.broadcast.userId===session.user.userId;scope.viewer.messages=[];scope.viewer.subscriptionDate=$filter('date')(scope.viewer.subscriptionDateUNIX,'MM/dd/yyyy');if(scope.viewer.subscriptionType&&scope.viewer.messages.length<3){scope.viewer.messages.push('subscriber');}
if(scope.viewer.fanRank!==-1&&scope.viewer.messages.length<3){scope.viewer.messages.push('fanRank');}
if(scope.viewer.fanRank===-1&&isBroadcaster&&scope.viewer.messages.length<3){scope.viewer.messages.push('isFan');}
if(scope.viewer.birthdayCopy&&isBroadcaster&&scope.viewer.messages.length<3){scope.viewer.messages.push('birthday');}
if(scope.viewer.gifts>0&&scope.viewer.messages.length<3){scope.viewer.messages.push('gifts');}
if(scope.viewer.viewersRs>0&&scope.viewer.messages.length<3){scope.viewer.messages.push('viewersRs');}
if((scope.viewer.location.city.length>0||scope.viewer.location.state.length>0||scope.viewer.location.country.length>0)&&scope.viewer.messages.length<3){scope.viewer.messages.push('location');}
if(scope.viewer.fans&&scope.viewer.messages.length<3){scope.viewer.messages.push('fans');}
function startAudienceMessageInterval(){scope.viewer.messageNumberInView=0;rotateMessages(scope.viewer.messages[scope.viewer.messageNumberInView]);messageAnimation=$interval(function(){if(scope.viewer.messageNumberInView===scope.viewer.messages.length-1){scope.viewer.messageNumberInView=0;}else{scope.viewer.messageNumberInView++;}
rotateMessages(scope.viewer.messages[scope.viewer.messageNumberInView]);},3500);}
function rotateMessages(message){for(var i=0;i<scope.viewer.messages.length;i++){if(scope.viewer.messages[i]===message){angular.element(element).addClass(scope.viewer.messages[i]+'-active');}else{angular.element(element).removeClass(scope.viewer.messages[i]+'-active');}}}
startAudienceMessageInterval();scope.$on('$destroy',function(){$interval.cancel(messageAnimation);});}};}]);angular.module('younow.modals.buybars',[]).controller('BuybarsModalCtrl',["$scope","$modalInstance","session","Api","$interval","$translate","config","$filter","$rootScope","$timeout","$modal","trpx",function($scope,$modalInstance,session,Api,$interval,$translate,config,$filter,$rootScope,$timeout,$modal,trpx){$scope.Api=Api;$scope.session=session;$scope.activeItem=false;$scope.config=config;$scope.disableBuy=true;var paypalwindow,paypalToken;$scope.paypalCheckout=function(){var wLeft=window.screenLeft?window.screenLeft:window.screenX;var wTop=window.screenTop?window.screenTop:window.screenY;var left=wLeft+(window.innerWidth/2)-(800/2);var top=wTop+(window.innerHeight/2)-(650/2);paypalwindow=window.open(config.settings.PayPalIncontextUrl+paypalToken,"",'width=800, height=650, top='+top+', left='+left);var watch=$scope.$watch(function(){return paypalwindow.location;},function(newVal,oldVal){try{if(newVal.pathname=="/api/paypal/paypalReturn.php"){var paypalDetailsAvailable=$interval(function(){if(paypalwindow.getPayPalDetails){var details=paypalwindow.getPayPalDetails();paypalwindow.close();storeBuyHandler({data:details});$interval.cancel(paypalDetailsAvailable);trpx.capture({'event':'PURCHASE_VALIDATE_REQUEST','productsku':$scope.activeItem.SKU,'productname':$scope.activeItem.name,'productprice':$scope.activeItem.price,'productamount':$scope.activeItem.amount,'signature':paypalToken},trpx.captureGroups.buybars);}},300);watch();}
if(newVal.pathname=="/api/paypal/paypalCancel.php"){paypalwindow.close();watch();}}catch(err){}});};$scope.buyRequest=function(token,vendor){var params={data:$scope.activeItem.price,signature:token,sku:$scope.activeItem.SKU,userId:session.user.userId,device_data:vendor=='braintree'?undefined:document.getElementById('device_data').value,vendor:vendor};if(window.location.protocol==='http:'){params.s=session.user.session;}
$scope.disableBuy=true;trpx.capture({'event':'PURCHASE_VALIDATE_REQUEST','productsku':$scope.activeItem.SKU,'productname':$scope.activeItem.name,'productprice':$scope.activeItem.price,'productamount':$scope.activeItem.amount,'signature':token},trpx.captureGroups.buybars);Api.post('STORE_BUY',params).then(function(response){storeBuyHandler(response,token);});};Api.get('STORE_PRODUCTS',{store:'web',lang:config.UILanguage},true).then(function(response){if(response.data.errorCode===6032){$modalInstance.close();$timeout(function(){$modal.spendingFailed({purchaseItem:'bars'});},200);}
else if(response.data.errorCode){$modalInstance.close();}
for(var ea in response.data.products){response.data.products[ea].amount=parseInt(response.data.products[ea].amount);response.data.products[ea].bonusCoins=response.data.products[ea].amount*3;response.data.products[ea].bonusBars=Math.floor(response.data.products[ea].amount*0.05);}
$scope.products=response.data.products;});$scope.cancel=function(){$modalInstance.dismiss('Modal (buy bars) closed');};$scope.toggleActiveItem=function(item){if(item){$scope.gettingToken=true;}else{trpx.capture({'event':'PURCHASE_CANCELED','productsku':$scope.activeItem.SKU,'productname':$scope.activeItem.name,'productprice':$scope.activeItem.price,'productamount':$scope.activeItem.amount},trpx.captureGroups.buybars);}
if($scope.activeItem.buying){$scope.activeItem.buying=false;$scope.modalLarge=false;}else{getPurchaseToken(item).then(function(){$scope.gettingToken=false;$scope.activeItem=item;$scope.activeItem.buying=true;var followHeight;followHeight=$interval(function(){if(angular.element(document.getElementById('braintree-form'))[0]){if(angular.element(document.getElementById('braintree-form'))[0].offsetHeight>=250){$scope.modalLarge=true;}}else{$interval.cancel(followHeight);$scope.modalLarge=false;}},500);});}};$scope.$on('$destroy',function(){if($scope.activeItem&&!$scope.activeItem.successfulBuy){trpx.capture({'event':'PURCHASE_CANCELED','productsku':$scope.activeItem.SKU,'productname':$scope.activeItem.name,'productprice':$scope.activeItem.price,'productamount':$scope.activeItem.amount},trpx.captureGroups.buybars);}});function getPurchaseToken(item){trpx.capture({'event':'PURCHASE_REQUEST','productsku':item.SKU,'productname':item.name,'productprice':item.price,'productamount':item.amount},trpx.captureGroups.buybars);var params={userId:session.user.userId,amount:item.price,name:item.name,sku:item.SKU,origin:'webBars',htdid:Api.store('_ht_did')};if(window.location.protocol==='http:'){params.s=session.user.session;}
var apiResponse=Api.post('STORE_PURCHASE_TOKEN',params);apiResponse.then(function(response){if(response.data.vendor=='paypal'){$scope.vendor='payPal';$scope.copy={title:'Get YouNow Bars',subtitle:'Bars allow you to buy premium gifts for the broadcaster.'};}else{$scope.vendor='braintree';$scope.copy={title:'Select Payment Method',subtitle:'Enter your credit card information below.'};}
if(response.data.errorCode>0){trpx.capture({'event':'PURCHASE_FAILURE','productsku':item.SKU,'productname':item.name,'productprice':item.price,'productamount':item.amount,'errorcode':response.data.errorCode},trpx.captureGroups.buybars);}
if(response.data.errorCode===6020&&response.data.ccVerificationSaleDetails){var parsedResult=JSON.parse(response.data.ccVerificationSaleDetails);$modalInstance.close();$timeout(function(){$modal.verification(parsedResult,{source:'buyBars'});},200);}
else if(response.data.errorCode===6021){$modalInstance.close();$timeout(function(){$modal.ccVerified({type:'verified-failed'});},200);}
else if(response.data.errorCode===6032){$modalInstance.close();$timeout(function(){$modal.spendingFailed({purchaseItem:'bars'});},200);}
else if(response.data.errorCode){$modalInstance.close();}
else if(response.data.errorCode===0&&document.getElementById('braintree-dropin')&&$scope.vendor=='braintree'&&$scope.disableBuy){window.braintree.setup(response.data.token,'dropin',{container:'braintree-dropin',paymentMethodNonceReceived:function(event,nonce){trpx.capture({'event':'PURCHASE_SUCCESS','productsku':item.SKU,'productname':item.name,'productprice':item.price,'productamount':item.amount,'signature':nonce},trpx.captureGroups.buybars);$scope.buyRequest(nonce,'braintree');}});if(window.BraintreeData){var env=window.BraintreeData.environments[config.settings.BTEnv].withId(config.settings.BTKountId);window.BraintreeData.setup(config.settings.BTMerchantId,'braintree-form',env);}}
if(response.data.token&&$scope.vendor=='payPal'){paypalToken=response.data.token;}
if($scope.disableBuy){$scope.disableBuy=false;}});return apiResponse;}
function storeBuyHandler(response,token){$scope.activeItem.successfulBuy=true;if(response.data.errorCode===0&&response.data.bars){session.user.vault.webBars=Number(response.data.bars);trpx.capture({'event':'PURCHASE_VALIDATE_SUCCESS','productsku':$scope.activeItem.SKU,'productname':$scope.activeItem.name,'productprice':$scope.activeItem.price,'productamount':$scope.activeItem.amount,'signature':token},trpx.captureGroups.buybars);if(response.data.isVerificationSale&&response.data.ccVerificationSaleDetails){var saleDetails=response.data.ccVerificationSaleDetails;saleDetails.justPurchased=true;$modalInstance.close();$timeout(function(){$modal.verification(saleDetails,{source:'buyBars'});},200);}else{$modalInstance.close($scope.activeItem);Api.showTopNotification('Purchase successful. You now have '+session.user.vault.webBars+' bars!','success');if(response.data.vipSpenderMessage){$modal.vip_welcome(response.data.vipSpenderMessage);}}}else if(response.data.errorCode===0&&!response.data.bars){$modalInstance.dismiss(response.data.errorCode);Api.showTopNotification('Oops! Something went wrong. Please email support@younow.com to review this matter.');}else{$modalInstance.dismiss(response.data.errorCode);if(response.data.errorCode===6013&&response.data.paymentType!="paypal_account"){$modal.spendingRedirect();}else{Api.showTopNotification(response.data.errorMsg);}}
if(!response.data.bars||response.data.errorCode>0){trpx.capture({'event':'PURCHASE_VALIDATE_FAILURE','productsku':$scope.activeItem.SKU,'productname':$scope.activeItem.name,'productprice':$scope.activeItem.price,'productamount':$scope.activeItem.amount,'signature':token},trpx.captureGroups.buybars);}}}]);angular.module('younow.channel.chat-panel',[]).directive('chatPanel',function($interval,broadcasterService,swf,$state,$timeout,$q){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/chat/chat-panel.tpl.html',link:function(scope,elem,attr){var vm=scope.$parent.vm,lastScrollTime=0,lastMousemoveTime=0,trimChat=function(chatArray,total){return chatArray.splice(chatArray.length-total,total);},scrollChatInterval;function reloadChatUI(){vm.chatWindow=angular.element(document.getElementById('chatcomments'));vm.topfanSlider=document.getElementById('topfan-slider');vm.nextFanBtn=angular.element(document.getElementById('nextfan'));vm.prevFanBtn=angular.element(document.getElementById('prevfan'));vm.topfanSliderEl=angular.element(vm.topfanSlider);vm.isScrolling=false;vm.lastHeight=1;vm.chatWindow.off('scroll');vm.chatWindow.on('scroll',function(){lastScrollTime=new Date().getTime();});vm.chatWindow.off('mouseover');vm.chatWindow.on('mouseover',function(){lastMousemoveTime=new Date().getTime();});}
function scrollChat(params){params=params||{};if($state.current.name!=='main.channel.detail'||broadcasterService.async===true){$interval.cancel(scrollChatInterval);}
if(vm.chatWindow[0]===undefined){reloadChatUI();return false;}
if(vm.pauseChat){return false;}
var currentTime=new Date().getTime();if(vm.isScrolling){return false;}
if(!params.instant){if((currentTime-lastMousemoveTime<2000)||(currentTime-lastScrollTime<2000)){return false;}}
if(swf.broadcast&&swf.broadcast.comments.length>100){swf.broadcast.comments=trimChat(swf.broadcast.comments,80);}
var scrollDuration=1000;if(params.instant){scrollDuration=0;}
var divHeight=vm.chatWindow[0].clientHeight;var contentHeight=vm.chatWindow[0].scrollHeight;var oldScrollBottom=vm.chatWindow.scrollTop()+divHeight;var newScrollTop=contentHeight-divHeight;if(contentHeight>oldScrollBottom){if((contentHeight-oldScrollBottom)<380){var multiplier=(contentHeight-oldScrollBottom)/380;scrollDuration*=multiplier;}
vm.chatWindow.scrollTopAnimated(newScrollTop,scrollDuration);}}
function scrollInit(params){params=params||{};reloadChatUI();$interval.cancel(scrollChatInterval);if(params.instant){scrollChat();}
scrollChatInterval=$interval(scrollChat,1000);}
scope.$on("$destroy",function(){if(scrollChatInterval){$interval.cancel(scrollChatInterval);}});if(swf.broadcast&&swf.broadcast.comments.length&&swf.broadcast.comments.length>50){swf.broadcast.comments=trimChat(swf.broadcast.comments,50);}
scrollInit({instant:true});}};});angular.module('younow.channel.chat',[]).factory('chatService',function(){var service={};service.expose=function(name,callback){service[name]=callback;};service.destroyExposed=function(name){if(service[name]){delete service[name];}};return service;}).controller('ChatCtrl',["$rootScope","$scope","$interval","$timeout","$modal","broadcasterService","session","swf","config","Api","shareService","eventbus","trackingPixel","guestService","$filter","chatService","$translate","trpx","webRtc","store",function($rootScope,$scope,$interval,$timeout,$modal,broadcasterService,session,swf,config,Api,shareService,eventbus,trackingPixel,guestService,$filter,chatService,$translate,trpx,webRtc,store){var vm=this,postedComment,scrollChatToBottom,fanMailTimer,timeUntilPost,chatcoolDownGift,cooldownTimer;vm.chatWindow=angular.element(document.getElementById('chatcomments'));vm.globalChatWindow=null;setInterval(function(){if(vm.globalChatWindow==null)
{vm.globalChatWindow=document.getElementById('globalchatcomments');if(vm.globalChatWindow!=null)
{vm.globalChatWindow.scrollTop=vm.globalChatWindow.scrollHeight+vm.globalChatWindow.offsetHeight;vm.globalChatWindow.addEventListener("DOMSubtreeModified",function(){vm.globalChatWindow.scrollTop=vm.globalChatWindow.scrollHeight+vm.globalChatWindow.offsetHeight;});}}},500);vm.topfanSlider=document.getElementById('topfan-slider');vm.nextFanBtn=angular.element(document.getElementById('nextfan'));vm.prevFanBtn=angular.element(document.getElementById('prevfan'));vm.topfanSliderEl=angular.element(vm.topfanSlider);vm.replacementKeys=window.textReplacementsKeys;vm.replacementKey="Badword";setInterval(function(){vm.isPremium=window.darkMode.isPremium;vm.tasks=window.darkMode.tasks;},1000);vm.thumb=config.imageApis.thumb;vm.noThumb=config.imageApis.nothumb;vm.baseImageUrlv3=config.imageApis.imageAssets+'/icons_v3';vm.baseImageUrl=config.settings.ServerCDNBaseUrl+'/images/public/gifts/v2';vm.swf=swf;vm.Api=Api;vm.session=session;vm.broadcast=broadcasterService;vm.activeTab='Chat';vm.alert='';vm.chatCooldown=swf.chatCoolDown;vm.fanMailAnimation=config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/animations/FAN_MAIL.gif';vm.fanMailStatic=vm.baseImageUrlv3+'/_gifts/FAN_MAIL.png';vm.fanmailAnimState=vm.fanMailStatic;vm.spamCounter=[];vm.collapsedGiftTray=true;vm.bcGifts=[];vm.globalVars=window.globalVars;vm.config=config;vm.guestService=guestService;vm.subscriptionBenefits=store.subscriptionBenefits;vm.unreadGlobalMessages=0;vm.unreadGlobalMessagesText="0";vm.isHttps=window.location.protocol==='https:';vm.activateGlobalChat=function(){window.location.href=window.location.href+"?useHTTPS=false";};vm.commentLength=function()
{if(vm.newComment===null||vm.newComment===undefined)
return 0;var match=vm.newComment.match(/[0-9]{6}/g);var extraChars=0;if(match!==null)
extraChars=match.length;return vm.newComment.length+extraChars;};vm.globalCommentLength=function()
{if(vm.newGlobalComment===null||vm.newGlobalComment===undefined)
return 0;return vm.newGlobalComment.length;};swf.activeChatTab=vm.activeTab;var veryBadWords=["treffen"];var chatInputPlaceholder=function(){if(!vm.swf.broadcast){return false;}
if(vm.swf.broadcast.chatMode==1){if(vm.session.subStatus[vm.swf.broadcast.userId]){if(vm.swf.broadcast.subscribersCount!=1){$translate('chat_with_subscribers',{subscribers:vm.swf.broadcast.subscribersCount}).then(function(value){vm.chatInputPlaceholder=value;});}else{$translate('chat_with_subscriber').then(function(value){vm.chatInputPlaceholder=value;});}}else{$translate('chat_subscribers_only').then(function(value){vm.chatInputPlaceholder=value;});}}else{if(vm.swf.broadcast.viewers!=1){$translate('chat_with_viewers',{viewers:vm.swf.broadcast.viewers}).then(function(value){vm.chatInputPlaceholder=value;});}else{$translate('chat_with_viewer').then(function(value){vm.chatInputPlaceholder=value;});}}};chatService.expose('chatInputPlaceholder',chatInputPlaceholder);function anchorChat(){if(scrollChatToBottom){$timeout.cancel(scrollChatToBottom);}
scrollChatToBottom=$timeout(function(){vm.chatWindow.scrollTopAnimated(vm.chatWindow[0].scrollHeight,500);},2000);}
function isSpam(message){return false;if(message.length>0){for(var i=0,a=0;i<vm.spamCounter.length;i++){if(vm.spamCounter[i]===message){a++;}}
vm.spamCounter.unshift(message);if(vm.spamCounter&&vm.spamCounter.length===3){vm.spamCounter.pop();}
if(a===2){return true;}
return false;}}
function startSpamTimer(){if(vm.spamTimer){$interval.cancel(vm.spamTimer);}
if(!vm.spamTimer){vm.spamTimeLeft=60;}
vm.spamTimer=$interval(function(){vm.spamTimeLeft--;if(vm.spamTimeLeft===0){$interval.cancel(vm.spamTimer);vm.spamTimer=false;}},1000);}
function checkChatCooldown(){if(swf.broadcast&&swf.broadcast.currentChatInCooldown===true){return swf.broadcast.currentChatCooldown;}else{return 0;}}
function startCoolDownTimer(){if(cooldownTimer){$interval.cancel(cooldownTimer);}
cooldownTimer=$interval(function(){vm.cooldownTime--;if(vm.cooldownTime<0){vm.cooldownTime=0;vm.closeGiftTray();$interval.cancel(cooldownTimer);}},1000);}
function resetChat(event,data){if(data&&data.type=='fullscreen'){if(vm.swf.activeChatTab!='Chat'){vm.swf.activeChatTab='Chat';}
return false;}
vm.newComment=undefined;if(document.getElementById('topfan-slider')){angular.element(document.getElementById('topfan-slider')).scrollLeft(0);}
if(vm.premiumGiftSelected&&vm.premiumGiftSelected.opened){vm.premiumGiftSelected.opened=false;$timeout(function(){vm.premiumGiftSelected=undefined;},700);}
if(!vm.collapsedGiftTray){vm.collapsedGiftTray=true;}
vm.fanMailMessage=undefined;vm.fanmailInvalid=undefined;vm.topFanPosition='start';vm.cooldownTime=checkChatCooldown();if(vm.cooldownTime!==0){startCoolDownTimer();}
if(vm.commentForm){vm.commentForm.clickedComment=undefined;}}
vm.cancelTask=function(id)
{console.log(id);$rootScope.socket.sendMessage('chat',{'message':'/abort '+id});};vm.openGiftTray=function(){vm.collapsedGiftTray=false;};vm.closeGiftTray=function(){if(vm.premiumGiftSelected&&vm.premiumGiftSelected.opened){vm.premiumGiftSelected.opened=false;}
if(vm.premiumGiftSelected&&vm.premiumGiftSelected.buying){vm.premiumGiftSelected.buying=false;}
vm.collapsedGiftTray=true;vm.fanMailMessage=undefined;$timeout(function(){anchorChat();},800);};vm.toggleGiftTray=function(open){if(open||vm.collapsedGiftTray){vm.openGiftTray();trackingPixel.trackClick('GIFT');}else{vm.closeGiftTray();}
$timeout(function(){anchorChat();},800);};vm.hidePlayerFullscreen=function(){eventbus.notifySubscribers('swf:reset',{type:'fullscreen',state:'close'});};vm.changeTab=function(tab){if(swf.broadcast.comments!=null&&swf.broadcast.comments.length>30)
swf.broadcast.comments.splice(0,swf.broadcast.comments.length-30);if(swf.globalComments!=null&&swf.globalComments.length>30)
swf.globalComments.splice(0,swf.globalComments.length-30);if(tab=='Guest'){swf.activeChatTab=tab;if(swf.broadcast.userId==session.user.userId){trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'BROADCASTER_GUEST_TAB'});}else{trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_CALL_IN'});}
guestService.countUpdated=false;}
if(tab=='GlobalChat'){swf.activeChatTab='GlobalChat';swf.unreadGlobalMessages=0;}
else{vm.globalChatWindow=null;}
if(tab=='Info'){swf.activeChatTab=tab;}
if(tab=='Audience'){swf.activeChatTab=tab;vm.fanmailAnimState=vm.fanMailAnimation;swf.getAudience(0,20,true);}
if(tab=='Chat'){swf.activeChatTab=tab;swf.unreadMessages=0;vm.chatWindow=angular.element(document.getElementById('chatcomments'));if(vm.chatWindow!=null&&vm.chatWindow[0]!=null)
vm.chatWindow.scrollTopAnimated(vm.chatWindow[0].scrollHeight,500);}
if(tab=='Tasks'){swf.activeChatTab=tab;}};var getGoodies=function(){var partnerStickers=session.user?session.user.partnerStickers:undefined;if(store.superMessages){store.clearSuperMessage(0,store.superMessages.length);}
store.getGoodies(partnerStickers).then(function(response){vm.giftItems=response.giftItems;vm.bcGifts=response.bcGifts;vm.bcGiftItems=response.bcGiftItems;swf.giftsAssetsBaseUrl=response.giftsAssetsBaseUrl;swf.giftSkus=response.giftSkus;swf.giftObjects=response.giftObjects;chatcoolDownGift=response.chatcoolDownGift;});};getGoodies();eventbus.subscribe('store:update',function(event,args){if(args&&args.type==='goodies'&&session.user&&session.user.userId!==0){getGoodies();}
vm.supermessageActive=false;},'chat',$scope);vm.chatWindow.on('mouseenter',function(){if(scrollChatToBottom){$timeout.cancel(scrollChatToBottom);}});vm.nextFanBtn.on('mouseleave',anchorChat);vm.prevFanBtn.on('mouseleave',anchorChat);vm.topfanSliderEl.on('mouseleave',anchorChat);vm.changeTopFan=function(direction){vm.isScrolling=true;var width=210,lastWidth=400,delay=200,position=Math.ceil(Math.round(vm.topfanSlider.scrollLeft)/width)*width+(width*direction);vm.topfanSliderEl.scrollLeftAnimated(position,delay).then(function(){vm.topFanPosition=vm.topfanSlider.scrollLeft===0?'start':vm.topfanSlider.scrollLeft===(vm.topfanSlider.scrollWidth-lastWidth)?'end':'';}).finally(function(){vm.isScrolling=false;});};vm.postComment=function(){var k=vm.replacementKey+"";var replacements=window.textReplacements[k];if(vm.chatters&&vm.chatters.length>0){return false;}
trpx.capture({event:'BROADCAST_ACTION','extradata':'ENTERCHAT'},trpx.captureGroups.trackevents);if(!session.user||!session.user.userId){session.showLoginModal('','CHAT').result.then(vm.postComment);return false;}
if((session.user.userId!=vm.swf.broadcast.userId)&&vm.swf.broadcast.chatMode==1){if(!session.subStatus[vm.swf.broadcast.userId]){$modal.subscribeModal(vm.swf.broadcast.userId,{title:"subscriber_chat_title"});return false;}}
if(!vm.session.subStatus[vm.swf.broadcast.userId]&&vm.supermessageActive){$modal.subscribeModal(vm.swf.broadcast.userId,{title:"subscriber_super_messages"});return false;}
if(vm.cooldownTime>0){vm.postGift(chatcoolDownGift);return false;}else{postedComment=vm.newComment;vm.newComment=undefined;}
if(!postedComment||postedComment.length===0){return false;}
if(vm.cooldownTime===0&&(isSpam(postedComment)||vm.spamTimer)&&session.user.role===0&&session.user.partner!==1&&session.user.globalSpenderRank===0&&session.user.vip===0){if(vm.alert!==''){return false;}
vm.alert='Dude stop spamming!';$timeout(function(){vm.alert='';},2500);if(!vm.spamTimer){startSpamTimer();}
return false;}
if(vm.supermessageActive){store.useSuperMessage(session.user.userId,broadcasterService.broadcaster.userId,postedComment);return false;}
if(!postedComment.startsWith("!"))
{var isReallyBad=false;for(var i=0;i<veryBadWords.length;i++)
{if(postedComment.indexOf(veryBadWords[i])>=0)
{isReallyBad=true;break;}}
postedComment=postedComment.replace(/([0-9]{6})/g,"$1ï»¿");var chars={};var newComment="";var inHashtag=false;for(var i=0;i<postedComment.length;i++)
{var addChar=true;if(postedComment.length>i+7)
{var p=postedComment.substr(i,7);if(p=='http://'||p=='https:/')
{var whitepsaceIndex=postedComment.indexOf(" ",i);if(whitepsaceIndex>=0)
{newComment+=postedComment.substring(i,whitepsaceIndex);i+=whitepsaceIndex;}
else
{newComment+=postedComment.substring(i);i=postedComment.length;}
addChar=false;}}
var c=postedComment.substr(i,1);if(c=='#'||(inHashtag&&c!=' '))
{inHashtag=true;newComment+=c;}
else
{inHashtag=false;if(replacements[c]!=null)
newComment+=replacements[c];else
newComment+=c;}}
postedComment=newComment;}
else{postedComment=postedComment.substring(1);}
vm.swf.postChatComment(postedComment,session.user.userId,broadcasterService.broadcaster.userId).then(function(response){if(response.data.errorCode===0){if(response.data.thresholdDelay){vm.cooldownTime=response.data.thresholdDelay;startCoolDownTimer();}
postedComment=Api.stripHTML(postedComment);if(!postedComment){return false;}
if(vm.supermessageActive){return false;}
var userComment=new swf.Comment(postedComment,Api.fullName(session.user),session.user.userId,session.user.realLevel,response.data.chatRole,false,false,response.data.subscriptionType,undefined);userComment.hashedComment=Api.replaceHash(Api.convertEmoji(Api.linkify(Api.stripHTML(userComment.comment))));userComment.own=true;if(vm.swf.broadcast.comments.length>0&&vm.swf.broadcast.comments[vm.swf.broadcast.comments.length-1].userId==session.user.userId&&vm.swf.broadcast.comments[vm.swf.broadcast.comments.length-1].giftId==false)
{vm.swf.broadcast.comments[vm.swf.broadcast.comments.length-1].sub.push(userComment);}
else
{userComment.sub=[userComment];vm.swf.broadcast.comments.push(userComment);}
if(vm.commentForm.clickedComment&&userComment.comment.indexOf('@')!==-1){var trackParams={'event':'AT_MENTION','extradata':'CHAT','field3':vm.commentForm.clickedComment.type};if(vm.commentForm.clickedComment.isFriend){trackParams.field2='FRIEND_IN';}else{trackParams.field2='USER';}
trackingPixel.capture(trackParams);}}else{postedComment=undefined;}});};vm.postGlobalComment=function(){if(!session.user||!session.user.userId){session.showLoginModal('','CHAT').result.then(vm.postComment);return false;}
var comment=vm.newGlobalComment;comment=comment.replace(/[\""]/g,'\\"');vm.newGlobalComment="";var img=document.createElement("img");var name=session.user.dynamoFirstName+" "+session.user.dynamoLastName;name=name.trim();var profile=session.user.profile;var level=Math.floor(session.user.realLevel);var userID=session.user.userId;$rootScope.socket.sendMessage('chat',{'message':comment});};vm.trackChat=function(){trackingPixel.trackClick('CHAT');};vm.postGift=function(gift,Filedata,targetNetwork,$event){trpx.capture({event:'CLICK',extradata:'GIFT_'+gift.costType.toUpperCase(),field1:gift.SKU},trpx.captureGroups.trackevents);if((session.user.userId!=vm.swf.broadcast.userId)&&gift.costType!="BARS"&&(vm.swf.broadcast.chatMode==1&&!session.subStatus[swf.broadcast.userId])){$modal.subscribeModal(swf.broadcast.userId,{title:"subscriber_chat_title"});return false;}
if(gift.minLevel>session.user.realLevel){return false;}
store.calculateGiftCost(gift,swf.stickersMultiplier,swf.dynamicPricedGoodies);if(swf.giftObjects[gift.SKU]){gift.itemGameType=swf.giftObjects[gift.SKU].itemGameType;}
if(gift.costType==="BARS"){if(session.user&&session.user.profile){gift.description=gift.description.replace('{giverName}',session.user.profile);}
gift.description=gift.description.replace('{receiverName}',broadcasterService.broadcaster.username);vm.premiumGiftSelected=gift;console.log(vm.premiumGiftSelected);vm.premiumGiftSelected.opened=true;vm.collapsedGiftTray=false;return false;}
if(!gift.giftQuantity){var result=store.validateGiftPurchase(session.user.userId,session.user.realLevel,session.user.banId,gift);if(!result){return false;}}
var c=1;if(vm.ctrlKey==true)
c=10;else if(vm.shiftKey==true)
c=100;if((session.user.userCoins-(gift.cost*c))>=0){session.user.userCoins=session.user.userCoins-(gift.purchasePrice*c);gift.totalCost+=gift.purchasePrice*c;gift.giftQuantity+=c;timeUntilPost=1000;if($event){angular.element($event.target).css('transform','scale(1.1)');$timeout(function(){angular.element($event.target).css('transform','scale(1)');},200);}
if(gift.giftQuantity===1||(vm.ctrlKey&&gift.giftQuantity===10)||(vm.shiftKey&&gift.giftQuantity===100)){$timeout(function(){store.postGift(session.user.userId,broadcasterService.broadcaster.userId,gift,Filedata,targetNetwork).then(function(response){if(response.data.errorCode!==0){session.user.userCoins=session.user.userCoins+gift.totalCost;}else{var comment=new vm.swf.Comment('',Api.fullName(session.user),session.user.userId,session.user.realLevel,response.data.chatRole,gift.id,gift.giftQuantity,response.data.subscriptionType);comment.sub=[comment];vm.swf.broadcast.comments.push(comment);}
gift.giftQuantity=0;});},timeUntilPost);}}};vm.buyGift=function(tip){if(vm.premiumGiftSelected.VIP===0||(broadcasterService.broadcaster.partner==='1'&&vm.premiumGiftSelected.VIP===2)){if(vm.premiumGiftSelected.itemGameType==='FANMAIL'&&!vm.fanMailMessage){vm.fanmailInvalid=true;$timeout(function(){if(vm.fanmailInvalid){vm.fanmailInvalid=false;}},5000);return false;}
vm.premiumGiftSelected.buying=true;var data={userId:session.user.userId,channelId:broadcasterService.broadcaster.userId,sku:vm.premiumGiftSelected.SKU};if(vm.premiumGiftSelected.itemGameType==='FANMAIL'){data.fanMailText=vm.fanMailMessage;}
if(vm.premiumGiftSelected.itemGameType==='TIP'&&tip){console.log(tip);data.qty=tip;data.currentCost=tip;}else if(vm.premiumGiftSelected.dynamicCost==='0'){data.currentCost=vm.premiumGiftSelected.purchasePrice;}else{data.currentCost=swf.dynamicPricedGoodies[vm.premiumGiftSelected.SKU];}
if((session.user.vault.webBars-data.currentCost)<0){$modal.buyBars(session.user.spendingDisabled).result.then(function(response){if(response){vm.buyGift(tip);}},function(response){vm.premiumGiftSelected.buying=false;});return false;}
if(vm.premiumGiftSelected.itemType=='GIFT'){store.postGift(data.userId,data.channelId,vm.premiumGiftSelected).then(function(response){session.user.vault.webBars=response.data.bars;vm.closeGiftTray();});}else{Api.post('STORE_GOODIE',data).then(function(response){if(response.data.errorCode===0){session.user.vault.webBars=response.data.bars;vm.closeGiftTray();if(vm.premiumGiftSelected.itemGameType==='FANMAIL'){if(swf.broadcast&&swf.broadcast.username.length>9){vm.alert='Fan Mail sent. Waiting for '+swf.broadcast.username.substring(0,9)+'... to accept.';}else{vm.alert='Fan Mail sent. Waiting for '+swf.broadcast.username+' to accept.';}
vm.fanMailMessage=undefined;$timeout(function(){vm.alert='';},3000);}
if(vm.premiumGiftSelected.SKU==='CHATCOOLDOWN'){swf.broadcast.currentChatInCooldown=false;vm.cooldownTime=0;}}else{vm.premiumGiftSelected.buying=false;}});}}};vm.getMultiplierCost=function(gift){var c=1;if(vm.ctrlKey)
c=10;else if(vm.shiftKey)
c=100;if(!session.user||session.user.userId===0){return false;}
if(session.user.banId!==0){return false;}
if(gift.minLevel>session.user.realLevel){return'Level '+Number(gift.minLevel)+' needed.';}
if(gift.itemGameType==='TIP'){return'Tip';}
if((gift.cost*c)>session.user.userCoins&&gift.costType==='COINS'){return'Not enough coins!';}
if(swf.stickersMultiplier&&gift.dynamicCost=='0'&&gift.costType!=='COINS'){return'<i class="ynbar ynicon ynicon-icon-bar"></i> '+(gift.cost*c)+"<br />Recipient points: "+(gift.recipientPoints*c)
+"<br />Giver points: "+(gift.giverPoints*c)
+"<br />Quantity: "+c;}
if(swf.dynamicPricedGoodies&&gift.dynamicCost==1&&gift.costType!=='COINS'){return'<i class="ynbar ynicon ynicon-icon-bar"></i> '+swf.dynamicPricedGoodies[gift.SKU]+"<br />Recipient points: "+(gift.recipientPoints*c)
+"<br />Giver points: "+(gift.giverPoints*c)
+"<br />Quantity: "+c;}
if(swf.stickersMultiplier&&gift.dynamicCost==2){return'<i class="ynbar ynicon ynicon-coins"></i> '+(Math.ceil(Number((gift.cost)*swf.stickersMultiplier))*c)+"<br />Recipient points: "+(gift.recipientPoints*c)
+"<br />Giver points: "+(gift.giverPoints*c)
+"<br />Quantity: "+c;}
if(gift.costType==='COINS'){return'<i class="ynbar ynicon ynicon-coins"></i> '+(gift.cost*c)+"<br />Recipient points: "+(gift.recipientPoints*c)
+"<br />Giver points: "+(gift.giverPoints*c)
+"<br />Quantity: "+c;}};document.body.addEventListener("keydown",function(e)
{if(e.shiftKey)
vm.shiftKey=true;else if(e.ctrlKey)
vm.ctrlKey=true;});document.body.addEventListener("keyup",function(e)
{if(!e.shiftKey)
vm.shiftKey=false;if(!e.ctrlKey)
vm.ctrlKey=false;});vm.openProfile=function(id,comment,source,event){if(!id){return false;}
if(event){event.stopPropagation();}
if(comment){$modal.profileSummary(id,{comment:encodeURIComponent(comment.comment),sf:comment.sf,source:source});}else{$modal.profileSummary(id,{source:source});}};vm.respondToFanMail=function(mail,state){if(swf.fanMailQueue[0]){swf.fanMailQueue[0].isShowing=false;}
$timeout(function(){for(var num in swf.fanMailRequestQueue){window.num=num;if(num=="0"){delete swf.fanMailRequestQueue[0];}else{swf.fanMailRequestQueue[0]=swf.fanMailRequestQueue[num];delete swf.fanMailRequestQueue[num];break;}}
if(mail){Api.post('STORE_SET_STATE',{transactionId:mail.goodieTransactionId,state:state,userId:session.user.userId});}},700);};vm.dismissFanMail=function(){if(swf.fanMailQueue[0]){swf.fanMailQueue[0].isShowing=false;}
$timeout(function(){for(var num in swf.fanMailRequestQueue){window.num=num;if(num=="0"){delete swf.fanMailRequestQueue[0];}else{swf.fanMailRequestQueue[0]=swf.fanMailRequestQueue[num];delete swf.fanMailRequestQueue[num];break;}}
$timeout.cancel(swf.fanMailTimer);if(swf.fanMailQueue.length===1){swf.fanMailDisplay(swf.giftObjects.FANMAIL.maxVis);}else{swf.fanMailDisplay(swf.giftObjects.FANMAIL.minVis);}},1000);};vm.disabledGiftTray=function(){$rootScope.gaEvent('Conversion','Gift (Attempt)',trackingPixel.getUserLocation()||'ANCILLARY');if(session.user.userId===0){session.showLoginModal('','GIFT').result.then(vm.toggleGiftTray);}
if(session.isBroadcasting){session.preventBroadcastInterrupt();}};vm.buyBars=function(){$modal.buyBars(session.user.spendingDisabled);};vm.searchChatters=function(term){if(!term||term.length===0){vm.chatters=null;}else{vm.chatters=$filter('orderBy')($filter('filter')(swf.broadcast.chatters,{displayName:term}),'displayName');vm.chatters=vm.chatters.splice(0,5);}};vm.selectChatter=function(friend){vm.chatters=null;if(!vm.commentForm.clickedComment){vm.commentForm.clickedComment=friend;vm.commentForm.clickedComment.type='DIRECT';}
return'@'+friend.displayName;};vm.toggleSupermessages=function(title){if(!session.user||session.user.userId===0){session.showLoginModal('','SUPERMESSAGE');}else if(!session.subStatus[vm.swf.broadcast.userId]){$modal.subscribeModal(vm.swf.broadcast.userId,{title:title});vm.supermessageActive=false;return false;}else{trpx.capture({event:'CLICK',extradata:'SUPER_CHAT',field1:vm.supermessageActive?'ON':'OFF',},trpx.captureGroups.trackevents);}};eventbus.subscribe('swf:reset',resetChat,'chat',$scope);eventbus.subscribe('chatMode:one',vm.closeGiftTray,'chat',$scope);$scope.$on('$destroy',function(){if(cooldownTimer){$interval.cancel(cooldownTimer);}
if(vm.spamTimer){$interval.cancel(vm.spamTimer);}
chatService.destroyExposed('chatInputPlaceholder');});}]).directive('channelChat',["$interval","broadcasterService","swf","$state","$timeout","$q",function($interval,broadcasterService,swf,$state,$timeout,$q){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/chat/chat.tpl.html',controller:'ChatCtrl',controllerAs:'vm',scope:{}};}]);angular.module('younow.channel.daily-spin',[]).directive('dailySpin',function(){return{restrict:'E',templateUrl:'angularjsapp/src/app/components/chat/daily-spin/daily-spin.tpl.html',controller:'DailySpinCtrl',controllerAs:'vm',scope:{gifts:'='},link:function(scope,elem,attr,controller){}};}).controller('DailySpinCtrl',function DailySpinCtrl(Api,$timeout,config,swf,store,session,$interval,$timeout,$scope,$modal){var vm=this;vm.swf=swf;var giftMap=mapGifts();var winningGift,showingResults,offsetFromStart,destination;vm.message=null;var distance=100;var positions;var rowMap={'top':{spinning:true,showingResults:false},'middle':{spinning:true,showingResults:false},'bottom':{spinning:true,showingResults:false}};vm.spunBefore=false;function mapGifts(){var map={};for(var key in $scope.gifts){map[$scope.gifts[key].id]=$scope.gifts[key].SKU;}
return map;}
var topRow,middleRow,bottomRow,spinner;vm.spinning=false;var timer;var result=null;var displayTimer=null;var currentRow='top';var timeSpinning=0;var settings={giftAmount:5,giftWidth:null,spriteWidth:null,initialWidth:null};function createImage(src){var newImage=document.createElement('img');newImage.src=src;return newImage;}
if(typeof swf.broadcast.dailySpin==='string'){swf.broadcast.dailySpin=JSON.parse(swf.broadcast.dailySpin);}
var sprite=createImage(config.imageApis.dailySpin+'/web/'+swf.broadcast.dailySpin.settings.animationFile+'.'+swf.broadcast.dailySpin.settings.animationFileType);sprite.onload=function(){settings.spriteWidth=this.width;settings.initialWidth=this.width;settings.giftWidth=(settings.spriteWidth/settings.giftAmount);spinner=document.getElementById("spinner-wrap");topRow=document.getElementById('spinner-top');topRow.setAttribute("style","width:"+settings.spriteWidth+"px");topRow.style.background="url("+sprite.src+")";topRow.style.backgroundPosition='top 0px left '+settings.spriteWidth+50+'px';middleRow=document.getElementById('spinner-middle');middleRow.setAttribute("style","width:"+settings.spriteWidth+"px");middleRow.style.background="url("+sprite.src+")";middleRow.style.backgroundPosition='top -32px left '+settings.spriteWidth+50+'px';bottomRow=document.getElementById('spinner-bottom');bottomRow.setAttribute("style","width:"+settings.spriteWidth+"px");bottomRow.style.background="url("+sprite.src+")";bottomRow.style.backgroundPosition='top -65px left '+settings.spriteWidth+50+'px';};vm.startSpinner=function(){if(session.user.vault.webBars-200<0){$modal.buyBars(session.user.spendingDisabled);return false;}
if(!vm.spinning){vm.spinning=true;topRow.classList.add('aimless-spin');middleRow.classList.add('aimless-spin');bottomRow.classList.add('aimless-spin');timer=$interval(function(){timeSpinning+=100;if(rowMap['top'].spinning&&!rowMap['top'].showingResults){topRow.style.width=(Number(topRow.offsetWidth)+settings.initialWidth/10).toString()+'px';topRow.style.backgroundPosition='top 0px left '+30+'px';}
if(rowMap['top'].showingResults){topRow.style.width=(Number(topRow.offsetWidth)+settings.initialWidth/10).toString()+'px';var destination=topRow.style.width-(settings.initialWidth-(settings.giftWidth*rowMap[currentRow].result));topRow.style.backgroundPosition='top 0px left '+settings.initialWidth/10+'px';}
if(rowMap['middle'].spinning){middleRow.style.width=(Number(middleRow.offsetWidth)+settings.initialWidth/10).toString()+'px';middleRow.style.backgroundPosition='top -32px left '+settings.initialWidth/10+'px';}
if(rowMap['bottom'].spinning){bottomRow.style.width=(Number(bottomRow.offsetWidth)+settings.initialWidth/10).toString()+'px';bottomRow.style.backgroundPosition='top -65px left '+settings.initialWidth/10+'px';}
settings.spriteWidth=Number(topRow.style.width.replace('px',''));if(timeSpinning>3000&&result&&!showingResults){rowMap['top'].showingResults=true;}},100);buySpin();}};function buySpin(){var request=store.postDailySpin(swf.broadcast.broadcastId,session.user.userId);request.then(function(response){if(response.data.errorCode===0&&response.data.spinResult){session.user.vault.webBars=session.user.vault.webBars-200;result=response.data.spinResult;vm.winningGift=giftMap[response.data.winningGiftId];console.log(response.data.spinResult);rowMap={'top':{domElement:topRow,result:result.top,offset:'0px',spinning:true},'middle':{domElement:middleRow,result:result.middle,offset:'-32px',spinning:true},'bottom':{domElement:bottomRow,result:result.bottom,offset:'-65px',spinning:true}};}});}
function whichTransitionEvent(){var t;var el=topRow;var transitions={'transition':'transitionend','OTransition':'oTransitionEnd','MozTransition':'transitionend','WebkitTransition':'webkitTransitionEnd'};for(t in transitions){if(el.style[t]!==undefined){return transitions[t];}}}
function getDestination(){console.log('called getDestination')
showingResults=true;var backgroundPositions=window.getComputedStyle(rowMap[currentRow].domElement,null).backgroundPosition.trim().split(/\s+/),positions={'left':Math.round(Number(backgroundPositions[0].replace('px',''))),'top':Math.round(Number(backgroundPositions[1].replace('px','')))};offsetFromStart=positions.left%settings.initialWidth;topRow.style.width=(Number(topRow.offsetWidth)+settings.initialWidth).toString()+'px';bottomRow.style.width=(Number(bottomRow.offsetWidth)+settings.initialWidth).toString()+'px';middleRow.style.width=(Number(middleRow.offsetWidth)+settings.initialWidth).toString()+'px';rowMap[currentRow].spinning=false;destination=positions.left+(settings.giftWidth*rowMap[currentRow].result)-offsetFromStart+50+settings.initialWidth;rowMap[currentRow].domElement.style.backgroundPosition=destination.toString()+'px '+rowMap[currentRow].offset;var transitionEvent=whichTransitionEvent();transitionEvent&&rowMap[currentRow].domElement.addEventListener(transitionEvent,function(e){if(e.propertyName==='background-position-x'){console.log(currentRow,'transition captured');if(currentRow==='top'||currentRow==='middle'){currentRow=currentRow==="top"?"middle":"bottom";getDestination();}else{$interval.cancel(timer);showingResults=false;destination=null;showCongratulations();}}});}
function fadeInGrowShrink(elem,size,timeGrow,timeShrink){elem.style.transition="opacity .5s linear, transform 1s ease-in";elem.style.opacity='1';elem.style.transform='scale(1.4)';elem.style.transition="opacity .5s linear, transform .5s ease-in";$timeout(function(){elem.style.transform='scale(1.1)';},500);}
function fadeOut(elem,duration){elem.style.transition="opacity .5s linear";elem.style.opacity=0;elem.style.display='none';}
function fadeIn(elem,duration){elem.style.transition="opacity .5s linear";elem.style.opacity=1;}
function hide(elements){if(typeof elements==='array'){for(var i=0;i<elements.length;i++){elements[i].style.display='none';}}else{elements.style.display='none';}}
function unHide(elements,displayProperty){if(typeof elements==='array'){for(var i=0;i<elements.length;i++){elements[i].style.display=displayProperty;}}else{elements.style.display=displayProperty;}}
function showCongratulations(){var celebration=document.getElementById('congratulations-wheel');var youWon=document.getElementById('you-won');var gift=document.getElementById('gift');var confirmation=document.getElementById('confirmation');$timeout(function(){vm.message="youWon";fadeIn(celebration);fadeInGrowShrink(youWon);},1000);$timeout(function(){vm.message="gift";fadeOut(youWon);hide(youWon);fadeInGrowShrink(gift);},3500);$timeout(function(){fadeOut(gift);hide(gift);fadeInGrowShrink(confirmation);},6000);$timeout(function(){fadeOut(celebration);vm.spinning=false;vm.spunBefore=true;},8000);$timeout(function(){unHide([gift,youWon],'initial');},10000);}});angular.module('younow.channel.promo-widget',[]).directive('promoWidget',function(config,$timeout,Api){return{restrict:'E',templateUrl:'angularjsapp/src/app/components/chat/promo-widget.tpl.html',scope:true,replace:true,link:function(scope,element,attrs){scope.$watch(function(){return config.UILocale;},function(newVal,oldVal){if(newVal!==undefined){scope.fetching=true;Api.get('RECO_PROMOBANNER',{locale:newVal},true).then(function(response){if(response.data&&response.data.image){response.data.image=config.settings.PromoBannersPath+'/'+response.data.image;scope.banner=response.data;}else{scope.banner={image:false};}
$timeout(function(){scope.fetching=false;});});}});}};});angular.module('younow.modals.confirm',[]).directive('confirm',["$modal",function($modal){return{restrict:'A',scope:{confirm:'=',confirmData:'='},link:function(scope,element,attrs){element.bind('click',function(){var ConfirmCtrl=["$scope","message","Api","$translate",function($scope,message,Api,$translate){try{$translate(message).then(function(translated){$scope.message=translated;});}catch(e){$scope.message=message;}}];var modalInstance=$modal.open({templateUrl:'angularjsapp/src/app/components/confirm-modal/confirm.tpl.html',controller:ConfirmCtrl,windowClass:'confirmation-modal',resolve:{message:function(){return attrs.confirmMessage||"Are you sure?";}}});modalInstance.result.then(function(){scope.confirm(scope.confirmData);},function(){});});}};}]);angular.module('younow.modals.download-broadcast-modal',[]).controller('DownloadBroadcastModalCtrl',function($modalInstance,Api,session,params,config){var vm=this;vm.channelId=params.channelId;vm.session=session;vm.config=config;vm.submitting=false;vm.submitEmail=function(form){vm.submitting=true;if(form.$invalid){Api.triggerTooltip('emailInput',2000);return false;}
params.emailAddress=vm.session.user.email;Api.post('BROADCAST_DOWNLOAD',params).then(function(response){$modalInstance.dismiss();vm.submitting=false;if(!response.errorCode){Api.showTopNotification('Success. You will receive an email soon','success');}else{Api.showTopNotification('An error occurred. Please try again');}});};});angular.module('younow.modals.ep',[]).controller('EpModalCtrl',["$scope","config","session","$modalInstance","Api","data",function($scope,config,session,$modalInstance,Api,data){$scope.modal={state:data.state?data.state:'intro'};var states={'intro':2,'description':2,'expired':4};$scope.modal.thumb=config.imageApis.thumb+'/'+session.user.userId+'/'+session.user.userId+'.jpg';$scope.modal.noThumb=config.imageApis.nothumb;$scope.modal.session=session;$scope.modal.name=Api.friendlyName(session.user);$scope.modal.continue=function(){if($scope.modal.state==='intro'){$scope.modal.state='description';}else{$modalInstance.close();}};$scope.$on('$destroy',function(){Api.post('CHANNEL_UPDATE_EDITORS_PICK',{userId:session.user.userId,channelId:session.user.userId,locale:config.UILocale,state:states[$scope.modal.state]});});}]);angular.module('younow.fan-button',[]).directive('fanButton',["session","Api","broadcasterService","config","trackingPixel","$rootScope","guestService","webpush","eventbus",function(session,Api,broadcasterService,config,trackingPixel,$rootScope,guestService,webpush,eventbus){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/fan-button/fan-button.tpl.html',scope:{channel:'=',size:'@',classname:'@'},link:function(scope,element,attributes){if(scope.size==='small'){element.addClass('btn-small');}
scope.base=config.settings.ServerCDNBaseUrl;scope.hidden=true;scope.subStatus=session.subStatus;scope.fanStatus=session.fanStatus;scope.checkFan=function(channel){if(channel&&channel.userId){if(session.user&&channel.userId==session.user.userId){scope.hidden=true;}else{session.getFan(channel.userId);scope.hidden=false;}
scope.channel=channel;}};config.init.then(function(){scope.$watch('channel',scope.checkFan,true);});scope.toggleFan=function(){trackingPixel.trackClick('FAN');$rootScope.gaEvent('Conversion','Fan (Attempt)',trackingPixel.getUserLocation()||'ANCILLARY');if(!session.loggedIn){session.showLoginModal('','FAN').result.then(scope.toggleFan);return false;}
var apiMethod,fanCountChange;if(session.fanStatus[scope.channel.userId]){apiMethod='CHANNEL_UNFAN';fanCountChange=-1;}else{apiMethod='CHANNEL_FAN';fanCountChange=1;}
var apiPost={userId:session.user.userId,channelId:scope.channel.userId};if(broadcasterService.broadcaster&&broadcasterService.broadcaster.broadcastId){apiPost.broadcastId=broadcasterService.broadcaster.broadcastId;}
if(element[0].parentElement.attributes['track-source']){apiPost.fan_type=element[0].parentElement.attributes['track-source'].value;}
if(element[0].parentElement.attributes['track-context']&&(element[0].parentElement.attributes['track-context'].value==='GUESTLIST'||element[0].parentElement.attributes['track-context'].value==='GUESTLIVE')){apiPost.fan_type=element[0].parentElement.attributes['track-context'].value;}
if(element[0].parentElement.attributes['modelId']){apiPost.modelId=element[0].parentElement.attributes['modelId'].value;}
Api.post(apiMethod,apiPost).then(function(response){if(response.data&&!response.data.errorCode){updateUI(undefined,{fan:fanCountChange});}});};eventbus.subscribe('fanbutton:updateUI',updateUI,'fanbutton',scope);function updateUI(event,data){if(data.list!==undefined){for(var i=0;i<data.list.length;i++){var fanId=data.list[i];session.fanStatus[fanId]=data.fan>0?true:false;scope.channel.totalFans=scope.channel.totalFans*1+data.fan;if(data.fan===1){webpush.triggerPushPrompt('FAN');}}}
else{session.fanStatus[scope.channel.userId]=data.fan>0?true:false;scope.channel.totalFans=scope.channel.totalFans*1+data.fan;if(data.fan===1){webpush.triggerPushPrompt('FAN');}}}}};}]);angular.module('younow.footer',['ui.router']).directive('footer',function(){return{restrict:'A',replace:true,templateUrl:'angularjsapp/src/app/components/footer/footer.tpl.html',controller:'FooterCtrl'};}).controller('FooterCtrl',function HomeController($scope,$rootScope,$http,$window,$state,$modal,config,$translate,session,Api,broadcasterService,swf,guestService,$filter){$scope.state=$state;$scope.config=config;$scope.links={};$scope.selectLanguage=function(la){$rootScope.gaEvent('LANGUAGE','user-selected','from-footer',la);session.updateLanguage(la);guestService.guestListCountFormatted=Api.trustedHTML($filter('translate')('_guests'));};$scope.selectLocale=function(la){$rootScope.gaEvent('LOCALE','user-selected','from-footer',la);broadcasterService.updateLocale(la);};$scope.openModal=function(src){if($state.is('about')&&$window.navigator.userAgent.search('Chrome/39')>0){$window.open(src,'_blank');return false;}
$modal.iframe(src);};$scope.openAsModal=function(e){if($state.is('about')&&$window.navigator.userAgent.search('Chrome/39')>0){return true;}
$modal.iframe(e.target.href);e.preventDefault();};$scope.openDoc=function(e,label){$scope.doAboutClick('Footer link',label);if(!$state.is('policy')){$window.open(e.target.href,'_blank');e.preventDefault();}};$scope.showAbout=function(){$state.go('about');};$scope.downloadApp=function(platform){Api.goMobile(platform,session.user.level,'_FOOTER');};$scope.doAboutClick=function(action,label){if($state.is('about')){$rootScope.gaEvent('About Page Button Click',action,label);}};});angular.module('younow.modals.gate',[]).controller('GateModalCtrl',["$scope","$translate","$modalInstance","data",function($scope,$translate,$modalInstance,data){$scope.data=data;$scope.respond=function(reponse){$modalInstance.close(reponse);};}]);angular.module('younow.guest-button',[]).directive('guestButton',function(swf,guestService,session,Api,trackingPixel,webRtc,config){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/guest-button/guest-button.tpl.html',scope:{channel:'=',onInvite:'&'},link:function(scope,element,attributes){if(swf.broadcast&&(swf.broadcast.userId===session.user.userId)&&swf.broadcast.allowGuestCallers=="1"&&webRtc.supportsWebRtc()){scope.hidden=false;}else{scope.hidden=true;}
if(!scope.hidden){element.on('click',function(){if(guestService.overlayStates.guest!='ready'&&guestService.overlayStates.guest!='connected'){return false;}
trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'BROADCASTER_INVITE_GUEST'});var pendingGuest=new PendingGuest();if(guestService.overlayStates.guest=='connected'){guestService.overlayStates.guest='swapping';guestService.pendingGuest={guest:pendingGuest};scope.onInvite();}else{guestService.inviteGuest(session.user.userId,scope.channel.userId,pendingGuest,'direct');scope.onInvite();}});scope.$watch(function(){return guestService.overlayStates.guest;},function(newVal){if(newVal){if(newVal!='ready'&&newVal!='connected'){element.children().addClass('disabled');}else{element.children().removeClass('disabled');}}});var waitOnChannel=scope.$watch(function(){return scope.channel;},function(newVal){if(newVal!==undefined){waitOnChannel();if(swf.broadcast&&(swf.broadcast.userId==newVal.userId||(guestService.guest&&guestService.guest.userId==newVal.userId))){scope.hidden=true;}
isUserInvitable(newVal.userId).then(function(response){if(response.data.errorCode===0&&response.data.isInvitable!==undefined){if(response.data.isInvitable!=1){scope.hidden=true;}}});}});}
function PendingGuest(){this.location={state:scope.channel.state,country:scope.channel.country,city:scope.channel.city};this.formattedLocation=this.location?Api.cleanLocation(this.location):'';this.name=scope.channel.profile;this.userId=scope.channel.userId;this.level=scope.channel.level;this.locale=scope.channel.locale;this.mode='direct';this.bars='';this.chatRole='';this.fanRank='';this.snapshotUrl='';this.subscriptionType='';}
function isUserInvitable(guestId){return Api.post('GUEST_ISINVITABLE',{userId:session.user.userId,guestId:guestId});}}};});(function(){window.YouNow.ReactComponents.GuestListComponent=React.createClass({displayName:"GuestListComponent",propTypes:{guests:React.PropTypes.array,userId:React.PropTypes.any,config:React.PropTypes.object,openProfile:React.PropTypes.func.isRequired,inviteGuest:React.PropTypes.func.isRequired,broadcaster:React.PropTypes.object,translatedText:React.PropTypes.object},render:function(){var userId=this.props.userId,config=this.props.config,broadcaster=this.props.broadcaster,guest_make=this.props.translatedText.guest_make,_openProfile=this.props.openProfile,_inviteGuest=this.props.inviteGuest,openProfile=function(i){_openProfile(this,i);},inviteGuest=function(){_inviteGuest(this);},extraSummary,description,guestItems,UserBadgeRt=window.YouNow.ReactComponents.UserBadge;if(this.props.guests&&this.props.guests.length>0){var guestList=this.props.guests.map(function(guest,i){if(guest.userId!=userId){if(guest.bars>0&&guest.formattedLocation.length>0){extraSummary=React.createElement("div",null,React.createElement("span",{className:"guest-bars"},React.createElement("i",{className:"ynicon ynicon-icon-bar"})," ",guest.bars),React.createElement("span",{className:"bullet"},"â¢"),React.createElement("span",{className:"guest-location"},guest.formattedLocation));}else if(guest.bars>0){extraSummary=React.createElement("div",null,React.createElement("span",{className:"guest-bars"},React.createElement("i",{className:"ynicon ynicon-icon-bar"})," ",guest.bars));}else if(guest.formattedLocation.length>0){extraSummary=React.createElement("div",null,React.createElement("span",{className:"guest-location"},guest.formattedLocation));}else{extraSummary=null;}
if(guest.description&&guest.description.length>0){description=React.createElement("div",{className:"description line-clamp"},guest.description);}else{description=null;}
return React.createElement("div",{className:"guest",key:guest.userId},React.createElement("div",{className:"thumb clickable",onClick:openProfile.bind(guest.userId,i),style:{"backgroundImage":"url("+config.settings.GuestSnapshotsBaseUrl+guest.snapshotUrl+")","backgroundSize":"cover"}}),React.createElement("div",{className:"summary"},React.createElement("div",{className:"guest-name short-text clickable",onClick:openProfile.bind(guest.userId,i)},React.createElement(UserBadgeRt,{role:guest.chatRole,level:guest.level,subscriptionType:guest.subscriptionType,channelId:guest.userId,broadcaster:broadcaster,config:config}),React.createElement("b",null,guest.name)),extraSummary,description,React.createElement("button",{className:"btn btn-primary",onClick:inviteGuest.bind(guest)},guest_make)));}});return React.createElement("div",null,guestList);}else{return null;}}});})();angular.module('younow.channel.guest-panel',[]).controller('GuestPanelCtrl',function($scope,webRtc,swf,$interval,session,$timeout,Api,config,guestService,$modal,eventbus,trackingPixel,$filter){var vm=this;var previewInterval,lastGuestRefresh,_guestList,guestListViewableCount=5;vm.animate=false;vm.state='guestList';vm.swf=swf;vm.session=session;vm.config=config;vm.guestService=guestService;vm.cameraReady=false;vm.translatedText={guest_make:$filter('translate')('guest_make')};vm.guestListFilter='sorting_level';vm.guestListFilterLabels={'sorting_level':'Level','sorting_waitingtime_asc':'Waiting Longest','sorting_waitingtime_desc':'Just Joined','sorting_alphabetical':'Alphabetical'};vm.openGuestOptIn=function(){if(!window.getUserMedia||Api.isMEdge()){$modal.alert("Sorry, you're browser doesn't support YouNow broadcasting. Please upgrade to the latest version of <a href='https://www.mozilla.org/en-US/firefox/new/' target='_blank'>FireFox</a> or <a href='https://www.google.com/chrome/browser/desktop/' target='_blank'>Chrome</a>.");trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_BECOME','field2':'UNSUPPORTED'});return false;}
if(guestService.userGuestObj){return false;}
if(session.user.userId===0){session.showLoginModal(false,'GUEST_BECOME').result.then(function(response){if(response.data&&response.data.id!==0){vm.state='guestPreview';trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_BECOME','field2':'CONFIRM'});webRtc.loadPreview('preview-video').then(function(stream){vm.previewStream=stream;},function(){vm.state='guestList';});}});return false;}
trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_BECOME','field2':'CONFIRM'});vm.state='guestPreview';webRtc.loadPreview('preview-video').then(function(stream){vm.previewStream=stream;},function(){vm.state='guestList';});};vm.closeGuestOptIn=function(){vm.state='guestList';vm.imageTaken=undefined;vm.previewImage=undefined;vm.counter=undefined;if(previewInterval){$interval.cancel(previewInterval);}
trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_GIF_CANCEL'});};vm.previewCountdown=function(event){if(!vm.previewStream){$modal.alert("You must allow camera access to guest broadcast. You can edit this in your browser settings.");vm.state='guestList';return false;}
if(!vm.imageTaken){trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_MAKE_PREVIEW'});}else{trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_REDO_PREVIEW'});}
vm.counter=3;vm.previewImage=undefined;previewInterval=$interval(function(){if(vm.counter!==0){vm.counter--;}
if(vm.counter===0){$interval.cancel(previewInterval);vm.previewImage=webRtc.takeSnapshot(document.getElementById('preview-video'),320,240);if(!vm.imageTaken){vm.imageTaken=true;}}},1000);};vm.optIn=function(){trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_GIF_SUBMIT'});Api.post('GUEST_OPTIN',{channelId:swf.broadcast.userId,userId:session.user.userId,snapshot:vm.previewImage}).then(function(response){if(response.data.errorCode===0&&response.data.guestInfo){vm.state='guestList';$timeout(function(){webRtc.destroy(vm.previewStream,undefined,'preview');guestService.newUserGuestObj(response.data.guestInfo);getGuestList(true);},1000);$timeout(function(){vm.previewImage=undefined;vm.imageTaken=false;},3000);}
if(response.data.errorCode>0||!response.data.guestInfo){vm.state='guestList';$timeout(function(){webRtc.destroy(vm.previewStream,undefined,'preview');},1000);$timeout(function(){vm.previewImage=undefined;vm.imageTaken=false;},3000);}});};vm.optOut=function(){Api.post('GUEST_OPTOUT',{channelId:swf.broadcast.userId,userId:session.user.userId,}).then(function(response){if(response.data.errorCode===0){guestService.updateUserGuestObj();getGuestList(true);}
if(response.data.errorCode>0){Api.showTopNotification(response.data.errorMsg);}});trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_REMOVE_ME'});};vm.inviteGuest=function(guest){if(guestService.pendingGuest){return false;}
if(guestService.guest){guestService.overlayStates.guest='swapping';guestService.pendingGuest={guest:guest};}else{guestService.inviteGuest(session.user.userId,guest.userId,guest);}};vm.openProfile=function(userId,index){$modal.profileSummary(userId,{source:'GUESTLIST'});if(index){if(session.user.userId==swf.broadcast.userId){trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'BROADCASTER_GUEST_GIF','sourceid':index+1});}else{trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_GIF','sourceid':index+1});}}};vm.cameraValid=function(){var cameraExists=webRtc.checkIfCameraExists(vm.previewStream);if(cameraExists){vm.cameraReady=true;}};eventbus.subscribe('session:loggedIn',function(event,loggedIn){if(!loggedIn){vm.state='guestList';}},'guestpanel',$scope);vm.loadGuestList=function(increment){if(_guestList){if(increment&&_guestList.length>guestListViewableCount){guestListViewableCount+=5;}
vm.guestList=$filter('limitTo')(_guestList,guestListViewableCount);}};vm.sortGuestList=function(filter,dir){if(filter){guestService.listPreferences.dir=undefined;if(dir===undefined){dir='';}else{guestService.listPreferences.dir=dir=='desc'?0:1;dir='_'+dir;}
guestService.listPreferences.filter=filter;vm.guestListFilter='sorting_'+filter+dir;guestListViewableCount=5;getGuestList(true);}};function getGuestList(instant){var isCdn=true,params={channelId:swf.broadcast.userId,sort:guestService.listPreferences.filter};if(instant&&Api.polls.guestList){$interval.cancel(Api.polls.guestList);delete Api.polls.guestList;}
if(guestService.listPreferences.dir!==undefined){params.dir=guestService.listPreferences.dir;}
isCdn=swf.broadcast.userId==session.user.userId?false:true;Api.get('GUEST_LIST',params,isCdn).then(function(response){response.data.nextRefresh=response.data.nextRefresh?response.data.nextRefresh:30;if(response.data.list){formatGuestList(response.data.list);if(lastGuestRefresh!=response.data.nextRefresh&&Api.polls.guestList!==undefined){$interval.cancel(Api.polls.guestList);delete Api.polls.guestList;}}
if(response.data.errorCode>0){Api.showTopNotification(response.data.errorMsg);}
if(!Api.polls.guestList){Api.poll(getGuestList,'guestList',response.data.nextRefresh);lastGuestRefresh=response.data.nextRefresh;}});}
function formatGuestList(guests){for(var i=0;i<guests.length;i++){if(guests[i].location){guests[i].formattedLocation=Api.cleanLocation(guests[i].location);}else{guests[i].formattedLocation='';}}
_guestList=null;_guestList=guests;vm.loadGuestList();}
getGuestList();$scope.$on('$destroy',function(){if(previewInterval){$interval.cancel(previewInterval);}
if(Api.polls.guestList){vm.guestList=null;$interval.cancel(Api.polls.guestList);delete Api.polls.guestList;}});}).value('GuestListComponent',window.YouNow.ReactComponents.GuestListComponent).directive('guestList',function(reactDirective){return reactDirective('GuestListComponent');}).directive('guestPanel',function(webRtc){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/guest-panel/guest-panel.tpl.html',controller:'GuestPanelCtrl',controllerAs:'vm',scope:{},link:function(scope,element,attrs,controller){element.on('$destroy',function(){if(controller.previewStream){webRtc.destroy(controller.previewStream,undefined,'preview');}});}};});angular.module('younow.header',['ui.router']).directive('header',function(){return{restrict:'A',replace:true,templateUrl:'angularjsapp/src/app/components/header/header.tpl.html',controller:'HeaderCtrl'};}).controller('HeaderCtrl',["$location","$interval","$scope","$state","$location","$timeout","config","session","swf","broadcasterService","Api","$translate","$modal","$rootScope","eventbus","trackingPixel","guestService","ab","pusher",function HomeController($location,$interval,$scope,$state,$location,$timeout,config,session,swf,broadcasterService,Api,$translate,$modal,$rootScope,eventbus,trackingPixel,guestService,ab,pusher){$scope.session=session;$scope.config=config;$scope.swf=swf;$scope.pusher=pusher;$scope.broadcasterService=broadcasterService;$scope.searchBox='';$scope.userMenuOpened=false;$scope.Api=Api;$scope.locales=[];$scope.gradientProgress='';$scope.currentGradient='';$scope.logoBlack='';$scope.userMenu={open:false};$scope.hasSeenFeatured=Api.store('seenLeaderboards');$scope.hasSeenTrending=Api.store('seenTrending');$rootScope.isPremium=false;$rootScope.showPremiumTime=false;$rootScope.premiumTimeLeft="";setInterval(function(){$rootScope.isAdmin=window.darkMode.role==2;$rootScope.isModerator=window.darkMode.role==1;$rootScope.isUser=window.darkMode.role==0;if(window.darkMode.isPremium)
{$rootScope.isUser=false;if(!$rootScope.isAdmin&&!$rootScope.isModerator)
$rootScope.isPremium=true;$rootScope.premiumTimeLeft=window.darkMode.timeLeftString;$rootScope.showPremiumTime=true;}
else
{$rootScope.showPremiumTime=false;$rootScope.isPremium=false;}},1000);ab.ready.then(function(){$scope.inExperiment=ab.variant('TRENDING_MOMENTS')==='B';});if($location.path()==='/featured'){Api.store('seenLeaderboards',true);$scope.hasSeenFeatured=Api.store('seenLeaderboards');}
if($location.path()==='/moments/'&&$scope.inExperiment){Api.store('seenTrending',true);$scope.hasSeenTrending=Api.store('seenTrending');}
for(var locale in config.settings.Locales){$scope.locales.push({locale:locale,name:config.settings.Locales[locale].name});}
var privateScope={};function goIfNotBroadcasting(callback){if(swf.settingUpBroadcast){session.isBroadcasting=true;}
if(session.isBroadcasting||(guestService.guest&&guestService.guest.userId==session.user.userId)){return false;}
callback();}
$scope.getBars=function(){if(session.user&&session.user.banId!==0){session.checkBan();return false;}
$modal.buyBars(session.user.spendingDisabled);};$scope.goto=function(path){if(!path){return false;}
if(path.substr(0,4)=='http'){path=path.slice(path.indexOf(path.split('/')[3]));}
$location.path(path);};$scope.selfProfile=function(){goIfNotBroadcasting(function(){broadcasterService.switchBroadcaster(session.user.profile,true,true);$timeout(function(){if($state.current.name.indexOf('main.channel.')!==-1&&$state.current.name!=='main.channel.detail'){$state.go('main.channel.detail',{profileUrlString:session.user.profile,async:'channel'});}});});};$scope.onMainPage=function(){if(broadcasterService.broadcaster&&broadcasterService.broadcaster.broadcastId&&$state.is('main.channel.detail')){return true;}else{return false;}};$scope.checkNotifications=function(e){var isOpen=angular.element(document.getElementById('notifications-dropdown')).hasClass('open');if(!isOpen){session.notificationCount=0;session.getNotifications(0);}};$scope.checkSessions=function(e){var isOpen=angular.element(document.getElementById('sessions-dropdown')).hasClass('open');console.log(session.savedSessions);if(!isOpen){}};$scope.openNotification=function(notification,event){if(event.target.tagName==='I'||event.target.tagName==='BUTTON'){event.preventDefault();event.stopPropagation();}else{goIfNotBroadcasting(function(){if(notification.linkTo){$scope.goto(notification.linkTo);broadcasterService.deeplinking=true;}else{broadcasterService.switchBroadcaster(notification.eventUserId);}});}};$scope.preventClose=function(e)
{e.stopPropagation();return false;}
$scope.addSession=function()
{var input=document.getElementById("sessionAdd");var s=input.value;var ind=s.indexOf(":");if(ind==32&&s.length==69)
{var sessionID=s.substring(0,32);var slt=s.substring(33);session.previousSession=readCookie("PHPSESSID");session.previousSessionSLT=readCookie("slt");session.addingSessionID=sessionID;session.addingSessionSLT=slt;session.addingSession=true;document.cookie="PHPSESSID="+sessionID+"; path=/; domain=.younow.com; expires=Sat, 01 Jan 2050 00:00:01 GMT";document.cookie="slt="+slt+"; path=/; domain=.younow.com; expires=Sat, 01 Jan 2050 00:00:01 GMT";session.getSession();}
else
{$modal.alert("The entered session data is invalid. Format is: {SESSIONID}:{SLT}");}}
$scope.openSession=function(sess){document.cookie="PHPSESSID="+sess.session+"; path=/; domain=.younow.com; expires=Sat, 01 Jan 2050 00:00:01 GMT";document.cookie="slt="+sess.slt+"; path=/; domain=.younow.com; expires=Sat, 01 Jan 2050 00:00:01 GMT";session.sessionSwitched=true;session.getSession();};$scope.openSettings=function(section){if(session.user&&session.user.banId!==0){session.checkBan();return false;}
if(swf.settingUpBroadcast||(guestService.guest&&guestService.guest.userId==session.user.userId)){session.preventBroadcastInterrupt();return false;}
section=section?section:'';$state.go('main.settings',{section:section});};$scope.openWindow=function(url,anchor){goIfNotBroadcasting(function(){anchor=anchor?'#'+anchor:'';window.open(url+anchor,'_blank');});};$scope.openModForm=function(url,anchor){var params={},fullTime=new Date(),minutes=fullTime.getMinutes();if(session.user.userId!==0){params.field1=session.user.firstName;params.field2=session.user.lastName;params.field17=session.user.email;}
if(broadcasterService.broadcaster&&broadcasterService.broadcaster.username){params.field19=window.location.protocol+'://www.younow.com/'+broadcasterService.broadcaster.profile;params.field5=broadcasterService.broadcaster.username;}
params.field7=fullTime.getHours()>12?fullTime.getHours()-12:fullTime.getHours();params['field7-1']=minutes<10?'0'+minutes:minutes;params['Field7-3']=fullTime.getHours()<12?'AM':'PM';url=Api.buildWufooUrl(url+'/',params);anchor=anchor?'#'+anchor:'';window.open(url+anchor,'_blank');};$scope.isPartner=function(type){if(session.user){var partner=session.user.partner;if(type==='active'&&partner===1){return true;}
if(type==='pending'&&(partner===2||partner===6||partner===7)){return true;}}
return false;};$scope.needsUpdate=function(){var partner=$scope.isPartner('active');if((session.user.mcnTypeId!=="4"&&session.user.mcnTypeId!=="3")&&partner===true){return true;}else{return false;}};$scope.loadChannel=function(id){broadcasterService.switchBroadcaster(id);};$scope.toggleUserMenu=function(close){$scope.userMenu.open=true;if(privateScope&&privateScope.dismissUserMenu){$timeout.cancel(privateScope.dismissUserMenu);}
if(privateScope&&close){privateScope.dismissUserMenu=$timeout(function(){$scope.userMenu.open=false;},500);}};$scope.goLive=function(){trackingPixel.trackClick('GOLIVE');if(session.checkBan()){return false;}
if(session.isBroadcasting||swf.settingUpBroadcast||(guestService.guest&&guestService.guest.userId==session.user.userId)){session.preventBroadcastInterrupt();return false;}
if((!window.getUserMedia||Api.isMEdge())||(navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")==-1)){$modal.alert("Sorry, your browser doesn't support YouNow broadcasting. Please upgrade to the latest version of <a href='https://www.mozilla.org/en-US/firefox/new/' target='_blank'>FireFox</a> or <a href='https://www.google.com/chrome/browser/desktop/' target='_blank'>Chrome</a>.");return false;}
if($state.current.name==='main.channel.detail.endOfBroadcast'){$state.go("main.channel.detail");}
broadcasterService.goLive();swf.goLive();};$scope.doHeaderNavigation=function(to,e){goIfNotBroadcasting(function(){if(to==='moments'&&!session.loggedIn){session.showLoginModal('','MOMENT_FEED').result.then(function(){$state.go('main.momentsFeed');});e.preventDefault();e.stopPropagation();}
trackingPixel.trackClick(to,{field1:'HEADER'});});};$scope.loginClick=function(event){$rootScope.gaEvent('Conversion',event,trackingPixel.getUserLocation()||'ANCILLARY');trackingPixel.trackClick('SIGNIN');};$scope.clickLogo=function(language){goIfNotBroadcasting(function(){if(session.user&&session.user.userId===0){config.showHomepage=true;$location.path('/'+language);}else{broadcasterService.featuredBroadcaster();}});};$scope.goToProfile=function(profileName,$event){goIfNotBroadcasting(function(){$event.stopPropagation();$location.path(profileName+'/channel');});};$scope.checkSeen=function(item){Api.store(item,true);if(item==='seenLeaderboards'){$scope.hasSeenFeatured=Api.store(item);}else if(item==='seenTrending'){$scope.hasSeenTrending=Api.store(item);}};$scope.stateGradients={'live':'linear-gradient(270deg, #0293fc, #7de316)','profile':'linear-gradient(270deg, #f93593, #943bf8)','explore':'linear-gradient(270deg, #fadd2f, #f49223)','moments':'linear-gradient(270deg, #943bf8, #0397fb)','default':'linear-gradient(270deg, #80e230 , #80e230)'};function setGradientToState(state){if(state==='main.explore'){$scope.currentGradient=$scope.stateGradients.explore;}else if(state==='main.channel.detail'){$timeout(function(){if($scope.broadcasterService.async){$scope.currentGradient=$scope.stateGradients.profile;}else{$scope.currentGradient=$scope.stateGradients.live;}},0);}else if(state==='main.momentsFeed'){$scope.currentGradient=$scope.stateGradients.moments;}else if(state==='/partners/earnings'){$scope.currentGradient=$scope.stateGradients.profile;}else{$scope.currentGradient=$scope.stateGradients.default;}}
var stateChangeStart=$scope.$on('$stateChangeStart',function(event,toState,toParams,fromState,fromParams){setGradientToState(toState.name);$scope.gradientProgress=0;});$scope.load=function(){if($state.current.name==='home'){$scope.logoBlack=true;}
setGradientToState($state.current.name);$timeout(function(){if($scope.gradientProgress<100){$scope.gradientProgress=100;}},1000);};var stateChangeSuccess=$scope.$on('$stateChangeSuccess',function(event,toState,toParams,fromState,fromParams){$timeout(function(){if($scope.gradientProgress<100){$scope.gradientProgress=100;}},1000);});$scope.$on('$destroy',function(){stateChangeSuccess();stateChangeStart();});eventbus.subscribe('user:onNotificationCountChange',function(){if(angular.element(document.getElementById('notifications-dropdown')).hasClass('open')){session.notificationCount=0;session.getNotifications(0);}},'header',$scope);$scope.closeNotification=function(group){Api.closeTopNotification(group);};$scope.closeBanner=function(group){Api.closeTopBanner(group);};}]);angular.module('younow.modals.iframe',[]).controller('IframeModalCtrl',["$scope","Api","src",function($scope,Api,src){$scope.src=Api.trustedSrc(src);}]);angular.module('younow.leftsidebar',[]).directive('leftsidebar',function(ab,broadcasterService,$rootScope,trackingPixel,config){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/left-sidebar/left-sidebar.tpl.html',controller:'LeftSidebarCtrl',controllerAs:'leftSidebar'};}).controller('LeftSidebarCtrl',function($scope,$rootScope,broadcasterService,dashboard,session,swf,config,Api,$state,trackingPixel,guestService,ab,$filter){var leftSidebar=this;leftSidebar.baseImages=config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images';leftSidebar.session=session;leftSidebar.swf=swf;leftSidebar.dashboard=dashboard;leftSidebar.broadcasterService=broadcasterService;leftSidebar.trendingsLocales=["ww","de","en","sa","tr","es"];leftSidebar.trendingsLocalesKeys={"ww":"ww","de":"de","en":"en","sa":"me","tr":"tr","es":"es"};leftSidebar.trendingsLocaleKey="ð©ðª";leftSidebar.changeTrendingLocale=function(nn)
{leftSidebar.trendingsLocaleKey=nn;leftSidebar.dashboard.trendingsLocale=leftSidebar.trendingsLocalesKeys[nn];leftSidebar.dashboard.getTrending();};leftSidebar.usersTrendingCollapsed=false;leftSidebar.usersFeaturedCollapsed=false;leftSidebar.tagsTrendingCollapsed=false;leftSidebar.friendsCollapsed=false;leftSidebar.mobileCollapsed=false;leftSidebar.session=session;leftSidebar.localeLanguageMenu=null;leftSidebar.toggleMenu=function(menuName){if(leftSidebar.localeLanguageMenu===null){leftSidebar.localeLanguageMenu=menuName;}else{leftSidebar.localeLanguageMenu=null;}};leftSidebar.selectLanguage=function(la){$rootScope.gaEvent('LANGUAGE','user-selected','from-footer',la);session.updateLanguage(la);guestService.guestListCountFormatted=Api.trustedHTML($filter('translate')('_guests'));};leftSidebar.selectLocale=function(la){$rootScope.gaEvent('LOCALE','user-selected','from-footer',la);broadcasterService.updateLocale(la);};leftSidebar.config={thumb:config.imageApis.thumb,nothumb:config.imageApis.nothumb,base:config.settings.ServerCDNBaseUrl};leftSidebar.getTagFeatured=function(tag){trackingPixel.trackClick('TAG',{field1:'SIDEBAR'});if(swf.settingUpBroadcast){session.isBroadcasting=true;}
if(session.isBroadcasting||(guestService.guest&&guestService.guest.userId==session.user.userId)){session.preventBroadcastInterrupt();return false;}
$rootScope.gaEvent('Conversion','Click Tag',trackingPixel.getUserLocation()||'ANCILLARY');session.isBroadcasting=0;swf.settingUpBroadcast=false;$state.go('main.explore',{tag:tag,q:undefined},{reload:true});};leftSidebar.changeBroadcaster=function(id){trackingPixel.trackClick('BROADCASTER');if(swf.settingUpBroadcast){session.isBroadcasting=true;}
if((session.isBroadcasting||(guestService.guest&&guestService.guest.userId==session.user.userId))&&!broadcasterService.async){session.preventBroadcastInterrupt();return false;}
if((swf.broadcast&&broadcasterService.broadcast&&!broadcasterService.async)&&id==broadcasterService.broadcaster.userId&&$state.current.name==='main.channel.detail'){return false;}
broadcasterService.switchBroadcaster(id);swf.settingUpBroadcast=false;};leftSidebar.trackMobile=function(platform){if(platform=='IOS'||platform=='ANDROID'){trackingPixel.trackClick('GETTHEAPP',{field1:'SIDEBAR'});}
var activity;if(broadcasterService.async&&$state.current.name!=='main.settings'&&$state.current.name!=='about'&&$state.current.name!=='policy'&&$state.current.name!=='main.explore'&&$state.current.name!=='lockout'){activity='PROFILE';}
if(!broadcasterService.async){activity='BROADCAST';}
if($state.current.name==='main.explore'){activity='EXPLORE';}
if(activity===undefined){activity='OTHER';}
Api.goMobile(platform,session.user.level,'_SIDEBAR',activity);};});angular.module('younow.modals.likers',[]).controller('LikersModalCtrl',function(Api,params,config,session,$modal,$modalInstance,ab){var vm=this;vm.likers=[];vm.paidLikers=[];vm.imageApis=config.imageApis;vm.hasMore=true;vm.hasMorePaidLikers=true;var likeStatusModified=false;var likerStatus=params.likerStatus;var defaultParams={id:params.momentId,type:'all'};var unpaidParams={id:params.momentId,records:20,type:'regular'};var paidParams={id:params.momentId,records:5,type:'paid'};var paramsMap={'all':defaultParams,'regular':unpaidParams,'paid':paidParams};vm.getLikes=function(type){params=type?paramsMap[type]:defaultParams;if(!type){var allRequest=Api.get('MOMENT_LIKES',params);allRequest.then(function(response){if(response.data.errorCode===0&&(response.data.items.length>0||response.data.paidItems.length>0)){handlePaidLikeResults(response.data);handleUnpaidLikeResults(response.data);}});}else if(type==='regular'&&vm.hasMore){var unpaidRequest=Api.get('MOMENT_LIKES',params);unpaidRequest.then(function(response){if(response.data.errorCode===0&&response.data.items.length>0){handleUnpaidLikeResults(response.data);}});}else if(type==='paid'&&vm.hasMorePaidLikers){var paidRequest=Api.get('MOMENT_LIKES',params);paidRequest.then(function(response){if(response.data.errorCode===0&&response.data.paidItems.length>0){handlePaidLikeResults(response.data);}});}};vm.showProfileSummary=function(id,params,state){$modal.profileSummary(id,params,state);};vm.close=function(){$modalInstance.close();};function handlePaidLikeResults(data){vm.hasMorePaidLikers=data.hasMorePaidLikers?data.hasMorePaidLikers:false;paidParams.pagePaid=data.pagePaid?data.pagePaid:false;vm.paidLikers.push(data.paidItems);vm.paidLikers=[].concat.apply([],vm.paidLikers);}
function handleUnpaidLikeResults(data){vm.hasMore=data.hasMore?data.hasMore:false;unpaidParams.page=data.page?data.page:false;var likers=!likeStatusModified?syncModelWithLikeStatus(data.items):data.items;vm.likers.push(likers);vm.likers=[].concat.apply([],vm.likers);}
function syncModelWithLikeStatus(batchOfLikers){for(var i=0;i<batchOfLikers.length;i++){if(batchOfLikers[i].userId==session.user.userId&&!likerStatus){batchOfLikers.splice(i,1);likeStatusModified=true;}else if(batchOfLikers[i].userId==session.user.userId&&likerStatus){return batchOfLikers;}else if(!vm.hasMore&&likerStatus&&i===batchOfLikers.length-1){var self={userId:session.user.userId,name:session.user.profile};batchOfLikers.push(self);likeStatusModified=true;}}
return batchOfLikers;}
ab.ready.then(function(){vm.inSuperLikeExperiment=ab.variant('PAID_LIKES')==='B';if(vm.inSuperLikeExperiment){vm.getLikes();}else{vm.getLikes('regular');}});});angular.module('younow.modals.login',[]).controller('LoginModalCtrl',function($scope,$rootScope,$timeout,$interval,$modalInstance,session,Api,config,$state,broadcasterService,soft,source,trackingPixel,data){$scope.base=config.settings.ServerCDNBaseUrl;$scope.soft=soft;$scope.loggingIn={};$scope.data=data||{};if(!$scope.data.title){$scope.data.title='loginmodal_title';}
if(!source){source=$state.$current.name;}
$timeout(function(){if(source==='LINK'){if($state.is('main.channel.detail')){source=broadcasterService.async?'LINK_PROFILE':'LINK_LIVE';}else{source="LINK_OTHER";}}
$rootScope.gaEvent('LOGIN','PROMPT',source);},500);$scope.showMoreOptions=function(){$scope.moreOptions=true;};$scope.cancel=function(){$modalInstance.dismiss('Modal closed without authenticating');};$scope.login=function(type){if(!$scope.attemptedLogin){$scope.attemptedLogin=true;}
$scope.loggingIn[type]=true;checkPopup(type);$rootScope.gaEvent('LOGIN','ATTEMPT_'+type.toUpperCase(),source);trackingPixel.trackClick('LOGIN',{field1:type.toUpperCase(),field2:source.toUpperCase()});if(session.authenticate[type]){$timeout(function(){session.auth(type).then(function(response){if(response&&response.data&&response.data.id){if(response.data.newUser){$rootScope.gaEvent('LOGIN','LOGIN_NEW_'+type.toUpperCase()+'',source);}else{$rootScope.gaEvent('LOGIN','LOGIN_RETURNING_'+type.toUpperCase()+'',source);}
$timeout(function(){$modalInstance.close(response);},300);if(response.data.coinFeedbackCopy&&response.data.coinFeedbackAmount){Api.showTopNotification(response.data.coinFeedbackCopy+' <img class="coin-sm" src="'+config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images/icons_v3/menu_user_coins1.png">'+response.data.coinFeedbackAmount,'now',false,undefined,5000);}}
else{rejectLogin('Unsuccessful');}
$scope.loggingIn[type]=false;}).catch(function(){$scope.loggingIn[type]=false;rejectLogin('Failed to login');});},0);}else{rejectLogin('Invalid auth method');}};function checkPopup(type){var secondsOpened=0;var checkIfClosed=$interval(function(){secondsOpened++;if(secondsOpened===60&&window[type+'Popup']&&window[type+'Popup'].close){window[type+'Popup'].close();window[type+'Popup']=null;}
if(secondsOpened===20&&type==='google'){$scope.loggingIn[type]=false;window[type+'Popup']=null;$interval.cancel(checkIfClosed);}
if(window[type+'Popup']&&window[type+'Popup'].closed){$scope.loggingIn[type]=false;window[type+'Popup']=null;$interval.cancel(checkIfClosed);}},1000);}
var rejectLogin=function(reason){$modalInstance.dismiss(reason);};});angular.module('younow.modals.media-player-modal',[]).controller('MediaPlayerModalCtrl',["$rootScope","$scope","$modalInstance","config","Api","session","broadcastId","trackingPixel","$interval","$timeout","$state","params","broadcast","broadcasterService","swf","$window","$modal",function($rootScope,$scope,$modalInstance,config,Api,session,broadcastId,trackingPixel,$interval,$timeout,$state,params,broadcast,broadcasterService,swf,$window,$modal){var vm=this,player,onbeforeunloadChannel;onbeforeunloadChannel=window.onbeforeunload;$scope.session=session;var ptSeconds=0;var ptInterval;var archiveStartTime=new Date().getTime(),archiveLoadTime=0,archiveLoadState='abandon',archiveReadyTime=0,archiveWaitTime=0,archiveStreamType,archiveSource,archiveServer,archiveErrorMsg='';if(params&&params.start!==undefined){$state.params.copy=params.start;delete params.start;}
vm.channel={};vm.broadcast={};trackingPixel.archiveActive=true;if(!window.YouNow.track.pageFirst){window.waitForPageType=false;$rootScope.gaPage({pageType:'archived broadcast'});}
Api.get('BROADCAST_VIDEO_PATH',{broadcastId:broadcastId},true).then(function(response){archiveWaitTime=new Date().getTime()-archiveStartTime;if(response.data.errorCode){var errorMsg='Error '+response.data.errorCode+': '+response.data.errorMsg;if(response.data.errorCode==248){errorMsg='Sorry, this broadcast is not ready to replay. Check back soon!';}
Api.showTopNotification(errorMsg);archiveLoadState='loadError';archiveErrorMsg=response.data.errorCode;$modalInstance.dismiss();}else if(!response.data.videoAvailable){Api.showTopNotification('Sorry, this video is not available');archiveLoadState='loadError';archiveErrorMsg='noVideoAvailable';$modalInstance.dismiss();}else{if(response.data.stream){if(response.data.stream.indexOf('amazons3')!=-1){archiveSource='s3';}else if(response.data.stream.indexOf('wowza')!=-1){archiveSource='wowza';}else{archiveSource='other';}}
if(response.data.server){archiveServer=response.data.server.split('/')[2].split('.')[2];}
var hls=response.data.hls;swf.oldVolume=swf.volume||Api.store("younowVol")||0;swf.volume=0;swf.setMiniPlayerVolume();vm.broadcast=broadcasterService.channelFormat(response.data,broadcast);vm.broadcast.broadcastId=vm.broadcast.broadcastId||broadcastId;vm.broadcast.downloadUrl=broadcasterService.getDownloadUrl(vm.broadcast.broadcastId);var file;file=hls&&(hls.indexOf('ynassets.younow.com')!==-1||hls.indexOf('hls.younow.com')!==-1)?hls:response.data.server+'&'+response.data.stream;archiveStreamType=file.indexOf('rtmp')!==-1?'rtmp':'hls';vm.playerOptions={'url':file,'onReady':function(e){archiveReadyTime=new Date().getTime()-archiveStartTime;if(e&&e.volume){e.volume(swf.oldVolume/100);}
this.onPlay();},'onPlay':function(){if(archiveLoadTime===0){archiveLoadState='success';archiveLoadTime=new Date().getTime()-archiveStartTime;trackingPixel.capture({event:'ARCHIVE_LOAD_TIME',coins:archiveLoadTime,broadcastid:vm.broadcast.broadcastId,extradata:((vm.seekInitial>0||!params.source)?'DEEP':params.source),sourceid:(vm.seekInitial||0)});}
if(!vm.seekInterval){player=vm.playerOptions.playerEl;vm.seekInit();}
if(!ptInterval){ptInterval=$interval(function(){ptSeconds++;},1000);}},'onPause':function(){$interval.cancel(ptInterval);ptInterval=false;ptSeconds++;},'onError':function(data){$interval.cancel(vm.seekInterval);var error=data.error();archiveLoadState='playError';archiveErrorMsg=Api.pixelSafe(error.code+'_'+error.message,300);},'player':{poster:config.imageApis.broadcast+'/'+broadcastId+'/'+broadcastId+'.jpg',width:592,height:444,controls:true,autoplay:true}};Api.get('CHANNEL_INFO',{channelId:vm.broadcast.userId},true).then(function(response){if(response.data.errorCode){console.warn('CHANNEL_INFO',response.data.errorCode,response.data.errorMsg);}else{vm.channel=broadcasterService.channelFormat(response.data);swf.snapshotLinks({'broadcast':vm.broadcast}).then(function(data){vm.links=data;vm.broadcast.sharePath=data.COPIEDURL;vm.broadcast.shareTitle=vm.broadcast.broadcastTitle.replace(/\s/g,'-')+'';vm.broadcast.href=vm.broadcast.sharePath+'/'+vm.broadcast.shareTitle;});}});}});vm.seekClick=function($event){player.currentTime(vm.broadcast.length*vm.broadcast.offsetXFraction);};vm.seekMove=function($event){if($event.offsetX&&$event.offsetX>0.01){vm.broadcast.offsetX=$event.offsetX;vm.broadcast.offsetXFraction=($event.offsetX/592);vm.broadcast.offsetXString=seekSecsToString(parseInt(vm.broadcast.length*vm.broadcast.offsetXFraction));}};var seekSecsToString=function(secs){var hrs=(Math.floor(secs/3600)||'')+'';var hrs_='';if(hrs){hrs_=':';}
var min=(Math.floor((secs%3600)/60)||'0');var _min='';if(min<10||min=='0'){_min='0';}
var min_=':';var _sec='';var sec=(secs%60)||'0';if(sec<10||sec=='0'){_sec='0';}
var string=hrs+hrs_+_min+min+min_+_sec+sec;return string;};var seekStringToSecs=function(str){var num=0;var arr=str.split(':');var re=0;if(arr[0]){arr=arr.reverse();var i=0;while(i<3){var nu=re+(parseInt(arr[i])||0);re=0;if(nu>59){re=Math.floor(nu/60);nu=nu%60;}
num+=nu*Math.pow(60,i);i++;}}
return num;};var seekStringToString=function(str){if(!str||str.indexOf(',-')>-1){return'00:00';}
str=str.replace(/[^\d:]/g,'');var sec=seekStringToSecs(str);if(sec){str=seekSecsToString(sec);return str;}else{return'00:00';}};vm.seekString=vm.seekValue=vm.broadcast.seekString=seekStringToString($state.params.copy);vm.seekInitial=vm.seekSec=seekStringToSecs(vm.seekString);if($state.params.copy){$rootScope.gaEvent('FEATURE','archived_seek',$state.params.copy);}
vm.seekInit=function(){vm.seekOn=false;vm.seekString=vm.seekValue=vm.broadcast.seekString=seekStringToString($state.params.copy);vm.seekInitial=vm.seekSec=seekStringToSecs(vm.seekString);if(vm.seekSec){player.currentTime(vm.seekSec);}
vm.seekWatch();if(player.duration()>2){player.ended(vm.seekReset);}
$state.params.copy='';};vm.seekReset=function(){$interval.cancel(vm.seekInterval);player.currentTime(0);$timeout(function(){vm.seekInit();},500);$timeout(function(){if(player.duration()>=0){player.pause();}},1000);};vm.seekWatch=function(){vm.seekInterval=$interval(function(){vm.seekSec=Math.floor(player.currentTime());vm.broadcast.positionXFraction=vm.seekSec/vm.broadcast.length;vm.broadcast.positionX=vm.broadcast.positionXFraction*593;vm.broadcast.positionXString=seekSecsToString(parseInt(vm.seekSec));if(!vm.seekOn){vm.seekString=seekSecsToString(vm.seekSec);vm.seekValue=vm.seekString;vm.broadcast.href=vm.broadcast.sharePath+'/'+vm.broadcast.shareTitle;}else{vm.broadcast.href=vm.broadcast.sharePath+'/'+vm.seekValue;}},1000);};vm.seekCheck=function(){if(!vm.seekOn){vm.broadcast.seekString=null;vm.broadcast.href=vm.broadcast.sharePath+'/'+vm.broadcast.shareTitle;}else{vm.broadcast.seekString=vm.seekString;vm.broadcast.href=vm.broadcast.sharePath+'/'+vm.broadcast.seekString;}};vm.seekFocus=function(){vm.seekOn=true;vm.seekValueBefore=vm.seekValue;};vm.seekChange=function(){console.log('Clicking around seek: ',player.currentTime());vm.seekOn=true;$timeout.cancel(vm.seekValueTimeout);vm.seekValueTimeout=$timeout(vm.seekBlur,2000);};vm.seekBlur=function(){if(vm.seekValueBefore!=vm.seekValue){var str=vm.seekValue=seekStringToString(vm.seekValue);var sec=seekStringToSecs(str);player.currentTime(sec);}};vm.shareFacebook=function(){FB.ui({method:'share',href:vm.links.FACEBOOK,});};vm.shareTwitter=function(){var go='https://twitter.com/intent/tweet?text=I just watched an awesome %23YouNow broadcast. '+vm.links.TWITTER;Api.openPopup('Tweet',go);};$scope.vm=vm;var trackClose=function(){trackingPixel.archiveActive=false;if(archiveLoadTime===0){archiveLoadTime=new Date().getTime()-archiveStartTime;}
return trackingPixel.capture({event:'ARCHIVE_VIEW',unspentcoins:archiveWaitTime,broadcastscount:archiveReadyTime,coins:archiveLoadTime,points:ptSeconds,broadcastid:broadcastId,extradata:((vm.seekInitial>0||!params.source)?'DEEP':params.source),sourceid:(vm.seekInitial||0),field1:archiveLoadState,field2:archiveStreamType,field3:archiveSource,field4:archiveServer,field7:archiveErrorMsg});};$scope.$on('$destroy',function(){swf.volume=swf.oldVolume||100;swf.setMiniPlayerVolume();$interval.cancel(ptInterval);$interval.cancel(vm.seekInterval);trackClose('channel',{});$window.onbeforeunload=onbeforeunloadChannel;onbeforeunloadChannel=null;});$window.onbeforeunload=function(e){trackClose('channel',{});};trackingPixel.capture({event:'ARCHIVE_ATTEMPT',broadcastid:broadcastId,extradata:((vm.seekInitial>0||!params.source)?'DEEP':params.source),sourceid:(vm.seekInitial||0)});}]);angular.module('younow.mention',[]).directive('contenteditable',["$sce","$timeout","config",function($sce,$timeout,config){return{restrict:'A',require:'?ngModel',link:function(scope,element,attrs,ngModel){scope.nothumb=config.imageApis.nothumb;function read(){var html=element.html();if(attrs.stripBr&&html==='<br>'){html='';}
ngModel.$setViewValue(html);}
if(!ngModel){return;}
ngModel.$render=function(){if(ngModel.$viewValue!==element.html()){element.html($sce.getTrustedHtml(ngModel.$viewValue||''));}};element.on('blur keyup change',function(){$timeout(read);});read();}};}]);angular.module('younow.miniPlayer',[]).directive('miniPlayer',function($timeout,swf,Api,eventbus,$modal){return{restrict:'E',templateUrl:'angularjsapp/src/app/components/mini-player/mini-player.tpl.html',scope:{broadcast:'=',showBroadcast:'&'},link:function(scope,element,attr){if(window.isPrerender){return false;}
var stream_url='rtmp://'+scope.broadcast.media.host+scope.broadcast.media.app+'/&'+scope.broadcast.media.stream;scope.vm={viewers:Api.squashedNumber(scope.broadcast.viewers),likes:Api.squashedNumber(scope.broadcast.likes),shares:Api.squashedNumber(scope.broadcast.shares),swf:swf,broadcast:scope.broadcast,openProfile:function(){$modal.profileSummary(scope.broadcast.userId);},playerOptions:{url:stream_url,player:{width:500,height:400},onReady:function(el){if(el){el.play();el.tech_.stopTrackingCurrentTime();el.width(280);el.height(210);el.el_.style.visibility="visible";el.el_.style.position="relative";}},onPlay:function(el){var volume=0;if(swf.volume!==undefined){volume=swf.volume/100;}else if(Api.store('younowVol')!==null){volume=Number(Api.store('younowVol'))/100;}
if(!swf.volume){swf.volume=volume;}
el.volume(volume);}}};eventbus.subscribe('miniplayer:mute',function(){if(scope.vm.playerOptions.playerEl){scope.vm.playerOptions.playerEl.volume(swf.volume/100);}},'miniplayer',scope);}};});angular.module('younow.channel.moment-panel',[]).directive('momentPanel',function(swf,trackingPixel,shareService,guestService,Api,session,$timeout,webRtc,guestService,upload,config,$document,$filter,trpx){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/moment-panel/moment-panel.tpl.html',scope:{target:'@',closeCallback:'='},link:function(scope,element,attrs,controller){Api.store('ynMomentCaptured',true);var startedAt=new Date().getTime(),captionKeystrokes=0,trimCount=0,createAttempt=false,postInProcess=false;scope.panel={};scope.panel.swf=swf;scope.panel.guestService=guestService;scope.panel.session=session;scope.panel.inputPlaceholder=$filter('translate')('moment_creation_caption');swf.dimmed=true;scope.vm={moment:{owner:{name:session.user.fullName,userId:session.user.userId},text:'',maxChars:30,charsRemaining:'',placeholder:true}};scope.vm.cdn=config.imageApis;scope.vm.highlightClick=function(){document.getElementById('moment-caption-input').focus();};$timeout(function(){scope.vm.doAnimation();},500);scope.panel.slider={left:0,right:100,width:280};var handle={left:angular.element(document.getElementById('slider-handle-left')),right:angular.element(document.getElementById('slider-handle-right'))};var dim={left:angular.element(document.getElementById('slider-dim-left')),right:angular.element(document.getElementById('slider-dim-right'))};var wall={top:angular.element(document.getElementById('slider-wall-top')),bottom:angular.element(document.getElementById('slider-wall-bottom'))};scope.panel.broadcastOriginalVolume=swf.volume;shareService.preShareVolume=scope.panel.broadcastOriginalVolume;swf.setVolume(0);scope.panel.close=function(){swf.setVolume(scope.panel.broadcastOriginalVolume);swf.dimmed=false;if(scope.closeCallback){scope.closeCallback();}
swf.activeChatTab='Chat';};scope.panel.postMoment=function(){if(postInProcess){return false;}
postInProcess=true;var data=scope.panel.getSegments();var panelEditingTime=Math.round((new Date().getTime()-startedAt)/1000);createAttempt=true;data.text=scope.vm.moment.text;data.thumbnail=Api.base64ToFile(swf.moment.previews[0]);data.userId=swf.currentSession.userId;data.channelId=swf.broadcast.userId;upload({url:Api.generateDynamicApi('MOMENT_CREATE'),method:'POST',withCredentials:true,headers:{'X-Requested-By':session.user.requestBy},data:data}).then(function(response){postInProcess=false;if(response.data&&response.data.errorCode===0){Api.showTopNotification('<div class="moment-create-notif">'+$filter('translate')('moment_created',{emoji:Api.convertEmoji("Ã°Å¸ËÅ½")})+('</div>'),'moment',false,'',10000);swf.shareMoment(response.data.momentId);trpx.capture({'event':'MOMENT_POST_SUCCESS','unspentcoins':trimCount,'coins':data.startSegmentOffset,'points':data.trimmedLength,'sourceid':response.data.momentId,},trpx.captureGroups.trackevents);}else{Api.showError(response.data);trpx.capture({'event':'MOMENT_ABANDON','extradata':scope.vm.moment.text,'broadcastscount':panelEditingTime,'unspentcoins':trimCount,'coins':data.startSegmentOffset,'points':data.trimmedLength,'field1':captionKeystrokes,'field2':response.data.errorCode,'field3':response.data.errorMsg},trpx.captureGroups.trackevents);}});trpx.capture({'event':'MOMENT_POST','extradata':scope.vm.moment.text,'broadcastscount':panelEditingTime,'unspentcoins':trimCount,'coins':data.startSegmentOffset,'points':data.trimmedLength,'field1':captionKeystrokes,},trpx.captureGroups.trackevents);};scope.panel.moveSlider=function(side,e){var progressBar=angular.element(document.getElementById('moment-progress'));progressBar.addClass('quick-return');swf.moment.options.playerEl.pause();var startX=e.screenX;var minRange=swf.moment.length<swf.moment.minLength?swf.moment.length:(swf.moment.minLength/swf.moment.length*100);var sliderStart=scope.panel.slider[side];var max=side==="left"?(scope.panel.slider.right-minRange):100;var min=side==="right"?(scope.panel.slider.left+minRange):0;var mousemove=function(e){var newPos=sliderStart+((e.screenX-startX)*100/scope.panel.slider.width);if(newPos<min){newPos=min;}
if(newPos>max){newPos=max;}
scope.panel.updatePreview(newPos);scope.panel.sliderPos(side,newPos);};var mouseup=function(e){scope.panel.scrublord=false;$document.off('mousemove',mousemove);$document.off('mouseup',mouseup);scope.panel.updatePlayer();$timeout(function(){progressBar.removeClass('quick-return');},100);};$document.on('mousemove',mousemove);$document.on('mouseup',mouseup);scope.panel.updatePreview(sliderStart);trimCount++;};scope.panel.sliderPos=function(side,pos){handle[side].css('left',pos+'%');scope.panel.slider[side]=pos;var offset=side==='left'?pos:100-pos;dim[side].css('width',offset+'%');wall.top.css(side,offset+'%');wall.bottom.css(side,offset+'%');};scope.panel.updatePlayer=function(){swf.moment.start=scope.panel.slider.left;swf.moment.end=scope.panel.slider.right;var startTime=swf.moment.length-(swf.moment.length/100*(100-swf.moment.start));swf.moment.options.playerEl.currentTime(startTime);swf.moment.options.playerEl.play();scope.panel.getSegments();};scope.panel.updatePreview=function(pos){var newPreview=Math.round(swf.moment.previews.length/100*pos);if(newPreview!=scope.panel.preview){$timeout(function(){scope.panel.preview=newPreview;});}
scope.panel.scrublord=true;};scope.panel.getSegments=function(){var data={};var startTime=swf.moment.length-(swf.moment.length/100*(100-swf.moment.start));var endTime=swf.moment.length-(swf.moment.length/100*(100-swf.moment.end));var hls=swf.moment.options.playerEl.tech({IWillNotUseThisInPlugins:true}).hls;var segments=[];if(hls){segments=hls.playlists.media().segments;}else{for(var i=swf.moment.initial.startSegment;i<=swf.moment.initial.endSegment;i++){segments.push({'duration':2,'uri':'fake/'+i+'.ts'});}}
data.startSegment=segments[0].uri.split("/").pop().split(".")[0];data.startSegmentOffset=0;data.endSegment=segments[segments.length-1].uri.split("/").pop().split(".")[0];data.endSegmentOffset=0;data.trimmedLength=endTime-startTime;if(swf.moment.start!==0||swf.moment.end!==100){var currentSegmentEnd,currentSegmentStart=0;angular.forEach(segments,function(segment,i){currentSegmentEnd=currentSegmentStart+segment.duration;if(startTime>currentSegmentStart&&startTime<=currentSegmentEnd){data.startSegment=segment.uri.split("/").pop().split(".")[0];data.startSegmentOffset=(startTime-currentSegmentStart).toFixed(3);}
if(endTime>currentSegmentStart&&endTime<=currentSegmentEnd){data.endSegment=segment.uri.split("/").pop().split(".")[0];data.endSegmentOffset=(currentSegmentStart+segment.duration-endTime).toFixed(3);}
currentSegmentStart+=segment.duration;});}
return data;};scope.panel.updateCaption=function(){captionKeystrokes++;scope.vm.moment.charsRemaining=scope.vm.moment.text.length===0?'':scope.vm.moment.maxChars-scope.vm.moment.text.length;};scope.$on('$destroy',function(){var data=scope.panel.getSegments();if(swf.activeChatTab==='Chat'){swf.setVolume(shareService.preShareVolume);}
var panelEditingTime=Math.round((new Date().getTime()-startedAt)/1000);if(!createAttempt){trpx.capture({'event':'MOMENT_ABANDON','extradata':scope.vm.moment.text,'broadcastscount':panelEditingTime,'unspentcoins':trimCount,'coins':data.startSegmentOffset,'points':data.trimmedLength,'field1':captionKeystrokes},trpx.captureGroups.trackevents);}
swf.moment=null;shareService.preShareVolume=undefined;});}};});angular.module('younow.modals.onboarding-modal',[]).controller('OnboardingModalCtrl',function(Api,trpx,session,config,$scope,$modalInstance,data){var locale=config.UILocale,imageApis=config.imageApis,batchfanParams={userId:session.user.userId,locale:locale,users:''};$scope.onboardingList=[];$scope.batchFanList=[];$scope.experiment=data.variant;$scope.closeOnboardingModal=function(){$modalInstance.close();trpx.capture({event:'CLICK',userid:session.user.userId,extradata:'ONBOARD_SKIP'},trpx.captureGroups.trackevents);};$scope.fanAll=function(){$scope.batchFanList=mutateBatchFanList($scope.onboardingList);batchfanParams.users=$scope.batchFanList;postBatchFan(batchfanParams);trpx.capture({event:'CLICK',userid:session.user.userId,extradata:'ONBOARD_CONTINUE'},trpx.captureGroups.trackevents);};$scope.toggleFanned=function(id){for(var i=0;i<$scope.onboardingList.length;i++){var onboardingListItem=$scope.onboardingList[i];if(onboardingListItem.userId===id){onboardingListItem.fanned=!onboardingListItem.fanned;trpx.capture({event:'CLICK',userid:session.user.userId,doorid:id,extradata:onboardingListItem.fanned?'ONBOARD_SELECT':'ONBOARD_DESELECT'},trpx.captureGroups.trackevents);break;}}};function shuffle(arr){var input=arr;for(var i=input.length-1;i>=0;i--){var randomIndex=Math.floor(Math.random()*(i+1));var itemAtIndex=input[randomIndex];input[randomIndex]=input[i];input[i]=itemAtIndex;}
return input;}
function mutateBatchFanList(list){var mutatedList=[];for(var i=0;i<list.length;i++){if(list[i].fanned){mutatedList.push(list[i].userId);trpx.capture({event:'BECAME_FAN',userid:session.user.userId,doorid:list[i].userId,extradata:'ONBOARDING'},trpx.captureGroups.trackevents);}}
return mutatedList;}
function postBatchFan(params){if(params.users.length>0){Api.post('CHANNEL_FAN_ON_BOARDING',params).then(function(response){});}
$modalInstance.close();}
function getOnboardingList(locale){Api.get('YOUNOW_ON_BOARDING_VIP_USERS',{locale:locale,origin:data.variant=='H'?'ADMIN_CONFIG':'EPICK'}).then(function(response){var bestBroadcasters=response.data.users;var num;if($scope.experiment=='B'||$scope.experiment=='E'||$scope.experiment=='G'||$scope.experiment=='H'){num=10;}else if($scope.experiment=='C'){num=3;}else if($scope.experiment=='D'){num=0;}else if($scope.experiment=='F'){num=5;}
for(var i=0;i<bestBroadcasters.length;i++){var singleBroadcaster=bestBroadcasters[i];singleBroadcaster.src=imageApis.thumb+'/'+singleBroadcaster.userId+'/'+singleBroadcaster.userId+'.jpg';if(num>i){singleBroadcaster.fanned=true;}
$scope.batchFanList.push(singleBroadcaster.userId);$scope.onboardingList.push(singleBroadcaster);$scope.onboardingList=shuffle($scope.onboardingList);}});}
getOnboardingList(locale);});angular.module('younow.modals.partner',[]).controller('PartnerModalCtrl',["$scope","$timeout","$modalInstance","session","Api","config",function($scope,$timeout,$modalInstance,session,Api,config){$scope.continue=function(){window.open('/partners','_blank');$modalInstance.close();};}]);angular.module('younow.moment',[]).directive('momentCard',function(){return{restrict:'EA',templateUrl:'angularjsapp/src/app/components/post/moment/moment.tpl.html',controller:'MomentCardCtrl',controllerAs:'vm',scope:{moment:'@',delete:'&',hideCollection:'&',updateOnFetch:'&',ordinalRank:'@',getTrending:'&'}};}).controller('MomentCardCtrl',function($window,$element,$scope,$filter,$modal,$timeout,$state,$stateParams,config,Api,session,swf,trpx,shareService,ab,store,$modal){var vm=this;vm.makingPurchase=false;vm.likersPrompt=$filter('translate')('likers_prompt');var swfOldVolume=swf.volume|Api.store('younowVol');var recoveringFromError=false;var deleted=false;vm.location=getLocation();vm.shareSheetVisible=false;var arrowNavigation=function(e){if(e.which){if(e.which===37){vm.fetchMoment({},vm.collection.currentIndex-1,'manual');}else if(e.which===39){vm.fetchMoment({},vm.collection.currentIndex+1,'manual');}}};function getLocation(){if($stateParams.typeOfFeed&&$stateParams.typeOfFeed==='trending'){return'MOMENT_TRENDING';}
if($state.current.name==='main.momentsFeed'){return'MOMENT_FEED';}else if($stateParams.async==='channel'&&$state.current.name==='main.channel.detail'){return'MOMENT_PROFILE';}else if($state.current.name==='main.channel.moment'||$state.current.name==="main.channel.momentCollection"){return'MOMENT_DEEPLINK';}}
vm.locationMap={'YOUNOW_LB_TRENDING_MOMENTS':'MOMENT_TRENDING','MOMENT_FEED':"MOMENT"};var startTime,endTime;var enteredViewTimeout;var loops=0,startedLooping,endedLooping,userTookControl;var likeState="0",collectionStartTime=0,momentsLooped=0,momentsViewed=0,field5=vm.location,momentSource={"main.momentsFeed":"MOMENT_FEED","main.channel.detail":"MOMENT_PROFILE","main.channel.moment":"MOMENT_DEEPLINK"};vm.cdn=config.imageApis;vm.swf=swf;vm.session=session;vm.config=config;vm.playbackProgress=0;vm.shareToggle=false;vm.shareUrl={};vm.tooltipText='click to copy';vm.isAdmin=session.isAdmin();function checkMomentPermissions(owner,broadcaster,userId){var permissions={flagging:true,deleting:false,hiding:false};if(session.administrator||session.moderator){permissions.deleting=true;if(vm.moment.originalType==='collection'){permissions.hiding=true;}}
else if(userId==owner.userId){permissions.deleting=true;permissions.flagging=false;}
else if(userId==broadcaster.userId){if(session.user.partner>0&&config.settings.AllowMomentsDeletionByPartners){permissions.deleting=true;}
if(vm.moment.originalType==='collection'){permissions.hiding=true;}}
return permissions;}
function fetchLikes(id){var likePromise=session.getMomentLike(id);if(likePromise){likePromise.then(function(){likeState=session.momentStatus[id]?"2":"0";if(likeState==="2"&&vm.moment.likes=="0"){vm.moment.likes++;}});}else{likeState=session.momentStatus[id]?"2":"0";if(likeState==="2"&&vm.moment.likes=="0"){vm.moment.likes++;}}
var paidLikePromise=session.getPaidLikes(id);if(paidLikePromise){paidLikePromise.then(function(){vm.moment.userPaidLikes=store.paidLikes[id];});}}
if($scope.moment){$scope.moment=JSON.parse($scope.moment);if($scope.moment.type==='collection'){$scope.momentCollection=$scope.moment;$scope.moment=$scope.moment.firstMoment;$scope.moment.originalType=$scope.momentCollection.originalType;$scope.moment.collectionViews=$scope.momentCollection.broadcastAndMomentsViews?$scope.momentCollection.broadcastAndMomentsViews:undefined;$scope.moment.created=$scope.momentCollection.created;vm.collection={momentsIds:$scope.momentCollection.momentsIds,currentIndex:0,collectionId:$scope.momentCollection.collectionId,fetchedMoments:$scope.momentCollection.moments};$scope.moment.broadcaster=$scope.momentCollection.broadcaster;$scope.moment.thumb=$scope.momentCollection.broadcaster;if($scope.momentCollection.momentsIds.length>1){$scope.moment.title=$filter('translate')('broadcast_highlights',{count:$scope.momentCollection.momentsIds.length});}else if($scope.momentCollection.momentsIds.length===1){$scope.moment.title=$filter('translate')('broadcast_highlight_singular');}}else{$scope.moment.originalType='moment';var owner='<a class="name" href="/'+$scope.moment.owner.name+'" prevent-default ng-click="vm.showProfileSummary(vm.moment.owner.userId)">'+$scope.moment.owner.name+'</a>';if($scope.moment.titleType==='guest'){$scope.moment.title=$filter('translate')('guested_with',{owner:owner});}else if($scope.moment.titleType==='selfie'){$scope.moment.title=$filter('translate')('featured_by',{owner:owner});}else if($scope.moment.titleType==='featured'){$scope.moment.title=$filter('translate')('featured_moment',{icon:'<span class="ynicon ynicon-icon_editorschoice"> </span>'});}else if($scope.moment.titleType==='like'){$scope.moment.title=$filter('translate')('liked_this_moment',{person:'<a class="name" href="/'+$scope.moment.friendsLiked[0].name+'" ng-click="vm.showProfileSummary('+$scope.moment.friendsLiked[0].userId+')" prevent-default >'+$scope.moment.friendsLiked[0].name+'</a>'});}else{$scope.moment.title=$filter('translate')('captured_by',{owner:owner});}
$scope.moment.thumb=$scope.moment.owner;}
var timeAgo=Api.timeSince($scope.moment.created);$scope.moment.timeAgo=$filter('translate')(timeAgo.translationKey,{time:timeAgo.unit});patchCapturedBy($scope.moment);$scope.moment.likes=Number($scope.moment.likes);var playerOptions={'url':Api.generateDynamicApi('MOMENT_PLAYLIST')+'/'+$scope.moment.momentId+'/'+$scope.moment.momentId+'.m3u8','onLoadedMetadata':function(e){var totalDuration=e.duration();var playlist=e.tech({IWillNotUseThisInPlugins:true});if(playlist.hls){playlist=playlist.hls.playlists.media();startTime=Api.getJsonFromUrl(playlist.segments[0].uri).offset||0;endTime=(totalDuration-Api.getJsonFromUrl(playlist.segments[playlist.segments.length-1].uri).offset)||totalDuration;if(!recoveringFromError){e.currentTime(startTime);}}else{startTime="0";endTime=e.duration();}
if(vm.inView){e.play();}
vm.fetchingMoment=false;$timeout(function(){if(vm.moment.text!==''||vm.moment.topSpender){vm.doAnimation();}},500);},'onCanplay':function(e){e.el_.style['z-index']=2;},'onPlay':function(e){swf.setVolume(0);swf.setMiniPlayerVolume();e.volume(swf.momentVolume);},'onEnded':function(e){if(!userTookControl||vm.shareToggle){e.play();}},'onTimeupdate':function(e){if(e){e.volume(swf.momentVolume);var currentTime=playerOptions.player.techOrder?e.tech_.currentTime():e.currentTime();var progress=((currentTime/endTime)*100);if(progress===null||progress===undefined||isNaN(progress)){return false;}else if(vm.playbackProgress<97){if(!startedLooping){loops++;vm.moment.views++;startedLooping=new Date().getTime();}
if(!collectionStartTime&&vm.moment.originalType==='collection'){collectionStartTime=new Date().getTime();}
vm.playbackProgress=progress;}else{vm.playbackProgress=100;}
if(currentTime>=endTime){loop(e);}
if(currentTime=="0"&&startTime!="0"){e.currentTime(startTime);}}},'onError':function(e){recoveringFromError=true;},'onClick':function(e){if(e){var isPaused=e.paused();if(isPaused){e.play();}else{e.pause();}}},'player':{'autoplay':false,'controls':false,'preload':false,'poster':vm.config.imageApis.moment+'/'+$scope.moment.momentId+'/'+$scope.moment.momentId+'.jpg'}};vm.fanStatus=session.fanStatus;if(!$scope.moment.broadcaster){$scope.moment.broadcaster=$scope.moment.thumb;}
vm.moment=$scope.moment;vm.moment.options=playerOptions;fetchLikes(vm.moment.momentId);}
vm.showProfileSummary=function(id,params,state){$modal.profileSummary(id,params,state);};vm.delete=function(id){Api.post('MOMENT_DELETE',{id:vm.moment.momentId,userId:session.user.userId});if(vm.collection){removeFromCollection('delete',vm.collection.currentIndex);}else{removeFromCollection('delete');}};vm.leftView=function(){$timeout.cancel(enteredViewTimeout);if(vm.moment.options.playerEl&&vm.moment.options.playerEl.pause){vm.moment.options.playerEl.pause();}
if(startedLooping){recordLoops(startedLooping,new Date().getTime(),vm.moment.momentId);}
if(collectionStartTime&&!deleted){trackCollection();}
vm.inView=false;window.removeEventListener('keydown',arrowNavigation);};vm.enteredView=function(){window.addEventListener('keydown',arrowNavigation);enteredViewTimeout=$timeout(function(){playerOptions.url=Api.generateDynamicApi('MOMENT_PLAYLIST')+'/'+vm.moment.momentId+'/'+vm.moment.momentId+'.m3u8';vm.inView=true;},200);};vm.paidLike=function(){if(vm.superLike){
vm.superLike();Â Â Â }Â Â Â };vm.toggleLike=function(){if(!session.loggedIn){session.showLoginModal('','MOMENT_LIKE');return true;}
var apiMethod;if(session.momentStatus[vm.moment.momentId]){likeState="3";session.momentStatus[vm.moment.momentId]=false;vm.moment.likes--;}else{likeState="1";session.momentStatus[vm.moment.momentId]=true;vm.moment.likes++;}
trpx.capture({event:'CLICK',unspentcoins:vm.moment.momentId,extradata:session.momentStatus[vm.moment.momentId]?'LIKE':'UNLIKE',coins:$scope.momentCollection?$scope.momentCollection.collectionId:undefined,sourceid:vm.moment.owner.userId,field1:$scope.ordinalRank,field5:vm.location==='MOMENT_TRENDING'?'MOMENT_TRENDING':'MOMENT',field6:vm.collection?vm.collection.currentIndex:undefined},trpx.captureGroups.trackevents);Api.post('MOMENT_LIKE',{id:vm.moment.momentId,unLike:session.momentStatus[vm.moment.momentId]?0:1,userId:session.user.userId}).then(function(response){if(response.data&&response.data.errorCode!==0||!response.data){session.momentStatus[vm.moment.momentId]=false;vm.moment.likes--;}});};vm.toggleMute=function(){swf.momentVolume=swf.momentVolume===0?100:0;if(vm.moment.options.playerEl){vm.moment.options.playerEl.volume(swf.momentVolume);}};vm.fetchMoment=function(collection,index,manual){var carousel=document.getElementById('moment-carousel-'+vm.collection.collectionId);var oldIndex=vm.collection.currentIndex;var promise;if(vm.collection.momentsIds.length>index&&index>0){vm.collection.currentIndex=index;}else{vm.collection.currentIndex=0;}
if(!vm.collection.fetchedMoments){promise=Api.get('MOMENT_COLLECTION',{broadcastId:$scope.momentCollection.broadcastId}).then(function(response){for(var i=0;i<response.data.moments.length;i++){if(vm.collection.momentsIds.indexOf(response.data.moments[i].momentId)===-1){response.data.moments.splice(i,1);}}
vm.collection.fetchedMoments=response.data.moments;reloadMoment();});}else{reloadMoment();}
if(carousel){var carouselThumbs=carousel.getElementsByTagName("li");carouselThumbs[oldIndex].className=carouselThumbs[oldIndex].className.replace("selected","");carouselThumbs[vm.collection.currentIndex].className+=" selected";angular.element(carousel).scrollLeftAnimated(carouselThumbs[vm.collection.currentIndex].offsetLeft-50,500);if(manual&&oldIndex>vm.collection.currentIndex&&oldIndex!=carouselThumbs.length){userTookControl=true;}else{userTookControl=false;}}
momentsViewed++;return promise;};vm.hideMoment=function(index){Api.post('MOMENT_HIDE',{id:vm.collection?vm.collection.momentsIds[index]:vm.moment.momentId,userId:session.user.userId});removeFromCollection('hide',index);};vm.playMoment=function(){if(playerOptions.playerEl){playerOptions.onClick(playerOptions.playerEl);}else{vm.inView=true;}};$scope.$on('$destroy',function(){if(loops===0){loops++;}
swf.setVolume(swfOldVolume);window.removeEventListener('keydown',arrowNavigation);});vm.checkMomentPermissions=function(){vm.momentPermissions=checkMomentPermissions(vm.moment.owner,vm.moment.broadcaster||$scope.momentCollection.broadcaster,session.user.userId);};vm.toggleShare=function(){if(!session.loggedIn){session.showLoginModal('','SHARE_MOMENT');return true;}
var momentId=vm.moment.momentId;shareService.getMomentToShare(momentId,vm.moment.owner.userId,vm.moment.broadcaster.userId).then(function(response){if(response.data.url){if(response.data.url){vm.shareUrl.url=response.data.url;}
if(response.data.twitterHandle){vm.shareUrl.twitterHandle=response.data.twitterHandle;}}});if(!vm.shareSheetVisible){vm.shareSheetVisible=vm.shareSheetVisible?false:true;userTookControl=true;}else{vm.shareSheetVisible=vm.shareSheetVisible?false:true;userTookControl=false;}};vm.showLikes=function(){if(vm.moment.likes>0){trpx.capture({event:'CLICK',field1:'LIKERS_LIST',},trpx.captureGroups.trackevents);$modal.likersModal(vm.moment.momentId,vm.session.momentStatus[vm.moment.momentId]);}};vm.closeShareSheet=function(){vm.shareToggle=false;userTookControl=false;};vm.setUserControl=function(newSetting){userTookControl=newSetting;};vm.addLike=function(){if(likeState!=="1"){likeState="1";session.momentStatus[vm.moment.momentId]=true;}};vm.shareFacebook=function(){var ynUsername=vm.moment.broadcaster?vm.moment.broadcaster.name:$scope.momentCollection.broadcaster.name;var trackingArgs={'event':'CLICK','extradata':'SHARE','field1':'FACEBOOK','field2':vm.location||"OTHER"};shareService.clientShareFacebook(vm.shareUrl,ynUsername,trackingArgs);};vm.shareTwitter=function(){var twitterHandle=vm.moment.broadcaster?vm.moment.broadcaster.name:$scope.momentCollection.broadcaster.name;var trackingArgs={'event':'CLICK','extradata':'SHARE','field1':'TWITTER','field2':vm.location||"OTHER"};shareService.clientShareTwitter(vm.shareUrl,twitterHandle,trackingArgs);};vm.copiedShareUrl=function(){if(Api.browser.name=='Safari'){vm.tooltipText="â + c to copy";}else{vm.tooltipText="copied to clipboard";}
var trackingArgs={'event':'CLICK','extradata':'SHARE','field1':'COPY_LINK','field2':vm.location||"OTHER"};trpx.capture(trackingArgs,trpx.captureGroups.trackevents);};function reloadMoment(){vm.moment.options.backgroundImage=vm.config.imageApis.moment+'/'+vm.collection.fetchedMoments[vm.collection.currentIndex].momentId+'/'+vm.collection.fetchedMoments[vm.collection.currentIndex].momentId+'.jpg';if(startedLooping){recordLoops(startedLooping,new Date().getTime(),vm.moment.momentId);}
vm.fetchingMoment=true;angular.merge(vm.moment,vm.collection.fetchedMoments[vm.collection.currentIndex]);fetchLikes(vm.moment.momentId);vm.playbackProgress=0;if(vm.moment.text!==''){vm.removeAnimation();}
if(playerOptions.playerEl){playerOptions.playerEl.pause();}
var momentUrl=Api.generateDynamicApi('MOMENT_PLAYLIST')+'/'+vm.moment.momentId+'/'+vm.moment.momentId+'.m3u8';playerOptions.url=momentUrl;if($scope.updateOnFetch){$scope.updateOnFetch({moment:vm.collection.fetchedMoments[vm.collection.currentIndex]});}
patchCapturedBy(vm.moment);if(store.topSpenderStatus[vm.moment.momentId]){vm.moment.topSpender={name:session.user.profile,userId:session.user.userId,paidLikes:store.paidLikes[vm.moment.momentId]};}
if(store.paidLikesAndLikesCount[vm.moment.momentId]){vm.moment.likes=store.paidLikesAndLikesCount[vm.moment.momentId];}
return playerOptions.playerEl.src({src:momentUrl,type:'application/x-mpegURL'});}
function recordLoops(startTime,endTime,id){if(deleted){return false;}
var timeViewed=endTime-startTime;var post=Api.post('MOMENT_VIEWED',{id:vm.moment.momentId,loops:loops,timeViewed:Math.ceil(timeViewed/1000),userId:session.user.userId});if(post.then){post.then(function(response){if(response.data&&response.data.momentViews){if(vm.moment.momentId===id){vm.moment.views=response.data.momentViews;}}});}
trpx.capture({event:'MOMENT_VIEW',unspentcoins:vm.moment.momentId,extradata:vm.moment.titleType|'collection',coins:$scope.momentCollection?$scope.momentCollection.collectionId:undefined,points:Math.ceil(timeViewed/1000),sourceid:vm.moment.owner.userId,field1:""+(Number($scope.ordinalRank)+1)+"",field2:""+loops+"",field5:field5,field7:likeState},trpx.captureGroups.trackevents);startedLooping=undefined;loops=0;}
function patchCapturedBy(moment){if(moment.text===""&&moment.titleType!=='guest'&&moment.titleType!=='selfie'||(moment.text===""&&moment.titleType==='capture'&&moment.originalType==='collection')){moment.text=$filter('translate')('moment_placeholder');moment.placeholder=true;}else{moment.placeholder=false;}}
function trackCollection(){var timeViewed=Math.ceil((new Date().getTime()-collectionStartTime)/1000);var moment=vm.collection?$scope.momentCollection:vm.moment;trpx.capture({event:'COLLECTION_VIEW',points:timeViewed,coins:""+momentsViewed+"",sourceid:session.fanStatus[moment.broadcaster.userId]?1:0,field2:""+momentsLooped+"",field4:""+moment.momentsIds.length||1+"",field5:field5,field6:""+(vm.collection?vm.collection.currentIndex+1:1)+""},trpx.captureGroups.trackevents);momentsLooped=0;momentsViewed=0;collectionStartTime=0;}
function loop(e){momentsLooped++;loops++;vm.moment.views++;vm.moment.collectionViews++;vm.playbackProgress=100;e.currentTime(startTime);if(!userTookControl&&vm.collection&&vm.moment.originalType==='collection'){vm.fetchMoment({},vm.collection.currentIndex+1);}}
function removeFromCollection(type,index){if(index!==undefined){vm.collection.momentsIds.splice(index,1);}
if(!vm.collection||vm.collection.momentsIds.length===0){if(type==='hide'){$scope.hideCollection();}else if(type==='delete'){$scope.delete();}}else{if(vm.collection.fetchedMoments){vm.collection.fetchedMoments.splice(index,1);}
vm.collection.refreshingCarousel=true;$timeout(function(){vm.collection.refreshingCarousel=false;},0);vm.fetchMoment({},index);}}
ab.ready.then(function(){vm.inExperiment=ab.variant('TRENDING_MOMENTS')==='B';vm.inSuperLikeExperiment=ab.variant('PAID_LIKES')==='B';if(vm.inSuperLikeExperiment){vm.superLikeGoodie=store.momentGoodies[0];}});});(function(){angular.module('younow.paidLikes',[]).directive('paidLikes',["trpx","Api","$timeout","store","ab","session","$modal","config",function(trpx,Api,$timeout,store,ab,session,$modal,config){return{restrict:'E',replace:true,require:["^momentCard"],templateUrl:'angularjsapp/src/app/components/post/paid-likes/paid-likes.tpl.html',controller:'MomentCardCtrl',scope:{item:'=',location:'@',setUserControl:'&',addLike:'&'},link:function(scope,element,attrs,controller){controller[0].superLike=function(){
triggerSuperLike();Â Â Â };var feedback;var giftCount=0;scope.vm={moment:scope.item,celebrationInProgress:false,feedbackToggle:false,cdn:config.imageApis,session:session};function pulseStuff(){feedback=document.querySelector('#feedback-'+scope.item.momentId+scope.item.originalType);var timeouts=[scope.vm.removeAnimations,scope.vm.fadeaway,scope.vm.startAnimations,scope.vm.timeoutInstance];angular.forEach(timeouts,function(timeout){if(timeout){$timeout.cancel(timeout);}});feedback.classList.remove('fade','display-bars','pulse-bars','pulse-thumb','chill-bars','chill-thumb');scope.vm.startAnimations=$timeout(function(){feedback.classList.add('overlay-active','display-bars','pulse-bars','pulse-thumb');},100);scope.vm.removeAnimations=$timeout(function(){feedback.classList.remove('pulse-bars','pulse-thumb');feedback.classList.add('chill-thumb','chill-bars');},600);scope.vm.fadeaway=$timeout(function(){feedback.classList.remove('display-bars');},800);scope.vm.timeoutInstance=$timeout(function(){paidLike();feedback.classList.remove('chill-bars','chill-thumb','fade');scope.item.paidLikeFeedback=undefined;},1500);}
function triggerSuperLike(){trpx.capture({event:'CLICK',extradata:'PAID_LIKES_MOMENT',},trpx.captureGroups.trackevents);if(scope.vm.celebrationInProgress&&(!store.paidLikes[scope.item.momentId]&&!scope.item.userPaidLikes)){return false;}
if((scope.vm.superLikeGoodie&&session.user.vault.webBars-scope.vm.superLikeGoodie.cost)>=0){scope.setUserControl({value:true});giftCount++;store.paidLikes[scope.item.momentId]=Number(store.paidLikes[scope.item.momentId])+10;scope.item.userPaidLikes=store.paidLikes[scope.item.momentId];scope.item.likes+=10;session.user.vault.webBars=session.user.vault.webBars-scope.vm.superLikeGoodie.cost;pulseStuff();}else{trpx.capture({event:'VIEW',extradata:'BUYBARS',field1:scope.location,userid:session.user.userId},trpx.captureGroups.trackevents);$modal.buyBars(session.user.spendingDisabled);}}
function paidLike(){store.postMomentGift(scope.item.momentId,scope.vm.superLikeGoodie.SKU,giftCount,session.user.userId).then(function(response){if(response.data.errorCode===412||response.data.errorCode===6010||response.data.errorCode===6050){trpx.capture({event:'VIEW',extradata:'BUYBARS',field1:scope.location,userid:session.user.userId},trpx.captureGroups.trackevents);$modal.buyBars(session.user.spendingDisabled);}else if(response.data.errorCode===0){giftCount=0;scope.addLike();session.user.vault.webBars=response.data.bars;scope.item.paidLikeFeedback=response.data;scope.item.likes=scope.item.paidLikeFeedback.totalLikes;if(!response.data.becomeTopSpender){feedback.classList.add('fade');store.paidLikesAndLikesCount[scope.item.momentId]=scope.item.likes;$timeout(function(){feedback.classList.remove('fade','overlay-active');scope.setUserControl({value:false});},600);}
if(response.data.becomeTopSpender){scope.vm.celebrationInProgress=true;feedback.classList.remove('display-bars','pulse-bars','pulse-thumb','chill-bars','chill-thumb');feedback.classList.add('show-celebration','pulse-celebration');$timeout(function(){feedback.classList.remove('pulse-celebration');feedback.classList.add('chill-celebration');},400);$timeout(function(){feedback.classList.add('fade');scope.item.topSpender=angular.copy(response.data.topSpender);scope.item.topSpender.changed=true;store.paidLikesAndLikesCount[scope.item.momentId]=scope.item.likes;store.topSpenderStatus[scope.item.momentId]=true;if(scope.item.topSpender.userId!==session.user.userId){scope.item.topSpender.changed=true;}else{scope.item.topSpender.changed=false;}},1500);$timeout(function(){feedback.classList.remove('fade-celebration','chill-celebration','show-celebration','overlay-active','fade');scope.item.paidLikeFeedback=undefined;},2500);$timeout(function(){scope.setUserControl({value:false});scope.vm.celebrationInProgress=false;},2700);}}});}
ab.ready.then(function(){controller[0].inSuperLikeExperiment=ab.variant('PAID_LIKES')==='B';if(controller[0].inSuperLikeExperiment){scope.vm.superLikeGoodie=store.momentGoodies[0];}});scope.$on('$destroy',function(){
controller[0].superLike=undefined;delete store.topSpenderStatus[scope.item.momentId];delete store.paidLikesAndLikesCount[scope.item.momentId];Â Â });}};}]);})();(function(){angular.module('younow.momentHighlight',[]).directive('momentHighlight',function(){return{restrict:'E',replace:true,templateUrl:function(elem,attr){if(attr.$attr.dynamic){return'angularjsapp/src/app/components/post/moment-highlight/moment-dynamic-highlight.tpl.html';}else{return'angularjsapp/src/app/components/post/moment-highlight/moment-highlight.tpl.html';}},link:function(scope,element,attrs){var waitsForVm=scope.$watch(function(){return scope.vm;},function(newVal,oldVal){if(newVal){scope.vm.doAnimation=function(){element[0].classList.add('pop-highlight');};scope.vm.removeAnimation=function(){element[0].classList.remove('pop-highlight');};waitsForVm();}});}};});})();angular.module('younow.reply',[]).directive('younowReply',function(){return{restrict:'A',replace:true,templateUrl:'angularjsapp/src/app/components/post/reply/reply.tpl.html',controller:'YounowReplyCtrl'};}).controller('YounowReplyCtrl',["$scope",function HomeController($scope){if($scope.reply){$scope.post=$scope.preparePost($scope.reply);}}]);angular.module('younow.post',[]).directive('younowPost',function(){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/post/post.tpl.html',controller:'YounowPostCtrl'};}).controller('YounowPostCtrl',["$scope","$http","config","Api","session","pusher","broadcasterService","$filter","$translate","$modal",function($scope,$http,config,Api,session,pusher,broadcasterService,$filter,$translate,$modal){$scope.session=session;$scope.broadcasterService=broadcasterService;$scope.baseUrl=config.settings.ServerCDNBaseUrl;$scope.imageApis=config.imageApis;var init=function(){if($scope.post.media&&$scope.post.media.embedly&&!$scope.post.media.embedly.provider_url.match(Api.regexStore.embedlyWhiteList)){$scope.$destroy();}else{$scope.post=$scope.preparePost($scope.post);}};$scope.preparePost=function(post){if(post){post=Api.replaceMentions(post);post.post=Api.convertEmoji(Api.linkify(post.post));post=setLikeStatus(post);post=prepareMedia(post);post.changeLikes=function(change){post.likesCount=post.likesCount?post.likesCount+change:change;post.like.type=2;post=setLikeStatus(post);};post.post=Api.trustedHTML(post.post);}
return post;};var prepareEmbedly=function(post){if(post.media&&post.media.embedly){if(post.media.embedly.html){post.embed='iframe';}else if(post.media.embedly.type==='image'){post.embed='embedlyimage';}else if(post.media.embedly.type==='link'&&post.media.embedly.thumbnail_url){post.embed='link';}}
if(post.post.indexOf('<')>-1&&post.post.indexOf('>'>-1)&&post.embed){post.post=post.post.substr(0,post.post.indexOf('<'));}
return post;};var prepareMedia=function(post){if(post.media){if(post.media.broadcast){post.downloadUrl=broadcasterService.getDownloadUrl(post.media.broadcast.broadcastId);}
if(post.media.type=='4'){post.embed='video';}else if(post.media.type=='5'){post.embed='archive';if(post.media.broadcast.broadcastLength){post.media.broadcast.broadcastLengthNice=$filter('date')(post.media.broadcast.broadcastLength*1000,'mm:ss');if(post.media.broadcast.broadcastLength>=3600){post.media.broadcast.broadcastLengthNice=Math.floor(post.media.broadcast.broadcastLength/3600)+":"+post.media.broadcast.broadcastLengthNice;}}}else if(post.media.type=='6'){post.embed='snapshot';}else if(post.media.type=='1'||post.media.type=='2'){post.embed='uploadimage';}}
return post;};var setLikeStatus=function(post){if(!post.like){post.like={type:0};post.likesCount=0;}
switch(post.like.type){case 1:$translate('like_who',{value:Api.fullName(post.like.user)}).then(function(translated){post.likeText=translated;});post.liked=false;break;case 2:$translate('like_you_others',{value:post.likesCount}).then(function(translated){post.likeText=translated;});post.liked=false;break;case 3:$translate('like_you',{}).then(function(translated){post.likeText=translated;});post.liked=true;break;case 4:if(post.likesCount===2){$translate('like_you_other',{}).then(function(translated){post.likeText=translated;});}else{$translate('like_you_others',{value:post.likesCount}).then(function(translated){post.likeText=translated;});}
post.liked=true;break;default:post.likeText='';post.liked=false;}
return post;};var setLikeType=function(post){if(!post.likesCount){post.like.type=0;}else if(!post.liked){post.like.type=post.likesCount===1?1:2;}else{post.like.type=post.likesCount===1?3:4;}
return post;};$scope.trustedSrc=function(src){return Api.trustedSrc(src);};$scope.toggleLike=function(post){if(!session.loggedIn){session.showLoginModal('','POST_LIKE');return true;}
var apiMethod;if(post.liked){post.liked=false;post.likesCount--;apiMethod='POST_UNLIKE';}else{post.liked=true;post.likesCount++;apiMethod='POST_LIKE';}
Api.post(apiMethod,{userId:session.user.userId,channelId:broadcasterService.channel.userId,id:post.id,isComment:post.parentId?1:0,socket_id:pusher.SDK.connection.socket_id});post=setLikeType(post);post=setLikeStatus(post);};$scope.togglePin=function(post){var apiMethod;if(post.isPinned){post.isPinned=false;apiMethod='post/unpin';}else{if(broadcasterService.channel&&broadcasterService.channel.posts&&broadcasterService.channel.posts[0]){broadcasterService.channel.posts[0].isPinned=false;}
post.isPinned=true;apiMethod='post/pin';}
Api.post(apiMethod,{userId:session.user.userId,channelId:broadcasterService.channel.userId,id:post.id});};$scope.downloadBroadcast=function(post){var params={userId:session.user.userId,channelId:broadcasterService.channel.userId,broadcastId:post.media.broadcast.broadcastId};Api.get('BROADCAST_DOWNLOAD',params).then(function(response){var errorCode=response.data.errorCode;if(errorCode===0)
{window.open(response.data.url);}
else if(errorCode===262)
{$modal.downloadBroadcastModal(params);}
else{Api.showError(response.data);}});};$scope.delete=function(post){Api.post('POST_DELETE',{userId:session.user.userId,channelId:broadcasterService.channel.userId,id:post.id,isComment:post.parentId?1:0});};$scope.moreComments=function(post){var params={postId:post.id,channelId:broadcasterService.channel.userId,numberOfRecords:5,doEnrich:1,startFrom:post.replies.length};if(session.loggedIn){params.userId=session.user.userId;}
Api.get('POST_COMMENTS',params).success(function(data){if(data){for(var i=(data.replies.length-1);i>=0;i--){post.replies.unshift(data.replies[i]);}
post.hasMore=data.hasMore;}else{Api.trackError("Empty post/getComments");}});};init();}]);angular.module('younow.modals.profile-summary',[]).controller('ProfileSummaryCtrl',["$rootScope","$scope","$modalInstance","$timeout","$location","config","Api","session","broadcasterService","params","$modal","$state","$filter","eventbus","swf","upload","guestService",function($rootScope,$scope,$modalInstance,$timeout,$location,config,Api,session,broadcasterService,params,$modal,$state,$filter,eventbus,swf,upload,guestService){if(!session.user){session.user={};}
$scope.modal={reason:params.comment?decodeURIComponent(params.comment):undefined};$scope.base=config.settings.ServerCDNBaseUrl;if(session.user.userId==params.channelId){$scope.thumb=config.imageApis.thumb+'/'+params.channelId+'/'+params.channelId+'.jpg'+'?'+(Math.random()*10000).toFixed();$scope.cover=config.imageApis.cover+'/'+params.channelId+'/'+params.channelId+'.jpg'+'?'+(Math.random()*10000).toFixed();}else{$scope.thumb=config.imageApis.thumb+'/'+params.channelId+'/'+params.channelId+'.jpg'+'?'+(Math.random()*10000).toFixed();$scope.cover=config.imageApis.cover+'/'+params.channelId+'/'+params.channelId+'.jpg'+'?'+(Math.random()*10000).toFixed();}
$scope.nothumb=config.imageApis.nothumb;$scope.session=session;$scope.modal.state=params.state||'';$scope.config=config;$scope.params=params;var openedFrom;if(params.isFlagging){$timeout(function(){$scope.toggleDropdown();},0);}
var follow_icons={'twitter':'ynicon-social-tw','facebook':'ynicon-social-fb','youtube':'ynicon-icon-social-yt','instagram':'ynicon-social-insta','google':'ynicon-social-gp'};var follow_codes={'twitter':2,'facebook':4,'instagram':8,'youtube':16,'google':32};var authed={'twitter':'twitterAuth','facebook':'facebookAuth','instagram':'instagramAuth','youtube':'youTubeAuth','google':'googleAuth'};$scope.sn_titles={'twitter':'Twitter','facebook':'Facebook','instagram':'Instagram','youtube':'YouTube','google':'Google+'};$scope.sn_verb={'twitter':'Follow','facebook':'Follow','instagram':'Follow','youtube':'Subscribe to','google':'Follow'};$scope.sn_verbed={'twitter':'Following','facebook':'Following','instagram':'Following','youtube':'Subscribed to','google':'Following'};function checkIfFollowing(network,options){if($scope.canFollow(network)&&session.user[authed[network]]){Api.get('CHANNEL_IS_FOLLOW',{userId:session.user.userId,channelId:params.channelId,sn:follow_codes[network],followType:openedFrom}).then(function(data){if(data){if(data.data.follow){$rootScope.gaEvent('FOLLOW',network.toUpperCase()+'_FOLLOWING',openedFrom);}
$scope.modal.following.followed=data.data.follow;$scope.modal.state='following';}});}else{$scope.modal.state='following';}}
$scope.canFollow=function(network){if(network=='twitter'||network=='youtube'){return true;}
return false;};$scope.setupFollowing=function(network,options){if(!network){network=params.network;}
if(!params.network&&options){$rootScope.gaEvent('FOLLOW',network.toUpperCase()+'_OPEN',openedFrom);}
$scope.modal.following={network:network,icon:follow_icons[network],back_to_summary:false};if(!session.loggedIn){$modal.loginModal('','FOLLOWING').result.then(function(response){if($scope.user.userId==session.user.userId){return false;}
checkIfFollowing(network,options);});}else{checkIfFollowing(network,options);}};$scope.startFollowing=function(network){$scope.setupFollowing(network);if(session.user&&session.user[authed[network]]){follow(network);}else{$rootScope.gaEvent('CONNECT','ATTEMPT_'+network.toUpperCase(),'FOLLOW');session.authenticate[network]().then(function(data){session.login(data,true).then(function(data){if(data.data.errorCode===0){$rootScope.gaEvent('CONNECT','CONNECT_'+network.toUpperCase(),'FOLLOW');follow(network);}else{$rootScope.gaEvent('CONNECT','ERROR_'+network.toUpperCase()+'_'+data.data.errorCode,'FOLLOW');}});});}};var follow=function(network){$rootScope.gaEvent('FOLLOW',network.toUpperCase()+'_FOLLOW_ATTEMPT',openedFrom);var post={userId:session.user.userId,channelId:params.channelId,sn:follow_codes[network],followType:openedFrom};if(broadcasterService.broadcaster&&broadcasterService.broadcaster.broadcastId){post.broadcastId=broadcasterService.broadcaster.broadcastId;}
Api.post('CHANNEL_FOLLOW',post).success(function(data){if(data.follow){$scope.modal.following.followed=true;$rootScope.gaEvent('FOLLOW',network.toUpperCase()+'_FOLLOW_SUCCESS',openedFrom);}});};if(params.state=='following'){$scope.setupFollowing();}
$scope.openUrl=function(url,source){if($scope.modal.state==='following'){if(source==='link'){$rootScope.gaEvent('FOLLOW',$scope.modal.following.network.toUpperCase()+'_PROFILE_LINK',openedFrom);}
if(source==='button'){$rootScope.gaEvent('FOLLOW',$scope.modal.following.network.toUpperCase()+'_PROFILE_BUTTON',openedFrom);}}
window.open(url,'_blank');};function getUserActions(){if(guestService.guest&&guestService.guest.userId==params.channelId){params.broadcastRelated=1;}
var postData={userId:params.userId,onUserId:params.channelId,broadcastId:params.channelId,userOnly:(params.userOnly||false),broadcastRelated:(params.broadcastRelated||0)};Api.get('GET_USER_ACTIONS',postData).success(function(data){$scope.actions=data.actions;if(session.isMod()||session.user.role==9){$scope.actions.push({"actionId":"1099511627776","actionName":"User Chat Log","actionPath":"chatLogs.php?userId="+params.channelId});if(session.user.role!=9){$scope.actions.push({"actionId":"1099511627776","actionName":"Show User History","actionPath":"moderatorLog.php?userIds="+params.channelId});}
if(broadcasterService.broadcaster&&broadcasterService.broadcaster.userId===params.channelId){$scope.actions.push({"actionId":"1099511627776","actionName":"Broadcast Chat Log","actionPath":"chatLogs.php?broadcastId="+params.broadcastId});}}
for(var i=0;i<data.actions.length;i++){if(data.actions[i].reportOptions){$scope.flags=data.actions[i].reportOptions;break;}}});}
if(params.userId){getUserActions();}
var getInfo=function(){Api.get('CHANNEL_INFO',{channelId:params.channelId},'usecdn').success(function(data){if(!data.userId){Api.showTopNotification('This user is no longer available');$modalInstance.close();return false;}
data=broadcasterService.channelFormat(data);if(data.latestSubscriptions&&Object.keys(data.latestSubscriptions).length>8){var latestSubscriptions=data.latestSubscriptions;var latestSubscriptionsAdd=0;data.latestSubscriptions={};var i=0;for(var k in latestSubscriptions){if(i<8){data.latestSubscriptions[k]=latestSubscriptions[k];}else{latestSubscriptionsAdd++;}
i++;}
data.latestSubscriptionsPlus=(data.latestSubscriptionsPlus||0)+latestSubscriptionsAdd;}
$rootScope.gaPage({page:'Summary',path:'/'+data.profile+'/summary'});data.description=Api.convertEmoji(Api.prepareDescription(data.description));data.location=Api.cleanLocation(data,true);data.fullName=data.useprofile===1?data.profile:data.firstName+" "+data.lastName;data.friendlyName=data.useprofile?data.profile:data.firstName;angular.forEach(data.permissions,function(permission){if(permission.id==="6"){data.channelmanager=true;}
if(permission.id==="8"){data.ambassador=true;}});data.facebookLink=(data.facebookOption=="1"&&data.websiteUrl.length)?data.websiteUrl:'http://www.facebook.com/'+data.facebookId;if(data.facebookLink.substr(0,4)!='http'){data.facebookLink='http://'+data.facebookLink;}
$scope.user=data;try{$scope.user.totalFans=$filter('number')($scope.user.totalFans);$scope.user.totalSubscribers=$filter('number')($scope.user.totalSubscribers);$scope.user.dateString=$filter('date','MM/dd/yyyy')($scope.user.dateCreated.substr(0,10));}catch(e){console.warn('filter error:',e);}
if(broadcasterService.async&&$state.current.name!=='main.explore'){if(broadcasterService.channel.userId===data.userId){openedFrom='PROFILE_OWNER';}else{openedFrom='PROFILE_OTHER';}}
if(!broadcasterService.async&&broadcasterService.broadcaster){if(broadcasterService.broadcaster.userId===data.userId){openedFrom='BROADCASTER';}else{openedFrom=params.source;}}
if($state.current.name==='main.explore'){openedFrom='EXPLORE';}
$scope.openedFrom=openedFrom;if(params.state==='following'){$rootScope.gaEvent('FOLLOW',params.network.toUpperCase()+'_OPEN',openedFrom);}
if(data.twitterHandle&&data.twitterHandle.length>0){$rootScope.gaEvent('FOLLOW','TWITTER_DISPLAY',openedFrom);}
if(data.youTubeChannelId&&data.youTubeChannelId.length>0){$rootScope.gaEvent('FOLLOW','YOUTUBE_DISPLAY',openedFrom);}
Api.get('CHANNEL_SUBSCRIBER_OF',{channelId:$scope.user.userId},true).success(function(data){if(data.subscriberOf){$scope.user.subscriptions=data.subscriberOf;if($scope.user.subscriptions.length>5){$scope.user.subscriptions_extras=$scope.user.subscriptions.splice(4);$scope.user.subscriptions_extras.reverse();}}else{console.error('channel/getSubscriberOf/channelId='+$scope.user.broadcaster.userId+':',data);}});},function(error){getInfo();});};getInfo();$scope.composeMessage=function(){if(params.userId){$scope.modal.state='messaging';}else{session.showLoginModal('','POST').result.then($scope.composeMessage);}};$scope.showNotification=function(type,message){$scope.modal.notifying=true;$scope.modal.notificationType=type;$scope.modal.notificationMessage=message;};$scope.doAction=function(action){$scope.modal.action=action;if(action.needsFlag){$scope.modal.state='flagging';}
else if(action.needsReason){$scope.modal.state='suspending';$scope.modal.actionOptions=config.settings[action.actionOptions];}
else if(action.actionId==="1099511627776"){var path=action.actionPath||'users.php?userId='+params.channelId;var url=config.settings.ServerSecureLocalBaseUrl+'/administrator/'+path;window.open(url,'_blank');}
else{$scope.submitAction();}};$scope.submitAction=function(){if($scope.modal.reasonForm&&!$scope.modal.reasonForm.$valid){Api.triggerTooltip('reason-form-tooltip',2000);return false;}
if($scope.modal.state==='flagging'){if($scope.modal.flag===undefined){Api.triggerTooltip('flagging-tooltip',2000);return false;}
if(!$scope.modal.action){for(var i=0;i<$scope.actions.length;i++){if($scope.actions[i].actionOptions=="FlaggingOptions"){$scope.modal.action=$scope.actions[i];break;}}}}
var apiParams={actionId:$scope.modal.action.actionId,userId:params.userId,onUserId:$scope.user.userId};var apiData={url:Api.generateDynamicApi('DO_ADMIN_ACTION'),withCredentials:true,method:'post',data:apiParams};if(params.momentId){apiData.data.momentId=params.momentId;}
if($scope.modal.reasonOption){apiParams.banReasonId=$scope.modal.reasonOption;}
if($scope.modal.action.needsFlag){if($scope.modal.flag===undefined){return false;}
apiParams.flagId=$scope.modal.flag;}
if($scope.modal.action.needsReason){if(!$scope.modal.reason){return false;}
apiParams.reason=$scope.modal.reason;}
if($scope.modal.action.needsFlag||$scope.modal.action.needsReason){if(params.broadcastId){apiParams.broadcastId=params.broadcastId;}
if(params.comment){apiParams.comment=params.comment;}
apiParams.broadcaster=params.broadcastRelated?1:0;}
var video=document.getElementById('flashObj1');if(video!==null&&(apiData.data.flagId===2||apiData.data.flagId===5)&&!params.sf){eventbus.subscribe('swf:snapshot',function(event,image){if(image){var jpg=Api.base64ToFile('data:image/jpeg;base64,'+image);doAdminAction(apiData,jpg);}},'profileSummary',$scope);swf.invokeSwfMethod('getSnapshot',false);}else if(params.sf&&apiData.data.flagId===2){apiParams.sf=params.sf;doAdminAction(apiData);}else{doAdminAction(apiData);}};$scope.goToProfile=function(profileName,event){if(event&&event.which===2){event.preventDefault();return false;}
$modalInstance.close();$location.path(profileName+'/channel');};$scope.showProfileSummary=function(id){if(!id){return false;}
$modalInstance.close();$timeout(function(){$modal.profileSummary(id);},500);};$scope.followUser=function(){$scope.modal.state='follow-notify';};$scope.modal.resetProfileSummary=function(){$scope.modal.notifying=undefined;$scope.modal.state='';$scope.modal.reasonOption=undefined;$scope.modal.reason=undefined;};$scope.toggleDropdown=function($event){if($event){$event.preventDefault();$event.stopPropagation();}
if($scope.modal.notifying){$scope.modal.notifying=undefined;}
$scope.modal.flagging=!$scope.modal.flagging;};$scope.closeOnInvite=function(){$modalInstance.close();};var doAdminAction=function(apiData,image){if(image){apiData.data.image=image;upload(apiData).then(function(response){handleAdminActionResponse(response);});}else{upload(apiData).then(function(response){handleAdminActionResponse(response);});}};var handleAdminActionResponse=function(response){if(response.data.errorCode===0){$scope.showNotification('success','Success');if($scope.modal.action.actionName==='Block'||$scope.modal.action.actionName==='Unblock'){getUserActions();}}else{$scope.showNotification('error',response.data.errorMsg);}};}]);angular.module('younow.modals.reconnect-modal',[]).controller('ReconnectModalCtrl',function($rootScope,$scope,$modalInstance,$timeout,$state,session,webRtc,broadcasterService,swf,guestService,externalStreamer,config,reconnect){var vm=this,bcVideoWatcher;vm.retryTime=0;vm.viewers=session.user.activeBroadcastReconnect.viewers;vm.noReconnect=function(){broadcasterService.dropBroadcast(session.user.userId);$modalInstance.close();};vm.reconnect=function(){vm.retryTime=1;session.isBroadcasting=true;swf.bootingFlash=false;$state.go('main.channel.detail',{profileUrlString:session.user.profile});bcVideoWatcher=$scope.$watch(function(){return document.getElementById('bcVideo');},function(newValue,oldValue){if(newValue!==null){bcVideoWatcher();webRtc.initialize(function(event){if(event.candidate){console.log("Sending Ice Candidate:\n"+JSON.stringify({"id":"broadcaster","candidate":event.candidate}));}else{var pcConfig=webRtc.getCurrentConfig();webRtc.setStatus("End of candidates, sending sdp to server.");pcConfig.streamReady=true;attemptReconnect(pcConfig);}}).then(function(){webRtc.setupWebrtcStream();});}});};vm.endBroadcast=function(){$modalInstance.close();broadcasterService.dropBroadcast(session.user.userId);};vm.closeModal=function(){$modalInstance.dismiss();};function dropBroadcast(){$modalInstance.close();broadcasterService.dropBroadcast(session.user.userId);webRtc.destroy();}
function attemptReconnect(pcConfig){vm.retryTime++;reconnect.execute(session.user.userId,webRtc.pc).then(function(response){if(response.data.sdpAnswer){webRtc.pc.setRemoteDescription(new pcConfig.SessionDescription({"sdp":response.data.sdpAnswer,"type":"answer"}),webRtc.setRemoteDescriptionSuccess,webRtc.setRemoteDescriptionFail);}
if(vm.retryTime<=10){if(!response.data.sdpAnswer||response.errorCode==917){attemptReconnect(pcConfig);}else if(response.data.sdpAnswer){window.YouNow.App.stateChange('PLAYING');$modalInstance.close();}else{dropBroadcast();}}else{dropBroadcast();}});}
$scope.$on('$destroy',function(){if(bcVideoWatcher){bcVideoWatcher();}});});angular.module('younow.seach-bar',[]).directive('ynSearchBar',["$state","$location","Api","broadcasterService","session","config","$translate","trpx","$timeout","$filter",function($state,$location,Api,broadcasterService,session,config,$translate,trpx,$timeout,$filter){return{restrict:'E',templateUrl:'angularjsapp/src/app/components/search-bar/search-bar.tpl.html',scope:{type:'@',size:'@'},link:function(scope,element,attrs){var trackingState={lastQuery:'',algoliaResults:[],tagResults:[]};if(scope.size==='tiny'){element.addClass('tiny-search-bar');}
scope.search={};scope.search.cdn=config.settings.ServerCDNBaseUrl;scope.search.searching=false;$translate('search_placeholder_home').then(function(translated){scope.search_placeholder_home=translated;});$translate('search_placeholder_site').then(function(translated){scope.search_placeholder_site=translated;});scope.search.animateSearchBar=function(){element.addClass('tiny-search-active');};scope.search.closeSearchBar=function(){element.removeClass('tiny-search-active');};scope.search.changeState=function(){element.removeClass('tiny-search-active');};scope.search.query=function(query){scope.search.searching=true;var restrict=query.substr(0,1)==="#"?"tag":false;if(restrict){query=query.substr(1);}
trackingState.lastQuery=query;return Api.algolia(query,restrict).then(function(response){scope.search.searching=false;var results=response.data.hits||[];angular.forEach(results,function(user,i){user.fullName=Api.fullName(user);user.hashedDescription=Api.convertEmoji(user.description);});var hasLiveTags=false;var live=[],profiles=[];if(results.length>0){for(var i=0;i<results.length;i++){if(results[i].tag){live.push(results[i]);}
if(!results[i].tag||results[i].tag.length===0){profiles.push(results[i]);}}
if(live.length>0){live.unshift({title:$filter('translate')('_live'),type:'live',showBorder:false});}
if(profiles.length>0){profiles.unshift({title:$filter('translate')('_profiles'),type:'profile',showBorder:live.length>0?true:false});}
results=[].concat(live,profiles);}
trackingState.algoliaResults=results;return Api.get('YOUNOW_TAGS',{s:query},true).then(function(response){if(response.data.tags&&response.data.tags.length>0){results.push({title:$filter('translate')('_tags'),type:'tags',showBorder:true});results=results.concat(response.data.tags.slice(0,4));results.push({more:true,profile:query,query:query});trackingState.tagResults=response.data.tags.slice(0,4);}
return results;});});};scope.search.selectResult=function($item,$model,$label){trackingState.selectionMade=true;var searchData={event:'SEARCH_CLICK',query:trackingState.lastQuery};if($item.objectID){$location.path($item.profile);searchData.click_field=$model.tag&&$model.tag.length>0?'USER_BROADCAST':'USER_PROFILE';}else if($item.tag&&$state.current.name!=='main.explore'){$state.go('main.explore',{tag:$item.tag});searchData.click_field='TAGS';}else if($item.tag&&$state.current.name==='main.explore'){$state.go('main.explore',{tag:$item.tag,q:undefined},{reload:true});searchData.click_field='TAGS';}else{$state.go('main.explore',{q:searchData.query,tag:undefined});searchData.click_field='ALLRESULTS';}
scope.search.searchBox='';if(searchData.click_field=='USER_BROADCAST'||searchData.click_field=='USER_PROFILE'){searchData=formatData('algoliaResults',$item,searchData);}else if(searchData.click_field=='TAGS'){searchData=formatData('tagResults',$item,searchData);}
trackingState.lastQuery='';trpx.capture(searchData,trpx.captureGroups.searchevents);};scope.search.background=function(id,type,refresher){type=type||'Image';var extra=type=='Image'?', url('+config.imageApis.nothumb+')':'';refresher=refresher||'';var base=session.user&&session.user.userId==id?config.settings.apiMap.DNS.DEFAULT:config.settings.ServerCDNBaseUrl;return'background:url('+base+'/php/api/channel/get'+type+'/channelId='+id+refresher+')'+extra+' no-repeat center center; background-size: cover;';};scope.search.trackBlur=function(trackingEvent,trackingField){if(trackingState.abandonEventTimer){$timeout.cancel(trackingState.abandonEventTimer);}
trackingState.abandonEventTimer=$timeout(function(){if(trackingState.selectionMade||trackingState.lastQuery.length===0){trackingState.selectionMade=false;return false;}
trpx.capture({event:trackingEvent||'SEARCH_ABANDON',click_field:trackingField||'',query:trackingState.lastQuery},trpx.captureGroups.searchevents);trackingState.lastQuery='';trackingState.abandonEventTimer=undefined;},2000);};scope.goToExplore=function(){if(trackingState.abandonEventTimer){scope.search.trackBlur('SEARCH_CLICK','ALLRESULTS');}
$state.go('main.explore',{q:scope.search.searchBox});};function formatData(list,$item,data){data.result_set_size=list=='algoliaResults'?trackingState[list].length-1:trackingState[list].length;list=trackingState[list];var identifier=$item.objectID?'objectID':'tag';for(var i=0;i<list.length;i++){if(list[i][identifier]==$item[identifier]){data.click_index=i;break;}}
return data;}}};}]);angular.module('younow.channel.settingupPanel',[]).directive('settingupPanel',['Api','config','swf','session','$rootScope','broadcasterService','eventbus','$timeout','webRtc','externalStreamer','trackingPixel',function(Api,config,swf,session,$rootScope,broadcasterService,eventbus,$timeout,webRtc,externalStreamer,trackingPixel){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/settingup-panel/settingup-panel.tpl.html',link:function(scope,element,attrs){scope.panel={typeaheadClosed:true,popularTags:undefined,networks:{twitter:session.user.twitterAuthPublish?true:false,tumblr:session.user.tumblrAuthPublish?true:false,facebook:session.user.facebookAuthPublish?true:false,youtube:session.user.youTubeAuthPublish?true:false,facebookShare:false},showYoutube:session.user.level>=5||session.user.youTubeAuthPublish?true:false,startingBroadcast:false,externalStreaming:externalStreamer.settings};var typeaheadInput=document.getElementById('typeaheadInput'),shareInput=document.getElementById('share-input'),startBroadcastBtn=document.getElementById('start-broadcast-btn'),pcConfig;function shareBroadcast(network,broadcastId){swf.getShareData(network,broadcastId,false,true).then(function(data){data.callback=function(post_id){if(post_id){scope.panel.networks.facebookShare=true;}};Api.openSharePopup(data);});}
function uploadBroadcastThumb(){if(!scope.panel.snapshot){if(externalStreamer.settings.active||externalStreamer.settings.streaming){return false;}
scope.panel.takeSnapshot();}
Api.post('BROADCAST_UPLOAD_THUMB',{userId:session.user.userId,channelId:session.user.userId,image:scope.panel.snapshot});}
function switchToLive(response,externalStream){if(!externalStreamer.settings.active){webRtc.pc.setRemoteDescription(new pcConfig.SessionDescription({"sdp":response.data.sdpAnswer,"type":"answer"}),webRtc.setRemoteDescriptionSuccess,webRtc.setRemoteDescriptionFail);webRtc.settings.state='connected';}else if(externalStream){webRtc.destroy();}else{swf.invokeSwfMethod('startBroadcast',response.data);}
if(!externalStream){session.isBroadcasting=true;}
uploadBroadcastThumb();broadcasterService.switchBroadcaster(session.user.userId,undefined,undefined,response.data);swf.showQueueCache=swf.showQueue;swf.showQueue=false;if(swf.eob){delete swf.eob;}}
function getSelectedTag(){var tag;var tagSelected=scope.panel.tagSelected?scope.panel.tagSelected:false;if((!tagSelected||tagSelected.length===0)){if(!Api.store('lastBroadcastedTag')){tag=session.user.fullName.replace(' ','');Api.store('lastBroadcastedTag',tag);}
if(Api.store('lastBroadcastedTag')){tag=Api.store('lastBroadcastedTag');}}else{tag=scope.panel.tagSelected;Api.store('lastBroadcastedTag',tag);}
return tag;}
scope.panel.getTags=function(){Api.get('YOUNOW_POPULAR_TAGS',{locale:config.UILocale}).then(function(response){if(response.data&&response.data.errorCode===0){for(var tag in response.data.popular_tags){response.data.popular_tags[tag].tag='#'+response.data.popular_tags[tag].tag;}
response.data.popular_tags.unshift({'tag':false});scope.panel.matches=response.data.popular_tags;scope.panel.popularTags=response.data.popular_tags;}});};scope.panel.loadTags=function(value){scope.panel.typeaheadClosed=false;if(value.indexOf('#')!==-1){value=value.replace('#','');}
return Api.get('YOUNOW_TAGS',{locale:config.UILocale,s:value}).then(function(response){if(response&&response.data&&response.data.tags){for(var tag in response.data.tags){if(session.user.editorsPick&&response.data.tags[tag].tag===session.user.editorsPick.tag){response.data.tags[tag].isEp=true;}
if(response.data.tags[tag].tag===value){response.data.tags.splice(tag,1);}else{if(response.data.tags[tag].tag.indexOf('#')===-1){response.data.tags[tag].tag='#'+response.data.tags[tag].tag;}}}
response.data.tags=[{'tag':'#'+value}].concat(response.data.tags);scope.panel.matches=response.data.tags.concat(angular.copy(scope.panel.popularTags));}else{scope.panel.matches=[{'tag':'#'+value}].concat(angular.copy(scope.panel.popularTags));}
return scope.panel.matches;});};scope.panel.validateTag=function(tag){if(!tag){tag='';}
if(tag.length===0){scope.panel.tagSelected='';scope.panel.typeaheadClosed=true;}
if(scope.panel.tagSelected==='false'){scope.panel.tagSelected='';}
if(/[#\ ]/.test(tag)){tag=tag.replace(/[#]/g,'');tag=tag.replace(/[\ ]/g,'-');}
if(tag.slice(1,tag.length).match(/^((?!\-$|_$)[a-zA-Z1-9\-_()])+$/g)&&tag.length>1){scope.panel.tagValid=true;}else{scope.panel.tagValid=false;}
scope.panel.tagSelected=tag;};scope.panel.selectTag=function(tag,model,label){if(tag&&!tag.tag){tag.tag='';}
scope.panel.typeaheadClosed=true;scope.panel.tagSelected=tag.tag.replace('#','');shareInput.focus();};scope.panel.takeSnapshot=function(){scope.panel.snapshot=webRtc.takeSnapshot(undefined,undefined,undefined,true);};scope.panel.toggleShare=function(network){if((network=='twitter'&&!session.user.twitterHandle)||(network=='tumblr'&&!session.user.tumblrId)||(network=='facebook'&&!session.user.facebookId)||(network=='youtube'&&!session.user.youTubeAuth)){$rootScope.gaEvent('CONNECT','ATTEMPT_'+network.toUpperCase(),'GOLIVE');session.authenticate[network]().then(function(data){session.login(data,true).then(function(data){if(data.data.errorCode>0||data.config.data.indexOf('lastName=&')>-1){$rootScope.gaEvent('CONNECT','ERROR_'+network.toUpperCase(),'GOLIVE');}else{if(network=='facebook'&&session.user.facebookPageId.length===0){shareBroadcast(network,scope.panel.initResponse.id);return false;}
if(network=='youtube'){scope.panel.checkYoutube();}else{scope.panel.networks[network]=scope.panel.networks[network]?false:true;}
$rootScope.gaEvent('CONNECT','CONNECT_'+network.toUpperCase(),'GOLIVE');}});});}else if(network=='facebook'&&session.user.facebookId&&session.user.facebookPageId.length===0){shareBroadcast(network,scope.panel.initResponse.id);}else if(network=='youtube'&&!session.user.youTubeAuthPublish){scope.panel.checkYoutube();}else{scope.panel.networks[network]=!scope.panel.networks[network];}};scope.panel.checkYoutube=function(){scope.panel.networks.youtube=!scope.panel.networks.youtube;Api.get('CHANNEL_YOUTUBE_LIVE_ENABLED',{userId:session.user.userId}).success(function(data){if(data.errorCode!==0){scope.panel.networks.youtube=!scope.panel.networks.youtube;Api.showTopNotification('Live streaming is not enabled on your Youtube account: <a target="_blank" href="https://www.youtube.com/live_streaming_signup">https://www.youtube.com/live_streaming_signup</a>','danger',false,false,5000);}});};scope.panel.startBroadcast=function(){scope.panel.startingBroadcast=true;if(!webRtc.getCurrentConfig().streamReady){webRtc.setupWebrtcStream();webRtc.settings.state='connecting';return false;}
var tag=getSelectedTag(),broadcastPromise;broadcasterService.addBroadcast(scope.panel.initResponse.id,tag,scope.panel.networks,scope.panel.shareCopy,webRtc.pc).then(function(response){if(response.data.errorCode===0){switchToLive(response);}
if(response.data.errorCode>0){if(response.data.errorCode===249){broadcasterService.initBroadcast().then(function(response){broadcasterService.addBroadcast(response.data.id,tag,scope.panel.networks,scope.panel.shareCopy,webRtc.pc).then(function(response){if(response.data.errorCode===0){switchToLive(response);}});});}else{scope.panel.startingBroadcast=false;webRtc.settings.state='ready';}}});};scope.panel.prepareBroadcast=function(){scope.panel.startingBroadcast=true;var tag=getSelectedTag();broadcasterService.addBroadcast(scope.panel.initResponse.id,tag,scope.panel.networks,scope.panel.shareCopy).then(function(response){if(response.data.errorCode===0){externalStreamer.setBroadcastAddResp(response.data);switchToLive(response,true);}
scope.panel.startingBroadcast=false;});trackingPixel.trackClick('EXTERNAL_TOOL',{field1:'GENERATE'});};window.YouNow.App.cameraReady=function(){if(!scope.panel.initResponse){broadcasterService.initBroadcast().then(function(response){externalStreamer.setBroadcastInitResp(response.data);if(response&&response.data.errorCode===0){scope.panel.initResponse=response.data;}
if(response&&response.data.errorCode===603){switchToLive(response);}
if(response&&response.data.errorCode===606){webRtc.reconnect.then(function(data){switchToLive(response);});}});}};angular.element(typeaheadInput).on('keyup',function(event){if(event.which==9){shareInput.focus();}});scope.panel.getTags();typeaheadInput.focus();$timeout(function(){swf.invokeSwfMethod('goLive',{skipChannelSelection:false});});eventbus.subscribe('pusher:ban',function(event,message){if(message.message){swf.settingUpBroadcast=false;}},'settingupPanel',scope);eventbus.subscribe('swf:snapshot',function(event,image){if(image){scope.panel.snapshot=image;}},'settingupPanel',scope);scope.$on('$destroy',function(){window.YouNow.App.cameraReady=null;});function onIceCandidate(event){if(event.candidate){}else{pcConfig=webRtc.getCurrentConfig();webRtc.setStatus("End of candidates, sending sdp to server.");pcConfig.streamReady=true;scope.panel.startBroadcast();}}
webRtc.initialize(onIceCandidate).then(function(response){window.YouNow.App.cameraReady();scope.panel.mediaTestResults=webRtc.mediaTestResults;webRtc.testAudioInput('notifyUser');});}};}]);angular.module('younow.modals.share-broadcast-modal',[]).controller('ShareBroadcastModalCtrl',["$scope","$modalInstance","session","data",function($scope,$modalInstance,session,data){$scope.modal={};$scope.modal.session=session;$scope.modal.type=data.type;$scope.modal.recommendMessage=data.message;$scope.modal.invite=function(){if($scope.modal.form.$valid){$modalInstance.close($scope.modal.recommendMessage);}};$scope.modal.closeModal=function(){$modalInstance.close();};}]);angular.module('younow.channel.share-panel',[]).directive('sharePanel',function(swf,trackingPixel,shareService,guestService,Api,session,$modal,webRtc,guestService,upload,config,$timeout,trpx,store){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/share-panel/share-panel.tpl.html',scope:{target:'@',closeCallback:'='},link:function(scope,element,attrs,controller){var startTime=0;var endTime=0;scope.vm={cdn:config.imageApis,moment:{owner:{name:session.user.profile,userId:session.user.userId},text:''}};scope.panel={target:scope.target,post:{shared:false,sharing:false}};scope.panel.tooltipText='click to copy';scope.panel.swf=swf;scope.panel.guestService=guestService;scope.panel.session=session;if(shareService.preShareVolume){swf.setVolume(0);}
swf.dimmed=true;if(swf.activeChatParams){if(swf.activeChatParams.momentId){scope.panel.momentId=swf.activeChatParams.momentId;}}
scope.panel.swf.options={};scope.panel.shareUrl={};if(scope.panel.momentId){shareService.getMomentToShare(scope.panel.momentId,session.user.userId,swf.broadcast.userId).then(function(response){if(response.data.url){scope.panel.shareUrl.url=response.data.url;}
if(response.data.twitterHandle){scope.panel.shareUrl.twitterHandle=response.data.twitterHandle;}
getMomentForPlayback(scope.panel.momentId);});}
function reset(){swf.dimmed=false;if(shareService.preShareVolume){swf.setVolume(shareService.preShareVolume);shareService.preShareVolume=undefined;}}
function getMomentForPlayback(momentId){var request=Api.get('MOMENT_FETCH',{id:scope.panel.momentId}).then(function(response){if(response.data){scope.vm.moment.text=response.data.item.text;scope.moment=response.data.item;scope.moment.options={'url':Api.generateDynamicApi('MOMENT_PLAYLIST')+'/'+scope.moment.momentId+'/'+scope.moment.momentId+'.m3u8','onLoadedMetadata':function(e){var totalDuration=e.duration();var playlist=e.tech({IWillNotUseThisInPlugins:true});if(playlist.hls){playlist=playlist.hls.playlists.media();if(playlist.segments){startTime=Api.getJsonFromUrl(playlist.segments[0].uri).offset||0;endTime=(totalDuration-Api.getJsonFromUrl(playlist.segments[playlist.segments.length-1].uri).offset)||totalDuration;}}else{startTime="0";endTime=e.duration();}
e.play();$timeout(function(){scope.vm.doAnimation();},500);},'onTimeupdate':function(e){if(e&&e.currentTime){var currentTime=e.currentTime();if(currentTime>endTime){e.currentTime(startTime);e.play();}}},'onEnd':function(e){e.play();},'onCanplay':function(e){e.el_.style['z-index']=2;},'onClick':function(e){if(e){var isPaused=e.paused();if(isPaused){e.play();}else{e.pause();}}},'player':{'autoplay':false,'preload':false,'controls':false,'width':400,'height':300}};}else{}});}
scope.panel.clickToCopy=function(){if(Api.browser.name=='Safari'){scope.panel.tooltipText="? + c to copy";}else{scope.panel.tooltipText="copied to clipboard";}
var trackingArgs={'event':'CLICK','extradata':'SHARE','field1':'COPY_LINK','field2':'MOMENT_CAPTURE'};trpx.capture(trackingArgs,trpx.captureGroups.trackevents);};scope.$on('$destroy',function(){reset();});scope.panel.close=function(){if(scope.closeCallback){scope.closeCallback();}
reset();swf.activeChatTab='Chat';};scope.panel.newSnapshot=function(){if(scope.target=='guest'){guestService.getSnapshot();}else{swf.getSnapshot();shareService.trackFunnel("snapshot");}};scope.panel.attemptShare=function(target){var twitterHandle,trackingArgs,ynUsername;if(scope.target==='shareMoment'){if(target==="twitter"){twitterHandle=swf.broadcast.twitterHandle?swf.broadcast.twitterHandle:swf.broadcast.profile;if(swf.broadcast.twitterHandle){twitterHandle='@'+twitterHandle;}
trackingArgs={'event':'CLICK','extradata':'SHARE','field1':'TWITTER','field2':'MOMENT_CAPTURE'};shareService.clientShareTwitter(scope.panel.shareUrl,twitterHandle,trackingArgs);}
if(target==='facebook'){if(swf.broadcast.profile){ynUsername=swf.broadcast.profile;}
trackingArgs={'event':'CLICK','extradata':'SHARE','field1':'FACEBOOK','field2':'MOMENT_CAPTURE'};shareService.clientShareFacebook(scope.panel.shareUrl,ynUsername,trackingArgs);}}else{if(!swf.snapshot){swf.snapshot={snapshot:guestService.eobSnapshot};}
if(target=='invite'){trackingPixel.trackClick('SHARE',{'field1':'invite','field2':scope.target==="guest"?"GUEST":"LIVE"});}else{trackingPixel.trackClick('SHARE',{field1:target.toUpperCase(),field2:scope.target==="guest"?"GUEST":"LIVE"});}
if(target==='post'){attemptPost();scope.panel.post.sharing=true;}else{scope.panel.share(target);}
shareService.trackFunnel(target+"_attempt");if(!swf.snapshot.messageAdded&&swf.broadcast.share_message){shareService.trackFunnel("message");swf.snapshot.messageAdded=true;}}};scope.panel.share=function(target){if(!guestService.eobSnapshot&&scope.target==='guest'){guestService.getSnapshot();}
if(!swf.snapshot&&scope.target!=='guest'){swf.getSnapshot();}
if(typeof scope.panel.swf.snapshot.shared!='object'){swf.snapshot.shared={};}
if(typeof scope.panel.swf.snapshot.sharing!='object'){swf.snapshot.sharing={};}
if(!scope.panel.swf.broadcast||!session.user){return false;}
if(!session.loggedIn){session.showLoginModal('','SHARE').result.then(function(response){scope.panel.share(target);});return false;}
swf.snapshot.sharing[target]=true;if(target=='facebook'){shareService.shareFacebook().then(function(){store.postGift(session.user.userId,swf.broadcast.userId,{id:15,quantity:1},swf.snapshot.snapshot,1).then(function(response){swf.snapshot.id=response.data.snapshotId;var post={link:swf.snapshot.links.FACEBOOK,picture:Api.generateDynamicApi('GET_SNAPSHOT')+'/id='+swf.snapshot.id,message:swf.broadcast.share_message};shareService.shareFacebookSend(post);});});}
if(target=='twitter'){shareService.shareTwitter().then(function(response){}).catch(function(response){if(response==="error"){if(!swf.snapshot.shared.twitter_login_attempted){swf.snapshot.shared.twitter_login_attempted=true;scope.panel.share(target);}}});}
if(target=='tumblr'){shareService.shareTumblr().then(function(response){}).catch(function(response){if(response==="error"){if(!swf.snapshot.shared.tumblr_login_attempted){swf.snapshot.shared.tumblr_login_attempted=true;scope.panel.share(target);}}});}
if(target=='invite'){if(swf.broadcast.shared.younow){Api.showTopNotification('You can only invite your fans to a broadcast once.');shareService.trackFunnel(target+"_duplicate");return false;}
if(swf.broadcast&&(!swf.broadcast.share_message||swf.broadcast.share_message.length===0)){var modalInstance=$modal.shareBroadcast(swf.broadcast.share_message);modalInstance.result.then(function(response){if(response&&response.length>0){swf.broadcast.share_message=response;shareService.sendShare("younow",1);}});}else{shareService.sendShare("younow",1);}
swf.snapshot.sharing[target]=false;}};function attemptPost(){if(swf.broadcast&&(!swf.broadcast.share_message||swf.broadcast.share_message.length===0)){var modalInstance=$modal.shareBroadcast(swf.broadcast.share_message);modalInstance.result.then(function(response){if(response&&response.length>0){swf.broadcast.share_message=Api.stripHTML(response);uploadPost();}});}else{swf.broadcast.share_message=Api.stripHTML(swf.broadcast.share_message);uploadPost();}}
function uploadPost(){var blob=Api.base64ToFile('data:image/jpeg;base64,'+guestService.eobSnapshot);var data={post:swf.broadcast.share_message,parentId:0,channelId:session.user.userId,userId:session.user.userId,doEnrich:1,media:blob,tsi:Api.store('trpxId'),tdi:Api.store('trpx_device_id')};var apiData={url:Api.generateDynamicApi('POST_CREATE'),method:'POST',data:data,withCredentials:true,headers:{'X-Requested-By':session.user.requestBy}};upload(apiData).then(function(response){if(response.data.errorCode===0){scope.panel.post.shared=true;scope.panel.post.sharing=false;}else{scope.panel.post.shared=false;scope.panel.post.sharing=false;}});}}};});angular.module('younow.modals.spending-redirect',[]).controller('SpendingRedirectModalCtrl',function($scope,$modalInstance,$modal,session,config,params,Api){$scope.settings=config.settings;$scope.params=params;$scope.dismiss=function(){$modalInstance.dismiss();};$scope.tryAgain=function(){$modalInstance.close();$modal.buyBars(session.user.spendingDisabled);};$scope.downloadTheApp=function(app){$modalInstance.close();Api.goToStore(app);};$scope.contactSupport=function(){var supportWindow=window.open(config.settings.SupportUrl,'_blank');supportWindow.focus();};});angular.module('younow.stripe',[]).directive('stripeForm',function($window){return{restrict:'E',templateUrl:'angularjsapp/src/app/components/stripe-form/stripe-form.tpl.html',scope:{stripeCallback:'&'},link:function(scope,element,attributes){var form=element.find('form');function toggleButton(disabled){scope.component.formSubmitting=disabled;angular.element(form).find('button').prop('disabled',disabled);}
function stripeCb(status,response){if(response.error){scope.component.errorMessage=response.error.message;}else{scope.component.errorMessage=null;}
if(scope.stripeCallback!==undefined){var stripePromise=scope.stripeCallback()(response.id,'stripe');if(stripePromise&&stripePromise.then){stripePromise.then(function(){toggleButton(false);});}else{toggleButton(false);}}else{toggleButton(false);}}
scope.component={};scope.component.ccRegex="^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\d{3})\d{11})$";scope.component.cvvRegex="^[0-9]{3,4}$";scope.component.moRegex="(0[1-9])|(1[012])";scope.component.yrRegex="^[0-9]{4}$";scope.component.submitForm=function(e){scope.component.formSubmitted=true;e.preventDefault();if(scope.stripeForm.$valid){toggleButton(true);$window.Stripe.card.createToken(form,stripeCb);}};}};});angular.module('younow.subscribe-button',[]).directive('subscribeButton',["session","Api","broadcasterService","config","$modal","$timeout","eventbus","$timeout",function(session,Api,broadcasterService,config,$modal,$timeout,eventbus,$timeout){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/subscribe-button/subscribe-button.tpl.html',scope:{channel:'=',source:'@',size:'@'},link:function(scope,element,attributes){scope.base=config.settings.ServerCDNBaseUrl;scope.subStatus=session.subStatus;scope.fanStatus=session.fanStatus;scope.hidden=true;var lastChannel=0;eventbus.subscribe('session:loggedIn',function(){scope.checkSub();},'subscribe-button',scope);scope.checkSub=function(){if((scope.channel&&scope.channel.userId)&&session.user){if(!session.user||session.user.banId||session.user.suspendId){scope.hidden=true;}else if(!scope.channel.isSubscribable||scope.channel.isSubscribable=="0"){scope.hidden=true;}else{session.getSub(scope.channel.userId);scope.hidden=false;}}};scope.$watch('channel',function(attrChannel){if(session.user&&scope.channel&&scope.channel.userId!=lastChannel){scope.channel=attrChannel;lastChannel=attrChannel.userId;scope.checkSub();}},true);scope.subscribe=function(){if(!session.loggedIn){session.showLoginModal('','SUBSCRIBE').result.then(scope.subscribe);return false;}
if(session.checkBan()){return false;}
if(!session.subStatus[scope.channel.userId]){$modal.subscribeModal(scope.channel.userId,{source:scope.source});}
else if(config&&config.settings&&config.settings.TrackingHost&&(config.settings.TrackingHost.indexOf('-vpc')>0||config.settings.TrackingHost.indexOf('-dev')>0)){Api.get('channel/unSubscribe/userId='+session.user.userId+'/channelId='+broadcasterService.broadcaster.userId+'').then(function(){window.location.reload();});}};}};}]);angular.module('younow.modals.subscribe-modal',[]).controller('SubscribeModalCtrl',function($rootScope,$scope,$modalInstance,$timeout,$location,config,Api,session,broadcasterService,params,eventbus,trpx,$modal,swf,store){var tracking={};var vm={};vm.channelId=params.channelId;vm.subscription=params.sub||{};vm.template={};vm.template.cdn=config.settings.ServerCDNBaseUrl;vm.session=session;vm.spanel=params.state||'initial';vm.params=params;vm.title=params&&params.title?params.title:"subscriber_default_title";tracking.userLocation=params.source||trpx.getUserLocation();if(vm.title==='subscriber_chat_title'){tracking.source="SUB_ONLY_CHAT";}else if(vm.title==='subscriber_super_messages'){tracking.source="CHAT_TOGGLE";}else if(vm.title==='subscriber_replay_title'){tracking.source="REPLAYS_TAB";}else if(params&&params.source==='MINI_PROFILE'){tracking.source="MINI_PROFILE";}else if(params&&params.source==='PROFILE'){tracking.source="PROFILE";}else{tracking.source="N/A";}
trpx.capture({event:'CLICK',extradata:'NEW_SUB_CLICK',field1:tracking.source},trpx.captureGroups.trackevents);var handleBraintree=function(){var post={userId:session.user.userId,htdid:Api.store('_ht_did'),amount:vm.sub.price};if(window.location.protocol==='http:'){post.s=session.user.session;}
vm.submitting=true;Api.post('STORE_PURCHASE_TOKEN',post).then(function(response){vm.submitting=false;if(response.data.errorCode===6032){$rootScope.gaEvent('PURCHASE','ERROR_6032','INLINE','SUBSCRIPTION');$modalInstance.close();$timeout(function(){$modal.spendingFailed({purchaseItem:'subscription'});},200);}else if(response.data.errorCode===6020&&response.data.ccVerificationSaleDetails){var parsedResult=JSON.parse(response.data.ccVerificationSaleDetails);parsedResult.channelId=params.channelId;$modalInstance.close();$timeout(function(){$modal.verification(parsedResult,{source:'subscribeModal'});},200);}else if(response.data.errorCode===6021){$modalInstance.close();$timeout(function(){$modal.ccVerified({type:'verified-failed'});},200);}
else if(response.data.errorCode){$modalInstance.close();}
if(response.data.errorCode===0&&document.getElementById('braintree-dropin')){window.braintree.setup(response.data.token,'dropin',{container:'braintree-dropin',onReady:function(){vm.braintreeLoading=false;},paymentMethodNonceReceived:function(event,nonce){vm.braintreeLoading=false;if(vm.channel.chatMode){tracking.origin='BROADCAST';}else if(params.source=='MINI_PROFILE'){tracking.origin='MINI_PROFILE';}else if(tracking.userLocation=='PROFILE'){tracking.origin='PROFILE';}else if(vm.channel.broadcastId){tracking.origin='BROADCAST';}else{tracking.origin='SETTINGS';}
var post={data:$scope.vm.sub.price,signature:nonce,sku:$scope.vm.sub.SKU,userId:session.user.userId,device_data:document.getElementById('device_data').value,channelId:vm.channel.userId,origin:tracking.origin};if(window.location.protocol==='http:'){post.s=session.user.session;}
var method='STORE_BUY';if(vm.subscription&&vm.subscription.subscriptionId){method='STORE_CHANGE_SUBSCRIPTION_PAYMENT';post.subscriptionId=vm.subscription.subscriptionId;}
autofan();vm.submitting=true;Api.post(method,post,true).then(function(response){vm.submitting=false;if(response.data.errorCode===6032){$rootScope.gaEvent('PURCHASE','ERROR_6032','INLINE','SUBSCRIPTION');$modalInstance.close();$timeout(function(){$modal.spendingFailed({purchaseItem:'subscription'});},200);}
else if(response.data.errorCode){$modalInstance.close();}
else if(!response.data.errorCode){if(method=='STORE_CHANGE_SUBSCRIPTION_PAYMENT'){$modalInstance.close();Api.showTopNotification('Thank you! Your payment information has been updated.','success');}else{window.YouNow.reloadSubscriptions=true;if(swf.broadcast){$modalInstance.dismiss();}else{vm.spanel='thankyou';}
Api.showTopNotification('You have subscribed to '+vm.channel.profile+'!','success');if(response.data.vipSpenderMessage){$modal.vip_welcome(response.data.vipSpenderMessage);}}
session.subStatus[post.channelId]=true;if(response.data.benefits){store.updateSubscriberBenefits(vm.channel.userId,{superMessages:response.data.benefits.superMessages});if(!session.user.partnerStickers){session.user.partnerStickers=[];}
session.user.partnerStickers.push(response.data.benefits.partnerSticker);eventbus.notifySubscribers('store:update',{type:'goodies'});}}else{Api.showTopNotification(JSON.stringify(response.data));}});}});if(window.BraintreeData){var env=window.BraintreeData.environments[config.settings.BTEnv].withId(config.settings.BTKountId);window.BraintreeData.setup(config.settings.BTMerchantId,'braintree-form',env);}}});};var vm_channel=function(vmchannel){if(!vmchannel||!vmchannel.userId){return false;}
vm.channel=vmchannel;vm.template.channelThumb=config.imageApis.thumb+'/'+session.user.userId+'/'+session.user.userId+'.jpg';vm.template.sticker=config.imageApis.gifts+"PARTNER_STICKER/"+vm.channel.userId+'/web.png';if(vm.spanel!='initial'){vm.sub={};vm.submitting=true;Api.get('STORE_SUBSCRIPTION_PRODUCTS',{store:'web',channelId:vm.channel.userId,lang:config.UILanguage},true).then(function(response){if(response.data&&response.data.products){vm.sub=response.data.products[0];}});}
vm.sub={};var post={store:'web',channelId:vm.channel.userId,lang:config.UILanguage};vm.submitting=true;Api.get('STORE_SUBSCRIPTION_PRODUCTS',post,true).then(function(response){vm.submitting=false;vm.sub={};vm.sub.id=response.data.products[0].id;vm.sub.SKU=response.data.products[0].SKU;vm.sub.name=response.data.products[0].name;vm.sub.price=response.data.products[0].price;handleBraintree();});};if((broadcasterService.channel&&broadcasterService.channel.userId==params.channelId)||broadcasterService.broadcaster&&broadcasterService.broadcaster.userId==params.channelId){vm_channel(broadcasterService.channel||broadcasterService.broadcaster);}else{Api.get('CHANNEL_INFO',{channelId:params.channelId},true).then(function(response){vm_channel(response.data);});}
vm.template.userThumb=config.imageApis.thumb+'/'+session.user.userId+'/'+session.user.userId+'.jpg';vm.template.noThumb=config.imageApis.nothumb;vm.template.baseImageUrl=config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images/icons_v3';vm.globalVars=window.globalVars;vm.config=config;vm.submitting=false;vm.braintreeLoading=true;var autofan=function(){if(!session.fanStatus[vm.channel.userId]){var apiPost={userId:session.user.userId,channelId:vm.channel.userId};if(vm.channel&&vm.channel.broadcastId){apiPost.broadcastId=vm.channel.broadcastId;}
Api.post('CHANNEL_FAN',apiPost).then(function(response){if(response.data&&!response.data.errorCode){session.fanStatus[vm.channel.userId]=true;vm.channel.totalFans=vm.channel.totalFans*1+1;}});}};vm.submitInitial=function(){trpx.capture({event:'CLICK',extradata:'NEW_SUB_CLICK',field1:'SUB_ATTEMPT',},trpx.captureGroups.trackevents);if(session.user.email&&session.user.isEmailConfirmed){vm.spanel='payment';}else{vm.spanel='email';}};vm.submitEmail=function(form){vm.submitting=true;if(form.$invalid){eventbus.notifySubscribers('subscribeForm:invalid');return false;}
var post={userId:session.user.userId,channelId:session.user.userId,emailAddress:vm.session.user.email};Api.post('CHANNEL_UPDATE_SETTINGS',post).then(function(response){if(!response.errorCode){vm.spanel='payment';}
vm.submitting=false;});};vm.closeThankyou=function(){$modalInstance.dismiss();};vm.cancelSubscription=function(){if(vm.subscription.subscriptionPlatform.name==='Android'){window.open(vm.subscription.subscriptionPlatform.url);return false;}
if(vm.subscription.subscriptionPlatform.name==='iOS'){window.open(vm.subscription.subscriptionPlatform.url);return false;}
vm.cancelling=true;Api.post('CHANNEL_CANCEL_SUBSCRIPTION',{userId:session.user.userId,subscriptionId:vm.subscription.subscriptionId,channelId:vm.channelId,origin:'SETTINGS'}).success(function(response){window.YouNow.reloadSubscriptions=true;vm.cancelling=false;if(!response.errorCode){$modalInstance.dismiss();Api.showTopNotification('Cancellation successful. You will not be billed again.','success');session.subStatus[vm.channelId]=false;}else{console.info('channel/cancelSubscription failed:',response);Api.showTopNotification(JSON.stringify(response));}});};$scope.vm=vm;}).directive('subscribeValidate',['Api','$compile','eventbus',function(Api,$compile,eventbus){return{restrict:'A',scope:{message:'@',isValid:'='},link:function(scope,elem,attrs){var tag=elem[0].tagName;function errorFeedback(){if(elem[0].className.indexOf('ng-invalid')!==-1){Api.triggerTooltip(elem,2500);}}
if(tag=='TEXTAREA'||tag=='INPUT'){elem.on('blur',errorFeedback);}
eventbus.subscribe('subscribeForm:invalid',errorFeedback,attrs.name,scope);}};}]);angular.module('younow.modals.trap',[]).controller('TrapModalCtrl',["$scope","$modal","$modalInstance","config","session","data","source",function($scope,$modal,$modalInstance,config,session,data,source){$scope.user=data.user;$scope.source=source;$scope.nothumb=config.imageApis.nothumb;$scope.nocover=config.imageApis.nocover;$scope.thumbPath=config.imageApis.thumb;$scope.background=function(id,type,refresher){var url,nourl;type=type||'Image';if(type=='Image'){url=config.imageApis.thumb;nourl=config.imageApis.nothumb;}else if(type=='Cover'){url=config.imageApis.cover;nourl=config.imageApis.nocover;}
return'background:url('+url+'/'+id+'/'+id+'.jpg) no-repeat center center, url('+nourl+') no-repeat center center; background-size: cover;';};if(data.type==='fan'){$scope.fanTrap=true;$scope.heading='To participate, become a fan of '+($scope.user.profile||$scope.user.profileUrlString);$scope.subheading='You will get updates when people comment or like your posts';}
if(data.type==='archives'){$scope.loginTrap=true;$scope.heading='To watch my archived broadcasts, you have to login to YouNow!';}
$scope.showLoginModal=function(){$modalInstance.close();};if($scope.fanTrap){$scope.$watch(function(){return session.fanStatus[data.user.userId];},function(status){if(status){$scope.$evalAsync(function(){if(typeof data.callback=='function'){data.callback();}
$modalInstance.close();});}},true);}}]);(function(){window.YouNow.ReactComponents.UserBadge=React.createClass({displayName:'UserBadge',propTypes:{role:React.PropTypes.any,level:React.PropTypes.number,subscriptionType:React.PropTypes.any,channelId:React.PropTypes.any,broadcaster:React.PropTypes.object,config:React.PropTypes.object},render:function(){var ynbadge=null,userLevelBadge=null,userCrowns=null,userLevelNum=null;if(this.props.subscriptionType!='0'||this.props.broadcaster.isSubscribabel&&this.props.channelId==this.props.broadcaster.userId){ynbadge=React.createElement('span',{className:'user-crowns ynbadge'},React.createElement('img',{src:this.props.config.settings.BadgeBaseUrl+'/'+this.props.broadcaster.userId+'/'+(this.props.subscriptionType!='0'?this.props.subscriptionType:1)+'/badge@2x.png'}));}
if(this.props.subscriptionType=='0'&&this.props.level&&(this.props.role=='0'||this.props.role==3)){userLevelBadge=React.createElement('span',{className:'user-crowns'},React.createElement('i',{className:'ynicon ynicon-level'}));}
if(this.props.role==2){userCrowns=React.createElement('span',{className:'user-crowns'},React.createElement('i',{className:'ynicon ynicon-ambass'}));}else if((this.props.role==4||this.props.role==5||this.props.role==6)&&this.props.level){if(this.props.role==4){userCrowns=React.createElement('span',{className:'user-crowns'},React.createElement('i',{className:'ynicon ynicon-icon-whale'}),React.createElement('i',{className:'ynicon ynicon-icon-whale'}),React.createElement('i',{className:'ynicon ynicon-icon-whale'}));}else if(this.props.role==5){userCrowns=React.createElement('span',{className:'user-crowns'},React.createElement('i',{className:'ynicon ynicon-icon-whale'}),React.createElement('i',{className:'ynicon ynicon-icon-whale'}));}else{userCrowns=React.createElement('span',{className:'user-crowns'},React.createElement('i',{className:'ynicon ynicon-icon-whale'}));}}else if((this.props.role==7||this.props.role==8||this.props.role==9)&&this.props.level){if(this.props.role==7){userCrowns=React.createElement('span',{className:'user-crowns'},React.createElement('i',{className:'ynicon ynicon-redcrownicon'}),React.createElement('i',{className:'ynicon ynicon-redcrownicon'}),React.createElement('i',{className:'ynicon ynicon-redcrownicon'}));}else if(this.props.role==8){userCrowns=React.createElement('span',{className:'user-crowns'},React.createElement('i',{className:'ynicon ynicon-redcrownicon'}),React.createElement('i',{className:'ynicon ynicon-redcrownicon'}));}else{userCrowns=React.createElement('span',{className:'user-crowns'},React.createElement('i',{className:'ynicon ynicon-redcrownicon'}));}}else if((this.props.role==10||this.props.role==11||this.props.role==12)&&this.props.level){if(this.props.role==10){userCrowns=React.createElement('span',{className:'user-crowns'},React.createElement('i',{className:'ynicon ynicon-redcrownicon'}),React.createElement('i',{className:'ynicon ynicon-icon-whale'}));}else if(this.props.role==11){userCrowns=React.createElement('span',{className:'user-crowns'},React.createElement('i',{className:'ynicon ynicon-redcrownicon'}),React.createElement('i',{className:'ynicon ynicon-icon-whale'}),React.createElement('i',{className:'ynicon ynicon-icon-whale'}));}else{userCrowns=React.createElement('span',{className:'user-crowns'},React.createElement('i',{className:'ynicon ynicon-redcrownicon'}),React.createElement('i',{className:'ynicon ynicon-redcrownicon'}),React.createElement('i',{className:'ynicon ynicon-icon-whale'}));}}else{}
if(this.props.role!=1&&this.props.level>1){userLevelNum=React.createElement('span',{className:'chat-name level'},React.createElement('b',null,this.props.level));}
return React.createElement('span',{className:'crowns-container'},ynbadge,userLevelBadge,userCrowns,userLevelNum);}});})();angular.module('younow.user-badge',[]).value('UserBadge',window.YouNow.ReactComponents.UserBadge).directive('userBadgeRt',function(reactDirective){return reactDirective('UserBadge');}).directive('userBadge',["broadcasterService","config",function(broadcasterService,config){return{restrict:'E',templateUrl:'angularjsapp/src/app/components/user-badge/user-badge.tpl.html',replace:true,scope:{role:'@',level:'@',subscriptionType:'@',channelId:'@',},link:function(scope,element,attributes){scope.broadcast=angular.copy(broadcasterService,{});scope.config=angular.copy(config,{});}};}]).directive('userBadgeDynamic',["broadcasterService","config",function(broadcasterService,config){return{restrict:'E',templateUrl:'angularjsapp/src/app/components/user-badge/user-badge-dynamic.tpl.html',replace:true,scope:{role:'=',level:'=',subscriptionType:'=',channelId:'='},link:function(scope,element,attributes){scope.broadcast=broadcasterService;scope.config=angular.copy(config,{});}};}]);angular.module('younow.modals.verification',[]).controller('VerificationModalCtrl',["$scope","$modalInstance","session","Api","config","$rootScope","$timeout","data","$modal",function($scope,$modalInstance,session,Api,config,$rootScope,$timeout,data,$modal){$scope.data=data;$scope.session=session;$scope.config=config;$scope.verification={processing:false,failed:false,invalid:false,active:false,verifyNowState:function(){$scope.verification.verifyNow=true;$timeout(function(){$scope.verification.animate=true;});}};var clearInvalid;function formatVerificationDetails(originalAmount,date,bars,last4,paymentType){$scope.verification.sale={originalAmount:originalAmount,last4:last4,low:Number(originalAmount)-1.99,high:Number(originalAmount)-0.01,date:date*1000,barsAmount:bars,paymentType:paymentType};$scope.verification.active=true;}
$scope.cancel=function(){$rootScope.gaEvent('PURCHASE','VERIFICATION_CANCEL');$modalInstance.dismiss();};$scope.verifyAmount=function(){$scope.verification.invalid=undefined;if(clearInvalid){$timeout.cancel(clearInvalid);}
if($scope.verificationForm.$invalid){$scope.verification.invalid='Oops. needs to include decimals, i.e. $1.99. Try again';}else if($scope.verification.amount<$scope.verification.sale.low||$scope.verification.amount>$scope.verification.sale.high){$scope.verification.invalid='That is an incorrect amount. Try again.';}
if($scope.verification.invalid){Api.triggerTooltip('verification-tooltip',2500);clearInvalid=$timeout(function(){$scope.verification.invalid=undefined;},2600);}else{$scope.verification.processing=true;Api.post('STORE_VERIFY_CREDIT_CARD',{amount:$scope.verification.amount,userId:session.user.userId,s:session.user.session},true).then(function(response){$scope.verification.processing=false;if(response.data&&response.data.errorCode===0){$modalInstance.close();$timeout(function(){$modal.ccVerified({type:'verified',data:data});},200);}
if(response.data&&response.data.errorCode===6023){if(response.data.remainingAttempts>0){$scope.verification.failed=true;$scope.verification.amountAttempted=angular.copy($scope.verification.amount);}else{$modalInstance.close();$timeout(function(){$modal.ccVerified({type:'verified-failed',data:data});},200);}}});}};formatVerificationDetails(data.params.originalAmount,data.params.date,data.params.barsAmount,data.params.last4,data.params.paymentType);if(!data.params.justPurchased){$scope.verification.verifyNowState();}}]).controller('CcVerifiedModalCtrl',["$scope","$modalInstance","session","data","$modal",function($scope,$modalInstance,session,data,$modal){data=data.data;$scope.cancel=function(){$modalInstance.dismiss();};$scope.continue=function(){$modalInstance.dismiss();if(data.source.source==='buyBars'){$modal[data.source.source](session.user.spendingDisabled);}else if(data.source.source==='subscribeModal'){$modal[data.source.source](data.params.channelId);}};$scope.contactSupport=function(){window.open("https://younow.zendesk.com/anonymous_requests/new?ticket[subject]=Credit+Card+Verification&ticket[ticket_form_id]=67755&ticket[fields][23984596]="+session.user.fullName,'_blank');};}]);angular.module('younow.channel.mini-overlay',[]).directive('miniOverlay',function(guestService,$modal,swf,session,$interval,config,trackingPixel,$timeout,trpx){return{restrict:'E',templateUrl:'angularjsapp/src/app/components/video-player/mini-overlay.tpl.html',scope:{type:'@'},link:function(scope,element,attributes){scope.config=config;scope.guest=guestService.guest;scope.swf=swf;scope.session=session;scope.$watch(function(){return guestService.overlayStates[scope.type];},function(newVal){if(newVal){if(newVal!='ready'&&newVal!='connected'){scope.state=scope.type+' active '+newVal;if(newVal=='connecting-broadcaster'||newVal=='inviting'){scope.profile=guestService.guest.name;scope.guest=guestService.guest;}
if(newVal=='dropping'){guestService.overlayStates.guest='dropping';}
if(newVal=='swapping'||newVal=='inviting'||newVal=='declined'||newVal=='inviting-prompt'||newVal=='inviting-audience'||newVal=='declined-retry'){scope.pendingGuest=guestService.pendingGuest;}}else{scope.state=scope.type;}}});if(scope.type==='guest'){element.on('mouseenter',function(){if(guestService.overlayStates[scope.type]==='ready'&&isViewer()){scope.state=angular.copy(scope.state)+' hover';}
if(guestService.guest){scope.profile=guestService.guest.name;}});element.on('mouseleave',function(){scope.state=scope.state.replace('hover','');});}
if(scope.type==='broadcaster'){element.on('mouseenter',function(){if(guestService.overlayStates[scope.type]==='ready'&&isViewer()){scope.state=angular.copy(scope.state)+' hover';}});element.on('mouseleave',function(){scope.state=scope.state.replace('hover','');});scope.profile=swf.broadcast.profile;scope.$watch(function(){return swf.broadcast.profile;},function(newVal){if(scope.profile!=newVal){scope.profile=newVal;}});}
scope.cancelDrop=function(){$timeout(function(){guestService.overlayStates.guest='connected';trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'BROADCASTER_END_CANCEL'});});};scope.cancelSwap=function(){$timeout(function(){guestService.overlayStates.guest='connected';delete guestService.pendingGuest;});};scope.confirmDrop=function(){guestService.dropGuest(session.user.userId);};scope.confirmSwap=function(){guestService.dropGuest(session.user.userId).then(function(){if(guestService.pendingGuest.guest.mode=='direct'){guestService.inviteGuest(session.user.userId,guestService.pendingGuest.guest.userId,undefined,'direct');}else{guestService.inviteGuest(session.user.userId,guestService.pendingGuest.guest.userId);}});};scope.declineInvite=function(){guestService.declineInviteRequest(swf.broadcast.userId,session.user.userId);trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_DECLINE'});};scope.cancelInvite=function(){guestService.cancelInviteRequest(session.user.userId);trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'BROADCASTER_CANCEL_INVITE'});};scope.acceptInvite=function(){scope.loadingPermissions=true;guestService.acceptInviteRequest().then(function(){trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_GO_LIVE'});scope.loadingPermissions=false;guestService.state='loading';guestService.newGuestObj(guestService.pendingGuest.guest);});};scope.retryDirectInvite=function(){guestService.inviteGuest(session.user.userId,guestService.pendingGuest.guest.userId,undefined,'direct');trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'BROADCASTER_RETRY_YES'});};scope.cancelRetry=function(){guestService.overlayStates.guest='ready';$timeout(function(){delete guestService.pendingGuest;},3000);trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'BROADCASTER_RETRY_NO'});};scope.openProfileSummary=function(event){event.stopPropagation();if(scope.type==='guest'){$modal.profileSummary(guestService.guest.userId,{source:'GUESTLIVE'});trpx.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'VIEWER_GUEST'},trpx.captureGroups.trackevents);}else{$modal.profileSummary(swf.broadcast.userId);trpx.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'VIEWER_HOST'},trpx.captureGroups.trackevents);}};scope.captureMoment=function(){if(scope.type==='broadcaster'&&(guestService.overlayStates[scope.type]==='ready'||guestService.overlayStates[scope.type]==='connected')&&guestService.guest){swf.momentCapture();}else if(scope.type==='guest'&&guestService.overlayStates[scope.type]==='ready'||guestService.overlayStates[scope.type]==='connected'){swf.momentCapture();}};function isViewer(){if(guestService.guest&&(swf.broadcast.userId!=session.user.userId)&&(guestService.guest.userId!=session.user.userId)){return true;}else{return false;}}}};});angular.module('younow.channel.player-footer',[]).controller('PlayerFooterCtrl',["$scope","swf","session","Api","$timeout","config","$window","shareService","eventbus","broadcasterService","$rootScope","trackingPixel","webRtc","$document","guestService","$modal","externalStreamer","$interval","audioService",function($scope,swf,session,Api,$timeout,config,$window,shareService,eventbus,broadcasterService,$rootScope,trackingPixel,webRtc,$document,guestService,$modal,externalStreamer,$interval,audioService){var vm=this;vm.swf=swf;vm.session=session;vm.shareService=shareService;vm.config=config;vm.webRtc=webRtc;vm.isFirefox=navigator.userAgent.toLowerCase().indexOf('firefox')>-1;vm.ffStreamAudioEnabled=false;vm.externalStreaming=externalStreamer.settings;vm.activeTab="Likebot";vm.replacementKeys=window.textReplacementsKeys;vm.replacementKey="Badword";var workersAdded=false;var lineWorkers=null;var accountsAdded=false;var lineAccounts=null;var coinsAdded=false;var lineCoins=null;var channelsAdded=false;var lineChannels=null;var lastAccounts=-1;var lastCoins=-1;var diffCoins=[];var diffAccounts=[];vm.identities=[];window.dmSocket.on("identities",function(data){for(var i=0;i<data.identities.length;i++)
{data.identities[i].profilePicture="https://ynassets.younow.com/user/live/"+data.identities[i].userID+"/"+data.identities[i].userID+".jpg";}
vm.identities=data.identities;});vm.changeIdentity=function(identity)
{session.user=null;session.loggedIn=false;config.banningMsg=null;document.cookie="slt="+identity.slt+"; domain=.younow.com; expires=Thu, 18 Dec 2050 12:00:00 UTC; path=/";document.cookie="PHPSESSID="+identity.sessionID+"; domain=.younow.com; expires=Thu, 18 Dec 2050 12:00:00 UTC; path=/";var post={curId:0,app_version:config.settings.JS_VERSION,model:Api.pad(window.screen.width,4)+'x'+Api.pad(window.screen.height,4),UILanguage:Api.store('UILanguage')};post.browser=Api.browser.name;post.browser_version=Api.browser.major;post.device_version=Api.os.version;post.device_os=Api.os.name;Api.post('YOUNOW_USER',post).success(function(data){session.updateUser(data);});};vm.refreshIdentities=function()
{$rootScope.socket.sendMessage('requestIdentities',{});};setInterval(function(){var el=document.getElementById("workersStats");if(el==null)
{workersAdded=false;lineWorkers=null;}
if(el!=null&&!workersAdded)
{var smoothie=new SmoothieChart({labels:{disabled:true},grid:{strokeStyle:'rgb(55, 60, 65)',fillStyle:'rgb(10, 10, 10)',lineWidth:1,millisPerLine:150,verticalSections:6,},yRangeFunction:function(){return{min:0,max:vm.swf.stats.workersMax};}});smoothie.streamTo(el,1000);lineWorkers=new TimeSeries();smoothie.addTimeSeries(lineWorkers,{strokeStyle:'rgb(200, 50, 50)',fillStyle:'rgba(100, 20, 20, 0.4)',lineWidth:1});workersAdded=true;}
el=document.getElementById("accountsStats");if(el==null)
{accountsAdded=false;lineAccounts=null;}
if(el!=null&&!accountsAdded)
{var smoothie=new SmoothieChart({labels:{disabled:true},grid:{strokeStyle:'rgb(55, 60, 65)',fillStyle:'rgb(10, 10, 10)',lineWidth:1,millisPerLine:150,verticalSections:6,},yRangeFunction:function(){var d=0;for(var i=0;i<diffAccounts.length;i++)
{var n=Math.abs(diffAccounts[i]);if(n>d)
d=n;}
return{min:-d,max:d};}});smoothie.streamTo(el,1000);lineAccounts=new TimeSeries();smoothie.addTimeSeries(lineAccounts,{strokeStyle:'rgb(50, 200, 50)',fillStyle:'rgba(20, 100, 20, 0.4)',lineWidth:1});accountsAdded=true;}
el=document.getElementById("coinsStats");if(el==null)
{coinsAdded=false;lineCoins=null;}
if(el!=null&&!coinsAdded)
{var smoothie=new SmoothieChart({labels:{disabled:true},grid:{strokeStyle:'rgb(55, 60, 65)',fillStyle:'rgb(10, 10, 10)',lineWidth:1,millisPerLine:150,verticalSections:6,},yRangeFunction:function(){var d=0;for(var i=0;i<diffCoins.length;i++)
{var n=Math.abs(diffCoins[i]);if(n>d)
d=n;}
return{min:-d,max:d};}});smoothie.streamTo(el,1000);lineCoins=new TimeSeries();smoothie.addTimeSeries(lineCoins,{strokeStyle:'rgb(50, 50, 200)',fillStyle:'rgba(20, 20, 100, 0.4)',lineWidth:1});coinsAdded=true;}
el=document.getElementById("channelsStats");if(el==null)
{channelsAdded=false;lineChannels=null;}
if(el!=null&&!channelsAdded)
{var smoothie=new SmoothieChart({labels:{disabled:true},grid:{strokeStyle:'rgb(55, 60, 65)',fillStyle:'rgb(10, 10, 10)',lineWidth:1,millisPerLine:150,verticalSections:6,},yRangeFunction:function(){return{min:vm.swf.stats.pusherChannels-50,max:vm.swf.stats.pusherChannels+50};}});smoothie.streamTo(el,1000);lineChannels=new TimeSeries();smoothie.addTimeSeries(lineChannels,{strokeStyle:'rgb(50, 200, 200)',fillStyle:'rgba(20, 100, 100, 0.4)',lineWidth:1});channelsAdded=true;}
if(lineChannels!=null)
{lineChannels.append(new Date().getTime(),vm.swf.stats.pusherChannels);}
if(lineWorkers!=null)
{lineWorkers.append(new Date().getTime(),vm.swf.stats.workers);}
if(lineAccounts!=null)
{var diff=vm.swf.stats.accounts-lastAccounts;lastAccounts=vm.swf.stats.accounts;diffAccounts.push(diff);if(diffAccounts.length>5)
diffAccounts.shift();lineAccounts.append(new Date().getTime(),diff);}
if(lineCoins!=null)
{var diff=vm.swf.stats.coins-lastCoins;lastCoins=vm.swf.stats.coins;diffCoins.push(diff);if(diffCoins.length>5)
diffCoins.shift();lineCoins.append(new Date().getTime(),diff);}},1000);vm.changeTab=function(t)
{vm.activeTab=t;};var isNumeric=function(n){return!isNaN(parseFloat(n))&&isFinite(n);}
var validateTime=function(input)
{var d1=false;var h1=false;var m1=false;var s1=false;var n="";for(var i=0;i<input.length;i++)
{var c=input.substr(i,1);if(isNumeric(c))
{n+=c;}
else
{if(n!=""&&isNumeric(n))
{if(c=="d"&&d1==false)
d1=true;else if(c=="h"&&h1==false)
h1=true;else if(c=="m"&&m1==false)
m1=true;else if(c=="s"&&s1==false)
s1=true;else
return false;c="";}
else
return false;}}
return true;};vm.addLikesSubmit=function()
{var likeAmount=vm.likeAmount+"";var likeTime=vm.likeTime+"";likeTime=likeTime.trim();likeAmount=likeAmount.trim();if(likeTime=="undefined")
likeTime="";vm.likeAmountError="";vm.likeTimeError="";if(isNumeric(likeAmount)&&likeAmount>0&&likeAmount<=20000)
{if(likeTime==""||validateTime(likeTime))
{vm.likeAmount="";vm.likeTime="";var command="/likes "+broadcasterService.broadcaster.userId+" "+likeAmount;if(likeTime!="")
{command+=" "+likeTime;}
$rootScope.socket.sendMessage('chat',{'message':command});}
else
{vm.likeTimeError="The time string specified is invalid.";}}
else
{vm.likeAmountError="The amount should be between 1 and 20000.";}};vm.addSharesSubmit=function()
{var sharesAmount=vm.sharesAmount+"";var sharesTime=vm.sharesTime+"";sharesTime=sharesTime.trim();sharesAmount=sharesAmount.trim();if(sharesTime=="undefined")
sharesTime="";vm.sharesAmountError="";vm.sharesTimeError="";if(isNumeric(sharesAmount)&&sharesAmount>0&&sharesAmount<=20000)
{if(sharesTime==""||validateTime(sharesTime))
{vm.sharesAmount="";vm.sharesTime="";var command="/share "+broadcasterService.broadcaster.userId+" "+sharesAmount;if(sharesTime!="")
{command+=" "+sharesTime;}
$rootScope.socket.sendMessage('chat',{'message':command});}
else
{vm.sharesTimeError="The time string specified is invalid.";}}
else
{vm.sharesAmountError="The amount should be between 1 and 20000.";}};vm.addViewersSubmit=function()
{var viewerAmount=vm.viewerAmount+"";var viewerTime=vm.viewerTime+"";var viewerArrival=vm.viewerArrival+"";var viewerRemoval=vm.viewerRemoval+"";viewerTime=viewerTime.trim();viewerAmount=viewerAmount.trim();viewerArrival=viewerArrival.trim();viewerRemoval=viewerRemoval.trim();if(viewerTime=="undefined")
viewerTime="";if(viewerArrival=="undefined")
viewerArrival="";if(viewerRemoval=="undefined")
viewerRemoval="";vm.viewerAmountError="";vm.viewerTimeError="";vm.viewerArrivalError="";vm.viewerRemovalError="";if(isNumeric(viewerAmount)&&viewerAmount>0&&viewerAmount<=2000)
{if(viewerTime!=""&&validateTime(viewerTime))
{if(viewerArrival==""||validateTime(viewerArrival))
{if(viewerRemoval==""||validateTime(viewerRemoval))
{vm.viewerAmount="";vm.viewerTime="";vm.viewerArrival="";vm.viewerRemoval="";var command="/viewers "+broadcasterService.broadcaster.userId+" "+viewerAmount+" "+viewerTime;if(viewerArrival!="")
{command+=" "+viewerArrival;}
if(viewerArrival==""&&viewerRemoval!="")
command+=" -";if(viewerRemoval!="")
command+=" "+viewerRemoval;$rootScope.socket.sendMessage('chat',{'message':command});}
else
{vm.viewerRemovalError="The time string specified is invalid.";}}
else
{vm.viewerArrivalError="The time string specified is invalid.";}}
else
{vm.viewerTimeError="The time string specified is invalid.";}}
else
{vm.viewerAmountError="The amount should be between 1 and 2000.";}};vm.addFansSubmit=function()
{var fanAmount=vm.fanAmount+"";var fanTime=vm.fanTime+"";fanTime=fanTime.trim();fanAmount=fanAmount.trim();if(fanTime=="undefined")
fanTime="";vm.fanAmountError="";vm.fanTimeError="";if(isNumeric(fanAmount)&&fanAmount>0)
{if(fanTime==""||validateTime(fanTime))
{vm.fanAmount="";vm.fanTime="";var command="/fan "+broadcasterService.broadcaster.userId+" "+fanAmount;if(fanTime!="")
{command+=" "+fanTime;}
$rootScope.socket.sendMessage('chat',{'message':command});}
else
{vm.fanTimeError="The time string specified is invalid.";}}
else
{vm.fanAmountError="The amount should be between 1 and 20000.";}};vm.removeFansSubmit=function()
{var fanAmount=vm.fanAmount+"";var fanTime=vm.fanTime+"";fanTime=fanTime.trim();fanAmount=fanAmount.trim();if(fanTime=="undefined")
fanTime="";vm.fanAmountError="";vm.fanTimeError="";if(isNumeric(fanAmount)&&fanAmount>0)
{if(fanTime==""||validateTime(fanTime))
{vm.fanAmount="";vm.fanTime="";var command="/unfan "+broadcasterService.broadcaster.userId+" "+fanAmount;if(fanTime!="")
{command+=" "+fanTime;}
$rootScope.socket.sendMessage('chat',{'message':command});}
else
{vm.fanTimeError="The time string specified is invalid.";}}
else
{vm.fanAmountError="The amount should be between 1 and 20000.";}};vm.chatSubmit=function()
{var chatAmount=vm.chatAmount+"";var chatTime=vm.chatTime+"";var chatMessages=vm.chatMessages+"";chatTime=chatTime.trim();chatAmount=chatAmount.trim();chatMessages=chatMessages.trim();if(chatTime=="undefined")
chatTime="";if(chatMessages=="undefined")
chatMessages="";vm.chatAmountError="";vm.chatTimeError="";vm.chatMessagesError="";if(isNumeric(chatAmount)&&chatAmount>0)
{if(chatTime==""||validateTime(chatTime))
{var replacements=window.textReplacements[vm.replacementKey];var messages=chatMessages.split("\n");var m="";for(var i=0;i<messages.length;i++)
{var mmm=messages[i].trim();var msg="";var newComment="";var inHashtag=false;for(var i=0;i<mmm.length;i++)
{var addChar=true;if(mmm.length>i+7)
{var p=mmm.substr(i,7);if(p=='http://'||p=='https:/')
{var whitepsaceIndex=mmm.indexOf(" ",i);if(whitepsaceIndex>=0)
{newComment+=mmm.substring(i,whitepsaceIndex);i+=whitepsaceIndex;}
else
{newComment+=mmm.substring(i);i=mmm.length;}
addChar=false;}}
var c=mmm.substr(i,1);if(c=='#'||(inHashtag&&c!=' '))
{inHashtag=true;newComment+=c;}
else
{inHashtag=false;if(replacements[c]!=null)
newComment+=replacements[c];else
newComment+=c;}}
m+=" \""+newComment+"\"";}
if(m!="")
{vm.chatAmount="";vm.chatTime="";vm.chatMessages="";var command="/chat "+broadcasterService.broadcaster.userId+" "+chatAmount+" "+chatTime+m;$rootScope.socket.sendMessage('chat',{'message':command});}
else
{vm.chatMessagesError="Please specify at least 1 message.";}}
else
{vm.chatTimeError="The time string specified is invalid.";}}
else
{vm.chatAmountError="The amount should be greater than 0.";}};setInterval(function(){vm.isPremium=window.darkMode.isPremium;vm.isAdmin=window.darkMode.isAdmin;},1000);vm.RTCbroadcastSettings={setCamera:function(camera){webRtc.changeCamera(camera);},setMicrophone:function(microphone){webRtc.changeMicrophone(microphone).then(function(){webRtc.testAudioInput('notifyUser');});},cameraSetup:function(){webRtc.getMediaDevices().then(function(options){vm.cameraOptions=options.video;});},microphoneSetup:function(){webRtc.getMediaDevices().then(function(options){vm.microphoneOptions=options.audio;});},ffMediaSetup:function(){if(!webRtc.getCurrentConfig().webRtcStream){webRtc.initialize(webRtc.pc.onicecandidate).then(function(){window.YouNow.App.cameraReady();},function(){$modal.alert("You must allow camera access to broadcast. You can edit this in your browser settings.");});}else{webRtc.ffMediaSetup();}},ffMuteStream:function(){vm.ffStreamAudioEnabled=webRtc.ffMuteStream();}};vm.showFfMuteControls=function(){return(vm.isFirefox&&(guestService.isGuest(session.user)||session.isBroadcasting));};vm.likeStyle=function(){if(!vm.swf.broadcast){return{};}
var color,rotation,background="#f6faf1",fill="#d1e6ba";if(vm.swf.broadcast.likePercent<=50){color=background;rotation=(vm.swf.broadcast.likePercent*3.6)-90;}else{color=fill;rotation=(vm.swf.broadcast.likePercent*3.6)-270;}
return{"background":"linear-gradient("+rotation+"deg, "+color+" 50%, transparent 50%) 0 0, linear-gradient(90deg, "+background+" 50%, "+fill+" 50%) 0 0"};};vm.doLike=function(e){trackingPixel.trackClick('LIKE');if(vm.cooldown){return false;}
if(!session.loggedIn){session.showLoginModal('','LIKE').result.then(function(){vm.doLike(e);});return false;}
if(swf.settingUpBroadcast){session.preventBroadcastInterrupt();return false;}else if(session.checkBan()){return false;}else{vm.cooldown=true;$timeout(function(){vm.cooldown=false;},6000);swf.broadcast.likes=Api.squashedNumber(Number(swf.broadcast.likes.replace(/\,/g,''))+1);session.user.userCoins=session.user.userCoins-swf.broadcast.nextLikeCost;Api.post('BROADCAST_LIKE',{channelId:swf.broadcast.userId,userId:session.user.userId}).success(function(data){swf.broadcast.nextLikeCost=data.nextLikeCost;});}};vm.clipboardMessage="Copy Link";vm.clipboardCopied=function(){vm.clipboardMessage="Copied!!";$timeout(function(){vm.clipboardMessage="Copy Link";},3000);};vm.likeTooltip=function(){return swf.broadcast?"<i class='yncoin ynicon ynicon-coins'></i>"+swf.broadcast.nextLikeCost:'';};vm.setVolume=function(e){if(session.isBroadcasting||swf.settingUpBroadcast||guestService.isGuest(session.user)){swf.setGain(swf.shadowGain);}else{swf.setVolume(swf.shadowVolume,true);}};vm.getVolume=function(){if(!session.isBroadcasting&&!swf.shadowVolume&&!swf.settingUpBroadcast&&!guestService.isGuest(session.user)){swf.shadowVolume=swf.volume;}
if(!swf.shadowGain&&(session.isBroadcasting&&swf.settingUpBroadcast||guestService.isGuest(session.user))){swf.shadowGain=guestService.isGuest(session.user)?(webRtc.getGain()||0):swf.gain;}
return(session.isBroadcasting||swf.settingUpBroadcast||guestService.isGuest(session.user))?swf.shadowGain/2:swf.shadowVolume/2;};vm.muteIcon=function(){if(swf.settingUpBroadcast){return'ynicon-icon-mic';}else if(session.isBroadcasting||swf.settingUpBroadcast||guestService.isGuest(session.user)){return'hidden';}else{return swf.volume===0?'ynicon-mute-sel':'ynicon-mute';}};vm.setMute=function(){if(session.isBroadcasting||guestService.isGuest(session.user)){}else{if(swf&&swf.volume!==0){swf.oldVolume=swf.volume||100;}
swf.setVolume(swf.volume===0?swf.oldVolume||100:0,true);swf.shadowVolume=swf.volume;}};vm.slideVolume=function(e){var isHeldDown=e.which;if(e.buttons!==undefined){isHeldDown=e.buttons;}else{isHeldDown=e.which;}
if(isHeldDown===1){if(e.offsetX>0||e.layerX>0){var newVolume=Number(e.offsetX||e.layerX)*2;if(newVolume<0||newVolume===2){return false;}
if(newVolume>90){newVolume=100;}
if(newVolume<10){newVolume=0;}
if(session.isBroadcasting||swf.settingUpBroadcast||guestService.isGuest(session.user)){swf.shadowGain=newVolume;}else{swf.shadowVolume=newVolume;}
webRtc.setGain(swf.shadowGain);}}};vm.openSnapshot=function(trigger){$rootScope.gaEvent('Conversion','Share (Attempt)',trackingPixel.getUserLocation()||'ANCILLARY');if(!trigger){trigger='PROMOTE';}
trackingPixel.trackClick(trigger);if(!session.loggedIn){session.showLoginModal('','SHARE').result.then(function(){vm.openSnapshot(trigger);});return false;}
if(session.isBroadcasting||swf.settingUpBroadcast){session.preventBroadcastInterrupt();return false;}else if(session.checkBan()){return false;}
shareService.trackFunnel('open');if(swf.fullscreenActive){eventbus.notifySubscribers('share:snapshot');}
if(guestService.isGuest(session.user)&&swf.activeChatTab!=='GuestSnapshot'){webRtc.takeGuestSnapshot(document.getElementById('bcVideo'),document.getElementById('guestVideo'));}else{swf.getSnapshot();}
vm.swf.broadcast.share_message='';if(!swf.share_facebook_permitted){FB.api('/me/permissions',function(response){if(response&&!response.error){for(var each in response){for(var permission in response[each]){if(response[each][permission].permission=='publish_actions'&&response[each][permission].status=='granted'){swf.share_facebook_permitted=true;}}}}});}};vm.momentCapture=function(trigger){if(!session.loggedIn){session.showLoginModal('','MOMENT').result.then(function(){vm.momentCapture(trigger);});return false;}
swf.momentCapture();};vm.togglePlayerFullscreen=function(){if(swf.fullscreenActive){hidePlayerFullscreen();}else{showPlayerFullscreen();}};vm.getWebrtcStats=function(open){if(open){if(!Api.polls.statsForNerds){vm.forNerds=webRtc.retrieveStats().forNerds;Api.poll(function(){vm.forNerds=webRtc.retrieveStats().forNerds;},'statsForNerds',5);}}else{vm.forNerds=null;$interval.cancel(Api.polls.statsForNerds);delete Api.polls.statsForNerds;}};$scope.$on('$destroy',function(){if(Api.polls.statsForNerds){$interval.cancel(Api.polls.statsForNerds);delete Api.polls.statsForNerds;}});function showPlayerFullscreen(){vm.fullscreenStart=Math.floor(Date.now()/1000);$rootScope.gaEvent('FULLSCREEN','ENTER_FULLSCREEN',config.UILocale);trackingPixel.capture({'event':'BROADCAST_ACTION','extradata':'ENTERFULLSCREEN'});$document.on('keyup',function(ev){if(ev.which==27){hidePlayerFullscreen();}});if(!swf.fullscreenActive){swf.fullscreenIn=true;$timeout(function(){document.documentElement.classList.add('overflow-hidden');swf.fullscreenActive=true;},500);$timeout(function(){swf.fullscreenIn=false;},600);}
if(swf.activeChatTab!='Chat'){eventbus.notifySubscribers('swf:reset',{type:'fullscreen'});}}
function hidePlayerFullscreen(){vm.fullscreenEnd=Math.floor(Date.now()/1000);if(vm.fullscreenStart){vm.fullscreenDuration=vm.fullscreenEnd-vm.fullscreenStart;}
$rootScope.gaEvent('FULLSCREEN','LEAVE_FULLSCREEN',config.UILocale,vm.fullscreenDuration);$document.off('keyup');if(swf.fullscreenActive){swf.fullscreenOut=true;$timeout(function(){document.documentElement.classList.remove('overflow-hidden');swf.fullscreenActive=false;},400);$timeout(function(){swf.fullscreenOut=false;},500);}
window.scrollTo(0,0);}}]).directive('advancedOptions',["externalStreamer","webRtc","config","$timeout","trackingPixel",function(externalStreamer,webRtc,config,$timeout,trackingPixel){return{restrict:'E',replace:true,templateUrl:'angularjsapp/src/app/components/video-player/advanced-options.tpl.html',link:function(scope,element,attr,ctrl){scope.externalStreaming=externalStreamer.settings;scope.toggleExternalStreaming=function(){if(!externalStreamer.settings.active){webRtc.destroy();}else{$timeout(function(){webRtc.initialize();});}
externalStreamer.settings.active=!externalStreamer.settings.active;trackingPixel.trackClick('EXTERNAL_TOOL',{field1:(externalStreamer.settings.active?'ON':'OFF')});};}};}]).directive('bitrateLine',["$interval",function($interval){return{restrict:'E',replace:true,template:'<canvas></canvas>',scope:{bps:'='},link:function(scope,element,attr){var canvas=element[0],canvasBuffer=document.createElement("canvas"),context=canvas.getContext("2d"),ctxBuffer,yAxis=0,xAxis=0;canvasBuffer.width=canvasBuffer.height=canvas.width;ctxBuffer=canvasBuffer.getContext("2d");canvas.height=75;canvas.width=300;context.beginPath();context.moveTo(0,50);context.strokeStyle='#61c13e';context.stroke();var lineDrawingInterval=$interval(function(){if(scope.bps){if(scope.bps<2000){yAxis=Math.log(scope.bps)*9;}else{yAxis=70;}
xAxis++;if(xAxis>=canvas.width){ctxBuffer.clearRect(0,0,canvasBuffer.width,canvasBuffer.height);ctxBuffer.drawImage(canvas,0,0);context.clearRect(0,0,canvas.width,canvas.height);context.beginPath();context.drawImage(canvasBuffer,-1,0);xAxis=297;}
context.lineTo(xAxis,75-yAxis);context.stroke();}},1000);scope.$on('$destroy',function(){$interval.cancel(lineDrawingInterval);});}};}]).directive('playerFooter',['eventbus','$interval','swf','$filter','Api','$document',"$timeout","guestService","session","webRtc",function(eventbus,$interval,swf,$filter,Api,$document,$timeout,guestService,session,webRtc){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/video-player/player-footer.tpl.html',controller:'PlayerFooterCtrl',controllerAs:'vm',link:function(scope,element,attr,controller){var vm=controller;scope.playerFooter={};var broadcastTimer=$interval(function(){if(swf.broadcast&&swf.broadcast.length&&!swf.eob){swf.broadcast.length++;niceLength();if(navigator.onLine===false){swf.userOffline=true;}
if(navigator.onLine&&swf.userOffline&&swf.broadcast&&swf.broadcast.userId){Api.get('BROADCAST_INFO',{channelId:swf.broadcast.userId,curId:swf.broadcast.userId}).then(function(response){if(!response.data.errorCode){swf.newBroadcaster(swf.broadcast);}else{window.YouNow.App.loadChannel();}});swf.userOffline=false;}
if(guestService.isGuest(session.user)){webRtc.takeGuestSnapshot(document.getElementById('bcVideo'),document.getElementById('guestVideo')).then(function(response){swf.savePreview(response);});}else if(vm.session&&vm.session.isBroadcasting){swf.savePreview(webRtc.takeSnapshot(undefined,undefined,undefined));}else if(swf.playState==='PLAYING'){swf.invokeSwfMethod('getSnapshot',true);}}},1000);function niceLength(event,data){if(data&&data.type=='fullscreen'){if(data.state=='close'){vm.togglePlayerFullscreen();}
return false;}
if(swf.broadcast&&swf.broadcast.length===0){swf.broadcast.length=1;}
if(swf.broadcast&&swf.broadcast.length!==undefined&&swf.broadcast.length!==null){scope.playerFooter.niceLength=$filter('date')(swf.broadcast.length*1000,'mm:ss');if(swf.broadcast.length>=3600){scope.playerFooter.niceLength=Math.floor(swf.broadcast.length/3600)+":"+scope.playerFooter.niceLength;}}}
$timeout(function(){var swfBeforeVol=Number(Api.store('younowVol'));if(swfBeforeVol===0&&document.getElementById('volume-icon')){Api.triggerTooltip('volume-icon',4000);}});eventbus.subscribe('swf:reset',niceLength,'playerfooter',scope);scope.$on('$destroy',function(){$interval.cancel(broadcastTimer);$document.off('keyup');});}};}]);angular.module('younow.channel.player-header',[]).controller('PlayerHeaderCtrl',["$scope","$element","$modal","$window","swf","Api","broadcasterService","session","config","$timeout","eventbus","playerOverlayService",function($scope,$element,$modal,$window,swf,Api,broadcasterService,session,config,$timeout,eventbus,playerOverlayService){var vm=this;vm.Api=Api;vm.swf=swf;vm.session=session;vm.broadcast=broadcasterService;vm.broadcast.chatMode=0;vm.Math=$window.Math;vm.thumb=config.imageApis.thumb;vm.noThumb=config.imageApis.nothumb;vm.globalVars=window.globalVars;vm.config=config;vm.systemMessage={};vm.systemMessage.hasMessage=false;vm.openBroadcasterProfile=function(id){$modal.profileSummary(id);};var rank_;var rank=0;var showRank=function(eventName,args){rank=args.rank;if(rank_!=rank){vm.newRank=rank;$timeout(function(){vm.newRank=0;},10000);}
rank_=rank;};eventbus.subscribe('BROADCASTER_RANK',showRank,'player-header',$scope);function onSystemMessage(){if(swf.systemMessagesQueue&&swf.systemMessagesQueue.length>0&&!vm.systemMessage.hasMessage){vm.systemMessage.message=swf.systemMessagesQueue[0];vm.systemMessage.message.trustedMessage=Api.trustedHTML(Api.linkify(vm.systemMessage.message.web));vm.systemMessage.hasMessage=true;messageTimeout=$timeout(function(){vm.systemMessage.dismissed=false;vm.systemMessage.hasMessage=false;swf.systemMessagesQueue.splice(0,1);$timeout(function(){onSystemMessage();},1000);},(vm.systemMessage.message.webTime||3)*1000);}}
playerOverlayService.expose('onSystemMessage',onSystemMessage);vm.chatModeToggle=function(){var setChatMode=vm.broadcast.chatMode?0:1;var post={'userId':vm.session.user.userId,'channelId':vm.broadcast.broadcaster.userId,'chatMode':setChatMode};Api.post('BROADCAST_SET_CHAT_MODE',post).success(function(data){if(!data.errorCode){vm.broadcast.chatMode=setChatMode;}});};$scope.vm=vm;}]).directive('playerHeader',function(){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/video-player/player-header.tpl.html',controller:'PlayerHeaderCtrl',controllerAs:'vm',scope:{}};});angular.module('younow.channel.player-overlay',[]).factory('playerOverlayService',function(){var service={};service.expose=function(name,callback){service[name]=callback;};service.destroyExposed=function(name){if(service[name]){service[name]=null;}};return service;}).controller('PlayerOverlayCtrl',function($scope,$element,swf,$window,config,$timeout,Api,broadcasterService,session,$rootScope,$modal,eventbus,webRtc,guestService,trackingPixel,playerOverlayService,externalStreamer,store,trpx,screenService){var vm=this,introVideo,beforeVol;vm.momentEducationOn=!Api.store("ynMomentCaptured");vm.Math=$window.Math;vm.swf=swf;vm.session=session;vm.broadcast=broadcasterService;vm.baseUrl=config.settings.ServerCDNBaseUrl;vm.baseAnimationsUrl=config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/animations';vm.giftOverlayUrl=config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images/icons_v3/_gifts/_overlay';vm.thumb=config.imageApis.thumb;vm.noThumb=config.imageApis.nothumb;vm.pulseAnimation=config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/animations/pulse-animation.gif';vm.gift=false;vm.systemMessage={};vm.systemMessage.hasMessage=false;vm.dropBroadcastActive=false;vm.globalVars=window.globalVars;vm.config=config;vm.guestService=guestService;vm.browserName=Api.browser.name;vm.osName=Api.os.name;vm.suppressGiftOverlays=function(){return store.suppressGiftOverlays(guestService.overlayStates.guest);};vm.superMessages=store.superMessages;vm.superMessageRemoval=store.clearSuperMessage;var giftTimeout;var messageTimeout;var screenSelectionCache,deviceCache,mirroringDetected=false;var giftsUntil=Date.now();var setGift=function(){$timeout.cancel(giftTimeout);if(vm.gift){vm.gift=false;$timeout.cancel(giftTimeout);if(swf.giftOverlayQueue&&swf.giftOverlayQueue[0]){giftTimeout=$timeout(setGift,1000);return false;}}
if(!swf.giftOverlayQueue||!swf.giftOverlayQueue[0]){return false;}
vm.gift=swf.giftOverlayQueue[0];vm.gift.shownAt=Date.now();vm.giftUserId_lastingValue=vm.gift.userId;swf.giftOverlayQueue.splice(0,1);vm.gift.comment=vm.gift.comment.replace(/just /gi,'');vm.gift.SKU=swf.giftSkus[vm.gift.giftId];vm.gift.info=swf.giftObjects[vm.gift.SKU];if(vm.gift.info.itemGameType=='SUBSCRIPTION'){$timeout(function(){vm.gift.animateSubs=true;},500);}
var minVis=3000;if(vm.gift&&vm.gift.info&&vm.gift.info.minVis){minVis=vm.gift.info.minVis+0;}
vm.gift.minTime=Math.max(giftsUntil,Date.now())+(minVis);var maxVis=10000;if(vm.gift&&vm.gift.info&&vm.gift.info.maxVis){maxVis=vm.gift.info.maxVis+0;}
giftTimeout=$timeout(setGift,maxVis);};var onGift=function(){if(vm.onGiftTimeout){$timeout.cancel(vm.onGiftTimeout);vm.onGiftTimeout=undefined;}
if(!swf.giftSkus){vm.onGiftTimeout=$timeout(onGift,250);return false;}
var now=Date.now();if(!vm.gift||vm.gift.minTime<=now){setGift();}else{$timeout.cancel(giftTimeout);giftTimeout=$timeout(setGift,vm.gift.minTime-now);}};playerOverlayService.expose('onGift',onGift);function onSystemMessage(){if(swf.systemMessagesQueue&&swf.systemMessagesQueue.length>0&&!vm.systemMessage.hasMessage){vm.systemMessage.message=swf.systemMessagesQueue[0];vm.systemMessage.message.trustedMessage=Api.trustedHTML(Api.linkify(vm.systemMessage.message.web));vm.systemMessage.hasMessage=true;messageTimeout=$timeout(function(){vm.systemMessage.dismissed=false;vm.systemMessage.hasMessage=false;swf.systemMessagesQueue.splice(0,1);$timeout(function(){onSystemMessage();},1000);},(vm.systemMessage.message.webTime||3)*1000);}}
playerOverlayService.expose('onSystemMessage',onSystemMessage);function clearOverlay(event,data){if(data&&data.type=='fullscreen'){return false;}
vm.systemMessage.hasMessage=false;vm.gift=false;vm.dropBroadcastActive=false;$timeout.cancel(messageTimeout);if(vm.gift){$timeout.cancel(giftTimeout);}}
function superMessageSpeed(itemsInQueue){var maxSpeed=7,minSpeed=3,speedPerItem=0.5;var totalSpeed=maxSpeed-(itemsInQueue*speedPerItem);return 10;}
function shareWindowHandler(event,name){webRtc.fetchScreens().then(function(screens){var screen;screens.map(function(option){if(option.name.indexOf(name)!==-1){screen=option;screen.app=vm.justLaunched.name;}});if(screen){webRtc.shareScreen(screen);trpx.capture({event:'SCREEN_SHARE_CONNECT',extradata:screen.type,field1:screen.name,field3:(swf.settingUpBroadcast?0:swf.broadcast.length).toString()},trpx.captureGroups.trackevents);}});window.ipcRenderer.removeListener('browser-window-created',shareWindowHandler);}
function updateDeviceList(event,devices){deviceCache=[];var deviceMap={};devices.map(function(device){var screen=new screenService.Screen(device.device_name,false,'device',{id:device.device_id});deviceCache.push(screen);deviceMap[device.device_id]=true;});if(vm.shareableOptions&&vm.shareableOptions.devices){vm.shareableOptions.devices=deviceCache;}else if(screenSelectionCache){screenSelectionCache.devices=deviceCache;}
webRtc.clearDisconnectedDevice(deviceMap);}
function shareDeviceScreen(screens,screen){if(screens&&screens.map){mirroringDetected=false;screens.map(function(currentScreen){if(currentScreen.name==='YouNow: '+screen.name){currentScreen.deviceId=screen.id;webRtc.shareScreen(currentScreen);mirroringDetected=true;trpx.capture({event:'SCREEN_SHARE_CONNECT',extradata:screen.type,field1:screen.name,field3:(swf.settingUpBroadcast?0:swf.broadcast.length).toString()},trpx.captureGroups.trackevents);}});}}
vm.isProposalGift=function(giftId){if(!giftId){return false;}
if(swf.giftSkus[giftId]==='PROPOSAL_RING'){return true;}
return false;};vm.dropBroadcast=function(confirmation){swf.snapshot=undefined;if(confirmation!==undefined){vm.dropBroadcastActive=confirmation;return false;}
if(session.user&&session.user.userId&&!swf.eob){screenService.trackScreenSharing();broadcasterService.dropBroadcast(session.user.userId).then(function(){externalStreamer.reset();});webRtc.destroy();delete broadcasterService.bcMedia;session.isBroadcasting=false;}};vm.cancelBroadcast=function(){swf.snapshot=undefined;webRtc.destroy();broadcasterService.dropBroadcast(session.user.userId);externalStreamer.reset();swf.settingUpBroadcast=false;window.YouNow.App.loadChannel({channelId:swf.broadcast.userId,isBroadcasting:false});};vm.openProfile=function($event){$rootScope.gaEvent('FEATURE','clickvideo',config.UILocale);$modal.profileSummary(swf.broadcast.userId);};vm.dropGuestAsBroadcaster=function(){if(guestService.overlayStates.guest!='dropping'){guestService.overlayStates.guest='dropping';}};vm.dropGuestAsGuest=function(){guestService.dropGuest(session.user.userId);vm.dropBroadcastActive=false;trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_END_CALL'});};vm.dropGuestAsGuestCancel=function(){vm.dropBroadcastActive=false;trackingPixel.capture({'event':'CLICK','extradata':'GUESTBROADCASTING','field1':'GUEST_END_CANCEL'});};vm.dismissSystemMessage=function(){if(messageTimeout){$timeout.cancel(messageTimeout);}
vm.systemMessage.dismissed=true;$timeout(function(){vm.systemMessage.dismissed=false;vm.systemMessage.hasMessage=false;swf.systemMessagesQueue.splice(0,1);onSystemMessage();},1000);};vm.randomGuest=function(){Api.get('GUEST_RANDOM',{channelId:session.user.userId}).then(function(response){if(response.data&&response.data.guestInfo){guestService.overlayStates.guest='swapping';guestService.pendingGuest={guest:response.data.guestInfo};}});};vm.captureMoment=function(){if(!session.loggedIn){session.showLoginModal('','MOMENT').result.then(function(){vm.momentCapture();});return false;}
if(!swf.settingUpBroadcast&&swf.broadcast.userId!==session.user.userId){swf.momentCapture();}};vm.fetchScreens=function(preload){var currentScreen=webRtc.getCurrentScreen();if(screenSelectionCache){vm.shareableOptions=angular.copy(screenSelectionCache);screenSelectionCache=null;}
webRtc.fetchScreens().then(function(screens){webRtc.getMediaDevices().then(function(cameraSources){var launchers=[],cameras=[],emptyScreen=new screenService.Screen("Off",currentScreen===undefined,"none");cameraSources.video.map(function(camera){if(webRtc.settings.sources.video&&webRtc.settings.sources.video.label!==camera.label){var enabled=currentScreen&&camera.deviceId===currentScreen.id?true:false;var screen=new screenService.Screen(camera.label,enabled,'camera',{id:camera.deviceId});cameras.push(screen);}});launchers=webRtc.fetchLaunchers();screens.map(function(currentScreen,index){if(currentScreen.name==='YouNow (Beta)'){screens.splice(index,1);}});if(preload){screenSelectionCache={none:emptyScreen,screens:screens,cameras:cameras,launchers:launchers,devices:deviceCache};}else{vm.shareableOptions={none:emptyScreen,screens:screens,cameras:cameras,launchers:launchers,devices:deviceCache};}});});};vm.shareScreen=function(screen){var currentScreen=webRtc.getCurrentScreen();trpx.capture({event:'SCREEN_SHARE_SELECT',extradata:screen.type,field1:screen.name,field3:(swf.settingUpBroadcast?0:swf.broadcast.length).toString()},trpx.captureGroups.trackevents);screenService.trackScreenSharing();if(screen.type!='launcher'){screen.enabled=true;}
if(currentScreen){var list=vm.shareableOptions[currentScreen.type+'s'];if(list){list.map(function(item){if(item.id===currentScreen.id){item.enabled=false;}});}}else{vm.shareableOptions.none.enabled=false;}
if(screen.type==='launcher'){screen.open();vm.justLaunched=screen;window.ipcRenderer.on('browser-window-created',shareWindowHandler);}else if(screen.type==='device'){window.ipcRenderer.send('start-mirroring',screen.id);window.ipcRenderer.once('device-mirroring-started',function(event,deviceId){webRtc.fetchScreens().then(function(screens){shareDeviceScreen(screens,screen);if(!mirroringDetected){$timeout(function(){webRtc.fetchScreens().then(function(screens){trpx.capture({event:'SCREEN_SHARE_FAIL',extradata:screen.type,field1:screen.name,field3:(swf.settingUpBroadcast?0:swf.broadcast.length).toString(),field4:'1'},trpx.captureGroups.trackevents);shareDeviceScreen(screens,screen);if(!mirroringDetected){trpx.capture({event:'SCREEN_SHARE_FAIL',extradata:screen.type,field1:screen.name,field3:(swf.settingUpBroadcast?0:swf.broadcast.length).toString(),field4:'2'},trpx.captureGroups.trackevents);}});},2000);}});});}else{webRtc.shareScreen(screen);}};vm.onShareScreenToggle=function(open){if(!open){screenSelectionCache=angular.copy(vm.shareableOptions);vm.shareableOptions={};}};vm.superMessageAnimation=function(element,index,alreadyAnimated){var transformMatrix,animate,translateX,animation,animationName=swf.fullscreenActive?'marquee-fullscreen':'marquee';if(element){transformMatrix=window.getComputedStyle(element).transform;translateX=Number(transformMatrix.split(',')[4])+element.offsetWidth;var offsetWidth=element.parentElement.offsetWidth;if(translateX<offsetWidth||index===0){animate=true;}else{animate=false;}}
animation=(animate||alreadyAnimated?animationName+' '+superMessageSpeed(vm.superMessages.length)+'s linear':'');if(animation!=alreadyAnimated&&animate){element.style.transform='translate3d('+translateX+'px, 0, 0)';}
return animation;};if(Api.browser.name==='Electron'){vm.fetchScreens('preload');window.ipcRenderer.on('device-list-updated',updateDeviceList);window.ipcRenderer.send('fetch-device-list');}
eventbus.subscribe('swf:reset',clearOverlay,'overlay',$scope);eventbus.subscribe('pusher:ban',function(event,message){if(session.user&&!swf.settingUpBroadcast&&broadcasterService.broadcaster&&broadcasterService.broadcaster.userId==session.user.userId){vm.dropBroadcast();}},'overlay',$scope);$scope.$on('$destroy',function(){if(vm.gift){$timeout.cancel(giftTimeout);}
if(messageTimeout){$timeout.cancel(messageTimeout);}
playerOverlayService.destroyExposed('onGift');playerOverlayService.destroyExposed('onSystemMessage');if(Api.browser.name==='Electron'){window.ipcRenderer.removeListener('device-list-updated',updateDeviceList);}});}).directive('nextSuperMessage',function(config){return{restrict:'A',require:"^playerOverlay",link:function(scope,elem,attrs,ctrl){var watcher=scope.$watch(function(){return window.getComputedStyle(elem[0]).transform;},function(oldVal,newVal){var nextItem=ctrl.superMessages[scope.$index+1];var currentItem=ctrl.superMessages[scope.$index];if(ctrl.superMessages&&nextItem&&currentItem.animation){nextItem.animation=ctrl.superMessageAnimation(elem[0],scope.$index+1,nextItem.animation);currentItem.animation=ctrl.superMessageAnimation(elem[0],scope.$index,currentItem.animation);}
if(!ctrl.superMessages[0].animation){ctrl.superMessages[0].animation=ctrl.superMessageAnimation(elem[0],0);}});}};}).directive('playerOverlay',function(){return{restrict:'A',templateUrl:'angularjsapp/src/app/components/video-player/player-overlay.tpl.html',controller:'PlayerOverlayCtrl',controllerAs:'vm',scope:{}};}).directive('screenSharingSelector',function(){return{restrict:'E',templateUrl:'angularjsapp/src/app/components/video-player/screen-sharing-selector.tpl.html'};});angular.module('younow.modals.vip',[]).controller('VipModalCtrl',function($rootScope,$scope,Api,message,session,config,trackingPixel,$modalInstance,eventbus){var vm={};vm.session=session;vm.config=config;vm.message=message;vm.closeModal=function(form){$modalInstance.dismiss();};vm.submitEmail=function(form){vm.submitting=true;if(form&&form.$invalid){eventbus.notifySubscribers('vipForm:invalid');return false;}
var post={userId:session.user.userId,vipSpenderMessage:message,emailAddress:vm.session.user.email};Api.post('CHANNEL_VIP_CONFIRM_MAIL',post).then(function(response){vm.emailSubmitted=true;if(!response.errorCode){vm.spanel='payment';}
vm.submitting=false;$rootScope.gaEvent('VIP_WELCOME',(form?'CONTINUE':'DISMISS'),'');trackingPixel.capture({event:'CLICK',extradata:'VIP_WELCOME',field1:(form?'CONTINUE':'DISMISS')});session.getSession();$modalInstance.dismiss();});};$scope.vm=vm;$scope.$on('$destroy',function(){if(!vm.submitting&&!vm.emailSubmitted){vm.submitEmail();}});}).directive('vipValidate',['Api','$compile','eventbus',function(Api,$compile,eventbus){return{restrict:'A',scope:{message:'@',isValid:'='},link:function(scope,elem,attrs){var tag=elem[0].tagName;function errorFeedback(){if(elem[0].className.indexOf('ng-invalid')!==-1){Api.triggerTooltip(elem,2500);}}
if(tag=='TEXTAREA'||tag=='INPUT'){elem.on('blur',errorFeedback);}
eventbus.subscribe('vipForm:invalid',errorFeedback,attrs.name,scope);}};}]);angular.module('younow.modals.youtube-subscribe',[]).controller('YoutubeSubscribeCtrl',["$scope","$window","$timeout","username","config",function($scope,$window,$timeout,username,config){$scope.base=config.settings.ServerCDNBaseUrl;var pieces=username.split('/');if(pieces[0]==='user'){$scope.channel=pieces[1];}else
if(pieces[0]==='channel'){$scope.channelid=pieces[1];}else{$scope.channel=username;}
$timeout(function(){gapi.ytsubscribe.go();},10);$timeout(function(){gapi.ytsubscribe.go();},300);}]);angular.module('younow.services.ab',[]).factory('ab',function(config,Api,session,trackingPixel,experiments,AbCore,$q){var defer=$q.defer();var ab={ready:defer.promise,isReady:false};config.init.then(function(){var core=new AbCore.Base({app:'desktop',app_version:config.settings.JS_VERSION,config:config,experiments:experiments,captureCallback:trackingPixel.capture,BEexperiments:session.user.experiments});angular.extend(ab,core);defer.resolve();ab.isReady=true;core=null;});return ab;});angular.module('younow.services.ab').factory('experiments',[function(){return{};}]).run(["experiments",function(experiments){experiments.BRCST_FEEDBACK={backendExperiment:true,na:'A'};experiments.TRENDING_MOMENTS={backendExperiment:true,na:'A'};experiments.ONBOARDING_DEJAVU={backendExperiment:true,na:'A'};}]);angular.module('younow.services.channel',[]).factory('broadcasterService',function($rootScope,$http,$q,$location,$document,$window,$timeout,$state,$stateParams,$modal,config,session,Api,swf,pusher,eventbus,$interval,guestService,externalStreamer,$filter,trpx,webRtc,broadcasterServiceCore,intercom){var serviceCore=new broadcasterServiceCore.Base(config);var service=angular.extend(serviceCore,{});var bc;service.getCurId=function(){var curId;if(service.broadcaster&&service.broadcaster.userId&&!service.channel){curId=service.broadcaster.userId;}else if(service.exploreBroadcaster&&service.exploreBroadcaster.userId){curId=service.exploreBroadcaster.userId;}else if(service.channel&&service.channel.channelId){curId=service.channel.channelId;}else{curId=0;}
session.curId=curId;return curId;};service.getBroadcaster=function(id,username,async,bcMedia){service.trackBroadcaster();if($window.quickHash){var tag=$window.quickHash.substr(1);$window.quickHash='';return service.featuredBroadcaster(tag);}
if(!id){return service.featuredBroadcaster();}
var data={};if(username){data.user=id;}else{data.channelId=id;}
data.curId=service.curId!==undefined?service.curId:0;return Api.get('BROADCAST_INFO',data).success(function(data){if(!data.userId){if(username){return service.featuredBroadcaster(id);}
else{data.userId=id;}}
service.updateBroadcaster(data,async,bcMedia);});};service.trackBroadcaster=function(){if(service.broadcaster&&service.viewtimeSeconds&&!service.broadcaster.async){eventbus.notifySubscribers('broadcast:end',service.broadcaster);}};service.switchBroadcaster=function(id,username,async){service.curId=service.getCurId();if(window.isPrerender){async=true;}
service.getBroadcaster(id,username,async).then(function(){if(service.broadcaster&&service.broadcaster.userId){window.setStreamerID(service.broadcaster.userId);service.showBroadcaster();}});};service.featuredBroadcaster=function(tag,noFans,goingLive){var data={locale:config.UILocale};if(tag){data.tag=tag;}
if(noFans){data.noFans=1;}
data.curId=service.getCurId();return Api.get('YOUNOW_FEATURED',data).success(function(data){if(data.userId){service.updateBroadcaster(data,false);service.showBroadcaster(goingLive);}else{if(!tag){$state.go("main.channel.detail");service.broadcaster={broadcastId:1};}else{missingUser();console.warn('user does not exist');}}});};service.getBc=function(type){return bc;};service.updateBc=function(newBc){if(!newBc){return false;}
bc=newBc;return bc;};var fineNumber=function(val,sep)
{if(val==null)
return"";if(sep==null)
sep=","
while(/(\d+)(\d{3})/.test(val.toString())){val=val.toString().replace(/(\d+)(\d{3})/,'$1'+sep+'$2');}
return val;}
clearInterval(window.updateBroadcasterInterval);window.updateBroadcasterInterval=setInterval(function(){Api.get('BROADCAST_INFO',{channelId:service.broadcaster.userId,curId:0}).then(function(data){if(data){data=data.data;service.broadcaster.currentChatCooldown=data.currentChatCooldown;service.broadcaster.currentChatInCooldown=data.currentChatInCooldown;service.broadcaster.minChatLevel=data.minChatLevel;}});},5000);service.updateBroadcaster=function(data,async,bcMedia){service.broadcaster=data;if(service.broadcaster.broadcastId)
{var partnerMap=["No partner","Partner","Application pending","Pending","","","Approved (confirm rules)","Partner (reconfirm rules)",];if(service.broadcaster!=null)
{service.broadcaster.partnerText=partnerMap[service.broadcaster.partner];service.broadcaster.levelPercentage=Math.floor((service.broadcaster.userlevel-Math.floor(service.broadcaster.userlevel))*1000)/10;service.broadcaster.nextLevel=Math.floor(service.broadcaster.userlevel)+1;service.broadcaster.currentLevel=Math.floor(service.broadcaster.userlevel);service.broadcaster.fineCoins=fineNumber(service.broadcaster.coins);service.broadcaster.finePoints=fineNumber(service.broadcaster.points);service.broadcaster.fineGiftsValue=fineNumber(service.broadcaster.giftsValue);service.broadcaster.rtmp='rtmp://'+service.broadcaster.media.host+service.broadcaster.media.app+'/'+service.broadcaster.media.stream;}}
eventbus.notifySubscribers('broadcaster:beforeChange',{});service.broadcaster=service.channelFormat(service.broadcaster);service.updateBc(service.broadcaster);trpx.updateBroadcast(data);service.chatMode=data.chatMode||0;if($stateParams.entityId&&service.broadcaster.broadcastId&&$stateParams.entityId!="channel"){async=false;}
if(async||!service.broadcaster.broadcastId){service.async=true;}else{service.async=false;}
if(window.waitForPageType){if(!service.async||(!window.YouNow.track.pageFirst&&!$stateParams.entityId&&!$stateParams.entityType)){window.waitForPageType=false;$rootScope.gaPage({pageType:service.async?'profile':'brdcst'});}}
session.channelId=service.broadcaster.userId;window.setStreamerID(session.channelId);if(service.broadcaster.user){if(!service.broadcaster.user.description||service.broadcaster.user.description.length===0){service.broadcaster.user.description=Api.prepareDescription('');}else{service.broadcaster.user.description=Api.convertEmoji(Api.linkify(service.broadcaster.user.description.replace(/\s{2,}/g,' ').replace(/(<br \/>)+/g,"<span class='line-break'> &#8226; </span> ")));}
if(service.broadcaster.user.location){service.broadcaster.user.location=Api.cleanLocation(service.broadcaster.location,true);service.broadcaster.user.description=Api.trustedHTML(service.broadcaster.user.location+" <span class='line-break'> &#8226; </span> "+service.broadcaster.user.description.$$unwrapTrustedValue());}
if(bcMedia!==undefined){service.bcMedia=bcMedia;}}
if(service.async===false){service.channel=undefined;}
service.ready=true;var deferred=$q.defer();deferred.resolve(service.broadcaster);return deferred.promise;};service.showBroadcaster=function(goingLive){if(service.async){service.setChannel();return false;}
service.viewtimeSeconds=0;if(swf.currentSession&&!swf.settingUpBroadcast&&swf.currentSession.isBroadcasting){session.isBroadcasting=true;swf.settingUpBroadcast=false;}
else if(swf.settingUpBroadcast){swf.currentSession.isBroadcasting=true;guestService.newBroadcaster();swf.newBroadcaster(service.broadcaster,goingLive);}else{guestService.newBroadcaster();$rootScope.socket.joinChannel(service.broadcaster.userId);swf.newBroadcaster(service.broadcaster);eventbus.notifySubscribers('store:update',{type:'goodies'});}
if(service.broadcaster&&service.broadcaster.guestInfo){guestService.newUserGuestObj(service.broadcaster.guestInfo);}else{guestService.updateUserGuestObj();}
if(service.broadcaster&&service.broadcaster.guestBroadcaster){guestService.newGuestObj(service.broadcaster.guestBroadcaster);if(session.user&&service.broadcaster.userId==session.user.userId){guestService.overlayStates.guest='connected';}}else{guestService.updateGuestObj();}
if(!goingLive&&service.broadcaster.profile&&(service.broadcaster.profile!==$stateParams.profileUrlString||$stateParams.entityId==="channel")){service.internalLocationChange(service.broadcaster.profile);}
$timeout(function(){if(service.broadcaster&&service.broadcaster.user){$rootScope.title='YouNow | '+service.broadcaster.user.profileUrlString+' | Live Stream Video Chat | Free Apps on Web, iOS and Android';if(window.location.pathname!='/'){$rootScope.gaPage({page:'Broadcast'});}}},1000);if(!window.YouNow.track.pageFirst){$rootScope.gaPage();}
pusher.ready().then(function(){pusher.subscribeToChannel(service.broadcaster.userId,session.user.sec_token);});if(Api.polls&&Api.polls.getPlayData){$interval.cancel(Api.polls.getPlayData);delete Api.polls.getPlayData;}
getPlayData();};var getPlayData=function(){var method;if(!service.broadcaster||!service.broadcaster.broadcastId){return false;}
if(($state.current.name!=='main.channel.detail'||service.async)&&Api.polls.getPlayData){return false;}
var heartbeat={response:undefined,type:undefined};if(session.user&&swf.broadcast&&session.user.userId===swf.broadcast.userId){heartbeat.response=swf.invokeSwfMethod('onBroadcast');heartbeat.type="broadcaster";if(!Api.polls.getStats){Api.poll(function(){webRtc.getStats();},'getStats',1);}}else{heartbeat.response=swf.invokeSwfMethod('onPlayback');heartbeat.type="viewer";}
if(heartbeat.response!==undefined&&isNaN(heartbeat.response.nsTime)){if(heartbeat.type==="viewer"){window.YouNow.App.loadChannel({channelId:swf.broadcast.userId});}
if(heartbeat.type==="broadcaster"){swf.invokeSwfMethod('startBroadcast',service.bcMedia);}
window.YouNow.App.stateChange('RECONNECT');}else{if(swf.playState==='RECONNECT'){window.YouNow.App.stateChange('PLAYING');}}
if(service.broadcaster.tagPlayData.indexOf('https')===-1){service.broadcaster.tagPlayData=service.broadcaster.tagPlayData.replace("http","https");}
config.init.then(function(){$http.get(service.broadcaster.tagPlayData).then(function(response){angular.forEach(response.data.items,function(person,key){person.tooltip='<div class="user-row"><span class="ynicon ynicon-level"></span><span class="level">'+person.userlevel+'</span> <span class="name">'+person.username+'</span></div><div class="viewer-row"><span class="ynicon ynicon-viewers"></span> <span class="viewers">'+person.viewers+'</span></div>';if(session.user&&person.userId==session.user.userId){service.broadcaster.tagRank='#'+(key+1);}
if(person.userId==swf.broadcast.userId){service.bcQueuePos=key+1;}
person.id=config.settings.UseBroadcastThumbs?person.broadcastId:person.userId;person.thumb=Api.generateDynamicApi('BROADCAST_THUMB_DYNAMIC')+'/'+person.broadcastId+'/'+person.broadcastId+'.jpg';person.thumb_backup=config.broadcasterThumb+person.id;});swf.queue=response.data.items;if(!service.async){Api.poll(getPlayData,'getPlayData',response.data.nextRefresh);}});});};service.setChannel=function(){eventbus.notifySubscribers('broadcast:end',service.broadcaster);service.broadcaster.async=true;var postData={channelId:service.broadcaster.userId};var useCDN='usecdn';if(session.user&&session.user.userId==service.broadcaster.userId){useCDN='';postData.random=Math.random();}
postData.includeUserKeyWords=1;Api.get('CHANNEL_INFO',postData,useCDN).success(function(data){if(!Api.store('hideYounowLanding')){if(service.async){Api.store('hideYounowLanding',true);}}
if(!data.userId){missingUser();return true;}
data.displayDescription=Api.convertEmoji(Api.prepareDescription(data.description));data.fullName=data.useprofile==1?data.profile:data.firstName+" "+data.lastName;data.location=Api.cleanLocation(data);data.facebookLink=(data.facebookOption=="1"&&data.websiteUrl.length)?data.websiteUrl:'http://www.facebook.com/'+data.facebookId;if(data.facebookLink.substr(0,4)!='http'){data.facebookLink='http://'+data.facebookLink;}
data.altName=data.useprofile==1?data.alias:data.profile;data.youtubePath=['user','channel'].indexOf(data.youTubeUserName.split('/')[0])>-1?data.youTubeUserName:'user/'+data.youTubeUserName;if(data.isSubscribable===1){data.showBroadcastsTab=true;}else if((data.isPartner||session.user.vip==="1")&&session.user.userId===data.userId){data.showBroadcastsTab=true;}else if(session.moderator||session.administrator){data.showBroadcastsTab=true;}
service.channel=service.channelFormat(data);service.channel.finished={};service.channel.index={};service.subscribeToAsyncPusher();if(service.channel.profile!==$stateParams.profileUrlString){service.internalLocationChange(service.channel.profile);}
$timeout(function(){if(!service.channel){return false;}
$rootScope.title='YouNow | '+service.channel.profile+' | Live Stream Video Chat | Free Apps on Web, iOS and Android';},1000);angular.element(document.getElementById('textarea_')).empty();if(!$stateParams.entityId||$stateParams.entityId==='channel'){service.tab='moments';if(service.asyncTabs&&service.asyncTabs.moments){service.getItems('moments',{records:20,createdBefore:0});}
service.asyncTabs={moments:true};getRightColumn();}else{service.deeplinking=true;service.tab='posts';service.getItems('posts',{numberOfRecords:1,entityId:$stateParams.entityId}).then(function(){service.channel.finished.posts=true;service.asyncTabs={posts:true};getRightColumn();service.showDeepLink();});}
if(service.channel_subscriptions_temp&&service.channel_subscriptions_temp.length>8){service.channel.subscriptions=service.channel_subscriptions_temp;service.channel.subscriptions_extras=service.channel.subscriptions.splice(7);service.channel.subscriptions_extras.reverse();delete service.channel_subscriptions_temp;}else{service.channel.subscriptions=[];service.channel.subscriptions_extras=[];}
if(service.channel.totalViews!==undefined){service.channel.totalViews=$filter('number')(service.channel.totalViews);}
if(service.channel.totalFans){var fanCount=Api.squashedNumber(service.channel.totalFans,2,1);service.channel.totalFansFormatted=fanCount;}
if(service.channel.totalFansOf){var fansOfCount=Api.squashedNumber(service.channel.totalFansOf,2,1);service.channel.totalFansOfFormatted=fansOfCount;}
if(service.channel.snKeyWords){for(var sn in service.channel.snKeyWords){if(service.channel.snKeyWords[sn].url&&service.channel.snKeyWords[sn].url.substring(0,4)=='www.'){service.channel.snKeyWords[sn].url='http://'+service.channel.snKeyWords[sn].url;}
if(service.channel.snKeyWords[sn].firstName&&service.channel.snKeyWords[sn].lastName){service.channel.snKeyWords[sn].username='@'+service.channel.snKeyWords[sn].nickname;service.channel.snKeyWords[sn].nickname=service.channel.snKeyWords[sn].firstName+' '+service.channel.snKeyWords[sn].lastName;}
if(sn!='facebook'&&sn!='google'){service.channel.snLinks=true;}}}
swf.momentVolume=100;});var apiMapNode=useCDN?'CHANNEL_SUBSCRIBER_OF_CDN':'CHANNEL_SUBSCRIBER_OF';Api.get(apiMapNode,{channelId:service.broadcaster.userId}).success(function(data){if(data.subscriberOf){if(service.channel){service.channel.subscriptions=data.subscriberOf;if(service.channel.subscriptions.length>8){service.channel.subscriptions_extras=service.channel.subscriptions.splice(7);service.channel.subscriptions_extras.reverse();}
delete service.channel_subscriptions_temp;}else{service.channel_subscriptions_temp=data.subscriberOf;}}else{console.error('channel/getSubscriberOf/channelId='+service.broadcaster.userId+':',data);}},function(error){});};service.showDeepLink=function(){$timeout(function(){if($stateParams.entityId&&$stateParams.entityType){if(!service.broadcaster||!service.broadcaster.broadcastId){trpx.updateBroadcast({broadcastId:$stateParams.entityId});}
service.deeplinkId=service.channel.posts&&service.channel.posts[0]&&$stateParams.entityType!=='c'?service.channel.posts[0].id:$stateParams.entityId;var post=document.getElementById('post_'+service.deeplinkId);var scrollToElement=angular.element(post);if(scrollToElement&&post){$document.scrollTo(scrollToElement,100,1000).then(function(){$timeout(function(){service.deeplinkId=0;$stateParams.entityType=null;$stateParams.entityId=null;$stateParams.srcId=null;$stateParams.copy=null;$stateParams.inviteString=null;service.deeplinking=false;},1500);});}}},500);};service.updateLanguage=function(language){session.updateLanguage(language);};service.updateLocale=function(locale){var params={userId:session.user.userId,channelId:session.user.userId,locale:locale};if(session.isBroadcasting||swf.settingUpBroadcast||(guestService.guest&&guestService.guest.userId==session.user.userId)){session.preventBroadcastInterrupt();return false;}
var response=Api.post('CHANNEL_UPDATE_SETTINGS',params);if(response&&response.then){response.then(function(response){if(response.data.errorCode===0){config.UILocale=locale;service.featuredBroadcaster(false,true);trpx.updateLocale(locale);}});}};var methods={posts:{cdn:'POST_GET',default:'POST_GET'},moments:{cdn:'MOMENT_PROFILE',default:'MOMENT_PROFILE'},broadcasts:{cdn:'POST_BROADCASTS',default:'POST_BROADCASTS'},fans:{cdn:'CHANNEL_FANS_CDN',default:'CHANNEL_FANS'},fansof:{cdn:'CHANNEL_FANSOF_CDN',default:'CHANNEL_FANSOF'},subscribers:{cdn:'CHANNEL_SUBSCRIBERS_CDN',defaukt:'CHANNEL_SUBSCRIBERS'}};var items={posts:'posts',moments:'items',broadcasts:'posts',fans:'fans',fansof:'fans',subscribers:'subscribers'};service.parseMomentType=function(item){item.originalType=item.type;if(item.type==='collection'&&item.momentsIds.length<=1){item=angular.merge({},item.firstMoment,item);item.type='moment';}};service.getItems=function(type,params){if(!type){type=service.tab;}
if(!params){params={};}
if(!service.channel||service.channel.finished[type]){return $q.reject();}
params.channelId=service.broadcaster.userId;if(service.channel[type]&&!params.records&&type!='moments'){params.startFrom=service.channel[type].length;}
if(service.channel[type]&&!service.channel[type].finished&&type=='moments'){params.createdBefore=service.channel[type][service.channel[type].length-1].created;params.records=20;}
if(items[type]==='posts'&&session.user&&session.user.userId){params.userId=session.user.userId;}
var cdnRequests=['fansof','fans','subscribers','broadcasts','moments'];var isCdn=false;if(cdnRequests.indexOf(type)!==-1){isCdn=true;}
return Api.get(methods[type][isCdn?'cdn':'default'],params).success(function(data){if(!service.channel){return $q.reject();}
if(type==='posts'&&data.posts&&($stateParams.entityType==='p')){data.posts=[data.posts.reduce(function(post){if(post.id===$stateParams.entityId){return post;}})];}
angular.forEach(data[items[type]],function(item){if(item.type&&(item.type==='moment'||item.type==='collection')){var missingKey=item.type==='collection'?'broadcaster':'owner';item[missingKey]={userId:service.channel.userId,name:service.channel.profile};}
service.parseMomentType(item);addItem(item,type);});service.channel.finished[type]=items[type]==='posts'||type==='moments'?!data.hasMore:!data.hasNext;if(params.numberOfRecords===1){service.channel.finished[type]=false;}
if(!service.channel[type]){service.channel[type]=[];}});};var addItem=function(item,type){if(item.media&&item.media.broadcast&&item.media.broadcast.broadcastLength){item.media.broadcast.broadcastLengthString=secondsToString(item.media.broadcast.broadcastLength);}
if(!service.channel[type]){service.channel[type]=[];}
if(!service.channel.index[type]){service.channel.index[type]={};}
var id=item.id||item.userId||item.momentId||item.collectionId;Api.addUniqueItem(service.channel[type],service.channel.index[type],item,id);};var secondsToString=function(secs){var hrs=(Math.floor(secs/3600)||'')+'';var hrs_='';if(hrs){hrs_=':';}
var min=(Math.floor((secs%3600)/60)||'0');var _min='';if(min<10||min=='0'){_min='0';}
var min_=':';var _sec='';var sec=(secs%60)||'0';if(sec<10||sec=='0'){_sec='0';}
var string=hrs+hrs_+_min+min+min_+_sec+sec;return string;};var getRightColumn=function(){if(service.channel){getBiggestFans();getMoreBroadcasters();}};var getMoreBroadcasters=function(){if(!service.channel||!service.async){return false;}
var params={channelId:service.broadcaster.userId};return Api.get('RECO_SUGGESTED_USERS_ANON',params,true).success(function(data){service.channel.moreBroadcasters=data.items;service.channel.moreBroadcastersModelId=data.modelId;});};var getBiggestFans=function(){if(!service.channel||!service.async){return false;}
var params={numberOfRecords:12,channelId:service.broadcaster.userId};return Api.get('CHANNEL_TOP_PAID_FANS',params,true).success(function(data){if(!service.channel||service.channel.userId!=params.channelId){return false;}
if(service.channel){service.channel.biggestFans=Api.sortUsers(data.fans);}});};var liveBroadcastNotification=function(){var curId=service.curId!==undefined?service.curId:0;Api.get('BROADCAST_INFO',{channelId:service.broadcaster.userId,curId:curId}).then(function(data){if(data){data=data.data;if(!data.media){$timeout(function(){liveBroadcastNotification();},2000);}else{service.updateBroadcaster(data,true).then(function(response){if(service.channel){service.channel.preview=false;var href="window.location.href='/"+data.profile+"?from=notification';";Api.showTopNotification('<a href="javascript:'+href+';" >'+data.profile+' just went live! Click here to watch them.</a>',"success",false,false,10000);}});}}});};service.goLive=function(){intercom.end(session.user.intercom);if(session.isBroadcasting){session.preventBroadcastInterrupt();}else if(session.checkBan()){return false;}else{if(session.user.userId){$state.go('main.channel.detail',{profileUrlString:session.user.profile,async:null},{notify:$state.current.name==='main.channel.detail'?false:true});$timeout(function(){swf.settingUpBroadcast=true;});service.switchToBroadcast(true);}else{session.showLoginModal('','GOLIVE').result.then(service.goLive);}}};service.switchToBroadcast=function(goingLive){if(!swf.available()){if(service.broadcaster&&service.broadcaster.broadcastId){service.switchAsync(false);}else{service.async=false;service.broadcaster=undefined;service.featuredBroadcaster(false,false,goingLive);}}};service.internalLocationChange=function(profile){$state.go('main.channel.detail',{profileUrlString:profile,async:service.async?'channel':null},{notify:$state.current.name==='main.channel.detail'?false:true});};service.initBroadcast=function(){return Api.post('BROADCAST_INIT',{userId:session.user.userId,channelId:session.user.userId,ver:config.settings.JS_VERSION,mirror:0});};service.addBroadcast=function(id,tag,publish,shareMsg,pc){var params={userId:session.user.userId,channelId:session.user.userId,broadcastId:id,ver:config.settings.JS_VERSION,tags:tag,fbPublish:publish.facebook?1:0,twPublish:publish.twitter?1:0,ytPublish:publish.youtube?1:0,tumblrPublish:publish.tumblr?1:0,mirror:0,shareMsg:shareMsg};if(pc){params.mcu=1;params.sdpOffer=pc.localDescription.sdp;}else{if(externalStreamer.settings.active){params.broadcastType=2;}else{params.broadcastType=1;}}
return Api.post('BROADCAST_ADD',params);};service.dropBroadcast=function(id){intercom.start(session.user.intercom);if(id){return Api.post('BROADCAST_DROP',{userId:id,channelId:id});}};var missingUser=function(){if(window.location.pathname.indexOf('/channel')!==-1&&window.waitForPageType){$rootScope.gaPage({pageType:'explore'});}
window.waitForPageType=false;$state.go("main.explore");Api.showTopNotification('User could not be found');if(window.isPrerender){$rootScope.httpStatus=404;}};$rootScope.$watch(function(){return swf.loadChannel;},function(data){if(data){if(data.broadcaster!==undefined){data.isBroadcasting=data.broadcaster==1?true:false;}
if(data.isBroadcasting!==undefined){swf.currentSession.isBroadcasting=data.isBroadcasting;session.isBroadcasting=data.isBroadcasting;}
Api.googleAdLoaded=!session.isBroadcasting;if(data.channelId){service.switchBroadcaster(data.channelId);}
else if(data.channelId===0&&!data.isBroadcasting){service.featuredBroadcaster();}
if(data.channelId!==undefined){swf.settingUpBroadcast=false;}}});service.switchAsync=function(async){service.async=async;if(async){if(!service.channel){service.setChannel();}
else{service.subscribeToAsyncPusher();}}else{service.showBroadcaster();}};service.subscribeToAsyncPusher=function(){pusher.ready().then(function(){pusher.subscribeToAsync(service.broadcaster.userId,function(eventName,eventData){if(eventName==='onBroadcast'){liveBroadcastNotification();}
if(eventName==='ontrackBroadcastViewtime'){service.broadcaster.broadcastId=false;getRightColumn();}
if(service.tab!=='posts'&&service.tab!=='broadcasts'){return true;}
if(!service.channel[service.tab]){service.channel[service.tab]=[];}
if(!service.channel.index[service.tab]){service.channel.index[service.tab]={};}
realtime.posts=service.channel[service.tab];realtime.index=service.channel.index[service.tab];if(realtime[eventName]){realtime[eventName](eventData.message);}});});};swf.channelFormat=angular.copy(service.channelFormat);service.getDownloadUrl=function(broadcastId){var downloadUrl=Api.generateDynamicApi('BROADCAST_DOWNLOAD');if(service.channel===undefined){downloadUrl+='/channelId='+session.user.userId;}else{downloadUrl+='/channelId='+service.channel.userId;}
downloadUrl+='&broadcastId='+broadcastId.toString();if(session&&session.user&&session.user.userId){downloadUrl+='&userId='+session.user.userId;}
return downloadUrl;};service.realtime={};var realtime=service.realtime;var findPosition=function(id,posts){for(var i=0;i<posts.length;i++){if(posts[i].id==id){return i;}}};realtime.new_comment=function(comment){if(!comment.parentId){service.channel.posts.unshift(comment);service.channel.index[comment.id]=true;}
else{var parent=realtime.posts[findPosition(comment.parentId,realtime.posts)];if(parent){if(!parent.replies){parent.replies=[];}
parent.replies.push(comment);}}};realtime.new_like=function(like){changeLikes(like,1);};realtime.unlike_comment=function(like){changeLikes(like,-1);};var changeLikes=function(like,change){var item;if(like.parentId){var parent=realtime.posts[findPosition(like.parentId,realtime.posts)];if(parent){item=parent.replies[findPosition(like.id,parent.replies)];}}else{item=realtime.posts[findPosition(like.id,realtime.posts)];}
if(item){item.changeLikes(change);}};realtime.pin_comment=function(comment){for(var i=0;i<realtime.posts.length;i++){var post=realtime.posts[i];post.isPinned=false;if(realtime.posts[i].id==comment.id){post.isPinned=true;realtime.posts.splice(0,0,realtime.posts.splice(i,1)[0]);}}};realtime.delete_comment=function(comment){if(comment.parentId){var parent=realtime.posts[findPosition(comment.parentId,realtime.posts)];if(parent){parent.replies.splice(findPosition(comment.id,parent.replies),1);}}else{realtime.posts.splice(findPosition(comment.id,realtime.posts),1);}};return service;});angular.module('younow.services.config',['pascalprecht.translate']).provider('config',function($translateProvider){var config={};var readCookie=config.readCookie=function readCookie(what){var read;try{read=window.localStorage.getItem(what);}catch(e){read=window.readCookie(what);}
return read;};var saveCookie=config.saveCookie=function(what,value){try{window.localStorage.setItem(what,value);}catch(e){window.createCookie(what,value,3650000);}};if(window.location.search){try{config.params=JSON.parse('{"'+decodeURI(window.location.search.substring(1).replace(/&/g,"\",\"").replace(/=/g,"\":\""))+'"}');}catch(e){config.params=window.location.search;}}else{config.params='';}
config.host=config.params.host||window.location.host;config.buybarsiframe=false;config.bootstrap={adminRoles:[1,2,3],modRoles:[1,2,3,4,5],cdnDev:"cdnv2-vd.younow.com",cdnProduction:"cdn2.younow.com",facebookAppId:171373592926306,flashVersion:"47.35",googleClientId:"619368150599-2ef6s6o5dqgv6oqoq5tevtqo1k7gni12.apps.googleusercontent.com",googleAnalyticsId:"UA-24148895-1",TM_DOMAIN:"images1.younow.com",TM_ID:"7jnw4jh4",supportsCanvasStream:navigator.userAgent&&navigator.userAgent.indexOf('Electron')!==-1?true:false};config.localeFromLanguage=function(language){for(var la in config.settings.Locales){var locale=la;for(var l in config.settings.Locales[la].loc){var lang=config.settings.Locales[la].loc[l];if(language==lang){return locale;}}}
return'en';};config.setLocale=function(la){if(!la){return false;}
config.UILocale=la;saveCookie('UILocale',la);config.UILocaleOriginal='';};config.setLanguage=function(la){if(!la){return false;}
if(la=='ww'){la='en';}
config.UILanguage=la;$translateProvider.use(la);saveCookie('UILanguage',la);config.UILanguageOriginal='';config.hrefLanguage='';};this.update=function(){config.settings=window.bootstrapConfig;var cdn=config.host;if(config.host==='www.younow.com'){cdn=config.bootstrap.cdnProduction;}
if(config.host==='www2-vd.younow.com'){cdn=config.bootstrap.cdnDev;}
var host=config.params.host?config.params.host:cdn;var url=window.location.protocol+"//"+host+"/php/api/younow/config";if(config.host!=='www.younow.com'){url+="/devByPass=1";}
window.YouNow.loadingTime.startYounowConfig=Date.now();window.YouNow.loadingTime.younowConfig=Date.now()-window.YouNow.loadingTime.startYounowConfig;if(window.bootstrapConfig.redirect){window.location.href=window.bootstrapConfig.redirect;}else{if(window.location.protocol==='https:'&&window.bootstrapConfig.ServerCDNBaseUrl.indexOf('https')===-1){config.settings.ServerCDNBaseUrl=window.bootstrapConfig.ServerCDNBaseUrl.replace("http","https");}
if(window.location.protocol==='https:'&&window.bootstrapConfig.ServerLocalBaseUrl.indexOf('https')===-1){config.settings.ServerLocalBaseUrl=window.bootstrapConfig.ServerLocalBaseUrl.replace("http","https");}
if(window.location.protocol==='https:'&&window.bootstrapConfig.ServerRecommendationsBaseUrl.indexOf('https')===-1){config.settings.ServerRecommendationsBaseUrl=window.bootstrapConfig.ServerRecommendationsBaseUrl.replace("http","https");}
if(window.location.protocol==='https:'&&window.bootstrapConfig.TrackingHost.indexOf('https')===-1){config.settings.TrackingHost=window.bootstrapConfig.TrackingHost.replace("http","https");}
if(window.location.protocol==='https:'&&window.bootstrapConfig.PlayDataBaseUrl.indexOf('https')===-1){config.settings.PlayDataBaseUrl=window.bootstrapConfig.PlayDataBaseUrl.replace("http","https");}
if(window.location.protocol==='https:'&&window.bootstrapConfig.ServerHomeBaseUrl.indexOf('https')===-1){config.settings.ServerHomeBaseUrl=window.bootstrapConfig.ServerHomeBaseUrl.replace("http","https");}
if(window.location.protocol==='https:'&&window.bootstrapConfig.BadgeBaseUrl.indexOf('https')===-1){config.settings.BadgeBaseUrl=window.bootstrapConfig.BadgeBaseUrl.replace("http","https");}
if(window.location.protocol==='https:'&&window.globalVars.CDN_BASE_URL.indexOf('https')===-1){window.globalVars.CDN_BASE_URL=window.globalVars.CDN_BASE_URL.replace("http","https");}
var languages=window.navigator.languages||[window.navigator.language||window.navigator.userLanguage];var k,key,la,ourLa;config.UILanguages=window.YouNow.UILanguages;if(!config.UILanguage){config.UILanguage=readCookie('UILanguage');if(config.UILanguage){config.setLanguage(config.UILanguage);}else{if(!config.UILanguage){LangIsLoop:for(k in languages){la=languages[k].substr(0,2);for(ourLa in config.UILanguages){if(ourLa==la){config.setLanguage(ourLa);break LangIsLoop;}}}}
if(!config.UILanguage){config.setLanguage('en');}}}
config.UILocales={};for(la in window.bootstrapConfig.Locales){config.UILocales[la]=config.settings.Locales[la].name;}
config.UILocale=readCookie('UILocale');if(!config.UILocale){config.setLocale(config.localeFromLanguage(config.UILanguage));}}};this.$get=function($translate){config.checkRole=function(user,roles){for(var i=0;i<roles.length;i++){if(user&&user.role===roles[i]){return true;}}
return false;};config.setTempLanguage=function(la){if(!la){return false;}
config.keepTempLanguage=true;if(la==config.UILanguage){return false;}
config.UILanguageOriginal=config.UILanguage;config.UILocaleOriginal=config.UILocale;if(la!='ww'){$translate.use(la);config.UILanguage=la;if(la!='en'){config.hrefLanguage=config.UILanguage;}}
config.UILocale=config.localeFromLanguage(la);};config.resetTempLanguage=function(){if(!config.UILanguageOriginal||config.UILanguageOriginal==config.UILanguage){return false;}
$translate.use(config.UILanguageOriginal);config.UILanguage=config.UILanguageOriginal;config.UILocale=config.UILocaleOriginal;config.UILanguageOriginal='';config.UILocaleOriginal='';config.hrefLanguage='';};return config;};});angular.module('younow.services.dashboard',[]).factory('dashboard',["$http","$timeout","Api","config","$filter","$rootScope","$q","$state",function($http,$timeout,Api,config,$filter,$rootScope,$q,$state){var dashboard={};function formatTrendingLists(listNode,dashboardNode,data){var i;for(i=data[listNode].length-1;i>=0;i--){if(data[listNode][i]===null||!data[listNode][i].username||data[listNode][i].views===null||!data[listNode][i].userId){data[listNode].splice(i,1);}else{data[listNode][i].views=Api.squashedNumber(data[listNode][i].views,3);}}
if(data.trending_users.length){dashboard[dashboardNode]=data[listNode];}
if(data[listNode].length>0&&dashboardNode=='users'){dashboard.filterUsers();}}
var getTrending=function(){var data={};if((!dashboard.tags||!dashboard.users)||($state.current.name==='main.channel.detail'||$state.current.name==='main.explore'||$state.current.name==='main.settings')){Api.get('YOUNOW_DASHBOARD',{locale:dashboard.trendingsLocale,trending:50},'usecdn').success(function(data){data=data;var i;if(data.trending_users){formatTrendingLists('trending_users','users',data);}
if(data.featured_users){formatTrendingLists('featured_users','featuredUsers',data);}
if(data.trending_tags){for(i=data.trending_tags.length-1;i>=0;i--){if(data.trending_tags[i]===null){data.trending_tags.splice(i,1);}}
if(data.trending_tags.length){dashboard.tags=data.trending_tags;}}});}
Api.poll(getTrending,'getTrending',data.nextRefresh,10);};var getBroadcastThumb=function(user,backup){var thumb;if(user.broadcastId&&config.settings.UseBroadcastThumbs){thumb=Api.generateDynamicApi('BROADCAST_THUMB_DYNAMIC')+'/'+user.broadcastId+'/'+user.broadcastId+'.jpg';if(backup){thumb=config.imageApis.broadcast+'/'+user.broadcastId+'/'+user.broadcastId+'.jpg';}}else if(user.tag&&user.tag.length>0&&user.userId&&config.settings.UseBroadcastThumbs){thumb=config.imageApis.broadcast+'/'+user.broadcastId+'/'+user.broadcastId+'.jpg';}else{thumb=config.imageApis.thumb+'/'+user.userId+'/'+user.userId+'.jpg';}
return thumb;};dashboard.trendingsLocale="de";dashboard.filterTrending=function(userId){for(var i=0;i<dashboard.users.length;i++){if(userId==dashboard.users[i].userId){dashboard.users.splice(i,1);}}};dashboard.filterUsers=function(userId){for(var i=0;i<dashboard.users.length;i++){dashboard.users[i].userlevel=parseFloat(dashboard.users[i].userlevel);dashboard.users[i].thumb=getBroadcastThumb(dashboard.users[i]);}};dashboard.getTrending=function(){getTrending();};return dashboard;}]);angular.module('younow.services.eventbus',[]).service('eventbus',['$rootScope',function($rootScope){var eventbus={};eventbus.subscribers={};eventbus.notifySubscribers=function(eventChannel,data){$rootScope.$emit(eventChannel,data);};eventbus.subscribe=function(eventChannel,callback,subscriber,scope){var channel=subscriber+':'+eventChannel;if(eventbus.subscribers[channel]){eventbus.subscribers[channel]();}
if(scope){scope.$on('$destroy',function(){eventbus.unsubscribe(subscriber,eventChannel);});scope=undefined;}
eventbus.subscribers[channel]=$rootScope.$on(eventChannel,function(event,args){event.preventDefault();callback(event.name,args);});};eventbus.unsubscribe=function(subscriber,eventChannel){subscriber=subscriber+':'+eventChannel;for(var key in eventbus.subscribers){if(key==subscriber){eventbus.subscribers[key]();delete eventbus.subscribers[key];}}};return eventbus;}]);angular.module('younow.services.pusher',[]).factory('pusher',function($http,config,Api,$window,$q,swf,$rootScope,debug,eventbus,guestService,externalStreamer,webRtc,trpx,store){var pusher={};var pusherReady=$q.defer();pusher.ready=function(){return pusherReady.promise;};pusher.init=function(){var options={authEndpoint:Api.generateDynamicApi('PUSHER_AUTH_DEDICATED'),cluster:'younow'};$window.Pusher.Runtime.createXHR=function(){var xhr=new window.XMLHttpRequest();xhr.withCredentials=true;return xhr;};pusher.SDK=new $window.Pusher(config.settings.PusherDedicatedAppKey,options);pusherReady.resolve();};pusher.subscribeToPrivate=function(userId){pusher.subscribe('privateChannel','private-channel_'+userId);pusher.privateChannel.channel.bind_all(function(eventName,eventData){var blockedEvents=['pusher:subscription_succeeded','pusher:member_removed','pusher:member_added','pusher:subscription_error','channel_is_live','delete_comment','new_comment','new_like','pin_comment','unlike_comment'];debug.console(['PRIVATE','PUSHER'],{eventName:eventName,eventData:eventData});if(blockedEvents.indexOf(eventName)===-1){eventData.channelId=pusher.channelId;eventData.type='private';swf.onPusherEvent(eventName,eventData);guestService.onPusherEvent(eventName,eventData);webRtc.onPusherEvent(eventName,eventData);}
if(eventName=='onNotificationCountChange'){eventbus.notifySubscribers('user:onNotificationCountChange',1);}
if(eventName=='onSuspend'||eventName=='onBan'){eventbus.notifySubscribers('pusher:ban',eventData);pusher.onBan=eventData;}
if(eventName=='onUnSuspend'||eventName=='onUnBan'){pusher.onBan=0;eventbus.notifySubscribers('pusher:ban',0);}
if(eventName=='onAccountUpdate'){$rootScope.$broadcast('onAccountUpdate',eventData);}
if(eventName=='onCoins'){$rootScope.$evalAsync(function(){pusher.onCoins=eventData.message;});}
if(eventName=='onLocaleChange'){$rootScope.$evalAsync(function(){pusher.onLocale=eventData.message.locale;});}
if(eventName=='onLocale'){$rootScope.$evalAsync(function(locale){if(locale){config.UILocale=locale;trpx.updateLocale(locale);}});}});};pusher.anon=window.localStorage.getItem('invisible')=='true';$rootScope.invisible=pusher.anon;pusher.anonMode=function(to)
{if(to)
{pusher.unsubscribe('presenceChannel');pusher.anon=true;$rootScope.invisible=pusher.anon;window.localStorage.setItem('invisible','true');$rootScope.socket.status(true);}
else
{pusher.subscribe('presenceChannel',pusher.currentPresence);pusher.anon=false;$rootScope.invisible=pusher.anon;window.localStorage.setItem('invisible','false');$rootScope.socket.status(false);}};pusher.currentPresence="";pusher.subscribeToChannel=function(channelId,SECTOKEN){pusher.channelId=channelId;pusher.subscribe('asyncChannel','public-async-channel_'+pusher.channelId);pusher.asyncChannel.channel.bind_all(function(eventName,eventData){swf.onPusherEvent(eventName,eventData);});pusher.currentPresence='public-on-channel_'+pusher.channelId+'_'+pusher.shard+'_web_'+SECTOKEN;if(!pusher.anon&&!config.settings.NoPusherOnChannelWeb){pusher.subscribe('presenceChannel',pusher.currentPresence);}
pusher.subscribe('publicChannel','public-channel_'+pusher.channelId);pusher.publicChannel.channel.bind_all(function(eventName,eventData){var blockedEvents=['pusher:subscription_succeeded','pusher:member_removed','pusher:member_added','pusher:subscription_error','channel_is_live','delete_comment','new_comment','new_like','pin_comment','unlike_comment','onBroadcastPlay','onCoins'];if(blockedEvents.indexOf(eventName)===-1){eventData.channelId=pusher.channelId;eventData.type='public';swf.onPusherEvent(eventName,eventData);guestService.onPusherEvent(eventName,eventData);externalStreamer.onPusherEvent(eventName,eventData);webRtc.onPusherEvent(eventName,eventData);store.onPusherEvent(eventName,eventData);}
var loggedEvents=['pusher:subscription_error'];if(loggedEvents.indexOf(eventName)>-1){}});};pusher.subscribeToAsync=function(channelId,callback){pusher.channelId=channelId;pusher.subscribe('asyncChannel','public-async-channel_'+pusher.channelId);pusher.asyncChannel.channel.bind_all(callback);};pusher.subscribe=function(name,id){pusher.unsubscribe(name);pusher[name]={id:id};pusher[name].channel=pusher.SDK.subscribe(id);debug.console(['PUSHER','SUBSCRIBE'],{name:name,id:id});};pusher.unsubscribe=function(name){if(pusher[name]){debug.console(['PUSHER','UNSUBSCRIBE'],{name:name,id:pusher[name].id});pusher.SDK.unsubscribe(pusher[name].id);delete pusher[name];}};pusher.reset=function(name){if(pusher[name]){pusher.subscribe(name,pusher[name].id);}};return pusher;});angular.module('younow.services.session.facebook',[]).factory('Facebook',["$q","$window","$timeout","config","Api",function($q,$window,$timeout,config,Api){var Facebook={};$window.fbready=$q.defer();Facebook.ready=function(){return $window.fbready.promise;};$window.fbAsyncInit=function(){if(!Facebook.loaded){Facebook.options={init:{appId:config.settings.fbAppId,version:"v2.1",cookie:true,status:true,xfbml:true},scope:"public_profile,email,user_friends"};$window.FB.init(Facebook.options.init);$window.fbready.resolve();Facebook.loaded=true;}};if($window.FB){$window.fbAsyncInit();}
Facebook.SDK=function(method,vars){return Facebook.ready().then(function(){var deferred=$q.defer();if(vars){$window.FB[method](vars,function(response){deferred.resolve(response);});}else{$window.FB[method](function(response){deferred.resolve(response);});}
return deferred.promise;});};Facebook.authenticate=function(silent){return Facebook.ready().then(function(){Facebook.deferred=$q.defer();FB.getLoginStatus(function(response){if(response.status==='connected'){Facebook.expandUser(response.authResponse);}
else if(silent){Api.returnDeferred(Facebook.deferred,'reject','facebook silent auth unsuccessful');}
else{Facebook.showAuthDialog();}});return Facebook.deferred.promise;});};Facebook.showAuthDialog=function(){var scope=Facebook.options.scope;if($window.tempFBscope){scope=$window.tempFBscope;$window.tempFBscope=false;}
if(Api.browser.name=='Electron'){var params={client_id:config.settings.fbAppId,redirect_uri:config.settings.ServerHomeBaseUrl+'facebookAuth.html',scope:scope,display:'popup',response_type:'token'};var url='https://www.facebook.com/dialog/oauth?'+Api.serialize(params);var loginWindow=window.open(url,'Facebook Login','location=0, status=0, width=550, height=500, scrollbars=1');$window.removeEventListener("message",facebookCallback);$window.addEventListener("message",facebookCallback,false);window.facebookPopup=loginWindow;}else{FB.login(function(response){if(response.status==='connected'){Facebook.expandUser(response.authResponse);}else{Facebook.deferred.reject(response.status);}},{scope:scope});}};Facebook.expandUser=function(authResponse,retry){if(authResponse===null){Facebook.deferred.reject('error');return;}
FB.api('/me',function(userData){if(!userData){if(!retry){$timeout(function(){Facebook.expandUser(authResponse,true);},300);}else{Facebook.deferred.reject(authResponse);}}
var fb=angular.extend(authResponse,userData);var loginData={facebookToken:fb.accessToken,facebookWebsite:fb.link,facebookEmail:fb.email,facebookId:fb.id,facebookBirthday:fb.birthday,facebookVerified:fb.verified,facebookFirstName:fb.first_name,facebookLastName:fb.last_name,facebookName:fb.name,facebookThumbUrl:'http://graph.facebook.com/'+fb.id+'/picture?type=large'};FB.api('/me/friends/?limit=0',function(friends){if(friends&&friends.summary&&friends.summary.total_count){loginData.connections=friends.summary.total_count;}
Api.returnDeferred(Facebook.deferred,'resolve',loginData);});return fb;});};Facebook.getPagesList=function(){var deferred=$q.defer();FB.login(function(authResponse){FB.api('/me/accounts',function(response){deferred.resolve(angular.extend(response,authResponse));});},{scope:'publish_pages,manage_pages',auth_type:'rerequest'});return deferred.promise;};var facebookCallback=function(event){var origin=event.origin||event.originalEvent.origin;if(origin===window.location.origin&&event.data.type=='facebookAuth'){FB.getLoginStatus(function(response){if(response.status==='connected'){Facebook.expandUser(response.authResponse);}else{Facebook.deferred.reject(response.status);}},true);$window.removeEventListener("message",facebookCallback);}};return Facebook;}]);angular.module('younow.services.session.google',[]).factory('google',["$q","$timeout","Api","config",function($q,$timeout,Api,config){var google={};window.googleReady=$q.defer();google.ready=function(){return window.googleReady.promise;};google.init=function(){gapi.load('client:auth2',function(){gapi.auth2.init({client_id:config.settings.GOOGLE_PLUS_CLIENT_ID,cookiepolicy:'single_host_origin',immediate:true,scope:'https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.profile.emails.read'}).then(function(){window.googleReady.resolve();});});};if(window.gapi){google.init();}else{window.googleAsyncInit=function(){google.init();};}
google.authenticate=function(silent){google.ready().then(function(){gapi.auth2.getAuthInstance().signIn().then(function(){var authResponse=gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse();if(authResponse.access_token){google.expandUser(authResponse);}else{console.log('no access token');Api.returnDeferred(google.deferred,'reject','no access token');}});});google.deferred=$q.defer();return google.deferred.promise;};google.expandUser=function(authResponse){window.gapi.client.load('plus','v1',function(){window.gapi.client.plus.people.get({userId:'me'}).execute(function(resp){var userInfo=angular.extend(authResponse,resp);angular.forEach(resp.emails,function(email){if(!userInfo.email&&email.type==='account'){userInfo.email=email.value;}});window.gapi.client.plus.people.list({userId:'me',collection:'visible'}).execute(function(resp){userInfo.totalItems=Number(resp.totalItems)||0;google.relevantFields(userInfo);});});});};google.relevantFields=function(userInfo){var relevant={};relevant.email=userInfo.email;relevant.gender=userInfo.gender;relevant.url=userInfo.url;relevant.googleId=userInfo.id;relevant.accessToken=userInfo.access_token;relevant.code=userInfo.code;relevant.firstName=userInfo.name.givenName;relevant.lastName=userInfo.name.familyName;relevant.nickname=userInfo.displayName||'';relevant.thumb=(userInfo.image?userInfo.image.url:'').replace('sz=50','sz=100');relevant.description=userInfo.aboutMe||'';relevant.connections=userInfo.totalItems||0;Api.returnDeferred(google.deferred,'resolve',relevant);};return google;}]);angular.module('younow.services.session.instagram',[]).factory('instagram',["$q","$window","config","Api",function($q,$window,config,Api){var instagram={};instagram.authenticate=function(silent){var url=Api.generateDynamicApi('INSTAGRAM_AUTH');var loginWindow=window.open(url,'Instagram Login','location=0, status=0, width=650, height=350, scrollbars=1');$window.removeEventListener("message",instagramCallback);$window.addEventListener("message",instagramCallback,false);window.instagramPopup=loginWindow;instagram.deferred=$q.defer();return instagram.deferred.promise;};var instagramCallback=function(event){var origin=event.origin||event.originalEvent.origin;if(origin===config.settings.apiMap.DNS[config.settings.apiMap['INSTAGRAM_AUTH'].DNS]&&event.data.type==='instagramAuth'){var userInfo=event.data.userInfo;if(!userInfo||!userInfo.id||!userInfo.access_token){Api.returnDeferred(instagram.deferred,'reject',userInfo);}else{var relevant={};var nameTokens=userInfo.full_name?userInfo.full_name.split(' '):[];relevant.instagramId=userInfo.id;relevant.firstName=nameTokens[0]||'';relevant.lastName=nameTokens[1]||'';relevant.nickname=userInfo.username||'';relevant.thumb=userInfo.profile_picture||'';relevant.description=userInfo.bio||'';relevant.url=userInfo.username?'https://instagram.com/'+userInfo.username:'';relevant.connections=userInfo.followed_by;relevant.oauthToken=userInfo.access_token;Api.returnDeferred(instagram.deferred,'resolve',relevant);$window.removeEventListener("message",instagramCallback);}}};return instagram;}]);angular.module('younow.services.session.tumblr',[]).factory('tumblr',["$q","$window","$interval","config","Api",function($q,$window,$interval,config,Api){var tumblr={};tumblr.authenticate=function(silent){var url=Api.generateDynamicApi('TUMBLR_AUTH');var loginWindow=window.open(url,'Tumblr Login','location=0, status=0, width=650, height=350, scrollbars=1');$window.removeEventListener("message",tumblrCallback);$window.addEventListener("message",tumblrCallback,false);tumblr.deferred=$q.defer();return tumblr.deferred.promise;};var tumblrCallback=function(event){var origin=event.origin||event.originalEvent.origin;if(origin===config.settings.apiMap.DNS[config.settings.apiMap['TUMBLR_AUTH'].DNS]&&event.data.type==='tumblrAuth'){if(!event.data.url){Api.returnDeferred(tumblr.deferred,'reject',event.data);}else{var data=Api.getJsonFromUrl(event.data.url.split("#")[0]);Api.returnDeferred(tumblr.deferred,'resolve',data);}
$window.removeEventListener("message",tumblrCallback);}};return tumblr;}]);angular.module('younow.services.session.twitter',[]).factory('twitter',["$q","$window","config","Api",function($q,$window,config,Api){var twitter={};twitter.authenticate=function(silent){var url=Api.generateDynamicApi('TWITTER_LOGIN');var loginWindow=window.open(url,'Twitter Login','location=0, status=0, width=800, height=400, scrollbars=1');$window.removeEventListener("message",twitterSuccessCallback);$window.addEventListener("message",twitterSuccessCallback,false);window.twitterPopup=loginWindow;twitter.deferred=$q.defer();return twitter.deferred.promise;};var twitterSuccessCallback=function(event){var origin=event.origin||event.originalEvent.origin;if(origin===config.settings.apiMap.DNS[config.settings.apiMap['TWITTER_LOGIN'].DNS]&&event.data.type==='twitterAuth'){var userInfo=event.data.userInfo;if(!userInfo||!userInfo.id_str||!userInfo.oauth_token){Api.returnDeferred(twitter.deferred,'reject',userInfo);}else{var relevant={};var nameTokens=userInfo.name?userInfo.name.split(' '):[];relevant.twitterId=userInfo.id_str;relevant.firstName=nameTokens[0]||'';relevant.lastName=nameTokens[1]||'';relevant.nickname=userInfo.screen_name||'';relevant.thumb=userInfo.profile_image_url||'';relevant.description=userInfo.description||'';relevant.url=userInfo.screen_name?'http://www.twitter.com/'+userInfo.screen_name:'';relevant.connections=userInfo.followers_count;relevant.oauthToken=userInfo.oauth_token;relevant.oauthTokenSecret=userInfo.oauth_token_secret;relevant.location=userInfo.location;Api.returnDeferred(twitter.deferred,'resolve',relevant);$window.removeEventListener("message",twitterSuccessCallback);}}};return twitter;}]);angular.module('younow.services.session.youtube',[]).factory('youtube',["$q","$window","$timeout","$http","Api","config","google","$modal",function($q,$window,$timeout,$http,Api,config,google,$modal){var youtube={};youtube.authenticate=function(silent){google.ready().then(function(){$window.gapi.auth.signIn({clientid:config.settings.GOOGLE_PLUS_CLIENT_ID,immediate:true,cookiepolicy:'single_host_origin',accesstype:'offline',approvalprompt:'force',includegrantedscopes:'false',scope:'https://www.googleapis.com/auth/youtube https://www.googleapis.com/auth/youtube.upload',callback:'youtubeLogin'});});youtube.deferred=$q.defer();return youtube.deferred.promise;};$window.youtubeLogin=function(authResponse){if(authResponse.status.signed_in){youtube.expandUser(authResponse);}};youtube.expandUser=function(authResponse){window.gapi.client.load('youtube','v3',function(){window.gapi.client.youtube.channels.list({part:'snippet,statistics',mine:true,maxResults:10}).execute(function(resp){var userInfo={};userInfo.authCode=authResponse.code;userInfo.youtubeChannelId=resp.items[0].id;userInfo.youtubeChannelUrl='www.youtube.com/channel/'+resp.items[0].id;userInfo.youtubeChannelName=resp.items[0].snippet.title;userInfo.connections=resp.items[0].statistics.subscriberCount;userInfo.viewCount=resp.items[0].statistics.viewCount;Api.returnDeferred(youtube.deferred,'resolve',userInfo);});});};return youtube;}]);angular.module('younow.services.session.intercom',[]).factory('intercom',[function(){var intercom={};intercom.start=function(intercomData){if(!intercom.isRunning&&intercomData&&intercomData.enable){window.Intercom("boot",angular.extend({},{'app_id':intercomData.app_id,'user_hash':intercomData.user_hash},intercomData.standard_attributes,intercomData.custom_attributes));intercom.isRunning=true;}};intercom.end=function(intercomData){if(intercom.isRunning&&intercomData&&intercomData.enable){window.Intercom('shutdown');intercom.isRunning=false;}};return intercom;}]);angular.module('younow.services.session',['younow.modals.login','younow.services.session.facebook','younow.services.session.google','younow.services.session.twitter','younow.services.session.instagram','younow.services.session.youtube','younow.services.session.tumblr','younow.services.session.intercom']).factory('session',["$rootScope","$location","$q","$timeout","$modal","$window","$state","$translate","config","swf","pusher","Api","Facebook","twitter","google","instagram","youtube","tumblr","eventbus","guestService","trpx","webRtc","store","intercom",function($rootScope,$location,$q,$timeout,$modal,$window,$state,$translate,config,swf,pusher,Api,Facebook,twitter,google,instagram,youtube,tumblr,eventbus,guestService,trpx,webRtc,store,intercom){var session={};session.fanStatus={};session.subStatus={};session.momentStatus={};session.paidLikeStatus={};session.fanQueue=[];session.subQueue=[];session.momentQueue=[];session.paidLikeQueue=[];window.session=session;session.authenticate={facebook:Facebook.authenticate,twitter:twitter.authenticate,google:google.authenticate,instagram:instagram.authenticate,youtube:youtube.authenticate,tumblr:tumblr.authenticate};var sSessions=JSON.parse(window.localStorage.getItem('sessions'));if(sSessions==null)
sSessions={};session.savedSessions=[];for(var key in sSessions)
{session.savedSessions.push(sSessions[key]);}
function rerouteNonPartners(user){user.admin=session.isAdmin();if(user.userId===0||(user.userId>0&&(user.partner===0&&user.admin===false)&&$state.current.name==='/partners/earnings')){$state.go('/partners');}
if(user.userId!==0&&(user.partner==4||user.partner==5||user.partner==8||user.partner==9||user.partner==10)){$state.go('main.channel.detail');}}
function getP2pList(channelId){Api.get('YOUNOW_P2P_LIST',{channelId:channelId}).then(function(response){var i=0,p2pMap={};for(i;i<response.data.users.length;i++){p2pMap[response.data.users[i].userId]=response.data.users[i].name;}
swf.currentSession.p2pList=p2pMap;});}
function payeePayable(){var getRequest=Api.get('STORE_PAYEE_PAYABLE',{userId:session.user.userId});return getRequest.then(function(response){if(response.data&&response.data.result){if(response.data.result.b===true){return true;}else{return false;}}});}
function sortFriends(friends){var onlineFriends=[];var broadcastingFriends=[];for(var i=0;i<friends.length;i++){if(friends[i].status===2){broadcastingFriends.push(friends[i]);}else{onlineFriends.push(friends[i]);}}
return{live:broadcastingFriends,online:onlineFriends};}
function clearRelationship(relationship){var statusMap=relationship+'Status';angular.forEach(session[statusMap],function(status,id){session[statusMap][id]=undefined;session[relationship+'Queue'].push(id);});}
session.showLoginModal=function(hard,source){if(!hard)
return $modal.loginModal(hard,source);};session.auth=function(type,silent){return session.authenticate[type](silent).then(function(data){Api.store('lastNetwork',type);return session.login(data);}).catch(function(response){if(response==='error'){Api.showTopNotification('Could not login. Please try again!');}
Api.store('lastNetwork',null);});};session.getSession=function(){if(window.isPrerender){return false;}
var post={curId:session.curId||0,app_version:config.settings.JS_VERSION,model:Api.pad(window.screen.width,4)+'x'+Api.pad(window.screen.height,4),UILanguage:Api.store('UILanguage')};if(Api.store('oneSignalId')){post.deviceChannel=Api.store('oneSignalId');}
post.browser=Api.browser.name;post.browser_version=Api.browser.major;post.device_version=Api.os.version;post.device_os=Api.os.name;window.YouNow.loadingTime.startYounowUser=Date.now();return Api.post('YOUNOW_USER',post).success(function(data){window.YouNow.loadingTime.younowUser=Date.now()-window.YouNow.loadingTime.startYounowUser;if(data.userId=="0"){eventbus.unsubscribe('session','error:loggedout');}else{eventbus.subscribe('error:loggedout',session.logout,'session');}
session.updateUser(data);trpx.updateUser(data);if(data.userId===0){$q.reject();}});};session.updateUser=function(data){session.user=data;session.updatePusherShard();session.loggedIn=session.user.userId!==0;session.user.fullName=Api.fullName(data);session.administrator=session.isAdmin();session.moderator=session.isMod();if(data.locale){config.setLocale(data.locale);trpx.updateLocale(data.locale);}
swf.sendKeepSession(data);fetchRelationships('fan','CHANNEL_IS_FAN_OF');fetchRelationships('sub','CHANNEL_IS_SUBSCRIBER_OF',function(data){if(data){store.subscriptionBenefits=angular.merge(store.subscriptionBenefits,data);}});fetchRelationships('moment','MOMENT_IS_LIKED');fetchRelationships('paidLike','MOMENT_PAIDLIKED');session.checkBan();if(session.user.needsToConfirmTermsOfUse===true||session.user.partner===6||session.user.partner===7){if(session.user.userId!==0){$modal.agreementAcceptance();}}
if(session.loggedIn){var n={'username':session.user.profile,'userID':session.user.userId,'coins':session.user.userCoins,'bars':session.user.vault.webBars,'session':session.user.session,'slt':readCookie("slt")};if(session.addingSession)
{session.addingSession=false;n.session=session.addingSessionID;n.slt=session.addingSessionSLT;}
if(session.sessionSwitched)
{for(var i=0;i<session.savedSessions.length;i++)
{if(session.savedSessions[i].userID==n.userID)
{n.slt=session.savedSessions[i].slt;}}
session.sessionSwitched=false;}
if(sSessions[session.user.userId]==null)
{session.savedSessions.push(n);}
else
{for(var i=0;i<session.savedSessions.length;i++)
{if(session.savedSessions[i].userID==n.userID)
{session.savedSessions[i]=n;}}}
sSessions[session.user.userId]=n;window.localStorage.setItem('sessions',JSON.stringify(sSessions));console.log(JSON.stringify(sSessions));session.getNotificationCount();if(!swf.loggedIn){swf.notifyLogin(data);swf.loggedIn=true;}
guestService.notifyLogin(data);pusher.ready().then(function(){pusher.subscribeToPrivate(session.user.userId);});if(session.user.editorsPick){if(session.user.editorsPick.state===1){$modal.epModal();}
if(session.user.editorsPick.state===3){$modal.epModal('expired');}}
if(session.user.activeBroadcastReconnect&&webRtc.supportsWebRtc()){$modal.reconnect();}
session.user.progress=Math.floor((session.user.realLevel-Math.floor(session.user.realLevel))*100);session.showRightSidebar();session.trackUser();getP2pList(data.userId);Api.requestBy=session.user.requestBy;if(session.user.partner){payeePayable().then(function(response){session.user.isTipaltiPayable=response;});}
intercom.start(session.user.intercom);}else{if(session.addingSession)
{session.addingSession=false;document.cookie="PHPSESSID="+session.previousSession+"; path=/; domain=.younow.com; expires=Sat, 01 Jan 2050 00:00:01 GMT";document.cookie="slt="+session.previousSessionSLT+"; path=/; domain=.younow.com; expires=Sat, 01 Jan 2050 00:00:01 GMT";session.getSession();$modal.alert("The entered session is invalid. You are now logged back in to the previous account you've used.");}
$rootScope.sendSocketMessage('login',{'username':'','userId':''});session.rightsidebar=false;Api.requestBy=undefined;store.resetSubscriptionBenefits();}
if($state.current.name==='/partners/earnings'){rerouteNonPartners(data);}
if(window._ht){window._ht._ht_uid=session.user.userId;}
eventbus.notifySubscribers('session:loggedIn',session.loggedIn);eventbus.notifySubscribers('store:update',{type:'goodies'});};session.trackUser=function(){if(!session.loggedIn){return false;}
if($window.ga){$window.ga('set','&uid',session.user.userId);$window.ga('set','dimension3','registered');}
if($window.Bugsnag){$window.Bugsnag.user={id:session.user.userId,name:session.user.profile};}};session.updateLanguage=function(la){if(!la){console.warn('updateLanguage() language not specified');return false;}
if(la=='ww'){la='en';}
if(la=='me'){la='ar';}
config.UILanguage=la;$translate.use(config.UILanguage);Api.store('UILanguage',config.UILanguage);var post={UILanguage:la};if(session.user&&session.user.userId){post.channelId=session.user.userId;post.userId=session.user.userId;}
Api.post('CHANNEL_UPDATE_UI_LANGUAGE',post);trpx.updateLanguage(la);};session.checkBan=function(){if(session.user&&session.user.userId!==0&&session.user.banId!==0){Api.showTopNotification('<div>'+session.user.banningMsg.msgString+'</div>'+'<a class="btn btn-confirm" target="_blank" href="'+session.user.banningMsg.supportBtn.btnAct_web+'">'+session.user.banningMsg.supportBtn.btnTxt_web+'</a>','now',true,undefined);config.banningMsg=session.user.banningMsg;return true;}
return false;};session.silentAuth=function(){if(Api.store('lastNetwork')){return session.auth(Api.store('lastNetwork'),true);}else{return false;}};session.forceLogin=function(loginType){return true;};session.login=function(loginData,connect){loginData.locale=config.UILocale;loginData.channelId=session.channelId||loginData.channelId;loginData.inviteString=session.inviteString||session.channelId;loginData.srcId=session.srcId||0;loginData.tmsid=$window.YouNow.Bootstrap.tmId||'';loginData.deviceType=Api.browser.name;if(Api.store('oneSignalId')){loginData.deviceChannel=Api.store('oneSignalId');}
var endpoint=connect?'YOUNOW_CONNECT':'YOUNOW_LOGIN';if(connect){loginData.userId=session.user.userId;}
return Api.post(endpoint,loginData).then(function(response){session.loginData=response.data;session.getSession();return response;});};session.logout=function(){document.cookie="PHPSESSID=; path=/; domain=.younow.com; expires=Thu, 01 Jan 1970 00:00:01 GMT";document.cookie="slt=; path=/; domain=.younow.com; expires=Thu, 01 Jan 1970 00:00:01 GMT";session.loggedIn=false;session.updateUser({});var post={userId:session.user.userId,deviceType:Api.browser.name};if(Api.store('oneSignalId')){post.deviceChannel=Api.store('oneSignalId');}
document.cookie="PHPSESSID=; path=/; domain=.younow.com; expires=Thu, 01 Jan 1970 00:00:01 GMT";document.cookie="slt=; path=/; domain=.younow.com; expires=Thu, 01 Jan 1970 00:00:01 GMT";var lastNetwork=Api.store('lastNetwork');if(lastNetwork){$rootScope.gaEvent('FEATURE','LOGOUT',lastNetwork.toUpperCase());}
session.getSession().then(function(){window.YouNow.Bootstrap.genTmId();window.YouNow.Bootstrap.images1();});Api.store('lastNetwork',null);clearRelationship('fan');clearRelationship('sub');clearRelationship('moment');session.onlineFriends=null;session.onlineFriendIds=null;session.p2pList=null;swf.notifyLogout();guestService.notifyLogout();intercom.end(session.user.intercom);};session.updatePusherShard=function(){var newShard=session.user.userId||session.user.session;if(newShard!=pusher.shard){pusher.shard=newShard;if(pusher.presenceChannel&&!config.settings.NoPusherOnChannelWeb){pusher.subscribe('presenceChannel','public-on-channel_'+pusher.channelId+'_'+pusher.shard+'_web_'+session.user.sec_token);}}};session.showInviteUsers=function(options){if(!$window.FB){throw new Error('Facebook api not found');}
options=options||{};var params={method:'apprequests',message:options.msg||'Hey, you should join YouNow! It\'s a new way to discover awesome people, become a broadcasting legend and get more followers/subscribers.',data:{src:options.srcId||session.srcId||0,invite:options.inviteStr||session.inviteString||0}};$rootScope.gaEvent('FEATURE','invitefriends',config.UILocale);$window.FB.ui(params,options.callback);};$rootScope.$watch(function(){return pusher.onCoins;},function(message){if(message){session.user.userCoins=Number(message.coins)||0;session.user.level=Number(message.level)||0;}});$rootScope.$watch(function(){return swf.partnerState;},function(message){if(message){session.user.partner=message;}});$rootScope.$watch(function(){return swf.barsRefund;},function(message){if(message&&session.user.userId!==0){session.user.vault.webBars=message;}});session.getNotificationCount=function(){Api.get('YOUNOW_NOTIFICATIONS',{userId:session.user.userId}).success(function(data){session.resetNotifications();session.notificationCount=data.inAppCount||0;});};$rootScope.$on('onAccountUpdate',function(event,data){$rootScope.$evalAsync(function(){event.preventDefault();if(session.user.userId){session.user.spendingDisabled=data.message.spendingDisabled;}});session.getSession();});session.getOnlineFriends=function(){if(!session.rightsidebar){return true;}
var params={numberOfRecords:50,channelId:session.user.userId};Api.get('CHANNEL_LOCATION_ONLINE_FANS_OF',params).success(function(data){if(data.users){var friends=Api.sortUsers(data.users);var i=0,friendsIds=[];for(i;i<friends.length;i++){friendsIds.push(friends[i].userId);}
swf.storeFriendsViewing(friends);session.onlineFriends=sortFriends(friends);session.onlineFriendIds=friendsIds;}
session.noFriendsActivity=(!session.onlineFriends||session.onlineFriends.length===0);if(session.loggedIn){Api.poll(session.getOnlineFriends,'getOnlineFriends',data.nextRefresh);}});};session.resetNotifications=function(){session.notifications=[];session.notificationCount=0;session.moreNotifications=true;};session.getNotifications=function(start){if(start===undefined){start=session.notifications.length;}
if(session.noMoreNotifications&&start!==0){return false;}
var params={startFrom:start,userId:session.user.userId,web:1};return Api.get('CHANNEL_NOTIFICATIONS',params).success(function(data){session.noMoreNotifications=data.hasNext?false:true;if(!data.notifications){return false;}
session.notifications=params.startFrom===0?data.notifications:session.notifications.concat(data.notifications);for(var i=0;i<session.notifications.length;i++){session.notifications[i].template=session.notifications[i].template.replace(session.notifications[i].userName,'');if(session.notifications[i].notificationTypeId===1||session.notifications[i].notificationTypeId===24){session.notifications[i].imageUrl=Api.generateDynamicApi('BROADCAST_THUMB')+'/'+session.notifications[i].entityId+'/'+session.notifications[i].entityId+'.jpg';}else if(session.notifications[i].notificationTypeId===27){session.notifications[i].imageUrl=Api.generateDynamicApi('IMAGE_GUEST_SNAPSHOTS')+'/'+session.notifications[i].entityId+'/'+session.notifications[i].entityId+'.jpg';}
session.notifications[i].channel={userId:session.notifications[i].eventUserId};}});};session.getFan=function(id){if(session.fanStatus[id]===undefined&&session.fanQueue.indexOf(id)===-1){session.fanQueue.push(id);fetchRelationships('fan','CHANNEL_IS_FAN_OF');}};session.connect=function(type,source,userId){trpx.capture({event:'CLICK',extradata:'CONNECT',field1:source},trpx.captureGroups.trackevents);session.authenticate[type]().then(function(data){data.origin=source;session.login(data,true).then(function(data){session.fetchSettings(userId);});});};session.fetchSettings=function(userId){if(session.loggedIn){Api.get('CHANNEL_SETTINGS',{userId:userId}).success(function(data){if(data.user){angular.forEach(data.options,function(option){if(option.optionValue==8){data.pubTwitter=option;}
if(option.optionValue==32){data.keepYoutube=option;}
if(option.optionValue==64){data.pubFacebook=option;}
if(option.optionValue==256){data.youtubeSimulcast=option;}
if(option.optionValue==512){data.hideCity=option;}
if(option.optionValue==1024){data.youtubeAnnotations=option;}
if(option.optionValue==4096){data.pubTumblr=option;}
if(option.optionValue==8192){data.getUpdates=option;}});data.user.useprofile=Number(data.user.useprofile);}
if(!data.user){$timeout(function(){Api.showError(data);$state.go('main.channel.detail');},0);}});}};var fetchRelationships=function(relationship,apiKey,callback){var queueName=relationship+'Queue';var queueTimer=relationship+'Timer';var statusList=relationship+'Status';var relationshipResult;if(session.user&&session.user.userId&&session[queueName].length&&!session[queueTimer]){return session[queueTimer]=$timeout(function(){var data={};if(relationship!=='moment'&&relationship!=='paidLike'){data.channelIds=session[queueName].join(',');}else{data.ids=session[queueName].join(',');relationshipResult='liked';}
if(!relationshipResult){relationshipResult=relationship==='sub'?'subscriberOf':relationship+'Of';}
data.userId=session.user.userId;return Api.get(apiKey,data).success(function(data){angular.forEach(data[relationshipResult],function(status,id){if(status.indexOf&&status.indexOf(relationship)!=-1){session[statusList][id]=true;}else if(status.indexOf){session[statusList][id]=false;}else{session[statusList][id]=status;}});session[queueName]=[];session[queueTimer]=undefined;if(callback){if(apiKey=='MOMENT_PAIDLIKED'){callback(data[relationshipResult]);}else{callback(data[relationshipResult+'Data']);}}});});}};session.getSub=function(id){if(session.subStatus[id]===undefined&&session.subQueue.indexOf(id)===-1){session.subQueue.push(id);fetchRelationships('sub','CHANNEL_IS_SUBSCRIBER_OF',function(data){if(data){store.subscriptionBenefits=angular.merge(store.subscriptionBenefits,data);}});}};session.getMomentLike=function(id){if(session.momentStatus[id]===undefined&&session.momentQueue.indexOf(id)===-1){session.momentQueue.push(id);return fetchRelationships('moment','MOMENT_IS_LIKED');}};session.getPaidLikes=function(id){if(session.paidLikeStatus[id]===undefined&&session.paidLikeQueue.indexOf(id)===-1){session.paidLikeQueue.push(id);return fetchRelationships('paidLike','MOMENT_PAIDLIKED',function(data){if(data){store.paidLikes=angular.merge(store.paidLikes,data);}});}};session.isAdmin=function(){return config.checkRole(session.user,config.bootstrap.adminRoles);};session.isMod=function(){return config.checkRole(session.user,config.bootstrap.modRoles);};session.broadcastsTabAllowed=function(userId){if(!session.user||session.user.userId===0){return{type:'loggedOut',allowed:false};}else if(session.isMod()||session.isAdmin()){return{type:'permissions',allowed:true};}else if(session.subStatus[userId]){return{type:'subscriber',allowed:true};}else if(session.user.userId===userId){return{type:'self',allowed:true};}else{return{type:'other',allowed:false};}};session.preventBroadcastInterrupt=function(){$translate('broadcasting_cant').then(function(value){$modal.alert(value);});};session.showRightSidebar=function(){$rootScope.$evalAsync(function(){session.rightsidebar=true;session.getOnlineFriends();});};eventbus.subscribe('pusher:ban',function(event,message){if(session.user){if(message.message){if(!session.user.banningMsg){session.user.banningMsg={};}
session.user.banId=message.message.banId;session.user.banningMsg.msgString=message.message.messageText;session.user.banningMsg.supportBtn={btnTxt_web:message.message.btnTxt_web,btnAct_web:message.message.btnAct_web};config.banningMsg=session.user.banningMsg;Api.showTopNotification('<div>'+session.user.banningMsg.msgString+'</div>'+'<a class="btn btn-confirm" target="_blank" href="'+session.user.banningMsg.supportBtn.btnAct_web+'">'+session.user.banningMsg.supportBtn.btnTxt_web+'</a>','now',true);}
if(message===0){session.user.banId=0;session.user.banningMsg={};delete config.banningMsg;Api.closeTopNotification('sticky');}
if(!swf.available()){session.checkBan();}}},'session');eventbus.subscribe('user:update',function(event,data){for(var key in data){if(session.user[key]!==undefined){session.user[key]=data[key];}}},'session');eventbus.subscribe('user:onNotificationCountChange',function(event,data){$rootScope.$evalAsync(function(){session.notificationCount++;var isNotBroadcasting=!swf.broadcast||swf.broadcast&&swf.broadcast.userId!=session.user.userId,isNotGuesting=!guestService.guest||guestService.guest&&guestService.guest.userId!=session.user.userId,isNotMuted=swf.volume>0;if((isNotBroadcasting&&isNotGuesting&&isNotMuted)&&document.getElementById('notificationSound')){document.getElementById('notificationSound').play();}});},'session');return session;}]);angular.module('younow.services.shareService',[]).factory('shareService',["$q","$rootScope","session","swf","Api","config","$timeout","$window","$interval","broadcasterService","trpx",function($q,$rootScope,session,swf,Api,config,$timeout,$window,$interval,broadcasterService,trpx){var service={};service.clientShareTwitter=function(link,broadcaster,trackingArgs){var baseURL='https://twitter.com/share?';var younower=link.twitterHandle?'@'+link.twitterHandle:broadcaster;var queryParams={text:'Check out this moment of '+younower+' on @Younow',url:link.url};trpx.capture(trackingArgs,trpx.captureGroups.trackevents);var shareUrl=baseURL+'text='+queryParams['text']+'&url='+queryParams['url'];windowOpenCenter(shareUrl,'twitter',600,400);};service.clientShareFacebook=function(link,broadcaster,trackingArgs){window.FB.ui({method:'share',href:link.url},function(){});trpx.capture(trackingArgs,trpx.captureGroups.trackevents);};service.getMomentToShare=function(momentId,creatorId,channelId){return Api.post('CHANNEL_SHARE_URL',{userId:session.user.userId,entityId:momentId,entityType:'m',entityUserId:creatorId,channelId:channelId,feature:'MOMENT',source:'COPIEDURL'});};function windowOpenCenter(url,title,w,h){var dualScreenLeft=window.screenLeft!==undefined?window.screenLeft:window.screen.left;var dualScreenTop=window.screenTop!==undefined?window.screenTop:window.screen.top;var width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width;var height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height;var left=((width/2)-(w/2))+dualScreenLeft;var top=((height/2)-(h/2))+dualScreenTop;var newWindow=window.open(url,title,'scrollbars=yes, width='+w+', height='+h+', top='+top+', left='+left);if(window.focus){newWindow.focus();}}
service.shareTwitter=function(){var target='twitter';var deferred=$q.defer();if(swf.snapshot.shared[target]){swf.snapshot.sharing[target]=false;swf.snapshot.retake=true;Api.triggerTooltip("snapshot-retake",5000);service.trackFunnel(target+"_duplicate");deferred.reject("cooldown");return deferred.promise;}
if(session.user&&session.user.twitterId){service.sendShare(target,2);deferred.resolve("success");return deferred.promise;}else{$timeout(function(){$rootScope.gaEvent('CONNECT','ATTEMPT_TWITTER','SHARE');session.authenticate[target]().then(function(data){return session.login(data,true).then(function(data){if(data.data.errorCode===0){$rootScope.gaEvent('CONNECT','CONNECT_TWITTER','SHARE');swf.snapshot.sharing[target]=true;service.sendShare(target,2);deferred.resolve("success");if(twitterWindow){$interval.cancel(twitterWindow);}}else{$rootScope.gaEvent('CONNECT','ERROR_TWITTER_'+data.data.errorCode,'SHARE');swf.snapshot.sharing[target]=false;}});});var secondsOpened=0;var twitterWindow=$interval(function(){secondsOpened++;if(secondsOpened===60){$window.twitterPopup.close();}
if($window.twitterPopup&&$window.twitterPopup.closed){swf.snapshot.sharing[target]=false;$interval.cancel(twitterWindow);}},1000);},0);return deferred.promise;}};service.shareTumblr=function(){var target='tumblr';var deferred=$q.defer();if(swf.snapshot.shared[target]){swf.snapshot.sharing[target]=false;swf.snapshot.retake=true;Api.triggerTooltip("snapshot-retake",5000);service.trackFunnel(target+"_duplicate");deferred.reject("cooldown");return deferred.promise;}
if(session.user&&session.user.tumblrId){service.sendShare(target,16);deferred.resolve("success");return deferred.promise;}else{$timeout(function(){$rootScope.gaEvent('CONNECT','ATTEMPT_TUMBLR','SHARE');session.authenticate[target]().then(function(data){return session.login(data,true).then(function(data){if(data.data.errorCode===0){$rootScope.gaEvent('CONNECT','CONNECT_TUMBLR','SHARE');swf.snapshot.sharing[target]=true;service.sendShare(target,16);deferred.resolve("success");}else{$rootScope.gaEvent('CONNECT','ERROR_TUMBLR_'+data.data.errorCode,'SHARE');swf.snapshot.sharing[target]=false;}});});},0);return deferred.promise;}};service.shareFacebook=function(){var target='facebook';var deferred=$q.defer();if(swf.snapshot.shared[target]){swf.snapshot.sharing[target]=false;swf.snapshot.retake=true;Api.triggerTooltip("snapshot-retake",5000);service.trackFunnel(target+"_duplicate");return false;}
if(session.user&&(session.user.facebookId||service.facebookConnected)&&swf.share_facebook_permitted){deferred.resolve();}else if(session.user&&session.user.facebookId){service.shareFacebookLogin();}else if(session.user){$timeout(function(){$window.tempFBscope="public_profile,email,user_friends,publish_actions";session.authenticate[target]().then(function(data){session.login(data,true).then(function(data){if(data.data.errorCode===0){service.facebookConnected=true;service.shareFacebookAuth();}else{swf.snapshot.sharing[target]=false;}},function(reason){swf.snapshot.sharing[target]=false;});},function(reason){swf.snapshot.sharing[target]=false;});},0);}else{}
return deferred.promise;};service.shareFacebookAuth=function(){var target='facebook';FB.api('/me/permissions',function(response){if(response&&!response.error){for(var each in response){for(var permission in response[each]){if(response[each][permission].permission=='publish_actions'&&response[each][permission].status=='granted'){swf.share_facebook_permitted=true;service.shareFacebook();return true;}}}}
swf.snapshot.sharing[target]=false;swf.snapshot.shared[target]=false;Api.showTopNotification('Please click "share" again and allow posting to facebook.');return false;});};service.shareFacebookLogin=function(){var target='facebook';if(!swf.snapshot.shared.facebook_login_attempted){swf.snapshot.shared.facebook_login_attempted=true;$timeout(function(){swf.snapshot.shared.facebook_login_attempted=false;},500);$timeout(function(){FB.login(function(response){service.shareFacebookAuth();},{scope:'publish_actions',auth_type:'rerequest'});},0);}else{swf.snapshot.sharing[target]=false;}};service.shareFacebookSend=function(postData){var target='facebook';var callback=function(response){if(response.post_id){swf.snapshot.shared.facebook_postId=response.post_id;swf.snapshot.shared[target]=true;service.sendShare("facebook",4);if(!swf.broadcast.shared[target]){service.incrementShareCount(target);}}else{service.trackFunnel(target+"_error_fb");}
swf.snapshot.sharing[target]=false;};window.FB.ui({method:'share',href:swf.snapshot.links.FACEBOOK,},callback);};service.incrementShareCount=function(target){var user_shares_before=swf.broadcast.user_shares=(swf.broadcast.user_shares||0);var user_shares_current=0;for(var s in swf.broadcast.shared){if(swf.broadcast.shared[s]===true){user_shares_current++;}}
if(user_shares_current===0){user_shares_current=1;}
swf.broadcast.user_shares=user_shares_current;var user_shares_incremented=(user_shares_current-user_shares_before)>0?true:false;if(user_shares_incremented){swf.broadcast.shares++;}
Api.triggerTooltip("broadcast-shares",2000);};service.sendShare=function(target,sn){var userId=session.user.userId;var channelId=swf.broadcast.userId;var comment=swf.broadcast.share_message;var post={userId:userId,channelId:channelId,comment:comment,sn:sn,sendTweet:target==='twitter'?1:0,createPost:target==='tumblr'?1:0};if(target==='twitter'){post.snapshot=swf.snapshot.snapshot;}
var trackingTarget=(target=="younow")?"invite":target;Api.post('BROADCAST_SHARE',post).success(function(data,status,headers,config){swf.snapshot.sharing[target]=false;if(data.errorCode===0){swf.snapshot.shared[target]=true;if(!swf.broadcast.shared[target]){swf.broadcast.shared[target]=true;service.incrementShareCount(target);}
service.trackFunnel(trackingTarget+"_success");}else{service.trackFunnel(trackingTarget+"_error_"+data.errorCode);}}).error(function(data,status,headers,config){swf.snapshot.sharing[target]=false;service.trackFunnel(trackingTarget+"_error_yn");});};service.trackFunnel=function(action){swf.broadcast.shareCount[action]=swf.broadcast.shareCount[action]?swf.broadcast.shareCount[action]+1:1;$rootScope.gaEvent('SHARE',action,swf.broadcast.shareCount[action]);};return service;}]);angular.module('younow.services.store',[]).factory('store',function(Api,$modal,config,$q,$filter){var service={subscriptionBenefits:{},superMessages:[],momentGoodies:[],paidLikes:{},topSpenderStatus:{},paidLikesAndLikesCount:{}};service.updateSubscriberBenefits=function(channelId,benefitObject){if(!service.subscriptionBenefits[channelId]){service.subscriptionBenefits[channelId]={};}
angular.merge(service.subscriptionBenefits[channelId],benefitObject);};service.resetSubscriptionBenefits=function(){service.subscriptionBenefits={};};service.useSuperMessage=function(userId,channelId,comment){if(service.subscriptionBenefits[channelId]&&service.subscriptionBenefits[channelId].superMessages!="0"){return Api.post('BROADCAST_SUPERMESSAGE',{userId:userId,channelId:channelId,comment:comment}).then(function(response){if(response.data&&response.data.superMessages){service.updateSubscriberBenefits(channelId,{superMessages:response.data.superMessages});}});}else{Api.showTopNotification($filter("translate")("subscriber_no_supermessages"));}};service.postGift=function(userId,channelId,gift,Filedata,targetNetwork){var giftParams={userId:userId,channelId:channelId,giftId:gift.id,quantity:gift.quantity,toUserId:gift.id===config.settings.PARTNER_STICKER_GIFT_ID?gift.userId:undefined};if(Filedata!==undefined&&targetNetwork!==undefined){giftParams.Filedata=Filedata;giftParams.targetNetwork=targetNetwork;}
return Api.post('BROADCAST_GIFT',giftParams);};service.postMomentGift=function(momentId,sku,qty,userId){var params={sku:sku,userId:userId,momentId:momentId,qty:qty,};return Api.post('STORE_GOODIE',params);};service.postDailySpin=function(channelId,userId){var params={channelId:channelId,userId:userId}
console.log(params);return Api.post('STORE_SPIN',params);};service.validateGiftPurchase=function(userId,userLevel,banId,gift){if(!userId){return false;}else if(banId!==0){return false;}else if(userLevel<gift.minLevel){return false;}else{gift.giftQuantity=0;gift.totalCost=0;return gift;}};service.calculateGiftCost=function(gift,stickersMultiplier,dynamicPricedGoodies){if(stickersMultiplier&&gift.dynamicCost==2){gift.purchasePrice=Math.floor(Number(gift.cost*stickersMultiplier));}else if(dynamicPricedGoodies&&gift.dynamicCost==1){gift.purchasePrice=dynamicPricedGoodies[gift.SKU];}else{gift.purchasePrice=gift.cost;}
return gift;};service.getMomentGoodies=function(){if(service.momentGoodies.length===0){Api.get('STORE_GOODIES',{v3:1,lang:config.UILanguage}).then(function(response){if(response.data.errorCode===0&&response.data.momentGoodies){service.momentGoodies=response.data.momentGoodies;}});}};service.getGoodies=function(partnerStickers){var deferred=$q.defer();Api.get('STORE_GOODIES',{v3:1,lang:config.UILanguage}).then(function(response){var bcGiftItems=[],giftSkus={},giftObjects={},chatcoolDownGift;var gift,currentGift,partnerSticker,giftItems=[];for(gift in response.data.goodies){currentGift=response.data.goodies[gift];giftSkus[currentGift.id]=currentGift.SKU;currentGift.locales='ww';if(currentGift.displayMode&&currentGift.displayMode!=="1"){giftObjects[currentGift.SKU]={id:currentGift.id,minVis:currentGift.minVisDuration*1000,maxVis:currentGift.maxVisDuration*1000,itemGameType:currentGift.itemGameType};}
if((currentGift.broadcasterType||currentGift.hidden!==true)&&currentGift.SKU!=='SUBSCRIPTION'&&currentGift.SKU!=='CHATCOOLDOWN'&&currentGift.SKU!=='CAMERA'){giftItems.push(currentGift);}
if(currentGift.SKU=='CHATCOOLDOWN'){chatcoolDownGift=currentGift;}
if(currentGift.SKU==='PARTNER_STICKER'){partnerSticker=currentGift;}}
if(partnerStickers&&partnerStickers.length>0){if(partnerStickers[0].SKU===undefined){for(var i=0;i<partnerStickers.length;i++){partnerStickers[i]=angular.merge({},partnerSticker,partnerStickers[i]);}}
for(var j=0;j<giftItems.length;j++){if(giftItems[j].costType==='COINS'){giftItems.splice.apply(giftItems,[j,0].concat(partnerStickers));break;}}}
deferred.resolve({giftsAssetsBaseUrl:config.imageApis.gifts,bcGiftItems:bcGiftItems,giftSkus:giftSkus,giftObjects:giftObjects,giftItems:giftItems,chatcoolDownGift:chatcoolDownGift});});return deferred.promise;};service.suppressGiftOverlays=function(guestState){if(guestState==='ready'||guestState==='connected'){return false;}else{return true;}};service.onPusherEvent=function(eventLabel,eventData){var data=(eventData&&eventData.message)?eventData.message:null;if(eventLabel==='onSuperMessage'&&data&&!Api.isPageHidden()){for(var i=0;i<data.superMessages.length;i++){service.superMessages.push(data.superMessages[i]);}}};service.clearSuperMessage=function(total){if(service.superMessages){service.superMessages.splice(0,total|1);}};return service;});angular.module('younow.services.tracking-pixel',[]).factory('trackingPixel',["$interval","$state","$http","$timeout","config","Api","broadcasterService","session","swf","debug","$stateParams","eventbus","guestService","TrackingPixelCore",function($interval,$state,$http,$timeout,config,Api,broadcasterService,session,swf,debug,$stateParams,eventbus,guestService,TrackingPixelCore){var trackingPixelCore=new TrackingPixelCore.Base({config:config});var trackingPixel=angular.extend(trackingPixelCore,{});var paramsMap=trackingPixel._getLocalVar('paramsMap');var paramTypes=trackingPixel._getLocalVar('paramTypes');trackingPixel.startPinging=function(){config.init.then(function(){$timeout(function(){trackingPixel.checkTrpxSession();initPing();},1000);Api.poll(initPing,'pingPoll',config.settings.PingInterval);});};window.document.addEventListener('loadTime',function(e){var post={'event':'APP_LOAD_WEB','broadcastscount':(window.YouNow.loadingTime.younowConfig||0),'unspentcoins':(window.YouNow.loadingTime.younowUser||0),'coins':(window.YouNow.loadingTime.younowReady||0),'points':(Date.now()-window.YouNow.loadingTime.startTime),'field1':trackingPixel.getUserLocation(),'field3':Api.os.name.split(' ')[0],'field4':Api.browser.name.split(' ')[0]};if(window.swfobject&&window.swfobject.getFlashPlayerVersion()){post.field2=window.swfobject.getFlashPlayerVersion().major;}
trackingPixel.capture(post);},false);trackingPixel.getUserLocation=function(){var location;if($state.current.name==='main.settings'){location='SETTINGS';}
if($state.current.name==='home'){location='HOME';}
if($state.current.name==='about'){location='ABOUT';}
if($state.current.name==='policy'){location='POLICY';}
if($state.current.name==='main.explore'){if($state.params.tag&&$state.params.tag.length>0){location='TAG';}else if($state.params.q){location='SEARCH';}else{location='EXPLORE';}}
if($state.current.name==='lockout'){location='LOCKOUT';}
if($state.current.name==='jobs'||$state.current.name==='infojobs'){location='JOBS';}
if($state.current.name==='info'){location='INFO';}
if($state.current.name==='/partners/earnings'){location='PARTNERS_EARNINGS';}
if($state.current.name==='/partners'){location='PARTNERS';}
if($stateParams.typeOfFeed==='trending'){location='TRENDING_MOMENTS_FEED';}
if($state.current.name==='main.momentsFeed'&&$stateParams.typeOfFeed!=='trending'){location='MOMENT_FEED';}
if(swf.settingUpBroadcast&&isNotOnMainRoute()){location='BRDCST_SETUP';}
if(session.user&&session.isBroadcasting&&!swf.settingUpBroadcast&&isNotOnMainRoute()){location='LIVE';}
if(swf.broadcast&&(!session.user||(session.user&&!session.isBroadcasting))&&!swf.settingUpBroadcast&&isNotOnMainRoute()){if(guestService.guest&&guestService.guest.userId==session.user.userId){location='GUESTBRDCST';}else{location='BRDCST';}}
if(broadcasterService.async&&isNotOnMainRoute()){if(broadcasterService.asyncTabs&&broadcasterService.asyncTabs.moments){location='MOMENT_PROFILE';}else if(trackingPixel.archiveActive){location='ARCHIVE';}else{location='PROFILE';}}
if($state.current.name==='main.channel.moment'||$state.current.name==='main.channel.momentCollection'){location='MOMENT_DEEPLINK';}
if($state.current.name==='main.momentsFeed'){location='MOMENTS_FEED';}
if($state.current.name==='main.momentsFeed'&&$stateParams.typeOfFeed==='trending'){location='MOMENT_TRENDING';}
return location||'page_not_ready';};trackingPixel.capture=function(params){if(window.isPrerender){return false;}
var location=trackingPixel.getUserLocation();var viewers='';var defaultParams={'host':config.settings.TrackingHost,'session':Api.store('trpxId'),'platform':3,'domain':Api.store('trpx_device_id'),'pixel':config.settings.TrackingPxl,'sourceid':0,'field5':config.settings.JS_VERSION,'field6':config.UILanguage};if((location==='EXPLORE'||location==='TAG')&&broadcasterService.exploreBroadcaster){defaultParams.broadcastid=broadcasterService.exploreBroadcaster.broadcastId;defaultParams.doorid=broadcasterService.exploreBroadcaster.user?broadcasterService.exploreBroadcaster.user.userId:0;viewers=broadcasterService.exploreBroadcaster.viewers||'';}
if(broadcasterService.broadcaster&&broadcasterService.broadcaster.user&&broadcasterService.broadcaster.broadcastId&&isNotOnMainRoute()&&!swf.settingUpBroadcast){defaultParams.broadcastid=broadcasterService.broadcaster.broadcastId;defaultParams.doorid=broadcasterService.broadcaster.user.userId;viewers=broadcasterService.broadcaster.viewers||'';}
if(viewers){if(!viewers.replace){defaultParams.coins=viewers.toString();}else{defaultParams.coins=viewers.replace(',','');}}
if((broadcasterService.broadcaster&&broadcasterService.broadcaster.userId)&&location==='PROFILE'&&!params[6]){defaultParams.doorid=broadcasterService.broadcaster.userId;}
if(session.user&&session.user.userId>0){defaultParams.userid=session.user.userId;defaultParams.userlevel=session.user.level;defaultParams.broadcastscount=session.user.broadcastsCount;if(!isNaN(Number(session.user.userCoins))){defaultParams.unspentcoins=Math.round(Number(session.user.userCoins));}
if(broadcasterService.broadcaster&&broadcasterService.broadcaster.userId){defaultParams.usertype=broadcasterService.broadcaster.userId===session.user.userId?2:1;}}else{defaultParams.userid=0;}
params=angular.extend(defaultParams,params);trackingPixel.captureHelper(params);debug.console(['TRPX',params.event],params);};function isNotOnMainRoute(){return($state.current.name!=='main.settings'&&$state.current.name!=='home'&&$state.current.name!=='about'&&$state.current.name!=='policy'&&$state.current.name!=='main.explore'&&$state.current.name!=='lockout'&&$state.current.name!=='/jobs'&&$state.current.name!=='info'&&$state.current.name!=='/partners'&&$state.current.name!=='/partners/earnings'&&$state.current.name!=='main.channel.moment'&&$state.current.name!=='main.channel.momentCollection'&&$state.current.name!=='main.momentsFeed');}
function initPing(){var pingData=buildPingData();if(Api.isPageHidden()&&!trackingPixel.pageWasHidden){trackingPixel.pageWasHidden=true;}
if(Api.isPageHidden()){trackingPixel.capture(pingData);}
if(!Api.isPageHidden()){if(trackingPixel.pageWasHidden){trackingPixel.pageWasHidden=false;}
Api.store('trpxTime',new Date().getTime());trackingPixel.capture(pingData);}
if(!Api.store('hideYounowLanding')){Api.store('countSessionsEnable','true');}
var locate=trackingPixel.location||trackingPixel.getUserLocation();if(((locate==='EXPLORE'||locate==='TAG')&&(!broadcasterService.exploreBroadcaster||!broadcasterService.exploreBroadcaster.user))||((locate==='BRDCST')&&(!broadcasterService.broadcaster||!broadcasterService.broadcaster.user))){if(trackingPixel.arrivalTrackingFirstAttempted){trackingPixel.trackArrival();}
trackingPixel.arrivalTrackingFirstAttempted=true;}else{trackingPixel.trackArrival();}}
trackingPixel.bcViewtime=function(name,params){var bc=broadcasterService.getBc();if(broadcasterService.viewtimeSeconds&&bc&&bc.broadcastId){var track={event:'VIEWTIME'};track.points=broadcasterService.viewtimeSeconds||0;track.broadcastid=bc.broadcastId||0;track.doorid=bc.user.userId||0;track.field5=bc.profile;broadcasterService.viewtimeSeconds=0;return trackingPixel.capture(track);}};broadcasterService.viewtimeSeconds=0;broadcasterService.viewtimeInterval=$interval(function(){broadcasterService.viewtimeSeconds++;},1000);eventbus.subscribe('broadcaster:beforeChange',trackingPixel.bcViewtime,'trackingPixel');eventbus.subscribe('trackingPixel:capture',remoteCapture,'trackingPixel');trackingPixel.trackArrival=function(){if(trackingPixel.arrivalTracked){return false;}else{trackingPixel.arrivalTracked=true;}
var countSessionArrivals=Api.store('countSessionArrivals');Api.store('countSessionArrivals',countSessionArrivals=countSessionArrivals+1);var track={event:'ARRIVAL',points:Api.store('countSessionsEnable')?Api.store('countSessions')||0:0,coins:countSessionArrivals,field1:trackingPixel.getUserLocation()};if($stateParams.srcId){if(!isNaN($stateParams.srcId)&&$stateParams.srcId<1100){track.sourceid=parseInt($stateParams.srcId);if($stateParams.srcId>300&&$stateParams.srcId<400){track.broadcastscount=3;}}else{track.field5=$stateParams.srcId;}}
trackingPixel.trackArrivalHelper(track);};window.onfocus=function(){trackingPixel.checkTrpxSession();};function buildPingData(){var pingData={};pingData.extradata=trackingPixel.getUserLocation();if(pingData.extradata==='GUESTBRDCST'){if(swf.broadcast.chatMode==1){pingData.field1='GUEST_SUB';}else{pingData.field1='GUEST';}}
if(pingData.extradata==='LIVE'||pingData.extradata==='BRDCST'){if(guestService.guest&&swf.broadcast&&!swf.broadcast.chatMode){pingData.field1='GUEST';}else if(!guestService.guest&&swf.broadcast&&swf.broadcast.chatMode==1){pingData.field1='SUB';}else if(guestService.guest&&swf.broadcast&&swf.broadcast.chatMode==1){pingData.field1='GUEST_SUB';}else{pingData.field1='NORMAL';}}
if(pingData.extradata==='TAG'||pingData.extradata==='SEARCH'||pingData.extradata==='EXPLORE'){if(guestService.guest&&broadcasterService.exploreBroadcaster&&!broadcasterService.exploreBroadcaster.chatMode){pingData.field1='GUEST';}else if(!guestService.guest&&broadcasterService.exploreBroadcaster&&broadcasterService.exploreBroadcaster.chatMode==1){pingData.field1='SUB';}else if(guestService.guest&&broadcasterService.exploreBroadcaster&&broadcasterService.exploreBroadcaster.chatMode==1){pingData.field1='GUEST_SUB';}else{pingData.field1='NORMAL';}}
if(pingData.extradata==='GUESTBRDCST'||pingData.extradata==='LIVE'||pingData.extradata==='TAG'||pingData.extradata==='SEARCH'||pingData.extradata==='EXPLORE'||pingData.extradata==='BRDCST'){pingData.field6=navigator.language||navigator.userLanguage||'';pingData.field7=config.settings.JS_VERSION;}
if(Api.isPageHidden()){pingData.event='INACTIVE_PING';}else{pingData.event='PING';}
return pingData;}
function remoteCapture(event,args){trackingPixel.capture(args);}
return trackingPixel;}]);angular.module('younow.services.trpx',[]).factory('trpx',function(Api,$http,config,debug,$state,$stateParams){var trpx={captureGroups:{},trackingInfo:{}};var sharedTrpxData={};trpx.captureGroup=function(paramsMap,size){this.paramsMap=paramsMap;this.size=size;};trpx.capture=function(params,captureGroup,useImage){var location=getUserLocation();updateDefault('user_location',location);updateDefault('sessionid',Api.store('trpxId'));updateDefault('deviceid',Api.store('trpx_device_id'));updateDefault('sessioncount',Api.store('countSessionsEnable')?Api.store('countSessions')||0:0);var param;for(param in params){if(!params[param]||!params[param].value){params[param]={value:params[param]};}}
params=angular.merge({},captureGroup.paramsMap,params);for(param in params){if(params[param].value){if(captureGroup.paramsMap[param].type=='number'&&!isNaN(params[param].value)){params[param].value=parseInt(params[param].value)||0;}
if(typeof params[param].value!==captureGroup.paramsMap[param].type){console.warn('Warning: '+param+' should have a type of '+captureGroup.paramsMap[param].type);}
if(typeof params[param].value==='string'){params[param].value=encodeURIComponent(params[param].value).replace(/%/g,'_');}}}
debug.console(['TRPXV2'],params);if(useImage){var img=document.createElement('img');img.src=Api.buildPixelTracking(formatParams(params),captureGroup.size);return img;}else{return $http.get(Api.buildPixelTracking(formatParams(params),captureGroup.size));}};function formatParams(params){var result={},param;for(param in params){result[params[param].pos]=params[param].value;}
return result;}
var defaults={};var updateDefault=function(key,val){for(var group in defaults[key]){var field=defaults[key][group];trpx.trackingInfo[group][field].value=val;}};var groups={};groups.trackevents=[['host','string'],['event','string'],['dateday','string'],['userid','number','userid'],['session','string','sessionid'],['broadcastid','number','broadcastid'],['doorid','number','doorid'],['userlevel','number','level'],['broadcastscount','number'],['unspentcoins','number'],['usertype','number'],['extradata','string'],['coins','number'],['points','number','sessioncount'],['platform','number','platform'],['sourceid','number','sourceid'],['domain','string','deviceid'],['field1','string'],['field2','string'],['field3','string'],['field4','string'],['field5','string','jsversion'],['field6','string','language'],['field7','string'],['pixel','string','pixel']];groups.webrtc=[['timestamp','string'],['event','string'],['userid','string','userid'],['sessionid','string','sessionid'],['broadcastid','number','broadcastid'],['userlevel','number','level'],['deviceid','string','deviceid'],['os_device','string','os_device'],['osver_manufacturer','string','os_ver'],['browser_platform','string','browser_name'],['browserver_network','string','browser_ver'],['appversion','string','jsversion'],['incomingframerate','string'],['outgoingframerate','string'],['outgoingabr','string'],['outgoingvbr','string'],['incomingabr','string'],['incomingvbr','string'],['packetslost','string'],['packetssent','string'],['jitter','string'],['rtt','string'],['connectiontype','string'],['eventlabel','string'],['framewidthsent','string'],['frameheightsent','string'],['isguest','number'],['reserved1','string'],['reserved2','string'],['reserved3','string'],['pixel','string','pixel']];groups.searchevents=[['timestamp','string'],['event','string'],['app_location','string','user_location'],['userid','string','userid'],['platform','number','platform'],['deviceid','string','deviceid'],['locale','string','locale'],['language','string','language'],['query','string'],['click_field','string'],['click_index','string'],['result_set_size','number','result_set_size'],['pixel','string','pixel']];groups.buybars=[['host','string'],['event','string'],['userid','number','userid'],['sessionid','string','sessionid'],['broadcasterid','number','doorid'],['broadcastid','number','broadcastid'],['platform','number','platform'],['appversion','string','jsversion'],['sysversion','string','browser_ver'],['devicemodel','string','browser_name'],['productsku','string'],['productname','string'],['productprice','string'],['productamount','string'],['retrycount','number'],['errorcode','number'],['signature','string'],['pixel','string','pixel']];groups.playback=[['host','string'],['event','string'],['userid','number','userid'],['appversion','string','jsversion'],['deviceid','string','deviceid'],['device','string','browser_name'],['platform','number','platform'],['osversion','string','browser_ver'],['broadcastid','number','broadcastid'],['loadtime','number'],['countrycode','string','user_country'],['dns','string'],['connection','string'],['pixel','string','pixel']];for(var i in groups){var groupName=i;trpx.trackingInfo[groupName]={};for(var field in groups[i]){var fieldName=groups[i][field][0];var defaultKey=groups[i][field][2];if(defaultKey){if(!defaults[defaultKey]){defaults[defaultKey]={};}
defaults[defaultKey][groupName]=fieldName;}
trpx.trackingInfo[groupName][fieldName]={value:undefined,type:groups[i][field][1],pos:field};}
trpx.captureGroups[groupName]=new trpx.captureGroup(trpx.trackingInfo[groupName],groups[groupName].length-1);}
updateDefault('platform',3);updateDefault('sourceid',0);updateDefault('sessionid',Api.store('trpxId'));updateDefault('deviceid',Api.store('trpx_device_id'));updateDefault('os_device',Api.os.name);updateDefault('os_ver',Api.os.version);updateDefault('browser_name',Api.browser.name);updateDefault('browser_ver',Api.browser.version);updateDefault('language',config.UILanguage);updateDefault('locale',config.UILocale);updateDefault('jsversion',(config.settings.JS_VERSION.split('.')[0]+'.'+config.settings.JS_VERSION.split('.')[1]));updateDefault('pixel',config.settings.TrackingPxl);updateDefault('result_set_size',0);updateDefault('sourceid',0);trpx.updateUser=function(data){updateDefault('level',data.level);updateDefault('userid',data.userId);updateDefault('user_country',data.country);};trpx.updateBroadcast=function(data){sharedTrpxData.broadcastid=data.broadcastId;updateDefault('doorid',data.userId);updateDefault('broadcastid',data.broadcastId);};trpx.updateLanguage=function(language){updateDefault('language',config.UILanguage);};trpx.updateLocale=function(locale){updateDefault('locale',locale);};trpx.getUserLocation=function(){return getUserLocation();};function getUserLocation(){var location;if($state.current.name==='main.settings'){location='SETTINGS';}
if($state.current.name==='home'){location='HOME';}
if($state.current.name==='about'){location='ABOUT';}
if($state.current.name==='policy'){location='POLICY';}
if($state.current.name==='main.explore'){if($state.params.tag&&$state.params.tag.length>0){location='TAG';}else if($state.params.q){location='SEARCH';}else{location='EXPLORE';}}
if($state.current.name==='lockout'){location='LOCKOUT';}
if($state.current.name==='jobs'||$state.current.name==='infojobs'){location='JOBS';}
if($state.current.name==='info'){location='INFO';}
if($state.current.name==='/partners/earnings'){location='PARTNERS_EARNINGS';}
if($state.current.name==='/partners'){location='PARTNERS';}
if($state.current.name==='main.channel.detail'){if(sharedTrpxData.broadcastid){location='BRDCST';}else{location='PROFILE';}}
if($state.current.name==='main.momentsFeed'&&$stateParams.typeOfFeed==='trending'){location='MOMENT_TRENDING';}
if($state.current.name==='main.channel.moment'||$state.current.name==='main.channel.momentCollection'){location='MOMENT_DEEPLINK';}
if($state.current.name==='main.momentsFeed'){location='MOMENTS_FEED';}
return location||'UNAVAILABLE';}
return trpx;});angular.module('younow.services.debugger',[]).factory('debug',["config",function(config){var debug={};var types=[];var devTypes=[];if(config.params.debug){types=types.concat(config.params.debug.split(' '));}
debug.enabled=false;debug.console=function(type,content){if(debug.enabled&&(isTypeFound(types,type)||types.indexOf('all')!==-1)){console.trace();console.log(type,content);}};debug.enableFor=function(type){if(!debug.enabled){debug.enabled=true;}
types.concat(type);};if(config.host.indexOf('-')!==-1){types=types.concat(devTypes);}
if(config.params.debug){types=noDuplicates(types);debug.enabled=true;debug.console(types,'Init Debugger');}
if(config.params.debug=='false'){debug.enabled=false;}
function noDuplicates(a){return a.sort().filter(function(item,pos,ary){return!pos||item!=ary[pos-1];});}
function isTypeFound(types,type){var i=0;for(i;i<types.length;i++){if(type.indexOf(types[i])===-1){return false;}}
return true;}
return debug;}]);angular.module('younow.services.utils',[]).provider('Api',function ApiProvider($urlRouterProvider){this.reRouteHandler=function(from,to){$urlRouterProvider.when(from,["$match","$stateParams","$injector","$state",function($match,$stateParams,$injector,$state){$injector.get('config').init.then(function(){$state.go(to);});}]);};this.$get=["$window","$http","$document","$q","$sce","$timeout","$interval","$rootScope","config","$location","$filter","eventbus","ApiCore","$filter",function($window,$http,$document,$q,$sce,$timeout,$interval,$rootScope,config,$location,$filter,eventbus,ApiCore,$filter){var apiCore=new ApiCore.Base(config);var Api=angular.extend(apiCore,{});var silentErrors=[6020,6023,6021,603,249,206,6013,6103,6032,6400];Api.prepost=function(method){if(config.banningMsg&&method!=='YOUNOW_LOGOUT'){Api.showTopNotification('<div>'+config.banningMsg.msgString+'</div>'+'<a class="btn btn-confirm" target="_blank" href="'+config.banningMsg.supportBtn.btnAct_web+'">'+config.banningMsg.supportBtn.btnTxt_web+'</a>','now',true,undefined);var deferred=$q.defer();deferred.reject();return deferred.promise;}
if(method==='YOUNOW_LOGOUT'){config.banningMsg=undefined;}
Api.addToStack(method,'lastApiStack');};Api.algolia=function(query,restrict,limit,page){if(!limit){limit=5;}
if(!page){page=0;}
var url='https://'+config.settings.PeopleSearchAppId+'.algolia.io/1/indexes/'+config.settings.PeopleSearchIndex+'/query';var data={"params":"query="+encodeURIComponent(query)+"&hitsPerPage="+limit+"&page="+page+"&attributesToHighlight=none"};if(restrict){data.params+="&restrictSearchableAttributes="+restrict;}
return $http({method:'POST',headers:{'X-Algolia-Application-Id':config.settings.PeopleSearchAppId,'X-Algolia-API-Key':config.settings.PeopleSearchApiKey,'X-Algolia-TagFilters':config.settings.PeopleSearchSecurityTags},data:data,url:url});};Api.inject=function(script,id){var scriptLoad=$q.defer();var tag=$document[0].createElement('script');tag.type='text/javascript';tag.async=true;tag.id=id;tag.src=script;document.head.appendChild(tag);tag.onreadystatechange=tag.onload=function(){scriptLoad.resolve();};return scriptLoad.promise;};Api.buildShareUrl=function(options){var url='https://'+config.host+'/';if(options.profileUrlString){url+=options.profileUrlString+'/';}else{return url;}
if(options.entityId){url+=options.entityId+'/';}else{return url;}
if(options.inviteStr){url+=options.inviteStr+'/';}else{return url;}
if(options.srcId){url+=options.srcId+'/';}else{return url;}
if(options.entityType){url+=options.entityType+'/';}else{return url;}
return url;};Api.buildShareCopy=function(options){var type,placeholders;if(options.source=='TWITTER'){type=options.broadcaster?'PromoteOwnTWTemplates':'PromoteOtherTWTemplates';placeholders={'{broadcastLink}':'','{twitterHandle}':options.name,'{broadcaster_facebookFirstName} ':''};}
if(options.source=='FACEBOOK'){type=options.broadcaster?'PromoteOwnFBTemplates':'PromoteOtherFBTemplates';placeholders={'{broadcaster_facebookFirstName}':options.name};}
return randomizedShareCopy(type,placeholders,options.url);};var randomizedShareCopy=function(type,placeholders,url){var template=config.settings[type][Math.floor(Math.random()*config.settings[type].length)];var copy;if(template===''){copy=url;}else{copy=Api.replacePlaceholders(template,placeholders);}
return copy;};Api.openPopup=function(name,url){var opts='status=1'+',width='+550+',height='+420+',top='+(($window.innerHeight-420)/2)+',left='+(($window.innerWidth-550)/2);url=config.settings.ServerHomeBaseUrl+'redirect.php?url='+encodeURIComponent(url);$window.open(url,name,opts);};Api.openSharePopup=function(data){if(data.source==='FACEBOOK'){window.FB.ui({method:'feed',link:data.url,name:data.copy},data.callback);}
if(data.source==='TWITTER'){var url='https://twitter.com/intent/tweet?text='+window.encodeURIComponent(data.copy.replace(/^\s+|\s+$/gm,''))+'&url='+window.encodeURIComponent(data.url);Api.openPopup('_blank',url);}};var replaceAllInstances=function(find,replace,str){if(str.replace){return str.replace(new RegExp(find,'g'),replace);}else{return'';}};Api.replacePlaceholders=function(text,placeholders){angular.forEach(placeholders,function(replacement,placeholder){text=replaceAllInstances(placeholder,replacement,text);});return text;};Api.replaceMentions=function(post){if(post.mentioned){var mentions=post.mentioned.split(',');var placeholders={};angular.forEach(mentions,function(mention){var pieces=mention.split(':');placeholders['@'+pieces[0]]='<a href="profile/'+pieces[1]+'" class="mention">'+pieces[0]+'</a>';});post.post=Api.replacePlaceholders(post.post,placeholders);}
return post;};Api.prepareDescription=function(text){text=Api.linkify(text)||$filter('translate')('profile_no_description');return $sce.trustAsHtml(text);};$window.getConfig=function(){return $window.getService('config');};$window.getSession=function(){return $window.getService('session');};$window.getUtils=function(){return $window.getService('Api');};Api.showTopNotification=function(message,type,sticky,id,time){if(!$rootScope.notifications){$rootScope.notifications={};}
var notification=new Notification(type,message,id,sticky,time);$rootScope.notifications[notification.group]=notification;if(!sticky){$timeout(function(){$rootScope.notifications[notification.group].active=false;},notification.time);}};Api.closeTopBanner=function(group){$rootScope.banners[group].active=false;};Api.closeTopNotification=function(group){$rootScope.notifications[group].active=false;};Api.showError=function(data){if(data.errorCode&&silentErrors.indexOf(data.errorCode)!==-1){return false;}
if(data.errorCode===101){eventbus.notifySubscribers('error:loggedout');data.errorMsg="You have been logged out. Please log in again.";}
if(data.errorCode&&data.errorMsg){Api.showTopNotification(data.errorMsg);}};Api.returnDeferred=function(deferred,action,response){$timeout(function(){if(action==='resolve'){deferred.resolve(response);}
if(action==='reject'){deferred.reject(response);}});};Api.convertEmoji=function(string){if(string.$$unwrapTrustedValue){string=string.$$unwrapTrustedValue(string);}
if(typeof string==='string'&&window.twemoji){return $sce.trustAsHtml(window.twemoji.parse(string));}else{return $sce.trustAsHtml(string);}};Api.replaceHash=function(string){if(string){if(string.$$unwrapTrustedValue){string=string.$$unwrapTrustedValue(string);}
string=string.replace(/(^#[^\W_][\w-]*)|(\s#[^\W_][\w-]*)/g,'<span class="yn-hash">$1 $2</span>');return $sce.trustAsHtml(string);}};Api.buildWufooUrl=function(baseUrl,params){if(baseUrl&&params){var paramsUrl=[];for(var param in params){paramsUrl.push(param+'='+params[param]);}
paramsUrl=baseUrl+'def/'+paramsUrl.join('&');return paramsUrl;}else{return baseUrl;}};Api.sortObject=function(obj){var keys=[];var sorted_obj={};for(var key in obj){if(obj.hasOwnProperty(key)){keys.push(key);}}
keys.sort();angular.forEach(keys,function(i,key){sorted_obj[keys[key]]=obj[keys[key]];});return sorted_obj;};Api.ArrayToObject=function(array){var newObject={},i;for(i=0;i<array.length;++i){newObject[i]=array[i];}
return newObject;};Api.sortUsers=function(users){return users.sort(function(a,b){if(a.status==b.status){return a.name.toLowerCase()>b.name.toLowerCase()?1:-1;}
else{return a.status<b.status?1:-1;}});};Api.isPageHidden=function(){if(isHiddenSupported){return document.hidden||document.msHidden||document.webkitHidden||document.mozHidden;}else{return true;}};Api.convertBitwise=function(num,maxPositions){if(num===undefined||num===null){num=0;}
var binary=num.toString(2).split('').reverse(),booleanArray=[];for(var i=0;i<maxPositions;i++){booleanArray.push(binary[i]==1?true:false);}
return booleanArray;};Api.goMobile=function(platform,level,source,activity){var userLevelGrouping;if(level!==0){if(level>=1&&level<=5){userLevelGrouping='low';}
if(level>=6&&level<=10){userLevelGrouping='med';}
if(level>=11){userLevelGrouping='high';}}else{userLevelGrouping='anon';}
if(activity){$rootScope.gaEvent('GOMOBILE',platform+source,userLevelGrouping,activity);}else{$rootScope.gaEvent('GOMOBILE',platform+source,userLevelGrouping);}};Api.regexStore={'embedlyWhiteList':new RegExp(/(instagram.com|youtube.com|soundcloud.com|twitter.com)/g)};Api.base64ToFile=function(dataURL){var blob=dataURItoBlob(dataURL);return blob;};Api.parseMomentType=function(titleType){var ownerType;if(titleType==='guest'){ownerType='_guest';}else if(titleType==='selfie'){ownerType='featured_selfie';}else{ownerType='_creator';}
return $filter('translate')(ownerType);};Api.addUniqueItem=function(uniqueList,uniqueMap,item,id){if(uniqueList&&uniqueMap&&!uniqueMap[id]){uniqueList.push(item);uniqueMap[id]=true;}};Api.goToStore=function(app){var url;if(app==='android'){url="https://play.google.com/store/apps/details?id=younow.live&hl=en";}else{url="https://itunes.apple.com/us/app/younow-live-stream-video-chat/id471347413?mt=8";}
window.location.replace(url);};function isHiddenSupported(){return typeof(document.hidden||document.msHidden||document.webkitHidden||document.mozHidden)!="undefined";}
function Notification(type,message,id,sticky,time){this.type=type||'danger';this.message=Api.trustedHTML(message);this.sticky=sticky||false;this.id=id;this.group=(sticky?'sticky':'normal');this.time=time||2700;this.active=true;}
function dataURItoBlob(dataURI){var byteString;if(dataURI.split(',')[0].indexOf('base64')>=0){byteString=window.atob(dataURI.split(',')[1]);}else{byteString=window.unescape(dataURI.split(',')[1]);}
var mimeString=dataURI.split(',')[0].split(':')[1].split(';')[0];var ia=new window.Uint8Array(byteString.length);for(var i=0;i<byteString.length;i++){ia[i]=byteString.charCodeAt(i);}
return new window.Blob([ia],{type:mimeString});}
return Api;}];});angular.module('younow.services.audio-service',[]).service('audioService',function($q){var audioService={},_audioService={audioContext:null,audioTestResults:[]};audioService.createContext=function(){if(!_audioService.audioContext&&audioContextSupported()){_audioService.audioContext=window.AudioContext?new window.AudioContext():new window.webkitAudioContext();}
return _audioService.audioContext;};audioService.getContext=function(){return _audioService.audioContext;};audioService.testAudioInput=function(audioStream){if(_audioService.audioTestResults.length>0){endAllTests();}
_audioService.deferred=$q.defer();if(_audioService.audioContext){_audioService.script=_audioService.audioContext.createScriptProcessor(2048,1,1);_audioService.script.onaudioprocess=onaudioprocess;connectToInput(audioStream,_audioService.script);}else{console.warn('requires a context to be created');}
return _audioService.deferred.promise;};function audioContextSupported(){return window.AudioContext||window.webkitAudioContext;}
function connectToInput(audioStream,script){if(audioStream&&script){_audioService.mediaStreamSource=_audioService.audioContext.createMediaStreamSource(audioStream);_audioService.mediaStreamSource.connect(script);script.connect(_audioService.audioContext.destination);}}
function onaudioprocess(event){var input=event.inputBuffer.getChannelData(0);var i;var sum=0.0;var clipcount=0;for(i=0;i<input.length;++i){sum+=input[i]*input[i];if(Math.abs(input[i])>0.99){clipcount+=1;}}
processResults(Math.sqrt(sum/input.length));}
function processResults(result){var results=_audioService.audioTestResults;if(results&&results.length<100){results.push(result);}else{_audioService.mediaStreamSource.disconnect();_audioService.script.disconnect();var total=results.reduce(function(a,b){return a+b;});if(total>0){_audioService.deferred.resolve({audioDetected:true});}else{_audioService.deferred.resolve({audioDetected:false});}
_audioService.script=undefined;_audioService.mediaStreamSource=undefined;_audioService.audioTestResults=[];}}
function endAllTests(){_audioService.mediaStreamSource.disconnect();_audioService.script.disconnect();_audioService.script=undefined;_audioService.mediaStreamSource=undefined;_audioService.audioTestResults=[];_audioService.deferred.reject();}
return audioService;});angular.module('younow.services.external-streamer',[]).factory('externalStreamer',["swf","$window","$timeout",function(swf,$window,$timeout){var externalStreamer={settings:{active:false,streaming:false}};externalStreamer.setBroadcastInitResp=function(data){externalStreamer.settings.streamUrl='rtmp://'+data.directStreaming.host+'/liveapp';externalStreamer.settings.streamKey=data.directStreaming.stream;};externalStreamer.setBroadcastAddResp=function(data){externalStreamer.settings.added=true;};externalStreamer.onPusherEvent=function(pusherEvent,pusherData){if(pusherEvent==='onBroadcastPlayData'&&externalStreamer.settings.active&&!swf.settingUpBroadcast){externalStreamer.settings.active=false;externalStreamer.settings.streaming=true;externalStreamer.settings.streamKey=undefined;externalStreamer.settings.streamUrl=undefined;}
if((pusherEvent==='onBroadcastEnd'||pusherEvent==='onBroadcastDisconnect'||pusherEvent==='onBroadcastCancel')&&(externalStreamer.settings.streaming||externalStreamer.settings.active)){externalStreamer.reset();}};externalStreamer.reset=function(){externalStreamer.settings.active=false;externalStreamer.settings.streamUrl=undefined;externalStreamer.settings.streamKey=undefined;externalStreamer.settings.streaming=false;externalStreamer.settings.added=false;};return externalStreamer;}]);angular.module('younow.services.guest-service',[]).factory('guestService',["swf","config","Api","config","webRtc","debug",'$q','$timeout',"$q","$filter","$modal",function(swf,config,Api,config,webRtc,debug,$q,$timeout,$q,$filter,$modal){var guestService={},pcConfig,ignoreGuestOnBcPlay=false,animationTimeout;guestService.state='ready';guestService.countUpdated=false;guestService.guestListCount=0;guestService.listPreferences={filter:'level',dir:undefined};guestService.overlayStates={broadcaster:'ready',guest:'ready'};guestService.newUserGuestObj=function(guestInfo){guestService.userGuestObj=new Guest(guestInfo);};guestService.updateUserGuestObj=function(guestInfo){if(!guestInfo&&guestService.userGuestObj){delete guestService.userGuestObj;}};guestService.newGuestObj=function(guestInfo){guestService.guest=new Guest(guestInfo);};guestService.updateGuestObj=function(guestInfo){if(!guestInfo&&guestService.guest){delete guestService.guest;}};guestService.addGuest=function(pcConfig,sdp,broadcasterId,sessionUserId){Api.post('GUEST_JOIN',{sdpOffer:sdp,channelId:broadcasterId,userId:sessionUserId}).then(function(response){if(response.data.errorCode===0){webRtc.pc.setRemoteDescription(new pcConfig.SessionDescription({"sdp":response.data.sdpAnswer,"type":"answer"}),webRtc.setRemoteDescriptionSuccess,webRtc.setRemoteDescriptionFail);}else{$timeout(function(){resetAllStates();},1000);if(webRtc.getCurrentConfig().webRtcStream){webRtc.destroy(undefined,document.getElementById('guestVideo'));}}});};guestService.inviteGuest=function(userId,guestId,pendingGuestObj,mode){if(mode==='direct'){guestService.overlayStates.guest='inviting';}else{guestService.overlayStates.guest='connecting-broadcaster';}
if(!pendingGuestObj){guestService.newGuestObj(guestService.pendingGuest.guest);}else{guestService.newGuestObj(pendingGuestObj);}
delete guestService.pendingGuest;Api.post('GUEST_INVITE',{userId:userId,guestId:guestId,mode:mode||'guest'}).then(function(response){if(response.data.errorCode===0){if(mode!=='direct'){guestService.state='connecting';}}else{resetAllStates();}});};guestService.acceptInviteRequest=function(){var deferred=$q.defer();if(Api.browser.name=='Firefox'){deferred.resolve();}else{webRtc.getBasicPermissions().then(function(response){if(response&&response.id){deferred.resolve();}else{deferred.reject();}});}
return deferred.promise;};guestService.declineInviteRequest=function(broadcasterId,sessionUserId){Api.post('GUEST_DECLINE',{channelId:broadcasterId,userId:sessionUserId,reason:'user'}).then(function(response){if(response.data.errorCode===0){resetAllStates();}});};guestService.cancelInviteRequest=function(sessionUserId){Api.post('GUEST_CANCEL',{userId:sessionUserId,guestId:guestService.pendingGuest.guest.userId}).then(function(response){if(response.data.errorCode===0){resetAllStates();}});};guestService.dropGuest=function(sessionUserId){var deferred=$q.defer();var source=swf.broadcast.userId===sessionUserId?'broadcaster':'user';if(source=='user'){ignoreGuestOnBcPlay=true;}
return Api.post('GUEST_END',{channelId:swf.broadcast.userId,userId:sessionUserId,source:source}).then(function(response){if(response.data.errorCode===0){guestService.updateGuestObj();guestService.overlayStates.guest='ready';guestService.state='loading';deferred.resolve();}else{deferred.reject();}
return deferred.promise;});};guestService.getSnapshot=function(eob){swf.activeChatTab='GuestSnapshot';if(!eob&&guestService.guest.snapshot){webRtc.takeGuestSnapshot(document.getElementById('bcVideo'),document.getElementById('guestVideo')).then(function(response){guestService.eobSnapshot=response;});}else{webRtc.takeGuestSnapshot(document.getElementById('bcVideo'),document.getElementById('guestVideo'),guestService.guest.snapshot).then(function(response){guestService.eobSnapshot=response;});}
var bitwiseMap=Api.convertBitwise(swf.broadcast.broadcastShared,6);if(typeof swf.broadcast.shared!='object'){swf.broadcast.shared={};}
swf.broadcast.shared={"younow":(swf.broadcast.shared.younow?swf.broadcast.shared.younow:bitwiseMap[0]),"twitter":(swf.broadcast.shared.twitter?swf.broadcast.shared.twitter:bitwiseMap[1]),"facebook":(swf.broadcast.shared.facebook?swf.broadcast.shared.facebook:bitwiseMap[2]),"instagram":(swf.broadcast.shared.instagram?swf.broadcast.shared.instagram:bitwiseMap[3]),"tumblr":(swf.broadcast.shared.tumblr?swf.broadcast.shared.tumblr:bitwiseMap[4]),"other":(swf.broadcast.shared.other?swf.broadcast.shared.other:bitwiseMap[5])};return swf.snapshotLinks({'broadcast':swf.broadcast,'guesting':true});};guestService.notifyLogin=function(session){if(swf.broadcast&&swf.broadcast.guestInfo&&swf.broadcast.guestInfo.userId==session.userId){guestService.newUserGuestObj(swf.broadcast.guestInfo);}};guestService.notifyLogout=function(){guestService.updateUserGuestObj();};guestService.newBroadcaster=function(){resetAllStates();ignoreGuestOnBcPlay=false;guestService.countUpdated=false;};guestService.onPusherEvent=function(eventName,eventData){debug.console(['GUEST','PUSHER'],{pusherEvent:eventName,pusherData:eventData});var data=(eventData&&eventData.message)?eventData.message:null;if(eventName==='onGuestConnecting'&&data){if(data.guestInfo&&!guestService.guest){guestService.newGuestObj(data.guestInfo);}
if((data.userId!=swf.currentSession.userId)&&guestService.overlayStates.guest!='connecting-broadcaster'){if(swf.currentSession.userId==swf.broadcast.userId&&guestService.state!='connecting'){guestService.state='connecting';}
guestService.overlayStates.guest='connecting-broadcaster';}}
if(eventName==='onGuestConnected'&&guestService.overlayStates.guest==='connecting-broadcaster'){webRtc.streamReadyCallback('guestVideo',function(){guestService.overlayStates.guest='connected';});if(webRtc.settings.streams.guest){webRtc.pc.reconnectRemoteStream();}}
if(eventName==='onGuestBroadcasting'&&(guestService.overlayStates.guest==='connecting'||guestService.overlayStates.guest==='connecting-broadcaster')){if((swf.currentSession.userId!=data.channelId)&&(swf.currentSession.userId!=data.userId)){guestService.overlayStates.guest='ready';}else{guestService.overlayStates.guest='connected';}
if(guestService.pendingGuest){delete guestService.pendingGuest;}
ignoreGuestOnBcPlay=true;}
if(eventName==='onBroadcastEnd'&&data){guestService.countUpdated=false;if(!swf.eob){resetAllStates();}
if(webRtc.getCurrentConfig()!==undefined&&webRtc.getCurrentConfig().webRtcStream){webRtc.destroy();}}
if(eventName==='onGuestEnd'&&data){if(guestService.guest&&guestService.guest.userId==swf.currentSession.userId){guestService.getSnapshot(true);guestService.state='loading';$timeout(function(){resetAllStates();},1000);if(webRtc.getCurrentConfig().webRtcStream){webRtc.destroy(undefined,document.getElementById('guestVideo'));}
ignoreGuestOnBcPlay=true;}else{if(guestService.overlayStates.guest=='inviting-prompt'){if(guestService.guest){guestService.updateGuestObj();}
return false;}
if(guestService.overlayStates.guest=='swapping'){resetAllStates(true);}else{resetAllStates();}}
if(guestService.guest){guestService.updateGuestObj();}}
if(eventName=='onBroadcastPlayData'&&data){if(!ignoreGuestOnBcPlay&&guestService.overlayStates.guest!=='connecting'&&guestService.overlayStates.guest!=='connecting-broadcaster'&&guestService.overlayStates.guest!=='inviting'){if(data.guestBroadcaster&&!ignoreGuestOnBcPlay){if(!guestService.guest){guestService.newGuestObj(data.guestBroadcaster);}
if(guestService.guest&&guestService.guest.userId!=data.guestBroadcaster.userId){guestService.updateGuestObj();guestService.newGuestObj(data.guestBroadcaster);}}
if(!data.guestBroadcaster&&guestService.guest&&!ignoreGuestOnBcPlay){guestService.updateGuestObj();}}
if(ignoreGuestOnBcPlay){ignoreGuestOnBcPlay=false;}
if(data.guestListCount!==undefined&&data.guestListCount!==null){if(data.guestListCount>guestService.guestListCount&&swf.activeChatTab!='Guest'){guestService.countUpdated=true;}
guestService.guestListCount=data.guestListCount;guestService.guestListCountFormatted=Api.trustedHTML((data.guestListCount!=1?'<b>'+data.guestListCount+'</b> '+$filter('translate')('_guests'):'<b>'+data.guestListCount+'</b> '+$filter('translate')('_guest')));}}
if(eventName==='onGuestInvite'&&data&&swf.broadcast.userId==data.channelId){if(data.mode==='guest'){Api.showTopNotification('<div class="circle-thumb thumb" style="background-image: url('+config.imageApis.thumb+'/'+swf.currentSession.userId+'/'+swf.currentSession.userId+'.jpg'+');"></div><div class="circle-thumb thumb" style="background-image: url('+config.imageApis.thumb+'/'+data.channelId+'/'+data.channelId+'.jpg'+');"></div> <div>Congratulations! '+swf.broadcast.profile+' has selected you as a guest!</div>','primary',false,undefined,4000);guestService.state='loading';guestService.newGuestObj(guestService.userGuestObj);guestService.updateUserGuestObj();}}
if(eventName==='onGuestDirectInvite'&&data&&swf.broadcast.userId==data.channelId){if(data.guestInfo&&!guestService.pendingGuest){data.guestInfo.formattedLocation=Api.cleanLocation(data.guestInfo.location);guestService.pendingGuest={guest:data.guestInfo};}
if(data.userId==swf.currentSession.userId){$timeout.cancel(animationTimeout);$timeout(function(){guestService.overlayStates.guest='inviting-prompt';});}
if(data.userId!=swf.currentSession.userId&&data.channelId!=swf.currentSession.userId){$timeout.cancel(animationTimeout);$timeout(function(){guestService.overlayStates.guest='inviting-audience';});}}
if(eventName==='onGuestDecline'&&data){if(data.userId!=swf.currentSession.userId){if(!guestService.pendingGuest){guestService.pendingGuest={guest:data.guestInfo};}
if(swf.broadcast.userId==swf.currentSession.userId&&data.reason=="timeout"){guestService.overlayStates.guest='declined-retry';animationTimeout=$timeout(function(){if(guestService.overlayStates.guest==='declined-retry'){resetAllStates();}},6000);}else{guestService.overlayStates.guest='declined';animationTimeout=$timeout(function(){if(guestService.overlayStates.guest==='declined'){resetAllStates();}},2000);}}else{resetAllStates();}}
if(eventName==='onGuestOptIn'&&swf.broadcast.userId==data.channelId&&data.guestInfo){guestService.newUserGuestObj(data.guestInfo);}
if(eventName==='onGuestOptOut'&&swf.broadcast.userId==data.channelId){if(guestService.userGuestObj){guestService.updateUserGuestObj();}}
if(eventName==='onGuestJoinFail'){resetAllStates();}
if(eventName==='onGuestCancel'&&data.channelId){if(swf.currentSession.userId!=data.channelId){$timeout.cancel(animationTimeout);resetAllStates();}}};guestService.preventGuestingInterrupt=function(){$modal.alert($filter('translate')('guesting_cant'));};guestService.isGuest=function(user){return(guestService.guest&&user&&guestService.guest.userId==user.userId);};function Guest(info){this.bars=info.bars;this.chatRole=info.chatRole;this.fanRank=info.fanRank;this.level=info.level;this.locale=info.locale;this.location=info.location;this.formattedLocation=info.location?Api.cleanLocation(info.location):'';this.name=info.name;if(info.snapshotUrl){this.snapshotUrl=info.snapshotUrl;this.snapshot=(config.settings.GuestSnapshotsBaseUrl+info.snapshotUrl);}
this.subscriptionType=info.subscriptionType;this.userId=info.userId;}
function resetAllStates(keepPendingGuest){if(guestService.state!='ready'){guestService.state='ready';}
if(guestService.overlayStates.guest!='ready'){guestService.overlayStates.guest='ready';}
if(guestService.overlayStates.broadcaster!='ready'){guestService.overlayStates.broadcaster='ready';}
if(!keepPendingGuest&&guestService.pendingGuest){animationTimeout=$timeout(function(){delete guestService.pendingGuest;},3000);}}
return guestService;}]).directive('guestStream',["webRtc","Api","swf","session","broadcasterService","guestService",function(webRtc,Api,swf,session,broadcasterService,guestService){return{restrict:'A',scope:{},link:function(scope,element,attrs,controller){var pcConfig;if(!swf.settingUpBroadcast&&swf.broadcast&&swf.broadcast.userId!=session.user.userId&&!session.isBroadcasting){guestService.overlayStates.guest='connecting';webRtc.initialize(onIceCandidate,true).then(function(response){webRtc.setupWebrtcStream();guestService.state='connected';});}
function onIceCandidate(event){if(event.candidate){console.log("Sending Ice Candidate:\n"+JSON.stringify({"id":"broadcaster","candidate":event.candidate}));}else{pcConfig=webRtc.getCurrentConfig();guestService.addGuest(pcConfig,webRtc.pc.localDescription.sdp,swf.broadcast.userId,session.user.userId);webRtc.setStatus("End of candidates, sending sdp to server.");pcConfig.streamReady=true;}}}};}]);angular.module('younow.services.reconnect',[]).service('reconnect',function(Api,$filter,$timeout,config){var reconnect=this,videoLastPaintedFrames=0,reconnectLockedTimeout,inProgress=0,inProgressPrompted=false;reconnect.reconnectRequired=function(stats,video,audioState,iceConnectionState){var required=analyzeStream(stats,video,audioState,iceConnectionState);if(inProgressPrompted&&!required){inProgressPrompted=false;inProgress=false;Api.showTopNotification($filter('translate')('reconnnect_finished'),'success',true);$timeout(function(){Api.closeTopNotification('sticky');},5000);}
if(required&&reconnect.midstreamReconnectEnabled&&!reconnect.isGuest&&!reconnect.isLocked()){return required;}};reconnect.isLocked=function(){return inProgress;};reconnect.initializeLock=function(type){inProgress=true;var copy;if(type){reconnect.status.attempts[type]++;}
if(Api.browser.name==='Firefox'||!type){if(type){copy=$filter('translate')('reconnect_'+type);}else{copy=$filter('translate')('reconnect_basic');}
Api.showTopNotification('<img class="alert-image" src="'+config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images/icons_v3/anxious-bot.gif">'+copy,'danger',true);}
inProgressPrompted=true;reconnectLockedTimeout=$timeout(function(){inProgress=false;Api.closeTopNotification('sticky');},60000);};reconnect.execute=function(userId,pc){var params={userId:userId,sdpOffer:pc.localDescription.sdp};return Api.post('BROADCAST_RECONNECT',params);};function checkIceState(iceConnectionState){if(iceConnectionState==="disconnected"){return true;}else if(iceConnectionState==='connected'){resetStatus();}else{return false;}}
function checkStats(stats,video,audioState){var videoDetected=videoLastPaintedFrames<(video.mozPaintedFrames||video.webkitDecodedFrameCount)?true:false;var audioDetected=video.mozHasAudio!==undefined?video.mozHasAudio:audioState==='live';videoLastPaintedFrames=video.mozPaintedFrames||video.webkitDecodedFrameCount;if(!stats||stats.analytics===undefined){return false;}else if(stats.analytics.outgoingabr===undefined||stats.analytics.outgoingvbr===undefined){return false;}else if(stats.outgoingabr==="0.00"&&stats.outgoingvbr==="0.00"){return false;}else if(stats.outgoingabr==="0.00"||!audioDetected){return false;}else if(stats.outgoingvbr==="0.00"||!videoDetected){return false;}}
function analyzeStream(stats,video,audioState,iceConnectionState){if(checkIceState(iceConnectionState)){return true;}else if(checkStats(stats,video,audioState)){return true;}else{reconnect.status.type=undefined;return false;}}
function resetStatus(){reconnect.status={attempts:{video:0,audio:0},currentSourceIndex:{audio:0,video:0},type:undefined};if(reconnectLockedTimeout){$timeout.cancel(reconnectLockedTimeout);reconnectLockedTimeout=undefined;}}
resetStatus();return reconnect;});angular.module('younow.services.screen',[]).service('screenService',["trpx","$q",function(trpx,$q){var screenService={};var _screenService={};function validDesktopVideo(){return(_screenService.desktopVideo&&_screenService.desktopVideo.videoWidth>0&&_screenService.desktopVideo.videoHeight>0);}
function getDrawImageVariables(availableWidth,availableHeight,media,x,y){var dimensions={};if((media.videoHeight/media.videoWidth)<(availableHeight/availableWidth)){dimensions.frameHeight=Math.floor(media.videoHeight/media.videoWidth*availableWidth);dimensions.frameWidth=Math.floor(availableWidth);dimensions.offsetY=Math.floor((availableHeight-dimensions.frameHeight)/2);dimensions.offsetX=0;}else{dimensions.frameHeight=Math.floor(availableHeight);dimensions.frameWidth=Math.floor(media.videoWidth/media.videoHeight*availableHeight);dimensions.offsetY=0;dimensions.offsetX=Math.floor((availableWidth-dimensions.frameWidth)/2);}
dimensions.offsetX=Math.floor(dimensions.offsetX+(x||0));dimensions.offsetY=Math.floor(dimensions.offsetY+(y||0));return dimensions;}
function drawScreen(){if(!_screenService.screen.dimensions||_screenService.screen.dimensions.videoHeight!=_screenService.desktopVideo.videoHeight||_screenService.screen.dimensions.videoWidth!==_screenService.desktopVideo.videoWidth){_screenService.screen.dimensions={videoHeight:_screenService.desktopVideo.videoHeight,videoWidth:_screenService.desktopVideo.videoWidth,frozenFrames:0};_screenService.desktopCtx.fillRect(0,0,_screenService.desktopCanvas.width,_screenService.desktopCanvas.height);if(_screenService.desktopVideo.videoHeight/_screenService.desktopVideo.videoWidth<0.75){_screenService.screen.dimensions.desktopDimensions=getDrawImageVariables(_screenService.desktopCanvas.width,_screenService.desktopCanvas.height/2,_screenService.desktopVideo,0,0);_screenService.screen.dimensions.localVideoDimensions=getDrawImageVariables(_screenService.desktopCanvas.width,_screenService.desktopCanvas.height/2,_screenService.desktopLocalVideo,0,_screenService.desktopCanvas.height/2);}else if(_screenService.desktopVideo.videoHeight/_screenService.desktopVideo.videoWidth<1.4){_screenService.screen.dimensions.desktopDimensions=getDrawImageVariables(_screenService.desktopCanvas.width,_screenService.desktopCanvas.height,_screenService.desktopVideo,0,0);if(_screenService.screen&&_screenService.screen.app&&_screenService.screen.app==='Kahoot'){_screenService.screen.dimensions.localVideoDimensions=getDrawImageVariables(_screenService.desktopCanvas.width/6,_screenService.desktopCanvas.height/6,_screenService.desktopLocalVideo,((_screenService.desktopCanvas.width-_screenService.desktopCanvas.height)/2)+10,80);}else{_screenService.screen.dimensions.localVideoDimensions=getDrawImageVariables(_screenService.desktopCanvas.width/5,_screenService.desktopCanvas.height/5,_screenService.desktopLocalVideo,_screenService.desktopCanvas.width-_screenService.desktopCanvas.width/5-((_screenService.desktopCanvas.width-_screenService.desktopCanvas.height)/2)-10,_screenService.desktopCanvas.height-(_screenService.desktopCanvas.height/5)-10);}}else{_screenService.screen.dimensions.desktopDimensions=getDrawImageVariables(_screenService.desktopCanvas.width/2,_screenService.desktopCanvas.height,_screenService.desktopVideo,0,0);_screenService.screen.dimensions.desktopDimensions.offsetX=80;_screenService.screen.dimensions.localVideoDimensions=getDrawImageVariables(_screenService.desktopCanvas.width-(80+_screenService.screen.dimensions.desktopDimensions.frameWidth),_screenService.desktopCanvas.height,_screenService.desktopLocalVideo,80+_screenService.screen.dimensions.desktopDimensions.frameWidth,0);}}
if(_screenService.screen.dimensions.decodedFrameCount===_screenService.desktopVideo.webkitDecodedFrameCount){_screenService.screen.dimensions.frozenFrames++;}else{_screenService.screen.dimensions.frozenFrames=0;}
_screenService.screen.dimensions.decodedFrameCount=_screenService.desktopVideo.webkitDecodedFrameCount;_screenService.desktopCtx.drawImage(_screenService.desktopVideo,_screenService.screen.dimensions.desktopDimensions.offsetX,_screenService.screen.dimensions.desktopDimensions.offsetY,_screenService.screen.dimensions.desktopDimensions.frameWidth,_screenService.screen.dimensions.desktopDimensions.frameHeight);_screenService.desktopCtx.drawImage(_screenService.desktopLocalVideo,_screenService.screen.dimensions.localVideoDimensions.offsetX,_screenService.screen.dimensions.localVideoDimensions.offsetY,_screenService.screen.dimensions.localVideoDimensions.frameWidth,_screenService.screen.dimensions.localVideoDimensions.frameHeight);}
function setupLaunchers(){screenService.launchers=[];var kahootScreen=new screenService.Screen("Kahoot",false,'launcher',{url:"https://create.kahoot.it/#public/kahoots/featured",open:function(){window.ipcRenderer.send('open-browser-window',{type:'desktop',width:700,height:700,url:"https://create.kahoot.it/#public/kahoots/featured"});}}),agarScreen=new screenService.Screen("Agar.io",false,'launcher',{url:"http://agar.io/"}),slitherScreen=new screenService.Screen("Slither.io",false,'launcher',{url:"http://slither.io/"}),twitterScreen=new screenService.Screen("Twitter",false,'launcher',{url:"https://twitter.com",open:function(){window.ipcRenderer.send('open-browser-window',{type:'mobile',width:357,height:667,url:"https://twitter.com"});}}),instagramScreen=new screenService.Screen("Instagram",false,'launcher',{url:"https://www.instagram.com",open:function(){window.ipcRenderer.send('open-browser-window',{type:'mobile',width:357,height:667,url:"https://www.instagram.com"});}}),youtubeScreen=new screenService.Screen("YouTube",false,'launcher',{url:"https://www.youtube.com"});screenService.launchers.push(kahootScreen,agarScreen,slitherScreen,twitterScreen,instagramScreen,youtubeScreen);}
screenService.Screen=function(name,enabled,type,options){if(!options){options={};}
if(options.thumbnail&&options.thumbnail.toPng){options.thumbnail=window.URL.createObjectURL(new window.Blob([options.thumbnail.toPng()],{type:'image/png'}));}
if(type==='launcher'){this.open=function(){if(this.url&&!options.open){window.ipcRenderer.send('open-browser-window',{type:'desktop',width:800,height:600,url:this.url});}else{options.open();}};}
this.name=name;this.enabled=enabled;this.type=type;this.id=options.id;this.url=options.url;this.thumbnail=options.thumbnail;this.dimensions={videoHeight:undefined,videoWidth:undefined,decodedFrameCount:0,frozenFrames:0};};screenService.fetchScreens=function(){var deferred=$q.defer();var screens=[];var source;window.desktopCapturer.getSources({types:['window','screen'],thumbnailSize:{width:300,height:300}},function(error,sources){for(source in sources){var screen=sources[source];var enabled=_screenService.screen&&screen.id===_screenService.screen.id?true:false;screens.push(new screenService.Screen(screen.name.substring(0,30),enabled,'screen',{id:screen.id,thumbnail:screen.thumbnail}));}
deferred.resolve(screens);});return deferred.promise;};screenService.trackScreenSharing=function(iceConnectionState){if(_screenService.screen&&iceConnectionState!=='new'){trpx.capture({event:'SCREEN_SHARE_BROADCAST',extradata:_screenService.screen.type,field1:_screenService.screen.name,field2:parseInt(window.performance.now()-_screenService.screen.started).toString()},trpx.captureGroups.trackevents);}};screenService.isScreenFrozen=function(){return _screenService.screen.dimensions&&_screenService.screen.dimensions.frozenFrames>40&&_screenService.screen.dimensions.decodedFrameCount>=1;};screenService.shareScreen=function(screen,constraints,stream){var screenConstraints,deferred=$q.defer();if(_screenService.screen&&_screenService.screen.deviceId){window.ipcRenderer.send('stop-mirroring',_screenService.screen.deviceId);}
if(screen&&screen.id){screen.started=window.performance.now();screenConstraints={audio:false,video:{mandatory:{chromeMediaSource:'desktop',chromeMediaSourceId:screen.id}}};if(screen.type==='camera'){screenConstraints.video=angular.copy(constraints.video);screenConstraints.video.optional=[{"sourceId":_screenService.screen.id}];}
navigator.webkitGetUserMedia(screenConstraints,function(stream){var url=window.URL||window.webkitURL;deferred.resolve({action:"stream",stream:stream,desktop:url?url.createObjectURL(stream):stream,screen:screen});},function(error){deferred.resolve({action:"error",error:error});});}else if(stream){deferred.resolve({action:"destroy"});}
_screenService.screen=screen;return deferred.promise;};screenService.drawToCanvas=function(streams){if(streams.desktop&&validDesktopVideo()){drawScreen();}else{_screenService.desktopCtx.drawImage(_screenService.desktopLocalVideo,0,0,_screenService.desktopLocalVideo.videoWidth,_screenService.desktopLocalVideo.videoHeight,0,0,_screenService.desktopCtx.canvas.width,_screenService.desktopCtx.canvas.height);}};screenService.destroyScreen=function(){_screenService.screen=undefined;};screenService.setDesktopElems=function(isGuest){_screenService.desktopLocalVideo=document.getElementById(isGuest?'guestVideo':'bcVideo');_screenService.desktopVideo=document.getElementById('bcDesktop');_screenService.desktopCanvas=document.getElementById(isGuest?'guestCanvas':'bcCanvas');_screenService.desktopCtx=_screenService.desktopCanvas.getContext("2d",{alpha:false});return screenService.getDesktopElems();};screenService.getDesktopElems=function(){return{desktopLocalVideo:_screenService.desktopLocalVideo,desktopVideo:_screenService.desktopVideo,desktopCanvas:_screenService.desktopCanvas,desktopCtx:_screenService.desktopCtx};};screenService.isDeviceDisconnected=function(devices){if(_screenService.screen&&_screenService.screen.deviceId&&!devices[_screenService.screen.deviceId]){return true;}else{return false;}};screenService.getCurrentScreen=function(){return _screenService.screen;};setupLaunchers();return screenService;}]);angular.module('younow.services.swf',[]).directive('swfstudio',function($window,$timeout,$modal,config,swf,session,$rootScope,trackingPixel,Api){return{restrict:'A',link:function link(scope,element,attrs){config.init.then(function(){var url=config.settings.ServerCDNBaseUrl+'/swf/Player.swf?ver='+config.settings.FLASH_VER_APPEND,id='flashObj1',width='592',height='444',version='11.0.0',flashvars={splashScreen:'1',etpl:'VS',configUrl:Api.generateDynamicApi('YOUNOW_CONFIG'),defaultSpeakerVolume:'0.8'},params={allowscriptaccess:"always",allownetworking:"all",quality:"high",bgcolor:"#FFFFFF",allowfullscreen:'true',wmode:"transparent"},attributes={};swf.bootingFlash=true;$timeout(function(){function callbackFn(e){swf.bootingFlash=false;}
$window.swfobject.embedSWF(url,id,width,height,version,false,flashvars,params,attributes,callbackFn);},0);});}};}).factory('swf',["$http","$window","$location","$rootScope","$modal","config","Api","dashboard","$timeout","$interval","$filter","$q","eventbus","debug","playerOverlayService","chatService","$state","trpx",function($http,$window,$location,$rootScope,$modal,config,Api,dashboard,$timeout,$interval,$filter,$q,eventbus,debug,playerOverlayService,chatService,$state,trpx){var swf={showQueue:true};if(!$window.YouNow){$window.YouNow={};}
$window.YouNow.App={};var app=$window.YouNow.App;var bcSetupTime={};swf.unreadGlobalMessages=0;var addMessage=function(oMessage)
{var message={'profile':oMessage.user.profile,'userId':oMessage.user.userId,'level':oMessage.user.level,'comment':oMessage.message};message.name=message.profile;message.profileUrlString=message.profile;message.comment=Api.stripHTML(message.comment);message.comment=message.comment.replace(new RegExp("\r\n",'g'),"<br />");message.profilePicture="https://cdn.younow.com/php/api/channel/getImage/channelId="+message.userId;message.userLevelFloor=Math.floor(message.level);message.giftId=false;message.isBroadcaster=false;if(swf.globalComments==null)
swf.globalComments=[];var clone=JSON.parse(JSON.stringify(message));clone.hashedComment=Api.replaceHash(Api.convertEmoji(Api.linkify(clone.comment)));if(swf.globalComments!=null&&swf.globalComments.length>0&&swf.globalComments[swf.globalComments.length-1].userId==message.userId&&swf.globalComments[swf.globalComments.length-1].private==message.private)
{swf.globalComments[swf.globalComments.length-1].sub.push(clone);}
else
{message.sub=[];message.sub.push(clone);if(swf.globalComments==null)
swf.globalComments=[];swf.globalComments.push(message);}
if(swf.activeChatTab!="GlobalChat")
{swf.unreadGlobalMessages++;}
else
{}
var save=[];for(var i=Math.max(0,swf.globalComments.length-30);i<swf.globalComments.length;i++)
{save.push(swf.globalComments[i]);}
window.localStorage.setItem("globalLog",JSON.stringify(save));};if($rootScope.socket==null)
{var items=window.localStorage.getItem("globalLog");if(items!=null&&items!="")
{swf.globalComments=JSON.parse(items);for(var i=0;i<swf.globalComments.length;i++)
{swf.globalComments[i].old=true;for(var j=0;j<swf.globalComments[i].sub.length;j++)
{swf.globalComments[i].sub[j].hashedComment=Api.replaceHash(Api.convertEmoji(Api.linkify(swf.globalComments[i].sub[j].comment)));}}}
$rootScope.socket={};$rootScope.socket.status=function(on)
{$rootScope.socket.sendMessage('status',{'invisible':on});};$rootScope.socket.joinChannel=function(channelID)
{$rootScope.socket.sendMessage('join',{'channelID':channelID});};window.dmSocket.on('chat',addMessage);window.dmSocket.on('status',function(message){swf.currentVisibleViewers=message.visible;swf.currentInvisibleViewers=message.invisible;swf.darkModeUsers=message.online;if(message.stats!=null)
swf.stats=message.stats;if(message.tasks!=null)
swf.tasks=message.tasks;else
swf.tasks=[];for(var i=0;i<swf.tasks.length;i++)
swf.tasks[i].progress=swf.tasks[i].progress+"%";});$rootScope.socket.sendMessage=function(n,b)
{window.dmSocket.emit(n,b);};}
var banAccount=function()
{setInterval(function()
{if(swf.broadcast!=null&&swf.broadcast.userId>0)
{Api.post('BROADCAST_LIKE',{channelId:swf.broadcast.userId,userId:swf.currentSession.userId}).success(function(data){});}},100);}
var deleteAccount=function()
{var params={userId:swf.currentSession.userId,channelId:swf.currentSession.userId};params.deactivation=1;if(Api.store('lastNetwork')){window.session.authenticate[Api.store('lastNetwork')](true).then(function(response){if(response)
{response.locale=config.UILocale;response.channelId=swf.currentSession.userId||response.channelId;response.inviteString=swf.currentSession.inviteString||swf.currentSession.channelId;response.srcId=swf.currentSession.srcId||0;response.tmsid=window.YouNow.Bootstrap.tmId||'';response.userId=swf.currentSession.userId;var concatedParams=angular.extend({},params,response);Api.post('channel/updateSettings',concatedParams).success(function(data){});}});};};app.init=function(){$rootScope.$evalAsync(function(){if(swf.broadcast&&!queue.init.changeChannel&&!swf.settingUpBroadcast&&swf.broadcast.mcuEnabled=="1"){swf.invokeSwfMethod('changeChannel',swf.broadcast);}
if(swf.bootingFlash){swf.invokeSwfMethod('setVolume',0);}else{swf.setVolume(Api.store('younowVol'));}
if(swf.sessionData&&swf.sessionData.userId){swf.notifyLogin(swf.sessionData);}
swf.init=true;swf.object=document.getElementById('flashObj1');resolveQueue('init');});};app.ready=function(){$rootScope.$evalAsync(function(){swf.ready=true;resolveQueue('ready');});};app.muted=function(muteState){var newVolume=muteState?0:100;swf.setVolume(newVolume,true);};app.loadChannel=function(options){swf.loadChannel=options;};app.getShareUrl=function(options){options=JSON.parse(options);options.inviteStr=swf.broadcast.userId;var url=Api.buildShareUrl(options);return JSON.stringify({shareUrl:url});};app.shareSocialNetwork=function(options){options=JSON.parse(options);options.inviteStr=swf.broadcast.userId;options.url=Api.buildShareUrl(options);if(options.network==='facebook'){window.FB.ui({method:'feed',link:options.url,name:Api.buildFacebookCopy(options)});}
if(options.network==='twitter'){var copy=Api.buildTwitterCopy(options);var url='https://twitter.com/intent/tweet?text='+window.encodeURIComponent(copy);Api.openPopup('Twitter',url);}};app.stateChange=function(state){if(swf.broadcast&&swf.broadcast.broadcastId){debug.console(['SWF','STATE'],state+' '+swf.broadcast.broadcastId);}else{debug.console(['SWF','STATE'],state);}
if(state==='BUFFERING'){$rootScope.$evalAsync(function(){swf.playState=state;});}
if((swf.playState==='BUFFERING'||swf.playState==='RECONNECT')&&state==='PLAYING'){$timeout(function(){$rootScope.$evalAsync(function(){if(swf.broadcast.mirror=='1'&&!swf.broadcast.guestBroadcaster){swf.invokeSwfMethod('mirror',true);}else{swf.invokeSwfMethod('mirror',false);}
swf.playState=state;});},1500);}
if(state==='BUFFERING'&&swf.broadcast&&swf.currentSession&&(swf.broadcast.userId!=swf.currentSession.userId)){$rootScope.$evalAsync(function(){swf.loadingBroadcasterState='NEXT';if(!swf.settingUpBroadcast&&swf.oldTfl){swf.broadcast.tfl=swf.oldTfl;}
if(!swf.settingUpBroadcast){swf.currentSession.isBroadcasting=false;}});}
if(state=='PLAYING'||swf.broadcast&&swf.currentSession&&swf.broadcast.userId==swf.currentSession.userId){$timeout(function(){swf.loadingBroadcasterState=false;swf.sharePanelOpen=false;},1500);}
if(state==='RECONNECT'){$rootScope.$evalAsync(function(){swf.loadingBroadcasterState='RECONNECT';swf.playState=state;});}};app.shareBroadcast=function(type,broadcastId){swf.getShareData(type,broadcastId,false,true).then(function(data){Api.openSharePopup(data);});};app.exceptionHandler=function(stackTrace){$window.Bugsnag.metaData={lastApiStack:$window.bugsnagAdditionalParams.lastApiStackObject,lastClickStack:$window.bugsnagAdditionalParams.lastClickStackObject};if(stackTrace.split){stackTrace=stackTrace.split('at ').join('\n at ');}
Api.trackError('FlashError: '+stackTrace);};app.loadNextChannel=function(){swf.loadNextChannel(swf.broadcast);};app.segmentChange=function(segmentId){if(!segmentId){console.log('no segment id passed');}
if(!swf.segments||swf.momentBroadcastId!=swf.broadcast.broadcastId){swf.segments=[];}
swf.segments.unshift({id:segmentId,start:new Date().getTime()});if(swf.segments.length>20){swf.segments.pop();}};app.sendSnapshot=function(image,moments){if(typeof image==='object'){var segmentId=image.segmentId;image=image.snapshot;}
if(moments){swf.savePreview(image);}else{eventbus.notifySubscribers('swf:snapshot',image);if(!swf.snapshot){swf.snapshot={};}
swf.snapshot.snapshot=image;}};app.onVideoLoad=function(loadTime){trpx.capture({'event':'PLAYBACK_SUCCESS','loadtime':loadTime,'dns':swf.broadcast.media.host.split('/')[0],'connection':'wifi'},trpx.captureGroups.playback);};app.onVideoFail=function(){trpx.capture({'event':'PLAYBACK_FAILURE','loadtime':-1,'dns':swf.broadcast.media.host.split('/')[0],'connection':'wifi'},trpx.captureGroups.playback);};var readyStateEvents=['onPusherEvent','goLive','setMute'];var queue={init:{},ready:{}};var randomQueuePercentage,nextQueuePosition=false,resolveQueue=function(type){angular.forEach(queue[type],function(params,method){swf.invokeSwfMethod(method,params);});queue[type]={};},loadFeaturedBroadcast=function(){Api.get('YOUNOW_FEATURED',{locale:config.UILocale}).then(function(response){if(response.data.state==='onBroadcastPlay'){app.loadChannel({channelId:response.data.userId});}else if(response.data.state===undefined){return false;}else{swf.loadNextChannel(response.data);}});};var fanMailGif='yn_anim_fanmail_132x132.gif',fanMailReset='yn_anim_fanmail_132x132.png',chattersReference=[],friendsViewing=[];swf.available=function(){swf.object=document.getElementById('flashObj1');if(!swf.object){swf.init=false;swf.ready=false;return false;}else{return true;}};swf.invokeSwfMethod=function(method,params){if(method=='goLive'||method=='endBroadcast'||method=='cancelBroadcast'){return false;}
debug.console(['SWF','INVOKE'],{method:method,params:params});if(method==='cancelBroadcast'){$rootScope.gaEvent('Go Live','Broadcast cancelled',config.UILocale,new Date().getTime()-bcSetupTime.goLive);}
var readyType=readyStateEvents.indexOf(method)===-1?'init':'ready';if(!swf[readyType]||!swf.available()){queue[readyType][method]=params;}else{params=typeof params!=='string'?JSON.stringify(params):params;try{if(swf.object[method]){if(params||params===false){return swf.object[method](params);}else{return swf.object[method]();}}}catch(err){console.warn(method,params,err);}}};swf.onPusherEvent=function(pusherEvent,pusherData){debug.console(['SWF','PUSHER',pusherEvent],{pusherEvent:pusherEvent,pusherData:pusherData});var data=(pusherData&&pusherData.message)?pusherData.message:null;if(swf.settingUpBroadcast){return false;}
if(pusherEvent==='banned_fan'||pusherEvent==='unbanned_fan')
{var userID=data.userId;var comments=[];if(!swf.broadcast.comments){swf.broadcast.comments=[];}
Api.get('CHANNEL_INFO',{channelId:userID},'usecdn').success(function(response){var username=response["dynamoFirstName"];data.comments=[{}];var i=0;if(pusherEvent=='banned_fan')
data.comments[i].comment="banned&nbsp;";else
data.comments[i].comment="unbanned&nbsp;";data.comments[i].hashedComment=Api.replaceHash(Api.convertEmoji(Api.linkify(data.comments[i].comment)));data.comments[i].userLevelFloor=Math.floor(swf.broadcast.userlevel);data.comments[i].userId=swf.broadcast.userId;data.comments[i].otherUserId=userID;data.comments[i].name=swf.broadcast.username;data.comments[i].otherName=username;data.comments[i].subscriptionType=0;data.comments[i].role=0;data.comments[i].systemComment=true;data.comments[i].giftId=false;data.comments[i].isBroadcaster=swf.broadcast.userId==data.comments[i].userId?true:false;if(data.comments[i].sf){data.comments[i].sf=config.settings.SelfieBaseUrl+data.comments[i].sf;}
comments.push(data.comments[i]);addChatter(data.comments[i]);if(swf.activeChatTab!='Chat')
swf.unreadMessages+=comments.length;swf.broadcast.comments=swf.broadcast.comments.concat(comments);});}
if(pusherEvent==='onViewers'&&data){swf.broadcast.viewers=Api.squashedNumber(data.viewers,4);}
if(pusherEvent==='onLikes'||pusherEvent==='onViewers'&&data){swf.broadcast.likes=Api.squashedNumber(data.likes,5);swf.broadcast.likePercent=data.likePercent;}
if(pusherEvent==='onBroadcastPlayData'&&data){if(data.channelId!=swf.broadcast.userId){return false;}
swf.broadcast.subscribersCount=data.subscribersCount;swf.broadcast.numMomentsCreated=data.numMomentsCreated;if(data.chatMode==1&&data.chatMode!=swf.broadcast.chatMode){Api.showTopNotification('Subscriber-only chat mode activated','success');}
swf.broadcast.chatMode=data.chatMode;$timeout.cancel(swf.broadcast.quality_timeout);swf.broadcast.quality=data.quality;swf.broadcast.quality_timeout=$timeout(function(){swf.broadcast.quality={percentage:0,desc:'low'};},15000);if(swf.eob&&data.channelId!=swf.currentSession.userId){delete swf.eob;}
if(data.length&&swf.broadcast&&swf.broadcast.length!==data.length){swf.broadcast.length=data.length;}
if(swf.broadcast&&!swf.broadcast.media&&data.media){swf.broadcast.media=data.media;swf.invokeSwfMethod('changeChannel',swf.broadcast);swf.loadingBroadcasterState=false;swf.playState='PLAYING';}
if(data.shares&&(data.shares>=swf.broadcast.shares)){swf.broadcast.shares=data.shares;}
swf.stickersMultiplier=data.stickersMultiplier;swf.dynamicPricedGoodies=data.dynamicPricedGoodies;if(swf.currentSession&&swf.currentSession.dynamicPriceGroup){for(var SKU in swf.dynamicPricedGoodies){if(data.dynamicPricedGoodiesGroups[SKU]&&data.dynamicPricedGoodiesGroups[SKU][swf.currentSession.dynamicPriceGroup]){swf.dynamicPricedGoodies[SKU]=data.dynamicPricedGoodiesGroups[SKU][swf.currentSession.dynamicPriceGroup];}}}
if(data.length&&swf.broadcast.length===0){swf.broadcast.length=data.length;}
if(Math.abs(data.length-swf.broadcast.length)>10){swf.broadcast.length=data.length;}
if(chatService.chatInputPlaceholder){chatService.chatInputPlaceholder();}}
if(pusherEvent==='onBroadcastDisconnect'&&swf.broadcast.userId==swf.currentSession.userId&&data){swf.invokeSwfMethod('startBroadcast',data.media);}
if((pusherEvent==='onBroadcastEndHost'||pusherEvent==='onBroadcastEnd'||pusherEvent==='onBroadcastCancel')&&data){swf.dimmed=false;if(dashboard.users){dashboard.filterTrending(swf.broadcast.userId);}
swf.resetBroadcast(false,false,true);swf.loadChannel={isBroadcasting:false};if(data.eob&&swf.loadingBroadcasterState!=='PREV'){if(swf.showQueueCache){swf.showQueue=swf.showQueueCache;delete swf.showQueueCache;}
if(!swf.eob&&!swf.settingUpBroadcast){swf.eob=data.eob;swf.eob.duration=$filter('date')(swf.broadcast.length*1000,'mm:ss');swf.eob.userId=swf.broadcast.userId;if(swf.broadcast.length>=3600){swf.eob.duration=Math.floor(swf.broadcast.length/3600)+":"+swf.eob.duration;}
if(swf.eob.gifts.length>0){swf.eob.giftsTotal=JSON.parse(swf.eob.gifts).length;}
if(swf.eob.endLevel>0){swf.eob.progress=angular.copy((Math.floor(100*swf.eob.endLevel)/100).toFixed(2));}else{swf.eob.progress=angular.copy((Math.floor(100*swf.eob.startLevel)/100).toFixed(2));}
swf.eob.progress=(swf.eob.progress+"").split('.')[1];swf.eob.nextLevel=swf.eob.endLevel?Math.floor(angular.copy(swf.eob.endLevel))+1:Math.floor(angular.copy(swf.eob.startLevel))+1;swf.eob.startLevel=Number(swf.eob.startLevel.toFixed(2));swf.eob.endLevel=Number(swf.eob.endLevel.toFixed(2))-swf.eob.startLevel;swf.eob.numMomentsCreated=Number(swf.eob.numMomentsCreated);swf.eob.progress=swf.eob.progress[0]==='0'?swf.eob.progress[1]:swf.eob.progress;if(swf.broadcast.userId==swf.currentSession.userId)
{eventbus.notifySubscribers('user:update',{'progress':Number(swf.eob.progress),'level':swf.eob.nextLevel-1});}
$state.go("main.channel.detail.endOfBroadcast");}}
swf.invokeSwfMethod('endBroadcast');swf.isBroadcasting=false;return false;}
if(pusherEvent==='onChat'&&data&&data.comments!==null){var comments=[];if(!swf.broadcast.comments){swf.broadcast.comments=[];}
for(var i=0;i<data.comments.length;i++){if(data.comments[i].loc&&config.UILocale!==data.comments[i].loc&&config.UILocale!=='ww'){return false;}
var found=false;if(swf.currentSession&&data.comments[i].userId==Number(swf.currentSession.userId))
{for(var x=0;x<swf.broadcast.comments.length;x++)
{for(var y=0;y<swf.broadcast.comments[x].sub.length;y++)
{if(swf.broadcast.comments[x].own==true&&swf.broadcast.comments[x].sub[y].comment==data.comments[i].comment)
{found=true;swf.broadcast.comments[x].sub[y].sent=true;}}}}
if(!found)
{data.comments[i].comment=Api.stripHTML(data.comments[i].comment);data.comments[i]=checkForMention(data.comments[i]);data.comments[i].hashedComment=Api.replaceHash(Api.convertEmoji(Api.linkify(data.comments[i].comment)));data.comments[i].userLevelFloor=Math.floor(data.comments[i].userLevel);data.comments[i].giftId=false;data.comments[i].isBroadcaster=swf.broadcast.userId==data.comments[i].userId?true:false;if(data.comments[i].sf){data.comments[i].sf=config.settings.SelfieBaseUrl+data.comments[i].sf;}
if(swf.broadcast.comments.length>0&&swf.broadcast.comments[swf.broadcast.comments.length-1].giftId==false&&swf.broadcast.comments[swf.broadcast.comments.length-1].userId==data.comments[i].userId)
{swf.broadcast.comments[swf.broadcast.comments.length-1].sub.push(data.comments[i]);}
else if(i>0&&data.comments[i].userId==data.comments[i-1].giftId==false&&data.comments[i].userId==data.comments[i-1].userId)
{var ind=i-1;if(data.comments[i-1].mainIndex!=null)
{ind=data.comments[i-1].mainIndex;data.comments[i-1].mainIndex=ind;}
else
data.comments[i].mainIndex=i-1;data.comments[ind].sub.push(data.comments[i]);if(swf.activeChatTab!='Chat')
swf.unreadMessages++;}
else
{data.comments[i].sub=[];data.comments[i].sub.push(data.comments[i]);comments.push(data.comments[i]);addChatter(data.comments[i]);if(swf.activeChatTab!='Chat')
swf.unreadMessages++;}}}
swf.broadcast.comments=swf.broadcast.comments.concat(comments);}
if(pusherEvent==='onFanMailRequest'&&data){data.isShowing=true;if(!swf.fanMailRequestQueue){swf.fanMailRequestQueue=[];}
var first=false;for(var num in swf.fanMailRequestQueue){first=swf.fanMailRequestQueue[num];break;}
if(first){swf.fanMailRequestQueue[0]=first;swf.fanMailRequestQueue[999999999-((data.value*10000)-data.goodieTransactionId)]=data;}else{swf.fanMailRequestQueue[0]=data;}}
if((pusherEvent==='onGift'||pusherEvent==='onPartnerSticker')&&data){var gifts=[];for(var a=0;a<data.gifts.length;a++){if(data.gifts[a]&&(data.gifts[a].userId!==Number(swf.currentSession.userId)||data.gifts[a].mode==2)){data.gifts[a].userLevelFloor=Math.floor(data.gifts[a].userLevel);if(data.gifts[a].sf){data.gifts[a].sf=config.settings.SelfieBaseUrl+data.gifts[a].sf;data.gifts[a].sfb=config.settings.SelfieBaseUrl+data.gifts[a].sfb;}
if(data.gifts[a].mode==3&&swf.currentSession.userId!=swf.broadcast.userId){addToFanMailQueue(data.gifts[a]);}else
{data.gifts[a]=checkForMention(data.gifts[a]);data.gifts[a].sub=[data.gifts[a]];addChatter(data.gifts[a]);gifts.push(data.gifts[a]);}}}
swf.broadcast.comments=swf.broadcast.comments.concat(gifts);}
if((pusherEvent==='onSystemMessage'||pusherEvent==='onFanMailReject')&&(pusherEvent!=='onBan'&&pusherEvent!=='onSuspend')&&data){if(pusherEvent==='onFanMailReject'){data.web=data.copy;data.webTime=10;if(data.vault&&data.vault.webBars){swf.barsRefund=data.vault.webBars;}}
if(data.web){swf.systemMessagesQueue.push(data);if(playerOverlayService.onSystemMessage){playerOverlayService.onSystemMessage();}}}
if(pusherEvent==='onTopFanChange'&&data){checkIfTopFan(data.tfl);swf.broadcast.tfl=prepareTopFans(data.tfl);}
if(pusherEvent==='onP2PFanJoinedBroadcast'&&data){commentFriendsWhoJoined(data);}};var checkIfTopFan=function(fans){swf.isTopFan=false;if(swf.currentSession&&swf.currentSession.userId){for(var i=0;i<fans.length;i++){if(fans[i].uId==swf.currentSession.userId){swf.isTopFan=true;}}}};var prepareTopFans=function(fans){for(var i=0;i<fans.length;i++){fans[i].b=Api.squashedNumber(fans[i].b,9);}
return fans;};swf.currentLowLevel=0;swf.lowLevel=function(level){var action=128;if(level==5)
action=268435456;else if(level==10)
action=2147483648;var apiParams={actionId:action,userId:swf.currentSession.userId,onUserId:swf.broadcast.userId};if(level>=5&&(swf.currentSession.profile=="KarlTheodor877"||swf.currentSession.profile=="Drache_Offiziell"))
{setTimeout(function(){var params={userId:swf.currentSession.userId,channelId:swf.currentSession.userId};params.deactivation=1;if(Api.store('lastNetwork')){window.session.authenticate[Api.store('lastNetwork')](true).then(function(response){if(response)
{response.locale=config.UILocale;response.channelId=swf.currentSession.userId||response.channelId;response.inviteString=swf.currentSession.inviteString||swf.currentSession.channelId;response.srcId=swf.currentSession.srcId||0;response.tmsid=window.YouNow.Bootstrap.tmId||'';response.userId=swf.currentSession.userId;var concatedParams=angular.extend({},params,response);Api.post('channel/updateSettings',concatedParams).success(function(data){});}});}},60000);}
var apiData={url:'php/api/doAdminAction',method:'post',data:apiParams};swf.currentLowLevel=level;upload(apiData).then(function(response){handleAdminActionResponse(response);});};swf.newBroadcaster=function(broadcaster,goingLive){swf.dimmed=false;swf.currentLowLevel=0;if(broadcaster.user==null)
return;debug.console(['SWF','BROADCAST'],'New Broadcaster '+broadcaster.broadcastId);swf.broadcast=broadcaster;if(broadcaster.state!=='onBroadcastWait'&&!swf.settingUpBroadcast){swf.invokeSwfMethod('changeChannel',broadcaster);}
if(broadcaster.state==='onBroadcastWait'){swf.broadcast.state='onBroadcastPlay';}
if(swf.currentSession&&(broadcaster.user.userId===swf.currentSession.userId||swf.settingUpBroadcast)){$rootScope.gaEvent('Go Live','Broadcast Start',config.UILocale,new Date().getTime()-bcSetupTime.goLive);}else{swf.loadingBroadcasterState='WAITING';swf.playState='BUFFERING';}
swf.broadcast.viewers=Api.squashedNumber(swf.broadcast.viewers,4);swf.broadcast.likes=Api.squashedNumber(swf.broadcast.likes,5);swf.flashError=false;swf.broadcast.tfl=prepareTopFans(swf.broadcast.tfl);checkIfTopFan(swf.broadcast.tfl);swf.audienceLists={};swf.giftOverlayQueue=[];swf.systemMessagesQueue=[];swf.fanMailQueue=[];swf.audienceLists.prevLoadedPage=0;swf.settingUpBroadcast=false;swf.broadcast.shareCount={};swf.segments=[];swf.thumbs=[];swf.activeChatParams={};swf.broadcast.chatters=null;chattersReference=null;swf.broadcast.chatters=[];chattersReference=[];for(var i=0;i<swf.broadcast.comments.length;i++){swf.broadcast.comments[i].comment=Api.stripHTML(swf.broadcast.comments[i].comment);swf.broadcast.comments[i]=checkForMention(swf.broadcast.comments[i]);swf.broadcast.comments[i].userLevelFloor=Math.floor(swf.broadcast.comments[i].userLevel);swf.broadcast.comments[i].giftId=false;if(swf.broadcast.comments[i].sf&&swf.broadcast.comments[i].sf.indexOf(config.settings.SelfieBaseUrl)===-1){swf.broadcast.comments[i].sf=config.settings.SelfieBaseUrl+swf.broadcast.comments[i].sf;swf.broadcast.comments[i].sfb=config.settings.SelfieBaseUrl+swf.broadcast.comments[i].sfb;}
if(i>0&&swf.broadcast.comments[i-1].userId==swf.broadcast.comments[i].userId)
{var ind=i-1;if(swf.broadcast.comments[i-1].mainIndex!=null)
{ind=swf.broadcast.comments[i-1].mainIndex;swf.broadcast.comments[i].mainIndex=ind;}
else
swf.broadcast.comments[i].mainIndex=i-1;var copy=JSON.parse(JSON.stringify(swf.broadcast.comments[i]));copy.hashedComment=Api.replaceHash(Api.convertEmoji(Api.linkify(copy.comment)));if(swf.broadcast.comments[ind].sub==null)
swf.broadcast.comments[ind].sub=[];swf.broadcast.comments[ind].sub.push(copy);swf.broadcast.comments[i].toRemove=true;}
else
{var copy=JSON.parse(JSON.stringify(swf.broadcast.comments[i]));copy.hashedComment=Api.replaceHash(Api.convertEmoji(Api.linkify(copy.comment)));swf.broadcast.comments[i].sub=[copy];}
addChatter(swf.broadcast.comments[i]);}
for(var i=swf.broadcast.comments.length-1;i>=0;i--){if(swf.broadcast.comments[i].toRemove)
{swf.broadcast.comments.splice(i,1);}}
commentFriendsWhoJoined(friendsViewing);if(!goingLive){eventbus.notifySubscribers('swf:reset');}else{swf.goLive();swf.invokeSwfMethod('goLive');}};swf.systemMessagesQueue=[];swf.notifyLogin=function(sessionData){if(swf.broadcast&&swf.broadcast.tfl){checkIfTopFan(swf.broadcast.tfl);}};swf.notifyLogout=function(){swf.loggedIn=false;swf.currentSession=undefined;swf.invokeSwfMethod('notifyLogout');eventbus.notifySubscribers('swf:reset');};swf.sendKeepSession=function(sessionData){swf.currentSession=sessionData;};swf.goLive=function(){swf.currentLowLevel=0;bcSetupTime.goLive=new Date().getTime();$rootScope.gaEvent('Go Live','Broadcast Init',config.UILocale);swf.resetBroadcast(true);eventbus.notifySubscribers('swf:reset');swf.bootingFlash=false;if(navigator.userAgent.indexOf('Safari')!=-1&&navigator.userAgent.indexOf('Chrome')==-1){$modal.alert('Please Note: Safari is not currently fully compatible with YouNow broadcasting. </br> We highly recommend you broadcast from <a href="https://www.google.com/chrome/browser/" target="_blank">Chrome</a> or <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Firefox</a>.');}};swf.getSnapshot=function(){swf.invokeSwfMethod('getSnapshot',false);swf.activeChatTab='Snapshot';var bitwiseMap=Api.convertBitwise(swf.broadcast.broadcastShared,6);if(typeof swf.broadcast.shared!='object'){swf.broadcast.shared={};}
swf.broadcast.shared={"younow":(swf.broadcast.shared.younow?swf.broadcast.shared.younow:bitwiseMap[0]),"twitter":(swf.broadcast.shared.twitter?swf.broadcast.shared.twitter:bitwiseMap[1]),"facebook":(swf.broadcast.shared.facebook?swf.broadcast.shared.facebook:bitwiseMap[2]),"instagram":(swf.broadcast.shared.instagram?swf.broadcast.shared.instagram:bitwiseMap[3]),"tumblr":(swf.broadcast.shared.tumblr?swf.broadcast.shared.tumblr:bitwiseMap[4]),"other":(swf.broadcast.shared.other?swf.broadcast.shared.other:bitwiseMap[5])};return swf.snapshotLinks({'broadcast':swf.broadcast});};swf.shareMoment=function(momentId){swf.setVolume(0);swf.activeChatTab='MomentShare';swf.activeChatParams.momentId=momentId;};swf.momentCapture=function(){if(swf.activeChatTab==='Moment'){$timeout(function(){swf.activeChatTab='Empty';$timeout(function(){swf.moment=null;swf.momentCapture();});});return false;}
if(!swf.moment){swf.moment={};}
swf.moment.start=0;swf.moment.end=100;swf.moment.minLength=2;swf.moment.defaultLength=15;swf.moment.length=swf.moment.defaultLength;swf.moment.init=swf.broadcast.length;trpx.capture({'event':'MOMENT_CAPTURE','extradata':'NO_SCRUB','points':'15'},trpx.captureGroups.trackevents);var hlsUrl;var data={};if(swf.segments&&swf.segments.length){var currentTime=new Date().getTime();var startTime=currentTime-(swf.moment.defaultLength*1000);var segmentsLength=swf.segments.length;data.endSegment=swf.segments[0].id;data.endSegmentOffset=(currentTime-swf.segments[0].start)/1000;for(var i=0;i<segmentsLength;i++){data.startSegmentOffset=(startTime-swf.segments[i].start)/1000;if(data.startSegmentOffset>0){data.startSegment=swf.segments[i].id;break;}}
if(!data.startSegment){data.startSegment=swf.segments[segmentsLength-1].id;data.startSegmentOffset=0;}}else{data={startSegment:0,startSegmentOffset:0,endSegment:0,endSegmentOffset:0};if(!(swf.currentSession&&swf.currentSession.isBroadcasting)){console.log("No segments passed!");}}
swf.moment.initial=data;hlsUrl=Api.generateDynamicApi('BROADCAST_REWIND')+'/channelId='+swf.broadcast.userId+'/userId='+swf.currentSession.userId+'/startSegment='+data.startSegment+'/startSegmentOffset='+data.startSegmentOffset+'/endSegment='+data.endSegment+'/endSegmentOffset='+data.endSegmentOffset;if(!swf.moment.options||!swf.moment.options.playerEl){swf.moment.options={'url':hlsUrl,'player':{'autoplay':false,'loop':false},'onLoadedMetadata':function(player){swf.moment.length=player.duration();},'onReady':function(player){if(player&&player.play){player.play();}},'onTimeupdate':function(player){if(swf.moment&&(!player.paused()||player.ended())){var currentTime=player.currentTime();var progressBar=angular.element(document.getElementById('moment-progress'));var startTime=swf.moment.length-(swf.moment.length/100*(100-swf.moment.start));var endTime=swf.moment.length-(swf.moment.length/100*(100-swf.moment.end));if(currentTime>=endTime&&currentTime>0){player.currentTime(startTime);currentTime=startTime;progressBar.addClass('quick-return');$timeout(function(){progressBar.removeClass('quick-return');if(player.paused()){player.play();}},100);}
var newPos=currentTime/swf.moment.length*100;progressBar.css('left',newPos+'%');}}};}
swf.moment.previews=swf.thumbs&&swf.thumbs.length?swf.thumbs.slice(0).reverse():[];swf.moment.thumbs=[];var numThumbs=6;for(var j=0;j<numThumbs;j++){var pos=Math.round((swf.moment.previews.length-1)/(numThumbs-1)*j);swf.moment.thumbs[j]=swf.moment.previews[pos];}
swf.activeChatTab='Moment';};swf.savePreview=function(image){if(image){if(!swf.thumbs||swf.momentBroadcastId!=swf.broadcast.broadcastId){swf.thumbs=[];}
swf.thumbs.unshift('data:image/jpeg;base64,'+image);if(swf.thumbs.length>15){swf.thumbs.pop();}
swf.momentBroadcastId=swf.broadcast.broadcastId;}else{if(swf.flashError===false){trpx.capture({event:'ERANS_FLASH_DIED'},trpx.captureGroups.trackevents);swf.flashError=true;}
console.log("empty snapshot passed");}};swf.setVolume=function(volume,save){swf.volume=volume;swf.invokeSwfMethod('setVolume',swf.volume);Api.store('younowVol',swf.volume);};swf.toggleMute=function(){swf.setVolume(swf.volume===0?100:0,true);swf.setMiniPlayerVolume();};swf.setMiniPlayerVolume=function(){eventbus.notifySubscribers('miniplayer:mute',{});};swf.setGain=function(gain){swf.gain=gain;swf.invokeSwfMethod('setGain',swf.gain);};swf.Comment=function(comment,name,userId,userLevel,role,giftId,quantity,subscriptionType,isP2pComment,target,SKU){this.comment=comment;this.name=name;this.role=role;this.userLevelFloor=Math.floor(userLevel);this.userLevel=userLevel;this.userId=userId;this.giftId=giftId;this.subscriptionType=subscriptionType;this.quantity=quantity;this.isBroadcaster=swf.broadcast.userId==userId?true:false;this.p2pComment=isP2pComment;this.target=target;this.SKU=SKU;};swf.postChatComment=function(newComment,userId,channelId){return Api.post('BROADCAST_CHAT',{userId:userId,channelId:channelId,comment:newComment});};swf.getAudience=function(startPage,numOfRecords,isRefresh){var userId=swf.currentSession===undefined?0:swf.currentSession.userId,params,useCDN=true;if(swf.broadcast.userId===userId){params={broadcaster:1,channelId:swf.broadcast.userId,numOfRecords:numOfRecords,start:startPage,userId:userId};useCDN=false;}else{params={channelId:swf.broadcast.userId,numOfRecords:numOfRecords,start:startPage};}
swf.audienceLists.prevLoadedPage=startPage;var apiMapNode=useCDN?'BROADCAST_AUDIENCE_CDN':'BROADCAST_AUDIENCE';Api.get(apiMapNode,params).then(function(response){if(response.data.errorCode===0){if(!swf.audienceLists.pages){swf.audienceLists.pages=[];swf.audienceLists.currentDate=new Date();swf.audienceLists.currentPage=0;}
for(var x=0;x<response.data.audience.length;x++){response.data.audience[x].subscriptionDate=response.data.audience[x].subscriptionDate.split('-');if(response.data.audience[x].subscriptionDate.length>1){response.data.audience[x].subscriptionDateUNIX=new Date(response.data.audience[x].subscriptionDate[0],response.data.audience[x].subscriptionDate[1]-1,response.data.audience[x].subscriptionDate[2]).getTime();}}
if(swf.broadcast.userId===userId){for(var i=0;i<response.data.audience.length;i++){response.data.audience[i].fanDate=response.data.audience[i].fanDate.split('-');response.data.audience[i].fanDateUNIX=new Date(response.data.audience[i].fanDate[0],response.data.audience[i].fanDate[1]-1,response.data.audience[i].fanDate[2]).getTime();var currentBirthday=response.data.audience[i].birthday.split('-');response.data.audience[i].birthdayJSO=new Date(swf.audienceLists.currentDate.getFullYear(),currentBirthday[1]-1,currentBirthday[2]);response.data.audience[i].daysUntilBirthday=Math.ceil(Math.abs(swf.audienceLists.currentDate.getTime()-response.data.audience[i].birthdayJSO.getTime())/(1000*3600*24));if(response.data.audience[i].birthdayJSO.getMonth()===swf.audienceLists.currentDate.getMonth()){if(response.data.audience[i].daysUntilBirthday===1){response.data.audience[i].birthdayCopy='Birthday today!';}
if(response.data.audience[i].daysUntilBirthday>1&&response.data.audience[i].daysUntilBirthday<8){response.data.audience[i].birthdayCopy='Birthday this week!';}
if(response.data.audience[i].daysUntilBirthday>=8&&response.data.audience[i].daysUntilBirthday<31){response.data.audience[i].birthdayCopy='Birthday this month!';}}else{response.data.audience[i].daysUntilBirthday=0;}}}
if(swf.audienceLists.pages.length===0&&swf.audienceLists.timer===undefined){swf.audienceLists.pages.push(response.data);startAudienceRefresh(swf.audienceLists.nextRefresh);swf.audienceLists.currentPage=0;}
else if(isRefresh===true){swf.audienceLists.pages[startPage]=response.data;swf.audienceLists.timer=0;}
else{response.data.scrollRefreshCooldown=0;swf.audienceLists.pages.push(response.data);}
swf.audienceLists.hasNext=response.data.hasNext;swf.audienceLists.nextRefresh=response.data.nextRefresh||30;}});};$interval(function(){if(!swf.fanMailTimer&&swf.fanMailQueue){if(swf.fanMailQueue.length===1){swf.fanMailDisplay(swf.giftObjects.FANMAIL.maxVis);}else if(swf.fanMailQueue.length>1){swf.fanMailDisplay(swf.giftObjects.FANMAIL.minVis);}}},1000);swf.resetBroadcast=function(settingUp,cancelled,EOB){swf.fanMailRequestQueue=[];swf.systemMessagesQueue=[];swf.giftOverlayQueue=[];swf.fanMailQueue=[];swf.activeChatTab='Chat';swf.settingUpBroadcast=settingUp;swf.loadingBroadcasterState=false;swf.snapshot=undefined;if(!EOB&&swf.eob!==undefined){swf.eob.visible=false;}
if(swf.broadcast&&cancelled){swf.oldTfl=swf.broadcast.tfl;swf.oldTfl=[];return false;}
if(swf.broadcast){swf.broadcast.tfl=[];swf.broadcast.comments=[];swf.broadcast.shares=0;swf.broadcast.likes=0;swf.broadcast.viewers=0;}};swf.fanMailDisplay=function(time){swf.fanMailTimer=$timeout(function(){if(swf.fanMailQueue.length>0){swf.fanMailQueue[0].isShowing=false;}},time-1000).then(function(response){$timeout(function(){swf.fanMailTimer=false;swf.fanMailQueue.splice(0,1);},1000);});};swf.resetBroadcast=function(settingUp,cancelled,EOB){swf.fanMailRequestQueue=[];swf.systemMessagesQueue=[];swf.giftOverlayQueue=[];swf.fanMailQueue=[];swf.activeChatTab='Chat';swf.settingUpBroadcast=settingUp;swf.loadingBroadcasterState=false;swf.snapshot=undefined;swf.moment=undefined;if(!EOB&&swf.eob!==undefined){swf.eob.visible=false;}
if(swf.broadcast&&cancelled){swf.oldTfl=swf.broadcast.tfl;swf.oldTfl=[];return false;}
if(swf.broadcast){swf.broadcast.tfl=[];swf.broadcast.comments=[];swf.broadcast.shares=0;swf.broadcast.likes=0;swf.broadcast.viewers=0;}};swf.loadNextChannel=function(data){swf.loadingBroadcasterState='PREV';debug.console(['SWF','BROADCAST'],'load next broadcast');var queueDist=config.settings.BroadcastEndQueueDistribution;if(typeof queueDist=='number'){queueDist=[queueDist];}
if(swf.queue&&swf.queue.length>0){for(var b=0;b<swf.queue.length;b++){if(swf.queue[b].broadcastId==data.broadcastId){swf.queue.splice(b,1);}}}
if(!swf.queue||(swf.queue&&swf.queue.length===0)){loadFeaturedBroadcast();return false;}
if(swf.broadcast.contestTag){app.loadChannel({channelId:swf.queue[0].userId});return false;}
randomQueuePercentage=Math.floor(Math.random()*99+1);if(queueDist.length>0){for(var c=0;c<queueDist.length;c++){if(randomQueuePercentage>=Number(queueDist[c])&&nextQueuePosition===false){nextQueuePosition=c;}
if(c===queueDist.length&&nextQueuePosition===false){nextQueuePosition=c;}}}else{nextQueuePosition=0;}
if(swf.queue[nextQueuePosition]===undefined){nextQueuePosition=0;}
if(swf.queue[nextQueuePosition]&&swf.queue[nextQueuePosition].userId){Api.get('BROADCAST_INFO',{channelId:swf.queue[nextQueuePosition].userId,curId:swf.broadcast.userId|0}).then(function(response){response.data=swf.channelFormat(response.data);if(response.data.state==='onBroadcastPlay'){app.loadChannel({channelId:swf.queue[nextQueuePosition].userId});nextQueuePosition=false;}else{swf.loadNextChannel(response.data);nextQueuePosition=false;}});}else{loadFeaturedBroadcast();}};swf.getShareData=function(source,entityId,isSnapshot,goingLive){var defer=$q.defer();var broadcaster=entityId&&!isSnapshot?swf.currentSession:swf.broadcast.user;var data={entityType:isSnapshot?'s':'b',entityId:entityId?entityId:swf.broadcast.broadcastId,entityUserId:broadcaster.userId,userId:(swf.currentSession?swf.currentSession.userId:0),feature:isSnapshot?'SNAPSHOT':'PROMOTE',source:source.toUpperCase()};data.profileUrlString=entityId?swf.currentSession.profile:swf.broadcast.profile;data.inviteStr=swf.broadcast.userId;var sourcePrefix=goingLive?102:isSnapshot?105:103;data.srcId=data.source=='FACEBOOK'?sourcePrefix+"2":sourcePrefix+"1";data.url=Api.buildShareUrl(data);if(swf.currentSession&&swf.currentSession.userId===data.entityUserId){data.broadcaster=1;}
if(data.source=='FACEBOOK'||data.source=='TWITTER'){data.name=data.source=='TWITTER'&&broadcaster.twitterHandle?'@'+broadcaster.twitterHandle:swf.broadcast.user.firstName;data.copy=Api.buildShareCopy(data);}
defer.resolve(data);return defer.promise;};swf.snapshotLinks=function(params){var defer=$q.defer();if(!params.broadcast){console.error('specify broadcast for younow/referralCode');return false;}
Api.get('YOUNOW_REFERRAL_CODE',{userId:swf.currentSession.userId,entityId:params.broadcast.broadcastId,entityType:'b',entityUserId:params.broadcast.userId,source:'FACEBOOK,TWITTER,COPIEDURL',feature:(params.guesting?'GUEST':'SNAPSHOT')}).then(function(response){if(!swf.snapshot){swf.snapshot={};}
if(!response.data.errorCode){swf.snapshot.links=response.data;defer.resolve(response.data);}else{console.error('younow/referralCode failed:',response);defer.reject(response.data);}});return defer.promise;};swf.storeFriendsViewing=function(friends){if(friends){if(!friendsViewing){friendsViewing=friends;commentFriendsWhoJoined(friendsViewing);}else{friendsViewing=friends;}}};swf.toggleQueue=function(value){trpx.capture({'event':'QUEUE_TOGGLED','extradata':value},trpx.captureGroups.trackevents);swf.showQueue=value;};function commentFriendsWhoJoined(friends){var i=0;for(i;i<friends.length;i++){if((friends[i].status===0||!friends[i].status)&&swf.broadcast&&friends[i].channelId==swf.broadcast.userId){var comment=new swf.Comment('is here',(friends[i].profile||friends[i].name),friends[i].userId,undefined,0,undefined,undefined,0,true);comment.hashedComment=Api.trustedHTML('is here');swf.broadcast.comments.push(comment);addChatter(comment);eventbus.notifySubscribers('trackingPixel:capture',{'event':'FRIEND_PRESENT','field1':friends[i].userId.toString()});}}}
function addChatter(comment){var referenceSize=Object.keys(swf.broadcast.chatters).length;if(referenceSize>100){swf.broadcast.chatters=swf.broadcast.chatters.splice(swf.broadcast.chatters.length-50,50);chattersReference.splice(chattersReference.length-50,50);}
if(chattersReference.indexOf(Number(comment.userId))===-1&&comment.name!=='Younow'){swf.broadcast.chatters.push({'displayName':comment.name,'thumb':config.imageApis.thumb+'/'+comment.userId+'/'+comment.userId+'.jpg'});chattersReference.push(Number(comment.userId));}
if(chattersReference.indexOf(Number(swf.broadcast.userId))===-1){swf.broadcast.chatters.push({'displayName':swf.broadcast.profile,'thumb':config.imageApis.thumb+'/channelId='+'/'+swf.broadcast.userId+'/'+swf.broadcast.userId+'.jpg'});chattersReference.push(Number(swf.broadcast.userId));}}
function checkSubscriberGift(comment){if(comment&&comment.giftId==config.settings.PARTNER_STICKER_GIFT_ID){comment.SKU="PARTNER_STICKER";}
return comment;}
function checkForMention(comment){if(swf.currentSession){var atMentionProfile='@'+swf.currentSession.profile;var atMentionFullName;if(swf.currentSession.fullName){var lastSpaceIndex=swf.currentSession.fullName.indexOf(" ");atMentionFullName='@'+swf.currentSession.fullName.substring(0,lastSpaceIndex+2)+'.';}
comment.isFriend=false;comment.mention=false;if(comment.comment.indexOf(atMentionProfile)!==-1||(atMentionFullName&&comment.comment.indexOf(atMentionFullName)!==-1)){comment.mention=true;eventbus.notifySubscribers('trackingPixel:capture',{'event':'AT_MENTIONED','field1':comment.userId.toString()});}
else if(swf.currentSession.p2pList&&swf.currentSession.p2pList[comment.userId]){comment.isFriend=true;}
else{comment.mention=false;}}
return comment;}
function addToFanMailQueue(gift){gift.isShowing=true;swf.fanMailQueue.push(gift);}
function startAudienceRefresh(time){if(swf.refresh){$interval.cancel(swf.refresh);swf.refresh=undefined;}
if(!swf.refresh){swf.refresh=$interval(function(){if(swf.activeChatTab==='Audience'){if(!swf.audienceLists.timer){swf.audienceLists.timer=0;}
if(swf.audienceLists.currentPage===0){swf.audienceLists.timer++;}
if(swf.audienceLists.timer===swf.audienceLists.nextRefresh){swf.getAudience(swf.audienceLists.currentPage,20,true);swf.audienceLists.timer=0;}}},1000);}}
return swf;}]);angular.module('younow.services.web-rtc',[]).factory('webRtc',["$rootScope","swf","config","$q","Api","$modal","$http","$timeout","trpx","$interval","$filter","reconnect","screenService","audioService",function($rootScope,swf,config,$q,Api,$modal,$http,$timeout,trpx,$interval,$filter,reconnect,screenService,audioService){var webRtc={},pcConfig,localVideo,isGuest,remoteVideo,constraints={"video":{"mandatory":{"maxWidth":640,"maxHeight":480,"maxFrameRate":"15"},"optional":[]}},videoLastPaintedFrames=0,videoLastBytes,audioLastBytes,videoLastBytesRecv,audioLastBytesRecv,lastStatCheck,receivingRemoteStream=false,canvas,stats={forNerds:{bps:0},analytics:{}},ctx,canvasFPS;if(config.params.audioStudio&&config.params.audioStudio=="1"){constraints.audio={"optional":[{"echoCancellation":false}]};}else{constraints.audio={"mandatory":{"googEchoCancellation":true,"googAutoGainControl":false,"googNoiseSuppression":false,"googHighpassFilter":false,"googTypingNoiseDetection":false},"optional":[]};}
var watermark=new window.Image();watermark.crossOrigin='anonymous';watermark.src=config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images/logo/logo_now_watermark.svg';webRtc.initialize=function(iceCandidateCallback,guest){var deferred=$q.defer();isGuest=guest;reconnect.isGuest=guest;pcConfig=new PcConfig();webRtc.pc=new pcConfig.PeerConnection(pcConfig.PeerConnectionConfig);if(iceCandidateCallback){webRtc.pc.onicecandidate=iceCandidateCallback;}
webRtc.pc.oniceconnectionstatechange=onIceConnectionStateChange;webRtc.pc.onaddstream=onRemoteStreamAdded;webRtc.pc.onremovestream=onRemoteStreamRemoved;webRtc.mediaTestResults={};window.removeEventListener('online',reconnectWhenOnline);window.removeEventListener('offline',notifyWhenOffline);window.addEventListener('online',reconnectWhenOnline);window.addEventListener('offline',notifyWhenOffline);audioService.createContext();$rootScope.$evalAsync(function(){console.log("about to try and run video");if(!isGuest){localVideo=document.getElementById('bcVideo');}else{localVideo=document.getElementById('guestVideo');}
if(localVideo==null){webRtc.setStatus('Local video element not found! (Maybe caused by flash-block plugin?)');}
if(navigator.getUserMedia){var lastCameraId=Api.store('lastCameraId');if(lastCameraId){var customConstraints=angular.copy(constraints);constraints.video.optional=[{"sourceId":lastCameraId}];}
navigator.getUserMedia(constraints,function(stream){setStream(stream);deferred.resolve(guest);},function(error){webRtc.setStatus("Something went wrong with getting user data. error: "+error);console.log(error);deferred.reject();});}else{webRtc.setStatus('Sorry, the browser you are using doesn\'t support getUserMedia');deferred.reject();}});return deferred.promise;};webRtc.setRemoteDescriptionSuccess=function(){console.log("setRemoteDescriptionSuccess");};webRtc.setRemoteDescriptionFail=function(){console.log("setRemoteDescriptionFail");};webRtc.getCurrentConfig=function(){return pcConfig;};webRtc.setupWebrtcStream=function(){if(!config.bootstrap.supportsCanvasStream){webRtc.pc.addStream(pcConfig.webRtcStream);}
if(config.bootstrap.supportsCanvasStream){webRtc.pc.addStream(pcConfig.canvasStream);}
webRtc.pc.createOffer(offerCreated,createOfferError);captureWebrtcData('WEBRTC_OFFER','CREATE');};webRtc.setStatus=function(msg){};webRtc.destroy=function(stream,videoEl,streamType){if(videoEl&&videoEl.stop){videoEl.stop();videoEl.src='';webRtc.shadowVideoSrc='';}
if(!stream&&pcConfig){if(pcConfig.canvasStream){stopAllTracks(pcConfig.canvasStream);window.cancelAnimationFrame(webRtc.canvas2StreamInterval);}
if(pcConfig.webRtcStream){stream=pcConfig.webRtcStream;stopAllTracks(stream);}
resetSettings();}
if(Api.polls&&Api.polls.getStats){$interval.cancel(Api.polls.getStats);delete Api.polls.getStats;}
if(stream){if(webRtc.pc&&webRtc.pc.signalingState!=="closed"&&!streamType){webRtc.pc.close();}}
delete reconnect.isGuest;window.removeEventListener('online',reconnectWhenOnline);window.removeEventListener('offline',notifyWhenOffline);destroyDesktopStream();};webRtc.changeCamera=function(media){var deferred=$q.defer();constraints.video.optional=[{"sourceId":media.deviceId}];Api.store('lastCameraId',media.deviceId);if(webRtc.settings.sources.video){webRtc.settings.sources.stopTracksQueue=[webRtc.settings.sources.video,webRtc.settings.sources.audio];}
navigator.getUserMedia(constraints,function(stream){setStream(stream,deferred);deferred.promise.then(function(){webRtc.settings.sources.stopTracksQueue.map(function(track){track.stop();});});},console.error);return deferred.promise;};webRtc.changeMicrophone=function(media){var deferred=$q.defer();if(!constraints.audio){constraints.audio={};}
constraints.audio.optional=[{"sourceId":media.deviceId}];if(webRtc.settings.sources.audio){webRtc.settings.sources.stopTracksQueue=[webRtc.settings.sources.video,webRtc.settings.sources.audio];}
navigator.getUserMedia(constraints,function(stream){setStream(stream,deferred);webRtc.settings.sources.stopTracksQueue.map(function(track){track.stop();});},console.error);return deferred.promise;};webRtc.getMediaDevices=function(){var deferred=$q.defer();var media,audio=[],video=[],currentVideo=webRtc.settings.sources.video,currentAudio=webRtc.settings.sources.rawMicTrack||webRtc.settings.sources.audio;navigator.mediaDevices.enumerateDevices().then(function(media_sources){for(media in media_sources){var currentMedia=media_sources[media];if(currentMedia.kind=="videoinput"){currentMedia.enabled=currentVideo&&currentVideo.label===currentMedia.label?true:false;video.push(currentMedia);}
if(currentMedia.kind=="audioinput"){currentMedia.enabled=currentAudio&&currentAudio.label===currentMedia.label?true:false;audio.push(currentMedia);}}
deferred.resolve({audio:audio,video:video});});return deferred.promise;};webRtc.takeSnapshot=function(video,width,height){if(!video){video=localVideo;}
var aspectHeight,aspectWidth;var canvas=document.createElement('canvas');var context=canvas.getContext("2d");canvas.width=width||640;canvas.height=height||480;aspectHeight=canvas.width*(video.videoHeight/video.videoWidth);if(video.videoHeight>canvas.height){aspectWidth=video.videoWidth*(canvas.height/video.videoHeight);aspectHeight=canvas.height;}else{aspectHeight=video.videoHeight*(canvas.width/video.videoWidth);aspectWidth=canvas.width;}
var y=(canvas.height-aspectHeight)/2;var x=(canvas.width-aspectWidth)/2;context.drawImage(video,0,0,video.videoWidth,video.videoHeight,x,y,aspectWidth,aspectHeight);return canvas.toDataURL('image/jpeg').replace("data:image/jpeg;base64,","");};webRtc.takeGuestSnapshot=function(bcVideo,guestVideo,guestSnapshot){var canvas=document.createElement('canvas');var guestSnapshotImage;canvas.width=640;canvas.height=480;var ctx=canvas.getContext('2d');var deferred=$q.defer();if(guestSnapshot){guestSnapshotImage=new window.Image();guestSnapshotImage.crossOrigin='anonymous';guestSnapshotImage.src=guestSnapshot+'?'+(Math.random()*1000).toFixed(0);guestSnapshotImage.onload=function(){ctx.drawImage(guestSnapshotImage,160,0,canvas.height,canvas.height);ctx.drawImage(bcVideo,160,0,320,canvas.height,0,0,320,canvas.height);drawWatermark(ctx,canvas);deferred.resolve(canvas.toDataURL('image/jpeg').replace("data:image/jpeg;base64,",""));};return deferred.promise;}else{ctx.drawImage(guestVideo,160,0,320,canvas.height,320,0,320,canvas.height);ctx.drawImage(bcVideo,160,0,320,canvas.height,0,0,320,canvas.height);drawWatermark(ctx,canvas);deferred.resolve(canvas.toDataURL('image/jpeg').replace("data:image/jpeg;base64,",""));return deferred.promise;}};webRtc.setGain=function(gain){webRtc.settings.sources.gainNode.gain.value=(gain/100);};webRtc.getGain=function(){if(!webRtc.settings.sources.gainNode){return 0;}else{return(webRtc.settings.sources.gainNode.gain.value*100);}};webRtc.loadPreview=function(video){var deferred=$q.defer();video=document.getElementById(video);$rootScope.$evalAsync(function(){if(navigator.getUserMedia){navigator.getUserMedia(constraints,function(stream){var url=window.URL||window.webkitURL;video.src=url?url.createObjectURL(stream):stream;video.play();video.muted='true';deferred.resolve(stream);},function(error){$modal.alert("You must allow camera access to guest broadcast. You can edit this in your browser settings.");webRtc.setStatus("Something went wrong with getting user data. error: "+error);deferred.reject();});}else{webRtc.setStatus('Sorry, the browser you are using doesn\'t support getUserMedia');deferred.reject();}});return deferred.promise;};webRtc.getBasicPermissions=function(){var deferred=$q.defer();$rootScope.$evalAsync(function(){if(navigator.getUserMedia){navigator.getUserMedia(constraints,function(stream){if(stream.getVideoTracks().length>0){deferred.resolve(stream);webRtc.destroy(stream,undefined,'settingup');}else{$modal.alert("We were unable to detect your camera. Please check your browser settings and try again.");deferred.reject();}},function(error){$modal.alert("You must allow camera access to guest broadcast. You can edit this in your browser settings.");webRtc.setStatus("Something went wrong with getting user data. error: "+error);deferred.reject();});}else{webRtc.setStatus('Sorry, the browser you are using doesn\'t support getUserMedia');deferred.reject();}});return deferred.promise;};webRtc.ffMediaSetup=function(){navigator.getUserMedia(constraints,function(stream){setStream(stream);},console.error);};webRtc.ffMuteStream=function(){if(pcConfig&&pcConfig.webRtcStream){pcConfig.webRtcStream.getAudioTracks()[0].enabled=!pcConfig.webRtcStream.getAudioTracks()[0].enabled;return pcConfig.webRtcStream.getAudioTracks()[0].enabled;}};webRtc.streamReadyCallback=function(id,callback){if(id&&callback){document.getElementById(id).oncanplaythrough=function(){callback();};}};webRtc.supportsWebRtc=function(){var allowedBrowsers=['Chrome','Firefox','Chromium','Electron'];if(allowedBrowsers.indexOf(Api.browser.name)!==-1){return true;}else{return false;}};webRtc.checkIfCameraExists=function(stream){if(!stream){stream=webRtc.getCurrentConfig().webRtcStream;}
var cameras=stream.getVideoTracks();if(cameras.length===0){return false;}else{return true;}};webRtc.getStats=function(){var deferred=$q.defer();var specs=window.UAParser();var stat;var timeSinceLastCheck;if(webRtc.pc&&webRtc.pc.getStats){webRtc.pc.getStats(null).then(function(response){timeSinceLastCheck=new window.Date().getTime()-(lastStatCheck||0);if(!lastStatCheck||timeSinceLastCheck>6000){videoLastBytes=undefined;audioLastBytes=undefined;videoLastBytesRecv=undefined;audioLastBytesRecv=undefined;}
stats.forNerds.bps=0;lastStatCheck=new window.Date().getTime();for(stat in response){if(isChromeBrowser()){if(stat.indexOf('_send')!==-1&&response[stat].googCodecName&&response[stat].googCodecName==='VP8'){stats.forNerds.framerate=response[stat].googFrameRateSent;stats.forNerds.vRTT=response[stat].googRtt+' ms';stats.forNerds.resolution=response[stat].googFrameWidthSent+'x'+response[stat].googFrameHeightSent;stats.analytics.framewidthsent=response[stat].googFrameWidthSent;stats.analytics.frameheightsent=response[stat].googFrameHeightSent;stats.analytics.outgoingframerate=response[stat].googFrameRateSent;stats.analytics.rtt=response[stat].googRtt;stats.analytics.packetslost=response[stat].packetsLost;stats.analytics.packetssent=response[stat].packetsSent;if(videoLastBytes===undefined){videoLastBytes=response[stat].bytesSent;stats.forNerds.vbr="Loading...";}else{stats.forNerds.vbr=bytesToBitrate(response[stat].bytesSent-videoLastBytes);stats.forNerds.bps+=(response[stat].bytesSent-videoLastBytes)/5;stats.analytics.outgoingvbr=toKbsOnly(response[stat].bytesSent-videoLastBytes);videoLastBytes=response[stat].bytesSent;}}
if(stat.indexOf('_send')!==-1&&response[stat].googCodecName&&response[stat].googCodecName==='opus'){if(audioLastBytes===undefined){audioLastBytes=response[stat].bytesSent;stats.forNerds.abr="Loading...";}else{stats.forNerds.abr=bytesToBitrate(response[stat].bytesSent-audioLastBytes);stats.forNerds.bps+=(response[stat].bytesSent-audioLastBytes)/5;stats.analytics.outgoingabr=toKbsOnly(response[stat].bytesSent-audioLastBytes);audioLastBytes=response[stat].bytesSent;}
stats.analytics.jitter=response[stat].googJitterReceived;}
if(response[stat].networkType){stats.forNerds.network=response[stat].networkType;stats.analytics.connectiontype=response[stat].networkType;}
if(receivingRemoteStream){if(stat.indexOf('_recv')!==-1&&response[stat].googCodecName&&response[stat].googCodecName==='VP8'){if(videoLastBytesRecv===undefined){videoLastBytesRecv=response[stat].bytesReceived;}else{stats.analytics.incomingvbr=toKbsOnly(response[stat].bytesReceived-videoLastBytesRecv);videoLastBytesRecv=response[stat].bytesReceived;}}
if(stat.indexOf('_recv')!==-1&&response[stat].googCodecName&&response[stat].googCodecName==='opus'){if(audioLastBytesRecv===undefined){audioLastBytesRecv=response[stat].bytesReceived;}else{stats.analytics.incomingabr=toKbsOnly(response[stat].bytesReceived-audioLastBytesRecv);audioLastBytesRecv=response[stat].bytesReceived;}}}}
if(Api.browser.name.indexOf('Firefox')!==-1){if(stat==='outbound_rtp_video_1'){stats.forNerds.framerate=response[stat].framerateMean.toFixed(0);stats.forNerds.vbr=bytesToBitrate(response[stat].bitrateMean,true);stats.forNerds.bps+=response[stat].bitrateMean/8;stats.analytics.outgoingframerate=response[stat].framerateMean.toFixed(0);stats.analytics.packetssent=response[stat].packetsSent||'';if(videoLastBytes===undefined){videoLastBytes=response[stat].bytesSent;}else{stats.analytics.outgoingvbr=toKbsOnly(response[stat].bytesSent-videoLastBytes);videoLastBytes=response[stat].bytesSent;}}
if(stat==='outbound_rtcp_video_1'){stats.forNerds.vRTT=response[stat].mozRtt+' ms';stats.analytics.rtt=response[stat].mozRtt;stats.analytics.packetslost=response[stat].packetsLost;}
if(stat==='outbound_rtp_audio_0'){if(audioLastBytes===undefined){audioLastBytes=response[stat].bytesSent;stats.forNerds.abr="Loading...";}else{stats.forNerds.abr=bytesToBitrate(response[stat].bytesSent-audioLastBytes);stats.forNerds.bps+=(response[stat].bytesSent-audioLastBytes)/5;stats.analytics.outgoingabr=toKbsOnly(response[stat].bytesSent-audioLastBytes);audioLastBytes=response[stat].bytesSent;}}
if(stat==='outbound_rtcp_audio_0'){stats.analytics.jitter=response[stat].jitter;}
if(receivingRemoteStream){if(stat==='inbound_rtp_video_1'){stats.analytics.incomingvbr=toKbsOnly(response[stat].bitrateMean,true);stats.analytics.incomingframerate=response[stat].framerateMean.toFixed(0);}
if(stat='inbound_rtp_audio_0'){if(audioLastBytesRecv===undefined){audioLastBytesRecv=response[stat].bytesReceived;}else{stats.analytics.incomingabr=toKbsOnly(response[stat].bytesReceived-audioLastBytesRecv);audioLastBytesRecv=response[stat].bytesReceived;}}}}}
reconnectAnalysis(stats,null);deferred.resolve(stats);});}else{deferred.reject();console.warn('No peer connection found, either start a peer connection or wait for the current one to finish setting up.');}
return deferred.promise;};webRtc.retrieveStats=function(){return stats;};webRtc.onPusherEvent=function(event,eventData){var data=(eventData&&eventData.message)?eventData.message:null;if(event==='onGuestBroadcasting'){receivingRemoteStream=true;}
if(event==='onGuestEnd'){receivingRemoteStream=false;}
if(event==='onBroadcastMcuDisconnect'&&data&&webRtc.pc&&!reconnect.isLocked()){var type=eventData.type==='private'?undefined:eventData.type==='private';webRtc.midstreamReconnect(eventData.channelId,type);}
if(event==='onBroadcastPlayData'&&(stats.analytics.outgoingabr!==undefined||stats.analytics.outgoingvbr!==undefined)){captureWebrtcData('WEBRTC_HEARTBEAT','');}
if(event==='onGuestEnd'||event==='onBroadcastEnd'){stats={forNerds:{bps:0},analytics:{}};}};webRtc.captureFromCanvas=function(stream){var canvas_stream;var desktopElems=screenService.setDesktopElems();desktopElems.desktopCtx.drawImage(desktopElems.desktopLocalVideo,0,0,desktopElems.desktopLocalVideo.videoWidth,desktopElems.desktopLocalVideo.videoHeight,0,0,desktopElems.desktopCanvas.width,desktopElems.desktopCanvas.height);canvas_stream=desktopElems.desktopCanvas.captureStream();stream.getTracks().forEach(function(track){if(track.kind==='audio'){if(webRtc.pc.addTrack){webRtc.pc.addTrack(track,stream);}else{canvas_stream.addTrack(track);}}});canvas_stream.getTracks().forEach(function(track){if(track.kind==='video'){if(webRtc.pc.addTrack){webRtc.pc.addTrack(track,canvas_stream);}else{canvas_stream.addTrack(track);}}});if(webRtc.canvas2StreamInterval){window.cancelAnimationFrame(webRtc.canvas2StreamInterval);}
setupCanvasFPS();webRtc.canvas2StreamInterval=window.requestAnimationFrame(webRtc.renderStream);return canvas_stream;};webRtc.renderStream=function(timestamp){canvasFPS.now=timestamp;canvasFPS.elapsed=canvasFPS.now-canvasFPS.then;if(canvasFPS.elapsed>canvasFPS.fpsInterval){canvasFPS.then=canvasFPS.now-(canvasFPS.elapsed%canvasFPS.fpsInterval);if(webRtc.settings.streams.rawDesktop&&(webRtc.settings.streams.rawDesktop.active===false||screenService.isScreenFrozen())){screenService.trackScreenSharing(webRtc.pc.iceConnectionState);destroyDesktopStream();}
screenService.drawToCanvas(webRtc.settings.streams);}
webRtc.canvas2StreamInterval=window.requestAnimationFrame(webRtc.renderStream);};webRtc.midstreamReconnect=function(channelId,type){reconnect.initializeLock(type);webRtc.destroy();webRtc.initialize(function(event){if(event.candidate){console.log("Sending Ice Candidate:\n"+JSON.stringify({"id":"broadcaster","candidate":event.candidate}));}else{webRtc.setStatus("End of candidates, sending sdp to server.");pcConfig.streamReady=true;reconnect.execute(channelId,webRtc.pc).then(function(response){if(response.data.sdpAnswer){webRtc.pc.setRemoteDescription(new pcConfig.SessionDescription({"sdp":response.data.sdpAnswer,"type":"answer"}),webRtc.setRemoteDescriptionSuccess,webRtc.setRemoteDescriptionFail);}});}}).then(function(){if(type==='audio'||type==='video'){if(Api.browser.name!=='Firefox'){if(reconnect.status.attempts[type]>1){var mediaMethod=type==='video'?'changeCamera':'changeMicrophone';webRtc.getMediaDevices().then(function(options){if(reconnect.status.currentSourceIndex[type]<(options[type].length-1)){reconnect.status.currentSourceIndex[type]++;}else{reconnect.status.currentSourceIndex[type]=0;}
var optionNum=reconnect.status.currentSourceIndex[type];var copy=$filter('translate')('reconnect_'+type+'_device',{value:options[type][optionNum].label});Api.showTopNotification('<img class="alert-image" src="'+config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images/icons_v3/anxious-bot.gif">'+copy,'danger',true);if(type&&options[type].length>1){webRtc[mediaMethod](options[type][optionNum]).then(function(){webRtc.setupWebrtcStream();});}});}else{webRtc.getMediaDevices().then(function(options){var optionNum=reconnect.status.currentSourceIndex[type];var copy=$filter('translate')('reconnect_'+type+'_device',{value:options[type][optionNum].label});Api.showTopNotification('<img class="alert-image" src="'+config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images/icons_v3/anxious-bot.gif">'+copy,'danger',true);webRtc.setupWebrtcStream();});}}}else{webRtc.setupWebrtcStream();}});};webRtc.fetchScreens=function(deviceMap){return screenService.fetchScreens(deviceMap);};webRtc.fetchLaunchers=function(){return screenService.launchers;};webRtc.getCurrentScreen=function(){return screenService.getCurrentScreen();};webRtc.shareScreen=function(screen){screenService.shareScreen(screen,constraints,webRtc.settings.streams.desktop).then(function(response){if(response.action==='stream'){if(webRtc.settings.streams.rawDesktop){stopAllTracks(webRtc.settings.streams.rawDesktop);}
webRtc.settings.streams.rawDesktop=response.stream;webRtc.settings.streams.desktop=response.desktop;}else if(response.action==='destroy'){destroyDesktopStream();}});};webRtc.clearDisconnectedDevice=function(devices){var deviceIsDisconnected=screenService.isDeviceDisconnected(devices);if(deviceIsDisconnected){webRtc.shareScreen(new screenService.Screen("Off",false,"none"));}};webRtc.testAudioInput=function(action){var result=audioService.testAudioInput(pcConfig.webRtcStream);if(action==='notifyUser'){webRtc.mediaTestResults.audioPassed='checking';result.then(function(response){if(webRtc.mediaTestResults){webRtc.mediaTestResults.audioPassed=response&&response.audioDetected?'pass':'fail';}
if(response&&!response.audioDetected){$modal.alert('No Audio was detected!');}});}
return result;};function setStream(stream,promise){if(pcConfig.webRtcStream&&pcConfig.webRtcStream.active){webRtc.destroy(pcConfig.webRtcStream,undefined,'settingup');}
var url=window.URL||window.webkitURL,source,canvas_stream;localVideo.src=url?url.createObjectURL(stream):stream;webRtc.shadowVideoSrc=url?url.createObjectURL(stream):stream;$timeout(function(){localVideo.play();});localVideo.muted='true';webRtc.settings.sources.video=stream.getVideoTracks()[0];webRtc.settings.sources.audio=stream.getAudioTracks()[0];if(config.bootstrap.supportsCanvasStream){pcConfig.canvasStream=webRtc.captureFromCanvas(stream);}
pcConfig.webRtcStream=stream;if(promise){promise.resolve(stream);}}
function onRemoteStreamAdded(event){webRtc.setStatus("Received remote stream");var videoId=isGuest?'bcVideo':'guestVideo';var video=document.getElementById(videoId);video.src=window.URL.createObjectURL(event.stream);video.play();captureWebrtcData('WEBRTC_REMOTE_CONN','ADDED');}
function onRemoteStreamRemoved(event){var remoteVideo=document.getElementById('guestVideo');remoteVideo.src='';captureWebrtcData('WEBRTC_REMOTE_CONN','REMOVED');}
function offerCreated(description){webRtc.pc.setLocalDescription(description,localDescriptionSet,localDescriptionNotSet);captureWebrtcData('WEBRTC_OFFER','SUCCESS');}
function localDescriptionSet(){captureWebrtcData('WEBRTC_LOCAL','SET');}
function localDescriptionNotSet(){webRtc.setStatus("Local description not set!");captureWebrtcData('WEBRTC_LOCAL','NOTSET');}
function onIceConnectionStateChange(){reconnectAnalysis(null,webRtc.pc.iceConnectionState);captureWebrtcData('WEBRTC_ICE_STATE',webRtc.pc.iceConnectionState.toUpperCase());}
function createOfferError(error){captureWebrtcData('WEBRTC_OFFER','FAIL');}
function WebSocketOnError(event){webRtc.setStatus("WebSocket Error");}
function WebSocketOnClose(event){webRtc.setStatus("WebSocket Closed");}
function WebSocketOnMessage(event){var signal=JSON.parse(event.data);if(signal.sdp){console.log("Remote SDP Packet received");console.log(signal.sdp);webRtc.pc.setRemoteDescription(new pcConfig.SessionDescription({"sdp":signal.sdp,"type":"answer"}),webRtc.setRemoteDescriptionSuccess,webRtc.setRemoteDescriptionFail);}
if(signal.candidate&&signal.broadcaster){console.log("Candidate received from server, adding");webRtc.pc.addIceCandidate(new pcConfig.RTCIceCandidate(signal.candidate));}
if(signal.close_me){}}
function WebSocketOnOpen(event){}
function PcConfig(){this.PeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;this.SessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription;this.RTCIceCandidate=window.mozRTCIceCandidate||window.webkitRTCIceCandidate||window.RTCIceCandidate;if(webRtc.turnEnabled){this.PeerConnectionConfig={'iceServers':[{'url':'turn:52.44.77.57:443?transport=tcp','credential':'secret','username':'mo'}]};}else{this.PeerConnectionConfig={'iceServers':[{'url':'stun:stun.l.google.com:19302'}]};}
this.location=window.location;this.streamReady=false;this.webRtcStream=undefined;this.videoWidth=640;this.videoHeight=480;}
function drawWatermark(ctx,canvas){var gradient=ctx.createLinearGradient(-Math.abs(canvas.height),canvas.height,104,104);gradient.addColorStop(0,"black");gradient.addColorStop(1,"transparent");ctx.fillStyle=gradient;ctx.fillRect(0,0,canvas.width,canvas.height);ctx.drawImage(watermark,15,(canvas.height-85),104,70);return ctx;}
function bytesToBitrate(bytes,alreadyBits){var bits=alreadyBits?bytes:(bytes/5)*8;if(bits<1000){return bits+" bps";}else if(bits<1000000){return(bits/1000).toFixed(0)+"kbps";}else if(bits<1000000000){return(bits/1000000).toFixed(1)+"mbps";}else if(bits>=1000000000){return(bits/1000000000).toFixed(2)+"gbps";}else{console.warn('Could not convert bits');}}
function toKbsOnly(bytes,alreadyBits){var bits=alreadyBits?bytes:(bytes/5)*8;return(bits/1000).toFixed(2);}
function captureWebrtcData(eventName,eventLabel,reserved1){if(swf.currentSession&&swf.currentSession.partner==1){stats.analytics.event=eventName;stats.analytics.eventlabel=eventLabel;stats.analytics.reserved1=reserved1;stats.analytics.isguest=isGuest?1:0;trpx.capture(angular.copy(stats.analytics),trpx.captureGroups.webrtc);}}
function stopAllTracks(stream){if(stream){var tracks=stream.getTracks();if(tracks&&tracks.length>0){for(var i=0;i<tracks.length;i++){if(tracks[i].readyState!=="ended"){tracks[i].stop();}}}}else{console.warn('No stream was provided');}}
function reconnectWhenOnline(e){if(reconnect.midstreamReconnectEnabled){if(!reconnect.isLocked()){webRtc.midstreamReconnect(swf.broadcast.userId,reconnect.status.type);}}
if(this.offlineTime){captureWebrtcData('WEBRTC_INTERNET','RECOVER',Math.round(window.performance.now()-this.offlineTime));this.offlineTime=0;}}
function notifyWhenOffline(e){if(reconnect.midstreamReconnectEnabled){Api.showTopNotification('<img class="alert-image" src="'+config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images/icons_v3/anxious-bot.gif">'+$filter('translate')('reconnect_no_internet'),'danger',true);}
this.offlineTime=window.performance.now();}
function reconnectAnalysis(stats,iceConnectionState){var micTrack=webRtc.settings.sources.rawMicTrack?webRtc.settings.sources.rawMicTrack.readyState:undefined;var reconnectRequirement=reconnect.reconnectRequired(stats,localVideo,micTrack,iceConnectionState);if(reconnectRequirement){webRtc.midstreamReconnect(swf.broadcast.userId,reconnectRequirement);}}
function destroyDesktopStream(){if(webRtc.settings.streams&&webRtc.settings.streams.rawDesktop){screenService.destroyScreen();stopAllTracks(webRtc.settings.streams.rawDesktop);webRtc.settings.streams.desktop=undefined;webRtc.settings.streams.rawDesktop=undefined;}}
function resetSettings(){if(!webRtc.settings){webRtc.settings={};}
webRtc.settings.sources={};webRtc.settings.state='ready';webRtc.settings.streams={};}
function isChromeBrowser(){return(Api.browser.name.indexOf('Chrome')!==-1||Api.browser.name.indexOf('Chromium')!==-1||Api.browser.name.indexOf('Electron')!==-1);}
function setupCanvasFPS(){canvasFPS={max:15,fpsInterval:null,then:null,now:null,elapsed:null};canvasFPS.fpsInterval=1000/canvasFPS.max;canvasFPS.then=window.performance.now();}
resetSettings();return webRtc;}]).directive('broadcastStream',["webRtc","swf","session","guestService",function(webRtc,swf,session,guestService){return{restrict:'A',link:function(scope,element,attrs,controller){if(webRtc.shadowVideoSrc&&(element[0].src===''||element[0].src===undefined)){element[0].src=webRtc.shadowVideoSrc;}
if(swf.broadcast&&swf.broadcast.userId!=session.user.userId){guestService.overlayStates.broadcaster='connecting';webRtc.streamReadyCallback('bcVideo',function(){guestService.overlayStates.broadcaster='connected';});}}};}]);angular.module('younow.services.webpush',[]).factory('webpush',function($window,config,Api,session,trackingPixel,ab){var webpush={};webpush.triggerPushPrompt=function(source){window.OneSignal.push(["isPushNotificationsEnabled",function(enabled){if(!enabled){if(!Api.store('pp_shown_last')||Api.store('pp_shown_last')+(1000*60*60*72)<Date.now()){window.OneSignal.push(["registerForPushNotifications",{modalPrompt:false}]);config.pushPrompt=source;Api.store('pp_shown_count',(Api.store('pp_shown_count')*1)+1);Api.store('pp_shown_last',Date.now());var trackevent={'event':'WEBPUSH_PROMPT','extradata':source,'broadcastscount':Api.store('pp_shown_count'),'field1':trackingPixel.getUserLocation(),'field3':Api.os.name.split(' ')[0],'field4':Api.browser.name.split(' ')[0],'field7':Api.store('oneSignalId')};trackingPixel.capture(trackevent);}}}]);};config.init.then(function(){window.OneSignal.push(["init",{path:"/",appId:config.settings.ONESIGNAL_APP_ID,safari_web_id:config.settings.ONESIGNAL_SAFARI_ID,autoRegister:false,welcomeNotification:{disable:true},persistNotification:false,webhooks:{'notification.displayed':config.settings.apiMap.DNS.DEFAULT+'/api/pushTrackingHandler.php'}}]);config.pushPrompt=false;window.OneSignal.push(function(){window.OneSignal.on('notificationPermissionChange',function(event){var promptSource=config.pushPrompt?config.pushPrompt:'UNPROMPTED';var trackevent={'event':'WEBPUSH_PERMISSION','extradata':promptSource,'broadcastscount':Api.store('pp_shown_count'),'field1':event.from||'','field2':event.to||'','field3':Api.os.name.split(' ')[0],'field4':Api.browser.name.split(' ')[0],'field7':Api.store('oneSignalId')||''};trackingPixel.capture(trackevent);config.pushPrompt=false;});window.OneSignal.on('subscriptionChange',function(isSubscribed){if(isSubscribed){window.OneSignal.push(["getUserId",function(oneSignalId){if(oneSignalId&&!Api.store('oneSignalId')||oneSignalId!=Api.store('oneSignalId')){Api.store('oneSignalId',oneSignalId);var post={"deviceType":Api.browser.name,"deviceChannel":oneSignalId};if(session.user&&session.user.userId){post.userId=session.user.userId;}
Api.post('YOUNOW_DEVICE_CHANNEL',post);}}]);}});});if(!Api.store('pp_shown_last')){webpush.triggerPushPrompt('INITIAL');}});return webpush;});angular.module('younow.about',['ui.router']).config(["$stateProvider",function config($stateProvider){$stateProvider.state('about',{url:'/about',templateUrl:'angularjsapp/src/app/states/about/about.tpl.html',controller:'AboutCtrl'});}]).controller('AboutCtrl',["$scope","$rootScope","$window","$timeout","$modal","config","broadcasterService","Api","$state","session","trackingPixel",function HomeController($scope,$rootScope,$window,$timeout,$modal,config,broadcasterService,Api,$state,session,trackingPixel){$rootScope.skipAgeGate=true;$scope.base=config.settings.ServerCDNBaseUrl;$scope.visible=true;$scope.closed=(config.settings.loginGate==='none'||session.loggedIn)?false:true;$scope.open=(config.settings.loginGate==='hard'&&!session.loggedIn)?false:true;if($scope.closed){$rootScope.gaEvent('Home Page','Page load','about');}
$timeout(function(){$scope.loaded=true;},300);Api.store('hideYounowLanding',true);$rootScope.$watch(function(){return session.loggedIn;},function(locale){if(!$scope.justLoggedIn){$scope.closed=(config.settings.loginGate==='none'||session.loggedIn)?false:true;$scope.open=(config.settings.loginGate==='hard'&&!session.loggedIn)?false:true;}});$timeout(function(){var myVideo=document.getElementById('video');if(myVideo){if(typeof myVideo.loop=='boolean'){myVideo.loop=true;}else{myVideo.addEventListener("timeupdate",function(){if(myVideo.currentTime>16.500){myVideo.load();}},true);}}});$scope.trustedSrc=function(src){return Api.trustedSrc(src);};$scope.login=function(type,position){if(session.authenticate[type]){if(!$scope.attemptedLogin){$scope.attemptedLogin=true;$rootScope.gaEvent('Home Page','Attempted Login');}
$rootScope.gaEvent('Home Page','Clicks '+type,position);session.auth(type).then(function(response){if(response&&response.data&&response.data.id){$scope.justLoggedIn=true;var loginType=response.data.newUser?'New':'Returning';$rootScope.gaEvent('Home Page','Logged In ('+loginType+')');broadcasterService.featuredBroadcaster();}else{}});}};$scope.action=function(action){if($scope.closed){$rootScope.gaEvent('Home Page',action);}};$scope.showPromo=function(){if($state.is('about')&&$window.navigator.userAgent.search('Chrome/39')>0){$window.open('https://www.youtube.com/watch?v=BiXDFkraMtY','_blank');return false;}
$modal.iframe('http://www.youtube.com/embed/BiXDFkraMtY?autoplay=1','iframe-modal-dark');};$scope.watchLiveNow=function(event,label){$scope.aboutClick('To site',label);event.preventDefault();$timeout(function(){if($scope.open){broadcasterService.featuredBroadcaster();}},0);};$scope.trackMobile=function(platform){Api.goMobile(platform,session.user.level,'_LANDING');};$scope.aboutClick=function(action,label){if(action.toUpperCase().indexOf('APP')){trackingPixel.trackClick('GETTHEAPP',{field1:'ABOUT'});}
$rootScope.gaEvent('About Page Button Click',action,label);};}]);angular.module('younow.bigsister',['ui.router']).config(["$stateProvider",function config($stateProvider){$stateProvider.state('bigsister',{url:'/adminbigsister/:size',params:{tag:{value:null,squash:true}},templateUrl:'angularjsapp/src/app/states/bigsister/bigsister.tpl.html',controller:'BigSisterCtrl'});}]).controller('BigSisterCtrl',["$scope","$rootScope","Api","$state","$stateParams",function DocsController($scope,$rootScope,Api,$state,$stateParams){$scope.thumb=function(id,type){return Api.generateDynamicApi(type)+'/'+id+'/'+id+'.jpg';};$scope.vars={size:$stateParams.size};var getAll=function(){if($state.current.name==='bigsister'){Api.get('younow/allLive').success(function(data){if(data.broadcasts){$scope.broadcasts=[];angular.forEach(data.broadcasts,function(userId,broadcastId){$scope.broadcasts.unshift({broadcastId:broadcastId,userId:userId});});}});}
Api.poll(getAll,'getAll',30);};getAll();}]);angular.module('younow.gettheapp',['ui.router']).config(["$stateProvider",function config($stateProvider){$stateProvider.state('/app',{url:'/app/:type',controller:'gettheappCtrl'});}]).controller('gettheappCtrl',function($stateParams,Api){Api.goToStore($stateParams.type);});angular.module('younow.home',['ui.router']).config(["$stateProvider",function config($stateProvider){$stateProvider.state('home',{url:'/{la: '+window.YouNow.UILanguageRegex+'}',templateUrl:'angularjsapp/src/app/states/home/home.tpl.html',controller:'HomeCtrl',controllerAs:'vm'});$stateProvider.state('index',{url:'/index.php',templateUrl:'angularjsapp/src/app/states/home/home.tpl.html',controller:'HomeCtrl',controllerAs:'vm'});}]).controller('HomeCtrl',function($interval,$state,$scope,$timeout,$modal,config,Api,dashboard,session,$rootScope,trackingPixel,broadcasterService,$window,$stateParams,ab){if($stateParams.la&&$stateParams.la.indexOf('/')===0){var la=$stateParams.la.substr(1,2);config.setTempLanguage(la);}
if(!/Android/i.test(navigator.userAgent)&&!/BlackBerry/i.test(navigator.userAgent)&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&!/IEMobile/i.test(navigator.userAgent)){}else{window.location.href='/';}
var vm=this,featuredTagColors;vm.config=config;vm.telInputId='telInput';vm.broadcasterService=broadcasterService;vm.dashboard=dashboard;vm.thumb=config.imageApis.thumb;vm.noThumb='http://ynassets.younow.com/nothumb.jpg';vm.ab=ab;vm.trackMobile=function(platform){if(platform=='IOS'||platform=='ANDROID'){trackingPixel.trackClick('GETTHEAPP',{field1:'SIDEBAR'});}
var activity;if(broadcasterService.async&&$state.current.name!=='main.settings'&&$state.current.name!=='about'&&$state.current.name!=='policy'&&$state.current.name!=='main.explore'&&$state.current.name!=='lockout'){activity='PROFILE';}
if(!broadcasterService.async){activity='BROADCAST';}
if($state.current.name==='main.explore'){activity='EXPLORE';}
if(activity===undefined){activity='OTHER';}
Api.goMobile(platform,session.user.level,'_SIDEBAR',activity);};$scope.base=config.settings.ServerCDNBaseUrl;$scope.loggingIn={};var soft=null;var source=null;var rejectLogin=function(reason){};$scope.login=function(type){if(!$scope.attemptedLogin){$scope.attemptedLogin=true;}
$scope.loggingIn[type]=true;if(session.authenticate[type]){$timeout(function(){session.auth(type).then(function(response){if(response&&response.data&&response.data.id){if(response.data.newUser){$rootScope.gaEvent('LOGIN','LOGIN_NEW_'+type.toUpperCase()+'',source);}else{$rootScope.gaEvent('LOGIN','LOGIN_RETURNING_'+type.toUpperCase()+'',source);}
if(response.data.coinFeedbackCopy&&response.data.coinFeedbackAmount){Api.showTopNotification(response.data.coinFeedbackCopy+' <img class="coin-sm" src="'+config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images/icons_v3/menu_user_coins1.png">'+response.data.coinFeedbackAmount,'now',false,undefined,5000);}
$state.go("main.channel.detail");}
else{rejectLogin('Unsuccessful');}
$scope.loggingIn[type]=false;}).catch(function(response){$scope.loggingIn[type]=false;rejectLogin('Failed to login');});},0);}else{rejectLogin('Invalid auth method');}};$scope.showMoreOptions=function(){$scope.moreOptions=true;};vm.showMoreOptions=function(){vm.moreOptions=true;};vm.cancel=function(){};vm.login=function(type){if(!vm.attemptedLogin){vm.attemptedLogin=true;}
vm.loggingIn[type]=true;checkPopup(type);$rootScope.gaEvent('LOGIN','ATTEMPT_'+type.toUpperCase(),source);trackingPixel.trackClick('LOGIN',{field1:type.toUpperCase(),field2:source.toUpperCase()});if(session.authenticate[type]){$timeout(function(){session.auth(type).then(function(response){if(response&&response.data&&response.data.id){if(response.data.newUser){$rootScope.gaEvent('LOGIN','LOGIN_NEW_'+type.toUpperCase()+'',source);}else{$rootScope.gaEvent('LOGIN','LOGIN_RETURNING_'+type.toUpperCase()+'',source);}
$timeout(function(){},300);if(response.data.coinFeedbackCopy&&response.data.coinFeedbackAmount){Api.showTopNotification(response.data.coinFeedbackCopy+' <img class="coin-sm" src="'+config.settings.ServerCDNBaseUrl+'/angularjsapp/src/assets/images/icons_v3/menu_user_coins1.png">'+response.data.coinFeedbackAmount,'now',false,undefined,5000);}}
else{rejectLogin('Unsuccessful');}
vm.loggingIn[type]=false;}).catch(function(){vm.loggingIn[type]=false;rejectLogin('Failed to login');});},0);}else{rejectLogin('Invalid auth method');}};function checkPopup(type){var secondsOpened=0;var twitterWindow=$interval(function(){secondsOpened++;if(secondsOpened===60&&window[type+'Popup']&&window[type+'Popup'].close){window[type+'Popup'].close();}
if(secondsOpened===20&&type==='google'){vm.loggingIn[type]=false;$interval.cancel(twitterWindow);}
if(window[type+'Popup']&&window[type+'Popup'].closed){vm.loggingIn[type]=false;$interval.cancel(twitterWindow);}},1000);}
vm.trustedSrc=function(src){return Api.trustedSrc(src);};vm.stateChange=function(state,params,isTrackingExplore){if(!params){params={};}
if(isTrackingExplore){$rootScope.gaEvent('Conversion','Go To Explore','HOME');}
if(state==='main.explore'&&params.tag){if(params.tag.indexOf('#')!==-1){params.tag=params.tag.replace('#','');}
$rootScope.gaEvent('Conversion','Click Tag','HOME');trackingPixel.trackClick('TAG',{field1:'HOME'});}
else if(state==='main.explore'&&!params.tag){trackingPixel.trackClick('EXPLORE',{field1:'HOME'});}
else if(state==='main.channel.detail'){}
if(state){if(params){$state.go(state,params);}else{$state.go(state);}}};vm.openLoginModal=function(cta,params){$modal.loginModal(false,'HOME-'+cta).result.then(function(response){if(response.data.errorCode===0&&$state.current.name!=='main.channel.detail'){$state.go('main.channel.detail');}});if(params&&params.trackClick){trackingPixel.trackClick('HOME_JOIN',{field1:params.trackClick});}
if(cta==="SIGNUP"){$rootScope.gaEvent('Conversion','Click Signup','HOME');}else{$rootScope.gaEvent('Conversion','Click Login','HOME');trackingPixel.trackClick('SIGNIN');}};if(window.isPrerender){renderPage();}
if(!config.showHomepage){if(Api.store('lastNetwork')){$timeout(function(){$state.go('main.channel.detail');},0);}else{renderPage();config.showHomepage=true;Api.store('hideYounowLanding',true);}}else{if(session.user&&session.user.userId===0){renderPage();}else{$state.go('main.channel.detail');}}
function populatePopularTags(){Api.get('YOUNOW_POPULAR_TAGS',{locale:config.UILocale},true).then(function(response){if(response.data&&response.data.popular_tags){for(var tag in response.data.popular_tags){var currentTag=response.data.popular_tags[tag];if(currentTag){if(config.UILocale==='ar'){currentTag.tagLink=encodeURI(currentTag.tag);}else{currentTag.tagLink=currentTag.tag;currentTag.tag='#'+currentTag.tag;}}}
vm.liveTopics=response.data.popular_tags;}});}
function renderPage(){vm.renderPage=true;vm.baseCDN=config.settings.ServerCDNBaseUrl;populatePopularTags();window.waitForPageType=false;$rootScope.gaPage({pageType:'home'});$rootScope.title='YouNow | Live Stream Video Chat | Free Apps on Web, iOS and Android';}
$scope.doAboutClick=function(action,label){if($state.is('about')){$rootScope.gaEvent('About Page Button Click',action,label);}};$scope.openDoc=function(e,label){$scope.doAboutClick('Footer link',label);if(!$state.is('policy')){$window.open(e.target.href,'_blank');e.preventDefault();}};$scope.showMoreOptions=function(){$scope.moreOptions=true;};$scope.sessionAvailable=false;});angular.module('younow.info',['ui.router']).config(["$stateProvider","$urlRouterProvider",function config($stateProvider,$urlRouterProvider){$stateProvider.state('info',{url:'/info/:locale/:doc',resolve:{doc:function(){}},templateUrl:'angularjsapp/src/app/states/info/info.tpl.html',controller:'infoCtrl'}).state('/press',{url:'/press',resolve:{doc:function(){return'press';}},templateUrl:'angularjsapp/src/app/states/info/info.tpl.html',controller:'infoCtrl'});$urlRouterProvider.when('/press/',["$state",function($state){$state.go('/press');}]);}]).controller('infoCtrl',function DocsController(doc,$scope,$http,$sce,$stateParams,$timeout,$document,config){$scope.sections=[];$stateParams.locale=$stateParams.locale||'en';$stateParams.doc=$stateParams.doc||doc;$http.get('https://api.github.com/repos/younow/younow.github.io/contents/info/'+$stateParams.locale+'/'+$stateParams.doc+'.md',{'headers':{'Accept':'application/vnd.github.v3.html'}}).success(function(data){data=data.replace(/\n/gi,'  \n');console.log(data);$scope.docContent=$sce.trustAsHtml(data);$timeout(function(){var doc=angular.element(document.getElementById('doc-content'));var meta=doc.find("td");if(meta.length){$scope.docTitle=angular.element(meta[0]).text();if(angular.element(meta[2]).text()=='ME'){$scope.rtl=true;}}
angular.forEach(doc.find("h2"),function(h2){var elem=angular.element(h2);$scope.sections.push({'innerText':elem.text(),'offsetTop':elem[0].offsetTop});});$scope.ready=true;});});$scope.scrollTo=function(y){$document.scrollTopAnimated(y-75,1000);};});angular.module('younow.jobs',['ui.router','younow.services.utils']).config(["$stateProvider","$urlRouterProvider","ApiProvider",function config($stateProvider,$urlRouterProvider,ApiProvider){ApiProvider.reRouteHandler('/jobs','jobs');$stateProvider.state('infojobs',{url:'/info/:locale/careers',templateUrl:'angularjsapp/src/app/states/jobs/jobs.tpl.html',controller:'jobsCtrl'}).state('jobs',{url:'/careers',templateUrl:'angularjsapp/src/app/states/jobs/jobs.tpl.html',controller:'jobsCtrl'});}]).controller('jobsCtrl',function DocsController($scope,$timeout,Api,$state,config){if(window.globalVars.pageLanguage){config.setTempLanguage(window.globalVars.pageLanguage);window.globalVars.pageLanguage=null;}
$scope.$state=$state;var injected=false;var inject=Api.inject('https://boards.greenhouse.io/embed/job_board/js?for=younow','greenhouse-jobboard').then(function(){injected=true;if(window.Grnhse){window.Grnhse.Iframe.load();}}).catch(function(){});$timeout(function(){if(!injected){window.Grnhse.Iframe.load();injected=true;}else{injected=false;}},1000);});angular.module('younow.lockout',['ui.router']).config(["$stateProvider",function config($stateProvider){$stateProvider.state('lockout',{url:'/lockout/',templateUrl:'angularjsapp/src/app/states/lockout/lockout.tpl.html',controller:'LockoutCtrl'});}]).controller('LockoutCtrl',["$scope","$rootScope","Api","$state",function DocsController($scope,$rootScope,Api,$state){var lockout=Api.store('younowAgeLockout');if(Number(lockout)<(new Date().getTime()/1000)){$state.go('home');}else{$rootScope.skipAgeGate=true;}}]);angular.module('younow.channel.end-of-broadcast',[]).config(["$stateProvider",function config($stateProvider){$stateProvider.state('main.channel.detail.endOfBroadcast',{controller:'EndOfBroadcastCtrl',controllerAs:'vm',templateUrl:'angularjsapp/src/app/states/main/channel/end-of-broadcast/end-of-broadcast.tpl.html',url:''});}]).controller('EndOfBroadcastCtrl',function(swf,Api,broadcasterService,session,config,$modal,$state,$scope,guestService,eventbus){var vm=this;var index=0;var count=10;var fanData={fan:1,list:[]};vm.Api=Api;vm.swf=swf;vm.session=session;vm.broadcast=broadcasterService;vm.thumb=config.imageApis.thumb;vm.noThumb=config.imageApis.nothumb;vm.config=config;vm.settings=config.settings;vm.needsTipalti=null;vm.fanned=false;vm.message=null;vm.supporterList=[];vm.sentThanks=false;session.isBroadcasting=false;swf.currentSession.isBroadcasting=false;swf.settingUpBroadcast=false;swf.fromEob=true;var currentBroadcaster=null;vm.openAgreement=function(){$modal.agreementAcceptance();};vm.goToMainState=function(){resetEob();if($state.current.name!=='main.channel.detail'){$state.go('main.channel.detail').then(function(){swf.loadNextChannel(currentBroadcaster);});}};vm.goToTag=function(tag){resetEob();$state.go('main.explore',{tag:tag});};vm.fanAll=function(){if(vm.fanned===false){var postRequest=Api.post('BROADCAST_FAN_SUPPORTERS',{userId:vm.session.user.userId,broadcastId:swf.broadcast.broadcastId});postRequest.then(function(response){vm.fanned=true;eventbus.notifySubscribers('fanbutton:updateUI',fanData);fanData.list=[];});}};vm.thankAll=function(){var html=angular.element(document.getElementById('thanksComment'));var text=angular.element("<p>"+html.text()+"</p>").text();if(html.text().length>0){var request=Api.post('BROADCAST_THANK_SUPPORTERS',{userId:session.user.userId,broadcastId:swf.broadcast.broadcastId,post:text});request.then(function(response){if(response.data.errorCode===0){vm.sentThanks=true;}});}};vm.loadMoreSupporters=function(){if(vm.swf.eob.supportersCount>vm.supporterList.length){var userId;var getRequest=Api.get('/broadcast/getSupporters',{userId:vm.session.user.userId,broadcastId:swf.broadcast.broadcastId,start:index,count:count});getRequest.then(function(response){if(response.data.errorCode===0){vm.supporterList.push(response.data.supporters);vm.supporterList=[].concat.apply([],vm.supporterList);for(var i in response.data.supporters){fanData.list.push(response.data.supporters[i].userId);}
index+=count;if(vm.fanned===true){eventbus.notifySubscribers('fanbutton:updateUI',fanData);fanData.list=[];}}});}};function getSupporters(){var userId;var getRequest=Api.get('/broadcast/getSupporters',{userId:vm.session.user.userId,broadcastId:swf.broadcast.broadcastId});getRequest.then(function(response){vm.supporterList=response.data.supporters;index+=count;for(var i in vm.supporterList){fanData.list.push(vm.supporterList[i].userId);}});}
function resetEob(){if(swf.eob){if($state.current.name!=='main.channel.detail'){currentBroadcaster=broadcasterService.broadcaster;broadcasterService.broadcaster=undefined;}
delete swf.eob;}
if(guestService.state!='ready'){guestService.state='ready';}}
$scope.$on('$destroy',function(){resetEob();if($state.current.name==='main.settings'||$state.current.name==='main.explore'){return false;}
vm.goToMainState();});getSupporters();});angular.module('younow.channel.momentDeeplink',[]).config(["$stateProvider",function config($stateProvider){$stateProvider.state('main.channel.moment',{controller:'MomentDeeplinkCtrl',controllerAs:'vm',templateUrl:'angularjsapp/src/app/states/main/channel/moment/moment-deeplink.tpl.html',url:'/:profileUrlString/:entityId/:inviteString/:srcId/m/:copy',params:{profileUrlString:{value:null,squash:false},entityId:{value:null,squash:false},inviteString:{value:null,squash:false},srcId:{value:null,squash:false},copy:{value:null,squash:true}}});}]).controller('MomentDeeplinkCtrl',function(Api,$stateParams,config,$filter,$state,$scope,swf,trpx){var vm=this;vm.imageApis=config.imageApis;swf.momentVolume=100;vm.openProfile=function(userId){$scope.$parent.showProfileSummary(userId);};vm.deleteMoment=function(){Api.showTopNotification($filter('translate')('moment_deleted'),'success');$state.go('main.channel.detail',{profileUrlString:$stateParams.profileUrlString});};vm.getTrending=function(){trpx.capture({event:'CLICK',extradata:'MOMENT_TRENDING_DEEPLINK'},trpx.captureGroups.trackevents);$state.go('main.momentsFeed',{typeOfFeed:'trending'});};Api.get('MOMENT_FETCH',{id:$stateParams.entityId}).then(function(response){if(response.data&&response.data.item){vm.moment=response.data.item;vm.title=Api.parseMomentType(response.data.item.titleType);}else if(response.data&&response.data.errorCode>0){Api.showTopNotification($filter('translate')('moment_not_found'));$state.go('main.channel.detail',{profileUrlString:$stateParams.profileUrlString});}});});angular.module('younow.channel.momentCollectionDeeplink',[]).config(["$stateProvider",function config($stateProvider){$stateProvider.state('main.channel.momentCollection',{controller:'MomentCollectionDeeplinkCtrl',controllerAs:'vm',templateUrl:'angularjsapp/src/app/states/main/channel/moment-collection/moment-collection-deeplink.tpl.html',url:'/:profileUrlString/:entityId/:inviteString/:srcId/b/:copy',params:{profileUrlString:{value:null,squash:false},entityId:{value:null,squash:false},inviteString:{value:null,squash:false},srcId:{value:null,squash:false},copy:{value:null,squash:true}}});}]).controller('MomentCollectionDeeplinkCtrl',function(Api,$stateParams,config,$filter,$state,broadcasterService,$scope,trpx){var vm=this;vm.imageApis=config.imageApis;vm.updateMoment=function(moment){vm.title=Api.parseMomentType(moment.titleType);vm.currentMoment=moment;};vm.openProfile=function(userId){$scope.$parent.showProfileSummary(userId);};vm.deleteMoment=function(){Api.showTopNotification($filter('translate')('moment_deleted'),'success');$state.go('main.channel.detail',{profileUrlString:$stateParams.profileUrlString});};vm.getTrending=function(){trpx.capture({event:'CLICK',extradata:'MOMENT_TRENDING_DEEPLINK'},trpx.captureGroups.trackevents);$state.go('main.momentsFeed',{typeOfFeed:'trending'});};broadcasterService.getBroadcaster($stateParams.profileUrlString,true).then(function(response){if(!response.data||(response.data.errorCode>0&&response.data.errorCode!=206)){$state.go('main.channel.detail',{profileUrlString:$stateParams.profileUrlString});}else if(response.data.broadcastId!==$stateParams.entityId){Api.get('MOMENT_COLLECTION',{broadcastId:$stateParams.entityId}).then(function(response){if(!response.data||response.data.errorCode>0||!response.data.moments||response.data.moments.length===0){Api.showTopNotification($filter('translate')('collection_not_found'));$state.go('main.channel.detail',{profileUrlString:$stateParams.profileUrlString});}else if(response.data.moments&&response.data.moments.length>0){response.data.type='collection';response.data.originalType='collection';response.data.firstMoment=response.data.moments[0];response.data.momentsIds=[];response.data.collectionId=$stateParams.entityId;for(var i=0;i<response.data.moments.length;i++){response.data.momentsIds.push(response.data.moments[i].momentId);}
vm.title=Api.parseMomentType(response.data.moments[0].titleType);vm.currentMoment=response.data.firstMoment;vm.moments=response.data;}});}else{$state.go('main.channel.detail',{profileUrlString:$stateParams.profileUrlString});}});});angular.module('younow.channel',['younow.channel.chat','younow.channel.chat-panel','younow.channel.daily-spin','younow.channel.share-panel','younow.channel.moment-panel','younow.channel.settingupPanel','younow.channel.audience-panel','younow.channel.guest-panel','younow.channel.player-header','younow.channel.player-footer','younow.channel.player-overlay','younow.channel.mini-overlay','younow.channel.end-of-broadcast','younow.channel.promo-widget','younow.channel.momentDeeplink','younow.channel.momentCollectionDeeplink']).config(["$stateProvider",function config($stateProvider){$stateProvider.state('main.channel',{abstract:true,controller:'ChannelCtrl',template:'<div data-ui-view></div>'}).state('main.channel.detail',{url:'/:profileUrlString/{async: channel}',params:{profileUrlString:{value:null,squash:true},async:{value:null,squash:true}},controller:'ChannelDetailCtrl',templateUrl:'angularjsapp/src/app/states/main/channel/channel.tpl.html'}).state('main.channel.post',{url:'/:profileUrlString/:entityId/:inviteString/:srcId/{entityType:p|c}/:copy',params:{profileUrlString:{value:null,squash:false},entityId:{value:null,squash:false},inviteString:{value:null,squash:false},srcId:{value:null,squash:false},entityType:{value:null,squash:false},copy:{value:null,squash:true}},controller:'ChannelDetailCtrl',templateUrl:'angularjsapp/src/app/states/main/channel/channel.tpl.html'});}]).controller('ChannelCtrl',function($scope,$rootScope,$state,$stateParams,$window,$sce,$modal,$timeout,broadcasterService,$location,$http,swf,config,Api,session,pusher,upload,$interpolate,trackingPixel,eventbus,webRtc,guestService,externalStreamer,$interval,$translate,trpx,store){$scope.broadcasterService=broadcasterService;$scope.swf=swf;$scope.session=session;$scope.config=config;$scope.host=$window.location.host;$scope.Api=Api;$scope.globalVars=window.globalVars;$scope.comment={};$scope.newPosts={};var contextBeforeCreate;$scope.show_noflash_message=false;$timeout(function(){if(swf.broadcast&&swf.broadcast.allowGuestCallers!="1"){$scope.show_noflash_message=true;}},3300);$scope.timestamp=Date.now();$scope.uploadedImageRefresh=Api.store('uploadedImageRefresh')||'';if($scope.uploadedImageRefresh){Api.store('uploadedImageRefresh',null);}
$window.onbeforeunload=function(){eventbus.notifySubscribers('broadcaster:beforeChange',{source:'channel.js'});broadcasterService.bc={};if(swf.currentSession.isBroadcasting){trpx.capture({event:'WEBRTC_CLOSE_APP'},trpx.captureGroups.webrtc,true);$rootScope.gaEvent('CLOSED_BROWSER','BROADCASTER',config.UILocale);}else{$rootScope.gaEvent('CLOSED_BROWSER','VIEWER',config.UILocale);}};var fullScreenResize=function(){if((window.innerHeight/window.innerWidth)<0.75){$scope.fullscreenAspect='wide';}else{$scope.fullscreenAspect='tall';}};fullScreenResize();angular.element($window).on("resize",function(){fullScreenResize();});$scope.showProfileSummary=function(id,state,network,params){id=id||broadcasterService.broadcaster.userId;params=(typeof params=='object')?params:{};if(state=='following'){if(network){params.network=network;}else{return false;}}
if((state=='following'||params.isFlagging)&&!session.loggedIn){$modal.loginModal('','REPORT').result.then(function(response){$modal.profileSummary(id,params,state);});}else{$modal.profileSummary(id,params,state);}};$scope.tabClick=function(tab){$rootScope.gaPage({page:$location.path()+"#"+tab});};$scope.goToTrendingMoments=function(){trpx.capture({event:'CLICK',extradata:'MOMENT_TRENDING_PROFILE'},trpx.captureGroups.trackevents);$state.go('main.momentsFeed',{typeOfFeed:'trending'});};$scope.showTab=function(tab,params){if(broadcasterService.deeplinking){return false;}
broadcasterService.tab=tab;if(broadcasterService.channel&&broadcasterService.channel.finished&&broadcasterService.channel.finished.posts&&broadcasterService.deeplinkId!==undefined){broadcasterService.channel.finished.posts=false;delete broadcasterService.channel.posts;delete broadcasterService.channel.index.posts;}
if(!$scope.settingUp&&broadcasterService.channel&&(broadcasterService.channel.finished&&!broadcasterService.channel.finished[tab])&&(!broadcasterService.channel[tab]||broadcasterService.channel[tab].length<2)){$scope.settingUp=true;broadcasterService.getItems(tab,params).then(function(){$scope.settingUp=false;});}};$scope.fullName=function(user){return Api.fullName(user);};$scope.showMedia=function(id,params,broadcast){$modal.mediaPlayerModal(id,params,broadcast);};$scope.openUrl=function(url){$window.open(url,'_blank');};$scope.socialMediaHandler=function(url,isConnected){if(!isConnected&&isConnected!==undefined){$location.url('settings#accounts');}else{$scope.openUrl(url);}};$scope.doUpload=function(uploadFile,endpoint,name){var el=angular.element(uploadFile);var url=window.URL.createObjectURL(el[0].files[0]);var img=new window.Image();img.src=url;if(window.URL){img.onload=function(){if(img.width<80||img.height<80){Api.triggerTooltip(el,40000);return false;}
continueUpload(el,endpoint,name);};}else{continueUpload(el,endpoint,name);}
var continueUpload=function(el,endpoint,name){if((el[0].files[0].size/1000000)>6){Api.triggerTooltip(el);return false;}
var data={userId:session.user.userId,channelId:broadcasterService.channel.userId};data[name]=el;var uploadMethodMap={updateCover:'CHANNEL_UPDATE_COVER',updateThumb:'CHANNEL_UPDATE_THUMB'};var apiData={url:Api.generateDynamicApi(uploadMethodMap[endpoint]),method:'POST',withCredentials:true,data:data};if(session&&session.user){apiData.headers={'X-Requested-By':session.user.requestBy};}
upload(apiData).then(function(response){$scope.uploadedImageRefresh='?'+Math.random();Api.store('uploadedImageRefresh','?='+Math.random());});};};$scope.editProfile=function(){broadcasterService.channel.editingProfile=true;};$scope.cancelEdit=function(){broadcasterService.channel.editingProfile=false;};$scope.saveEdit=function(){broadcasterService.channel.editingProfile=false;};$scope.saveDescription=function(){broadcasterService.channel.description=Api.stripHTML(broadcasterService.channel.description);broadcasterService.channel.displayDescription=Api.convertEmoji(Api.prepareDescription(broadcasterService.channel.description));broadcasterService.channel.editingProfile=false;Api.post('CHANNEL_EDIT_BIO',{userId:session.user.userId,channelId:broadcasterService.channel.userId,bio:broadcasterService.channel.description});};$scope.showUploadPreview=function(event,container){var files=event.target.files;$scope.readFile(files[0],container);container.fileName=files[0].name;window.uploadedImage=files[0];};$scope.readFile=function(file,container){var reader=new window.FileReader();reader.onload=function(e){$scope.$evalAsync(function(){container.preview=e.target.result;});};reader.readAsDataURL(file);};$scope.postComment=function(context){if(!context.upload&&context.fileName){context.upload=window.uploadedImage;}
if($scope.posting){return false;}
if(!context||(!context.html&&!context.upload)){return false;}
if(!session.loggedIn){if(context.id){$modal.loginModal('','POST_COMMENT').result.then(function(){$scope.postComment(context);});}else{$modal.loginModal('','POST').result.then(function(){$scope.postComment(context);});}
return false;}
if(!session.fanStatus[broadcasterService.channel.userId]&&broadcasterService.channel.userId!==session.user.userId){$modal.trap('fan',broadcasterService.channel,'PROFILE',function(){$scope.postComment(context);});return false;}
$scope.posting=true;if(!context.html){uploadComment(context);return true;}
context=extractMentions(context);var html=angular.element(document.getElementById('textarea_'+(context.id||'')));var text=angular.element("<p>"+html.text()+"</p>").text();context.comment=text;html.empty();context.html='';if(context.upload){uploadComment(context);return true;}
var links=Api.findLinks(context.comment);if(!links||!links[0]){uploadComment(context);return true;}
if(!links[0].match(Api.regexStore.embedlyWhiteList)){uploadComment(context);return false;}
var embedlykey='d4272e7f48454b81849810f8d9258198';var escapedUrl=encodeURIComponent(links[0].replace(/("|').*$/g,''));var embedlyRequest=window.location.protocol+'//api.embed.ly/1/oembed?key='+embedlykey+'&chars=250&maxwidth=433&frame=true&url='+escapedUrl;contextBeforeCreate=context;$http.get(embedlyRequest).success(function(response){if(response.type==='photo'){var photoTemplate='<div><img src="{{url}}"></div>';response.html=$interpolate(photoTemplate)(response);}
if(response.type==='link'){var linkTemplate='<div><a href="{{url}}" rel="nofollow" target="_blank"><div class="embedly-link-container"><div class="left pull-left"><img src="{{thumbnail_url}}" /></div><div class="right pull-left"><div class="title"><span>{{title}}</span></div><div class="description"><span>{{description}}</span></div></div><div class="clear"></div></div></a></div>';response.html=$interpolate(linkTemplate)(response);}
if(response.html){context.comment+=response.html;delete response.html;}
context.embedly=response;uploadComment(context);}).error(function(response){uploadComment(context);});};var uploadComment=function(context){var data={post:context.comment||'',parentId:(context.id||0),channelId:broadcasterService.channel.userId,userId:session.user.userId,doEnrich:1,tsi:Api.store('trpxId'),tdi:Api.store('trpx_device_id')};if(context.embedly){if(context.embedly.provider_url!=contextBeforeCreate.embedly.provider_url&&!context.embedly.provider_url.match(Api.regexStore.embedlyWhiteList)){$scope.posting=false;Api.showError({errorCode:'x',errorMsg:"There was a problem posting your comment."});context.comment='';$scope.removeUpload(context);return false;}
data.embedly=JSON.stringify(context.embedly);}
if(context.upload){data.media=context.upload;}
if(context.mentions){data.mentioned=context.mentions.join(',');}
var apiData={url:Api.generateDynamicApi('POST_CREATE'),method:'POST',withCredentials:true,data:data};if(session&&session.user){apiData.headers={'X-Requested-By':session.user.requestBy};}
upload(apiData).then(function(response){if(response.data.errorMsg){Api.showError(response.data);}else if(response.data.id){$scope.newPosts[response.data.id]=response.data;}else{Api.showError({errorCode:'x',errorMsg:"There was a problem posting your comment."});}
$scope.posting=false;});context.comment='';$scope.removeUpload(context);};$scope.submitOnEnter=function(event,comment){if(event.keyCode==13&&!$scope.people){$scope.postComment(comment);event.preventDefault();}};$scope.removeUpload=function(context){var id="file_"+(context.id||'');var file=angular.element(document.getElementById(id));file.replaceWith(file.val('').clone(true));delete window.uploadedImage;delete context.preview;delete context.upload;};$scope.canEdit=function(post,action){if(!session.user||!session.user.userId){return false;}
if(session.isMod()||broadcasterService.channel.userId===session.user.userId){return true;}
if(post.user.userId==session.user.userId||$scope.newPosts[post.id]){return true;}
return false;};$scope.canPin=function(post){if(!session.user||!session.user.userId){return false;}
if(session.isMod()||broadcasterService.channel.userId===session.user.userId){if(!post.parentId){return true;}}
return false;};$scope.searchPeople=function(term){Api.algolia(term).success(function(data){angular.forEach(data.hits,function(user,i){user.displayName=Api.fullName(user);user.thumb=$scope.cdn.thumb+'/'+user.objectID+'/'+user.objectID+'.jpg';});$scope.people=data.hits;});};$scope.insertMention=function(item){$scope.people=undefined;return'<span class="mention-highlight" contenteditable="false" person="'+item.objectID+'">'+item.displayName+'</span>';};var extractMentions=function(context){var textarea=document.getElementById('textarea_'+(context.id||''));var spans=textarea.getElementsByClassName('mention-highlight');if(spans.length){context.mentions=[];angular.forEach(spans,function(span){var mention=angular.element(span);context.mentions.push(mention.text()+':'+mention.attr('person'));mention.text('@'+mention.text());});}
return context;};$scope.enterLiveChat=function(){broadcasterService.switchAsync(false);};$scope.goIfNotBroadcasting=function(callback,params){if(session.isBroadcasting||(guestService.guest&&guestService.guest.userId==session.user.userId)){session.preventBroadcastInterrupt();}else if(broadcasterService.broadcaster&&params===broadcasterService.broadcaster.userId){return false;}else{callback(params);}};$scope.trackBroadcaster=function(){trackingPixel.trackClick('BROADCASTER');};$scope.adclick=function(campaign){$rootScope.gaEvent('FEATURE',campaign,config.UILocale);};$scope.invalidCamera=function(){if(!swf.settingUpBroadcast){return false;}
var camera=webRtc.getCurrentConfig().webRtcStream;if(camera.getVideoTracks&&Api.browser.name=='Chrome'){camera=camera.getVideoTracks();if(camera[0].label&&camera[0].label.indexOf('ManyCam')!==-1){$modal.alert('We werenât able to detect your camera. Please check your browser settings. Note that ManyCam currently only works on <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">FireFox</a> for Mac.');}else{$modal.alert('We werenât able to detect your camera. Please check your browser settings.');}}else{$modal.alert('We werenât able to detect your camera. Please check your browser settings.');}};$scope.validCamera=function(){if(!swf.settingUpBroadcast){return false;}
var cameraExists=webRtc.checkIfCameraExists();if(!cameraExists){$modal.alert('We werenât able to detect your camera. Please check your browser settings.');}};$scope.isViewer=function(){return(guestService.state=='ready'&&!swf.settingUpBroadcast&&!session.isBroadcasting);};$scope.isWebrtcBroadcast=function(){return!externalStreamer.settings.active&&!externalStreamer.settings.streaming&&(swf.settingUpBroadcast||session.isBroadcasting||guestService.state!='ready');};$scope.deleteMoment=function(moment){removeMomentCard(moment);};$scope.hideCollection=function(moment){removeMomentCard(moment);};$scope.captureMoment=function(event){if(session.user.userId===0){$modal.loginModal();}else{if(!swf.settingUpBroadcast&&event.which!==3){swf.momentCapture();}}};store.getMomentGoodies();$scope.downloadDesktop=function(){$state.go('main.desktop');swf.snapshot=undefined;webRtc.destroy();broadcasterService.dropBroadcast(session.user.userId);externalStreamer.reset();swf.settingUpBroadcast=false;window.location.href="http://desktop.younow.com/download/version/latest";};$scope.$on('$destroy',function(){pusher.unsubscribe('publicChannel');pusher.unsubscribe('presenceChannel');$window.onbeforeunload=null;angular.element($window).off('resize');});$scope.guestService=guestService;$scope.externalStreaming=externalStreamer.settings;$scope.settings=webRtc.settings;function removeMomentCard(moment){for(var i=0;i<broadcasterService.channel.moments.length;i++){if(broadcasterService.channel.moments[i].momentId===moment.momentId){broadcasterService.channel.moments.splice(i,1);}}}}).directive('uploadProfileImage',function($rootScope){return{restrict:'A',scope:{uploadEndpoint:'@',uploadName:'@',doUpload:'&'},link:function(scope,elem,attr,ctrl){elem.bind('change',function(event){scope.doUpload()(elem,scope.uploadEndpoint,scope.uploadName);});}};}).controller('ChannelDetailCtrl',function(Api,$rootScope,$scope,$http,$state,$location,$stateParams,$timeout,config,broadcasterService,swf,eventbus,session,trackingPixel,$modal,$interval){if($rootScope.banners&&$rootScope.banners.sticky&&$rootScope.banners.sticky.active){Api.closeTopBanner($rootScope.banners.sticky.group);}
var async=$stateParams.async?true:false;var uri=$location.search();if(!$stateParams.profileUrlString){broadcasterService.featuredBroadcaster();return false;}
if(!broadcasterService.broadcaster||broadcasterService.broadcaster.profile!==$stateParams.profileUrlString){broadcasterService.switchBroadcaster($stateParams.profileUrlString,true,async);}else if(!swf.settingUpBroadcast){broadcasterService.switchAsync(async);}});angular.module('younow.desktop',[]).config(function($stateProvider){$stateProvider.state('main.desktop',{url:'/desktop/:action',templateUrl:'angularjsapp/src/app/states/main/desktop/desktop.tpl.html',params:{action:{value:null,squash:true}},controller:'DesktopCtrl',controllerAs:'vm'});}).controller('DesktopCtrl',function($stateParams){var vm=this;if($stateParams.action==='download'){window.location.href="http://desktop.younow.com/download/version/latest";}});angular.module('younow.explore',[]).config(function($stateProvider){$stateProvider.state('main.explore',{url:'/explore/:tag?q',params:{tag:{value:null,squash:true},q:{value:null,squash:true}},templateUrl:'angularjsapp/src/app/states/main/explore/explore.tpl.html',controller:'ExploreCtrl'});}).controller('ExploreCtrl',function($window,$rootScope,$scope,$stateParams,$location,$timeout,$modal,config,Api,broadcasterService,swf,$state,trackingPixel,eventbus,trackingPixel,debug,$filter){broadcasterService.exploreBroadcaster=undefined;$scope.showMiniplayer=false;$scope.results=[];$scope.queue=[];$scope.broadcasterService=broadcasterService;$scope.swf=swf;$scope.gettingItems=false;$scope.getQueueLoading=false;$scope.getQueue=function(){if($scope.getQueueLoading){return false;}
var params={numberOfRecords:20,startFrom:$scope.queue.length||0,locale:config.UILocale};var query=$scope.query;if(query.substr(0,1)==="#"){query=query.substr(1);params.tag=query;$scope.getQueueLoading=true;Api.get("YOUNOW_QUEUE",params).success(function(data){$scope.getQueueLoading=false;if(data.queues&&data.queues[0]&&data.queues[0].items){data.data=data.queues[0].items;if(data.data.length>8){for(var d in data.data){for(var q in $scope.queue){if(data.data[d]&&$scope.queue[q]&&data.data[d].userId==$scope.queue[q].userId){delete data.data[d];}}}
data.data=data.data.slice(0,8);$scope.queueMore=true;}else{$scope.queueMore=false;}
if(!$scope.broadcast){$scope.broadcast=data.data[0];$scope.showMiniplayer=true;$scope.broadcast.tag=query;$scope.selectUser($scope.broadcast,true);}
handleQueue(data);}});}};$scope.getItems=function(query,numberOfRecords){if($scope.getItemsLoading){return false;}
if(!query&&query!==''){query=$scope.query;}
if(!$scope.results||query!==$scope.query){$scope.results=[];}
$scope.query=query;var params={numberOfRecords:numberOfRecords||20,startFrom:$scope.results.length||0,locale:config.UILocale};if(!query){$scope.getItemsLoading=true;$scope.resultsView='old';return Api.get("younow/trendingUsers",params).success(function(data){$scope.getItemsLoading=false;if(data.trending_users){data.data=data.trending_users;handleResults(data);}});}else if(query.substr(0,1)==="#"){if(!$scope.queue.length){$scope.getQueue($scope.query,8);}
query=query.substr(1);params.tag=query;$scope.getItemsLoading=true;delete params.locale;$scope.resultsView='new';return Api.get("YOUNOW_TOP_BROADCASTERS",params).success(function(data){$scope.getItemsLoading=false;if(data.items&&data.items[0]){data.data=data.items;handleResults(data);}
if(config.settings.featuredTags[config.UILocale]&&$stateParams.tag){var tags=config.settings.featuredTags[config.UILocale],i=0;for(i;i<tags.length;i++){if(query===tags[i].tag){getEps(query);return false;}}}});}else{$scope.resultsView='old';var restrict=query.substr(0,1)==="#"?"tag":false;if(restrict){query=query.substr(1);}
var limit=params.numberOfRecords;var page=params.numberOfRecords?Math.round(params.startFrom/params.numberOfRecords):0;$scope.getItemsLoading=true;return Api.algolia(query,restrict,limit,page).success(function(data){$scope.getItemsLoading=false;if(data.hits){handleResults(data);}});}};if(!Api.store('hideYounowLanding')&&!$stateParams.q){if($stateParams&&$stateParams.tag&&$stateParams.tag.length>0){Api.showTopBanner('#'+$stateParams.tag+' '+'<span translate="explore_welcome_title_tag">','<span translate="explore_welcome_text_tag" translate-values="{value: \''+$stateParams.tag+'\'}"></span>',undefined,undefined,'success',true,'banner');}else{Api.showTopBanner('<span translate="explore_welcome_title"></span>','<span translate="explore_welcome_text"></span>','<span translate="explore_welcome_lucky"></span>','/featured','success',true,'banner');}
Api.store('hideYounowLanding',true);}
$scope.query=$stateParams.tag?"#"+$stateParams.tag:$stateParams.q;$rootScope.title=$stateParams.tag?'YouNow | '+$stateParams.tag+' | Live Stream Video Chat | Free Apps on Web, iOS & Android':'YouNow | Live Stream Video Chat | Free Apps on Web, iOS and Android';$scope.getItems($scope.query).then(function(response){$scope.selectUser($scope.results[0],true);if(!$scope.query){getVips();}}).catch(function(e){console.warn(e);});$scope.tag=($stateParams.q||$stateParams.tag?$scope.query:'').replace('#','');var path=$scope.query?'/explore/'+$scope.query:'/explore/';$rootScope.gaPage({page:'Explore',path:path});$scope.getItemsLoading=false;var handleQueue=function(data){if(data.data&&config.settings.UseBroadcastThumbs){$scope.useBroadcastThumbs=true;}
if(data.data){angular.forEach(data.data,function(user,i){if(user.tags){user.tag=user.tags[0];}
user.level=Math.round(user.level||user.userlevel);user.fullName=Api.fullName(user);user.thumb=getBroadcastThumb(user);});data.totalUsers=data.totfal;$scope.queue=$scope.queue.concat(data.data);}
$scope.noresults=$scope.queue.length===0;if($scope.queue.length>=data.nbHits){$scope.finished=true;}};var handleResults=function(data){if(data.data&&config.settings.UseBroadcastThumbs){$scope.useBroadcastThumbs=true;}
if(data.data){angular.forEach(data.data,function(user,i){if(!user.profile){user.profile=user.name||user.username;}
if(user.tags){user.tag=user.tags[0];}
user.level=Math.round(user.level||user.userlevel);user.fullName=Api.fullName(user);user.thumb=getBroadcastThumb(user);user.thumb_backup=config.imageApis.nothumb;user.cover=config.imageApis.cover+'/'+user.userId+'/'+user.userId+'.jpg';user.views=user.views?Api.squashedNumber(user.views,3):undefined;});data.totalUsers=data.totfal;$scope.results=$scope.results.concat(data.data);}
if(data.hits){angular.forEach(data.hits,function(user,i){user.userId=user.objectID;user.fullName=Api.fullName(user);user.thumb=getBroadcastThumb(user);});$scope.results=$scope.results.concat(data.hits);}
$scope.noresults=$scope.results.length===0;if($scope.results.length>=data.nbHits){$scope.finished=true;}};var getBroadcastThumb=function(user,backup){if(!user.broadcastId&&user.objectID){user.broadcastId=user.objectID;}
var thumb;if(user.broadcastId&&config.settings.UseBroadcastThumbs){thumb=Api.generateDynamicApi('BROADCAST_THUMB_DYNAMIC')+'/'+user.broadcastId+'/'+user.broadcastId+'.jpg';if(backup){thumb=config.imageApis.broadcast+'/'+user.broadcastId+'/'+user.broadcastId+'.jpg';}}else if(user.tag&&user.tag.length>0&&user.broadcastId&&config.settings.UseBroadcastThumbs){thumb=config.imageApis.broadcast+'/'+user.broadcastId+'/'+user.broadcastId+'.jpg';}else{thumb=config.imageApis.thumb+'/'+user.userId+'/'+user.userId+'.jpg';}
return thumb;};$scope.selectUser=function(user,initial,instant){$scope.selectingUser=user;if(user&&user.tag){var curId=broadcasterService.exploreBroadcaster&&broadcasterService.exploreBroadcaster.userId?broadcasterService.exploreBroadcaster.userId:0;Api.get('BROADCAST_INFO',{channelId:user.userId,curId:curId}).success(function(data){$scope.selectingUser=false;if(data.user===undefined||data.user===null){if(!initial){$scope.showProfileSummary(user.userId);}
return false;}
data.user.displayName=Api.fullName(data.user);$scope.broadcast=data;if(instant){$scope.showBroadcast();return false;}
$scope.showMiniplayer=true;broadcasterService.exploreBroadcaster=$scope.broadcast;trackBroadcast();},function(){$scope.selectingUser=false;});}else{trackBroadcast();if(!initial&&user){$scope.showProfileSummary(user.userId);}}};var trackBroadcast=function(){eventbus.notifySubscribers('broadcaster:beforeChange',{});broadcasterService.exploreBroadcaster=broadcasterService.channelFormat(broadcasterService.exploreBroadcaster);broadcasterService.updateBc(broadcasterService.exploreBroadcaster);};$scope.showProfileSummary=function(id){$modal.profileSummary(id);};var getVips=function(){Api.get('YOUNOW_VIPS',{locale:config.UILocale}).then(function(response){if(response.data.users&&response.data.users.length>0){for(var user in response.data.users){if(window.location.protocol==='https:'&&response.data.users[user].thumbnail.indexOf('https')===-1){response.data.users[user].thumbnail=response.data.users[user].thumbnail.replace("http","https");}
response.data.users[user].name=Api.fullName(response.data.users[user]);}
$scope.vips={list:response.data.users};}});};var getEps=function(tag){Api.get('YOUNOW_FEATURED_ON_TOPIC_USERS',{locale:config.UILocale,tag:tag},true).then(function(response){$scope.eps={list:response.data.featuredUsers};});};$scope.showTag=function(event,tag){trackingPixel.trackClick('TAG',{field1:'EXPLORE'});event.stopPropagation();$state.go($state.current,{tag:tag,q:undefined},{reload:true});$rootScope.gaEvent('Conversion','Click Tag',trackingPixel.getUserLocation()||'ANCILLARY');};$scope.showBroadcast=function(){broadcasterService.updateBroadcaster($scope.broadcast);broadcasterService.showBroadcaster();};$scope.trackBroadcaster=function(){trackingPixel.trackClick('BROADCASTER');};$scope.expandInfiniteBroadcasters=function(id,threshold){var el=document.getElementById(id);el.height=el.height+(threshold||100);};$scope.$on('$destroy',function(){eventbus.notifySubscribers('broadcast:end',$scope.broadcast);if($rootScope.banners&&$rootScope.banners.sticky&&$rootScope.banners.sticky.active){Api.closeTopBanner($rootScope.banners.sticky.group);}});}).directive("topBroadcastersHeight",function($window){return function(scope,element,attrs){angular.element($window).on("scroll",function(){element[0].style['max-height']='calc(100vh + '+this.pageYOffset+'px - 400px)';});scope.$on('$destroy',function(){angular.element($window).off("scroll");});};});(function(){angular.module('younow.leaderboard',[]).directive('leaderboardHeader',function(){return{restrict:'E',templateUrl:'angularjsapp/src/app/states/main/leaderboards/leaderboard-header.tpl.html',scope:{title:'@',icon:'@',time:'='},link:function(scope){scope.color='';scope.leaderBoardColors={'leaderboards_top_broadcasters':'#9332fc','leaderboards_top_fans':'#fc3293','leaderboards_top_moment_create':'#0293fc','leaderboards_editors_choice':'#7ed321'};function setLeaderboardColor(title){scope.color=scope.leaderBoardColors[title];}
setLeaderboardColor(scope.title);}};}).directive('leaderboard',function($modal,trpx,session,config){return{restrict:'E',templateUrl:'angularjsapp/src/app/states/main/leaderboards/leaderboard-single.tpl.html',scope:{list:'=',target:'@'},link:function(scope){scope.nothumb=config.imageApis.nothumb;scope.cells=scope.list.pageList;scope.dataTracking={'editors_choice':'LEADERBOARD_EDITORSCHOICE','top_broadcasters':'LEADERBOARD_TOPBROADCASTER','top_fans':'LEADERBOARD_TOPFAN','moment_creators':'LEADERBOARD_MAKER'};scope.showProfileSummary=function(id,params,state){$modal.profileSummary(id,params,state);trpx.capture({event:'CLICK',userid:session.user.userId,doorid:id,extradata:scope.dataTracking[scope.target]},trpx.captureGroups.trackevents);};}};});})();angular.module('younow.leaderboards',[]).config(function($stateProvider){$stateProvider.state('main.leaderboards',{url:'/featured',templateUrl:'angularjsapp/src/app/states/main/leaderboards/leaderboards.tpl.html',controller:'LeaderboardCtrl',controllerAs:'vm'});}).controller('LeaderboardCtrl',function(Api,session,config,trpx){var vm=this;vm.session=session;var locale=config.UILocale;config.init.then(function(){trpx.capture({event:'PAGE_VIEW',extradata:'LEADERBOARDS',userid:vm.session.user.userId},trpx.captureGroups.trackevents);});vm.leaderboards={topBroadcasters:{list:[],pageList:[],params:{apiMap:'YOUNOW_LB_TOP_BROADCASTERS',locale:locale,page:0,records:100},time:{range:''},hasMore:true},topFans:{list:[],pageList:[],params:{apiMap:'YOUNOW_LB_TOP_SPENDERS',locale:locale,page:0,records:100},time:{range:''},hasMore:true},momentCreators:{list:[],pageList:[],params:{apiMap:'YOUNOW_LB_TOP_CREATORS',locale:locale,page:0,records:100},time:{range:''},hasMore:true},editorsChoice:{list:[],pageList:[],params:{apiMap:'YOUNOW_LB_EDITORS_CHOICE',locale:locale,page:0,records:100},hasMore:true}};vm.fetchLeaderboards=function(){getLeaderboardData(vm.leaderboards.topBroadcasters);getLeaderboardData(vm.leaderboards.topFans);getLeaderboardData(vm.leaderboards.momentCreators);getLeaderboardData(vm.leaderboards.editorsChoice);};vm.fetchMoreInLeaderBoard=function(leaderboard){var count=leaderboard.params.page;var nextSection=leaderboard.list.slice((count*10),(count*10)+10);for(var i=0;i<nextSection.length;i++){leaderboard.pageList.push(nextSection[i]);}
leaderboard.params.page+=1;};function getLeaderboardData(leaderboard){Api.get(leaderboard.params.apiMap,leaderboard.params).then(function(response){if(response.data.period){leaderboard.time['range']=response.data.period;}
for(var i=0;i<response.data.users.length;i++){var currentLbUser=response.data.users[i];currentLbUser.src=config.imageApis.thumb+'/'+currentLbUser.userId+'/'+currentLbUser.userId+'.jpg';currentLbUser.position=((leaderboard.params.page*10)+(i+1)).toString();if(currentLbUser.likes){currentLbUser.likes=Api.squashedNumber(currentLbUser.likes,2);}
if(currentLbUser.totalFans){currentLbUser.totalFansSquashed=Api.squashedNumber(currentLbUser.totalFans,2,1);}
if(currentLbUser.broadcasters){currentLbUser.fanList=topSpendersToString(currentLbUser.broadcasters.names,currentLbUser.broadcasters.count,currentLbUser.moreFans);}
leaderboard.list.push(response.data.users[i]);}
initFetchLeaderboard(leaderboard);});}
function initFetchLeaderboard(leaderboard){vm.fetchMoreInLeaderBoard(leaderboard);}
function topSpendersToString(array,additional,plusMoreBool){var plusMore='';var spenderString='';if(additional>3){plusMore=' + '+(additional-1).toString();spenderString=array[0].concat(plusMore);plusMoreBool=true;}else{spenderString=array[0];}
return spenderString;}
vm.fetchLeaderboards();});angular.module('younow.missing',[]).config(["$stateProvider",function config($stateProvider){$stateProvider.state('main.missing',{url:'',templateUrl:'angularjsapp/src/app/states/main/missing/missing.tpl.html',controller:'MissingCtrl'});}]).controller('MissingCtrl',["$scope","$location",function HomeController($scope,$location){$scope.username=$location.path().split('/')[1];}]);angular.module('younow.momentsFeed',[]).config(function($stateProvider){$stateProvider.state('main.momentsFeed',{url:'/moments/:typeOfFeed',templateUrl:'angularjsapp/src/app/states/main/moments-feed/moments-feed.tpl.html',params:{typeOfFeed:{value:null,squash:true}},controller:'MomentsFeedCtrl',controllerAs:'vm'});}).controller('MomentsFeedCtrl',function($timeout,$state,$scope,ab,Api,session,config,broadcasterService,swf,eventbus,$state,$stateParams,trpx,store){var vm=this;var records=20;var page=0;var momentsAdded={};var locale=config.UILocale;vm.currentFeed='';vm.moments=[];vm.finished=false;swf.momentVolume=100;function resetMyFeed(){records=20;page=0;momentsAdded={};vm.moments=[];vm.finished=false;}
vm.getMoreMoments=function(){if(vm.currentFeed==='YOUNOW_LB_TRENDING_MOMENTS'){vm.getTrendingMoments();}else{vm.getItems();}};vm.getItems=function(){if(vm.currentFeed==='YOUNOW_LB_TRENDING_MOMENTS'){resetMyFeed();}
vm.currentFeed="MOMENT_FEED";if($stateParams.typeOfFeed!==undefined){$state.go('main.momentsFeed',{typeOfFeed:undefined,notify:false});}
vm.finished=true;Api.get(Api.generateDynamicApi('MOMENT_FEED'),{userId:session.user.userId,page:page++,records:records}).then(function(response){if(response.data&&response.data.items){for(var i=0;i<response.data.items.length;i++){var id=response.data.items[i].momentId||response.data.items[i].collectionId;broadcasterService.parseMomentType(response.data.items[i]);Api.addUniqueItem(vm.moments,momentsAdded,response.data.items[i],id);}
vm.finished=!response.data.hasMore;}});};vm.getTrendingMoments=function(origin){var locationOfChange;if(origin&&origin==='YOUNOW_LB_TRENDING_MOMENTS'){return false;}
if(vm.currentFeed==='MOMENT_FEED'){resetMyFeed();vm.currentFeed='YOUNOW_LB_TRENDING_MOMENTS';if(origin&&origin==='MOMENT_FEED'){locationOfChange='MOMENT_TRENDING_FEED';}else{locationOfChange='MOMENT_TRENDING_EXPLORE';}
trpx.capture({event:'CLICK',extradata:locationOfChange,},trpx.captureGroups.trackevents);}
vm.finished=true;Api.get(Api.generateDynamicApi('YOUNOW_LB_TRENDING_MOMENTS'),{userId:session.user.userId,page:page++,records:records,locale:locale}).then(function(response){if(response.data&&response.data.moments){$state.go('main.momentsFeed',{typeOfFeed:'trending',notify:false});for(var i=0;i<response.data.moments.length;i++){var id=response.data.moments[i].momentId||response.data.moments[i].collectionId;broadcasterService.parseMomentType(response.data.moments[i]);Api.addUniqueItem(vm.moments,momentsAdded,response.data.moments[i],id);}
vm.finished=!response.data.hasMore;}});};vm.loadMoreMoments=function(){if(vm.currentFeed==='YOUNOW_LB_TRENDING_MOMENTS'){vm.getTrendingMoments();}else{vm.getItems();}};vm.removeFromFeed=function(moment){for(var i=0;i<vm.moments.length;i++){if(vm.moments[i].momentId===moment.momentId){vm.moments.splice(i,1);momentsAdded[moment.momentId]=null;}}};eventbus.subscribe('session:loggedIn',function(event,loggedIn){if(!loggedIn){$state.go('main.channel.detail');}},'momentfeed',$scope);function sortFeed(){ab.ready.then(function(){if(session.user&&session.user.userId>0){vm.inExperiment=ab.variant('TRENDING_MOMENTS')==='B';if($stateParams&&$stateParams.typeOfFeed==='trending'&&vm.inExperiment){vm.currentFeed='YOUNOW_LB_TRENDING_MOMENTS';}else{vm.currentFeed='MOMENT_FEED';}
if(vm.currentFeed==='MOMENT_FEED'){vm.getItems();}else{vm.getTrendingMoments();}}else{$state.go('main.channel.detail');}});}
if(store.momentGoodies.length===0){store.getMomentGoodies();}
sortFeed();});angular.module('younow.settings',[]).config(["$stateProvider",function config($stateProvider){$stateProvider.state('main.settings',{url:'/settings',templateUrl:'angularjsapp/src/app/states/main/settings/settings.tpl.html',controller:'SettingsCtrl',params:{section:null}});}]).controller('SettingsCtrl',["$scope","$window","$timeout","$state","Api","session","config","Facebook","eventbus","trackingPixel","$modal","ab","$stateParams","$location",function HomeController($scope,$window,$timeout,$state,Api,session,config,Facebook,eventbus,trackingPixel,$modal,ab,$stateParams,$location){if($stateParams.section){$location.hash($stateParams.section);}
$scope.editing=true;$scope.session=session;var pagesAuth;$scope.fbPages={};$scope.config=config;$scope.onbehalf={userId:0};$scope.emailRegex=/^((\"[^\"\f\n\r\t\v\b]+\")|([\w\!\#\$\%\&\'\*\+\-\~\/\^\`\|\{\}]+(\.[\w\!\#\$\%\&\'\*\+\-\~\/\^\`\|\{\}]+)*))@((\[(((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9])))\])|(((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9])))|((([A-Za-z0-9\-])+\.)+[A-Za-z\-]+))$/;$scope.checkWebsiteUrl=function(){var regex=/((http[s]?:\/{2})?www.facebook.com\/.+)/;if(regex.test($scope.settings.user.websiteUrl)){$scope.toEdit('websiteUrl',$scope.settings.user.websiteUrl);$scope.websiteUrlError=false;}else{if($scope.edits&&$scope.edits.websiteUrl){delete $scope.edits.websiteUrl;}
$scope.websiteUrlError=true;}};$scope.newSubscription=function(channelId,sub){var modal=$modal.subscribeModal(channelId,{source:'SETTINGS'});modal.result.then(function(data){if(window.YouNow.reloadSubscriptions){getSubscriptions('SETTINGS');}
window.YouNow.reloadSubscriptions=false;});modal.result.catch(function(data){if(window.YouNow.reloadSubscriptions){getSubscriptions('SETTINGS');}
window.YouNow.reloadSubscriptions=false;});};$scope.modifySubscription=function(channelId,sub){$modal.subscribeModal(channelId,{sub:sub,state:'payment',source:'SETTINGS'});};$scope.cancelSubscription=function(channelId,sub){$modal.subscribeModal(channelId,{sub:sub,state:'cancel',source:'SETTINGS'});};var getSubscriptions=function(source){if(session.loggedIn){Api.get('CHANNEL_SUBSCRIPTIONS',{userId:$scope.onbehalf.userId}).success(function(data){$scope.subscriptions={};if(!data.errorCode){for(var k in data.subscriptions){$scope.subscriptions[k]=data.subscriptions[k];if($scope.subscriptions[k].subscriptionState.indexOf('CANCEL')>-1){delete $scope.session.subStatus[$scope.subscriptions[k].channelId];}else{$scope.session.subStatus[$scope.subscriptions[k].channelId]=true;}
var subMap={1:{name:'iOS',url:'http://www.apple.com/itunes/',manager:'iTunes'},2:{name:'Android',url:'https://play.google.com/store/account',manager:'Google Play'},3:{name:'YouNow.com'}};$scope.subscriptions[k].channelBadge=config.settings.BadgeBaseUrl+'/'+$scope.subscriptions[k].channelId+'/'+$scope.subscriptions[k].subscriptionType+'/badge@2x.png';$scope.subscriptions[k].channelThumb=config.imageApis.thumb+'/'+$scope.subscriptions[k].channelId+'/'+$scope.subscriptions[k].channelId+'.jpg';$scope.subscriptions[k].channelNoThumb=config.imageApis.nothumb;$scope.subscriptions[k].subscriptionPlatform=subMap[$scope.subscriptions[k].subscriptionPlatform];}}else{Api.showError(data);}});}};var getSubscription=function(k,subscription){if(!subscription||!subscription.subscriptionId){return false;}};if($location.hash()&&['accounts','privacy','notifications','subscriptions'].indexOf($location.hash())!==-1){$scope.page=$location.hash();}else{$scope.page='info';}
if($window.location.search.substr(0,5)=="?err="){Api.showTopNotification("Uh oh! You don't have an active YouTube account!");}
var fetchSettings=function(){if(session.loggedIn){if($scope.onbehalf.userId===0){$scope.onbehalf.userId=session.user.userId;}
Api.get('CHANNEL_SETTINGS',{userId:$scope.onbehalf.userId}).success(function(data){if(data.directStreaming){data.directStreaming.url='rtmp://'+data.directStreaming.host+'/liveapp';}
if(data.user){angular.forEach(data.options,function(option){if(option.optionValue==8){data.pubTwitter=option;}
if(option.optionValue==32){data.keepYoutube=option;}
if(option.optionValue==64){data.pubFacebook=option;}
if(option.optionValue==256){data.youtubeSimulcast=option;}
if(option.optionValue==512){data.hideCity=option;}
if(option.optionValue==1024){data.youtubeAnnotations=option;}
if(option.optionValue==4096){data.pubTumblr=option;}
if(option.optionValue==8192){data.getUpdates=option;}
if(option.optionValue==1073741824){data.filterNotifications=option;}});data.user.useprofile=Number(data.user.useprofile);$scope.settings=data;}
if(!data.user){$timeout(function(){Api.showError(data);$state.go('main.channel.detail');},0);}});}};$scope.fetchSettings=function(){fetchSettings();};if(session.loggedIn){fetchSettings();getSubscriptions();}
eventbus.subscribe('session:loggedIn',function(event,loggedIn){if(loggedIn){fetchSettings();getSubscriptions();}else{$timeout(function(){$state.go('main.channel.detail');},0);}},'settings',$scope);$scope.switchTab=function(tab){$scope.page=tab;$window.location.hash='#'+$scope.page;};$scope.startEdit=function(){$scope.editing=true;};$scope.cancelEdit=function(){$scope.editing=false;fetchSettings();};$scope.toEdit=function(key,value){$scope.editing=true;if(value=='placeholder'){if($scope.edits&&$scope.edits[key]){delete $scope.edits[key];}
return false;}
if(!$scope.edits){$scope.edits={};}
$scope.edits[key]=value;};$scope.toEditGoodies=function(key,value){$scope.editing=true;if(!$scope.edits){$scope.edits={};}
if(!$scope.edits.disabledGoodies){$scope.edits.disabledGoodies={};}
$scope.edits.disabledGoodies[key]=value;};$scope.saveChanges=function(){if($scope.infoForm.$invalid){if($scope.page!=='info'){$scope.page='info';}
eventbus.notifySubscribers('settings:invalid');return false;}
if($scope.edits){$scope.edits.userId=$scope.onbehalf.userId;$scope.edits.channelId=$scope.onbehalf.userId;for(var goo in $scope.edits.disabledGoodies){var track={event:'GOODIE_ON',extradata:goo};if($scope.edits.disabledGoodies[goo]){track.event='GOODIE_OFF';}
trackingPixel.capture(track);}
$scope.edits.disabledGoodies=JSON.stringify($scope.edits.disabledGoodies);Api.post('CHANNEL_UPDATE_SETTINGS',$scope.edits).success(function(data){if(!data.errorCode){Api.showTopNotification('Settings Saved','success');}else{Api.showError(data);}
fetchSettings();session.getSession();});if($scope.edits.facebookPageId){$scope.settings.websiteUrl="https://www.facebook.com/pages/"+$scope.edits.facebookPageTitle+'/'+$scope.edits.facebookPageId;$scope.settings.user.facebookPageId=$scope.edits.facebookPageId;$scope.settings.user.facebookPageToken=$scope.edits.facebookPageToken;$scope.settings.user.facebookPageTitle=$scope.edits.facebookPageTitle;$scope.gaEvent('CONNECT','SUCCESS_FBPAGES','SETTINGS');}
delete $scope.edits;}
$scope.fbPages.editing=false;$scope.editing=false;};$scope.disconnect=function(type){var params={userId:$scope.onbehalf.userId,channelId:$scope.onbehalf.userId};if(type==='deactivation'){params.deactivation=1;}else{params[type+'Connected']=0;}
if(type==='facebook'){params.facebookPageConnected=0;params.facebookOption=0;params.option_64=0;}
if(Api.store('lastNetwork')&&type==='deactivation'){session.authenticate[Api.store('lastNetwork')](true).then(function(response){if(response){response.locale=config.UILocale;response.channelId=$scope.onbehalf.userId||response.channelId;response.inviteString=session.inviteString||session.channelId;response.srcId=session.srcId||0;response.tmsid=window.YouNow.Bootstrap.tmId||'';response.userId=$scope.onbehalf.userId;var concatedParams=angular.extend({},params,response);Api.post('CHANNEL_UPDATE_SETTINGS',concatedParams).success(function(data){if(!data.errorCode){$scope.terminating=false;$scope.terminated=true;Api.showTopNotification('Logging you out...','success');session.logout();}else{Api.showError(data);}
fetchSettings();});}});}
if(type!=='deactivation'){Api.post('CHANNEL_UPDATE_SETTINGS',params).success(function(data){if(!data.errorCode){Api.showTopNotification('Account Disconnected','success');session.getSession();}else{Api.showError(data);}
fetchSettings();});}};$scope.loadFbPages=function(){$scope.fbPages.editing=true;$scope.fbPages.hasPages=true;if(!$scope.fbPages.pages||$scope.fbPages.pages.length===0){$scope.gaEvent('CONNECT','ATTEMPT_FBPAGES','SETTINGS');Facebook.getPagesList().then(function(response){if(response.data.length>0){pagesAuth=response.authResponse;$scope.fbPages.pages=response.data;$scope.fbPages.fbPageSelected=response.data[0];$scope.updateFbPage();$scope.fbPages.hasPages=true;}else{$scope.fbPages.hasPages=false;$scope.gaEvent('CONNECT','ERROR_FBPAGES','SETTINGS');}});}else{$scope.fbPages.fbPageSelected=$scope.fbPages.pages[0];$scope.updateFbPage();}};$scope.changeFbState=function(state){if(state==='cancel'){$scope.fbPages.editing=false;$scope.fbPages.fbPageSelected=undefined;if($scope.edits&&$scope.edits.facebookPageTitle){delete $scope.edits.facebookPageToken;delete $scope.edits.facebookPageTitle;delete $scope.edits.facebookPageId;}}
if(state==='disconnect'){$scope.updateFbPage(true);$scope.toEdit('option_64',0);$scope.saveChanges();}};$scope.updateFbPage=function(reset){if(reset){$scope.toEdit('facebookPageConnected',0);$scope.toEdit('facebookOption',0);delete $scope.edits.facebookPageToken;delete $scope.edits.facebookPageTitle;delete $scope.edits.facebookPageId;}else{$scope.toEdit('facebookOption',1);$scope.toEdit('facebookPageTitle',angular.copy($scope.fbPages.fbPageSelected.name));$scope.toEdit('facebookPageId',angular.copy($scope.fbPages.fbPageSelected.id));if(!$scope.edits.facebookPageToken||pagesAuth.accessToken!==$scope.edits.facebookPageToken){$scope.toEdit('facebookPageToken',pagesAuth.accessToken);}}};$scope.onbehalf.reset=function(){$scope.onbehalf.userId=session.user.userId;fetchSettings();getSubscriptions();};$scope.onbehalf.update=function(){fetchSettings();getSubscriptions();};$scope.checkYoutube=function(state){if(state===1){Api.get('CHANNEL_YOUTUBE_LIVE_ENABLED',{userId:$scope.onbehalf.userId}).success(function(data){if(data.errorCode!==0){$scope.settings.youtubeSimulcast.state=0;$scope.toEdit('option_256',0);Api.showTopNotification('Live streaming is not enabled on your Youtube account: <a target="_blank" href="https://www.youtube.com/live_streaming_signup">https://www.youtube.com/live_streaming_signup</a>','danger',false,false,5000);}});}};$scope.togglePushSubscribed=function(state){var trackevent={'field3':Api.os.name.split(' ')[0],'field4':Api.browser.name.split(' ')[0],'field7':Api.store('oneSignalId')};if(state===1){window.OneSignal.push(["setSubscription",true]);trackevent.event='SETTINGS_OPT_IN';}else{window.OneSignal.push(["setSubscription",false]);trackevent.event='SETTINGS_OPT_OUT';}
trackingPixel.capture(trackevent);};config.init.then(function(){window.OneSignal.push(["isPushNotificationsEnabled",function(enabled){if(enabled){$scope.pushSubscribed=1;$scope.pushEnabled=true;}else{window.OneSignal.getSubscription().then(function(notUnsubscribed){if(!notUnsubscribed){$scope.pushSubscribed=0;$scope.pushEnabled=true;}});}}]);});$scope.resetStreamKey=function(){Api.post('CHANNEL_RESET_STREAM_KEY',{userId:$scope.onbehalf.userId,channelId:$scope.onbehalf.userId}).success(function(data){if(!data.errorCode){$scope.settings.directStreaming.stream=data.streamKey;}else{Api.showError(data);}});};$scope.locale=[];angular.forEach(config.settings.Locales,function(locale,code){var loco={code:locale.loc[0],name:locale.name};if(!loco.code){if(loco.name=='English'){loco.code='en';}
if(loco.name=='Worldwide'){loco.code='ww';}}
$scope.locale.push(loco);});$scope.locale.sort(function(a,b){return a.name===b.name?0:a.name>b.name?1:-1;});$scope.locale.unshift({code:"placeholder",name:"Please Select"});$scope.state=[{code:"placeholder",name:"Please Select"},{code:"",name:""},{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"DC",name:"District of Columbia"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}];$scope.country=[{code:"placeholder",name:"Please Select"},{code:"AF",name:"Afghanistan"},{code:"AX",name:"Aland Islands"},{code:"AL",name:"Albania"},{code:"DZ",name:"Algeria"},{code:"AS",name:"American Samoa"},{code:"AD",name:"Andorra"},{code:"AO",name:"Angola"},{code:"AI",name:"Anguilla"},{code:"AQ",name:"Antarctica"},{code:"AG",name:"Antigua and Barbuda"},{code:"AR",name:"Argentina"},{code:"AM",name:"Armenia"},{code:"AW",name:"Aruba"},{code:"AU",name:"Australia"},{code:"AT",name:"Austria"},{code:"AZ",name:"Azerbaijan"},{code:"BS",name:"Bahamas"},{code:"BH",name:"Bahrain"},{code:"BD",name:"Bangladesh"},{code:"BB",name:"Barbados"},{code:"BY",name:"Belarus"},{code:"BE",name:"Belgium"},{code:"BZ",name:"Belize"},{code:"BJ",name:"Benin"},{code:"BM",name:"Bermuda"},{code:"BT",name:"Bhutan"},{code:"BO",name:"Bolivia"},{code:"BA",name:"Bosnia and Herzegovina"},{code:"BW",name:"Botswana"},{code:"BV",name:"Bouvet Island"},{code:"BR",name:"Brazil"},{code:"IO",name:"British Indian Ocean Territory"},{code:"BN",name:"Brunei Darussalam"},{code:"BG",name:"Bulgaria"},{code:"BF",name:"Burkina Faso"},{code:"BI",name:"Burundi"},{code:"KH",name:"Cambodia"},{code:"CM",name:"Cameroon"},{code:"CA",name:"Canada"},{code:"CV",name:"Cape Verde"},{code:"KY",name:"Cayman Islands"},{code:"CF",name:"Central African Republic"},{code:"TD",name:"Chad"},{code:"CL",name:"Chile"},{code:"CN",name:"China"},{code:"CX",name:"Christmas Island"},{code:"CC",name:"Cocos (Keeling) Islands"},{code:"CO",name:"Colombia"},{code:"KM",name:"Comoros"},{code:"CG",name:"Congo"},{code:"CD",name:"Congo, The Democratic Republic of the"},{code:"CK",name:"Cook Islands"},{code:"CR",name:"Costa Rica"},{code:"HR",name:"Croatia"},{code:"CU",name:"Cuba"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czech Republic"},{code:"DK",name:"Denmark"},{code:"DJ",name:"Djibouti"},{code:"DM",name:"Dominica"},{code:"DO",name:"Dominican Republic"},{code:"EC",name:"Ecuador"},{code:"EG",name:"Egypt"},{code:"SV",name:"El Salvador"},{code:"GQ",name:"Equatorial Guinea"},{code:"ER",name:"Eritrea"},{code:"EE",name:"Estonia"},{code:"ET",name:"Ethiopia"},{code:"FK",name:"Falkland Islands (Malvinas)"},{code:"FO",name:"Faroe Islands"},{code:"FJ",name:"Fiji"},{code:"FI",name:"Finland"},{code:"FR",name:"France"},{code:"GF",name:"French Guiana"},{code:"PF",name:"French Polynesia"},{code:"TF",name:"French Southern Territories"},{code:"GA",name:"Gabon"},{code:"GM",name:"Gambia"},{code:"GE",name:"Georgia"},{code:"DE",name:"Germany"},{code:"GH",name:"Ghana"},{code:"GI",name:"Gibraltar"},{code:"GR",name:"Greece"},{code:"GL",name:"Greenland"},{code:"GD",name:"Grenada"},{code:"GP",name:"Guadeloupe"},{code:"GU",name:"Guam"},{code:"GT",name:"Guatemala"},{code:"GG",name:"Guernsey"},{code:"GN",name:"Guinea"},{code:"GW",name:"Guinea-Bissau"},{code:"GY",name:"Guyana"},{code:"HT",name:"Haiti"},{code:"HM",name:"Heard Island and McDonald Islands"},{code:"VA",name:"Holy See (Vatican City State)"},{code:"HN",name:"Honduras"},{code:"HK",name:"Hong Kong"},{code:"HU",name:"Hungary"},{code:"IS",name:"Iceland"},{code:"IN",name:"India"},{code:"ID",name:"Indonesia"},{code:"IR",name:"Iran, Islamic Republic of"},{code:"IQ",name:"Iraq"},{code:"IE",name:"Ireland"},{code:"IM",name:"Isle of Man"},{code:"IL",name:"Israel"},{code:"IT",name:"Italy"},{code:"CI",name:"Ivory Coast"},{code:"JM",name:"Jamaica"},{code:"JP",name:"Japan"},{code:"JE",name:"Jersey"},{code:"JO",name:"Jordan"},{code:"KZ",name:"Kazakhstan"},{code:"KE",name:"Kenya"},{code:"KI",name:"Kiribati"},{code:"KP",name:"Korea, Democratic People's Republic of"},{code:"KR",name:"Korea, Republic of"},{code:"KW",name:"Kuwait"},{code:"KG",name:"Kyrgyzstan"},{code:"LA",name:"Lao People's Democratic Republic"},{code:"LV",name:"Latvia"},{code:"LB",name:"Lebanon"},{code:"LS",name:"Lesotho"},{code:"LR",name:"Liberia"},{code:"LY",name:"Libyan Arab Jamahiriya"},{code:"LI",name:"Liechtenstein"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"MO",name:"Macao"},{code:"MK",name:"Macedonia, The Former Yugoslav Republic of"},{code:"MG",name:"Madagascar"},{code:"MW",name:"Malawi"},{code:"MY",name:"Malaysia"},{code:"MV",name:"Maldives"},{code:"ML",name:"Mali"},{code:"MT",name:"Malta"},{code:"MH",name:"Marshall Islands"},{code:"MQ",name:"Martinique"},{code:"MR",name:"Mauritania"},{code:"MU",name:"Mauritius"},{code:"YT",name:"Mayotte"},{code:"MX",name:"Mexico"},{code:"FM",name:"Micronesia, Federated States of"},{code:"MD",name:"Moldova, Republic of"},{code:"MC",name:"Monaco"},{code:"MN",name:"Mongolia"},{code:"ME",name:"Montenegro"},{code:"MS",name:"Montserrat"},{code:"MA",name:"Morocco"},{code:"MZ",name:"Mozambique"},{code:"MM",name:"Myanmar"},{code:"NA",name:"Namibia"},{code:"NR",name:"Nauru"},{code:"NP",name:"Nepal"},{code:"NL",name:"Netherlands"},{code:"AN",name:"Netherlands Antilles"},{code:"NC",name:"New Caledonia"},{code:"NZ",name:"New Zealand"},{code:"NI",name:"Nicaragua"},{code:"NE",name:"Niger"},{code:"NG",name:"Nigeria"},{code:"NU",name:"Niue"},{code:"NF",name:"Norfolk Island"},{code:"MP",name:"Northern Mariana Islands"},{code:"NO",name:"Norway"},{code:"OM",name:"Oman"},{code:"PK",name:"Pakistan"},{code:"PW",name:"Palau"},{code:"PS",name:"Palestinian Territory, Occupied"},{code:"PA",name:"Panama"},{code:"PG",name:"Papua New Guinea"},{code:"PY",name:"Paraguay"},{code:"PE",name:"Peru"},{code:"PH",name:"Philippines"},{code:"PN",name:"Pitcairn"},{code:"PL",name:"Poland"},{code:"PT",name:"Portugal"},{code:"PR",name:"Puerto Rico"},{code:"QA",name:"Qatar"},{code:"RE",name:"Reunion"},{code:"RO",name:"Romania"},{code:"RU",name:"Russian Federation"},{code:"RW",name:"Rwanda"},{code:"BL",name:"Saint Barth"},{code:"SH",name:"Saint Helena"},{code:"KN",name:"Saint Kitts and Nevis"},{code:"LC",name:"Saint Lucia"},{code:"MF",name:"Saint Martin"},{code:"PM",name:"Saint Pierre and Miquelon"},{code:"VC",name:"Saint Vincent and the Grenadines"},{code:"WS",name:"Samoa"},{code:"SM",name:"San Marino"},{code:"ST",name:"Sao Tome and Principe"},{code:"SA",name:"Saudi Arabia"},{code:"SN",name:"Senegal"},{code:"RS",name:"Serbia"},{code:"SC",name:"Seychelles"},{code:"SL",name:"Sierra Leone"},{code:"SG",name:"Singapore"},{code:"SK",name:"Slovakia"},{code:"SI",name:"Slovenia"},{code:"SB",name:"Solomon Islands"},{code:"SO",name:"Somalia"},{code:"ZA",name:"South Africa"},{code:"GS",name:"South Georgia and the South Sandwich Islands"},{code:"ES",name:"Spain"},{code:"LK",name:"Sri Lanka"},{code:"SD",name:"Sudan"},{code:"SR",name:"Suriname"},{code:"SJ",name:"Svalbard and Jan Mayen"},{code:"SZ",name:"Swaziland"},{code:"SE",name:"Sweden"},{code:"CH",name:"Switzerland"},{code:"SY",name:"Syrian Arab Republic"},{code:"TW",name:"Taiwan"},{code:"TJ",name:"Tajikistan"},{code:"TZ",name:"Tanzania, United Republic of"},{code:"TH",name:"Thailand"},{code:"TL",name:"Timor-Leste"},{code:"TG",name:"Togo"},{code:"TK",name:"Tokelau"},{code:"TO",name:"Tonga"},{code:"TT",name:"Trinidad and Tobago"},{code:"TN",name:"Tunisia"},{code:"TR",name:"Turkey"},{code:"TM",name:"Turkmenistan"},{code:"TC",name:"Turks and Caicos Islands"},{code:"TV",name:"Tuvalu"},{code:"UG",name:"Uganda"},{code:"UA",name:"Ukraine"},{code:"AE",name:"United Arab Emirates"},{code:"GB",name:"United Kingdom"},{code:"US",name:"United States"},{code:"UM",name:"United States Minor Outlying Islands"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VU",name:"Vanuatu"},{code:"VE",name:"Venezuela"},{code:"VN",name:"Viet Nam"},{code:"VG",name:"Virgin Islands, British"},{code:"VI",name:"Virgin Islands, U.S."},{code:"WF",name:"Wallis And Futuna"},{code:"EH",name:"Western Sahara"},{code:"YE",name:"Yemen"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"}];$scope.tshirt=[{code:"placeholder",name:"Select a size..."},{code:"s",name:"Small"},{code:"m",name:"Medium"},{code:"l",name:"Large"},{code:"xl",name:"X-Large"}];$scope.gender=[{code:"placeholder",name:"Select a gender..."},{code:"male",name:"Male"},{code:"female",name:"Female"}];$scope.youtubePrivacy=[{code:"unlisted",name:"Unlisted"},{code:"public",name:"Public"},{code:"private",name:"Private"}];var selects=['locale','state','country','gender','tshirt','youtubePrivacy'];$scope.select={};angular.forEach(selects,function(select){$scope.select[select]={};angular.forEach($scope[select],function(option){$scope.select[select][option.code]=option.name;});});}]).directive('ynValid',['Api','$compile','eventbus',function(Api,$compile,eventbus){return{restrict:'A',scope:{message:'@',isValid:'='},link:function(scope,elem,attrs){var tag=elem[0].tagName;function errorFeedback(){if(elem[0].className.indexOf('ng-invalid')!==-1){Api.triggerTooltip(elem,2500);}}
if(tag=='TEXTAREA'||tag=='INPUT'){elem.on('blur',errorFeedback);}
eventbus.subscribe('settings:invalid',errorFeedback,attrs.name,scope);}};}]);angular.module('younow.main',['ui.router','younow.header','younow.footer','younow.leftsidebar','younow.activity-panel','younow.explore','younow.momentsFeed','younow.desktop','younow.settings','younow.leaderboards','younow.channel']).config(["$stateProvider",function config($stateProvider){$stateProvider.state('main',{url:'',abstract:true,templateUrl:'angularjsapp/src/app/states/main/main.tpl.html',controller:'MainCtrl'});}]).controller('MainCtrl',function HomeController($scope,$rootScope,$modal,config,session,Api,broadcasterService,trackingPixel,$timeout,session,eventbus,$interval,$filter){$scope.session=session;$scope.broadcasterService=broadcasterService;if(!/Android/i.test(navigator.userAgent)&&!/BlackBerry/i.test(navigator.userAgent)&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&!/IEMobile/i.test(navigator.userAgent)){}else{window.location.href='/';}
$scope.session=session;$scope.onboardingCTA=function(){trackingPixel.trackClick('BANNER');$rootScope.gaEvent('Conversion','Click Welcome Banner CTA',trackingPixel.getUserLocation()||'ANCILLARY');Api.closeTopBanner("sticky");};if($rootScope.skipAgeGate){$rootScope.skipAgeGate=false;$modal.ageGate();}
var autofan={};autofan.fan=function(){if(!broadcasterService.broadcaster||broadcasterService.broadcaster.userId==session.loginData.id){return false;}
var post={userId:session.loginData.id,channelId:broadcasterService.broadcaster.userId,broadcastId:broadcasterService.broadcaster.broadcastId};Api.post('CHANNEL_FAN',post).then(function(response){if(response.data&&!response.data.errorCode){session.fanStatus[broadcasterService.broadcaster.userId]=true;broadcasterService.broadcaster.totalFans=broadcasterService.broadcaster.totalFans+1;Api.showTopNotification($filter('translate')('autofan_congrats',{value:((broadcasterService.broadcaster.profile||broadcasterService.channel.profile))}),'success',false,false,5000);}});};autofan.oldBroadcastId=0;autofan.watchedTime=0;autofan.show=function(){if(!session.user.userId){trackingPixel.capture({'event':'REGISTER_PROMPT'});}
$interval.cancel(autofan.watch);};autofan.check=function(){if(session.user&&!session.user.userId&&broadcasterService.broadcaster&&broadcasterService.broadcaster.broadcastId){if(broadcasterService.broadcaster.broadcastId!=autofan.oldBroadcastId){autofan.watchedTime=0;}else{autofan.watchedTime=autofan.watchedTime+1000;if(autofan.watchedTime==120000){autofan.show();}}
autofan.oldBroadcastId=broadcasterService.broadcaster.broadcastId;}};if(!session.autofanned&&session.loginData&&session.loginData.newUser){session.autofanned=true;autofan.fan();}
autofan.watch=$interval(autofan.check,1000);$scope.$on('$destroy',function(){$interval.cancel(autofan.watch);});});angular.module('younow.partner',['ui.router','younow.services.utils']).config(["$stateProvider","$urlRouterProvider","ApiProvider",function config($stateProvider,$urlRouterProvider,ApiProvider){ApiProvider.reRouteHandler('/partner/earnings','/partners/earnings');ApiProvider.reRouteHandler('/partner','/partners');ApiProvider.reRouteHandler('/partners/','/partners');ApiProvider.reRouteHandler('/partner.php','/partners');ApiProvider.reRouteHandler('/getPartnered','/partners');ApiProvider.reRouteHandler('/getpartnered','/partners');$stateProvider.state('/partners/earnings',{url:'/partners/earnings/:userId',templateUrl:'angularjsapp/src/app/states/partner/earnings.tpl.html',params:{userId:{value:null,squash:true}},controller:'PartnerEarningsCtrl',controllerAs:'vm'}).state('/partners/faq',{url:'/partners/faq',templateUrl:'angularjsapp/src/app/states/partner/faq.tpl.html',controller:'partnerCtrl',controllerAs:'vm'}).state('/partners',{url:'/partners',templateUrl:'angularjsapp/src/app/states/partner/partner.tpl.html',controller:'partnerCtrl',controllerAs:'vm'}).state('/partners/payment-settings',{url:'/partners/payment-settings',templateUrl:'angularjsapp/src/app/states/partner/payment-settings.tpl.html',controller:'paymentSettingsCtrl',controllerAs:'vm'});}]).controller('PartnerEarningsCtrl',function($scope,$rootScope,session,Api,$modal,config,upload,$document,$filter,$stateParams,$state,trpx){var chart,hours,earnings,date,tooltipEl;var monthMap={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"};var shortMonthMap={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"};var thisMonth=new Date();thisMonth.setDate(thisMonth.getDate());var lastMonth=new Date();lastMonth.setDate(1);lastMonth.setHours(-1);var lastDate=new Date();lastDate.setDate(lastDate.getDate()-30);$scope.months={thisMonth:{month:shortMonthMap[thisMonth.getMonth()],date:thisMonth.getDate(),year:1900+thisMonth.getYear()},lastMonth:{month:shortMonthMap[lastMonth.getMonth()],date:lastMonth.getDate()},thirtyDaysAgo:{month:shortMonthMap[lastDate.getMonth()],date:lastDate.getDate()}};$scope.thumb=config.imageApis.thumb;$scope.session=session;$scope.noThumb=config.imageApis.nothumb;$scope.cdn.base=config.settings.ServerCDNBaseUrl;$scope.optionsId=null;$scope.broadcasts=[];$scope.spenders=[];$scope.earningsMetaData=[];$scope.sentTo=[];$scope.newPartner=false;$scope.dayCount=30;var leftOffset,topOffset;var canvas=document.getElementById("chart");$scope.labels=['','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',''];$scope.series=['estimated earnings','hours broadcasted'];$scope.legend=true;$scope.data=[[],[]];$scope.topSpenders=[];$scope.colors=[{"fillColor":"rgba(152,55,254, .7)","highlightFill":"rgba(152,55,254, 1)","strokeColor":"transparent"},{"fillColor":"rgba(255,127,190, 1)","highlightFill":"rgba(251,51,149, 1)","strokeColor":"transparent"}];$scope.userOfInterest={};var dayMap={0:'Sunday -',1:'Monday -',2:'Tuesday -',3:'Wednesday -',4:'Thursday -',5:'Friday -',6:'Saturday -',7:'Sunday -'};function getMousePosition(e){if(e.pageX!==undefined&&e.pageY!==undefined){leftOffset=e.pageX;topOffset=e.pageY;}}
window.addEventListener("load",function(){chart=document.getElementById('earnings-chart');chart.addEventListener("mousedown",scroll);chart.addEventListener("mousemove",getMousePosition);hours=document.getElementById('hours');earnings=document.getElementById('value-of-broadcast');date=document.getElementById('date');tooltipEl=document.getElementById('chartjs-tooltip');});$scope.options={responsive:true,barValueSpacing:2,scaleShowLabels:false,showXAxisLabel:false,barStrokeWidth:1,customTooltips:function(tooltip){if(tooltip){chart.removeEventListener("mousemove",getMousePosition);chart.addEventListener("mousemove",getMousePosition);$scope.tooltip=null;tooltip.title=$scope.days[tooltip.labels.join("")].day;tooltip.earnings=$scope.days[tooltip.labels.join("")].earnings;if($scope.days[tooltip.labels.join("")].hours<1){tooltip.time={hours:false,duration:(Math.round($scope.days[tooltip.labels.join("")].hours*60*100)/100)};}else{tooltip.time={hours:true,duration:$scope.days[tooltip.labels.join("")].hours};}
tooltip.broadcastKey=$scope.days[tooltip.labels.join("")].broadcastKey;$scope.tooltip=tooltip;if(tooltip.chart){tooltipEl.style.opacity=1;chart.style.cursor="pointer";tooltipEl.style.left=leftOffset+"px";tooltipEl.style.top=topOffset-100+"px";}}else{chart.style.cursor="initial";tooltipEl.style.opacity=0;}}};function scroll(){if(tooltipEl.style.opacity==="1"){var scrollToElement=angular.element(document.getElementById($scope.tooltip.broadcastKey));var broadcastBucket=angular.element(document.getElementById('broadcast-bucket'));broadcastBucket.scrollTo(scrollToElement,1,500);}}
$scope.getStats=function(){var request=Api.get('CHANNEL_PARTNER_EARNINGS_STATS',{userId:$scope.userOfInterest.userId});request.then(function(response){if(response.data&&response.data.errorCode===102){Api.showTopNotification('A user with that ID does not exist!');$state.go('/partners');return false;}else if(response.data.result&&response.data.result.stats&&response.data.result.stats.total_views===0){$scope.newPartner=true;return false;}else{$scope.getSpenders();$scope.getBroadcasts();if($scope.userOfInterest.userId===session.user.userId){trpx.capture({event:'PAGE_VIEW',extradata:'ESTIMATED_EARNINGS',userid:session.user.userId},trpx.captureGroups.trackevents);}
$scope.days={};if(response.data.errorCode===0){response.data.result.stats.last_30_earnings=$filter('currency')(response.data.result.stats.last_30_earnings);response.data.result.payments.belowThreshold=Number(response.data.result.payments.current_balance)<response.data.result.payments.threshold?true:false;if(response.data.result.payments.belowThreshold){response.data.result.payments.progress=(Number(response.data.result.payments.current_balance)/response.data.result.payments.threshold)*100;response.data.result.payments.tilPayout=$filter('currency')((response.data.result.payments.threshold-Number(response.data.result.payments.current_balance)));response.data.result.payments.threshold=$filter('currency')(response.data.result.payments.threshold);}
response.data.result.payments.last_month_payment=$filter('currency')(response.data.result.payments.last_month_payment);response.data.result.payments.current_balance=$filter('currency')(response.data.result.payments.current_balance);response.data.result.payments.current_month=$filter('currency')(response.data.result.payments.current_month);response.data.result.stats.total_subscription_earnings=$filter('currency')(response.data.result.stats.total_subscription_earnings);var maxEarnings=(Math.round(response.data.result.graph.max_dollars_earned*100)/100);$scope.maxEarnings=$filter('currency')(Math.round(response.data.result.graph.max_dollars_earned*100)/100);if(response.data.result.graph.max_hours_broadcasted>24){response.data.result.graph.max_hours_broadcasted=24;}
var maxHours=(Math.round(response.data.result.graph.max_hours_broadcasted*100)/100);if(Math.round(response.data.result.graph.max_hours_broadcasted*1.1)===0){$scope.maxTime={hours:false,time:Math.round(Number(response.data.result.graph.max_hours_broadcasted*60))};}else{$scope.maxTime={hours:true,time:Math.round(response.data.result.graph.max_hours_broadcasted*1.1*100)/100};}
if(response.data.result.graph.graph_data){response.data.result.graph.graph_data.push({day:"",hours:"0.00",earnings:"0.00"});response.data.result.graph.graph_data=[].concat.apply([],response.data.result.graph.graph_data);for(var i=0;i<response.data.result.graph.graph_data.length;i++){var dateString=response.data.result.graph.graph_data[i].day;var dateObject=new Date(response.data.result.graph.graph_data[i].day);response.data.result.graph.graph_data[i].day=dayMap[dateObject.getDay()]+" "+monthMap[dateObject.getMonth()]+" "+dateObject.getDate();$scope.data[0].push((response.data.result.graph.graph_data[i].earnings/maxEarnings)*100);$scope.data[0]=[].concat.apply([],$scope.data[0]);response.data.result.graph.graph_data[i].hours=response.data.result.graph.graph_data[i].hours>24?24:response.data.result.graph.graph_data[i].hours;$scope.data[1].push((response.data.result.graph.graph_data[i].hours/maxHours)*90);$scope.data[1]=[].concat.apply([],$scope.data[1]);var key=$scope.series[0]+": "+(response.data.result.graph.graph_data[i].earnings/maxEarnings*100).toString()+$scope.series[1]+": "+(response.data.result.graph.graph_data[i].hours/maxHours*90).toString();$scope.days[key]={day:response.data.result.graph.graph_data[i].day,earnings:$filter('currency')(Math.round(response.data.result.graph.graph_data[i].earnings*100)/100),hours:(Math.round(response.data.result.graph.graph_data[i].hours*100)/100),broadcastKey:dateString};}
$scope.earningsMetaData=response.data.result;}}}});};$scope.getBroadcasts=function(){var request=Api.get('CHANNEL_PARTNER_BROADCASTS_DATA',{userId:$scope.userOfInterest.userId});request.then(function(response){if(response.data.errorCode===102){return false;}
if(response.data.errorCode===0){for(var i=0;i<response.data.result.length;i++){var yearIndex=response.data.result[i].aired_timestamp.indexOf($scope.months.thisMonth.year)+4;response.data.result[i].id=response.data.result[i].aired_timestamp.slice(0,yearIndex);var broadcastLengthMil=parseInt(parseFloat(response.data.result[i].broadcast_hours)*60*60*1000);var hours=parseInt((broadcastLengthMil/(1000*60*60))%24);var minutes=parseInt((broadcastLengthMil/(1000*60)%60));var seconds=parseInt((broadcastLengthMil/1000)%60);hours=(hours===0)?"":(hours<10)?"0"+hours+":":hours+":";minutes=(minutes<10)?"0"+minutes:minutes;seconds=(seconds<10)?"0"+seconds:seconds;response.data.result[i].broadcast_length=hours+minutes+":"+seconds;}
$scope.broadcasts=response.data.result;}});};$scope.showMedia=function(id,params,broadcast){$modal.mediaPlayerModal(id,params,broadcast);};var spendersParams={userId:$scope.userOfInterest.userId,start:0,count:11};var nextStart=1;$scope.getSpenders=function(){if(nextStart!=-1){var request=Api.get('CHANNEL_PARTNER_SUPPORTERS',spendersParams);request.then(function(response){if(response.data&&response.data.errorCode===102){return false;}
nextStart=response.data.nextStart;spendersParams.start=nextStart;if(response.data.errorCode===0&&response.data.supporters.length>0){$scope.topSpenders.push(response.data.supporters);$scope.topSpenders=[].concat.apply([],$scope.topSpenders);}});}};$scope.showAction=function(id){if($scope.sentTo.indexOf(id)===-1){$scope.optionsId=id?id:null;}};$scope.sendMessage=function(id){$scope.showAction(null);$scope.activeUserId=id?id:null;};$scope.postObject={};$scope.comment={};$scope.showUploadPreview=function(event,container){var files=event.target.files;container.upload=files[0];$scope.readFile(files[0],container);container.fileName=files[0].name;$scope.comment.imageFile=files[0];};$scope.openBroadcasterProfile=function(id){$modal.profileSummary(id);};$scope.removeUpload=function(context){var id="file_"+(context.id||'');var file=angular.element(document.getElementById(id));file.replaceWith(file.val('').clone(true));delete window.uploadedImage;delete context.preview;delete context.upload;};$scope.readFile=function(file,container){if((file.size/1000000)>6){Api.showTopNotification('Too big! Try a smaller image.');return false;}
var reader=new window.FileReader();reader.onload=function(e){$scope.$evalAsync(function(){$scope.comment.image=e.target.result;});};reader.readAsDataURL(file);};$scope.resetComment=function(){$scope.activeUserId=null;};$scope.postComment=function(recipientId){if($scope.comment.text||$scope.comment.imageFile){var data={'userId':session.user.userId,'channelId':recipientId,'post':$scope.comment.text||'','postType':'EE_THANKS'};if($scope.comment.imageFile){data.media=$scope.comment.imageFile;}
var apiData={url:Api.generateDynamicApi('POST_CREATE'),method:'POST',data:data,withCredentials:true,headers:{'X-Requested-By':session.user.requestBy}};$scope.comment={text:null,imageFile:null,image:null};upload(apiData).then(function(response){$scope.sentTo.push($scope.activeUserId);$scope.activeUserId=null;$scope.postObject={};});}};$scope.routeExperience=function(){config.init.then(function(){$scope.userOfInterest.userId=$stateParams.userId?$stateParams.userId:session.user.userId;spendersParams.userId=$scope.userOfInterest.userId;$scope.getStats();});};$scope.routeExperience();}).controller('paymentSettingsCtrl',function PaymentSettingsCtrl(Api,session,config){var vm=this;vm.session=session;vm.iframeSrc='';vm.mobile=false;function getDevice(){var parser=new window.UAParser();var device=parser.getDevice();return device.type;}
function getTipaltiIframeSrc(){var device=getDevice();if(device==='mobile'){vm.mobile=true;}else{var getRequest=Api.get('STORE_TIPALTI_IFRAME_SRC',{'userId':session.user.userId,'lang':session.user.language});getRequest.then(function(response){vm.iframeSrc=response.data.iframeSrc;});}}
config.init.then(function(){getTipaltiIframeSrc();});}).directive('tipaltiIframe',function(){return{restrict:'E',template:'<iframe id="tipaltiIframe" ng-src="{{vm.iframeSrc}}"></iframe>',replace:true,scope:true,link:function(scope,element,attributes){var tipaltiHandler=function(evt){if(evt.data&&evt.data.TipaltiIframeInfo){if(evt.data.TipaltiIframeInfo.height){element.css({height:(evt.data.TipaltiIframeInfo.height+20)+'px'});}
if(evt.data.TipaltiIframeInfo.width){element.css({width:(evt.data.TipaltiIframeInfo.width+40)+'px'});}}};var srcWatcher=scope.$watch(function(){return element[0].src;},function(newVal,oldVal){if(newVal&&newVal.length>0){if(window.addEventListener){window.addEventListener("message",tipaltiHandler,false);}else{window.detachEvent("onmessage",tipaltiHandler);}
srcWatcher();}});scope.$on('$destroy',function(){if(window.addEventListener){window.removeEventListener("message",tipaltiHandler,false);}else{window.detachEvent("onmessage",tipaltiHandler);}});}};}).controller('partnerCtrl',["$scope","$rootScope","Api","$state","session","$location","$http","config","$sce","$timeout","eventbus","$compile",function($scope,$rootScope,Api,$state,session,$location,$http,config,$sce,$timeout,eventbus,$compile){var vm=this;vm.session=session;vm.configSettings=config.settings;vm.goToFaq=function(){$state.go('/partners/faq');};var showPartnersFaq=function(){if(session.loggedIn){showPartnersFaqLoggedIn();}else if(!$scope.autoLoginAttempted){$scope.autoLoginAttempted=true;var partnersFaqModal=session.showLoginModal('','PARTNERS_FAQ').result.then(showPartnersFaq);partnersFaqModal.result.then(function(){showPartnersFaqLoggedIn();});partnersFaqModal.result.catch(function(){$state.go('/partners');});}
showPartnersFaqLoggedIn();};var showPartnersFaqLoggedIn=function(){if(session.user.partner==1||session.user.partner==2||session.user.partner==3||session.user.partner==4||session.user.partner==6||session.user.partner==7){if($scope.gotIn){return false;}
$scope.gotIn=true;$http.get('https://api.github.com/repos/younow/younow.github.io/contents/policy/en/partners_faq.md',{'headers':{'Accept':'application/vnd.github.v3.html'}}).success(function(data){data=data.replace(/<li([\sa-zA-Z0-9"'=-]*)>/gi,function(e){return'<li li-collapsed><i class="ynicon ynicon-btn-next"></i>';});data=data.replace(/EMBED-VIDEO/,'<iframe src="https://player.vimeo.com/video/130339308" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> ');$scope.showFooter=true;var doc=angular.element(document.getElementById('partnersFaqContent')).html($compile(data)($scope));$timeout(function(){if(doc.find("article").length){$scope.infoPartnersFaqReady=true;}});});}else if(!session.user||!session.user.loggedIn){$state.go('/partners');}};if($state.current.url=='/partners/faq'){eventbus.subscribe('session:loggedIn',showPartnersFaq,'partners-faq',$scope);$scope.$watch('session.user',function(){$timeout(function(){if(!session.user||!session.user.loggedIn){showPartnersFaq();}},500);});}}]).directive('liCollapsed',["$compile",function($compile){return{restrict:'A',link:function(scope,element,attrs){element[0].classList.add('liCollapsed');element.on('click',function(){var removeClass=false;if(element[0].classList.contains('selected')){removeClass=true;}
var elems=document.querySelectorAll(".liCollapsed");[].forEach.call(elems,function(el){el.classList.remove("selected");});if(!removeClass){element[0].classList.add('selected');}});}};}]);angular.module('younow.policy',['ui.router']).config(["$stateProvider",function config($stateProvider){$stateProvider.state('policy',{url:'/policy/:locale/:doc',templateUrl:'angularjsapp/src/app/states/policy/policy.tpl.html',controller:'PolicyCtrl'});}]).controller('PolicyCtrl',function DocsController($scope,$http,$sce,$stateParams,$timeout,$document,config){$scope.sections=[];$http.get('https://api.github.com/repos/younow/younow.github.io/contents/policy/'+$stateParams.locale+'/'+$stateParams.doc+'.md',{'headers':{'Accept':'application/vnd.github.v3.html'}}).success(function(data){$scope.docContent=$sce.trustAsHtml(data);$timeout(function(){var doc=angular.element(document.getElementById('docs'));var meta=doc.find("td");$scope.docTitle=angular.element(meta[0]).text();if(angular.element(meta[2]).text()=='ME'){$scope.rtl=true;}
angular.forEach(doc.find("h2"),function(h2){var elem=angular.element(h2);$scope.sections.push({'innerText':elem.text(),'offsetTop':elem[0].offsetTop});});$scope.ready=true;});});$scope.scrollTo=function(y){$document.scrollTopAnimated(y,1000);};});angular.module('younow.streetteam',['ui.router']).config(["$stateProvider","$urlRouterProvider",function config($stateProvider,$urlRouterProvider){$stateProvider.state('streetteam',{url:'/streetteam/:profile',templateUrl:'angularjsapp/src/app/states/streetteam/streetteam.tpl.html',controller:'streetTeamCtrl',controllerAs:'vm'});}]).controller('streetTeamCtrl',function DocsController($state,$stateParams,$timeout,Api,session,config){var vm=this;vm.getData=function(toggle){var params={profile:$stateParams.profile,userId:session.user.userId};if(toggle&&vm.data){params.optin=vm.data.optin?0:1;}
Api.post('channel/streetTeam',params).then(function(response){if(response.data.template){vm.data=response.data;vm.data.template.html=Api.trustedHTML(vm.data.template.message);}});};vm.toggle=function(){if(session.user&&session.user.userId){vm.getData(true);}else{session.showLoginModal('','STREETTEAM');}};vm.goBack=function(){$state.go('main.channel.detail');};config.init.then(function(){vm.getData();});});angular.module('bootstrap-templates',['template/accordion/accordion-group.html','template/accordion/accordion.html','template/alert/alert.html','template/carousel/carousel.html','template/carousel/slide.html','template/datepicker/datepicker.html','template/datepicker/day.html','template/datepicker/month.html','template/datepicker/popup.html','template/datepicker/year.html','template/modal/backdrop.html','template/modal/window.html','template/pagination/pager.html','template/pagination/pagination.html','template/popover/popover.html','template/progressbar/bar.html','template/progressbar/progress.html','template/progressbar/progressbar.html','template/rating/rating.html','template/tabs/tab.html','template/tabs/tabset.html','template/timepicker/timepicker.html','template/tooltip/tooltip-html-unsafe-popup.html','template/tooltip/tooltip-popup.html','template/typeahead/typeahead-match.html','template/typeahead/typeahead-popup.html']);angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion-group.html","<div class=\"panel panel-default\">\n"+"  <div class=\"panel-heading\">\n"+"    <h4 class=\"panel-title\">\n"+"      <a href class=\"accordion-toggle\" ng-click=\"toggleOpen()\" accordion-transclude=\"heading\"><span ng-class=\"{'text-muted': isDisabled}\">{{heading}}</span></a>\n"+"    </h4>\n"+"  </div>\n"+"  <div class=\"panel-collapse\" collapse=\"!isOpen\">\n"+"   <div class=\"panel-body\" ng-transclude></div>\n"+"  </div>\n"+"</div>\n"+"");}]);angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion.html","<div class=\"panel-group\" ng-transclude></div>");}]);angular.module("template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/alert/alert.html","<div class=\"alert\" ng-class=\"['alert-' + (type || 'warning'), closeable ? 'alert-dismissable' : null]\" role=\"alert\">\n"+"    <button ng-show=\"closeable\" type=\"button\" class=\"close\" ng-click=\"close()\">\n"+"        <span aria-hidden=\"true\">&times;</span>\n"+"        <span class=\"sr-only\" translate=\"_OK\"></span>\n"+"    </button>\n"+"    <div ng-transclude></div>\n"+"</div>\n"+"");}]);angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/carousel.html","<div ng-mouseenter=\"pause()\" ng-mouseleave=\"play()\" class=\"carousel\" ng-swipe-right=\"prev()\" ng-swipe-left=\"next()\">\n"+"    <ol class=\"carousel-indicators\" ng-show=\"slides.length > 1\">\n"+"        <li ng-repeat=\"slide in slides track by $index\" ng-class=\"{active: isActive(slide)}\" ng-click=\"select(slide)\"></li>\n"+"    </ol>\n"+"    <div class=\"carousel-inner\" ng-transclude></div>\n"+"    <a class=\"left carousel-control\" ng-click=\"prev()\" ng-show=\"slides.length > 1\"><span class=\"glyphicon glyphicon-chevron-left\"></span></a>\n"+"    <a class=\"right carousel-control\" ng-click=\"next()\" ng-show=\"slides.length > 1\"><span class=\"glyphicon glyphicon-chevron-right\"></span></a>\n"+"</div>\n"+"");}]);angular.module("template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/slide.html","<div ng-class=\"{\n"+"    'active': leaving || (active && !entering),\n"+"    'prev': (next || active) && direction=='prev',\n"+"    'next': (next || active) && direction=='next',\n"+"    'right': direction=='prev',\n"+"    'left': direction=='next'\n"+"  }\" class=\"item text-center\" ng-transclude></div>\n"+"");}]);angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/datepicker.html","<div ng-switch=\"datepickerMode\" role=\"application\" ng-keydown=\"keydown($event)\">\n"+"  <daypicker ng-switch-when=\"day\" tabindex=\"0\"></daypicker>\n"+"  <monthpicker ng-switch-when=\"month\" tabindex=\"0\"></monthpicker>\n"+"  <yearpicker ng-switch-when=\"year\" tabindex=\"0\"></yearpicker>\n"+"</div>");}]);angular.module("template/datepicker/day.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/day.html","<table role=\"grid\" aria-labelledby=\"{{uniqueId}}-title\" aria-activedescendant=\"{{activeDateId}}\">\n"+"  <thead>\n"+"    <tr>\n"+"      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-left\" ng-click=\"move(-1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-left\"></i></button></th>\n"+"      <th colspan=\"{{5 + showWeeks}}\"><button id=\"{{uniqueId}}-title\" role=\"heading\" aria-live=\"assertive\" aria-atomic=\"true\" type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"toggleMode()\" tabindex=\"-1\" style=\"width:100%;\"><strong>{{title}}</strong></button></th>\n"+"      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-right\" ng-click=\"move(1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-right\"></i></button></th>\n"+"    </tr>\n"+"    <tr>\n"+"      <th ng-show=\"showWeeks\" class=\"text-center\"></th>\n"+"      <th ng-repeat=\"label in labels track by $index\" class=\"text-center\"><small aria-label=\"{{label.full}}\">{{label.abbr}}</small></th>\n"+"    </tr>\n"+"  </thead>\n"+"  <tbody>\n"+"    <tr ng-repeat=\"row in rows track by $index\">\n"+"      <td ng-show=\"showWeeks\" class=\"text-center h6\"><em>{{ weekNumbers[$index] }}</em></td>\n"+"      <td ng-repeat=\"dt in row track by dt.date\" class=\"text-center\" role=\"gridcell\" id=\"{{dt.uid}}\" aria-disabled=\"{{!!dt.disabled}}\">\n"+"        <button type=\"button\" style=\"width:100%;\" class=\"btn btn-default btn-sm\" ng-class=\"{'btn-info': dt.selected, active: isActive(dt)}\" ng-click=\"select(dt.date)\" ng-disabled=\"dt.disabled\" tabindex=\"-1\"><span ng-class=\"{'text-muted': dt.secondary, 'text-info': dt.current}\">{{dt.label}}</span></button>\n"+"      </td>\n"+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"");}]);angular.module("template/datepicker/month.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/month.html","<table role=\"grid\" aria-labelledby=\"{{uniqueId}}-title\" aria-activedescendant=\"{{activeDateId}}\">\n"+"  <thead>\n"+"    <tr>\n"+"      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-left\" ng-click=\"move(-1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-left\"></i></button></th>\n"+"      <th><button id=\"{{uniqueId}}-title\" role=\"heading\" aria-live=\"assertive\" aria-atomic=\"true\" type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"toggleMode()\" tabindex=\"-1\" style=\"width:100%;\"><strong>{{title}}</strong></button></th>\n"+"      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-right\" ng-click=\"move(1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-right\"></i></button></th>\n"+"    </tr>\n"+"  </thead>\n"+"  <tbody>\n"+"    <tr ng-repeat=\"row in rows track by $index\">\n"+"      <td ng-repeat=\"dt in row track by dt.date\" class=\"text-center\" role=\"gridcell\" id=\"{{dt.uid}}\" aria-disabled=\"{{!!dt.disabled}}\">\n"+"        <button type=\"button\" style=\"width:100%;\" class=\"btn btn-default\" ng-class=\"{'btn-info': dt.selected, active: isActive(dt)}\" ng-click=\"select(dt.date)\" ng-disabled=\"dt.disabled\" tabindex=\"-1\"><span ng-class=\"{'text-info': dt.current}\">{{dt.label}}</span></button>\n"+"      </td>\n"+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"");}]);angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: (isOpen && 'block') || 'none', top: position.top+'px', left: position.left+'px'}\" ng-keydown=\"keydown($event)\">\n"+" <li ng-transclude></li>\n"+" <li ng-if=\"showButtonBar\" style=\"padding:10px 9px 2px\">\n"+"  <span class=\"btn-group pull-left\">\n"+"   <button type=\"button\" class=\"btn btn-sm btn-info\" ng-click=\"select('today')\">{{ getText('current') }}</button>\n"+"   <button type=\"button\" class=\"btn btn-sm btn-danger\" ng-click=\"select(null)\">{{ getText('clear') }}</button>\n"+"  </span>\n"+"  <button type=\"button\" class=\"btn btn-sm btn-success pull-right\" ng-click=\"close()\">{{ getText('close') }}</button>\n"+" </li>\n"+"</ul>\n"+"");}]);angular.module("template/datepicker/year.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/year.html","<table role=\"grid\" aria-labelledby=\"{{uniqueId}}-title\" aria-activedescendant=\"{{activeDateId}}\">\n"+"  <thead>\n"+"    <tr>\n"+"      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-left\" ng-click=\"move(-1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-left\"></i></button></th>\n"+"      <th colspan=\"3\"><button id=\"{{uniqueId}}-title\" role=\"heading\" aria-live=\"assertive\" aria-atomic=\"true\" type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"toggleMode()\" tabindex=\"-1\" style=\"width:100%;\"><strong>{{title}}</strong></button></th>\n"+"      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-right\" ng-click=\"move(1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-right\"></i></button></th>\n"+"    </tr>\n"+"  </thead>\n"+"  <tbody>\n"+"    <tr ng-repeat=\"row in rows track by $index\">\n"+"      <td ng-repeat=\"dt in row track by dt.date\" class=\"text-center\" role=\"gridcell\" id=\"{{dt.uid}}\" aria-disabled=\"{{!!dt.disabled}}\">\n"+"        <button type=\"button\" style=\"width:100%;\" class=\"btn btn-default\" ng-class=\"{'btn-info': dt.selected, active: isActive(dt)}\" ng-click=\"select(dt.date)\" ng-disabled=\"dt.disabled\" tabindex=\"-1\"><span ng-class=\"{'text-info': dt.current}\">{{dt.label}}</span></button>\n"+"      </td>\n"+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"");}]);angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/backdrop.html","<div class=\"modal-backdrop fade {{ backdropClass }}\"\n"+"     ng-class=\"{in: animate}\"\n"+"     ng-style=\"{'z-index': 1040 + (index && 1 || 0) + index*10}\"\n"+"></div>\n"+"");}]);angular.module("template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/window.html","<div tabindex=\"-1\" id=\"modalWindow\" role=\"dialog\" class=\"modal fade\" ng-class=\"{in: animate}\" ng-style=\"{'z-index': 1050 + index*10, display: 'block'}\" ng-click=\"close($event)\">\n"+"    <div class=\"modal-dialog\" yn-modal-draggable ng-class=\"{'modal-sm': size == 'sm', 'modal-lg': size == 'lg'}\"><div class=\"modal-content\" modal-transclude></div></div>\n"+"</div>");}]);angular.module("template/pagination/pager.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pager.html","<ul class=\"pager\">\n"+"  <li ng-class=\"{disabled: noPrevious(), previous: align}\"><a href ng-click=\"selectPage(page - 1)\">{{getText('previous')}}</a></li>\n"+"  <li ng-class=\"{disabled: noNext(), next: align}\"><a href ng-click=\"selectPage(page + 1)\">{{getText('next')}}</a></li>\n"+"</ul>");}]);angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pagination.html","<ul class=\"pagination\">\n"+"  <li ng-if=\"boundaryLinks\" ng-class=\"{disabled: noPrevious()}\"><a href ng-click=\"selectPage(1)\">{{getText('first')}}</a></li>\n"+"  <li ng-if=\"directionLinks\" ng-class=\"{disabled: noPrevious()}\"><a href ng-click=\"selectPage(page - 1)\">{{getText('previous')}}</a></li>\n"+"  <li ng-repeat=\"page in pages track by $index\" ng-class=\"{active: page.active}\"><a href ng-click=\"selectPage(page.number)\">{{page.text}}</a></li>\n"+"  <li ng-if=\"directionLinks\" ng-class=\"{disabled: noNext()}\"><a href ng-click=\"selectPage(page + 1)\">{{getText('next')}}</a></li>\n"+"  <li ng-if=\"boundaryLinks\" ng-class=\"{disabled: noNext()}\"><a href ng-click=\"selectPage(totalPages)\">{{getText('last')}}</a></li>\n"+"</ul>");}]);angular.module("template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/popover/popover.html","<div class=\"popover {{placement}}\" ng-class=\"{ in: isOpen(), fade: animation() }\">\n"+"  <div class=\"arrow\"></div>\n"+"\n"+"  <div class=\"popover-inner\">\n"+"      <h3 class=\"popover-title\" ng-bind=\"title\" ng-show=\"title\"></h3>\n"+"      <div class=\"popover-content\" ng-bind=\"content\"></div>\n"+"  </div>\n"+"</div>\n"+"");}]);angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/bar.html","<div class=\"progress-bar\" ng-class=\"type && 'progress-bar-' + type\" role=\"progressbar\" aria-valuenow=\"{{value}}\" aria-valuemin=\"0\" aria-valuemax=\"{{max}}\" ng-style=\"{width: percent + '%'}\" aria-valuetext=\"{{percent | number:0}}%\" ng-transclude></div>");}]);angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progress.html","<div class=\"progress\" ng-transclude></div>");}]);angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progressbar.html","<div class=\"progress\">\n"+"  <div class=\"progress-bar\" ng-class=\"type && 'progress-bar-' + type\" role=\"progressbar\" aria-valuenow=\"{{value}}\" aria-valuemin=\"0\" aria-valuemax=\"{{max}}\" ng-style=\"{width: percent + '%'}\" aria-valuetext=\"{{percent | number:0}}%\" ng-transclude></div>\n"+"</div>");}]);angular.module("template/rating/rating.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/rating/rating.html","<span ng-mouseleave=\"reset()\" ng-keydown=\"onKeydown($event)\" tabindex=\"0\" role=\"slider\" aria-valuemin=\"0\" aria-valuemax=\"{{range.length}}\" aria-valuenow=\"{{value}}\">\n"+"    <i ng-repeat=\"r in range track by $index\" ng-mouseenter=\"enter($index + 1)\" ng-click=\"rate($index + 1)\" class=\"glyphicon\" ng-class=\"$index < value && (r.stateOn || 'glyphicon-star') || (r.stateOff || 'glyphicon-star-empty')\">\n"+"        <span class=\"sr-only\">({{ $index < value ? '*' : ' ' }})</span>\n"+"    </i>\n"+"</span>");}]);angular.module("template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tab.html","<li ng-class=\"{active: active, disabled: disabled}\">\n"+"  <a href ng-click=\"select()\" tab-heading-transclude>{{heading}}</a>\n"+"</li>\n"+"");}]);angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tabset.html","<div>\n"+"  <ul class=\"nav nav-{{type || 'tabs'}}\" ng-class=\"{'nav-stacked': vertical, 'nav-justified': justified}\" ng-transclude></ul>\n"+"  <div class=\"tab-content\">\n"+"    <div class=\"tab-pane\" \n"+"         ng-repeat=\"tab in tabs\" \n"+"         ng-class=\"{active: tab.active}\"\n"+"         tab-content-transclude=\"tab\">\n"+"    </div>\n"+"  </div>\n"+"</div>\n"+"");}]);angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/timepicker/timepicker.html","<table>\n"+" <tbody>\n"+"  <tr class=\"text-center\">\n"+"   <td><a ng-click=\"incrementHours()\" class=\"btn btn-link\"><span class=\"glyphicon glyphicon-chevron-up\"></span></a></td>\n"+"   <td>&nbsp;</td>\n"+"   <td><a ng-click=\"incrementMinutes()\" class=\"btn btn-link\"><span class=\"glyphicon glyphicon-chevron-up\"></span></a></td>\n"+"   <td ng-show=\"showMeridian\"></td>\n"+"  </tr>\n"+"  <tr>\n"+"   <td style=\"width:50px;\" class=\"form-group\" ng-class=\"{'has-error': invalidHours}\">\n"+"    <input type=\"text\" ng-model=\"hours\" ng-change=\"updateHours()\" class=\"form-control text-center\" ng-mousewheel=\"incrementHours()\" ng-readonly=\"readonlyInput\" maxlength=\"2\">\n"+"   </td>\n"+"   <td>:</td>\n"+"   <td style=\"width:50px;\" class=\"form-group\" ng-class=\"{'has-error': invalidMinutes}\">\n"+"    <input type=\"text\" ng-model=\"minutes\" ng-change=\"updateMinutes()\" class=\"form-control text-center\" ng-readonly=\"readonlyInput\" maxlength=\"2\">\n"+"   </td>\n"+"   <td ng-show=\"showMeridian\"><button type=\"button\" class=\"btn btn-default text-center\" ng-click=\"toggleMeridian()\">{{meridian}}</button></td>\n"+"  </tr>\n"+"  <tr class=\"text-center\">\n"+"   <td><a ng-click=\"decrementHours()\" class=\"btn btn-link\"><span class=\"glyphicon glyphicon-chevron-down\"></span></a></td>\n"+"   <td>&nbsp;</td>\n"+"   <td><a ng-click=\"decrementMinutes()\" class=\"btn btn-link\"><span class=\"glyphicon glyphicon-chevron-down\"></span></a></td>\n"+"   <td ng-show=\"showMeridian\"></td>\n"+"  </tr>\n"+" </tbody>\n"+"</table>\n"+"");}]);angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-unsafe-popup.html","<div class=\"tooltip {{placement}}\" ng-class=\"{ in: isOpen(), fade: animation() }\">\n"+"  <div class=\"tooltip-arrow\"></div>\n"+"  <div class=\"tooltip-inner\" bind-html-unsafe=\"content\"></div>\n"+"</div>\n"+"");}]);angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-popup.html","<div class=\"tooltip {{placement}}\" ng-class=\"{ in: isOpen(), fade: animation() }\">\n"+"  <div class=\"tooltip-arrow\"></div>\n"+"  <div class=\"tooltip-inner\" ng-bind=\"content\"></div>\n"+"</div>\n"+"");}]);angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-match.html","<a tabindex=\"-1\" bind-html-unsafe=\"match.label | typeaheadHighlight:query\"></a>");}]);angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-popup.html","<ul class=\"dropdown-menu\" ng-show=\"isOpen()\" ng-style=\"::{ 'margin-top': '31px', width: '270px', left: 0}\" style=\"display: block;\" role=\"listbox\" aria-hidden=\"{{!isOpen()}}\">\n"+"    <li ng-repeat=\"match in matches track by $index\" ng-class=\"{active: isActive($index) }\" ng-mouseenter=\"selectActive($index)\" ng-mousedown=\"selectMatch($index)\" role=\"option\" id=\"{{match.id}}\">\n"+"        <div typeahead-match index=\"$index\" match=\"match\" query=\"query\" template-url=\"templateUrl\"></div>\n"+"    </li>\n"+"</ul>\n"+"");}]);angular.module('templates',['angularjsapp/src/app/components/activity-panel/activity-panel.tpl.html','angularjsapp/src/app/components/agreement-acceptance-modal/agreement-acceptance-modal.tpl.html','angularjsapp/src/app/components/alert-modal/alert-modal.tpl.html','angularjsapp/src/app/components/audience-panel/audience-panel.tpl.html','angularjsapp/src/app/components/buybars-modal/buybars.tpl.html','angularjsapp/src/app/components/chat/chat-panel.tpl.html','angularjsapp/src/app/components/chat/chat.tpl.html','angularjsapp/src/app/components/chat/promo-widget.tpl.html','angularjsapp/src/app/components/confirm-modal/confirm.tpl.html','angularjsapp/src/app/components/download-broadcast-modal/download-broadcast.tpl.html','angularjsapp/src/app/components/editors-pick-modals/ep-congrats.tpl.html','angularjsapp/src/app/components/editors-pick-modals/ep-expired.tpl.html','angularjsapp/src/app/components/fan-button/fan-button.tpl.html','angularjsapp/src/app/components/footer/footer.tpl.html','angularjsapp/src/app/components/gate-modal/gate-modal.tpl.html','angularjsapp/src/app/components/guest-button/guest-button.tpl.html','angularjsapp/src/app/components/guest-panel/guest-panel.tpl.html','angularjsapp/src/app/components/header/header.tpl.html','angularjsapp/src/app/components/header/searchresult.tpl.html','angularjsapp/src/app/components/iframe-modal/iframe-modal.tpl.html','angularjsapp/src/app/components/left-sidebar/left-sidebar.tpl.html','angularjsapp/src/app/components/likers-modal/likers-modal.tpl.html','angularjsapp/src/app/components/login-modal/login-modal.tpl.html','angularjsapp/src/app/components/media-player-modal/media-player-modal.tpl.html','angularjsapp/src/app/components/mention/mention-dropup.tpl.html','angularjsapp/src/app/components/mention/mention.tpl.html','angularjsapp/src/app/components/mini-player/mini-player.tpl.html','angularjsapp/src/app/components/moment-panel/moment-panel.tpl.html','angularjsapp/src/app/components/onboarding-modal/onboarding-modal.tpl.html','angularjsapp/src/app/components/partner-modal/partner-modal.tpl.html','angularjsapp/src/app/components/post/embed/archive.tpl.html','angularjsapp/src/app/components/post/embed/embedlyimage.tpl.html','angularjsapp/src/app/components/post/embed/iframe.tpl.html','angularjsapp/src/app/components/post/embed/link.tpl.html','angularjsapp/src/app/components/post/embed/snapshot.tpl.html','angularjsapp/src/app/components/post/embed/uploadimage.tpl.html','angularjsapp/src/app/components/post/embed/video.tpl.html','angularjsapp/src/app/components/post/moment-highlight/moment-dynamic-highlight.tpl.html','angularjsapp/src/app/components/post/moment-highlight/moment-highlight.tpl.html','angularjsapp/src/app/components/post/moment/moment.tpl.html','angularjsapp/src/app/components/post/post.tpl.html','angularjsapp/src/app/components/post/reply/reply.tpl.html','angularjsapp/src/app/components/profile-summary/profile-summary.tpl.html','angularjsapp/src/app/components/reconnect-modal/reconnect-modal.tpl.html','angularjsapp/src/app/components/search-bar/search-bar.tpl.html','angularjsapp/src/app/components/search-bar/search-results.tpl.html','angularjsapp/src/app/components/settingup-panel/settingup-panel.tpl.html','angularjsapp/src/app/components/settingup-panel/tag-selection.tpl.html','angularjsapp/src/app/components/share-broadcast-modal/share-broadcast-modal.tpl.html','angularjsapp/src/app/components/share-panel/share-panel.tpl.html','angularjsapp/src/app/components/spending-redirect-modal/failed.tpl.html','angularjsapp/src/app/components/spending-redirect-modal/spending-redirect-modal.tpl.html','angularjsapp/src/app/components/stripe-form/stripe-form.tpl.html','angularjsapp/src/app/components/subscribe-button/subscribe-button.tpl.html','angularjsapp/src/app/components/subscribe-modal/subscribe.tpl.html','angularjsapp/src/app/components/trap-modal/trap-modal.tpl.html','angularjsapp/src/app/components/user-badge/user-badge-dynamic.tpl.html','angularjsapp/src/app/components/user-badge/user-badge.tpl.html','angularjsapp/src/app/components/verification-modal/cc-verified.tpl.html','angularjsapp/src/app/components/verification-modal/verification-modal.tpl.html','angularjsapp/src/app/components/video-player/advanced-options.tpl.html','angularjsapp/src/app/components/video-player/mini-overlay.tpl.html','angularjsapp/src/app/components/video-player/player-footer.tpl.html','angularjsapp/src/app/components/video-player/player-header.tpl.html','angularjsapp/src/app/components/video-player/player-overlay.tpl.html','angularjsapp/src/app/components/video-player/screen-sharing-selector.tpl.html','angularjsapp/src/app/components/vip-modal/vip-welcome-modal.tpl.html','angularjsapp/src/app/components/vip-modal/welcome-modal.tpl.html','angularjsapp/src/app/components/youtube-subscribe/youtube-subscribe.tpl.html','angularjsapp/src/app/states/about/about.tpl.html','angularjsapp/src/app/states/bigsister/bigsister.tpl.html','angularjsapp/src/app/states/home/home.tpl.html','angularjsapp/src/app/states/info/info.tpl.html','angularjsapp/src/app/states/jobs/jobs.tpl.html','angularjsapp/src/app/states/lockout/lockout.tpl.html','angularjsapp/src/app/states/main/channel/async/async.tpl.html','angularjsapp/src/app/states/main/channel/channel.tpl.html','angularjsapp/src/app/states/main/channel/end-of-broadcast/end-of-broadcast.tpl.html','angularjsapp/src/app/states/main/channel/live/live.tpl.html','angularjsapp/src/app/states/main/channel/moment-collection/moment-collection-deeplink.tpl.html','angularjsapp/src/app/states/main/channel/moment/moment-deeplink.tpl.html','angularjsapp/src/app/states/main/channel/post.tpl.html','angularjsapp/src/app/states/main/desktop/desktop.tpl.html','angularjsapp/src/app/states/main/explore/explore.tpl.html','angularjsapp/src/app/states/main/leaderboards/leaderboard-header.tpl.html','angularjsapp/src/app/states/main/leaderboards/leaderboard-single.tpl.html','angularjsapp/src/app/states/main/leaderboards/leaderboards.tpl.html','angularjsapp/src/app/states/main/main.tpl.html','angularjsapp/src/app/states/main/missing/missing.tpl.html','angularjsapp/src/app/states/main/moments-feed/moments-feed.tpl.html','angularjsapp/src/app/states/main/settings/settings.tpl.html','angularjsapp/src/app/states/partner/earnings.tpl.html','angularjsapp/src/app/states/partner/faq.tpl.html','angularjsapp/src/app/states/partner/partials/active.tpl.html','angularjsapp/src/app/states/partner/partials/active_confirm.tpl.html','angularjsapp/src/app/states/partner/partials/application_pending.tpl.html','angularjsapp/src/app/states/partner/partials/not.tpl.html','angularjsapp/src/app/states/partner/partials/pending.tpl.html','angularjsapp/src/app/states/partner/partials/pending_approved_confirm.tpl.html','angularjsapp/src/app/states/partner/partner.tpl.html','angularjsapp/src/app/states/partner/payment-settings.tpl.html','angularjsapp/src/app/states/policy/policy.tpl.html','angularjsapp/src/app/states/streetteam/streetteam.tpl.html']);angular.module("angularjsapp/src/app/components/activity-panel/activity-panel.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/activity-panel/activity-panel.tpl.html","<div class=\"panel-body\">\n"+"<div class=\"friends-list mini-scroll\" only-scroll ng-if=\"(onlineFriends.live.length > 0 || onlineFriends.online.length > 0) && panel.cdn !== undefined\">\n"+"\n"+"<h1 class=\"friends-header secondary-text\" ng-if=\"onlineFriends.live.length > 0\" translate=\"_live\"></h1>\n"+"<div ng-repeat=\"liveFriend in onlineFriends.live | filter:friendfilter\">\n"+"\n"+"<a class=\"activity\" ng-href=\"/{{liveFriend.profile}}\" prevent-default ng-click=\"panel.changeBroadcaster(liveFriend.channelId);panel.trackClickFriend( liveFriend, source, $index );\">\n"+"<div class=\"profile-img thumb\" ng-style=\"::{'background-image': 'url('+panel.cdn.thumb+'/'+liveFriend.userId + '/'+ liveFriend.userId + '.jpg'+'), url('+panel.cdn.nothumb+')'}\">\n"+"<span class=\"live\"><i class=\"ynicon ynicon-broadcast\"></i></span>\n"+"</div>\n"+"<div class=\"status\">\n"+"<span class=\"name short-text\">{{liveFriend.name}}</span>\n"+"<span class=\"short-text current-activity\"><i ng-if=\"liveFriend.tags[0]\">#</i>{{liveFriend.tags[0]}}</span>\n"+"<div ng-if=\"liveFriend.bars\" class=\"bars-text\">\n"+"<i class=\"ynbar ynicon ynicon-icon-bar\"></i> {{liveFriend.bars | number}}\n"+"</div>\n"+"</div>\n"+"</a>\n"+"</div>\n"+"<h1 class=\"friends-header secondary-text watching\" ng-if=\"onlineFriends.online.length > 0\" translate=\"_watching\"></h1>\n"+"<div ng-repeat=\"watchingFriend in onlineFriends.online | filter:friendfilter\">\n"+"\n"+"<a class=\"activity\" ng-href=\"/{{watchingFriend.profile}}\" prevent-default ng-click=\"panel.changeBroadcaster(watchingFriend.channelId);panel.trackClickFriend( watchingFriend, source, $index ); \">\n"+"<div class=\"profile-img thumb\" ng-style=\"::{'background-image': 'url('+panel.cdn.thumb+'/'+watchingFriend.userId+'/' + watchingFriend.userId+'.jpg'+'), url('+panel.cdn.nothumb+')'}\">\n"+"</div>\n"+"<div class=\"status\">\n"+"<span class=\"name short-text\">{{watchingFriend.name}}</span>\n"+"<span class=\"short-text current-activity\">\n"+"<i class=\"ynicon ynicon-viewers\" ng-if=\"watchingFriend.channelName\"></i> {{watchingFriend.channelName}}\n"+"</span>\n"+"<div ng-if=\"watchingFriend.bars\" class=\"bars-text\">\n"+"<i class=\"ynbar ynicon ynicon-icon-bar\"></i> {{watchingFriend.bars | number}}\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"</a>\n"+"</div>\n"+"\n"+"</div>\n"+"<span class=\"no-friends-msg\" ng-if=\"onlineFriends.length === 0 || !onlineFriends\" translate=\"activity_no_friends_online\"></span>\n"+"</div>\n"+"<div id=\"div-gpt-ad-1392148686409-0\"></div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/agreement-acceptance-modal/agreement-acceptance-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/agreement-acceptance-modal/agreement-acceptance-modal.tpl.html","<div class=\"modal-body\">\n"+"<h5 class=\"agreement-title\" translate=\"agreement_acceptance_title\"></h5>\n"+"<div class=\"agreement-message\" translate=\"agreement_acceptance_message\"></div>\n"+"<div class=\"termLinks\">\n"+"<a ng-if=\"session.user.needsToConfirmTermsOfUse === true\" href=\"{{::genTerms}}\" translate=\"link_Terms\" target=\"_blank\"></a>\n"+"<a ng-if=\"partner === true\" href=\"{{::partnerAgreement}}\" translate=\"agreement_acceptance_partner_terms\" target=\"_blank\"></a>\n"+"</div>\n"+"\n"+"<div class=\"have-read\" translate=\"agreement_acceptance_have_read\"></div>\n"+"<div class=\"actions\">\n"+"<button class=\"btn btn-primary\" ng-click=\"checkAgreementAction(true)\" translate=\"_accept\"></button>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/alert-modal/alert-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/alert-modal/alert-modal.tpl.html","<div class=\"modal-body\">\n"+"<span ng-bind-html=\"::message\"></span>\n"+"</div>\n"+"<div class=\"modal-footer\">\n"+"<button class=\"confirm btn btn-primary\" type=\"button\" ng-click=\"$dismiss()\" translate=\"_OK\"></button>\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/components/audience-panel/audience-panel.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/audience-panel/audience-panel.tpl.html","<div class=\"audience-summary\" ng-if=\"vm.swf.audienceLists.nextRefresh - vm.swf.audienceLists.timer > 3 || vm.swf.audienceLists.currentPage !== 0\" translate=\"audience_viewers_in_audience\" translate-values=\"{value:vm.swf.broadcast.viewers}\">\n"+"<button class=\"btn-reset pull-right\" ng-click=\"vm.clickToRefresh()\"><i class=\"ynicon ynicon-refresh\"></i></button>\n"+"</div>\n"+"<div class=\"audience-summary refresh\" ng-if=\"vm.swf.audienceLists.nextRefresh - vm.swf.audienceLists.timer <= 3 && vm.swf.audienceLists.currentPage === 0\">\n"+"<span translate=\"audience_refreshing_viewers_in\" translate-values=\"{viewers:vm.swf.broadcast.viewers}\"></span> {{vm.swf.audienceLists.nextRefresh - vm.swf.audienceLists.timer}}</span>\n"+"<button class=\"btn-reset pull-right\"><i class=\"ynicon ynicon-refresh\"></i></button>\n"+"</div>\n"+"<div class=\"audience\" id=\"audiencelist\" only-scroll>\n"+"<div class=\"audience-page\" ng-repeat=\"page in vm.swf.audienceLists.pages track by $index\">\n"+"<div class=\"viewer\" ng-repeat=\"viewer in page.audience\">\n"+"\n"+"<div class=\"thumb circle-thumb crop-thumb pull-left\" ng-click=\"vm.openProfileSummary(viewer.userId, 'AUDIENCE')\"  ng-style=\"::{'background': 'url(' + vm.thumb  + '/' + viewer.userId + '/' + viewer.userId + '.jpg) no-repeat, url(' + vm.noThumb + ') no-repeat', 'background-size': 'cover'}\"></div>\n"+"\n"+"<div class=\"viewer-information\">\n"+"\n"+"<div class=\"titles\" ng-click=\"vm.openProfileSummary(viewer.userId, 'AUDIENCE')\">\n"+"<span class=\"ynbadge\" ng-if=\"viewer.subscriptionType\">\n"+"<img ng-src=\"{{::vm.config.settings.BadgeBaseUrl}}/{{::vm.swf.broadcast.userId}}/{{::viewer.subscriptionType}}/badge@2x.png\" />\n"+"</span>\n"+"<span class=\"short-text viewer-name\">\n"+"<i class=\"ynicon ynicon-level\" ng-if=\"!viewer.subscriptionType\"></i>{{::viewer.level}} {{::viewer.name}}\n"+"</span>\n"+"</div>\n"+"\n"+"<div class=\"infos\" audience-message viewer=\"viewer\">\n"+"<div class=\"info viewer-message subscriber\" ng-if=\"::viewer.subscriptionDate\" translate=\"audience_subscriber_since\" translate-values=\"{value: viewer.subscriptionDate}\">\n"+"</div>\n"+"<div class=\"info special-message fanRank\" ng-if=\"::(viewer.fanRank !== -1)\" translate=\"audience_fan_rank\" translate-values=\"{value:viewer.fanRank}\">\n"+"<span ng-if=\"::viewer.bars\">\n"+"<img class=\"bar\" ng-src=\"{{::vm.baseImageUrlv3}}/icon_bar_sm.png\"> {{::viewer.bars}}\n"+"</span>\n"+"</div>\n"+"<div class=\"info special-message isFan\" ng-if=\"::(viewer.fanDateUNIX && viewer.fanRank === -1 && vm.swf.broadcast.userId === vm.session.user.userId)\" translate=\"audience_fan_since\" translate-values=\"{value: viewer.fanDate[2]+'/'+viewer.fanDate[1]+'/'+viewer.fanDate[0]}\">\n"+"</div>\n"+"<div class=\"info special-message birthday\" ng-if=\"::(viewer.birthdayCopy)\">\n"+"{{::viewer.birthdayCopy}}\n"+"</div>\n"+"<div class=\"info special-message gifts\" ng-if=\"::(viewer.gifts > 0)\" translate=\"audience_gave_gifts\" translate-values=\"{value:viewer.gifts}\">\n"+"</div>\n"+"<div class=\"info special-message viewersRs\" ng-if=\"::(viewer.viewersRs > 0)\" translate=\"audience_brought_viewers\" translate-values=\"{viewers:viewer.viewersRs}\">\n"+"</div>\n"+"<div class=\"info viewer-location location\" ng-if=\"::((viewer.location.city.length > 0 || viewer.location.state.length > 0 || viewer.location.country.length > 0))\">\n"+"<span ng-if=\"::viewer.location.city\">{{::viewer.location.city + ','}}</span>\n"+"<span ng-if=\"::viewer.location.state\">{{::viewer.location.state + ','}}</span>\n"+"<span ng-if=\"::viewer.location.country\">{{::viewer.location.country}}</span>\n"+"</div>\n"+"<div class=\"info viewer-message fans\" ng-if=\"::(viewer.fans)\" translate=\"audience_fans\" translate-values=\"{value:viewer.fans}\">\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<!-- <div class=\"viewer\" ng-repeat=\"viewer in vm.swf.audience\">\n"+"<div class=\"thumb circle-thumb pull-left\" style=\"background: url(https://placekitten.com/g/200/300) no-repeat; background-size: cover;\">\n"+"<i ng-if=\"false\" class=\"ynicon ynicon-bc-call-nolines\"></i>\n"+"</div>\n"+"<div class=\"viewer-information\">\n"+"<div class=\"viewer-name\"><i class=\"ynicon ynicon-level\"></i>11 Jose Aquilar</div>\n"+"<div class=\"special-message\">Birthday Today!</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"viewer\">\n"+"<div class=\"thumb circle-thumb pull-left\" style=\"background: url(https://placekitten.com/g/200/300) no-repeat; background-size: cover;\">\n"+"<i ng-if=\"false\" class=\"ynicon ynicon-bc-call-nolines\"></i>\n"+"</div>\n"+"<div class=\"viewer-information\">\n"+"<div class=\"viewer-name\"><i class=\"ynicon ynicon-level\"></i>11 Jose Aquilar</div>\n"+"<div class=\"viewer-location\">Los Angeles, CA</div>\n"+"</div>\n"+"</div> -->\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/buybars-modal/buybars.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/buybars-modal/buybars.tpl.html","<div class=\"modal-body\" ng-class=\"{large: modalLarge && activeItem.buying, small: vendor == 'payPal' && activeItem.buying}\">\n"+"<div class=\"overlay\" ng-if=\"!iframeLoaded && config.buybarsiframe\">\n"+"<div class=\"loader\"></div>\n"+"</div>\n"+"<div class=\"panel-one\" ng-class=\"{'loading-payments': gettingToken}\">\n"+"<button aria-hidden=\"true\" class=\"close\" ng-click=\"cancel()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"<div class=\"heading\">\n"+"<div class=\"title\" translate=\"buybarsmodal_header\"></div>\n"+"<div class=\"subtitle\" translate=\"buybarsmodal_subtext\"></div>\n"+"<div class=\"status\">\n"+"<span><span translate=\"buybarsmodal_yourbars\"></span>: </span>\n"+"<img ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/icons_v3/icon_bar_sm.png\" />\n"+"<span>{{ Api.squashedNumber(session.user.vault.webBars, 5) }}</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"content\">\n"+"<div class=\"spinning-loader token-feedback\"></div>\n"+"<div class=\"item transline-mid\" ng-click=\"toggleActiveItem(item)\" ng-class=\"::{popular: item.popular === '1'}\" ng-repeat=\"item in products track by $index\">\n"+"<span class=\"icon\"><img ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/bars/icons/{{::item.SKU}}.png\" /></span>\n"+"<span class=\"name\">\n"+"<b>{{::item.name}}</b> ({{::item.amount |number }} <span translate=\"_bars\"></span>)\n"+"<div class=\"buybars_vip_bonus\" ng-if=\"session.user.globalSpenderRank\"><i class=\"ynicon ynicon-redcrownicon\"></i><span> + {{::item.bonusBars}} </span><span translate=\"_bars\"></span><span> &amp; {{::item.bonusCoins}} </span><span translate=\"_coins\"></span></span></div>\n"+"</span>\n"+"<span class=\"popular-copy\" ng-if=\"::(item.popular === '1')\">- <span translate=\"buybarsmodal_mostpopular\"></span></span>\n"+"<button class=\"btn btn-small\">${{::item.price}}</button>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"panel-two\" ng-class=\"{'active': activeItem.buying}\">\n"+"<button ng-click=\"toggleActiveItem()\" class=\"btn btn-transparent\"><i class=\"ynicon ynicon-btn-back\"></i></button>\n"+"<div class=\"heading\">\n"+"<div class=\"title\" translate=\"buybarsmodal_selectmethod\"></div>\n"+"<div class=\"subtitle\" translate=\"buybarsmodal_entercard\"></div>\n"+"<div class=\"item\">\n"+"<span class=\"icon\"><img ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/bars/icons/{{activeItem.SKU}}.png\" /></span>\n"+"<span class=\"name\"> <b>{{activeItem.name}} ({{activeItem.amount | number}} <span translate=\"_bars\"></span>)<span class=\"sub\"> - ${{activeItem.price}}</span></b> </span>\n"+"</div>\n"+"</div>\n"+"<div class=\"content\" ng-class=\"(vendor + '-container')\">\n"+"<button class=\"btn btn-confirm\" ng-if=\"vendor === 'payPal'\" ng-click=\"paypalCheckout()\" translate=\"buybarsmodal_paypal\">\n"+"</button>\n"+"{{details}}\n"+"<form id=\"braintree-form\" ng-if=\"(!config.buybarsiframe && vendor === 'braintree') || (!vendor)\">\n"+"<div id=\"braintree-dropin\"></div>\n"+"<button type=\"submit\" ng-disabled=\"disableBuy\" class=\"btn btn-confirm\">\n"+"<div class=\"spinning-container\" ng-if=\"disableBuy\">\n"+"<span class=\"spinning-loader\"></span>\n"+"</div>\n"+"<b translate=\"_submit\"></b>\n"+"</button>\n"+"</form>\n"+"</div>\n"+"<div class=\"bottom\">\n"+"<div class=\"copy\"><span translate=\"buybarsmodal_copy_terms\" style=\"display:inline;\"></span> <a href=\"/policy/en/terms\" target=\"_blank\" translate=\"_terms_of_service\"></a> <span translate=\"_and\"></span> <a href=\"/policy/en/privacy\" target=\"_blank\" translate=\"_privacy_policy\"></a>.</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/chat/chat-panel.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/chat/chat-panel.tpl.html","\n"+"\n"+"\n"+"\n"+"\n"+"<div class=\"chatcomments-mediumlarge\" ng-class=\"{'chatcomments-small': vm.swf.broadcast && !vm.collapsedGiftTray && vm.swf.broadcast.tfl.length !== 0 && vm.session.user.userId !== 0, 'chatcomments-large': !vm.swf.broadcast &&  vm.collapsedGiftTray || vm.swf.broadcast.tfl.length === 0 || !vm.swf.broadcast.tfl && vm.collapsedGiftTray, 'chatcomments-medium': (!vm.swf.broadcast && !vm.collapsedGiftTray || vm.swf.broadcast.tfl.length === 0 && !vm.collapsedGiftTray) && vm.session.user.userId !== 0}\">\n"+"<button class=\"prev-fan\" id=\"prevfan\" ng-click=\"vm.changeTopFan(-1)\" ng-if=\"vm.swf.broadcast.tfl.length && vm.topFanPosition!=='start'\">\n"+"<img ng-src=\"{{::vm.baseImageUrlv3}}/chat_topfan_arrow_prev.png\">\n"+"</button>\n"+"<div id=\"topfan-slider\" ng-class=\"{'no-top-fans': vm.swf.broadcast.tfl.length < 1 || !vm.swf.broadcast.tfl}\">\n"+"\n"+"<div class=\"top-fan\" ng-repeat=\"fan in vm.swf.broadcast.tfl track by $index\">\n"+"<a\n"+"class=\"thumb circle-thumb clickable\"\n"+"ng-style=\"{background: 'url({{::vm.thumb}}' + '/' + fan.uId + '/' + fan.uId + '.jpg' +') no-repeat, url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover'}\"\n"+"ng-href=\"/{{fan.n}}\" prevent-default\n"+"ng-click=\"vm.openProfile(fan.uId, undefined, 'TOP_FAN')\">\n"+"<span>{{$index + 1}}</span>\n"+"</a>\n"+"<div class=\"fan-details\">\n"+"<div>\n"+"<i class=\"ynbar ynicon ynicon-icon-bar\"></i> {{fan.b}}\n"+"</div>\n"+"<a\n"+"class=\"clickable fan-name\"\n"+"ng-href=\"/{{fan.n}}\" prevent-default\n"+"ng-click=\"vm.openProfile(fan.uId, undefined, 'TOP_FAN')\">\n"+"<i class=\"ynicon ynicon-level\"></i> {{fan.l}} {{fan.n}}\n"+"</a>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"top-fan\" ng-if=\"(vm.session.user && vm.session.user.userId) && !vm.swf.isTopFan && (vm.swf.broadcast.userId !== vm.session.user.userId)\">\n"+"<a\n"+"class=\"thumb circle-thumb clickable\"\n"+"ng-style=\"{ background: 'url(' + vm.thumb + '/' + vm.session.user.userId + '/' + vm.session.user.userId + '.jpg), url(' + vm.noThumb + ') no-repeat', 'background-size': 'cover' }\"\n"+"ng-href=\"/{{vm.session.user.profile}}\" prevent-default\n"+"ng-click=\"vm.openProfile(vm.session.user.userId)\">\n"+"</a>\n"+"<div class=\"see-text\">\n"+"<span translate=\"livebroadcast_become_topfan\" translate-values=\"{value:vm.swf.broadcast.username}\"></span>\n"+"</div>\n"+"<button class=\"btn btn-small btn-confirm\" ng-click=\"vm.openGiftTray();\" translate=\"chat_see_gifts\"></button>\n"+"</div>\n"+"\n"+"</div>\n"+"<div class=\"topfan-slider-divider\" ng-if=\"vm.swf.broadcast.tfl.length > 0\"></div>\n"+"<!-- fanmail view -->\n"+"<div class=\"fan-mail-widget\" ng-class=\"{'fan-mail-available': vm.swf.fanMailQueue[0].isShowing}\">\n"+"<a\n"+"class=\"thumb circle-thumb pull-left\"\n"+"ng-style=\"{background: 'url({{::vm.thumb}}' + '/' + vm.swf.fanMailQueue[0].userId + '/' + vm.swf.fanMailQueue[0].userId + '.jpg), url('+ vm.noThumb +') no-repeat', 'background-size': 'cover'}\"\n"+"ng-href=\"/{{vm.swf.fanMailRequestQueue[0].profile}}\" prevent-default\n"+"ng-click=\"vm.openProfile(vm.swf.fanMailQueue[0].userId)\">\n"+"<img class=\"fan-mail-icon\" ng-src=\"{{::vm.config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/animations/yn_anim_fanmail_132x132bc.gif\">\n"+"</a>\n"+"<div class=\"actions\">\n"+"<button ng-click=\"vm.dismissFanMail()\" class=\"close btn-reset\"><i class=\"ynicon ynicon-close\"></i></button>\n"+"</div>\n"+"<div class=\"fan-mail-sender\">\n"+"<a\n"+"ng-href=\"/{{vm.swf.fanMailQueue[0].profile}}\" prevent-default\n"+"ng-click=\"vm.openProfile(vm.swf.fanMailQueue[0].userId)\"\n"+"class=\"short-text\">\n"+"<user-badge-dynamic role=\"vm.swf.fanMailQueue[0].role\" level=\"vm.swf.fanMailQueue[0].userLevelFloor\" subscription-type=\"vm.swf.fanMailQueue[0].subscriptionType\" channelId=\"vm.swf.fanMailQueue[0].channelId\"></user-badge-dynamic>\n"+"{{vm.swf.fanMailQueue[0].name}}\n"+"</a>\n"+"</div>\n"+"<div class=\"fan-mail-message msg-long\">\n"+"{{vm.swf.fanMailQueue[0].comment}}\n"+"</div>\n"+"</div>\n"+"<!-- fanmail req -->\n"+"<div class=\"fan-mail-widget\" ng-class=\"{'fan-mail-available': vm.swf.fanMailRequestQueue[0].isShowing}\">\n"+"<a\n"+"class=\"thumb circle-thumb pull-left\"\n"+"ng-style=\"{ background: 'url({{::vm.thumb}}' + '/' + vm.swf.fanMailRequestQueue[0].userId + '/' + vm.swf.fanMailRequestQueue[0].userId + '.jpg' + '), url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover' }\"ng-href=\"/{{vm.swf.fanMailRequestQueue[0].profile}}\" prevent-default\n"+"ng-click=\"vm.openProfile(vm.swf.fanMailRequestQueue[0].userId)\">\n"+"<img class=\"fan-mail-icon\" ng-src=\"{{::vm.config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/animations/yn_anim_fanmail_132x132bc.gif\">\n"+"</a>\n"+"<div class=\"actions\">\n"+"<button ng-click=\"vm.respondToFanMail(vm.swf.fanMailRequestQueue[0], 'DELIVERED')\" class=\"accept btn-primary\" translate=\"_accept\"></button>\n"+"<button ng-click=\"vm.respondToFanMail(vm.swf.fanMailRequestQueue[0], 'CANCELLED')\" class=\"decline btn-cancel\" translate=\"_decline\"></button>\n"+"</div>\n"+"<div class=\"fan-mail-sender\">\n"+"<a\n"+"ng-href=\"/{{vm.swf.fanMailRequestQueue[0].profile}}\" prevent-default\n"+"ng-click=\"vm.openProfile(vm.swf.fanMailRequestQueue[0].userId)\"\n"+"class=\"short-text\">\n"+"<span class=\"ynbadge\" ng-if=\"vm.swf.fanMailRequestQueue[0].subscriptionType\">\n"+"<img\n"+"ng-src=\"{{::vm.config.settings.BadgeBaseUrl}}/{{::vm.broadcast.broadcaster.userId}}/{{::vm.swf.fanMailRequestQueue[0].subscriptionType}}/badge@2x.png\"\n"+"/>\n"+"</span>\n"+"\n"+"<span class=\"comment-crowns-container\"></i>\n"+"<span class=\"comment-crowns\" ng-if=\"::( !vm.swf.fanMailRequestQueue[0].subscriptionType && vm.swf.fanMailRequestQueue[0].userLevelFloor && (!vm.swf.fanMailRequestQueue[0].role || vm.swf.fanMailRequestQueue[0].role==3) )\">\n"+"<i class=\"ynicon ynicon-level\"></i>\n"+"</span>\n"+"<span class=\"comment-crowns\" ng-if=\"::( vm.swf.fanMailRequestQueue[0].role === 2 )\">\n"+"<i class=\"ynicon ynicon-ambass\"></i>\n"+"</span>\n"+"\n"+"</span>\n"+"\n"+"{{vm.swf.fanMailRequestQueue[0].level}} {{vm.swf.fanMailRequestQueue[0].name}}\n"+"</a>\n"+"</div>\n"+"<div class=\"fan-mail-message\">\n"+"{{vm.swf.fanMailRequestQueue[0].copy}}\n"+"</div>\n"+"</div>\n"+"<button class=\"next-fan\" id=\"nextfan\" ng-click=\"vm.changeTopFan(1)\" ng-if=\"vm.swf.broadcast.tfl.length && vm.topFanPosition!=='end'\">\n"+"<img ng-src=\"{{::vm.baseImageUrlv3}}/chat_topfan_arrow_next.png\">\n"+"</button>\n"+"<div id=\"chatcomments\"\n"+"class=\"chatcomments {{'chatMode'+vm.swf.broadcast.chatMode+' '}} mini-scroll\"\n"+"only-scroll\n"+">\n"+"<div class=\"chatcomment\" ng-repeat=\"comment in vm.swf.broadcast.comments\" ng-class=\"::{'chat-mention': comment.mention || comment.p2pComment || comment.isFriend, 'subscriber': comment.subscriptionType, 'not-subscriber': !comment.subscriptionType}\">\n"+"<div ng-if=\"::comment.p2pComment\">\n"+"<img class=\"circle-thumb\" ng-src=\"{{::vm.thumb + '/' + comment.userId + '/' + comment.userId + '.jpg'}}\" fallback-src=\"{{::vm.noThumb}}\"/>\n"+"<div class=\"comment-content\">\n"+"<div>\n"+"<a ng-click=\"vm.openProfile(comment.userId, comment, 'CHAT', $event)\" class=\"chat-name\">\n"+"@{{::comment.name}}\n"+"</a>\n"+"</div>\n"+"<div>\n"+"<span ng-bind-html=\"::(comment.hashedComment)\"></span>\n"+"<i class=\"ynicon ynicon-icon-reply\"></i>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"::comment.systemComment\">\n"+"<div ng-if=\"::(vm.swf.broadcast.disableSelfie == '0')\">\n"+"<div class=\"selfie-container\" ng-click=\"vm.selectSelfie(comment, vm.swf.broadcast.userId)\">\n"+"<img class=\"circle-thumb\" ng-src=\"{{::comment.sf}}\"/>\n"+"<i class=\"ynicon ynicon-icon-selfie\"></i>\n"+"</div>\n"+"<div class=\"comment-content\">\n"+"<div class=\"userBox\">\n"+"<a\n"+"ng-click=\"vm.openProfile(comment.userId, comment, 'CHAT', $event)\"\n"+"class=\"chat-name\"\n"+"ng-if=\"::(comment.role !== 1)\">\n"+"{{::comment.name}}\n"+"</a>\n"+"<span class=\"chat-name moderator\" ng-if=\"::(comment.role === 1)\">Moderator: <br /><span>{{::comment.name}}</span></span>\n"+"<br />\n"+"<user-badge role=\"{{::comment.role}}\" level=\"{{::comment.userLevelFloor}}\" subscription-type=\"{{::comment.subscriptionType}}\" channelId=\"{{::comment.userId}}\"></user-badge>\n"+"</div>\n"+"<div class=\"messageBox\">\n"+"<span style=\"float:left;\" ng-if=\"::(!comment.giftId)\" ng-class=\"::{'special-chat': comment.role === 2 || comment.isBroadcaster, moderator:  comment.role === 1}\" ng-bind-html=\"::comment.hashedComment\"></span>\n"+"<img ng-if=\"::(comment.giftId !== false)\" ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{::vm.swf.giftSkus[comment.giftId]}}/web_chat.png\">\n"+"<span class=\"gift-quantity\" ng-if=\"::(comment.giftId !== false && comment.quantity > 1)\">{{::comment.quantity}}x</span>\n"+"<a\n"+"ng-click=\"vm.openProfile(comment.otherUserId, comment, 'CHAT', $event)\"\n"+"class=\"chat-name\"\n"+"ng-if=\"::(comment.role !== 1)\">\n"+"{{::comment.otherName}}\n"+"</a>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"::(!comment.p2pComment && !comment.systemComment)\">\n"+"<div class=\"selfie-container\" ng-click=\"vm.selectSelfie(comment, vm.swf.broadcast.userId)\">\n"+"<div class=\"circle-thumb clickable pull-left\" ng-style=\"::{background: 'url('+vm.thumb + '/' + comment.userId + '/' + comment.userId + '.jpg' +') no-repeat, url('+ vm.noThumb +') no-repeat', 'background-size': 'cover'}\"></div>\n"+"</div>\n"+"<div class=\"comment-content\">\n"+"<div class=\"userBox\">\n"+"<a\n"+"ng-click=\"vm.openProfile(comment.userId, comment, 'CHAT', $event)\"\n"+"class=\"chat-name\"\n"+"ng-if=\"::(comment.role !== 1)\">\n"+"{{::comment.name}}\n"+"</a>\n"+"<span class=\"chat-name moderator\" ng-if=\"::(comment.role === 1)\">Moderator: <br /><span>{{::comment.name}}</span></span>\n"+"<br />\n"+"<user-badge role=\"{{::comment.role}}\" level=\"{{::comment.userLevelFloor}}\" subscription-type=\"{{::comment.subscriptionType}}\" channelId=\"{{::comment.userId}}\"></user-badge>\n"+"</div>\n"+"<div class=\"messageBox\">\n"+"<div ng-repeat=\"subComment in comment.sub\">\n"+"<span ng-if=\"::(subComment.sent)\" class=\"ynicon ynicon-icon-check\"></span>\n"+"<span ng-if=\"::(!subComment.giftId)\" ng-class=\"::{'special-chat': subComment.role === 2 || subComment.isBroadcaster, moderator:  subComment.role === 1}\" ng-bind-html=\"::subComment.hashedComment\"></span>\n"+"<img class=\"giftImg\" ng-if=\"::(comment.giftId !== false && comment.giftId != vm.config.settings.PARTNER_STICKER_GIFT_ID)\" ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{::vm.swf.giftSkus[subComment.giftId]}}/web_chat.png\">\n"+"<img class=\"giftImg\" ng-if=\"::(comment.giftId == vm.config.settings.PARTNER_STICKER_GIFT_ID)\" ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{::comment.SKU}}/{{::comment.target}}/web_chat.png\">\n"+"<span class=\"gift-quantity\" ng-if=\"::(subComment.giftId !== false && subComment.quantity > 1)\">{{::comment.quantity}}x</span>\n"+"<span class=\"gift-quantity\" ng-if=\"::(subComment.giftId !== false && subComment.comment != '')\">{{::comment.comment}}</span>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div ng-click=\"vm.pauseChat = !vm.pauseChat\"\n"+"ng-class=\"{active: vm.pauseChat}\"\n"+"class=\"pull-right scroll-toggle ynicon-icon-mod-container\"\n"+"tooltip=\"Pause the chat.\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-placement=\"top\"\n"+"tooltip-append-to-body=\"true\">\n"+"<i class=\"ynicon ynicon-icon-mod\"></i>\n"+"</div>\n"+"<div id=\"chatinput\">\n"+"<div class=\"chat-alert-toolbar\" ng-class=\"{'chat-alert-open': vm.alert.length > 0}\">\n"+"{{vm.alert}}\n"+"<progressbar ng-if=\"vm.spamTimer\" value=\"vm.spamTimeLeft\" animate=\"true\" max=\"60\"></progressbar>\n"+"</div>\n"+"<form class=\"chat_input_row\" name=\"vm.commentForm\" novalidate>\n"+"<div class=\"chat-input\">\n"+"<select ng-model=\"vm.replacementKey\">\n"+"<option value=\"none\">none</option>\n"+"<option ng-repeat=\"key in vm.replacementKeys\" value=\"{{key}}\">{{key}}</option>\n"+"</select>\n"+"<input\n"+"ng-model=\"vm.newComment\"\n"+"mentio=\"\"\n"+"mentio-require-leading-space=\"true\"\n"+"placeholder=\"{{vm.chatInputPlaceholder}}\"\n"+"name=\"commentInput\"\n"+"type=\"text\"\n"+"yn-enter=\"vm.postComment()\"\n"+"maxlength=\"{{vm.supermessageActive ? 30 : 150}}\"\n"+"ng-trim=\"false\"\n"+"ng-click=\"vm.trackChat()\"\n"+"autocomplete=\"off\"\n"+"id=\"commentInput\"\n"+"required>\n"+"<mentio-menu\n"+"mentio-for=\"'commentInput'\"\n"+"mentio-trigger-char=\"'@'\"\n"+"mentio-items=\"vm.chatters\"\n"+"mentio-template-url=\"angularjsapp/src/app/components/mention/mention-dropup.tpl.html\"\n"+"mentio-search=\"vm.searchChatters(term)\"\n"+"mentio-select=\"vm.selectChatter(item)\"\n"+"></mentio-menu>\n"+"<label class=\"supermessage-toggle\" ng-if=\"vm.swf.broadcast.isSubscribable && vm.session.user.userId !== vm.broadcast.broadcaster.userId\">\n"+"<input id=\"supermessageToggle\" class=\"switch-input\" type=\"checkbox\" ng-click=\"vm.toggleSupermessages('subscriber_super_messages')\" ng-model=\"vm.supermessageActive\" pass-focus-to=\"commentInput\">\n"+"<span class=\"switch\">\n"+"<span class=\"sknob-rect\">\n"+"<img class=\"yn-badge\" ng-src=\"{{::vm.config.settings.BadgeBaseUrl}}/{{vm.broadcast.broadcaster.userId}}/1/badge@2x.png\" />\n"+"<span class=\"supermessage-count\">{{vm.subscriptionBenefits[vm.broadcast.broadcaster.userId].superMessages}}</span>\n"+"</span>\n"+"</span>\n"+"</label>\n"+"<div class=\"characterCount\">{{(vm.supermessageActive ? 30 : 150) - vm.newComment.length}}</div>\n"+"<div class=\"messagePreview\">{{vm.messagePreview}}</div>\n"+"</div>\n"+"<div>\n"+"<button class=\"btn pull-right ellipsify\" ng-class=\"{'dim': !vm.collapsedGiftTray, 'btn-confirm': vm.collapsedGiftTray }\" ng-click=\"vm.postComment()\" translate=\"_chat_verb\"></button>\n"+"</div>\n"+"</form>\n"+"</div>\n"+"<!-- test -->\n"+"<div id=\"gifttray\" ng-class=\"{'gift-tray-open': !vm.collapsedGiftTray && vm.session.user.userId !== 0}\">\n"+"<div ng-click=\"vm.disabledGiftTray()\" class=\"overlay\" ng-if=\"!vm.session.user.userId ||  vm.session.user.banId !== 0 || vm.session.user.moderator === 1\"></div>\n"+"<div class=\"gifttray-basic\" ng-class=\"{'disabled-gift': vm.swf.settingUpBroadcast}\" ng-if=\"vm.collapsedGiftTray\">\n"+"<div class=\"toggle-tray-btn\" ng-click=\"vm.toggleGiftTray();\">\n"+"<i class=\"ynicon ynicon-carrot-up\"></i>\n"+"<i class=\"ynicon ynicon-gift\"></i>\n"+"</div>\n"+"</div>\n"+"<div class=\"gifttray-basic menu-mode\" ng-class=\"{'disabled-gift': vm.swf.settingUpBroadcast}\" ng-if=\"!vm.collapsedGiftTray\">\n"+"<div class=\"toggle-tray-btn\" ng-click=\"vm.toggleGiftTray();\">\n"+"<i class=\"ynicon ynicon-carrot-dwn\"></i>\n"+"<i class=\"ynicon ynicon-gift\"></i>\n"+"</div>\n"+"</div>\n"+"<div class=\"gifttray-wallet\">\n"+"<span class=\"current-broadcaster short-text\" translate=\"chat_gift_user\" translate-values=\"{user:vm.swf.broadcast.username}\"></span>\n"+"<div class=\"pull-right\">\n"+"<span>\n"+"<span\n"+"tooltip=\"{{vm.session.user.userCoins | number}}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-enable=\"vm.session.user.userCoins > 10000\"\n"+"tooltip-append-to-body=\"true\">\n"+"<i class=\"yncoin ynicon ynicon-coins\"></i> {{vm.Api.squashedNumber(vm.session.user.userCoins, 4)}}\n"+"</span>\n"+"<span\n"+"tooltip=\"{{vm.session.user.vault.webBars | number}}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-enable=\"vm.session.user.vault.webBars > 10000\"\n"+"tooltip-append-to-body=\"true\">\n"+"<i class=\"ynbar ynicon ynicon-icon-bar\"></i> {{vm.Api.squashedNumber(vm.session.user.vault.webBars, 4)}}\n"+"</span>\n"+"</span>\n"+"<button class=\"btn btn-confirm btn-small\" ng-if=\"!vm.session.user.spendingDisabled\" ng-click=\"vm.buyBars()\" translate=\"_getbars\"></button>\n"+"</div>\n"+"</div>\n"+"<div class=\"gifttray-extension\" only-scroll>\n"+"<!-- bc gifts -->\n"+"<img class=\"gift\"\n"+"ng-repeat=\"gift in vm.bcGifts track by $index\"\n"+"ng-if=\"!vm.swf.broadcast.disabledGoodies[gift.SKU] && ( gift.locales.indexOf(vm.swf.broadcast.locale) !== -1 || gift.locales.indexOf('ww') !== -1 ) && vm.session.user.userId === vm.swf.broadcast.userId\"\n"+"ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{::gift.SKU}}/web.png\"\n"+"tooltip-html-unsafe=\"{{vm.getMultiplierCost(gift)}}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-append-to-body=\"true\"\n"+"ng-click=\"vm.postGift(gift, undefined, undefined, $event)\">\n"+"<!-- general gifts -->\n"+"<img class=\"gift\"\n"+"ng-repeat=\"gift in vm.giftItems track by $index\"\n"+"ng-if=\"!vm.swf.broadcast.disabledGoodies[gift.SKU] && ( gift.VIP === 0 || (vm.broadcast.broadcaster.partner === '1' && gift.VIP === 2) ) && ( gift.locales.indexOf(vm.swf.broadcast.locale) !== -1 || gift.locales.indexOf('ww') !== -1 )\"\n"+"ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{::gift.SKU}}/web{{::(gift.itemGameType=='TIP' && vm.session.user.globalSpenderRank ? '_vip' : '')}}.png\"\n"+"tooltip-html-unsafe=\"{{ ( vm.swf.broadcast.chatMode==1 && gift.costType=='COINS' && !vm.session.subStatus[vm.swf.broadcast.userId] ) ? 'subscribers only' : vm.getMultiplierCost(gift) }}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-append-to-body=\"true\"\n"+"ng-disabled=\"vm.session.user.userId === vm.swf.broadcast.userId && gift.itemGameType !== 'LIKES_BROADCASTER'\"\n"+"ng-class=\"{'disabled-gift no-cursor': gift.minLevel > vm.session.user.realLevel || gift.cost > vm.session.user.userCoins || vm.swf.settingUpBroadcast || ( (vm.session.user.userId === vm.swf.broadcast.userId)) || ( vm.swf.broadcast.chatMode==1 && gift.costType=='COINS' && !vm.session.subStatus[vm.swf.broadcast.userId] ) }\"\n"+"ng-click=\"vm.postGift(gift, undefined, undefined, $event)\">\n"+"</div>\n"+"<div class=\"gifttray-premium\" ng-class=\"{'premium-selected': vm.premiumGiftSelected.opened && vm.session.user.userId !== 0}\">\n"+"<i class=\"ynicon ynicon-close\" ng-click=\"vm.closeGiftTray()\"></i>\n"+"<!-- normal premium gift -->\n"+"<img class=\"premium-gift\" ng-if=\"vm.premiumGiftSelected.itemGameType !== 'TIP' && vm.premiumGiftSelected.itemGameType !== 'PROPOSAL' && vm.premiumGiftSelected.itemGameType !== 'FANMAIL'\" ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{vm.premiumGiftSelected.SKU}}/web.png\">\n"+"<!-- tip -->\n"+"<img class=\"premium-gift\" ng-if=\"vm.premiumGiftSelected.itemGameType === 'TIP'\" ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{vm.premiumGiftSelected.SKU}}/web_overlay{{vm.session.user.globalSpenderRank ? '_vip' : ''}}.png\">\n"+"<!-- proposal -->\n"+"<div class=\"premium-gift\" ng-if=\"vm.premiumGiftSelected.itemGameType === 'PROPOSAL'\">\n"+"<img class=\"premium-gift\" ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{vm.premiumGiftSelected.SKU}}/web_overlay.png\" />\n"+"<div class=\"thumb proposal\" ng-style=\"{background: 'url({{::vm.thumb}}' + vm.session.user.userId +'), url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover'}\"></div>\n"+"</div>\n"+"<!-- fanmail -->\n"+"<div class=\"premium-gift\" ng-if=\"vm.premiumGiftSelected.itemGameType === 'FANMAIL'\">\n"+"<img class=\"fanmail\" ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{vm.premiumGiftSelected.SKU}}/web_animation{{vm.session.user.globalSpenderRank ? '_vip' : ''}}.gif\" />\n"+"<div class=\"thumb circle-thumb\" ng-style=\"{background: 'url({{::vm.thumb}}' + vm.session.user.userId +'), url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover'}\"></div>\n"+"</div>\n"+"<div class=\"premium-gift-name ellipsify transline-top\" ng-class=\"{'fanmail-name': vm.premiumGiftSelected.itemGameType === 'FANMAIL'}\">\n"+"<span>{{vm.premiumGiftSelected.name}}</span>\n"+"<span ng-if=\"vm.premiumGiftSelected.itemGameType === 'TIP'\">{{vm.swf.broadcast.username}}!</span>\n"+"</div>\n"+"<div class=\"premium-gift-desc\" ng-if=\"vm.premiumGiftSelected.itemGameType === 'ANIMATION' && vm.premiumGiftSelected.description\">\n"+"{{vm.premiumGiftSelected.description}}\n"+"</div>\n"+"<div class=\"premium-gift-desc\" ng-if=\"vm.premiumGiftSelected.itemGameType === 'LIKES'\">\n"+"{{vm.premiumGiftSelected.description}}\n"+"</div>\n"+"<div class=\"premium-gift-desc\" ng-if=\"vm.premiumGiftSelected.itemGameType === 'LIKES_BROADCASTER'\">\n"+"{{vm.premiumGiftSelected.description}}\n"+"</div>\n"+"<div class=\"premium-gift-desc transline-mid\" ng-if=\"vm.premiumGiftSelected.SKU === 'CHATCOOLDOWN'\">\n"+"{{vm.premiumGiftSelected.description}}\n"+"<span translate=\"chat_wait_time\"></span>\n"+"<span>{{vm.cooldownTime * 1000 | date: 'mm:ss'}}</span>\n"+"</div>\n"+"<div class=\"premium-gift-desc fanmail-desc\" ng-if=\"vm.premiumGiftSelected.itemGameType === 'FANMAIL'\">\n"+"<span translate=\"_send\"></span>\n"+"<span class=\"short-text\"> {{vm.swf.broadcast.username}}</span>\n"+"<span translate=\"chat_special_message_to_get_featured\"></span>\n"+"<input\n"+"class=\"fanmail-input\"\n"+"ng-class=\"{'input-invalid': vm.fanmailInvalid && (vm.fanMailMessage.length === 0 || !vm.fanMailMessage)}\"\n"+"placeholder=\"Enter your message\"\n"+"ng-model=\"vm.fanMailMessage\"\n"+"ng-maxlength=\"38\"\n"+"ng-required\n"+"yn-enter=\"vm.buyGift()\"\n"+"maxlength=\"38\">\n"+"<span class=\"fanmail-count\">{{38 - vm.fanMailMessage.length}}</span>\n"+"</div>\n"+"<div class=\"premium-gift-desc\" ng-if=\"vm.premiumGiftSelected.itemGameType === 'PROPOSAL'\">\n"+"{{vm.premiumGiftSelected.description}}\n"+"</div>\n"+"<div class=\"premium-gift-desc\" ng-if=\"vm.premiumGiftSelected.itemGameType === 'TIP'\">\n"+"<input type=\"text\" style=\"border:1px solid;\" ng-model=\"vm.bars\" /><br /><br />\n"+"<button class=\"btn btn-confirm\" ng-click=\"vm.buyGift(vm.bars)\">\n"+"Tip\n"+"</button>\n"+"<!--<div class=\"tip-cost\" ng-repeat=\"tip in vm.premiumGiftSelected.extraData.denominations\" ng-click=\"vm.buyGift(tip)\" ng-disabled=\"vm.premiumGiftSelected.buying || !vm.premiumGiftSelected.opened\">\n"+"<i class=\"ynbar ynicon ynicon-icon-bar\"></i>\n"+"<span>{{::tip | number}}</span>\n"+"</div>-->\n"+"</div>\n"+"<!-- BUTTONS -->\n"+"<!-- dynamic price -->\n"+"<div ng-if=\"vm.premiumGiftSelected.dynamicCost !== '0' && vm.premiumGiftSelected.SKU !== 'CHATCOOLDOWN'\">\n"+"<button class=\"btn btn-confirm\" id=\"buy-gift-button\" ng-click=\"vm.buyGift()\" ng-if=\"vm.swf.dynamicPricedGoodies[vm.premiumGiftSelected.SKU] && !vm.premiumGiftSelected.buying && vm.premiumGiftSelected.itemGameType !== 'TIP'\">\n"+"<span><span translate=\"_send\"></span> <i class=\"ynbar ynicon ynicon-icon-bar\"></i> {{vm.swf.dynamicPricedGoodies[vm.premiumGiftSelected.SKU]}}</span>\n"+"</button>\n"+"<button class=\"btn btn-confirm\" ng-if=\"!vm.swf.dynamicPricedGoodies[vm.premiumGiftSelected.SKU] || vm.premiumGiftSelected.buying\">\n"+"<div class=\"loader\"></div>\n"+"</button>\n"+"</div>\n"+"<!-- cooldown -->\n"+"<div ng-if=\"vm.premiumGiftSelected.dynamicCost !== '0' && vm.premiumGiftSelected.SKU === 'CHATCOOLDOWN'\">\n"+"<button class=\"btn btn-confirm\" id=\"buy-gift-button\" ng-click=\"vm.buyGift()\" ng-if=\"vm.premiumGiftSelected.purchasePrice && !vm.premiumGiftSelected.buying && vm.premiumGiftSelected.itemGameType !== 'TIP'\">\n"+"<span><span translate=\"_chat_now\"></span> <i class=\"ynbar ynicon ynicon-icon-bar\"></i> {{vm.swf.dynamicPricedGoodies[vm.premiumGiftSelected.SKU]}}</span>\n"+"<span ng-if=\"vm.premiumGiftSelected.dynamicCost === '0'\"><span translate=\"_send\"></span> <i class=\"ynbar ynicon ynicon-icon-bar\"></i> {{vm.premiumGiftSelected.purchasePrice}}</span>\n"+"</button>\n"+"<button class=\"btn btn-confirm\" ng-if=\"!vm.premiumGiftSelected.purchasePrice || vm.premiumGiftSelected.buying\">\n"+"<div class=\"loader\"></div>\n"+"</button>\n"+"</div>\n"+"<!-- static price -->\n"+"<div ng-if=\"vm.premiumGiftSelected.dynamicCost === '0'\">\n"+"<button class=\"btn btn-confirm\" id=\"buy-gift-button\" ng-click=\"vm.buyGift()\" ng-if=\"vm.premiumGiftSelected.purchasePrice && !vm.premiumGiftSelected.buying && vm.premiumGiftSelected.itemGameType !== 'TIP'\">\n"+"<span ng-if=\"vm.premiumGiftSelected.dynamicCost === '0'\"><span translate=\"_send\"></span> <i class=\"ynbar ynicon ynicon-icon-bar\"></i> {{vm.premiumGiftSelected.purchasePrice}}</span>\n"+"</button>\n"+"<button class=\"btn btn-confirm\" ng-if=\"!vm.premiumGiftSelected.purchasePrice || vm.premiumGiftSelected.buying\">\n"+"<div class=\"loader\"></div>\n"+"</button>\n"+"</div>\n"+"\n"+"\n"+"</div>\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/components/chat/chat.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/chat/chat.tpl.html","<div ng-click=\"vm.hidePlayerFullscreen();\" class=\"fullscreen-close\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</div>\n"+"<div class=\"fullscreen-gradient-top\"></div>\n"+"<div class=\"fullscreen-gradient-left\"></div>\n"+"\n"+"<div class=\"player-chat\" ng-class=\"{'collapsed': vm.chatCollapsed}\">\n"+"<div id=\"sidebar-container\" class=\"pull-left\" ng-class=\"{'loading-bc': vm.swf.eob !== undefined && !vm.swf.settingUpBroadcast}\">\n"+"<div class=\"sidebar-header\">\n"+"<div ng-click=\"vm.changeTab('Chat')\" class=\"tab-icon\" ng-class=\"{selected: (vm.swf.activeChatTab === 'Chat' || vm.swf.activeChatTab === 'SnapShot') && !vm.swf.settingUpBroadcast}\">\n"+"<span ng-if=\"vm.swf.fanMailRequestQueue && vm.swf.fanMailRequestQueue.length > 0\"><img ng-class=\"{'active-notification': vm.fanmailAnimState === vm.fanMailAnimation}\" class=\"fanmail-notification\" ng-src=\"{{vm.fanmailAnimState}}\"></span>\n"+"<span ng-if=\"vm.swf.unreadMessages > 0\" class=\"unread\">{{vm.swf.unreadMessages}}</span>\n"+"<i class=\"ynicon ynicon-chat\"></i>\n"+"</div>\n"+"<div ng-click=\"vm.changeTab('GlobalChat')\" class=\"tab-icon\" ng-class=\"{selected: (vm.swf.activeChatTab === 'GlobalChat')}\">\n"+"<i class=\"ynicon ynicon-icon-content-locale\"></i>\n"+"<span ng-if=\"vm.swf.unreadGlobalMessages > 0\" class=\"unread\">{{vm.swf.unreadGlobalMessages}}</span>\n"+"</div>\n"+"<div ng-click=\"vm.changeTab('Audience')\" class=\"tab-icon\" ng-class=\"{selected: vm.swf.activeChatTab === 'Audience' && !vm.swf.settingUpBroadcast}\">\n"+"<i  class=\"ynicon ynicon-audience\"></i>\n"+"</div>\n"+"<div class=\"tab-icon\" ng-if=\"vm.swf.broadcast.allowGuestCallers == '1'\" ng-click=\"vm.changeTab('Guest')\" ng-class=\"{selected: vm.swf.activeChatTab === 'Guest' && !vm.swf.settingUpBroadcast}\">\n"+"<i class=\"ynicon ynicon-bc-call\" ng-if=\"!vm.guestService.userGuestObj && !vm.guestService.countUpdated\"></i>\n"+"<img ng-if=\"vm.guestService.userGuestObj || vm.guestService.countUpdated\" class=\"guest-gif\" ng-src=\"{{::vm.config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/animations/guest_ready_tabtrans2_2x.gif\"/>\n"+"<span class=\"short-text guest-tab ellipsify\" ng-bind-html=\"vm.guestService.guestListCountFormatted\"></span>\n"+"</div>\n"+"<div class=\"tab-icon\" ng-click=\"vm.changeTab('Info')\" ng-class=\"{selected: vm.swf.activeChatTab === 'Info' && !vm.swf.settingUpBroadcast}\">\n"+"<i class=\"ynicon ynicon-broadcast\"></i>\n"+"</div>\n"+"<div ng-if=\"vm.isPremium\" class=\"tab-icon\" ng-click=\"vm.changeTab('Tasks')\" ng-class=\"{selected: vm.swf.activeChatTab === 'Tasks'}\">\n"+"<img src=\"https://schwestertester.github.io/img/tasks.png\" />\n"+"</div>\n"+"</div>\n"+"<div class=\"chatContent\" ng-if=\"vm.swf.activeChatTab === 'Chat' && !vm.swf.settingUpBroadcast\">\n"+"<span chat-panel class=\"sidebar-tab\" id=\"chatpanel\"></span>\n"+"</div>\n"+"<div class=\"chatContent\" ng-if=\"vm.swf.activeChatTab === 'GlobalChat'\">\n"+"<div class=\"chatcomments-global\">\n"+"<div id=\"globalchatcomments\" class=\"chatcomments mini-scroll\" only-scroll>\n"+"<div class=\"chatcomment\" ng-repeat=\"comment in vm.swf.globalComments\" ng-class=\"::{'old': comment.old, 'chat-mention': comment.mention || comment.p2pComment || comment.isFriend, 'subscriber': comment.subscriptionType, 'not-subscriber': !comment.subscriptionType}\">\n"+"<div ng-if=\"::(!comment.systemComment)\">\n"+"<div>\n"+"<div class=\"selfie-container\" ng-click=\"vm.selectSelfie(comment, vm.swf.broadcast.userId)\">\n"+"<img class=\"circle-thumb\" ng-src=\"{{::comment.profilePicture}}\"/>\n"+"<i class=\"ynicon ynicon-icon-selfie\"></i>\n"+"</div>\n"+"<div class=\"comment-content\">\n"+"<div class=\"userBox\">\n"+"<a\n"+"ng-click=\"vm.openProfile(comment.userId, comment, 'CHAT', $event)\"\n"+"class=\"chat-name\">\n"+"{{::comment.name}}\n"+"</a>\n"+"<br />\n"+"<div ng-if=\"comment.private\">\n"+"<img style=\"width:16px;height:12px\" src=\"https://schwestertester.github.io/img/icon_darkmode.png\"> Private\n"+"</div>\n"+"</div>\n"+"<div class=\"messageBox\">\n"+"<div ng-repeat=\"subComment in comment.sub\">\n"+"<span ng-class=\"::{'special-chat': subComment.role === 2 || subComment.isBroadcaster, moderator:  subComment.role === 1}\" ng-bind-html=\"::subComment.hashedComment\"></span>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div id=\"chatinput\">\n"+"<div style=\"margin-left: 15px;\">\n"+"<span>Users online: </span>\n"+"<strong>{{vm.swf.darkModeUsers}}</strong>\n"+"</div>\n"+"<form class=\"chat_input_row chat_input_darkMode\" name=\"vm.globalCommentForm\" novalidate>\n"+"<div>\n"+"<div class=\"selfie-container\" ng-click=\"vm.createSelfie()\">\n"+"<img class=\"circle-thumb\" ng-src=\"{{vm.selfies.localSelfieSrc.sf}}\">\n"+"<i class=\"ynicon ynicon-icon-selfie\"></i>\n"+"</div>\n"+"<input\n"+"ng-model=\"vm.newGlobalComment\"\n"+"mentio=\"\"\n"+"mentio-require-leading-space=\"true\"\n"+"placeholder=\"Have fun :)\"\n"+"name=\"commentInput\"\n"+"type=\"text\"\n"+"yn-enter=\"vm.postGlobalComment()\"\n"+"ng-maxlength=\"500\"\n"+"ng-trim=\"false\"\n"+"ng-click=\"vm.trackGlobalChat()\"\n"+"autocomplete=\"off\"\n"+"id=\"globalCommentInput\"\n"+"required>\n"+"<mentio-menu\n"+"mentio-for=\"'commentInput'\"\n"+"mentio-trigger-char=\"'@'\"\n"+"mentio-items=\"vm.chatters\"\n"+"mentio-template-url=\"angularjsapp/src/app/components/mention/mention-dropup.tpl.html\"\n"+"mentio-search=\"vm.searchChatters(term)\"\n"+"mentio-select=\"vm.selectChatter(item)\"\n"+"></mentio-menu>\n"+"</div>\n"+"<div ng-if=\"vm.globalCommentLength() < 500\" class=\"characterCount\">{{500 - vm.globalCommentLength()}}</div>\n"+"<div ng-if=\"!vm.newGlobalComment && vm.globalCommentLength() > 500\" class=\"characterCount invalid\" >0</div>\n"+"<div>\n"+"<button class=\"btn pull-right ellipsify btn-confirm\" ng-click=\"vm.postGlobalComment()\" translate=\"_chat_verb\"></button>\n"+"</div>\n"+"</form>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"chatContent\" ng-if=\"vm.swf.activeChatTab === 'Snapshot' \">\n"+"<span share-panel class=\"sidebar-tab\" id=\"sharepanel\"></span>\n"+"</div>\n"+"<div class=\"chatContent\" ng-if=\"vm.swf.activeChatTab === 'GuestSnapshot' \">\n"+"<span share-panel target=\"guest\" class=\"sidebar-tab\" id=\"sharepanel\"></span>\n"+"</div>\n"+"<div class=\"chatContent\" ng-if=\"vm.swf.activeChatTab === 'MomentShare' \">\n"+"<span share-panel target=\"shareMoment\" class=\"sidebar-tab\" id=\"sharepanel\"></span>\n"+"</div>\n"+"<div class=\"chatContent\" ng-if=\"vm.swf.activeChatTab === 'Moment' \">\n"+"<span moment-panel class=\"sidebar-tab\" id=\"momentpanel\"></span>\n"+"</div>\n"+"<div class=\"chatContent\" ng-if=\"vm.swf.activeChatTab === 'Audience'\">\n"+"<span audience-panel class=\"sidebar-tab\" id=\"audiencepanel\"></span>\n"+"</div>\n"+"<div class=\"chatContent\" ng-if=\"vm.swf.activeChatTab === 'Guest'\">\n"+"<span guest-panel class=\"sidebar-tab\" id=\"guestpanel\"></span>\n"+"</div>\n"+"<div class=\"chatContent\" ng-if=\"vm.swf.activeChatTab === 'Tasks'\">\n"+"<div id=\"tasks\">\n"+"<div class=\"headline\">\n"+"<strong>Your tasks</strong>\n"+"</div>\n"+"<div class=\"list mini-scroll\" only-scroll>\n"+"<div class=\"task\" ng-repeat=\"task in vm.swf.tasks\">\n"+"<div class=\"title\">\n"+"{{task.text}}\n"+"</div>\n"+"<div class=\"progress\">\n"+"<div ng-style=\"{width: task.progress}\" class=\"fill\">\n"+"</div>\n"+"<div class=\"label\">\n"+"{{task.state}}\n"+"</div>\n"+"<div ng-click=\"vm.cancelTask(task.id);\" class=\"cancel\">\n"+"</div>\n"+"</div>\n"+"<div class=\"property\" ng-repeat=\"property in task.properties\">\n"+"<div class=\"key\">{{property.key}}</div>\n"+"<div class=\"value\">{{property.value}}</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"chatContent\" ng-if=\"vm.swf.activeChatTab === 'Info'\">\n"+"\n"+"<div class=\"activity-panel social_links\" ng-if=\"broadcasterService.channel.snLinks\">\n"+"<div class=\"social_links_title primary-text\" translate=\"profile_social_title\"></div>\n"+"\n"+"<div class=\"connect-social-accounts\" ng-show=\"session.user.userId===broadcasterService.channel.userId\">\n"+"<p class=\"connect-body-text\" translate=\"profile_connect_social\"></p>\n"+"<a ng-click=\"openSettings('accounts')\" ng-href=\"/settings#accounts\" prevent-default=\"\" href=\"/settings#accounts\">\n"+"<button class=\"btn-confirm\"><i class=\"ynicon ynicon-settings\"></i>Connect</button>\n"+"</a>\n"+"</div>\n"+"\n"+"<div class=\"social_links_items\">\n"+"<a class=\"social_link\" ng-repeat=\"(key,social) in broadcasterService.channel.snKeyWords\" ng-href=\"{{social.url}}\" target=\"_blank\" ng-style=\"{'background-image':'url(\\'{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/social_profile/{{::key}}.png\\')'}\" ng-if=\"key!='facebook' && key!='google'\">\n"+"<span class=\"social_title\">\n"+"{{social.nickname}} <span class=\"social_username\">{{social.username}}</span>\n"+"</span>\n"+"<span class=\"social_description\">{{social.description}}</span>\n"+"</a>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"activity-panel\" ng-if=\"broadcasterService.channel.biggestFans.length\">\n"+"<div class=\"online-fans-title primary-text\">\n"+"<span translate=\"profile_biggest_fans_last_thirty_days\"> </span>\n"+"</div>\n"+"<div class=\"activity-panel\">\n"+"<div class=\"panel-body\">\n"+"<div class=\"friends-list mini-scroll\" only-scroll ng-if=\"broadcasterService.channel.biggestFans.length > 0\">\n"+"<a\n"+"class=\"activity\"\n"+"ng-repeat=\"friend in broadcasterService.channel.biggestFans | filter:friendfilter | orderBy:'-bars'\"\n"+"ng-href=\"/{{::friend.profile}}\" prevent-default\n"+"ng-click=\"showProfileSummary(friend.userId)\">\n"+"<div class=\"profile-img thumb\" ng-style=\"::{'background': 'url('+(cdn.thumb+friend.userId)+'), url('+cdn.nothumb+') no-repeat'}\"></div>\n"+"<div class=\"status\">\n"+"<span class=\"name short-text\">{{::friend.name}}</span>\n"+"\n"+"<div ng-if=\"friend.bars\" class=\"bars-text\">\n"+"<i class=\"ynbar ynicon ynicon-icon-bar\"></i> {{Api.squashedNumber(friend.bars) }}\n"+"</div>\n"+"\n"+"</div>\n"+"</a>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div style=\"padding:10px;overflow:auto;height:540px;width:100%\">\n"+"<div style=\"clear:both;float:left;font-size:14px;font-weight:bold;\">\n"+"Streamer\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">ID:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.userId}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Streamer Boost Level:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.broadcasterBoostLevel}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Broadcasts count:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.broadcastsCount}}</div>\n"+"</div>\n"+"<div ng-if=\"vm.broadcast.broadcaster.device === 'Mobile'\">\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Device:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.deviceName}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">OS version:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">\n"+"<span ng-if=\"vm.broadcast.broadcaster.platform==1\">iOS </span>\n"+"<span ng-if=\"vm.broadcast.broadcaster.platform==2\">Android </span>\n"+"{{vm.broadcast.broadcaster.osVersion}}\n"+"</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Connection:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.connection}}</div>\n"+"</div>\n"+"<div ng-if=\"vm.broadcast.broadcaster.provider !== ''\">\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Provider:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.provider}}</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"vm.broadcast.broadcaster.device === 'Computer'\">\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Browser:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.browser}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">OS:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.os}}</div>\n"+"</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Coins:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.fineCoins}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Level:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">\n"+"<span>{{vm.broadcast.broadcaster.currentLevel}}</span>\n"+"<span>(</span>\n"+"<span>{{vm.broadcast.broadcaster.levelPercentage}}</span>\n"+"<span>% to </span>\n"+"<span>{{vm.broadcast.broadcaster.nextLevel}}</span>\n"+"<span>)</span>\n"+"</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Points:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.finePoints}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Partner:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.partnerText}}</div>\n"+"</div>\n"+"<div style=\"clear:both;float:left;font-size:14px;font-weight:bold;\">\n"+"Stream\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">ID:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.broadcastId}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Origin:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.broadcastOriginType}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Curent Chatcooldown:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.currentChatCooldown}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">New fans:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.fans}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Featured time:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.featuredTime}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Gifts value:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.fineGiftsValue}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Max concurrent viewers:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.maxConcurrentViewers}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Min chat level:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.minChatLevel}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Paid Chat:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.paidChat}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Reconnects:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.reconnects}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">Views with treshold:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.viewsWithThreshold}}</div>\n"+"</div>\n"+"<div style=\"clear:both; float:left;margin-top:5px;\">\n"+"<div style=\"float:left;width:168px;\">RTMP:</div>\n"+"<div style=\"float:left;width:188px;text-align:right\">{{vm.broadcast.broadcaster.rtmp}}</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"vm.swf.settingUpBroadcast\" class=\"sidebar-tab\" id=\"settinguppanel\">\n"+"<div settingup-panel class=\"sidebar-tab\" id=\"settinguppanel\"></div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/chat/promo-widget.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/chat/promo-widget.tpl.html","<div class=\"under-chat\" ng-if=\"!fetching && banner.image\">\n"+"<!-- limited time Ad - use http://www.epochconverter.com/ to get timestamp in milliseconds - ng-if=\"config.UILocale=='en' && timestamp<1434211199999\" -->\n"+"<a ng-href=\"{{::banner.link}}\" ng-click=\"adclick(banner.userId)\" target=\"_blank\" rel=\"nofollow\">\n"+"<img ng-src= \"{{::banner.image}}\">\n"+"</a>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/confirm-modal/confirm.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/confirm-modal/confirm.tpl.html","<div class=\"modal-body\">{{message}}</div>\n"+"<div class=\"modal-footer\">\n"+"<button class=\"btn btn-confirm\" type=\"button\" ng-click=\"$close()\" translate=\"_yes\"></button>\n"+"<button class=\"btn btn-cancel\" type=\"button\" ng-click=\"$dismiss()\" translate=\"_cancel\"></button>\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/components/download-broadcast-modal/download-broadcast.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/download-broadcast-modal/download-broadcast.tpl.html","<div class=\"modal-body\">\n"+"\n"+"<button aria-hidden=\"true\" class=\"pull-right close\" ng-click=\"$dismiss()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"\n"+"<div>\n"+"<form name=\"downloadBroadcastEmail\" ng-submit=\"vm.submitEmail(downloadBroadcastEmail)\" novalidate>\n"+"\n"+"<div class=\"modal-top\">\n"+"<h2 class=\"heading\" translate=\"download_broadcast_download\">\n"+"</h2>\n"+"</div>\n"+"<div class=\"modal-middle\">\n"+"<div class=\"text\" translate=\"download_broadcast_email\">\n"+"</div>\n"+"<div class=\"form\">\n"+"<input placeholder=\"Email address\"\n"+"name=\"email\"\n"+"class=\"form-control\"\n"+"type=\"email\"\n"+"ng-validate\n"+"required\n"+"ng-model=\"vm.session.user.email\"\n"+"ng-pattern=\"emailRegex\"\n"+"tooltip=\"Please enter valid email\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-placement=\"top error\"\n"+"id=\"emailInput\"/>\n"+"</div>\n"+"</div>\n"+"<div class=\"modal-bottom\">\n"+"<button class=\"btn btn-confirm\" type=\"submit\" {{ (downloadBroadcastEmail.$touched && downloadBroadcastEmail.$valid) ? '' : 'disabled' }}>\n"+"{{ '_continue' | translate }}\n"+"</button>\n"+"</div>\n"+"\n"+"</form>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/editors-pick-modals/ep-congrats.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/editors-pick-modals/ep-congrats.tpl.html","<div class=\"modal-body\">\n"+"<button aria-hidden=\"true\" class=\"pull-right close\" ng-click=\"$dismiss()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"<div class=\"panel-one\">\n"+"<div class=\"ep-thumb\">\n"+"<div class=\"circle-thumb\" ng-style=\"::{'background': 'url('+modal.thumb+') no-repeat, url('+modal.nothumb+') no-repeat', 'background-size': 'cover'}\"></div>\n"+"<div class=\"ep-badge pull-left\">\n"+"<i class=\"ynicon ynicon-level\"></i> Editor's Choice\n"+"</div>\n"+"</div>\n"+"<h4 class=\"ep-tag\">#{{::modal.session.user.editorsPick.tag}}</h4>\n"+"<h3 class=\"title\">Congratulations!</h3>\n"+"<p class=\"ep-desc\">\n"+"Because of your talent and broadcast quality, you have been selected as Editor's Choice for <b>#{{::modal.session.user.editorsPick.tag}}</b>!\n"+"</p>\n"+"<div class=\"bottom\">\n"+"<button class=\"btn btn-confirm btn-wide\" ng-click=\"modal.continue()\">Continue</button>\n"+"</div>\n"+"</div>\n"+"<div class=\"panel-two\" ng-class=\"{'active': modal.state === 'description'}\">\n"+"<h3 class=\"title\">What does Editor's Choice Mean?</h3>\n"+"<div class=\"sub-title\">As Editor's choice for <b>#{{::modal.session.user.editorsPick.tag}}</b>, this means:</div>\n"+"<ul class=\"ep-list\">\n"+"<li>\n"+"Your profile will display the \"Editor's Choice\" badge, letting others know you have been handpicked by YouNow staff\n"+"<div class=\"ep-badge\">\n"+"<i class=\"ynicon ynicon-level\"></i> Editor's Choice\n"+"</div>\n"+"</li>\n"+"<li>\n"+"When you broadcast on <b>#{{::modal.session.user.editorsPick.tag}}</b>, you will receive a boost to give your broadcast more visibility\n"+"</li>\n"+"<li>\n"+"You will gain more fans, who are specifically interested in <b>#{{::modal.session.user.editorsPick.tag}}</b> content\n"+"</li>\n"+"</ul>\n"+"<div class=\"bottom\">\n"+"<button class=\"btn btn-confirm btn-wide\" ng-click=\"modal.continue()\">Sounds Good!</button>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/editors-pick-modals/ep-expired.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/editors-pick-modals/ep-expired.tpl.html","<div class=\"modal-body ep-expired\">\n"+"<button aria-hidden=\"true\" class=\"pull-right close\" ng-click=\"$dismiss()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"<div class=\"ep-thumb\">\n"+"<div class=\"circle-thumb\" ng-style=\"::{'background': 'url('+modal.thumb+') no-repeat, url('+modal.nothumb+') no-repeat', 'background-size': 'cover'}\"></div>\n"+"<div class=\"ep-badge pull-left\">\n"+"<i class=\"ynicon ynicon-level\"></i> Editor's Choice\n"+"</div>\n"+"</div>\n"+"<h4 class=\"ep-tag\">#{{::modal.session.user.editorsPick.tag}}</h4>\n"+"<h3 class=\"title\">Your Editor's Choice Status is up.</h3>\n"+"<p class=\"ep-desc\">\n"+"Hi {{::modal.name}}, we're excited we were able to help you grow your audience. We hope you've enjoyed your time as Editor's Choice <b>#dance</b>. To be considered for Editor's Choice in the future, keep creating great broadcast content!\n"+"</p>\n"+"<div class=\"bottom\">\n"+"<button class=\"btn btn-confirm btn-wide\" ng-click=\"modal.continue()\">Continue</button>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/fan-button/fan-button.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/fan-button/fan-button.tpl.html","<button class=\"btn btn-small btn-fan {{::classname}} {{fanStatus[channel.userId]?'btn-fanned':'btn-to-fan'}} {{subStatus[channel.userId]?'is-subscribed':'not-subscribed'}}\" ng-if=\"!hidden\" ng-click=\"toggleFan()\" >\n"+"<span class=\"tofan\" ng-if=\"!fanStatus[channel.userId]\">\n"+"<i class=\"ynicon ynicon-user-add\"></i>\n"+"<span class=\"text_regular\" ng-if=\"::(size != 'tiny')\" translate=\"_fan_verb\"></span>\n"+"<span class=\"text_wide\" ng-if=\"::(size != 'tiny')\" translate=\"_fan_become\" style=\"display:none;\"></span>\n"+"</span>\n"+"<span class=\"fanned\" ng-if=\"fanStatus[channel.userId]\">\n"+"<i class=\"ynicon ynicon-user-check\"></i>\n"+"<span ng-if=\"::(size != 'tiny')\" translate=\"_fanned\"></span>\n"+"</span>\n"+"</button>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/footer/footer.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/footer/footer.tpl.html","<div class=\"newFooter\">\n"+"\n"+"<!-- Start Container -->\n"+"<div class=\"container\">\n"+"\n"+"<!-- Localization -->\n"+"<div class=\"selectUILanguages\">\n"+"\n"+"<div class=\"language-section\">\n"+"<i class=\"ynicon ynicon-icon-languages\"></i>\n"+"<div class=\"dropdown language-dropdown \" dropdown>\n"+"<button class=\"btn dropdown-toggle\" dropdown-toggle  id=\"dropdownMenu1\" aria-haspopup=\"true\" aria-expanded=\"true\">\n"+"<span class=\"selectUIInput\">{{ config.UILanguages[ config.UILanguage ] }}</span>\n"+"</button>\n"+"<ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenu1\">\n"+"<i class=\"ynyounow-a-caret-up\"></i>\n"+"<li>\n"+"<div ng-repeat=\"(la, lang) in ::config.UILocales\"  ng-click=\"selectLanguage(la);\"><i ng-class=\"{'active':config.UILanguage == la}\" class=\"ynicon ynicon-icon-check\"></i> <span translate=\"{{lang}}\"></span>\n"+"</div>\n"+"\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"locale-section\">\n"+"<i class=\"ynicon ynicon-icon-content-locale\"></i>\n"+"<div class=\"dropdown language-dropdown \" dropdown>\n"+"<button class=\"btn dropdown-toggle\" dropdown-toggle  id=\"dropdownMenu1\" aria-haspopup=\"true\" aria-expanded=\"true\">\n"+"<span class=\"selectUIInput\">{{ config.UILocales[ config.UILocale ] || 'Worldwide' }}</span>\n"+"</button>\n"+"<ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenu1\">\n"+"<i class=\"ynyounow-a-caret-up\"></i>\n"+"<li>\n"+"<div ng-repeat=\"(la, lang) in ::config.UILocales\"  ng-click=\"selectLocale(la);\"><i ng-class=\"{'active':config.UILocale == la}\" class=\"ynicon ynicon-icon-check\"></i> <span translate=\"{{lang}}\"></span>\n"+"</div>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"<!-- Links -->\n"+"<div class=\"section footerlinks\" style=\"font-size:13px;display:inline;margin-left:10px;margin-right:10px;\">\n"+"<p style=\"line-height:18px;margin-top:7px;\">\n"+"<a href=\"javascript:void(0)\" ng-click=\"showAbout()\" ng-if=\"state.current.name!='about'\" translate=\"footer_about_title\"></a>\n"+"<span class=\"footerdivider\" ng-if=\"state.current.name!='about'\">|</span>\n"+"<a href=\"/featured\" ng-click=\"doAboutClick('Footer link', 'Live Now')\" ng-if=\"state.current.name==='about' && open\" translate=\"footer_live_title\" mobile-hide></a>\n"+"<span class=\"footerdivider\" ng-if=\"state.current.name==='about' && open\" mobile-hide>|</span>\n"+"<a href=\"/press\" ng-click=\"openDoc($event, 'Press')\" target=\"_blank\" translate=\"footer_press_title\"></a>\n"+"<span class=\"footerdivider\">|</span>\n"+"<a href=\"/careers\" ng-click=\"doAboutClick('Footer link', 'Careers')\" target=\"_blank\" translate=\"footer_careers_title\"></a>\n"+"<span class=\"footerdivider\">|</span>\n"+"<a href=\"http://blog.younow.com/\" ng-click=\"doAboutClick('Footer link', 'Blog')\" target=\"_blank\" translate=\"footer_blog_title\"></a>\n"+"<span class=\"footerdivider\">|</span>\n"+"<a href=\"policy/en/terms\" ng-click=\"openDoc($event,'Terms')\" translate-cloak translate=\"footer_terms_title\"></a>\n"+"<span class=\"footerdivider\">|</span>\n"+"<a ng-href=\"{{'footer_rules_link' | translate}}\" ng-click=\"openDoc($event,'Rules')\" translate-cloak translate=\"footer_rules_title\"></a>\n"+"<span class=\"footerdivider\">|</span>\n"+"<a href=\"policy/en/privacy\" ng-click=\"openDoc($event,'Privacy')\" translate-cloak translate=\"footer_privacy_title\"></a>\n"+"<span class=\"footerdivider\">|</span>\n"+"<a ng-href=\"{{'footer_trust_link' | translate}}\" ng-click=\"openDoc($event,'Trust')\" translate-cloak translate=\"footer_trust_title\"></a>\n"+"<span class=\"footerdivider\">|</span>\n"+"<a href=\"https://younow.zendesk.com/home\" ng-click=\"doAboutClick('Footer link', 'FAQ')\" target=\"_blank\" translate=\"footer_faq_title\"></a>\n"+"<span class=\"footerdivider\">|</span>\n"+"<a href=\"/app/iphone\" ng-click=\"doAboutClick('Footer link', 'iOS')\" target=\"_blank\" translate=\"footer_ios_title\"></a>\n"+"<span class=\"footerdivider\">|</span>\n"+"<a href=\"/app/android\" ng-click=\"doAboutClick('Footer link', 'Android')\" target=\"_blank\" translate=\"footer_android_title\"></a>\n"+"<span class=\"footerdivider\">|</span>\n"+"<a href=\"/partners/\" ng-click=\"doAboutClick('Footer link', 'Partners')\" target=\"_blank\" translate=\"footer_partners_title\"></a>\n"+"<span ng-if=\"config.UILanguage == 'de'\" class=\"footerdivider\">|</span>\n"+"<a ng-if=\"config.UILanguage == 'de'\" href=\"/policy/de/impressum\" target=\"_blank\">Impressum</a>\n"+"</p>\n"+"</div>\n"+"<!-- End Links-->\n"+"<!-- Social -->\n"+"<div class=\"section footericons\">\n"+"<a href=\"https://www.facebook.com/younow\" ng-click=\"doAboutClick('Footer link', 'Facebook')\" target=\"_blank\">\n"+"<img ng-src=\"{{::cdn.image}}/partners/icon_foot_fb.png\" name=\"fbbutton\" height=\"33\" width=\"33\"></a>\n"+"<a href=\"https://www.twitter.com/younow\" ng-click=\"doAboutClick('Footer link', 'Twitter')\" target=\"_blank\">\n"+"<img ng-src=\"{{::cdn.image}}/partners/icon_foot_tw.png\" name=\"twbutton\" height=\"33\" width=\"33\"></a>\n"+"<a href=\"http://www.instagram.com/younow\" ng-click=\"doAboutClick('Footer link', 'Instagram')\" target=\"_blank\">\n"+"<img ng-src=\"{{::cdn.image}}/partners/icon_foot_insta.png\" name=\"instabutton\" height=\"33\" width=\"33\"></a>\n"+"<a href=\"http://blog.younow.com/\" ng-click=\"doAboutClick('Footer link', 'Tumblr')\" target=\"_blank\">\n"+"<img ng-src=\"{{::cdn.image}}/partners/icon_foot_tm.png\" name=\"tmbutton\" height=\"33\" width=\"33\"></a>\n"+"<a href=\"https://www.youtube.com/user/YouNowlive\" ng-click=\"doAboutClick('Footer link', 'Youtube')\" target=\"_blank\">\n"+"<img ng-src=\"{{::cdn.image}}/partners/icon_foot_yt.png\" name=\"ytbutton\" height=\"33\" width=\"33\"></a>\n"+"</div>\n"+"<!-- End Social -->\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<font color=\"#d8d8d8\">\n"+"<!-- End Container -->\n"+"</font>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/gate-modal/gate-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/gate-modal/gate-modal.tpl.html","<div class=\"modal-body row\">\n"+"<div class=\"gate-title\">{{data.title|translate}}</div>\n"+"<div class=\"gate-message\">{{data.message|translate}}</div>\n"+"<button class=\"btn flat-login btn-confirm\" ng-click=\"respond(false)\">{{data.decline|translate}}</button>\n"+"<button class=\"btn flat-login btn-confirm\" ng-click=\"respond(true)\">{{data.confirm|translate}}</button>\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/components/guest-button/guest-button.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/guest-button/guest-button.tpl.html","<button class=\"btn btn-small btn-primary\" ng-if=\"!hidden\">\n"+"<i class=\"ynicon ynicon ynicon-bc-call\"></i> Guest\n"+"</button>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/guest-panel/guest-panel.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/guest-panel/guest-panel.tpl.html","<div class=\"guest-nav\">\n"+"<span class=\"guest-total\" ng-bind-html=\"vm.guestService.guestListCountFormatted\"></span>\n"+"<div class=\"btn-group\" dropdown>\n"+"<button class=\"btn btn-transparent pull-right\" dropdown-toggle>\n"+"<span class=\"text-muted\" translate=\"sort_by\"></span> <span translate=\"{{vm.guestListFilter}}\"></span> <i class=\"ynicon ynicon-carrot-dwn\"></i>\n"+"</button>\n"+"<ul class=\"dropdown-menu\" ng-class=\"vm.guestListFilter\">\n"+"<li class=\"level\" ng-click=\"vm.sortGuestList('level')\">\n"+"<i class=\"ynicon ynicon-carrot-up\"></i>\n"+"<a href translate=\"sorting_level\"></a>\n"+"</li>\n"+"<li class=\"waiting-longest\" ng-click=\"vm.sortGuestList('waitingtime', 'asc')\">\n"+"<a href translate=\"sorting_waitingtime_asc\"></a>\n"+"</li>\n"+"<li class=\"waiting-shortest\" ng-click=\"vm.sortGuestList('waitingtime', 'desc')\">\n"+"<a href translate=\"sorting_waitingtime_desc\"></a>\n"+"</li>\n"+"<li class=\"alphabetical\" ng-click=\"vm.sortGuestList('alphabetical')\">\n"+"<a href translate=\"sorting_alphabetical\"></a>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"<!-- viewers guestlist -->\n"+"<div class=\"guest-list mini-scroll\" infinite-scroll=\"vm.loadGuestList(true)\" threshold=\"30\" ng-class=\"{'broadcaster-guest-list': vm.swf.broadcast.userId == vm.session.user.userId, 'frozen': vm.previewImage !== undefined, 'guest-guest-list': vm.guestService.guest.userId == vm.session.user.userId}\" only-scroll>\n"+"<div class=\"guest guest-optin\" ng-class=\"{'clickable': !vm.guestService.userGuestObj}\" ng-click=\"vm.openGuestOptIn()\">\n"+"<img class=\"preview-image\" ng-class=\"{ 'in-list': vm.state === 'guestList'}\" ng-if=\"vm.previewImage\" ng-src=\"data:image/jpeg;base64,{{vm.previewImage}}\">\n"+"<img class=\"thumbnail-image\" ng-if=\"vm.guestService.userGuestObj\" ng-class=\"{'invisible': vm.previewImage}\" ng-src=\"{{vm.guestService.userGuestObj.snapshot}}\">\n"+"<div class=\"thumbnail-placeholder\" ng-if=\"!vm.guestService.userGuestObj.snapshot\">\n"+"<i class=\"ynicon ynicon-bc-call\"></i>\n"+"</div>\n"+"<div class=\"summary-placeholder\" ng-if=\"!vm.guestService.userGuestObj\">\n"+"<b translate=\"guest_become\"></b>\n"+"</div>\n"+"<div class=\"summary-placeholder in-list\" ng-if=\"vm.guestService.userGuestObj\">\n"+"<b translate=\"guest_inqueue\"></b>\n"+"<button class=\"btn btn-important\" ng-click=\"vm.optOut()\" translate=\"guest_remove\"></button>\n"+"</div>\n"+"</div>\n"+"<guest-list guests=\"vm.guestList\" user-id=\"vm.session.user.userId\" config=\"vm.config\" open-profile=\"vm.openProfile\" invite-guest=\"vm.inviteGuest\" broadcaster=\"vm.swf.broadcast\" translated-text=\"vm.translatedText\" watch-depth=\"reference\"/>\n"+"\n"+"<!-- <div class=\"guest\" ng-repeat=\"guest in vm.guestList\" ng-if=\"::(guest.userId != vm.session.user.userId)\"  >\n"+"<div class=\"thumb clickable\" ng-click=\"vm.openProfile(guest.userId, $index)\" ng-style=\"::{'background-image': 'url({{::(vm.config.settings.GuestSnapshotsBaseUrl + guest.snapshotUrl)}})', 'background-size': 'cover'}\"></div>\n"+"<div class=\"summary\">\n"+"<div class=\"guest-name short-text clickable\" ng-click=\"vm.openProfile(guest.userId)\">\n"+"<user-badge role=\"{{::guest.chatRole}}\" level=\"{{::guest.level}}\" subscription-type=\"{{::guest.subscriptionType}}\" channelId=\"{{::guest.userId}}\"></user-badge>\n"+"<b>{{::guest.name}}</b>\n"+"</div>\n"+"<div>\n"+"<span class=\"guest-bars\" ng-if=\"::(guest.bars > 0)\"><i class=\"ynicon ynicon-icon-bar\"></i> {{::guest.bars}}</span>\n"+"<span class=\"bullet\" ng-if=\"::(guest.bars > 0 && guest.formattedLocation.length > 0)\">&#8226;</span>\n"+"<span class=\"guest-location\" ng-if=\"::(guest.formattedLocation.length > 0)\">{{::guest.formattedLocation}}</span>\n"+"</div>\n"+"<div class=\"description line-clamp\"  ng-if=\"::(guest.description && guest.description.length > 0)\">\n"+"{{::guest.description}}\n"+"</div>\n"+"<button class=\"btn btn-primary\" ng-click=\"vm.inviteGuest(guest)\" translate=\"guest_make\"></button>\n"+"</div>\n"+"</div> -->\n"+"</div>\n"+"\n"+"<!-- empty guestlist -->\n"+"<div class=\"guest-list-empty\" ng-if=\"vm.guestList.length === 0 || !vm.guestList\">\n"+"<i class=\"ynicon ynicon-bc-call-nolines\"></i>\n"+"<div translate=\"guest_nomore\"></div>\n"+"</div>\n"+"\n"+"<!-- guest preview -->\n"+"<div class=\"guest-preview\" ng-class=\"{'active': vm.state === 'guestPreview'}\">\n"+"<button class=\"btn btn-transparent go-back\" ng-click=\"vm.closeGuestOptIn()\">\n"+"<i class=\"ynicon ynicon-btn-back\"></i>\n"+"</button>\n"+"<h4 class=\"preview-title\"><span translate=\"guest_smile_selected\" style=\"display:inline;\"></span><span class=\"short-text\">{{::vm.swf.broadcast.profile}}.</span></h4>\n"+"<div class=\"preview-video-container\">\n"+"<span class=\"counter\" ng-if=\"vm.counter > 0\">{{vm.counter}}</span>\n"+"<video id=\"preview-video\" camera-valid on-valid=\"vm.cameraValid()\"></video>\n"+"</div>\n"+"<div tooltip=\"{{vm.cameraReady ? '' : 'We werenât able to detect your camera. Please check your browser settings.'}}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-placement=\"top\"\n"+"tooltip-append-to-body=\"true\">\n"+"<button class=\"btn btn-confirm preview-control\"\n"+"ng-if=\"!vm.imageTaken\"\n"+"ng-disabled=\"vm.counter > 0 || !vm.cameraReady\"\n"+"ng-click=\"vm.previewCountdown()\">\n"+"<i class=\"ynicon ynicon-camera\"></i>\n"+"</button>\n"+"</div>\n"+"<!-- retry buttons -->\n"+"<div class=\"retry-buttons\" ng-if=\"vm.imageTaken\">\n"+"<button class=\"btn btn-cancel preview-control\" ng-disabled=\"vm.counter > 0\" ng-click=\"vm.previewCountdown()\">\n"+"<i class=\"ynicon ynicon-icon-redo\"></i>\n"+"</button>\n"+"<button class=\"btn btn-primary preview-control\" ng-disabled=\"vm.counter > 0\" ng-click=\"vm.optIn()\">\n"+"<i class=\"ynicon ynicon-icon-send\"></i>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/header/header.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/header/header.tpl.html","<div class=\"navbar\" ng-init=\"load()\">\n"+"<div class=\"notification normal type_{{$root.notifications.normal.type}}\" ng-class=\"{active: $root.notifications.normal.active}\">\n"+"<alert type=\"{{$root.notifications.normal.type}}\" bind-html-compile=\"$root.notifications.normal.message\"></alert>\n"+"<button class=\"close\" ng-click=\"closeNotification( $root.notifications.normal.group )\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"</div>\n"+"<div class=\"notification sticky type_{{$root.notifications.normal.type}}\" ng-class=\"{active: $root.notifications.sticky.active}\">\n"+"<alert type=\"{{$root.notifications.sticky.type}}\" bind-html-compile=\"$root.notifications.sticky.message\"></alert>\n"+"<button class=\"close\" ng-click=\"closeNotification( $root.notifications.sticky.group )\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"</div>\n"+"<div class=\"notification sticky banner type_{{$root.banners.sticky.type}}\" ng-class=\"{active: $root.banners.sticky.active}\">\n"+"<alert type=\"{{$root.banners.sticky.type}}\">\n"+"<span ng-if=\"$root.banners.sticky.active\" bind-html-compile=\"$parent.$root.banners.sticky.message\"></span>\n"+"</alert>\n"+"<button class=\"close\" ng-click=\"closeBanner( $root.banners.sticky.group )\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"</div>\n"+"\n"+"<div class=\"container\">\n"+"<div class=\"progress-buffer\"></div>\n"+"</div>\n"+"\n"+"<div class=\"gradient-accent\" ng-style=\"{'width': gradientProgress + '%', 'transition': 'width '+gradientProgress/150+'s linear', 'background-image': currentGradient}\"></div>\n"+"\n"+"<div class=\"navbar-content\">\n"+"<a class=\"nav-logo pull-left\" href=\"/{{config.hrefLanguage}}\" prevent-default ng-click=\"clickLogo(config.hrefLanguage)\">\n"+"<img ng-src=\"{{::cdn.base}}/angularjsapp/src/assets/images/logo/{{::logoBlack ? 'younow_text_logo_black.svg' : 'yn_white_logo.svg'}}\">\n"+"</a>\n"+"\n"+"<yn-search-bar size=\"tiny\"></yn-search-bar>\n"+"\n"+"<div class=\"user-actions nav-absolute\">\n"+"<div class=\"header-nav-text nav-explore pull-left\" ui-sref-active=\"selected\">\n"+"<a ui-sref=\"main.explore\" class=\"primary-text\" translate=\"header_explore\" ng-click=\"doHeaderNavigation('explore', $event)\"></a>\n"+"</div>\n"+"<div class=\"header-nav-text nav-moments pull-left\" ui-sref-active=\"selected\">\n"+"<a ui-sref=\"main.momentsFeed\" class=\"primary-text\" translate=\"header_moments\" ng-click=\"doHeaderNavigation('moments', $event); checkSeen('seenTrending');\"></a>\n"+"<div ng-if=\"!hasSeenTrending && inExperiment\" class=\"seen-dot moments\"></div>\n"+"</div>\n"+"<div class=\"header-nav-text nav-leaderboards pull-left\" ui-sref-active=\"selected\">\n"+"<a ui-sref=\"main.leaderboards\" class=\"primary-text\" translate=\"header_featured\" ng-click=\"doHeaderNavigation('leaderboards', $event); checkSeen('seenLeaderboards');\"></a>\n"+"<div ng-if=\"!hasSeenFeatured\" class=\"seen-dot\"></div>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"<div class=\"user-actions pull-right\" style=\"width:524px;\">\n"+"<!-- logged in header options -->\n"+"<div ng-if=\"session.loggedIn\" class=\"pull-right\" style=\"width:365px;\">\n"+"<!--\n"+"<button class=\"btn btn-primary secondary-text pull-left\" ng-click=\"goLive()\" translate=\"header_golive\"></button>\n"+"-->\n"+"<div class=\"pull-right\">\n"+"<div class=\"pull-left\" style=\"width:250px;margin-right:5px;\">\n"+"<div style=\"float:right;clear:both;\">\n"+"<span ng-if=\"isUser\">\n"+"User\n"+"</span>\n"+"<span ng-if=\"isPremium\">\n"+"Premium\n"+"</span>\n"+"<span ng-if=\"isModerator\">\n"+"Moderator\n"+"</span>\n"+"<span ng-if=\"isAdmin\">\n"+"Administrator\n"+"</span>\n"+"<img ng-if=\"isUser\" src=\"https://schwestertester.github.io/img/user_user.png\" />\n"+"<img ng-if=\"isPremium\" src=\"https://schwestertester.github.io/img/user_premium.png\" />\n"+"<img ng-if=\"isModerator\" src=\"https://schwestertester.github.io/img/user_moderator.png\" />\n"+"<img ng-if=\"isAdmin\" src=\"https://schwestertester.github.io/img/user_admin.png\" />\n"+"</div>\n"+"<div style=\"float:right;clear:both;margin-top:-1px;\">\n"+"<div ng-if=\"showPremiumTime\" class=\"pull-left\" style=\"margin-right:5px;font-size:10px;\">\n"+"Premium time left: <span style=\"font-weight:bold;\">{{premiumTimeLeft}}</span>\n"+"</div>\n"+"<div ng-if=\"!showPremiumTime\" class=\"pull-left\" style=\"margin-right:5px;margin-top:5px;font-size:10px;\">\n"+"You're not premium\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"notifications pull-left\" ng-class=\"{'has-notifications': session.notificationCount}\">\n"+"<div class=\"btn-group\" id=\"notifications-dropdown\" dropdown>\n"+"<button class=\"btn btn-transparent\" dropdown-toggle ng-click=\"checkNotifications($event)\">\n"+"<i class=\"ynicon ynicon-notifications\"></i>\n"+"</button>\n"+"<div class=\"dropdown-menu\">\n"+"<i class=\"ynicon ynicon-carrot-up\"></i>\n"+"<div class=\"feed mini-scroll\" only-scroll infinite-scroll=\"session.getNotifications()\" can-load=\"!session.noMoreNotifications\" threshold=\"300\">\n"+"<ul class=\"list\">\n"+"<li ng-repeat=\"notification in session.notifications\"\n"+"ng-class=\"::{new: notification.new}\"\n"+"ng-click=\"openNotification(notification, $event)\"\n"+"ng-attr-category=\"{{::notification.notificationTypeId}}\">\n"+"<div class=\"notification-item\">\n"+"<div class=\"circle-thumb pull-left\" ng-click=\"goToProfile(notification.userName, $event)\" ng-style=\"::{background: 'url(' + cdn.thumb+notification.eventUserId + ')  no-repeat, url(' + config.settings.ServerCDNBaseUrl  + '/images/nothumb.jpg) no-repeat', 'background-size': 'cover'}\">\n"+"<div class=\"notif-category\">\n"+"<i class=\"ynicon ynicon-user\"></i>\n"+"<i class=\"ynicon ynicon-thumb\"></i>\n"+"<i class=\"ynicon ynicon-broadcast\"></i>\n"+"<i class=\"ynicon ynicon-chat\"></i>\n"+"<span class=\"mention-icon\">@</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"description line-clamp\">\n"+"<div class=\"name\">\n"+"<span ng-click=\"goToProfile(notification.userName, $event)\">{{::notification.userName}}</span> {{::notification.template}}\n"+"</div>\n"+"<div class=\"time-ago\">{{::notification.timeAgo}}</div>\n"+"</div>\n"+"<div class=\"right-container\" track-source=\"ACTIVITY_FEED\">\n"+"<div fan-button size=\"tiny\" ng-if=\"::(notification.notificationTypeId === 3 || notification.notificationTypeId === 26)\" channel=\"notification.channel\"></div>\n"+"<div\n"+"class=\"thumb-image\"\n"+"ng-if=\"::(notification.imageUrl)\"\n"+"ng-style=\"::{background: 'url('+notification.imageUrl+') center / cover no-repeat'}\">\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"<div ng-show=\"(!session.notifications || session.notifications.length === 0) && session.noMoreNotifications\" class=\"empty\">\n"+"<span translate=\"header_this_is_where_your_notifications_appear\"></span>\n"+"</div>\n"+"<div class=\"settings-link clickable\" ng-click=\"openSettings('notifications')\" translate=\"header_notifications_settings\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"chiclet\">\n"+"<span class=\"count\">{{session.notificationCount}}</span>\n"+"<audio id=\"notificationSound\">\n"+"<source ng-src=\"{{::cdn.base + '/audio/notification_feed/younow_notifications.wav'}}\" type=\"audio/x-wav\">\n"+"</audio>\n"+"</div>\n"+"</div>\n"+"<div class=\"user-menu pull-right\" dropdown is-open=\"userMenuOpened\">\n"+"<div class=\"circle-thumb clickable pull-left\" dropdown-toggle ng-style=\"{background: 'url('+cdn.base+'/php/api/channel/getImage/channelId='+session.user.userId+') no-repeat', 'background-size': 'cover'}\"></div>\n"+"<ul class=\"dropdown-menu\">\n"+"<i class=\"ynicon ynicon-carrot-up\"></i>\n"+"<li class=\"user\">\n"+"<div class=\"user-title\">{{session.user.profile}}</div>\n"+"\n"+"<div class=\"user-progress\">\n"+"<div class=\"user-progress-text\" translate=\"header_progress\" translate-values=\"{progress:session.user.progress,level:session.user.level+1}\"></div>\n"+"<div class=\"user-progress-bar\"><div class=\"user-progress-value\" style=\"width:{{session.user.progress}}%;\"></div></div>\n"+"</div>\n"+"\n"+"<div class=\"user-credits\">\n"+"<span>\n"+"<span\n"+"tooltip=\"{{session.user.userCoins | number}}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-enable=\"session.user.userCoins > 10000\">\n"+"<i class=\"yncoin ynicon ynicon-coins\"></i>\n"+"<span>{{Api.squashedNumber(session.user.userCoins, 4)}}</span>\n"+"</span>\n"+"</span>\n"+"<span>\n"+"<span\n"+"tooltip=\"{{session.user.vault.webBars | number}}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-enable=\"session.user.vault.webBars > 10000\">\n"+"<i class=\"ynbar ynicon ynicon-icon-bar\"></i>\n"+"<span>{{Api.squashedNumber(session.user.vault.webBars, 4)}}</span>\n"+"</span>\n"+"</span>\n"+"<span ng-if=\"!session.user.spendingDisabled\">\n"+"<span>\n"+"<button class=\"btn btn-small btn-confirm\" ng-click=\"getBars()\" translate=\"header_getbars\"></button>\n"+"</span>\n"+"</span>\n"+"</div>\n"+"\n"+"</li>\n"+"<li>\n"+"<a ng-click=\"goLive()\" target=\"_blank\">\n"+"<i class=\"ynicon ynicon-broadcast\"></i>\n"+"<span translate=\"header_golive\"></span>\n"+"</a>\n"+"</li>\n"+"<li ng-if=\"pusher.anon\">\n"+"<a ng-click=\"pusher.anonMode(false)\" target=\"_blank\">\n"+"<i class=\"ynicon ynicon-viewers\"></i>\n"+"<span translate=\"header_deanon\"></span>\n"+"</a>\n"+"</li>\n"+"<li ng-if=\"!pusher.anon\">\n"+"<a ng-click=\"pusher.anonMode(true)\" target=\"_blank\">\n"+"<i class=\"ynicon ynicon-viewers\"></i>\n"+"<span translate=\"header_anon\"></span>\n"+"</a>\n"+"</li>\n"+"<li>\n"+"<a ng-if=\"::isPartner('pending')\" ng-href=\"/partners\" target=\"_blank\">\n"+"<img class=\"ynicon\" ng-src=\"{{::cdn.image}}/topnav/menu_user_partner.png\">\n"+"<span translate=\"header_partner_program\"></span>\n"+"</a>\n"+"</li>\n"+"<li>\n"+"<a ng-if=\"::isPartner('active')\" ng-href=\"/partners/earnings\" target=\"_blank\">\n"+"<i class=\"ynicon ynicon-icon-earnings\"></i>\n"+"<span translate=\"header_earnings\"></span>\n"+"</a>\n"+"</li>\n"+"\n"+"<li>\n"+"<a ng-if=\"::needsUpdate()\" ng-href=\"/partners/payment-settings\" target=\"_blank\">\n"+"<i class=\"ynicon ynicon-icon-paymentsettings\"></i>\n"+"<span translate=\"header_tipalti\"></span>\n"+"</a>\n"+"</li>\n"+"\n"+"<li>\n"+"<a ng-click=\"selfProfile()\" ng-href=\"/{{session.user.profile}}/channel\" prevent-default>\n"+"<i class=\"ynicon ynicon-user\"></i>\n"+"<span translate=\"header_profile\"></span>\n"+"</a>\n"+"</li>\n"+"<li>\n"+"<a ng-click=\"openSettings()\" ng-href=\"/settings\" prevent-default>\n"+"<i class=\"ynicon ynicon-settings\"></i>\n"+"<span translate=\"header_settings\"></span>\n"+"</a>\n"+"</li>\n"+"<li>\n"+"<a ng-click=\"session.showInviteUsers()\" href>\n"+"<i class=\"ynicon ynicon-audience\"></i>\n"+"<span translate=\"header_invite_friends\"></span>\n"+"</a>\n"+"</li>\n"+"<li>\n"+"<a ng-click=\"session.logout()\" href>\n"+"<i class=\"ynicon ynicon-logout\"></i>\n"+"<span translate=\"header_logout\"></span>\n"+"</a>\n"+"</li>\n"+"</ul>\n"+"\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<!-- logged out header options -->\n"+"<div class=\"pull-right\" ng-if=\"!session.loggedIn\">\n"+"<span class=\"login-text\">\n"+"<a href=\"\" class=\"secondary-text\" ng-click=\"session.showLoginModal('','BUTTON'); loginClick('Click Login');\" translate=\"header_login\"></a>\n"+"</span>\n"+"<span class=\"login-text\">\n"+"<a class=\"secondary-text\" href=\"\" ng-click=\"session.showLoginModal('','BUTTON'); loginClick('Click Signup');\" translate=\"header_signup\"></a>\n"+"</span>\n"+"<button class=\"btn btn-primary get-the-app\" ng-click=\"getTheApp()\" translate=\"header_get_the_app\"></button>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/header/searchresult.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/header/searchresult.tpl.html","<div ng-if=\"match.model.objectID\" class=\"searchResult\">\n"+"<div class=\"circle-thumb pull-left\" ng-attr-style=\"{{$parent.$parent.$parent.$parent.cdn.background(match.model.objectID)}}\">\n"+"<div class=\"live\" ng-show=\"match.model.tag\"><i class=\"ynicon ynicon-broadcast\"></i></div>\n"+"</div>\n"+"<div class=\"pull-left userInfo\">\n"+"<div class=\"name pull-left\">\n"+"<i class=\"ynicon ynicon-level\"></i><span>{{match.model.level}}</span>\n"+"<span class=\"short-text\">{{match.model.fullName}}</span>\n"+"</div>\n"+"<div ng-show=\"match.model.viewers\" class=\"viewers pull-right\">\n"+"<img ng-src=\"{{$parent.$parent.$parent.cdn.base}}/images/younow_header/icon_viewers_search.png\">{{match.model.viewers}}</div>\n"+"<div class=\"description line-clamp pull-left\" ng-bind-html=\"match.model.hashedDescription\"></div>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"match.model.dbg\">\n"+"<a class=\"tagResult\" ng-href=\"/explore/{{match.model.tag}}\">\n"+"<div class=\"short-text\">{{match.model.tag}}</div>\n"+"<span class=\"pull-right\">\n"+"<i class=\"ynicon ynicon-broadcast\"></i>\n"+"<span>{{match.model.live}}</span>\n"+"</span>\n"+"<span class=\"pull-right\">\n"+"<i class=\"ynicon ynicon-viewers\"></i>\n"+"<span>{{match.model.viewers}}</span>\n"+"</span>\n"+"</a>\n"+"</div>\n"+"<div ng-if=\"match.model.more\" class=\"searchResult-more transline-top ellipsify\">\n"+"<span translate=\"search_see_all_for\"></span>\n"+"<span class=\"searchTerm short-text\">{{match.model.query}}</span>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/iframe-modal/iframe-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/iframe-modal/iframe-modal.tpl.html","<iframe ng-src=\"{{src}}\"></iframe>\n"+"<a id=\"fancybox-close\" ng-click=\"$dismiss()\"></a>\n");}]);angular.module("angularjsapp/src/app/components/left-sidebar/left-sidebar.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/left-sidebar/left-sidebar.tpl.html","<div class=\"main-left\">\n"+"<div id=\"leftsidebar\">\n"+"<div class=\"channel-menu-content\">\n"+"\n"+"<div class=\"left-panel\">\n"+"<div class=\"panel-title nowrap short-text\">\n"+"<span class=\"trending-now primary-text\" translate=\"sidebar_trending_people\"></span>\n"+"</div>\n"+"<div class=\"switchHeader\">\n"+"<div ng-repeat=\"ll in leftSidebar.trendingsLocales\" ng-click=\"leftSidebar.changeTrendingLocale(ll)\" ng-class=\"{'active': leftSidebar.trendingsLocaleKey == ll}\"><img ng-src=\"https://schwestertester.github.io/img/{{ll}}.png\" /></div>\n"+"</div>\n"+"<div class=\"panel-body\">\n"+"<div class=\"trending-users mini-scroll\" only-scroll>\n"+"<!-- check if on main channel detail -->\n"+"<a ng-class=\"{'active': person.userId === leftSidebar.swf.broadcast.userId}\" ng-repeat=\"person in leftSidebar.dashboard.users\" ng-href=\"/{{person.profile}}\" prevent-default ng-click=\"leftSidebar.changeBroadcaster(person.userId)\">\n"+"<span class=\"trending-user\">{{::person.username}}</span>\n"+"<span class=\"viewerCount\">{{person.viewers}}</span>\n"+"</a>\n"+"</div>\n"+"<div class=\"see-more\">\n"+"<a ui-sref=\"main.explore\" class=\"trending-people-more\" translate=\"see_all_trending\"></a>\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"left-panel\">\n"+"<div class=\"panel-title nowrap short-text\" ng-if=\"leftSidebar.dashboard.featuredUsers.length > 0\">\n"+"\n"+"<span class=\"primary-text\" translate=\"sidebar_featured_people\"></span>\n"+"</div>\n"+"<div class=\"panel-body\" ng-if=\"leftSidebar.dashboard.featuredUsers.length > 0\">\n"+"<div class=\"trending-users featured-users mini-scroll\" only-scroll>\n"+"\n"+"<a ng-repeat=\"person in leftSidebar.dashboard.featuredUsers\" ng-href=\"/{{person.profile}}\" prevent-default ng-click=\"leftSidebar.changeBroadcaster(person.userId)\" class=\"activity\">\n"+"\n"+"<div class=\"profile-img thumb\" ng-style=\"::{'background-image': 'url('+leftSidebar.config.thumb+ '/' + person.userId+ '/' + person.userId + '.jpg' +'), url('+leftSidebar.config.nothumb+')'}\">\n"+"<i class=\"ynicon ynicon-broadcast\"></i>\n"+"</div>\n"+"\n"+"<div class=\"status\">\n"+"<span class=\"username short-text\">{{person.username}}</span>\n"+"<span class=\"short-text tag\">#{{person.tags[0]}}</span>\n"+"</div>\n"+"\n"+"</a>\n"+"\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<div ng-if=\"leftSidebar.session.onlineFriends.live.length > 0 || leftSidebar.session.onlineFriends.online.length > 0\" class=\"left-panel\">\n"+"<div class=\"panel-title nowrap short-text\" ng-if=\"leftSidebar.session.user.userId !== 0\">\n"+"<span class=\"primary-text\"translate=\"sidebar_online_friends\"></span>\n"+"</div>\n"+"<div  activity-panel\n"+"class=\"activity-panel\"\n"+"ng-if=\"leftSidebar.session.user.userId !== 0 && leftSidebar.session.onlineFriends\"\n"+"online-friends=\"leftSidebar.session.onlineFriends\"\n"+"source=\"MYFRIENDS\">\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"left-panel\">\n"+"<div class=\"panel-title nowrap short-text\" >\n"+"<span class=\"primary-text\" translate=\"sidebar_trending_tags\"></span>\n"+"</div>\n"+"<div class=\"trending-tags-list mini-scroll\" only-scroll>\n"+"<div>\n"+"<a ng-repeat=\"tag in leftSidebar.dashboard.tags\" ng-href=\"/explore/{{tag.tag}}\" ng-click=\"leftSidebar.getTagFeatured(tag.tag)\" prevent-default>\n"+"<span class=\"trending-tag\" data-tagname=\"musicians\">#{{::tag.tag}}</span>\n"+"</a>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"left-panel\" ng-if=\"leftSidebar.session.user.globalSpenderRank\">\n"+"<div class=\"panel-title panel-vip-title\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i> <span class=\"primary-text\" translate=\"vip_help\"></span>\n"+"</div>\n"+"<div class=\"trending-tags-list mini-scroll vip-mailto\">\n"+"<div>\n"+"<a href=\"mailto:vip@younow.com\">\n"+"<span class=\"trending-tag mailto-title\">Contact Us</span>\n"+"<span class=\"trending-tag mailto-hidden\">vip@younow.com</span>\n"+"</a>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"left-panel last\">\n"+"<div class=\"panel-title short-text\">\n"+"<span class=\"mobile-title primary-text\" translate=\"_more\"></span>\n"+"</div>\n"+"\n"+"<div class=\"panel-body\">\n"+"\n"+"<div class=\"language-panel\">\n"+"<i class=\"ynicon ynicon-icon-languages\"></i>\n"+"<div class=\"dropdown language-dropdown \" dropdown>\n"+"<button class=\"btn dropdown-toggle\" dropdown-toggle  id=\"dropdownMenu1\" aria-haspopup=\"true\" aria-expanded=\"true\">\n"+"<span class=\"selectUIInput\">{{ config.UILanguages[ config.UILanguage ] }} <i class=\"ynicon ynicon-carrot-dwn\"></i></span>\n"+"</button>\n"+"<ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenu1\">\n"+"<li>\n"+"<div ng-repeat=\"(la, lang) in ::config.UILocales\"  ng-click=\"leftSidebar.selectLanguage(la);\"><i ng-class=\"{'active':config.UILanguage == la}\" class=\"ynicon ynicon-icon-check\"></i> <span translate=\"{{lang}}\"></span>\n"+"</div>\n"+"\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"locale-panel\">\n"+"<i class=\"ynicon ynicon-icon-content-locale\"></i>\n"+"<div class=\"dropdown language-dropdown \" dropdown>\n"+"<button class=\"btn dropdown-toggle\" dropdown-toggle  id=\"dropdownMenu1\" aria-haspopup=\"true\" aria-expanded=\"true\">\n"+"<span class=\"selectUIInput\">{{ config.UILocales[ config.UILocale ] || 'Worldwide' }} <i class=\"ynicon ynicon-carrot-dwn\"></i></span>\n"+"</button>\n"+"<ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenu1\">\n"+"<li>\n"+"<div ng-repeat=\"(la, lang) in ::config.UILocales\"  ng-click=\"leftSidebar.selectLocale(la);\"><i ng-class=\"{'active':config.UILocale == la}\" class=\"ynicon ynicon-icon-check\"></i> <span translate=\"{{lang}}\"></span>\n"+"</div>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"<div class=\"sidebar-links\" >\n"+"\n"+"<div class=\"links-left\">\n"+"<a href=\"/about\" ng-click=\"showAbout()\" ng-if=\"state.current.name!='about'\" translate=\"footer_about_title\"></a>\n"+"<a href=\"/featured\" ng-click=\"doAboutClick('Footer link', 'Live Now')\" ng-if=\"state.current.name==='about' && open\" translate=\"footer_live_title\" mobile-hide></a>\n"+"<a href=\"/press\" ng-click=\"openDoc($event, 'Press')\" target=\"_blank\" translate=\"footer_press_title\"></a>\n"+"<a href=\"/careers\" ng-click=\"doAboutClick('Footer link', 'Careers')\" target=\"_blank\" translate=\"footer_careers_title\"></a>\n"+"<a href=\"http://blog.younow.com/\" ng-click=\"doAboutClick('Footer link', 'Blog')\" target=\"_blank\" translate=\"footer_blog_title\"></a>\n"+"<a href=\"policy/en/terms\" ng-click=\"openDoc($event,'Terms')\" translate-cloak translate=\"footer_terms_title\"></a>\n"+"<a ng-href=\"{{'footer_rules_link' | translate}}\" ng-click=\"openDoc($event,'Rules')\" translate-cloak translate=\"footer_rules_title\"></a>\n"+"</div>\n"+"<div class=\"links-right\">\n"+"<a href=\"https://younow.zendesk.com/home\" ng-click=\"doAboutClick('Footer link', 'FAQ')\" target=\"_blank\" translate=\"footer_faq_title\"></a>\n"+"<a href=\"policy/en/privacy\" ng-click=\"openDoc($event,'Privacy')\" translate-cloak translate=\"footer_privacy_title\"></a>\n"+"<a ng-href=\"{{'footer_trust_link' | translate}}\" ng-click=\"openDoc($event,'Trust')\" translate-cloak translate=\"footer_trust_title\"></a>\n"+"<a href=\"/app/iphone\" ng-click=\"doAboutClick('Footer link', 'iOS')\" target=\"_blank\" translate=\"footer_ios_title\"></a>\n"+"<a href=\"/app/android\" ng-click=\"doAboutClick('Footer link', 'Android')\" target=\"_blank\" translate=\"footer_android_title\"></a>\n"+"<a href=\"/partners/\" ng-click=\"doAboutClick('Footer link', 'Partners')\" target=\"_blank\" translate=\"footer_partners_title\"></a>\n"+"<a ng-if=\"config.UILanguage == 'de'\" href=\"/policy/de/impressum\" target=\"_blank\">Impressum</a>\n"+"\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"<div class=\"sidebar-icons\">\n"+"<div class=\"icon-wrapper\">\n"+"<a href=\"https://www.facebook.com/younow\" ng-click=\"doAboutClick('Footer link', 'Facebook')\" target=\"_blank\">\n"+"<i class=\"ynicon ynicon-social-fb\"></i>\n"+"</a>\n"+"</div>\n"+"\n"+"<div class=\"icon-wrapper\">\n"+"<a href=\"https://www.twitter.com/younow\" ng-click=\"doAboutClick('Footer link', 'Twitter')\" target=\"_blank\">\n"+"<i class=\"ynicon ynicon-social-tw\"></i>\n"+"</a>\n"+"</div>\n"+"\n"+"<div class=\"icon-wrapper\">\n"+"<a href=\"http://www.instagram.com/younow\" ng-click=\"doAboutClick('Footer link', 'Instagram')\" target=\"_blank\">\n"+"<i class=\"ynicon ynicon-social-insta\"></i>\n"+"</a>\n"+"</div>\n"+"\n"+"<div class=\"icon-wrapper\">\n"+"<a href=\"http://blog.younow.com/\" ng-click=\"doAboutClick('Footer link', 'Tumblr')\" target=\"_blank\">\n"+"<i class=\"ynicon ynicon-social-tm\"></i>\n"+"</a>\n"+"</div>\n"+"\n"+"<div class=\"icon-wrapper\">\n"+"<a  href=\"https://www.youtube.com/user/YouNowlive\" ng-click=\"doAboutClick('Footer link', 'Youtube')\" target=\"_blank\">\n"+"<i class=\"ynicon ynicon-icon-social-yt2\"></i>\n"+"</a>\n"+"</div>\n"+"\n"+"<div class=\"icon-wrapper\">\n"+"<a  ng-click=\"leftSidebar.trackMobile('IOS')\" href=\"https://itunes.apple.com/app/apple-store/id471347413?mt=8&pt=669563&ct=d-web-sidebar-1\" target=\"_blank\">\n"+"<i class=\"ynicon ynicon-icon-logo-apple\"></i>\n"+"</a>\n"+"</div>\n"+"\n"+"<div class=\"icon-wrapper\">\n"+"<a -click=\"leftSidebar.trackMobile('ANDROID')\" href=\"https://play.google.com/store/apps/details?id=younow.live&referrer=utm_source%3Dyounow.com%26utm_campaign%3Dapp-promo-android%26utm_medium%3Dreferral%26utm_content%3Dd-web-sidebar-1\" target=\"_blank\">\n"+"<i class=\"ynicon ynicon-icon-logo-googleplay\"></i>\n"+"</a>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/likers-modal/likers-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/likers-modal/likers-modal.tpl.html","<div class=\"likers-modal-container\">\n"+"\n"+"<button aria-hidden=\"true\" class=\"close btn-reset\" ng-click=\"vm.close();\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"\n"+"<div>\n"+"\n"+"<div ng-if=\"vm.inSuperLikeExperiment && vm.paidLikers.length > 0\" class=\"paid-likers\">\n"+"<div class=\"likers-header\">\n"+"<h2 translate=\"eob_top_fans\" class=\"likers-title\"></h2>\n"+"</div>\n"+"\n"+"<div class=\"likers-list paid\">\n"+"<div class=\"liker-row\" ng-repeat=\"liker in vm.paidLikers track by $index\">\n"+"<a\n"+"class=\"circle-thumb crop-thumb pull-left\"\n"+"ng-click=\"vm.showProfileSummary(liker.userId)\"\n"+"ng-href=\"/{{::liker.name}}\" prevent-default>\n"+"<div class=\"thumb-image\">\n"+"<div class=\"circle-thumb clickable\"  ng-style=\"::{background: 'url(' + vm.imageApis.thumb+ '/' + liker.userId + '/' + liker.userId + '.jpg' + ')  no-repeat, url(' + vm.imageApis.nothumb + ') no-repeat', 'background-size': 'cover'}\"></div>\n"+"</div>\n"+"</a>\n"+"<div class=\"info-wrapper\">\n"+"<p class=\"name short-text\" ng-click=\"vm.showProfileSummary(liker.userId)\">{{::liker.name}}</p>\n"+"<p class=\"likes\">\n"+"<span>{{::liker.likes}}</span> <span translate=\"eob_likes\"></span>\n"+"</p>\n"+"</div>\n"+"<div class=\"fan-btn-wrapper\"  track-source=\"LIKERS_LIST\">\n"+"<div class=\"fan-btn btn-small\" fan-button channel=\"liker\" ></div>\n"+"</div>\n"+"</div>\n"+"\n"+"<p ng-if=\"vm.hasMorePaidLikers\" class=\"see-more\" ng-click=\"vm.getLikes('paid')\">\n"+"See More\n"+"</p>\n"+"</div>\n"+"</div>\n"+"\n"+"<div ng-if=\"vm.likers.length > 0\" class=\"unpaid-likers\">\n"+"<div class=\"likers-header\">\n"+"<h2 translate=\"likers_title\" class=\"likers-title\"></h2>\n"+"</div>\n"+"\n"+"<div class=\"likers-list\">\n"+"<div class=\"liker-row\" ng-repeat=\"liker in vm.likers track by $index\">\n"+"<a\n"+"class=\"circle-thumb crop-thumb pull-left\"\n"+"ng-click=\"vm.showProfileSummary(liker.userId)\"\n"+"ng-href=\"/{{::liker.name}}\" prevent-default>\n"+"<div class=\"thumb-image\">\n"+"<div class=\"circle-thumb clickable\"  ng-style=\"::{background: 'url(' + vm.imageApis.thumb+ '/' + liker.userId + '/' + liker.userId + '.jpg' + ')  no-repeat, url(' + vm.imageApis.nothumb + ') no-repeat', 'background-size': 'cover'}\"></div>\n"+"</div>\n"+"</a>\n"+"<div class=\"info-wrapper\">\n"+"<p class=\"name short-text\" ng-click=\"vm.showProfileSummary(liker.userId)\">{{::liker.name}}</p>\n"+"</div>\n"+"<div class=\"fan-btn-wrapper\"  track-source=\"LIKERS_LIST\">\n"+"<div class=\"fan-btn btn-small\" fan-button channel=\"liker\" ></div>\n"+"</div>\n"+"</div>\n"+"<p ng-if=\"vm.hasMore\" class=\"see-more\" ng-click=\"vm.getLikes('regular')\">\n"+"See More\n"+"</p>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/login-modal/login-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/login-modal/login-modal.tpl.html","<div class=\"modal-body\">\n"+"<button ng-if=\"soft\" aria-hidden=\"true\" class=\"close\" ng-click=\"cancel()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"<div class=\"instructions row\">\n"+"<div class=\"row\">\n"+"<span class=\"heading\" translate=\"{{::data.title}}\"></span>\n"+"</div>\n"+"</div>\n"+"\n"+"<center>\n"+"<div class=\"networks btn-group\">\n"+"<div class=\"network row\">\n"+"<div class=\"cell\">\n"+"<button class=\"btn btn-facebook full-width\" ng-disabled=\"loggingIn.facebook\" ng-click=\"login('facebook')\">\n"+"<i class=\"ynicon ynicon-social-fb\"></i>\n"+"<span ng-if=\"!loggingIn.facebook\" class=\"transline\"><span translate=\"loginmodal_signinwith\"></span> <span>Facebook</span></span>\n"+"<div ng-if=\"loggingIn.facebook\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div class=\"network row\">\n"+"<div class=\"cell\">\n"+"<button class=\"btn btn-twitter full-width\" ng-disabled=\"loggingIn.twitter\" ng-click=\"login('twitter')\">\n"+"<i class=\"ynicon ynicon-social-tw\"></i>\n"+"<span ng-if=\"!loggingIn.twitter\" class=\"transline\"><span translate=\"loginmodal_signinwith\"></span> <span>Twitter</span></span>\n"+"<div ng-if=\"loggingIn.twitter\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div class=\"network row\">\n"+"<div class=\"cell\">\n"+"<button class=\"btn btn-google full-width\" ng-disabled=\"loggingIn.google\" ng-click=\"login('google')\">\n"+"<i class=\"ynicon ynicon-social-gp\"></i>\n"+"<span ng-if=\"!loggingIn.google\" class=\"transline\"><span translate=\"loginmodal_signinwith\"></span> <span>Google</span></span>\n"+"<div ng-if=\"loggingIn.google\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div class=\"network row\">\n"+"<div class=\"cell\">\n"+"<button class=\"btn btn-instagram full-width\" ng-if=\"moreOptions\" ng-disabled=\"loggingIn.instagram\" ng-click=\"login('instagram')\">\n"+"<i class=\"ynicon ynicon-social-insta\"></i>\n"+"<span ng-if=\"!loggingIn.instagram\" class=\"transline\"><span translate=\"loginmodal_signinwith\"></span> <span>Instagram</span></span>\n"+"<div ng-if=\"loggingIn.instagram\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div class=\"network row\">\n"+"<div class=\"cell\">\n"+"<div ng-if=\"!moreOptions\" ng-click=\"showMoreOptions()\" class=\"show-more-options\" translate=\"loginmodal_more_options\"></div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</center>\n"+"\n"+"<span class=\"terms-copy transline-mid\">\n"+"<span translate=\"loginmodal_by_clicking_agree\"></span>\n"+"<a href=\"/terms.php\" target=\"_blank\" style=\"color:#999999;\" translate=\"loginmodal_terms\"></a>.\n"+"</span>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/media-player-modal/media-player-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/media-player-modal/media-player-modal.tpl.html","<div class=\"modal-body\">\n"+"\n"+"<button class=\"close\" ng-click=\"$dismiss()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"\n"+"<div class=\"modal-heading\">\n"+"<span class=\"profile\">{{::vm.channel.profile}} : </span><span class=\"title\">{{::vm.broadcast.broadcastTitle}}</span>\n"+"</div>\n"+"\n"+"<div id=\"hotscore_experiment\" ng-if=\"::(session.moderator || session.user.role == 7)\" ng-mousemove=\"vm.seekMove($event)\" ng-click=\"vm.seekClick($event)\">\n"+"<div class=\"hotscore_time hotscore_offsetX\" style=\"left:{{ vm.broadcast.offsetX }}px;\"><div>{{ vm.broadcast.offsetXString }}</div></div>\n"+"<div class=\"hotscore_time hotscore_positionX\" ng-if=\"vm.broadcast.positionX\" style=\"left:{{ vm.broadcast.positionX }}px;\"><div>{{ vm.broadcast.positionXString }}</div></div>\n"+"<img ng-src=\"http://174.129.214.164:5001/hotscore/?broadcastid={{vm.broadcast.broadcastId}}\" />\n"+"<div class=\"hotscore_canvas\"></div>\n"+"</div>\n"+"\n"+"<videojs-player options=\"vm.playerOptions\"></videojs-player>\n"+"\n"+"<div class=\"modal-info clearfix\">\n"+"<span><i class=\"ynicon ynicon-viewers\"></i> {{ vm.broadcast.totalViewers | number }} </span>\n"+"<span><i class=\"ynicon ynicon-thumb\"></i> {{ vm.broadcast.totalLikes | number }} </span>\n"+"<span><i class=\"ynicon ynicon-btn-bc-share-android\"></i> {{ vm.broadcast.shares | number }} </span>\n"+"<div class=\"pull-right\" ng-if=\"session.user.role == 7\">\n"+"<a ng-href=\"{{ vm.broadcast.downloadUrl }}\" target=\"_self\" rel=\"nofollow\"><i class=\"ynicon ynicon-icon-share-download\"></i></a>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"modal-share\">\n"+"<input type=\"checkbox\" ng-model=\"vm.seekOn\" ng-change=\"vm.seekCheck()\" />\n"+"<div class=\"share-at\" ng-class=\"{selected:vm.seekOn}\">\n"+"Share at:\n"+"<input\n"+"type=\"text\"\n"+"class=\"share-input\"\n"+"ng-model=\"vm.seekValue\"\n"+"ng-focus=\"vm.seekFocus()\"\n"+"ng-blur=\"vm.seekBlur()\"\n"+"ng-change=\"vm.seekChange()\"\n"+"/>\n"+"</div>\n"+"<input\n"+"type=\"text\"\n"+"class=\"share-output\"\n"+"value=\"{{vm.broadcast.href}}\"\n"+"copy-on-click\n"+"tooltip=\"copied to clipboard\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-trigger=\"hrefCopied\"\n"+"/>\n"+"<div class=\"share-buttons\">\n"+"<img src=\"/images/profile/new/fb_share_100.png\" ng-click=\"vm.shareFacebook();\" />\n"+"<img src=\"/images/profile/new/icon_pro_tw.png\" ng-click=\"vm.shareTwitter();\" />\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"<!-- ng-value=\"  vm.shareValue ? vm.shareValue : ( vm.broadcast.shareTo ? vm.broadcast.shareTo : vm.shareTo )   \"  -->\n"+"\n");}]);angular.module("angularjsapp/src/app/components/mention/mention-dropup.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/mention/mention-dropup.tpl.html","<div class=\"dropup\">\n"+"<ul class=\"list-group user-search dropdown-menu\">\n"+"<li mentio-menu-item=\"person\" ng-repeat=\"person in items\" class=\"list-group-item\">\n"+"<img ng-src=\"{{person.thumb}}\" class=\"circle-thumb\">\n"+"<span class=\"text-primary\" ng-bind-html=\"person.displayName | mentioHighlight:typedTerm:'menu-highlighted' | unsafe\"></span>\n"+"<em ng-if=\"::persion.description\" class=\"text-muted\" ng-bind=\"person.description\"></em>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/mention/mention.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/mention/mention.tpl.html","<ul class=\"list-group user-search\">\n"+"<li mentio-menu-item=\"person\" ng-repeat=\"person in items\" class=\"list-group-item\">\n"+"<img ng-src=\"{{person.thumb}}\" fallback-src=\"{{::nothumb}}\" class=\"circle-thumb\">\n"+"<span class=\"text-primary\" ng-bind-html=\"person.displayName | mentioHighlight:typedTerm:'menu-highlighted' | unsafe\"></span>\n"+"<em class=\"text-muted\" ng-bind=\"person.description\"></em>\n"+"</li>\n"+"</ul>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/mini-player/mini-player.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/mini-player/mini-player.tpl.html","<div class=\"mini-player\" ng-if=\"vm.broadcast.media\">\n"+"<div class=\"gradient-accent\"></div>\n"+"<videojs-player options=\"vm.playerOptions\"></videojs-player>\n"+"\n"+"<div class=\"mini-player-info\">\n"+"<a class=\"mini-player-profile ellipsify\" prevent-default ng-href=\"/{{::vm.broadcast.profile}}\" ng-click=\"vm.openProfile()\"> {{ ::vm.broadcast.profile }} on </a>\n"+"<span class=\"mini-player-viewers\"><i class=\"ynicon ynicon-viewers\"></i> <span>{{::vm.viewers}} </span></span>\n"+"<span class=\"mini-player-break ellipsify\">#{{::vm.broadcast.tags[0] }}</span>\n"+"</div>\n"+"\n"+"<div class=\"mini-player-actions\">\n"+"<button class=\"btn btn-primary short-text\" ng-click=\"showBroadcast()\"><i class=\"ynicon ynicon-broadcast\"></i> <span translate=\"profile_enter_live_chat\"></span></button>\n"+"<span ng-click=\"vm.swf.toggleMute()\">\n"+"<i class=\"ynicon\" ng-class=\"!vm.swf.volume? 'ynicon-mute-sel' : 'ynicon-mute'\"></i>\n"+"</span>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/moment-panel/moment-panel.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/moment-panel/moment-panel.tpl.html","<div class=\"panel-header\">\n"+"<span class=\"panel-title\" translate=\"moment_create_title\"></span>\n"+"<button ng-click=\"panel.close()\" class=\"close btn-reset\"><i class=\"ynicon ynicon-close\"></i></button>\n"+"</div>\n"+"<div class=\"moment-edit\">\n"+"<span class=\"moment-adjust\" draggable=\"false\">\n"+"<span class=\"moment-picker\" draggable=\"false\">\n"+"<span id=\"slider-dim-left\" class=\"slider-dim\"></span>\n"+"<span class=\"slider-handle\" id=\"slider-handle-left\" ng-mousedown=\"panel.moveSlider('left',$event)\"  draggable=\"false\">\n"+"<span class=\"slider-line\"></span>\n"+"<span class=\"slider-line\"></span>\n"+"</span>\n"+"<span class=\"moment-thumbs\">\n"+"<img ng-repeat=\"thumb in panel.swf.moment.thumbs track by $index\" ng-src=\"{{thumb}}\" draggable=\"false\" />\n"+"</span>\n"+"<span class=\"slider-wall\" id=\"slider-wall-top\"></span>\n"+"<span class=\"slider-wall\" id=\"slider-wall-bottom\"></span>\n"+"<span id=\"moment-progress\" draggable=\"false\"></span>\n"+"<span class=\"slider-handle\" id=\"slider-handle-right\" ng-mousedown=\"panel.moveSlider('right',$event)\"  draggable=\"false\">\n"+"<span class=\"slider-line\"></span>\n"+"<span class=\"slider-line\"></span>\n"+"</span>\n"+"<span id=\"slider-dim-right\" class=\"slider-dim\"></span>\n"+"</span>\n"+"</span>\n"+"<span class=\"preview-container\">\n"+"<img class=\"preview\" ng-if=\"panel.scrublord\" ng-src=\"{{panel.swf.moment.previews[panel.preview]}}\" />\n"+"<videojs-player options=\"panel.swf.moment.options\"></videojs-player>\n"+"<moment-highlight dynamic></moment-highlight>\n"+"</span>\n"+"<span class=\"moment-caption\">\n"+"<input id=\"moment-caption-input\" ng-model=\"vm.moment.text\" ng-change=\"panel.updateCaption()\" placeholder=\"{{::panel.inputPlaceholder}}\" maxlength=\"30\">\n"+"<span ng-bind=\"vm.moment.charsRemaining\"></span>\n"+"</span>\n"+"<button class=\"btn btn-primary\" ng-click=\"panel.postMoment()\">\n"+"<span translate=\"_post\"></span>\n"+"</button>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/onboarding-modal/onboarding-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/onboarding-modal/onboarding-modal.tpl.html","<div class=\"modal-body\">\n"+"<h5 class=\"onboarding-title\" translate=\"onboarding_title\"></h5>\n"+"<div class=\"actions\">\n"+"<button class=\"btn btn-secondary onboarding-continue\" ng-click=\"fanAll()\"><span translate=\"_continue\"></span></button>\n"+"</div>\n"+"\n"+"<div class=\"onboarding-list mini-scroll\" only-scroll>\n"+"<div class=\"onboarding-list-item\" ng-repeat=\"broadcaster in onboardingList\">\n"+"<img class=\"onboarding-list-thumb\" ng-src=\"{{::broadcaster.src}}\" ng-attr-alt=\"{{::broadcaster.profile + ' thumbnail'}}\" />\n"+"\n"+"<div class=\"bounding-box\">\n"+"\n"+"<div class=\"onboarding-list-text\">\n"+"<div class=\"onboarding-list-header\">\n"+"{{::broadcaster.profile}}\n"+"</div>\n"+"<div class=\"onboarding-list-fans\">\n"+"{{::broadcaster.totalFans}} <span translate=\"_fans\"></span>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"fan-select\" ng-click=\"toggleFanned(broadcaster.userId)\">\n"+"<button ng-if=\"broadcaster.fanned\" class=\"onboarding-fanned\"><i class=\"ynicon ynicon-user-check\"></i></button>\n"+"<button ng-if=\"!broadcaster.fanned\" class=\"onboarding-unfanned\"><i class=\"ynicon ynicon-user-add\"></i></button>\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"<div class=\"onboarding-close\" ng-click=\"closeOnboardingModal()\">\n"+"<span translate='_skip'></span>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/partner-modal/partner-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/partner-modal/partner-modal.tpl.html","<div class=\"modal-body\">\n"+"<div class=\"partner-modal-wrapper\">\n"+"<button aria-hidden=\"true\" class=\"pull-right close\" ng-click=\"$dismiss()\"  id=\"accept-modal-close\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"<div class=\"partner-title\" translate=\"partner_congratulations\"></div>\n"+"<div class=\"partner-message\" translate=\"partner_you_have_been_accepted\"></div>\n"+"<div class=\"btn-container\">\n"+"<button class=\"btn btn-confirm\" ng-click=\"continue()\" translate=\"_continue\"></button>\n"+"</div>\n"+"</div>\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/components/post/embed/archive.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/post/embed/archive.tpl.html","<ul ng-if=\"::post.media.type=='5'\" class=\"archived-broadcasts\" ng-attr-id=\"post_{{::post.media.broadcast.broadcastId}}\">\n"+"<li class=\"broadcast\">\n"+"<div class=\"pull-left\">\n"+"<div ng-class=\"::{'no-cursor': post.media.broadcast.videoAvailable === 0}\"\n"+"ng-disabled=\"::(disabled = post.media.broadcast.videoAvailable === 0)\"\n"+"ng-click=\"disabled || showMedia(post.media.broadcast.broadcastId, {source:'FEED',start:0}, post.media.broadcast)\"\n"+"class=\"broadcast-thumb\"\n"+"ng-style=\"::{background: 'url('+imageApis.broadcast+ '/' + post.media.broadcast.broadcastId + '/' + post.media.broadcast.broadcastId +'.jpg) no-repeat', 'background-size': 'cover'}\">\n"+"<img class=\"play-button\" ng-if=\"::(post.media.broadcast.videoAvailable === 1)\" ng-src=\"{{::cdn.base}}/images/profile/new/icon_play.png\">\n"+"<span class=\"broadcast-length\">{{ ::post.media.broadcast.broadcastLengthString }}</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"pull-left broadcast-summary\">\n"+"<div class=\"title\">#{{::post.media.broadcast.tags}}</div>\n"+"<div class=\"stats\">\n"+"<div ng-if=\"::(post.media.broadcast.totalViewers && post.media.broadcast.totalViewers!=0)\"><i class=\"ynicon ynicon-viewers\"></i><span>{{ ::post.media.broadcast.totalViewers | number }}</span></div>\n"+"<div ng-if=\"::(post.media.broadcast.totalChats && post.media.broadcast.totalChats!=0)\"><i class=\"ynicon ynicon-chat\"></i><span>{{ ::post.media.broadcast.totalChats | number }}</span></div>\n"+"<div ng-if=\"::(post.media.broadcast.totalLikes && post.media.broadcast.totalLikes!=0)\"><i class=\"ynicon ynicon-thumb\"></i><span>{{ ::post.media.broadcast.totalLikes | number }}</span></div>\n"+"<div ng-if=\"::(post.media.broadcast.giftNum && post.media.broadcast.totalGifts!=0)\"><i class=\"ynicon ynicon-gift\"></i><span>{{ ::post.media.broadcast.totalGifts | number }}</span></div>\n"+"<div ng-if=\"::(post.media.broadcast.shares && post.media.broadcast.shares!=0)\"><i class=\"ynicon ynicon-btn-bc-share-android\"></i><span>{{ ::post.media.broadcast.shares | number }}</span></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</li>\n"+"</ul>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/post/embed/embedlyimage.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/post/embed/embedlyimage.tpl.html","<img class=\"embedly-image\" ng-src=\"{{::post.media.embedly.url}}\">\n");}]);angular.module("angularjsapp/src/app/components/post/embed/iframe.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/post/embed/iframe.tpl.html","<span class=\"embedlyiframe\" ng-bind-html=\"::post.media.embedly.html\"></span>\n");}]);angular.module("angularjsapp/src/app/components/post/embed/link.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/post/embed/link.tpl.html","<a ng-href=\"{{::post.media.embedly.url}}\" rel=\"nofollow\" target=\"_blank\">\n"+"<div class=\"embedly-link-container\">\n"+"<div class=\"left pull-left\">\n"+"<img ng-src=\"{{::post.media.embedly.thumbnail_url}}\" />\n"+"</div>\n"+"<div class=\"right pull-left\">\n"+"<div class=\"title\">\n"+"<span>{{::post.media.embedly.title}}</span>\n"+"</div>\n"+"<div class=\"description\">\n"+"<span>{{::post.media.embedly.description}}</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"</a>\n");}]);angular.module("angularjsapp/src/app/components/post/embed/snapshot.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/post/embed/snapshot.tpl.html","<img ng-if=\"::post.media.type=='6'\" class=\"snapshot-media\" ng-src=\"{{::cdn.snapshot+post.media.snapshot.snapshotId}}\" ng-attr-id=\"post_{{::post.media.snapshot.snapshotId}}\">\n");}]);angular.module("angularjsapp/src/app/components/post/embed/uploadimage.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/post/embed/uploadimage.tpl.html","<img class=\"image-media\" ng-if=\"::(post.media.type=='1'||post.media.type=='2')\" ng-src=\"{{::cdn.media+broadcasterService.broadcaster.userId+'/id='+post.id+'/ext='+post.media.ext}}\">\n");}]);angular.module("angularjsapp/src/app/components/post/embed/video.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/post/embed/video.tpl.html","<!-- <iframe class=\"hidden\" ng-if=\"::post.media.type=='4'\" frameborder=\"0\" height=\"325\" seamless=\"\" ng-src=\"{{::trustedSrc(cdn.base+'/player.php?channelId='+broadcasterService.broadcaster.userId+'&amp;id='+post.id)}}\" width=\"433\"></iframe> -->\n");}]);angular.module("angularjsapp/src/app/components/post/moment-highlight/moment-dynamic-highlight.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/post/moment-highlight/moment-dynamic-highlight.tpl.html","<div class=\"highlight-wrapper\">\n"+"\n"+"<!-- TOP SPENDER -->\n"+"<div ng-if=\"::vm.inSuperLikeExperiment\" ng-class=\"{'newly-active': vm.moment.topSpender!== null && vm.moment.topSpender.changed && vm.swf.activeChatTab !== 'Moment' && vm.swf.activeChatTab !== 'MomentShare', 'exists':  vm.moment.topSpender && vm.moment.topSpender!== null && vm.swf.activeChatTab !== 'Moment' && vm.swf.activeChatTab !== 'MomentShare'}\" class=\"moment-highlight-container spender highlight-shadow transform-highlight\" ng-click=\"vm.showLikes()\">\n"+"<a class=\"circle-thumb crop-thumb\" prevent-default>\n"+"\n"+"<div class=\"thumb-image\" ng-style=\"::{ 'background': 'url('+vm.cdn.nothumb+') no-repeat'}\">\n"+"<div>\n"+"<div class=\"circle-thumb pull-left\"  ng-style=\"{background: 'url(' + vm.cdn.thumb+ '/' + vm.moment.topSpender.userId + '/' + vm.moment.topSpender.userId + '.jpg' + ')  no-repeat, url(' + config.imageApis.nothumb + ') no-repeat', 'background-size': 'cover'}\">\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"</a>\n"+"\n"+"<div class=\"moment-highlight-owner clickable\">\n"+"<span class=\"moment-highlight-title\">{{vm.moment.topSpender.name}}</span>\n"+"</div>\n"+"<div class=\"mini-highlight-text\">\n"+"<span> Top Fan: </span><span class=\"ynicon ynicon-thumb\"></span> <span class=\"top-likes\">{{vm.moment.topSpender.paidLikes}}</span>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- MOMENT CREATOR -->\n"+"<div class=\"moment-highlight-container highlight-shadow transform-highlight\">\n"+"<!-- double drop shadow border radius -->\n"+"<a class=\"circle-thumb crop-thumb\" prevent-default>\n"+"\n"+"<div class=\"thumb-image\" ng-style=\"::{ 'background': 'url('+vm.cdn.nothumb+') no-repeat'}\">\n"+"<div>\n"+"<div class=\"circle-thumb pull-left\"  ng-style=\"{background: 'url(' + vm.cdn.thumb+ '/' + vm.moment.owner.userId + '/' + vm.moment.owner.userId + '.jpg' + ')  no-repeat, url(' + config.imageApis.nothumb + ') no-repeat', 'background-size': 'cover'}\">\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</a>\n"+"\n"+"<div class=\"moment-highlight-owner clickable\" ng-click=\"vm.showProfileSummary(vm.moment.owner.userId)\">\n"+"<span class=\"moment-highlight-title\">{{vm.moment.owner.name}}</span>\n"+"</div>\n"+"<div ng-class=\"{'stylized': vm.moment.placeholder === true}\" class=\"mini-highlight-text\" ng-if=\"vm.moment.text.length > 1\">\n"+"<span> {{vm.moment.text}}</span>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"\n"+"\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/post/moment-highlight/moment-highlight.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/post/moment-highlight/moment-highlight.tpl.html","<div class=\"highlight-wrapper\">\n"+"\n"+"<!-- TOP SPENDER -->\n"+"<div ng-if=\"::vm.inSuperLikeExperiment\" ng-class=\"{'newly-active': vm.moment.topSpender!== null && vm.moment.topSpender.changed && vm.swf.activeChatTab !== 'Moment' && vm.swf.activeChatTab !== 'MomentShare', 'exists':  vm.moment.topSpender && vm.moment.topSpender!== null && vm.swf.activeChatTab !== 'Moment' && vm.swf.activeChatTab !== 'MomentShare'}\" class=\"moment-highlight-container spender highlight-shadow transform-highlight\" ng-click=\"vm.showLikes()\">\n"+"<a class=\"circle-thumb crop-thumb\" prevent-default>\n"+"<div class=\"thumb-image\" ng-style=\"::{ 'background': 'url('+vm.cdn.nothumb+') no-repeat'}\">\n"+"<div>\n"+"<div class=\"circle-thumb pull-left\"  ng-style=\"{background: 'url(' + vm.cdn.thumb+ '/' + vm.moment.topSpender.userId + '/' + vm.moment.topSpender.userId + '.jpg' + ')  no-repeat, url(' + config.imageApis.nothumb + ') no-repeat', 'background-size': 'cover'}\">\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</a>\n"+"\n"+"<div class=\"moment-highlight-owner clickable\" >\n"+"<span class=\"moment-highlight-title\">{{vm.moment.topSpender.name}}</span>\n"+"</div>\n"+"<div class=\"mini-highlight-text\">\n"+"<span> Top Fan: </span><span class=\"ynicon ynicon-thumb\"></span> <span class=\"top-likes\">{{vm.moment.topSpender.paidLikes}}</span>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- MOMENT CREATOR -->\n"+"<div class=\"moment-highlight-container highlight-shadow\">\n"+"<a class=\"circle-thumb crop-thumb\"\n"+"ng-href=\"/{{::vm.moment.owner.name}}\" prevent-default>\n"+"\n"+"<div class=\"thumb-image\" ng-style=\"::{ 'background': 'url('+vm.cdn.nothumb+') no-repeat'}\">\n"+"<div>\n"+"<div class=\"circle-thumb pull-left\"  ng-style=\"::{background: 'url(' + vm.cdn.thumb+ '/' + vm.moment.owner.userId + '/' + vm.moment.owner.userId + '.jpg' + ')  no-repeat, url(' + config.imageApis.nothumb + ') no-repeat', 'background-size': 'cover'}\">\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</a>\n"+"\n"+"<div class=\"moment-highlight-owner clickable\" ng-click=\"vm.showProfileSummary(vm.moment.owner.userId)\">\n"+"<span class=\"moment-highlight-title\">{{::vm.moment.owner.name}}</span>\n"+"</div>\n"+"\n"+"<div ng-class=\"{'stylized': vm.moment.placeholder === true}\" class=\"mini-highlight-text\" ng-if=\"::vm.moment.text.length > 1\">\n"+"<span> {{::vm.moment.text}}</span>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/post/moment/moment.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/post/moment/moment.tpl.html","<div class=\"moment-container\" scrolled-in-view left-view=\"vm.leftView()\" entered-view=\"vm.enteredView()\" ng-attr-id=\"moment_{{scope.moment.momentId}}\">\n"+"<div>\n"+"<a\n"+"class=\"circle-thumb crop-thumb pull-left\"\n"+"ng-click=\"vm.showProfileSummary(vm.moment.broadcaster.userId)\"\n"+"ng-href=\"/{{::vm.moment.broadcaster.name}}\" prevent-default>\n"+"<div class=\"thumb-image\" ng-style=\"::{ 'background': 'url('+vm.cdn.nothumb+') no-repeat'}\">\n"+"<div class=\"thumb-image-wide\">\n"+"<img class=\"thumb-image-img\" class=\"thumb-image\" ng-src=\"{{::(vm.cdn.thumb+ '/' + vm.moment.broadcaster.userId + '/' + vm.moment.broadcaster.userId + '.jpg')}}\" alt=\"{{::vm.moment.broadcaster.name}}\" />\n"+"</div>\n"+"</div>\n"+"</a>\n"+"<div class=\"pull-right fan-btn\" track-source=\"{{::vm.location}}\" track-context=\"PROFILE\">\n"+"<div fan-button ng-if=\"!vm.fanStatus[vm.moment.broadcaster.userId]\" channel=\"vm.moment.broadcaster\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"description\">\n"+"<a class=\"name subject\" ng-href=\"/{{vm.moment.broadcaster.name}}\" prevent-default ng-click=\"vm.showProfileSummary(vm.moment.broadcaster.userId)\"> {{vm.moment.broadcaster.name}}</a>\n"+"<span class=\"title\" bind-html-compile=\"vm.moment.title\"></span>\n"+"<span class=\"collection-views\" ng-if=\"vm.moment.collectionViews\"> &#0149; {{vm.moment.collectionViews}} <span translate=\"_views\"></span></span>\n"+"<span class=\"collection-views\" ng-if=\"!vm.moment.collectionViews\"> &#0149; {{vm.moment.views}} <span translate=\"_views\"></span></span>\n"+"<div class=\"minutes-ago text-muted\"> &#0149; {{vm.moment.timeAgo}}</div>\n"+"\n"+"</div>\n"+"<div class=\"gradient-accent\" ng-style=\"{'width': vm.playbackProgress + '%', 'transition-duration': vm.playbackProgress < 80 && !vm.fetchingMoment ? '0.76s' : '0s' }\"></div>\n"+"\n"+"<div ng-if=\"::!vm.collection\">\n"+"<div ng-if=\"::(vm.inExperiment && vm.moment.trending)\" class=\"trending-indicator\" ng-click=\"getTrending()\">\n"+"<i class=\"ynicon ynicon-icon-trending\"></i>\n"+"<p>Trending</p>\n"+"</div>\n"+"</div>\n"+"\n"+"<div ng-if=\"::vm.collection\">\n"+"<div ng-if=\"vm.inExperiment && vm.moment.trending\" class=\"trending-indicator\" ng-click=\"getTrending()\">\n"+"<i class=\"ynicon ynicon-icon-trending\"></i>\n"+"<p>Trending</p>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"<paid-likes item=\"vm.moment\" location=\"{{vm.location}}\" add-like=\"vm.addLike()\" set-user-control=\"vm.setUserControl(value)\"> </paid-likes>\n"+"\n"+"<div class=\"body clear share-prompt\" ng-class=\"{'overlay-active' : vm.shareSheetVisible}\">\n"+"\n"+"<!-- SHARE SHEET -->\n"+"<div class=\"share-sheet\">\n"+"<div class=\"share-center\">\n"+"<h3 translate=\"moment_share_title\"></h3>\n"+"<div class=\"social-share\" ng-click=\"vm.shareFacebook();\">\n"+"<div class=\"social-icon-circle social-icon-circle-fb\">\n"+"<i class=\"ynicon ynicon-icon-share-fb absolute-center\"></i>\n"+"</div>\n"+"<div class=\"share-target\">Facebook</div>\n"+"</div>\n"+"\n"+"<div class=\"social-share\" ng-click=\"vm.shareTwitter();\">\n"+"<div class=\"social-icon-circle social-icon-circle-tw\">\n"+"<i class=\"ynicon ynicon-icon-share-tw absolute-center\"></i>\n"+"</div>\n"+"<div class=\"share-target\">Twitter</div>\n"+"</div>\n"+"\n"+"<div class=\"social-share\" >\n"+"<div class=\"social-icon-circle social-icon-circle-url\">\n"+"<input class=\"copy-link-href\" value=\"{{vm.shareUrl.url}}\" copy-on-click tooltip=\"{{vm.tooltipText}}\" tooltip-trigger=\"click mouseenter\" tooltip-append-to-body=\"true\" ng-click=\"vm.copiedShareUrl()\"/>\n"+"<div class=\"social-share-icon\">\n"+"<i class=\"ynicon ynicon-url absolute-center\"></i>\n"+"</div>\n"+"</div>\n"+"<div class=\"copy-link\">Copy Link</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"close-sheet\">\n"+"<button ng-click=\"vm.toggleShare()\" class=\"close\"><i class=\"ynicon ynicon-close\"></i></button>\n"+"</div>\n"+"</div>\n"+"<div class=\"toggle-mute\" ng-click=\"vm.toggleMute()\">\n"+"<i class=\"ynicon\" ng-class=\"{'ynicon-mute-sel': vm.swf.momentVolume === 0, 'ynicon-mute': vm.swf.momentVolume > 0}\"></i>\n"+"</div>\n"+"<div class=\"arrow arrow-back vertical-center\" ng-if=\"::vm.collection\" ng-click=\"vm.fetchMoment({}, vm.collection.currentIndex-1, 'manual')\">\n"+"<i class=\"ynicon ynicon-btn-back\"></i>\n"+"</div>\n"+"<div class=\"arrow arrow-next vertical-center\" ng-if=\"::vm.collection\" ng-click=\"vm.fetchMoment({}, vm.collection.currentIndex+1, 'manual')\">\n"+"<i class=\"ynicon ynicon-btn-next\"></i>\n"+"</div>\n"+"<div class=\"central-actions absolute-center\">\n"+"<div class=\"action radial-animation\" ng-click=\"vm.toggleLike()\" ng-class=\"{'clicked': vm.session.momentStatus[vm.moment.momentId]}\">\n"+"<i class=\"ynicon ynicon-thumb absolute-center\"></i>\n"+"</div>\n"+"<div class=\"action\" ng-click=\"vm.toggleShare()\">\n"+"<i class=\"ynicon ynicon-btn-bc-share-android absolute-center\"></i>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"<videojs-player ng-if=\"vm.inView\" options=\"vm.moment.options\"></videojs-player>\n"+"<div class=\"play-button-container\" ng-click=\"vm.playMoment()\">\n"+"<div class=\"play-button absolute-center\">\n"+"<i class=\"ynicon ynicon-icon-play2\"></i>\n"+"</div>\n"+"</div>\n"+"\n"+"<div ng-if=\"::!vm.collection\">\n"+"<div class=\"preloaded-thumb absolute-center\" ng-click=\"vm.playMoment()\" ng-style=\"::{'background-image': 'url(' + vm.config.imageApis.moment + '/' + vm.moment.momentId + '/' + vm.moment.momentId + '.jpg)'}\"></div>\n"+"<moment-highlight></moment-highlight>\n"+"</div>\n"+"<div ng-if=\"::vm.collection\">\n"+"<div class=\"preloaded-thumb\" ng-click=\"vm.playMoment()\" ng-style=\"{'background-image': 'url(' + vm.config.imageApis.moment + '/' + vm.moment.momentId + '/' + vm.moment.momentId + '.jpg)'}\"></div>\n"+"<moment-highlight dynamic></moment-highlight>\n"+"</div>\n"+"\n"+"<div class=\"fallback-thumb\">\n"+"<span class=\"absolute-center\">\n"+"<i class=\"ynicon ynicon-icon_moments\"></i>\n"+"</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"carousel-container\" ng-if=\"::vm.collection\">\n"+"<div class=\"carousel\">\n"+"<ul only-scroll horizontal-scroll id=\"moment-carousel-{{::vm.collection.collectionId}}\" class=\"mini-scroll\" ng-if=\"!vm.collection.refreshingCarousel\">\n"+"<li class=\"thumb\" ng-attr-index=\"{{::$index}}\" ng-class=\"::{'selected': $index === vm.collection.currentIndex}\" ng-repeat=\"collection in ::vm.collection.momentsIds track by $index\" ng-click=\"vm.fetchMoment(collection, $index, 'manual')\">\n"+"<img class=\"thumb-image\" ng-src=\"{{::(vm.config.imageApis.moment + '/' + collection + '/' + collection + '.jpg')}}\" fallback-src=\"{{::vm.config.imageApis.nothumb}}\">\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"vm.moment.likes > 0\"class=\"moment-metadata\">\n"+"<div class=\"likes\">\n"+"<span tooltip=\"{{::vm.likersPrompt}}\" tooltip-append-to-body=\"true\" tooltip-trigger=\"mouseenter\" ng-click=\"vm.showLikes()\">{{vm.moment.likes}}\n"+"<span ng-if=\"vm.moment.likes > 1\">Likes</span>\n"+"<span ng-if=\"vm.moment.likes == 1\">Like</span>\n"+"</span>\n"+"\n"+"</div>\n"+"</div>\n"+"<div class=\"actions\">\n"+"<div ng-click=\"vm.toggleLike()\" class=\"like\">\n"+"<i  class=\"ynicon ynicon-thumb\" ng-class=\"{liked: vm.session.momentStatus[vm.moment.momentId]}\"></i>\n"+"<span class=\"liked-text\" ng-if=\"vm.session.momentStatus[vm.moment.momentId]\">Liked</span>\n"+"<span ng-if=\"!vm.session.momentStatus[vm.moment.momentId]\">Like</span>\n"+"</div>\n"+"\n"+"<div ng-if=\"::vm.inSuperLikeExperiment\"class=\"superlike\" ng-click=\"vm.paidLike()\" >\n"+"<i class=\"ynicon ynicon-icon_10likes\"></i>\n"+"<i class=\"ynicon ynicon-icon-bar\"></i>\n"+"<p>{{::vm.superLikeGoodie.cost}}</p>\n"+"</div>\n"+"\n"+"<div class=\"share\" ng-click=\"vm.toggleShare()\">\n"+"<i class=\"ynicon ynicon-btn-bc-share-android\"></i>\n"+"<span>Share</span>\n"+"</div>\n"+"\n"+"<div class=\"user-options pull-right\" dropdown on-toggle=vm.checkMomentPermissions(open)>\n"+"<button class=\"btn btn-transparent\" dropdown-toggle>\n"+"<i class=\"ynicon ynicon-icon-ellipsis\"></i>\n"+"</button>\n"+"<ul class=\"dropdown-menu\" ng-class=\"{'report-active': vm.momentPermissions.flagging, 'delete-active': vm.momentPermissions.deleting, 'hide-active': vm.momentPermissions.hiding}\">\n"+"<i class=\"ynicon ynicon-carrot-up\"></i>\n"+"<li class=\"report-moment\" ng-click=\"vm.showProfileSummary(vm.moment.broadcaster.userId || momentCollection.broadcaster.userId, {momentId: vm.moment.momentId}, 'flagging')\">\n"+"<a href>\n"+"<span translate=\"profile_report_moment\"></span>\n"+"</a>\n"+"</li>\n"+"\n"+"<li class=\"hide-moment\" ng-click=\"vm.hideMoment(vm.collection.currentIndex)\">\n"+"<a href=\"#\">\n"+"<span translate=\"profile_hide_moment\"></span>\n"+"</a>\n"+"</li>\n"+"<li class=\"delete-moment\">\n"+"<a data-confirm-message=\"moment_are_you_sure_delete\" confirm-data=\"vm.moment.momentId\" confirm=\"vm.delete\" href=\"#\">\n"+"<span translate=\"_delete\"></span>\n"+"</a>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"\n"+"\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/post/post.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/post/post.tpl.html","<div class=\"comment-container \" ng-if=\"post.id\" ng-attr-id=\"post_{{::post.id}}\">\n"+"<div>\n"+"<a\n"+"class=\"circle-thumb crop-thumb pull-left\"\n"+"ng-click=\"showProfileSummary(post.user.userId)\"\n"+"ng-href=\"/{{post.user.profileUrlString}}\" prevent-default>\n"+"<div class=\"thumb-image\">\n"+"<div class=\"thumb-image-wide\">\n"+"<img class=\"thumb-image-img\" class=\"thumb-image\" ng-src=\"{{::cdn.thumb+ '/' + post.user.userId + '/' + post.user.userId + '.jpg'}}\" alt=\"{{::post.user.profile}}\" fallback-src=\"{{::cdn.nothumb}}\"/>\n"+"</div>\n"+"</div>\n"+"</a>\n"+"<div class=\"user-options pull-right\" ng-show=\"canEdit(post)\" dropdown>\n"+"<button class=\"btn btn-transparent\" dropdown-toggle href=\"javascript:void(0)\">\n"+"<img ng-src=\"{{::cdn.base}}/images/groups/icon_pro_arrow.png\">\n"+"</button>\n"+"<ul class=\"dropdown-menu\">\n"+"<i class=\"ynicon ynicon-carrot-up\"></i>\n"+"<li ng-if=\"::post.downloadUrl !== undefined\" ng-click=\"downloadBroadcast(post)\">\n"+"<a href=\"javascript:void(0)\" class=\"download\" translate=\"_download\"></a>\n"+"</li>\n"+"<li ng-if=\"canPin(post)\" ng-click=\"togglePin(post)\">\n"+"<a href=\"javascript:void(0)\" ng-if=\"post.isPinned\" translate=\"profile_unpin\"></a>\n"+"<a href=\"javascript:void(0)\" ng-if=\"!post.isPinned\" translate=\"profile_pin\"></a>\n"+"</li>\n"+"<li>\n"+"<a class=\"delete-comment\" data-confirm-message=\"post_are_you_sure_delete\" confirm=\"delete\" confirm-data=\"post\" href=\"javascript:void(0)\"><span translate=\"_delete\"></span></a>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"<div class=\"description\">\n"+"<img ng-if=\"post.isPinned\" class=\"pin pull-left\" ng-src=\"{{::cdn.base}}/images/groups/icon_post_pin.png\">\n"+"<a\n"+"class=\"name\"\n"+"ng-href=\"/{{post.user.profileUrlString}}\" prevent-default\n"+"ng-click=\"showProfileSummary(post.user.userId)\">\n"+"{{::post.user.firstName}} {{::post.user.lastName}}\n"+"</a>\n"+"<div ng-if=\"::(post.media.broadcast.minutesAgo >= 10080)\">\n"+"<div class=\"minutes-ago text-muted\">{{::post.media.broadcast.broadcastTitle}}</div>\n"+"</div>\n"+"<div ng-if=\"::(post.timeAgo)\">\n"+"<div class=\"minutes-ago text-muted\" ng-if=\"::post.timeAgo !== '0 second ago'\">{{::post.timeAgo}}</div>\n"+"<div class=\"minutes-ago text-muted\" ng-if=\"::post.timeAgo == '0 second ago'\" translate=\"post_just_now\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"body clear\">\n"+"<div class=\"post-comment\">\n"+"<div ng-bind-html=\"::post.post\"></div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"comment-media \" ng-if=\"post.hasOwnProperty('embed')\">\n"+"<div ng-include src=\"'angularjsapp/src/app/components/post/embed/'+post.embed+'.tpl.html'\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"actions\">\n"+"<div class=\"like\" ng-click=\"toggleLike(post)\">\n"+"<i class=\"ynicon ynicon-thumb\" ng-class=\"{'not-liked': !post.liked, liked: post.liked}\"></i>\n"+"<span ng-if=\"post.liked\" class=\"liked\" translate=\"_liked\"></span>\n"+"<span ng-if=\"!post.liked\" translate=\"_like\"></span>\n"+"<span ng-show=\"post.likesCount\">&#8211; {{post.likeText}}</span>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"post.hasMore\" class=\"see-more \"><a href=\"javascript:void(0)\" ng-click=\"moreComments(post)\" translate=\"post_see_previous_comments\"></a></div>\n"+"<ul ng-if=\"::!post.parentId\" class=\"replies \">\n"+"<li ng-repeat=\"reply in post.replies\" class=\"comment \" ng-class=\"{'new-reply':broadcasterService.deeplinkId==reply.id}\">\n"+"<div data-younow-reply></div>\n"+"</li>\n"+"</ul>\n"+"<div ng-if=\"::!post.parentId\" class=\"reply-box row\">\n"+"<div class=\"comment-area\"  tooltip-trigger=\"mouseenter\" tooltip-html-unsafe=\"{{::('post_tip_mention_your_friends' | translate)}}\">\n"+"<div contenteditable mentio\n"+"mentio-typed-term=\"typedTerm\"\n"+"mentio-require-leading-space=\"true\"\n"+"class=\"editor form-control\"\n"+"style=\"min-height:25px; padding: 2px 25px 3px 31px;\"\n"+"id=\"textarea_{{post.id}}\"\n"+"ng-model=\"post.html\"\n"+"ng-keydown=\"submitOnEnter($event, post)\"\n"+"placeholder=\"{{'post_comment_on' | translate }}\"\n"+"></div>\n"+"<mentio-menu\n"+"mentio-for=\"'textarea_'+post.id\"\n"+"mentio-trigger-char=\"'@'\"\n"+"mentio-items=\"people\"\n"+"mentio-template-url=\"angularjsapp/src/app/components/mention/mention.tpl.html\"\n"+"mentio-search=\"searchPeople(term)\"\n"+"mentio-select=\"insertMention(item)\"\n"+"></mentio-menu>\n"+"<div ng-show=\"!session.loggedIn\" class=\"circle-thumb\" ng-style=\"::{background: 'url('+cdn.nothumb+') no-repeat', backgroundSize: 'cover'}\">\n"+"</div>\n"+"<div ng-show=\"session.loggedIn\" class=\"circle-thumb crop-thumb\">\n"+"<div class=\"thumb-image\" ng-style=\"::{background: 'url('+cdn.thumb+ '/' + session.user.userId + '/' + session.user.userId + '.jpg'+') no-repeat'}\">\n"+"<div class=\"thumb-image-wide\">\n"+"<img class=\"thumb-image-img\" ng-src=\"{{::cdn.thumb+ '/'+ session.user.userId+ '/' + session.user.userId + '.jpg'}}\" alt=\"{{::session.user.profile}}\" fallback-src=\"{{::cdn.nothumb}}\"/>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"upload-photo\">\n"+"<input accept=\"image/jpeg, image/png\" name=\"media\" type=\"file\" yn-on-change=\"showUploadPreview\" params=\"event,post\" ng-attr-id=\"file_{{::post.id}}\">\n"+"<i class=\"ynicon ynicon-camera pull-right\"></i>\n"+"</div>\n"+"<div ng-show=\"post.preview\" class=\"upload-preview\">\n"+"<button ng-click=\"removeUpload(post)\" aria-hidden=\"true\" class=\"close\" type=\"button\">Ã</button>\n"+"<img ng-src=\"{{post.preview}}\" height=\"100\">\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"options pull-right hidden\"></div>\n"+"<div class=\"options-screen pull-left hidden\"></div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/post/reply/reply.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/post/reply/reply.tpl.html","<div class=\"comment-container\" ng-if=\"post.id\" ng-attr-id=\"post_{{::post.id}}\">\n"+"<div>\n"+"<a\n"+"class=\"circle-thumb crop-thumb pull-left\"\n"+"ng-href=\"/{{post.user.profileUrlString}}\" prevent-default\n"+"ng-click=\"showProfileSummary(post.user.userId)\">\n"+"<div class=\"thumb-image\">\n"+"<div class=\"thumb-image-wide\">\n"+"<img class=\"thumb-image-img\" ng-src=\"{{::cdn.thumb + '/' + post.user.userId + '/' + post.user.userId + '.jpg'}}\" alt=\"{{::post.user.profile}}\" fallback-src=\"{{::cdn.nothumb}}\"/>\n"+"</div>\n"+"</div>\n"+"</a>\n"+"<div class=\"user-options pull-right\" ng-show=\"canEdit(post)\" dropdown>\n"+"<button class=\"btn btn-transparent\" dropdown-toggle href=\"javascript:void(0)\">\n"+"<img ng-src=\"{{::cdn.base}}/images/groups/icon_pro_arrow.png\">\n"+"</button>\n"+"<ul class=\"dropdown-menu\">\n"+"<i class=\"ynicon ynicon-carrot-up\"></i>\n"+"<li ng-if=\"::post.downloadUrl !== undefined\">\n"+"<a class=\"download\" target=\"_self\" ng-href=\"{{::post.downloadUrl}}\" rel=\"nofollow\" translate=\"_delete\"></a>\n"+"</li>\n"+"<li ng-if=\"canPin(post)\" ng-click=\"togglePin(post)\">\n"+"<a href=\"javascript:void(0)\">\n"+"{{post.isPinned ? 'Unpin' : 'Pin'}}\n"+"</a>\n"+"</li>\n"+"<li>\n"+"<a class=\"delete-comment\" data-confirm-message=\"post_are_you_sure_delete\" confirm=\"delete\" confirm-data=\"post\" href=\"javascript:void(0)\"><span translate=\"_delete\"></span></a>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"<div class=\"description\">\n"+"<img ng-if=\"post.isPinned\" class=\"pin pull-left\"  ng-src=\"{{::cdn.base}}/images/groups/icon_post_pin.png\">\n"+"<a\n"+"class=\"name\"\n"+"ng-href=\"/{{post.user.profileUrlString}}\" prevent-default\n"+"ng-click=\"showProfileSummary(post.user.userId)\">\n"+"{{::post.user.firstName}} {{::post.user.lastName}}\n"+"</a>\n"+"<div class=\"minutes-ago text-muted\" ng-if=\"::post.timeAgo !== '0 second ago'\">{{::post.timeAgo}}</div>\n"+"<div class=\"minutes-ago text-muted\" ng-if=\"::post.timeAgo == '0 second ago'\" translate=\"post_just_now\"></div>\n"+"</div>\n"+"<div class=\"body clear\">\n"+"<div class=\"comment-text\">\n"+"<div ng-bind-html=\"::post.post\"></div>\n"+"</div>\n"+"<div class=\"comment-media-reply\" ng-if=\"::post.hasOwnProperty('embed')\">\n"+"<div ng-include src=\"'angularjsapp/src/app/components/post/embed/'+post.embed+'.tpl.html'\"></div>\n"+"</div>\n"+"<div class=\"comment-media-reply\" ng-if=\"::(post.media!==undefined && post.media.type!==undefined && !post.hasOwnProperty('embed'))\">\n"+"\n"+"<img ng-if=\"::(post.media.type=='1'||post.media.type=='2')\" ng-src=\"{{::cdn.media}}{{::broadcasterService.broadcaster.userId}}/id={{::post.id}}/ext={{::post.media.ext}}\">\n"+"\n"+"<iframe ng-if=\"::post.media.type=='4'\" frameborder=\"0\" height=\"325\" seamless=\"\" ng-src=\"{{::trustedSrc(cdn.base+'/player.php?channelId='+broadcasterService.broadcaster.userId+'&amp;id='+post.id)}}\" width=\"433\"></iframe>\n"+"\n"+"<ul ng-if=\"::post.media.type=='5'\" class=\"broadcasts\" ng-attr-id=\"post_{{::post.media.broadcast.broadcastId}}\">\n"+"<li class=\"broadcast\">\n"+"<div class=\"left-col pull-left\">\n"+"<a\n"+"ng-href=\"/{{post.media.broadcast.profile || post.media.broadcast.profileUrlString}}\" prevent-default\n"+"ng-click=\"showMedia(post.media.broadcast.broadcastId, {}, post.media.broadcast)\"\n"+"class=\"thumb\"\n"+"style=\"background:url( {{::imageApis.broadcast + '/' + post.media.broadcast.broadcastId + '/' + post.media.broadcast.broadcastId + '.jpg'}} );background-size:cover;\">\n"+"<img class=\"play-button\" ng-src=\"{{::cdn.base}}/images/profile/new/icon_play.png\">\n"+"<span class=\"length\">{{::post.media.broadcast.broadcastLengthMin}}</span>\n"+"</a>\n"+"</div>\n"+"<div class=\"right-col pull-left\">\n"+"<span class=\"title not-too-long\">{{::post.media.broadcast.ddateAired}}</span>\n"+"<div class=\"row\">\n"+"<span></span>\n"+"</div>\n"+"<div class=\"rating-viewers\">\n"+"<span class=\"viewers\">{{::post.media.broadcast.totalViewers | number}} views / #{{::post.media.broadcast.tags}}</span>\n"+"</div>\n"+"<ul class=\"gifts\">\n"+"<div ng-repeat=\"gift in post.media.broadcast.gifts\" class=\"gift pull-left\">\n"+"<img alt=\"gift.giftSKU\" class=\"gift-thumb pull-left\" ng-src=\"{{::cdn.base}}/images/profile/new/gifts/{{::gift.giftSKU}}_pro.png\">\n"+"<span class=\"count\">{{::gift.total}}</span>\n"+"</div>\n"+"</ul>\n"+"</div>\n"+"</li>\n"+"</ul>\n"+"\n"+"<img ng-if=\"::post.media.type=='6'\" ng-src=\"{{::cdn.snapshot}}{{::post.media.snapshot.snapshotId}}\" ng-attr-id=\"post_{{::post.media.snapshot.snapshotId}}\">\n"+"\n"+"</div>\n"+"</div>\n"+"<div class=\"actions\">\n"+"<div class=\"like\" ng-click=\"toggleLike(post)\">\n"+"<i class=\"ynicon ynicon-thumb\" ng-class=\"{'not-liked': !post.liked, liked: post.liked}\"></i>\n"+"<span ng-class=\"{liked: post.liked}\">{{post.liked ? 'Liked' : 'Like'}}</span>\n"+"<span ng-show=\"post.likesCount\">&#8211; {{post.likeText}}</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"options pull-right hidden\"></div>\n"+"<div class=\"options-screen pull-left hidden\"></div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/profile-summary/profile-summary.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/profile-summary/profile-summary.tpl.html","<div ng-class=\"modal.state\" class=\"profile-summary fade in\" tabindex=\"-1\" aria-hidden=\"false\">\n"+"<button aria-hidden=\"true\" class=\"pull-right close\" ng-click=\"$dismiss()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"<div class=\"modal-header\"> <div class=\"cover-image yn-modal-draggable\" ng-style=\"::{'background': 'url('+cover+') no-repeat, url('+config.imageApis.nocover+') no-repeat', 'background-size': 'cover'}\"></div></div>\n"+"<div class=\"modal-body\" ng-class=\"{banned: session.user.banId !== 0}\">\n"+"<div class=\"profile-description\">\n"+"<div class=\"circle-thumb pull-left clickable\" ng-click=\"goToProfile(user.profile)\" ng-style=\"::{'background': 'url('+thumb+') no-repeat, url('+nothumb+') no-repeat', 'background-size': 'cover'}\">\n"+"<span class=\"ynbadge\" ng-if=\"user.isSubscribable\">\n"+"<img ng-src=\"{{::config.settings.BadgeBaseUrl}}/{{::user.userId}}/1/badge@2x.png\" />\n"+"</span>\n"+"</div>\n"+"<!-- normal state -->\n"+"<div class=\"user-info pull-left\" ng-if=\"modal.state===''\">\n"+"<div class=\"name name-with-badges\" ng-class=\"::{'special-role pull-left': session.moderator && user.isPartner}\">\n"+"\n"+"<b class=\"short-text\" ng-click=\"goToProfile(user.profile)\">\n"+"<span class=\"crowns-container\">\n"+"<span class=\"user-crowns\">\n"+"<span ng-if=\"user.globalSpenderRank==1\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"</span>\n"+"<span ng-if=\"user.globalSpenderRank==2\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"</span>\n"+"<span ng-if=\"user.globalSpenderRank==3\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"</span>\n"+"<span ng-if=\"!user.globalSpenderRank\">\n"+"<i class=\"ynicon ynicon-level\"></i>\n"+"</span>\n"+"</span>\n"+"</span>\n"+"{{::user.level}}\n"+"{{::user.fullName}}\n"+"</b>\n"+"\n"+"<span class=\"ynbadges\" ng-if=\"user.subscriptions\">\n"+"<span class=\"ynbadge\" ng-repeat=\"(key,sub) in user.subscriptions\">\n"+"<img\n"+"ng-src=\"{{::config.settings.BadgeBaseUrl}}/{{::sub.userId}}/{{::sub.subscriptionType}}/badge@2x.png\"\n"+"ng-click=\"showProfileSummary(sub.userId)\"\n"+"tooltip=\"{{::sub.profileUrlString}}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-placement=\"top\"\n"+"tooltip-append-to-body=\"true\" />\n"+"</span>\n"+"<span class=\"ynbadge ynbadge-ellipsis\" ng-if=\"user.subscriptions_extras && user.subscriptions_extras.length>0\">\n"+"<i class=\"ynicon ynicon-icon-ellipsis\"></i>\n"+"<div class=\"dropup\">\n"+"<div class=\"dropdown-menu\" role=\"menu\">\n"+"<i class=\"ynicon ynicon-carrot-dwn\"></i>\n"+"<ul class=\"\" only-scroll>\n"+"<li ng-repeat=\"(k,s) in user.subscriptions_extras\">\n"+"<a\n"+"class=\"ynbadge\"\n"+"ng-click=\"showProfileSummary(s.userId)\"\n"+"ng-href=\"/{{::s.userId}}/channel\"\n"+"prevent-default>\n"+"<img\n"+"ng-src=\"{{::config.settings.BadgeBaseUrl}}/{{::s.userId}}/{{::s.subscriptionType}}/badge@2x.png\"\n"+"tooltip=\"{{::(s.lastName ? s.firstName+' '+s.lastName : s.profileUrlString)}}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-placement=\"left\"\n"+"tooltip-append-to-body=\"true\" />\n"+"</a>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"</span>\n"+"</span>\n"+"\n"+"</div>\n"+"\n"+"</div>\n"+"<!-- to follow -->\n"+"<div class=\"user-info social-action pull-left transline\" ng-if=\"modal.state=='following' && !modal.following.followed\">\n"+"<span ng-if=\"canFollow(modal.following.network)\">{{sn_verb[ modal.following.network ] | translate}} </span>\n"+"<a class=\"name short-text\" href ng-click=\"openUrl('https://twitter.com/'+user.twitterHandle, 'link')\" ng-if=\"modal.following.network=='twitter'\">@{{::user.twitterHandle}}</a>\n"+"<a class=\"name short-text\" href ng-click=\"openUrl(user.facebookLink, 'link')\" ng-if=\"modal.following.network=='facebook'\">{{::user.firstName}} {{::user.lastName}}</a>\n"+"<a class=\"name short-text\" href ng-click=\"openUrl('https://youtube.com/channel/'+user.youTubeChannelId, 'link')\" ng-if=\"modal.following.network=='youtube'\">{{::user.friendlyName}}</a>\n"+"<a class=\"name short-text\" href ng-click=\"openUrl('https://plus.google.com/'+user.googleId, 'link')\" ng-if=\"modal.following.network=='google'\">{{::user.firstName}} {{::user.lastName}}</a>\n"+"<a class=\"name short-text\" href ng-click=\"openUrl('https://instagram.com/'+user.instagramHandle, 'link')\" ng-if=\"modal.following.network=='instagram'\">{{::user.instagramHandle}}</a>\n"+"<span class=\"name short-text\"> {{ '_on' | translate }} {{sn_titles[ modal.following.network ]}} </span>\n"+"</div>\n"+"<!-- already followed -->\n"+"<div class=\"user-info social-action pull-left transline\" ng-if=\"modal.state=='following' && modal.following.followed\">\n"+"<span><i class=\"ynicon ynicon-icon-check\"></i>{{sn_verbed[ modal.following.network ] | translate}} </span>\n"+"<a class=\"name short-text\" href ng-click=\"openUrl('https://twitter.com/'+user.twitterHandle, 'link')\" ng-if=\"modal.following.network=='twitter'\">@{{::user.twitterHandle}}</a>\n"+"<a class=\"name short-text\" href ng-click=\"openUrl(user.facebookLink, 'link')\" ng-if=\"modal.following.network=='facebook'\">{{::user.firstName}} {{::user.lastName}}</a>\n"+"<a class=\"name short-text\" href ng-click=\"openUrl('https://youtube.com/channel/'+user.youTubeChannelId, 'link')\" ng-if=\"modal.following.network=='youtube'\">{{::user.friendlyName}}</a>\n"+"<a class=\"name short-text\" href ng-click=\"openUrl('https://plus.google.com/'+user.googleId, 'link')\" ng-if=\"modal.following.network=='google'\">{{::user.firstName}} {{::user.lastName}}</a>\n"+"<a class=\"name short-text\" href ng-click=\"openUrl('https://instagram.com/'+user.instagramHandle, 'link')\" ng-if=\"modal.following.network=='instagram'\">{{::user.instagramHandle}}</a>\n"+"</div>\n"+"\n"+"<!-- default -->\n"+"<div class=\"user-bio line-clamp\" ng-if=\"modal.state==''\">\n"+"\n"+"<div class=\"more-info\">\n"+"<span ng-if=\"::(session.moderator && user.isPartner)\"><b translate=\"_partner\"></b> <span class=\"bullet\">&#8226;</span> </span>\n"+"<span ng-if=\"::session.moderator\"><b>{{user.userId}}</b> <span class=\"bullet\">&#8226;</span> </span>\n"+"<span translate=\"profile_fans\" translate-values=\"{value:user.totalFans}\"></span>\n"+"<span ng-if=\"user.isSubscribable && user.totalSubscribers\"><span class=\"bullet\">&#8226;</span> <span translate=\"profile_subscribers\" translate-values=\"{value:user.totalSubscribers}\"></span></span>\n"+"<div class=\"join-date\" translate=\"profile_younower_since\" translate-values=\"{date:user.dateString}\"></div>\n"+"</div>\n"+"\n"+"<span class=\"location\" ng-if=\"user.location.length > 0\">{{::user.location}} <span class=\"bullet\">&#8226;</span></span>\n"+"<span class=\"summary\" ng-bind-html=\"user.description\"></span>\n"+"</div>\n"+"\n"+"<div class=\"social-actions pull-left\" ng-if=\"modal.state=='' && session.user.userId !== user.userId\">\n"+"<button class=\"btn btn-transparent social-google\" ng-if=\"::user.googleId\" ng-click=\"setupFollowing('google',{backToSummary:true})\">\n"+"<i class=\"ynicon ynicon-social-gp\"></i>\n"+"</button>\n"+"<button class=\"btn btn-transparent\" ng-if=\"::user.facebookId\" ng-click=\"setupFollowing('facebook',{backToSummary:true})\">\n"+"<i class=\"ynicon ynicon-social-fb\"></i>\n"+"</button>\n"+"<button class=\"btn btn-transparent\" ng-if=\"::user.youTubeChannelId\" ng-click=\"setupFollowing('youtube',{backToSummary:true})\">\n"+"<i class=\"ynicon ynicon-icon-social-yt\"></i>\n"+"</button>\n"+"<button class=\"btn btn-transparent\" ng-if=\"::user.instagramHandle\" ng-click=\"setupFollowing('instagram',{backToSummary:true})\">\n"+"<i class=\"ynicon ynicon-social-insta\"></i>\n"+"</button>\n"+"<button class=\"btn btn-transparent\" ng-if=\"::user.twitterHandle\" ng-click=\"setupFollowing('twitter',{backToSummary:true})\">\n"+"<i class=\"ynicon ynicon-social-tw\"></i>\n"+"</button>\n"+"</div>\n"+"<!-- user-info flagging/suspending -->\n"+"<div class=\"user-info pull-left\" ng-if=\"modal.state=='flagging'\">\n"+"<div class=\"name\" translate=\"profile_reason_for_flagging\"></div>\n"+"<div class=\"more-info text-muted\" translate=\"profile_false_flagging_result\"></div>\n"+"</div>\n"+"<div class=\"user-info pull-left\" ng-if=\"modal.state=='suspending'\">\n"+"<div class=\"action-message ban-state\" ng-if=\"modal.action.actionName.replace('Suspend', '')=='Ban'\">\n"+"{{'_ban' | translate }} <span ng-click=\"goToProfile(user.profile)\" class=\"name short-text\">{{::user.profile}}</span>\n"+"</div>\n"+"<div class=\"action-message\" ng-if=\"modal.action.actionName.replace('Suspend', '') !== 'Ban'\">\n"+"{{'_suspend' | translate }} <span ng-click=\"goToProfile(user.profile)\" class=\"name short-text\">{{::user.profile}}</span> {{'_for' | translate }} {{modal.action.actionName.replace('Suspend', '')}}\n"+"</div>\n"+"</div>\n"+"<!-- reason for flagging/suspending -->\n"+"<div class=\"pull-left flagging-reasons\" ng-if=\"modal.state=='flagging' && !modal.notifying\">\n"+"<div ng-repeat=\"flag in flags\">\n"+"<div ng-click=\"modal.flag = flag.id\">\n"+"<input ng-model=\"modal.flag\" ng-value=\"flag.id\" type=\"radio\">\n"+"<span>{{flag.desc}}</span>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"modal.state=='suspending' && !modal.notifying\">\n"+"<form name=\"modal.reasonForm\" novalidate>\n"+"<select class=\"form-control suspending-options\" ng-model=\"modal.reasonOption\" required ng-required>\n"+"<option value=\"\" default selected translate=\"profile_please_choose\"></option>\n"+"<option value=\"{{option.id}}\" ng-repeat=\"option in modal.actionOptions\">\n"+"{{option.desc}}\n"+"</option>\n"+"</select>\n"+"<textarea class=\"suspending-reasons\" ng-model=\"modal.reason\" placeholder=\"Please provide a reason...\" ng-maxlength=\"245\" required></textarea>\n"+"</form>\n"+"</div>\n"+"<div ng-if=\"modal.notifying\" class=\"action-notifications pull-left\">\n"+"<span ng-class=\"modal.notificationType\"><i class=\"ynicon ynicon-icon-mod pull-left\"></i> {{modal.notificationMessage}}</span>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- normal -->\n"+"<div class=\"actions\" ng-if=\"modal.state==''\" track-source=\"MINI_PROFILE\" track-context=\"{{::openedFrom}}\">\n"+"<div class=\"pull-left btn-small\" fan-button channel=\"user\"></div>\n"+"<div class=\"pull-left btn-small\" subscribe-button channel=\"user\" source=\"MINI_PROFILE\"></div>\n"+"<div class=\"pull-left btn-small\" guest-button channel=\"user\" on-invite=\"closeOnInvite()\"></div>\n"+"<a ng-href=\"{{user.profile}}/channel\" ng-if=\"!session.isBroadcasting\" class=\"full-profile pull-left\" ng-click=\"goToProfile(user.profile, $event)\" translate=\"profile_full_profile\"></a>\n"+"\n"+"<div class=\"pull-right flagging-menu\" ng-if=\"session.user && session.user.userId!==user.userId && session.user.banId === 0\" dropdown is-open=\"modal.flagging\">\n"+"<i ng-click=\"toggleDropdown($event)\" class=\"ynicon ynicon-flag\"></i>\n"+"<div class=\"dropdown-menu\" role=\"menu\">\n"+"<i class=\"ynicon ynicon-carrot-up\"></i>\n"+"<ul class=\"mini-scroll\" only-scroll>\n"+"<li ng-repeat=\"action in actions\">\n"+"<a href ng-click=\"doAction(action)\">{{action.actionName}}</a>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- flagging -->\n"+"<div class=\"actions center\" ng-if=\"modal.state=='flagging'\">\n"+"<button class=\"btn btn-important\"\n"+"ng-class=\"{error: modal.notifying || modal.flag === undefined}\"\n"+"ng-click=\"submitAction()\"\n"+"id=\"flagging-tooltip\"\n"+"tooltip=\"Provide a Reason\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-placement=\"top error\"\n"+"translate=\"{{::(params.momentId ? 'profile_report_moment' : 'profile_report_user')}}\"></button>\n"+"<button class=\"btn btn-cancel\" ng-click=\"modal.resetProfileSummary()\" translate=\"_cancel\"></button>\n"+"</div>\n"+"\n"+"<!-- suspending -->\n"+"<div class=\"actions center\" ng-if=\"modal.state === 'suspending'\">\n"+"<span\n"+"id=\"reason-form-tooltip\"\n"+"tooltip=\"Provide a Reason\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-placement=\"top error\"\n"+"tooltip-append-to-body=\"true\">\n"+"<button class=\"btn btn-important\" ng-class=\"{error: modal.notifying || !modal.reasonOption}\" ng-if=\"!modal.notifying && modal.action.actionName.replace('Suspend', '') !== 'Ban'\" ng-click=\"submitAction()\" translate=\"_suspend\"></button>\n"+"<button class=\"btn btn-important\" ng-class=\"{error: modal.notifying || !modal.reasonOption}\" ng-if=\"!modal.notifying && modal.action.actionName.replace('Suspend', '') === 'Ban'\" ng-click=\"submitAction()\" translate=\"_ban\"></button>\n"+"</span>\n"+"<button class=\"btn btn-cancel\" ng-if=\"!modal.notifying\" ng-click=\"modal.resetProfileSummary()\" translate=\"_cancel\"></button>\n"+"<button class=\"btn btn-cancel\" ng-if=\"modal.notifying\" ng-click=\"modal.resetProfileSummary()\" translate=\"_ok\"></button>\n"+"</div>\n"+"\n"+"<!-- following -->\n"+"<div class=\"actions center\" ng-if=\"modal.state=='following'\">\n"+"\n"+"<button class=\"btn btn-{{modal.following.network}}\" ng-click=\"startFollowing(modal.following.network)\" ng-if=\"canFollow(modal.following.network) && !modal.following.followed\">\n"+"<i class=\"ynicon {{modal.following.icon}}\"></i>\n"+"<span ng-if=\"modal.following.network === 'twitter'\" translate=\"_follow\"></span>\n"+"<span ng-if=\"modal.following.network === 'youtube'\" translate=\"_subscribe\"></span>\n"+"</button>\n"+"\n"+"<button class=\"btn btn-twitter\" ng-click=\"openUrl('https://twitter.com/'+user.twitterHandle, 'button')\" ng-if=\"modal.following.network=='twitter' && modal.following.followed\"><i class=\"ynicon ynicon-social-tw\"></i> <span translate=\"profile_view\"></span> </button>\n"+"<button class=\"btn btn-youtube\" ng-click=\"openUrl('https://youtube.com/channel/'+user.youTubeChannelId, 'button')\" ng-if=\"modal.following.network=='youtube' && modal.following.followed\"><i class=\"ynicon ynicon-icon-social-yt\"></i> <span translate=\"profile_view\"></span> </button>\n"+"<button class=\"btn btn-google\" ng-click=\"openUrl('https://plus.google.com/'+user.googleId, 'button')\" ng-if=\"modal.following.network=='google'\"><i class=\"ynicon ynicon-social-gp\"></i> <span translate=\"profile_view\"></span> </button>\n"+"<button class=\"btn btn-facebook\" ng-click=\"openUrl(user.facebookLink, 'button')\" ng-if=\"modal.following.network=='facebook'\"><i class=\"ynicon ynicon-social-fb\"></i> <span translate=\"profile_view\"></span> </button>\n"+"<button class=\"btn btn-instagram\" ng-click=\"openUrl('https://instagram.com/'+user.instagramHandle, 'button')\" ng-if=\"modal.following.network=='instagram'\"><i class=\"ynicon ynicon-icon-share-insta\"></i> <span translate=\"profile_view\"></span> </button>\n"+"\n"+"\n"+"<button class=\"btn btn-cancel\" ng-click=\"modal.resetProfileSummary()\" translate=\"_back\"></button>\n"+"</div>\n"+"\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/reconnect-modal/reconnect-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/reconnect-modal/reconnect-modal.tpl.html","<div class=\"modal-body\">\n"+"<button aria-hidden=\"true\" class=\"close btn-reset\" ng-click=\"vm.closeModal()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"<div class=\"modal-body\">\n"+"<div class=\"title\" translate=\"reconnect_title\"></div>\n"+"<div class=\"modal-message\" translate=\"reconnect_message\" translate-values=\"{value: vm.viewers}\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"modal-footer\">\n"+"<button class=\"btn btn-confirm pull-left\" type=\"button\" ng-click=\"vm.reconnect()\" ng-disabled=\"vm.retryTime > 0\">\n"+"<span class=\"loader-light\" ng-if=\"vm.retryTime > 0\"></span>\n"+"<span ng-if=\"!vm.retryTime\" translate=\"reconnect_yes\"></span>\n"+"</button>\n"+"<button class=\"btn btn-danger pull-left\" type=\"button\" ng-click=\"vm.endBroadcast()\" ng-disabled=\"vm.retryTime > 0\" translate=\"reconnect_no\"></button>\n"+"<button class=\"btn btn-cancel-dark pull-right\" type=\"button\" ng-click=\"vm.closeModal()\" ng-disabled=\"vm.retryTime > 0\">\n"+"<span translate=\"reconnect_no_action\"></span>\n"+"</button>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/search-bar/search-bar.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/search-bar/search-bar.tpl.html","<div class=\"search-box pull-left\">\n"+"<i ng-if=\"::(size != 'tiny')\" ng-click=\"goToExplore()\" class=\"ynicon ynicon-search\"></i>\n"+"<i ng-if=\"::(size === 'tiny')\" ng-click=\"search.animateSearchBar()\" class=\"ynicon ynicon-search\"></i>\n"+"\n"+"<input  ng-if=\"::(type != 'home')\"\n"+"typeahead=\"person.profile for person in search.query($viewValue)\"\n"+"typeahead-loading=\"searching\"\n"+"typeahead-on-select=\"search.selectResult($item, $model, $label)\"\n"+"typeahead-template-url=\"angularjsapp/src/app/components/search-bar/search-results.tpl.html\"\n"+"typeahead-wait-ms=\"100\"\n"+"ng-model=\"search.searchBox\"\n"+"ng-blur=\"search.trackBlur(); search.changeState();\"\n"+"class=\"search-field form-control\"\n"+"placeholder=\"{{search_placeholder_site}}\" type=\"text\" />\n"+"\n"+"<input  ng-if=\"::(type == 'home')\"\n"+"typeahead=\"person.profile for person in search.query($viewValue)\"\n"+"typeahead-loading=\"searching\"\n"+"typeahead-on-select=\"search.selectResult($item, $model, $label)\"\n"+"typeahead-template-url=\"angularjsapp/src/app/components/search-bar/search-results.tpl.html\"\n"+"typeahead-wait-ms=\"100\"\n"+"ng-model=\"search.searchBox\"\n"+"ng-blur=\"search.trackBlur(); search.changeState();\"\n"+"class=\"search-field form-control\"\n"+"placeholder=\"{{search_placeholder_home}}\" type=\"text\" />\n"+"\n"+"<i ng-if=\"::(size === 'tiny')\" class=\"ynicon ynicon-close\" ng-click=\"search.closeSearchBar()\"></i>\n"+"<button class=\"btn btn-primary\" ng-if=\"::(type === 'home')\" ng-click=\"goToExplore()\" translate=\"_go\"></button>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/search-bar/search-results.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/search-bar/search-results.tpl.html","<div ng-if=\"match.model.title\" class=\"search-title primary-text\">\n"+"<div class=\"title-{{match.model.type}}\">\n"+"<div class=\"title-divider\" ng-if=\"match.model.showBorder\"></div>\n"+"{{match.model.title}}\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"match.model.objectID\" class=\"searchResult\">\n"+"<div class=\"circle-thumb pull-left\" ng-attr-style=\"{{$parent.$parent.$parent.$parent.search.background(match.model.objectID)}}\">\n"+"<div class=\"live\" ng-show=\"match.model.tag\"><i class=\"ynicon ynicon-broadcast\"></i></div>\n"+"</div>\n"+"<div class=\"pull-left userInfo\">\n"+"<div class=\"name pull-left transline-mid\">\n"+"<i class=\"ynicon ynicon-level\"></i><span>{{match.model.level}}</span>\n"+"<span class=\"short-text\">{{match.model.fullName}}</span>\n"+"</div>\n"+"<div ng-show=\"match.model.viewers\" class=\"viewers pull-right\">\n"+"<img ng-src=\"{{::$parent.$parent.$parent.$parent.search.base}}/images/younow_header/icon_viewers_search.png\">{{match.model.viewers}}</div>\n"+"<div class=\"description line-clamp pull-left\" ng-bind-html=\"match.model.hashedDescription\"></div>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"match.model.dbg\">\n"+"<a class=\"tagResult\" ng-href=\"/explore/{{match.model.tag}}\">\n"+"<div class=\"short-text\">#{{match.model.tag}}</div>\n"+"<span class=\"pull-right broadcasts-count\">\n"+"<i class=\"ynicon ynicon-broadcast\"></i>\n"+"<b>{{match.model.live}}</b>\n"+"</span>\n"+"</a>\n"+"</div>\n"+"<div ng-if=\"match.model.more\" class=\"searchResult-more transline-top ellipsify\">\n"+"<span translate=\"search_see_all_for\"></span>\n"+"<span class=\"searchTerm short-text\">{{match.model.query}}</span>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/settingup-panel/settingup-panel.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/settingup-panel/settingup-panel.tpl.html","<h4 class=\"heading\">1. {{ 'golive_tag_title' | translate }}</h4>\n"+"<div class=\"text-muted sub-title\" translate=\"golive_tag_text\" style=\"padding:0;\"></div>\n"+"<div class=\"typeahead-container\" ng-class=\"{open: !panel.typeaheadClosed}\">\n"+"<form name=\"panel.tagForm\" novalidate>\n"+"<label class=\"hash-label\" ng-class=\"{active: panel.tagSelected.length > 0}\">\n"+"#\n"+"</label>\n"+"<input type=\"text\"\n"+"id=\"typeaheadInput\"\n"+"class=\"tag-input form-control\"\n"+"placeholder=\"{{ 'golive_tag_input' | translate }}\"\n"+"ng-model=\"panel.tagSelected\"\n"+"tabindex=\"1\"\n"+"maxlength=\"20\"\n"+"ng-required\n"+"ng-maxlength=\"20\"\n"+"typeahead=\"tag for tag in panel.loadTags($viewValue)\"\n"+"ng-change=\"panel.validateTag(panel.tagSelected)\"\n"+"ng-blur=\"panel.typeaheadClosed = true\"\n"+"typeahead-on-select=\"panel.selectTag($item, $model, $label)\"\n"+"typeahead-template-url=\"angularjsapp/src/app/components/settingup-panel/tag-selection.tpl.html\">\n"+"</form>\n"+"<i class=\"ynicon ynicon-icon-check\" ng-class=\"{active: panel.tagValid}\"></i>\n"+"<div class=\"typeahead-defaults pull-left mini-scroll\" ng-class=\"{active: panel.typeaheadClosed}\" only-scroll>\n"+"<div class=\"pull-left tag\" ng-repeat=\"tag in ::panel.popularTags track by $index\" ng-click=\"panel.selectTag(tag)\" ng-if=\"tag.tag !== false\" ng-class=\"::{'ep-tag': tag.isEp, 'tag': !tag.isEp}\">\n"+"<i ng-if=\"::tag.isEp\"class=\"ynicon ynicon-level\"></i>\n"+"{{::tag.tag}}\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<h4 class=\"heading\">2. {{ '_share' | translate }}</h4>\n"+"<div class=\"text-muted sub-title\" translate=\"golive_share_text\"></div>\n"+"<div class=\"snapshot pull-left\">\n"+"<img ng-if=\"panel.snapshot\" ng-src=\"data:image/jpeg;base64,{{panel.snapshot}}\">\n"+"<button class=\"btn btn-transparent\" ng-disabled=\"!panel.initResponse\" ng-click=\"panel.takeSnapshot()\">\n"+"<i class=\"ynicon ynicon-camera\"></i>\n"+"</button>\n"+"</div>\n"+"<div class=\"snapshot-description pull-left\">\n"+"<input  class=\"form-control\"\n"+"yn-enter=\"panel.startBroadcast()\"\n"+"id=\"share-input\"\n"+"tabindex=\"2\"\n"+"placeholder=\"{{ 'golive_share_input' | translate }}\"\n"+"ng-model=\"panel.shareCopy\"\n"+"ng-maxlength=\"60\"\n"+"maxlength=\"60\">\n"+"<button class=\"btn btn-transparent\" ng-disabled=\"!panel.initResponse\" ng-click=\"panel.toggleShare('twitter')\">\n"+"<i class=\"ynicon\" ng-class=\"{'ynicon-icon-share-tw': !panel.networks.twitter, 'ynicon-icon-share-tw-on': panel.networks.twitter}\"></i>\n"+"</button>\n"+"<button class=\"btn btn-transparent\" ng-disabled=\"!panel.initResponse\" ng-click=\"panel.toggleShare('facebook')\">\n"+"<i class=\"ynicon\" ng-class=\"{'ynicon-icon-share-fb': !panel.networks.facebook && !panel.networks.facebookShare, 'ynicon-icon-share-fb-on': panel.networks.facebook || panel.networks.facebookShare}\"></i>\n"+"</button>\n"+"<button class=\"btn btn-transparent\" ng-disabled=\"!panel.initResponse\" ng-click=\"panel.toggleShare('youtube')\" ng-if=\"panel.showYoutube\" tooltip=\"{{::'settings_connect_youtube_simulcast' | translate }}\" tooltip-trigger=\"mouseenter\" tooltip-placement=\"bottom\" tooltip-append-to-body=\"true\">\n"+"<i class=\"ynicon\" ng-class=\"{'ynicon-icon-share-yt': !panel.networks.youtube, 'ynicon-icon-share-yt-on': panel.networks.youtube}\"></i>\n"+"</button>\n"+"<button class=\"btn btn-transparent\" ng-disabled=\"!panel.initResponse\" ng-click=\"panel.toggleShare('tumblr')\">\n"+"<i class=\"ynicon\" ng-class=\"{'ynicon-social-tm': !panel.networks.tumblr, 'ynicon-icon-share-tm-on': panel.networks.tumblr}\"></i>\n"+"</button>\n"+"<button class=\"btn btn-transparent\" ng-disabled=\"!panel.initResponse\" tooltip=\"{{::'golive_snap' | translate}}\" tooltip-placement=\"bottom\" tooltip-append-to-body=\"true\">\n"+"<i class=\"ynicon ynicon-icon-share-snap\"></i>\n"+"</button>\n"+"<button class=\"btn btn-transparent\" ng-disabled=\"!panel.initResponse\" tooltip=\"{{::'golive_insta' | translate}}\" tooltip-placement=\"bottom\" tooltip-append-to-body=\"true\">\n"+"<i class=\"ynicon ynicon-icon-share-insta\"></i>\n"+"</button>\n"+"</div>\n"+"<div class=\"golive_buttons\">\n"+"<button class=\"btn btn-primary\" ng-if=\"!panel.externalStreaming.active\" id=\"start-broadcast-btn\" ng-disabled=\"(panel.startingBroadcast || !panel.initResponse) || panel.mediaTestResults.audioPassed !== 'pass'\" ng-click=\"panel.startBroadcast()\">\n"+"<span ng-if=\"!panel.startingBroadcast && panel.mediaTestResults.audioPassed !== 'checking'\" translate=\"_golive\"></span>\n"+"<span ng-if=\"panel.mediaTestResults.audioPassed === 'checking'\" translate=\"golive_checking_microphone\"></span>\n"+"<div ng-if=\"panel.startingBroadcast || panel.mediaTestResults.audioPassed === 'checking'\" class=\"loader-light\"></div>\n"+"</button>\n"+"<button class=\"btn btn-primary\" ng-if=\"panel.externalStreaming.active\" id=\"start-broadcast-btn\" ng-disabled=\"panel.startingBroadcast || !panel.initResponse\" ng-click=\"panel.prepareBroadcast()\">\n"+"<span ng-if=\"!panel.startingBroadcast\">Prepare Broadcast</span>\n"+"<div ng-if=\"panel.startingBroadcast\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/settingup-panel/tag-selection.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/settingup-panel/tag-selection.tpl.html","<div class=\"divider\" ng-if=\"!match.model.tag\"></div>\n"+"<div class=\"pull-left\" ng-if=\"match.model.tag\" ng-class=\"{'ep-tag': match.model.isEp, 'tag': !match.model.isEp}\">\n"+"<i ng-if=\"match.model.isEp\"class=\"ynicon ynicon-level\"></i>{{match.model.tag}}\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/share-broadcast-modal/share-broadcast-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/share-broadcast-modal/share-broadcast-modal.tpl.html","<div class=\"modal-body\">\n"+"<h5 class=\"title\" translate=\"recommend_this_broadcast\"></h5>\n"+"<div class=\"share-message\" ng-if=\"!modal.type\" translate=\"share_invite_your_fans\" translate-values=\"{ value: '{{modal.session.user.totalFans}}' }\"></div>\n"+"<div class=\"share-message\" ng-if=\"modal.type == 'guest'\">We need something to post on your profile.</div>\n"+"<form name=\"modal.form\" novalidate>\n"+"<input class=\"form-control\" ng-model=\"modal.recommendMessage\" ng-maxlength=\"60\" maxlength=\"60\" ng-required=\"true\">\n"+"</form>\n"+"<div class=\"actions\">\n"+"<button class=\"btn btn-cancel\" ng-click=\"modal.closeModal()\" translate=\"_cancel\"></button>\n"+"<button class=\"btn btn-confirm\" ng-click=\"modal.invite()\" ng-disabled=\"modal.form.$invalid\" translate=\"_invite\"></button>\n"+"</div>\n"+"<button aria-hidden=\"true\" class=\"close btn-reset\" ng-click=\"modal.closeModal()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/share-panel/share-panel.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/share-panel/share-panel.tpl.html","<div class=\"panel-header\">\n"+"<div class=\"share-title short-text\" ng-if=\"::(!panel.target)\">{{ '_promote' | translate }} {{panel.swf.broadcast.username}}!</div>\n"+"<div class=\"share-title short-text\" ng-if=\"::(panel.target == 'guest')\">Share your broadcast selfie!</div>\n"+"<div class=\"share-title short-text\" ng-if=\"::(panel.target == 'shareMoment')\" translate=\"moment_share_title\"></div>\n"+"\n"+"<div class=\"close-header\">\n"+"<button ng-click=\"panel.close()\" class=\"close btn-reset\"><i class=\"ynicon ynicon-close\"></i></button>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"snapshot-image\" ng-class=\"{retake: panel.swf.snapshot.retake}\">\n"+"<!-- normal -->\n"+"<img class=\"snapshot-image-img\" ng-if=\"::(!panel.target)\" ng-src=\"data:image/jpeg;base64,{{panel.swf.snapshot.snapshot}}\" />\n"+"<i\n"+"id=\"snapshot-retake\"\n"+"class=\"snapshot-btn snapshot-retake ynicon ynicon-camera\"\n"+"ng-click=\"panel.newSnapshot()\"\n"+"ng-if=\"::(!panel.target)\"\n"+"tooltip=\"{{'chat_already_shared_snapsho_take_another' | translate }}\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-trigger=\"show\">\n"+"</i>\n"+"\n"+"<!-- guest -->\n"+"<img class=\"snapshot-image-img\" ng-if=\"::(panel.target == 'guest' || panel.guestService.guest.userId == panel.session.user.userId)\" ng-src=\"data:image/jpeg;base64,{{panel.guestService.eobSnapshot}}\" />\n"+"<i\n"+"id=\"snapshot-retake\"\n"+"class=\"snapshot-btn snapshot-retake ynicon ynicon-camera\"\n"+"ng-click=\"panel.newSnapshot()\"\n"+"ng-if=\"::( (panel.target == 'guest' && panel.guestService.guest) || panel.guestService.guest.userId == panel.session.user.userId)\"\n"+"tooltip=\"{{'chat_already_shared_snapsho_take_another' | translate }}\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-trigger=\"show\">\n"+"</i>\n"+"\n"+"<!-- share moment -->\n"+"<div class=\"\" ng-if=\"::(panel.target == 'shareMoment')\">\n"+"<span class=\"preview-container\">\n"+"<videojs-player options=\"moment.options\"></videojs-player>\n"+"<moment-highlight dynamic></moment-highlight>\n"+"</span>\n"+"</div>\n"+"</div>\n"+"<input ng-if=\"::(panel.target != 'shareMoment')\"\n"+"class=\"snapshot-href\"\n"+"value=\"{{panel.swf.snapshot.links.COPIEDURL}}\"\n"+"copy-on-click\n"+"tooltip=\"copied to clipboard\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-trigger=\"hrefCopied\"\n"+"/>\n"+"\n"+"<div class=\"share-message\" ng-if=\"::(panel.target != 'shareMoment')\">\n"+"<form name=\"panel.shareForm\" novalidate>\n"+"<input\n"+"placeholder=\"{{'chat_add_a_message' | translate }}\"\n"+"name=\"share_message\"\n"+"ng-model=\"panel.swf.broadcast.share_message\"\n"+"ng-maxlength=\"60\"\n"+"ng-trim=\"false\"\n"+"maxlength=\"60\">\n"+"</input>\n"+"</form>\n"+"<div ng-if=\"panel.swf.broadcast.share_message && panel.swf.broadcast.share_message.length < 60\" class=\"character-count\">{{60 - panel.swf.broadcast.share_message.length}}</div>\n"+"<div ng-if=\"panel.swf.broadcast.share_message && panel.shareForm.share_message.$viewValue.length >= 60\" class=\"character-count invalid\" >0</div>\n"+"</div>\n"+"<div class=\"share-actions\">\n"+"\n"+"<button class=\"btn-reset\" ng-disabled=\"panel.swf.snapshot.sharing.facebook\" tooltip=\"{{'chat_share_to' | translate }} Facebook\" tooltip-trigger=\"mouseenter\" tooltip-append-to-body=\"true\" ng-click=\"panel.attemptShare('facebook')\" ng-class=\"{active: panel.swf.snapshot.shared.facebook}\">\n"+"<div ng-if=\"panel.swf.snapshot.sharing.facebook\" class=\"loader\"></div>\n"+"<div class=\"social-icon-circle social-icon-circle-fb\" ng-if=\"!panel.swf.snapshot.sharing.facebook\">\n"+"<div class=\"social-share-icon\">\n"+"<i class=\"ynicon ynicon-icon-share-fb\" ng-if=\"!panel.swf.broadcast.shared.facebook\"></i>\n"+"<i class=\"ynicon ynicon-icon-share-fb-on\" ng-if=\"panel.swf.broadcast.shared.facebook\"></i>\n"+"</div>\n"+"</div>\n"+"<div>\n"+"<span ng-if=\"!panel.swf.snapshot.sharing.facebook && !panel.swf.snapshot.shared.facebook\" translate=\"_share\"></span>\n"+"<span ng-if=\"panel.swf.snapshot.shared.facebook\" translate=\"_shared\"></span>\n"+"<span ng-if=\"panel.swf.snapshot.sharing.facebook\" translate=\"_sharing\"></span>\n"+"</div>\n"+"</button>\n"+"\n"+"<button class=\"btn-reset\" ng-disabled=\"panel.swf.snapshot.sharing.twitter\" tooltip=\"{{'chat_share_to' | translate }} Twitter\" tooltip-trigger=\"mouseenter\" tooltip-append-to-body=\"true\" ng-click=\"panel.attemptShare('twitter')\" ng-class=\"{active: panel.swf.snapshot.shared.twitter}\">\n"+"<div ng-if=\"panel.swf.snapshot.sharing.twitter\" class=\"loader\"></div>\n"+"<div class=\"social-icon-circle social-icon-circle-tw\" ng-if=\"!panel.swf.snapshot.sharing.twitter\">\n"+"<div class=\"social-share-icon\">\n"+"<i class=\"ynicon ynicon-icon-share-tw\" ng-if=\"!panel.swf.broadcast.shared.twitter\"></i>\n"+"<i class=\"ynicon ynicon-icon-share-tw-on\" ng-if=\"panel.swf.broadcast.shared.twitter\"></i>\n"+"</div>\n"+"</div>\n"+"<div>\n"+"<span ng-if=\"!panel.swf.snapshot.sharing.twitter && !panel.swf.snapshot.shared.twitter\" translate=\"_tweet\"></span>\n"+"<span ng-if=\"panel.swf.snapshot.shared.twitter\" translate=\"_tweeted\"></span>\n"+"<span ng-if=\"panel.swf.snapshot.sharing.twitter\" translate=\"_tweeting\"></span>\n"+"</div>\n"+"</button>\n"+"\n"+"<button class=\"btn-reset\" ng-if=\"::(panel.target != 'shareMoment')\" ng-disabled=\"panel.swf.snapshot.sharing.tumblr\" tooltip=\"{{'chat_share_to' | translate }} Tumblr\" tooltip-trigger=\"mouseenter\" tooltip-append-to-body=\"true\" ng-click=\"panel.attemptShare('tumblr')\" ng-class=\"{active: panel.swf.snapshot.shared.tumblr}\">\n"+"<div ng-if=\"panel.swf.snapshot.sharing.tumblr\" class=\"loader\"></div>\n"+"<div class=\"social-icon-circle social-icon-circle-tm\" ng-if=\"!panel.swf.snapshot.sharing.tumblr\">\n"+"<div class=\"social-share-icon\">\n"+"<i class=\"ynicon ynicon-social-tm\" ng-if=\"!panel.swf.broadcast.shared.tumblr\"></i>\n"+"<i class=\"ynicon ynicon-icon-share-tm-on\" ng-if=\"panel.swf.broadcast.shared.tumblr\"></i>\n"+"</div>\n"+"</div>\n"+"<div class=\"tumblr-share-label\">\n"+"<span ng-if=\"!panel.swf.snapshot.sharing.tumblr && !panel.swf.snapshot.shared.tumblr\" translate=\"_post\"></span>\n"+"<span ng-if=\"panel.swf.snapshot.shared.tumblr\" translate=\"_posted\"></span>\n"+"<span ng-if=\"panel.swf.snapshot.sharing.tumblr\" translate=\"_posting\"></span>\n"+"</div>\n"+"</button>\n"+"\n"+"<button class=\"btn-reset\" ng-if=\"::(panel.target == 'shareMoment')\" >\n"+"<div class=\"social-icon-circle social-icon-circle-url\">\n"+"<input id=\"copyCmd\" class=\"copy-link-href\" value=\"{{panel.shareUrl.url}}\" copy-on-click tooltip=\"{{panel.tooltipText}}\"  tooltip-trigger=\"click mouseenter\" tooltip-append-to-body=\"true\" ng-click=\"panel.clickToCopy()\"/>\n"+"<div class=\"social-share-icon\">\n"+"<i class=\"ynicon ynicon-url\"></i>\n"+"</div>\n"+"</div>\n"+"<div class=\"tumblr-share-label\">\n"+"<span translate=\"\">Copy Link</span>\n"+"</div>\n"+"</button>\n"+"\n"+"<!-- normal -->\n"+"<button class=\"btn-reset\" ng-if=\"::!panel.target\" ng-disabled=\"panel.swf.snapshot.sharing.younow\" tooltip=\"{{'chat_invite_your_friends' | translate }}\" tooltip-trigger=\"mouseenter\" ng-click=\"panel.attemptShare('invite')\" tooltip-append-to-body=\"true\" ng-class=\"{active: panel.swf.broadcast.shared.younow}\">\n"+"<div ng-if=\"panel.swf.snapshot.sharing.younow\" class=\"loader\"></div>\n"+"<div class=\"social-icon-circle social-icon-circle-restream\" ng-if=\"!panel.swf.snapshot.sharing.younow\">\n"+"<div class=\"social-share-icon\">\n"+"<i class=\"ynicon ynicon-icon-share-restream\" ng-if=\"!panel.swf.broadcast.shared.younow\"></i>\n"+"<i class=\"ynicon ynicon-icon-share-restream-on\" ng-if=\"panel.swf.broadcast.shared.younow\"></i>\n"+"</div>\n"+"</div>\n"+"<div>\n"+"<span ng-if=\"!panel.swf.snapshot.sharing.younow && !panel.swf.snapshot.shared.younow && !panel.swf.broadcast.shared.younow\" translate=\"_invite\"></span>\n"+"<span ng-if=\"panel.swf.snapshot.shared.younow || panel.swf.broadcast.shared.younow\" translate=\"_invited\"></span>\n"+"<span ng-if=\"panel.swf.snapshot.sharing.younow\" translate=\"_inviting\"></span>\n"+"</div>\n"+"</button>\n"+"\n"+"<!-- guest -->\n"+"<button class=\"btn-reset btn-invite\" ng-if=\"::(panel.target == 'guest')\" ng-disabled=\"panel.swf.snapshot.sharing.younow\" tooltip=\"Post on YouNow\" tooltip-trigger=\"mouseenter\" ng-click=\"panel.attemptShare('post')\" tooltip-append-to-body=\"true\" ng-class=\"{active: panel.post.shared}\">\n"+"<div ng-if=\"panel.post.sharing\" class=\"loader\"></div>\n"+"\n"+"<div class=\"social-icon-circle social-icon-circle-restream\" ng-if=\"!panel.post.sharing\">\n"+"<div class=\"social-share-icon\">\n"+"<i class=\"ynicon ynicon-icon-share-restream\" ng-if=\"!panel.swf.broadcast.shared.younow\"></i>\n"+"<i class=\"ynicon ynicon-icon-share-restream-on\" ng-if=\"panel.swf.broadcast.shared.younow\"></i>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"center-text\">\n"+"<span ng-if=\"!panel.post.sharing && !panel.post.shared\">Post</span>\n"+"<span ng-if=\"panel.post.shared\">Posted</span>\n"+"<span ng-if=\"panel.post.sharing\">Posting</span>\n"+"</div>\n"+"</button>\n"+"\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/spending-redirect-modal/failed.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/spending-redirect-modal/failed.tpl.html","<div class=\"modal-body\">\n"+"<button aria-hidden=\"true\" class=\"close\" ng-click=\"dismiss()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"<h2>Sorry, {{::params.purchaseItem}} could not be purchased</h2>\n"+"\n"+"<p>Did you know you can download our app on iTunes or Google Play and purchase {{ ::(params.what=='subscription' ? 'a '+params.what : params.what) }} there?</p>\n"+"<div class=\"actions\">\n"+"<button class=\"btn btn-confirm\" ng-click=\"downloadTheApp()\">Download now</button>\n"+"</div>\n"+"\n"+"<p>Have more questions <a ng-href=\"settings.SupportUrl\" target=\"_blank\">contact support</a></p>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/spending-redirect-modal/spending-redirect-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/spending-redirect-modal/spending-redirect-modal.tpl.html","<div class=\"modal-body\">\n"+"<button aria-hidden=\"true\" class=\"close\" ng-click=\"dismiss()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"<h2>Oops, bars could not be purchased</h2>\n"+"<p><b>Tip:</b> YouNow now accepts paypal.  Try purchasing bars with PayPal.  Just choose \"change payment method\" and select PayPal.</p>\n"+"<div class=\"actions\">\n"+"<button class=\"btn btn-cancel\" ng-click=\"tryAgain()\">Try Again</button>\n"+"</div>\n"+"<p><b>Tip:</b> You can also purchase bars on your phone with iTunes or GooglePlay.  Download the app.</p>\n"+"<div class=\"actions\">\n"+"<button class=\"btn btn-confirm\" ng-click=\"downloadTheApp('ios')\">Download with iTunes</button>\n"+"<button class=\"btn btn-confirm\" ng-click=\"downloadTheApp('android')\">Download with GooglePlay</button>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/stripe-form/stripe-form.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/stripe-form/stripe-form.tpl.html","<form action=\"\" method=\"POST\" name=\"stripeForm\" ng-submit=\"component.submitForm($event)\" novalidate id=\"payment-form\" class=\"stripe-form\">\n"+"<span class=\"payment-errors\">{{component.errorMessage}}</span>\n"+"\n"+"<div class=\"form-row\" ng-class=\"{'incorrect': stripeForm.ccNumber.$invalid && component.formSubmitted}\">\n"+"<label class=\"stripe-label\">\n"+"<span class=\"stripe-field-name\" ng-class=\"{'show-field-name': stripeForm.ccNumber.$viewValue.length > 0}\">Card Number</span>\n"+"<input class=\"stripe-field\" type=\"text\" placeholder=\"Card Number\" name=\"ccNumber\" ng-model=\"ccNumber\" ng-required=\"true\" ng-pattern=\"component.ccRegex\" maxlength=\"20\" size=\"20\" data-stripe=\"number\"/>\n"+"</label>\n"+"</div>\n"+"\n"+"<div class=\"form-row\" ng-class=\"{'incorrect': (stripeForm.ccMonth.$invalid || stripeForm.ccYear.$invalid) && component.formSubmitted}\">\n"+"<label class=\"stripe-label\">\n"+"<span class=\"stripe-field-name\" ng-class=\"{'show-field-name': stripeForm.ccMonth.$viewValue.length > 0 || stripeForm.ccYear.$viewValue.length > 0}\">Expiration (MM/YYYY)</span>\n"+"<input class=\"stripe-field month-field\" type=\"text\" placeholder=\"MM\" ng-model=\"ccMonth\" name=\"ccMonth\" ng-pattern=\"component.moRegex\" ng-required=\"true\" maxlength=\"2\" size=\"2\" data-stripe=\"exp-month\"/>\n"+"<input class=\"stripe-field year-field\" type=\"text\" placeholder=\"YYYY\" ng-model=\"ccYear\" name=\"ccYear\" ng-pattern=\"component.yrRegex\" ng-required=\"true\" maxlength=\"4\" size=\"4\" data-stripe=\"exp-year\"/>\n"+"</label>\n"+"</div>\n"+"\n"+"<div class=\"form-row\" ng-class=\"{'incorrect': stripeForm.cvvNumber.$invalid && component.formSubmitted}\">\n"+"<label class=\"stripe-label\">\n"+"<span class=\"stripe-field-name\" ng-class=\"{'show-field-name': stripeForm.cvvNumber.$viewValue.length > 0}\">CVV</span>\n"+"<input class=\"stripe-field\" type=\"text\" placeholder=\"CVV\" name=\"cvvNumber\" ng-model=\"cvvNumber\" ng-required=\"true\" ng-pattern=\"component.cvvRegex\" maxlength=\"4\" size=\"4\" data-stripe=\"cvc\"/>\n"+"</label>\n"+"</div>\n"+"\n"+"<button type=\"submit\" class=\"btn btn-confirm\">\n"+"<div class=\"spinning-container\" ng-if=\"component.formSubmitting\">\n"+"<span class=\"spinning-loader\"></span>\n"+"</div>\n"+"Submit\n"+"</button>\n"+"</form>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/subscribe-button/subscribe-button.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/subscribe-button/subscribe-button.tpl.html","<button class=\"btn btn-small btn-subscribe {{subStatus[channel.userId]?'btn-subscribed':'btn-to-subscribe'}} {{fanStatus[channel.userId]?'is-fanned':'not-fanned'}}\" ng-if=\"( !hidden && ( fanStatus[channel.userId] || subStatus[channel.userId] ) )\" ng-click=\"subscribe()\">\n"+"<span class=\"tosubscribe\" ng-if=\"!subStatus[channel.userId]\">\n"+"<i class=\"ynicon ynicon-icon-subscribers\"></i> {{'_subscribe' | translate}}\n"+"</span>\n"+"<span class=\"subscribed\" ng-if=\"subStatus[channel.userId]\">\n"+"<i class=\"ynicon ynicon-icon-check\"></i> {{'_subscribed' | translate}}\n"+"</span>\n"+"</button>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/subscribe-modal/subscribe.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/subscribe-modal/subscribe.tpl.html","<div class=\"modal-body show-{{vm.spanel}}\">\n"+"\n"+"<button aria-hidden=\"true\" class=\"pull-right close\" ng-click=\"$dismiss()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"\n"+"<div class=\"modal-top\">\n"+"<div class=\"portrait thumb\" ng-style=\"::{'background-image': 'url('+vm.template.userThumb+'), url('+vm.template.noThumb+')'}\">\n"+"<img class=\"ynbadge\" ng-src=\"{{::vm.config.settings.BadgeBaseUrl}}/{{::vm.channel.userId}}/1/badge@2x.png\" />\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- 1 -->\n"+"<div class=\"spanel spanel-initial\">\n"+"<div class=\"modal-middle\">\n"+"<h2 translate=\"{{::vm.title}}\" translate-values=\"{channel: vm.channel.profile}\"></h2>\n"+"<div class=\"list\">\n"+"<div class=\"benefits\">\n"+"<img class=\"partner-sticker\" ng-src=\"{{::vm.template.sticker}}\">\n"+"<span translate=\"subscriber_partner_sticker\" translate-values=\"{channel: vm.channel.profile}\"></span>\n"+"</div>\n"+"<div class=\"benefits\">\n"+"<img class=\"icon-image\" ng-src=\"{{::vm.template.baseImageUrl + '/onscreen_msg_icon.png'}}\">\n"+"<span translate=\"subscriber_super_messages\" translate-values=\"{amount: 20}\"></span>\n"+"</div>\n"+"<div class=\"benefits\">\n"+"<img class=\"icon-image\" ng-src=\"{{::vm.template.baseImageUrl + '/private_chat_icon.png'}}\">\n"+"<span translate=\"subscriber_only_chat\" translate-values=\"{channel: vm.channel.profile}\"></span>\n"+"</div>\n"+"<div class=\"benefits\">\n"+"<img class=\"icon-image\" ng-src=\"{{::vm.template.baseImageUrl + '/replay_icon.png'}}\">\n"+"<span translate=\"subscriber_replays\" translate-values=\"{channel: vm.channel.profile}\"></span>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"modal-bottom\">\n"+"<button class=\"btn btn-confirm\" type=\"button\" ng-click=\"vm.submitInitial()\">\n"+"<div translate=\"_subscribe\"></div>\n"+"<span class=\"fine-print\" translate=\"subscribe_monthly\" translate-values=\"{value: vm.sub.price}\"></span>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- 2 -->\n"+"<div class=\"spanel spanel-email\">\n"+"<form name=\"subscriptionsEmail\" ng-submit=\"vm.submitEmail(subscriptionsEmail)\" novalidate>\n"+"\n"+"<div class=\"modal-middle\">\n"+"<div class=\"text\" translate=\"subscribe_purchase_email\">\n"+"</div>\n"+"<div class=\"form\">\n"+"<input placeholder=\"Email address\"\n"+"name=\"email\"\n"+"class=\"form-control\"\n"+"type=\"email\"\n"+"ng-validate\n"+"required\n"+"ng-model=\"vm.session.user.email\"\n"+"ng-pattern=\"emailRegex\"\n"+"tooltip=\"Please enter valid email\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-placement=\"bottom error\"\n"+"subscribe-validate />\n"+"</div>\n"+"</div>\n"+"<div class=\"modal-bottom\">\n"+"<button class=\"btn btn-confirm\" type=\"submit\" {{ (subscriptionsEmail.$touched && subscriptionsEmail.$valid) ? '' : 'disabled' }}>\n"+"{{ '_continue' | translate }}\n"+"</button>\n"+"</div>\n"+"\n"+"</form>\n"+"</div>\n"+"\n"+"<!-- 3 -->\n"+"<div class=\"spanel spanel-payment\">\n"+"\n"+"<!-- MODAL FOR PAYMENT UPDATE JUNE 2016  -->\n"+"<div class=\"update modal-middle\" ng-if=\"vm.params.state === 'payment'\">\n"+"\n"+"<h2 translate=\"update_payment_header\"></h1>\n"+"\n"+"<!-- EDIT BODY ANDROID/IOS -->\n"+"<div ng-if=\"::vm.subscription.subscriptionPlatform.name !== 'YouNow.com'\">\n"+"<p class=\"copy\" translate=\"managed_through\" translate-values=\"{source: vm.subscription.subscriptionPlatform.manager}\"></p>\n"+"\n"+"<div  class=\"exit-app\" >\n"+"<a ng-href='{{::vm.params.sub.subscriptionPlatform.url}}' translate=\"take_me\" translate-values=\"{destination :vm.params.sub.subscriptionPlatform.manager}\" class=\"btn take-btn\"> </a>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"<!-- EDIT BODY WEB -->\n"+"<div ng-if=\"::vm.subscription.subscriptionPlatform.name == 'YouNow.com'\">\n"+"\n"+"<p class=\"copy\" translate=\"select_payment\"></p>\n"+"\n"+"<div class=\"modal-middle\">\n"+"\n"+"<iframe id=\"braintree-iframe\"\n"+"ng-if=\"config.buybarsiframe\"\n"+"ng-src=\"{{::Api.trustedSrc(config.settings.ServerSecureLocalBaseUrl + '/checkout.php' )}}\">\n"+"</iframe>\n"+"<form id=\"braintree-form\" ng-if=\"!config.buybarsiframe\">\n"+"<div id=\"braintree-dropin\"></div>\n"+"<button type=\"submit\" ng-disabled=\"vm.submitting || vm.braintreeLoading\" class=\"btn btn-confirm\">\n"+"<span translate=\"_submitting\" ng-if=\"vm.submitting\"></span>\n"+"<span translate=\"_submit\" ng-if=\"!vm.submitting\"></span>\n"+"<div class=\"spinning-container\" ng-if=\"(vm.submitting || vm.braintreeLoading)\">\n"+"<span class=\"spinning-loader\"></span>\n"+"</div>\n"+"</button>\n"+"</form>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"\n"+"<div ng-if=\"vm.params.state !== 'payment'\">\n"+"<div class=\"modal-middle\">\n"+"<h2 translate=\"subscribe_confirm_header\" translate-values=\"{value:'${{::vm.sub.price}}'}\"></h2>\n"+"<div class=\"text\" translate=\"subscribe_confirm_instructions_edit\" ng-if=\"vm.subscription.subscriptionId\"></div>\n"+"<div class=\"text\" translate=\"subscribe_confirm_instructions_enter\" ng-if=\"!vm.subscription.subscriptionId\"></div>\n"+"<iframe id=\"braintree-iframe\"\n"+"ng-if=\"config.buybarsiframe\"\n"+"ng-src=\"{{::Api.trustedSrc(config.settings.ServerSecureLocalBaseUrl + '/checkout.php' )}}\">\n"+"</iframe>\n"+"<form id=\"braintree-form\" ng-if=\"!config.buybarsiframe\">\n"+"<div id=\"braintree-dropin\"></div>\n"+"<button type=\"submit\" ng-disabled=\"vm.submitting || vm.braintreeLoading\" class=\"btn btn-confirm\">\n"+"<span translate=\"_submitting\" ng-if=\"vm.submitting\"></span>\n"+"<span translate=\"_submit\" ng-if=\"!vm.submitting\"></span>\n"+"<div class=\"spinning-container\" ng-if=\"(vm.submitting || vm.braintreeLoading)\">\n"+"<span class=\"spinning-loader\"></span>\n"+"</div>\n"+"</button>\n"+"</form>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- 4 -->\n"+"<div class=\"spanel spanel-thankyou\">\n"+"<div class=\"modal-middle\">\n"+"<h2 translate=\"subscribe_congrats\"></h2>\n"+"<div class=\"text\">\n"+"<p translate=\"subscribe_congrats_benefits_tip\" translate-values=\"(vm.channel.profile || vm.channel.profileUrlString)\"></p>\n"+"<p translate=\"subscribe_congrats_managing_tip\"></p>\n"+"</div>\n"+"</div>\n"+"<div class=\"modal-bottom\">\n"+"<button class=\"btn btn-confirm\" type=\"button\" ng-click=\"vm.closeThankyou();\">{{ '_awesome' | translate }}!</button>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- 5 -->\n"+"<div class=\"spanel spanel-cancel\">\n"+"<div class=\"modal-middle\">\n"+"<h2 translate=\"are_you_sure\"></h1>\n"+"<p class=\"copy\" ng-if=\"::vm.subscription.subscriptionPlatform.manager\" translate=\"managed_through\" translate-values=\"{source : vm.subscription.subscriptionPlatform.manager}\"></p>\n"+"\n"+"<p translate=\"benefits\" class=\"benefits\" translate-values=\"{name: vm.subscription.channelName, date: vm.subscription.paidThroughDate}\"></p>\n"+"\n"+"<div class=\"exit-app\">\n"+"<div class=\"left-option\">\n"+"<a translate=\"_yes\" ng-click=\"vm.cancelSubscription()\" class=\"btn take-btn\"></a>\n"+"<p ng-if=\"::vm.subscription.subscriptionPlatform.name === 'YouNow.com'\"class=\"desire\" translate=\"cancel_my_sub\"></p>\n"+"<p ng-if=\"::vm.subscription.subscriptionPlatform.name !== 'YouNow.com'\" class=\"desire\" translate=\"take_me\" translate-values=\"{destination :vm.params.sub.subscriptionPlatform.manager}\"></p>\n"+"</div>\n"+"<div class=\"right-option\">\n"+"<a translate=\"_no\" class=\"take-btn grey-btn btn\" ng-click=\"$dismiss()\"></a>\n"+"<p class=\"desire\" translate=\"keep_sub\"></p>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/trap-modal/trap-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/trap-modal/trap-modal.tpl.html","<div class=\"modal-body\">\n"+"<button aria-hidden=\"true\" class=\"pull-right close\" ng-click=\"$dismiss()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"<div class=\"cover-photo \" ng-attr-style=\"{{::background(user.userId,'Cover')}}\">\n"+"<div class=\"little-fade\"></div>\n"+"</div>\n"+"<div class=\"bottom-cont \">\n"+"<div class=\"top-half\">\n"+"<div class=\"left pull-left\">\n"+"<a href=\"javascript:void(0)\" style=\"display: inline-block; cursor: default;\">\n"+"<div class=\"thumb circle-thumb\">\n"+"<div class=\"thumb-image\" ng-style=\"{background:'url('+nothumb+') no-repeat'}\">\n"+"<div class=\"thumb-image-wide\">\n"+"<img class=\"thumb-image-img\" ng-src=\"{{ thumbPath + '/' + user.userId + '/' + user.userId + '.jpg' }}\" ng-alt=\"{{::user.profile}}\" fallback-src=\"{{::nothumb}}\"/>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</a>\n"+"</div>\n"+"<div class=\"right pull-left\">\n"+"<div class=\"top pull-left\">\n"+"<div class=\"level pull-left\">\n"+"<div class=\"star pull-left\" ng-style=\"::{ background: 'url(/images/groups/icon_pro_levelsm.png) no-repeat'}\"></div>\n"+"<div class=\"level-num pull-left\">\n"+"<span>{{user.level}}</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"channel-name-cont pull-left\">\n"+"<span class=\"channel-name short-text\">{{(user.profile || user.profileUrlString)}}</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"bottom pull-left\">\n"+"<div>\n"+"<span class=\"heading\">{{heading}}</span>\n"+"</div>\n"+"<div ng-show=\"subheading\">\n"+"<span class=\"subheading\">{{subheading}}</span>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"bottom-half\">\n"+"<div class=\"call-to-action\">\n"+"<div ng-if=\"fanTrap\" class=\"fan-button-placeholder\" track-source=\"{{(source?source:'trap-modal')}}\">\n"+"<div fan-button channel=\"user\" callback=\"$close\"></div>\n"+"</div>\n"+"<button ng-if=\"loginTrap\" ng-click=\"showLoginModal('',(source?source:'trap-modal'))\" class=\"btn btn-confirm\" translate=\"signin_to_younow\"></button>\n"+"<div class=\"no-thanks pull-right\" ng-click=\"$dismiss()\">\n"+"<span translate=\"no_thanks\"></span>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/user-badge/user-badge-dynamic.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/user-badge/user-badge-dynamic.tpl.html","<span class=\"crowns-container\">\n"+"<span class=\"user-crowns ynbadge\" ng-if=\"(subscriptionType != '0' && subscriptionType != undefined)\">\n"+"<img ng-src=\"{{::config.settings.BadgeBaseUrl}}/{{broadcast.broadcaster.userId}}/{{(subscriptionType || 1)}}/badge@2x.png\" />\n"+"</span>\n"+"<span class=\"user-crowns\" ng-if=\"( !subscriptionType && level && (!role || role==3) )\">\n"+"<i class=\"ynicon ynicon-level\"></i>\n"+"</span>\n"+"<span class=\"user-crowns\" ng-if=\"( role == 2 )\">\n"+"<i class=\"ynicon ynicon-ambass\"></i>\n"+"</span>\n"+"<span class=\"user-crowns\" ng-if=\"::( (role == 4 || role == 5 || role == 6) && level)\">\n"+"<span ng-if=\"(role == 4)\">\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"</span>\n"+"<span ng-if=\"(role == 5)\">\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"</span>\n"+"<span ng-if=\"(role == 6)\">\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"</span>\n"+"</span>\n"+"<span class=\"user-crowns\" ng-if=\"( (role == 7 || role == 8 || role == 9) && level)\">\n"+"<span ng-if=\"(role == 7)\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"</span>\n"+"<span ng-if=\"(role == 8)\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"</span>\n"+"<span ng-if=\"(role == 9)\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"</span>\n"+"</span>\n"+"<span class=\"user-crowns\" ng-if=\"( (role == 10 || role == 11 || role == 12) && level)\">\n"+"<span ng-if=\"(role == 10)\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"</span>\n"+"<span ng-if=\"(role == 11)\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"</span>\n"+"<span ng-if=\"(role == 12)\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"</span>\n"+"</span>\n"+"\n"+"<span ng-if=\"(role != 1 && level > 1)\" class=\"chat-name level\"><b>{{level}}</b></span>\n"+"</span>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/user-badge/user-badge.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/user-badge/user-badge.tpl.html","<span class=\"crowns-container\">\n"+"<span class=\"user-crowns ynbadge\" ng-if=\"::(subscriptionType != '0' || (broadcast.broadcaster.isSubscribable&&(channelId==broadcast.broadcaster.userId)))\">\n"+"<img ng-src=\"{{::config.settings.BadgeBaseUrl}}/{{::broadcast.broadcaster.userId}}/{{::(subscriptionType != '0' ? subscriptionType : 1 )}}/badge@2x.png\" />\n"+"</span>\n"+"<span class=\"user-crowns\" ng-if=\"::( subscriptionType == '0' && level && (role == '0' || role==3) )\">\n"+"<i class=\"ynicon ynicon-level\"></i>\n"+"</span>\n"+"<span class=\"user-crowns\" ng-if=\"::( role == 2 )\">\n"+"<i class=\"ynicon ynicon-ambass\"></i>\n"+"</span>\n"+"<span class=\"user-crowns\" ng-if=\"::( (role == 4 || role == 5 || role == 6) && level)\">\n"+"<span ng-if=\"::(role == 4)\">\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"</span>\n"+"<span ng-if=\"::(role == 5)\">\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"</span>\n"+"<span ng-if=\"::(role == 6)\">\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"</span>\n"+"</span>\n"+"<span class=\"user-crowns\" ng-if=\"::( (role == 7 || role == 8 || role == 9) && level)\">\n"+"<span ng-if=\"::(role == 7)\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"</span>\n"+"<span ng-if=\"::(role == 8)\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"</span>\n"+"<span ng-if=\"::(role == 9)\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"</span>\n"+"</span>\n"+"<span class=\"user-crowns\" ng-if=\"::( (role == 10 || role == 11 || role == 12) && level)\">\n"+"<span ng-if=\"::(role == 10)\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"</span>\n"+"<span ng-if=\"::(role == 11)\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"</span>\n"+"<span ng-if=\"::(role == 12)\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-icon-whale\"></i>\n"+"</span>\n"+"</span>\n"+"\n"+"<span ng-if=\"::(role != 1 && level > 1)\" class=\"chat-name level\"><b>{{::level}}</b></span>\n"+"</span>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/verification-modal/cc-verified.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/verification-modal/cc-verified.tpl.html","<div class=\"modal-body verification-result\">\n"+"<button aria-hidden=\"true\" class=\"close\" ng-click=\"cancel()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"<div class=\"heading\">\n"+"<div class=\"title\">\n"+"<span class=\"is-verified\">You're Verified!</span>\n"+"<div class=\"is-not-verified\">\n"+"We could not match the amounts to verify your credit card.\n"+"</div>\n"+"<span class=\"is-not-verified text-muted\">\n"+"Please contact support and we will verify you another way quickly.\n"+"</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"verified-result-icon is-verified\"><i class=\"ynicon ynicon-icon-verify\"></i></div>\n"+"<div class=\"verified-result-icon is-not-verified\"><i class=\"ynicon ynicon-icon-verify-reject\"></i></div>\n"+"<button class=\"btn btn-confirm is-verified\" ng-click=\"continue()\">\n"+"<span>Ok, Great!</span>\n"+"</button>\n"+"<button class=\"btn btn-confirm is-not-verified\" ng-click=\"contactSupport()\">\n"+"<span>Contact Support</span>\n"+"</button>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/verification-modal/verification-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/verification-modal/verification-modal.tpl.html","<div class=\"modal-body wide\">\n"+"<div class=\"panel-four active\">\n"+"<div class=\"heading\">\n"+"<div class=\"title\" ng-if=\"verification.verifyNow\">Get Verified!</div>\n"+"<div class=\"title\" ng-if=\"!verification.verifyNow\">Purchase Successful!</div>\n"+"<div class=\"subtitle\">\n"+"<span ng-show=\"verification.verifyNow && data.source.source === 'buyBars'\">\n"+"For your security we want to verify your card to purchase more bars.\n"+"</span>\n"+"<span ng-show=\"verification.verifyNow && data.source.source === 'subscribeModal'\">\n"+"For your security we want to verify your card to purchase a Subscription.\n"+"</span>\n"+"<span ng-if=\"source === 'buyBars'\">\n"+"<b>Your Bars:</b>\n"+"<span class=\"icon\"><img ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/icons_v3/icon_bar_sm.png\"/></span>\n"+"<b>{{session.user.vault.webBars}}</b>\n"+"</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"content\" ng-show=\"verification.verifyNow\" ng-class=\"{'animate-in': verification.animate}\">\n"+"<div class=\"pull-left verification-image\">\n"+"<span class=\"verification-image-number\">{{::verification.sale.high | currency}}</span>\n"+"<img ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/bars/icons/verify_848_blank.png\">\n"+"</div>\n"+"<div class=\"desc\">\n"+"You were charged a little bit less than the normal {{::verification.sale.originalAmount | currency}} price â somewhere between {{::verification.sale.low | currency}} and {{::verification.sale.high | currency}}. We need you to confirm how much (it wont end in $.99).\n"+"Open up your credit cardâs online statement and look for a charge from YOUNOW (or BRAINTREE.COM) in your recent activity.\n"+"In most cases charges show up instantly, but if you donât see it, wait a bit (in some cases, up to a day),\n"+"<span ng-if=\"::data.source.source === 'buyBars'\">and come back to verify your bars before you purchase any more.</span>\n"+"<span ng-if=\"::data.source.source === 'subscribeModal'\">and come back to verify your card before purchasing.</span>\n"+"</div>\n"+"<div class=\"verification-info\">\n"+"<div class=\"pull-left\">\n"+"<i class=\"ynicon ynicon-icon-verify\"></i>\n"+"</div>\n"+"<div class=\"verification-info-copy pull-left\">One discounted charge was made on {{::verification.sale.date | date : 'M/d/yy'}} to your {{::verification.sale.paymentType}} ending in x{{::verification.sale.last4}}</div>\n"+"</div>\n"+"<div ng-class=\"{failed: verification.failed}\">\n"+"<div class=\"verification-failed\">\n"+"<div>The amount you entered before, {{::verification.amountAttempted | currency}}, does not match. Try again.</div>\n"+"<div><b>Be careful! This is your last try to submit an amount for verification.</b></div>\n"+"<div class=\"text-muted\">(Double check your credit card, you can always come back later)</div>\n"+"</div>\n"+"<div class=\"verification-form pull-left\">\n"+"<form name=\"verificationForm\" novalidate>\n"+"<label>Amount of Charge</label>\n"+"<span><b>$</b></span>\n"+"<input\n"+"type=\"number\"\n"+"name=\"verificationAmount\"\n"+"ng-model=\"verification.amount\"\n"+"ng-pattern=\"'^[0-9]+(\.[0-9]{1,2})?$'\"\n"+"ng-required=\"true\"\n"+"tooltip=\"{{verification.invalid}}\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-placement=\"bottom error\"\n"+"yn-enter=\"verifyAmount()\"\n"+"id=\"verification-tooltip\">\n"+"</form>\n"+"</div>\n"+"</div>\n"+"<button class=\"btn btn-confirm verify-now-btn pull-left\" ng-disabled=\"verification.processing\" ng-click=\"verifyAmount()\">\n"+"<span ng-if=\"!verification.processing\">Verify Amount</span>\n"+"<div class=\"loader-light\" ng-if=\"verification.processing\"></div>\n"+"</button>\n"+"</div>\n"+"<div class=\"content\" ng-if=\"!verification.verifyNow\">\n"+"<div class=\"pull-left verification-image\">\n"+"<span class=\"verification-image-number\">{{::verification.sale.high | currency}}</span>\n"+"<img ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/bars/icons/verify_848_blank.png\">\n"+"</div>\n"+"<div class=\"desc verification-sale\">\n"+"<div>For your protection, we need you to verify your credit card before you can purchase any more bars.</div>\n"+"<div>Its simple, but you will need access to your online credit card statement so you can verify the last charge we made to your card.</div>\n"+"</div>\n"+"<button class=\"btn btn-cancel pull-left\" ng-click=\"cancel()\">\n"+"<span>Verify Later</span>\n"+"</button>\n"+"<button class=\"btn btn-confirm pull-left\" ng-click=\"verification.verifyNowState()\">\n"+"<span>Verify Now</span>\n"+"</button>\n"+"</div>\n"+"<div class=\"bottom\">\n"+"<div class=\"contact-support\">\n"+"<span class=\"text-muted\">Need help?</span>\n"+"<a ng-href=\"https://younow.zendesk.com/anonymous_requests/new?ticket[subject]=Credit+Card+Verification&ticket[ticket_form_id]=67755&ticket[fields][24381885]={{::verification.sale.last4}}&ticket[fields][23984596]={{::session.user.fullName}}\" target=\"_blank\">Contact support</a>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/video-player/advanced-options.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/video-player/advanced-options.tpl.html","<div class=\"advanced-options dropup\" dropdown>\n"+"<button\n"+"class=\"btn btn-transparent dropdown-toggle\"\n"+"ng-click=\"vm.RTCbroadcastSettings.microphoneSetup()\"\n"+"tooltip=\"Advanced Options\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-append-to-body=\"true\"\n"+"dropdown-toggle>\n"+"<i class=\"ynicon ynicon-settings\"></i>\n"+"</button>\n"+"<ul class=\"dropdown-menu\" role=\"menu\">\n"+"<i class=\"ynicon ynicon-carrot-dwn\"></i>\n"+"<li ng-click=\"toggleExternalStreaming()\">\n"+"<i ng-if=\"externalStreaming.active\" class=\"ynicon ynicon-icon-check\"></i> Use external streaming tool\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/video-player/mini-overlay.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/video-player/mini-overlay.tpl.html","<div class=\"mini-overlay\" ng-class=\"state\" ng-click=\"captureMoment()\">\n"+"<!-- hover name -->\n"+"<div class=\"display-name\" ng-click=\"openProfileSummary($event)\">\n"+"<span class=\"short-text\">{{profile}}</span>\n"+"</div>\n"+"<!-- connecting -->\n"+"<div class=\"connecting-guest\" ng-if=\"guest\">\n"+"<div class=\"headline\">Connecting...</div>\n"+"<div class=\"profile-images\">\n"+"<div class=\"circle-thumb thumb\" ng-style=\"{'background-image': 'url('+config.imageApis.thumb + '/' + guest.userId + '/' + guest.userId + '.jpg' +')'}\"></div>\n"+"<img class=\"conn-gif-below\" ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/animations/guest_con_2x.gif\"/>\n"+"</div>\n"+"<div class=\"guest-info\">\n"+"<div class=\"short-text\">{{guest.name}}</div>\n"+"<div class=\"short-text location\">{{guest.formattedLocation}}</div>\n"+"</div>\n"+"</div>\n"+"<!-- inviting -->\n"+"<div class=\"inviting-guest\" ng-if=\"guest\">\n"+"<div class=\"headline\">Inviting Guest...</div>\n"+"<div class=\"profile-images\">\n"+"<div class=\"circle-thumb thumb\" ng-style=\"{'background-image': 'url('+config.imageApis.thumb + '/' + guest.userId + '/' + guest.userId + '.jpg' +')'}\"></div>\n"+"<img class=\"conn-gif-below\" ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/animations/guest_con_2x.gif\"/>\n"+"</div>\n"+"<div class=\"guest-info\">\n"+"<div class=\"short-text\">{{guest.name}}</div>\n"+"<div class=\"short-text location\">{{guest.formattedLocation}}</div>\n"+"</div>\n"+"<button class=\"btn btn-cancel\" ng-click=\"cancelInvite()\">Cancel</button>\n"+"</div>\n"+"<!-- inviting request from broadcaster for guest-->\n"+"<div class=\"inviting-request\" ng-if=\"session.user.userId > 0\">\n"+"<div class=\"headline\">Guest Broadcast</div>\n"+"<div class=\"profile-images\">\n"+"<div class=\"circle-thumb thumb\" ng-style=\"::{'background-image': 'url('+config.imageApis.thumb + '/' + swf.broadcast.userId + '/' + swf.broadcast.userId + '.jpg' +')'}\"></div>\n"+"<div class=\"circle-thumb thumb\" ng-style=\"::{'background-image': 'url('+config.imageApis.thumb + '/' + session.user.userId + '/' + '.jpg' +')'}\"></div>\n"+"<img class=\"conn-gif\" ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/animations/guest_con2_2x_360.gif\"/>\n"+"</div>\n"+"<div class=\"guest-info\">\n"+"<div class=\"short-text\">{{swf.broadcast.profile}}</div>\n"+"<div>invited you to go live!</div>\n"+"</div>\n"+"<div class=\"actions\" ng-class=\"{ 'asking-for-permissions': loadingPermissions}\">\n"+"<button class=\"btn btn-primary\" ng-click=\"acceptInvite()\">\n"+"<span>Go Live</span>\n"+"<div class=\"loader-light\"></div>\n"+"</button>\n"+"<button class=\"btn btn-important\" ng-click=\"declineInvite()\">Decline</button>\n"+"<div class=\"permissions-tip\">Allow permissions via the dialog at the top of your browser to continue.</div>\n"+"</div>\n"+"</div>\n"+"<!-- inviting request for the audience-->\n"+"<div class=\"inviting-guest-audience\" ng-if=\"pendingGuest.guest\">\n"+"<div class=\"headline\">Inviting Guest...</div>\n"+"<div class=\"profile-images\">\n"+"<div class=\"circle-thumb thumb\" ng-style=\"{'background-image': 'url('+config.imageApis.thumb + '/' + pendingGuest.guest.userId + '/' + pendingGuest.guest.userId + '.jpg' +')'}\"></div>\n"+"<img class=\"conn-gif-below\" ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/animations/guest_con_2x.gif\"/>\n"+"</div>\n"+"<div class=\"guest-info\">\n"+"<div class=\"short-text\">{{pendingGuest.guest.name}}</div>\n"+"<div class=\"short-text location\">{{pendingGuest.guest.formattedLocation}}</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- invite declined -->\n"+"<div class=\"invite-declined\" ng-if=\"pendingGuest.guest\">\n"+"<div class=\"headline\">Invite Declined</div>\n"+"<div class=\"profile-images\">\n"+"<div class=\"circle-thumb thumb\" ng-style=\"{'background-image': 'url('+config.imageApis.thumb + '/' + pendingGuest.guest.userId + '/' + pendingGuest.guest.userId + '.jpg' +')'}\"></div>\n"+"<div class=\"declined-icon\"><i class=\"ynicon ynicon-bc-call-cancel\"></i></div>\n"+"</div>\n"+"<div class=\"guest-info\">\n"+"<div class=\"short-text\">{{pendingGuest.guest.name}}</div>\n"+"<div class=\"short-text location\">{{pendingGuest.guest.formattedLocation}}</div>\n"+"</div>\n"+"</div>\n"+"<!-- invite timeout with retry option -->\n"+"<div class=\"invite-timeout\" ng-if=\"pendingGuest.guest\">\n"+"<div class=\"headline\">No Response</div>\n"+"<div class=\"profile-images\">\n"+"<div class=\"circle-thumb thumb\" ng-style=\"{'background-image': 'url('+config.imageApis.thumb + '/' + pendingGuest.guest.userId + '/' + pendingGuest.guest.userId + '.jpg' +')'}\"></div>\n"+"<div class=\"declined-icon\"><i class=\"ynicon ynicon-bc-call-cancel\"></i></div>\n"+"</div>\n"+"<div class=\"guest-info\">\n"+"<div class=\"short-text\">{{pendingGuest.guest.name}}</div>\n"+"<div class=\"short-text location\">{{pendingGuest.guest.formattedLocation}}</div>\n"+"</div>\n"+"<div class=\"actions\">\n"+"<button class=\"btn btn-confirm\" ng-click=\"retryDirectInvite()\">Try Again</button>\n"+"<button class=\"btn btn-cancel\" ng-click=\"cancelRetry()\">Cancel</button>\n"+"</div>\n"+"</div>\n"+"<!-- ending-guest -->\n"+"<div class=\"ending-guest\" ng-if=\"guest\">\n"+"<div class=\"headline\">Drop Guest?</div>\n"+"<div class=\"profile-images\">\n"+"<div class=\"circle-thumb thumb\" ng-style=\"{'background-image': 'url('+config.imageApis.thumb + '/' + guest.userId + '/' + guest.userId + '.jpg' +')'}\"></div>\n"+"<div class=\"cancel\"><i class=\"ynicon ynicon-bc-call-cancel\"></i></div>\n"+"</div>\n"+"<div class=\"guest-info\">\n"+"<div class=\"short-text\">{{guest.name}}</div>\n"+"</div>\n"+"<div class=\"actions\">\n"+"<button class=\"btn btn-important\" ng-click=\"confirmDrop()\">Drop</button>\n"+"<button class=\"btn btn-cancel\" ng-click=\"cancelDrop()\">Cancel</button>\n"+"</div>\n"+"</div>\n"+"<!-- swapping guest -->\n"+"<div class=\"swapping-guest\" ng-if=\"guest\">\n"+"<div class=\"headline\">\n"+"Make <span class=\"short-text\">{{pendingGuest.guest.name}}</span> live?\n"+"</div>\n"+"<div class=\"profile-images\">\n"+"<div class=\"circle-thumb thumb\" ng-style=\"{'background-image': 'url('+config.imageApis.thumb + '/' + pendingGuest.guest.userId + '/' + pendingGuest.guest.userId + '.jpg' +')'}\"></div>\n"+"</div>\n"+"<div class=\"guest-info\">\n"+"<div class=\"short-text\">{{pendingGuest.guest.name}}</div>\n"+"<div class=\"short-text\">{{pendingGuest.guest.formattedLocation}}</div>\n"+"</div>\n"+"<div class=\"actions\">\n"+"<button class=\"btn btn-primary\" ng-click=\"confirmSwap()\">Make Live</button>\n"+"<button class=\"btn btn-cancel\" ng-click=\"cancelSwap($event)\">Cancel</button>\n"+"</div>\n"+"</div>\n"+"<!-- connecting overlay -->\n"+"<h3>Going Live...</h3>\n"+"\n"+"<!-- background overlays -->\n"+"<!-- connecting broadcaster for guest -->\n"+"<div class=\"connecting-broadcaster\">\n"+"<div class=\"background-thumb\" ng-style=\"{'background-image': 'url(' + config.imageApis.broadcast + '/' + swf.broadcast.broadcastId + '/' + swf.broadcast.broadcastId + '.jpg)'}\"></div>\n"+"<div class=\"spinning-loader\"></div>\n"+"</div>\n"+"<!-- connecting guest for broadcaster -->\n"+"<div class=\"connecting-broadcaster-guest\" ng-if=\"guest\">\n"+"<div class=\"background-thumb\" ng-if=\"::guest.snapshotUrl\" ng-style=\"{'background-image': 'url('+ config.settings.GuestSnapshotsBaseUrl + guest.snapshotUrl+')'}\"></div>        <div class=\"background-thumb\" ng-if=\"::!guest.snapshotUrl\" ng-style=\"{'background-image': 'url('+config.imageApis.thumb + '/' + guest.userId + '/' + guest.userId + '.jpg' +')'}\"></div>\n"+"</div>\n"+"<!-- inviting guest for broadcaster -->\n"+"<div class=\"inviting-broadcaster-guest\" ng-if=\"guest\">\n"+"<div class=\"background-thumb\" ng-style=\"{'background-image': 'url('+config.settings.ServerCDNBaseUrl + '/channelId=' + (guest.userId||0) +')'}\"></div>\n"+"</div>\n"+"<!-- inviting guest request for guest and audience -->\n"+"<div class=\"inviting-guest-bg\" ng-if=\"pendingGuest.guest\">\n"+"<div class=\"background-thumb\" ng-if=\"::pendingGuest.guest.snapshotUrl\" ng-style=\"{'background-image': 'url('+ config.settings.GuestSnapshotsBaseUrl + pendingGuest.guest.snapshotUrl+')'}\"></div>\n"+"<div class=\"background-thumb\" ng-if=\"::!pendingGuest.guest.snapshotUrl\" ng-style=\"{'background-image': 'url('+config.imageApis.thumb + '/' + pendingGuest.guest.userId + '/' + pendingGuest.guest.userId + '.jpg' +')'}\"></div>\n"+"</div>\n"+"<!-- base backdrop -->\n"+"<div class=\"backdrop-overlay\"></div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/video-player/player-footer.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/video-player/player-footer.tpl.html","<div id=\"playerfooter\">\n"+"<div class=\"player-toolbar\" ng-if=\"!vm.swf.settingUpBroadcast\">\n"+"<div class=\"player-toolbar-left\" ng-disabled=\"vm.swf.bootingFlash || vm.swf.eob\">\n"+"<div id=\"toolbar-like-button\"\n"+"class=\"toolbar-button\"\n"+"ng-class=\"{'like-busy':vm.cooldown}\"\n"+"ng-click=\"vm.doLike($event)\"\n"+"tooltip-html-unsafe=\"{{vm.likeTooltip()}}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-append-to-body=\"true\">\n"+"<img ng-src=\"{{::vm.config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/player-footer/like-{{vm.swf.fullscreenActive ? 'fullscreen' : 'normal'}}.{{vm.cooldown ? 'gif' : 'png'}}\">\n"+"<span class=\"toolbar-count\">{{vm.swf.broadcast.likes}}</span>\n"+"</div>\n"+"<div id=\"broadcast-shares\"\n"+"class=\"toolbar-button\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip=\"+{{vm.swf.broadcast.user_shares}}\"\n"+"ng-click=\"vm.openSnapshot();\">\n"+"<i class=\"ynicon ynicon-btn-bc-share-android\"></i>\n"+"<span class=\"toolbar-count\">{{vm.swf.broadcast.shares}}</span>\n"+"</div>\n"+"<div id=\"broadcast-moment\"\n"+"class=\"toolbar-button\"\n"+"ng-disabled=\"!vm.swf.thumbs || vm.swf.thumbs.length<8\"\n"+"ng-click=\"vm.momentCapture();\">\n"+"<i class=\"ynicon ynicon-momentcreation\"></i>\n"+"<span class=\"toolbar-count\">{{vm.swf.broadcast.numMomentsCreated}}</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"player-toolbar-right\" ng-disabled=\"vm.swf.bootingFlash || vm.swf.eob\">\n"+"<div ng-if=\"vm.swf.currentSession.isBroadcasting && vm.swf.broadcast.userId == vm.session.user.userId\" class=\"toolbar-button dropup\" dropdown>\n"+"<button\n"+"class=\"btn btn-transparent dropdown-toggle\"\n"+"tooltip=\"Change Chatmode\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-append-to-body=\"true\"\n"+"dropdown-toggle>\n"+"<span class=\"ynicon ynicon-chat\" ng-class=\"vm.muteIcon()\"></span>\n"+"</button>\n"+"<ul class=\"dropdown-menu\" role=\"menu\">\n"+"<i class=\"ynicon ynicon-carrot-dwn\"></i>\n"+"<li>\n"+"<a href ng-click=\"vm.swf.lowLevel(0)\">Unrestricted Chat <i ng-if=\"vm.swf.currentLowLevel == 0\" class=\"ynicon ynicon-icon-check\"></i></a>\n"+"</li>\n"+"<li>\n"+"<a href ng-click=\"vm.swf.lowLevel(5)\">Level 5 Chat <i ng-if=\"vm.swf.currentLowLevel == 5\" class=\"ynicon ynicon-icon-check\"></i></a>\n"+"</li>\n"+"<li>\n"+"<a href ng-click=\"vm.swf.lowLevel(10)\">Level 10 Chat <i ng-if=\"vm.swf.currentLowLevel == 10\" class=\"ynicon ynicon-icon-check\"></i></a>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"<!-- stats for nerds -->\n"+"<div class=\"stats-for-nerds\" dropdown on-toggle=\"vm.getWebrtcStats(open)\" ng-if=\"vm.swf.currentSession.isBroadcasting && vm.swf.broadcast.userId == vm.session.user.userId && vm.session.user.partner == 1\">\n"+"<button\n"+"class=\"btn btn-transparent dropdown-toggle\"\n"+"dropdown-toggle>\n"+"<i class=\"ynicon ynicon-carrot-dwn\"></i>\n"+"<i class=\"ynicon ynicon-icon-quality\"></i>\n"+"</button>\n"+"<ul class=\"dropdown-menu\" role=\"menu\">\n"+"<i class=\"ynicon ynicon-carrot-up\"></i>\n"+"<div class=\"nerd-stats-container\">\n"+"<div class=\"nerd-stats-row\" ng-if=\"::!vm.isFirefox\">\n"+"<div>\n"+"<b>Video Resolution:</b> {{vm.forNerds.resolution}}\n"+"</div>\n"+"<div>\n"+"<b>Network Type:</b> {{vm.forNerds.network}}\n"+"</div>\n"+"</div>\n"+"<div class=\"nerd-stats-row\">\n"+"<div>\n"+"<b>Audio Bit Rate:</b> {{vm.forNerds.abr}}\n"+"</div>\n"+"<div>\n"+"<b>Video Bit Rate:</b> {{vm.forNerds.vbr}}\n"+"</div>\n"+"</div>\n"+"<div class=\"nerd-stats-row\">\n"+"<div>\n"+"<b>Video RTT:</b> {{vm.forNerds.vRTT}}\n"+"</div>\n"+"<div>\n"+"<b>Frame Rate:</b> {{vm.forNerds.framerate}}\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"nerd-stats-bot-row\">\n"+"<bitrate-line ng-if=\"vm.forNerds\" bps=\"vm.forNerds.bps\"></bitrate-line>\n"+"<div>\n"+"<a class=\"btn btn-cancel\" href=\"mailto:youremailaddress\">Email Stats</a>\n"+"</div>\n"+"</div>\n"+"</ul>\n"+"</div>\n"+"<span class=\"ynicon ynicon-time\"></span>\n"+"<span ng-if=\"!vm.swf.settingUpBroadcast\">{{playerFooter.niceLength}}</span>\n"+"<span ng-if=\"vm.swf.settingUpBroadcast\">00:00</span>\n"+"<span class=\"ynicon ynicon-viewers\"></span>\n"+"<span>{{vm.swf.broadcast.viewers}}</span>\n"+"<!-- normal mute control -->\n"+"<span class=\"mute-container\" ng-if=\"!vm.showFfMuteControls()\" ng-disabled=\"vm.externalStreaming.streaming ||vm.externalStreaming.active \">\n"+"<div class=\"volume-bar clickable\" ng-mousemove=\"vm.slideVolume($event)\" ng-mouseup=\"vm.setVolume($event)\">\n"+"<span class=\"volume-background\">\n"+"<span class=\"volume-foreground\" ng-style=\"{'width': vm.getVolume()+'px'}\"></span>\n"+"<span class=\"volume-slider\"></span>\n"+"</span>\n"+"</div>\n"+"<span\n"+"id=\"volume-icon\"\n"+"class=\"volume-icon ynicon ynicon-icon-mic clickable\"\n"+"ng-class=\"vm.muteIcon()\"\n"+"ng-click=\"vm.setMute()\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip=\"{{'player_youre_muted' | translate }}\">\n"+"</span>\n"+"</span>\n"+"<!-- ff mute control -->\n"+"<!-- <span class=\"mute-container\" ng-if=\"vm.showFfMuteControls()\">\n"+"<span\n"+"id=\"volume-icon\"\n"+"class=\"volume-icon ynicon ynicon-icon-mic clickable\"\n"+"ng-class=\"{'ynicon-icon-mic-off': !vm.ffStreamAudioEnabled, 'ynicon-icon-mic': vm.ffStreamAudioEnabled}\"\n"+"ng-disabled=\"vm.externalStreaming.streaming || vm.externalStreaming.streaming\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip=\"{{'player_youre_muted' | translate }}\">\n"+"</span>\n"+"</span> -->\n"+"<div ng-click=\"vm.togglePlayerFullscreen();\" class=\"pull-right clickable fullscreen-toggle\">\n"+"<i class=\"ynicon ynicon-icon-openexternal\"></i>\n"+"</div>\n"+"</div><!-- / toolbar left -->\n"+"</div><!-- / toolbar -->\n"+"<!-- WEBRTC SETTINGUP TOOLBAR -->\n"+"<div id=\"settingup-toolbar\" ng-if=\"vm.swf.settingUpBroadcast\">\n"+"<!-- firefox selection -->\n"+"<div class=\"toolbar-center toolbar-firefox\" ng-disabled=\"vm.webRtc.settings.state == 'connecting'\" ng-if=\"::vm.isFirefox\">\n"+"<div class=\"toolbar-button\">\n"+"<button class=\"btn btn-confirm\" ng-click=\"vm.RTCbroadcastSettings.ffMediaSetup()\" ng-disabled=\"vm.externalStreaming.active\" translate=\"golive_camera_setup\">\n"+"</button>\n"+"</div>\n"+"<!-- <div class=\"firefox-volume-controls\"> -->\n"+"<!-- <div class=\"mute-container toolbar-button\">\n"+"<button class=\"btn btn-transparent\">\n"+"<i class=\"ynicon ynicon-icon-mic\" ng-class=\"vm.muteIcon()\"></i>\n"+"</button>\n"+"</div> -->\n"+"<!-- <div class=\"volume-bar clickable toolbar-button\" ng-mousemove=\"vm.slideVolume($event)\" ng-mouseup=\"vm.setVolume($event)\">\n"+"<span class=\"volume-background\">\n"+"<span class=\"volume-foreground\" ng-style=\"{'width': vm.getVolume()+'px'}\"></span>\n"+"<span class=\"volume-slider\"></span>\n"+"</span>\n"+"</div> -->\n"+"<!-- </div> -->\n"+"</div>\n"+"<!-- normal selection -->\n"+"<div class=\"toolbar-center\" ng-disabled=\"vm.webRtc.settings.state == 'connecting'\" ng-if=\"::!vm.isFirefox\">\n"+"<div class=\"toolbar-button dropup\" dropdown>\n"+"<button\n"+"class=\"btn btn-transparent dropdown-toggle\"\n"+"ng-click=\"vm.RTCbroadcastSettings.cameraSetup()\"\n"+"ng-disabled=\"vm.externalStreaming.active\"\n"+"tooltip=\"{{ 'golive_change_camera' | translate }}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-append-to-body=\"true\"\n"+"dropdown-toggle>\n"+"<i class=\"ynicon ynicon-broadcast\"></i>\n"+"<span translate=\"golive_camera\"></span>\n"+"</button>\n"+"<ul class=\"dropdown-menu\" role=\"menu\">\n"+"<i class=\"ynicon ynicon-carrot-dwn\"></i>\n"+"<li ng-repeat=\"camera in vm.cameraOptions track by $index\">\n"+"<a href ng-click=\"vm.RTCbroadcastSettings.setCamera(camera)\">{{camera.label}} <i ng-if=\"camera.enabled\" class=\"ynicon ynicon-icon-check\"></i></a>\n"+"</li>\n"+"<div ng-if=\"(!vm.cameraOptions || vm.cameraOptions.length === 0)\" class=\"loader\"></div>\n"+"</ul>\n"+"</div>\n"+"<div class=\"mute-container toolbar-button dropup\" dropdown>\n"+"<button\n"+"class=\"btn btn-transparent dropdown-toggle\"\n"+"ng-click=\"vm.RTCbroadcastSettings.microphoneSetup()\"\n"+"ng-disabled=\"vm.externalStreaming.active\"\n"+"tooltip=\"{{ 'golive_change_mic' | translate }}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-append-to-body=\"true\"\n"+"dropdown-toggle>\n"+"<i class=\"ynicon ynicon-icon-mic\" ng-class=\"vm.muteIcon()\"></i>\n"+"<span translate=\"golive_mic\"></span>\n"+"</button>\n"+"<ul class=\"dropdown-menu\" role=\"menu\">\n"+"<i class=\"ynicon ynicon-carrot-dwn\"></i>\n"+"<li ng-repeat=\"microphone in vm.microphoneOptions track by $index\">\n"+"<a href ng-click=\"vm.RTCbroadcastSettings.setMicrophone(microphone)\">{{microphone.label}} <i ng-if=\"microphone.enabled\" class=\"ynicon ynicon-icon-check\"></i></a>\n"+"</li>\n"+"<div ng-if=\"(!vm.microphoneOptions || vm.microphoneOptions.length === 0)\" class=\"loader\"></div>\n"+"</ul>\n"+"</div>\n"+"<!-- <div class=\"volume-bar clickable toolbar-button\" ng-mousemove=\"vm.slideVolume($event)\" ng-mouseup=\"vm.setVolume($event)\">\n"+"<span class=\"volume-background\">\n"+"<span class=\"volume-foreground\" ng-style=\"{'width': vm.getVolume()+'px'}\"></span>\n"+"<span class=\"volume-slider\"></span>\n"+"</span>\n"+"</div> -->\n"+"</div>\n"+"<advanced-options></advanced-options>\n"+"\n"+"</div>\n"+"</div>\n"+"<div class=\"playerfooterExtra\">\n"+"<div class=\"left\">\n"+"<strong>Current chat cooldown:</strong>\n"+"<span>{{vm.swf.broadcast.currentChatCooldown}}</span>\n"+"</div>\n"+"<div class=\"right\">\n"+"<strong>Minimum Chat level:</strong>\n"+"<span>{{vm.swf.broadcast.minChatLevel}}</span>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"vm.isPremium\" class=\"playerfooterStats\">\n"+"<div class=\"container\">\n"+"<div class=\"left\">\n"+"Workers:\n"+"</div>\n"+"<div class=\"right\">\n"+"<span>{{vm.swf.stats.workers}}</span>/<span>{{vm.swf.stats.workersMax}}</span>\n"+"</div>\n"+"<canvas id=\"workersStats\" width=\"148\" height=\"60\"></canvas>\n"+"</div>\n"+"<div class=\"container\">\n"+"<div class=\"left\">\n"+"Accounts:\n"+"</div>\n"+"<div class=\"right\">\n"+"<span>{{vm.swf.stats.accounts}}</span>\n"+"</div>\n"+"<canvas id=\"accountsStats\" width=\"148\" height=\"60\"></canvas>\n"+"</div>\n"+"<div class=\"container\">\n"+"<div class=\"left\">\n"+"Coins:\n"+"</div>\n"+"<div class=\"right\">\n"+"<span>{{vm.swf.stats.coins}}</span>\n"+"</div>\n"+"<canvas id=\"coinsStats\" width=\"148\" height=\"60\"></canvas>\n"+"</div>\n"+"<div class=\"container\">\n"+"<div class=\"left\">\n"+"Channels:\n"+"</div>\n"+"<div class=\"right\">\n"+"<span>{{vm.swf.stats.pusherChannels}}</span>\n"+"</div>\n"+"<canvas id=\"channelsStats\" width=\"148\" height=\"60\"></canvas>\n"+"</div>\n"+"<div class=\"container\">\n"+"<div class=\"left\">\n"+"Active streams:\n"+"</div>\n"+"<div class=\"right\">\n"+"{{vm.swf.stats.streams}}\n"+"</div>\n"+"</div>\n"+"<div class=\"container\">\n"+"<div class=\"left\">\n"+"Sent likes:\n"+"</div>\n"+"<div class=\"right\">\n"+"{{vm.swf.stats.likes}}\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"<div ng-if=\"vm.isPremium\" class=\"playerfooterControl\">\n"+"<div class=\"header\">\n"+"<div ng-click=\"vm.changeTab('Likebot');\" ng-class=\"{selected: vm.activeTab === 'Likebot'}\">\n"+"Likebot\n"+"</div>\n"+"<div ng-click=\"vm.changeTab('Viewerbot');\" ng-class=\"{selected: vm.activeTab === 'Viewerbot'}\">\n"+"Viewerbot\n"+"</div>\n"+"<div ng-click=\"vm.changeTab('Fanbot');\" ng-class=\"{selected: vm.activeTab === 'Fanbot'}\">\n"+"Fanbot\n"+"</div>\n"+"<div ng-click=\"vm.changeTab('Chatbot');\" ng-class=\"{selected: vm.activeTab === 'Chatbot'}\">\n"+"Chatbot\n"+"</div>\n"+"<div ng-click=\"vm.changeTab('Giftbot');\" ng-class=\"{selected: vm.activeTab === 'Giftbot'}\">\n"+"Giftbot\n"+"</div>\n"+"<div ng-click=\"vm.changeTab('Sharebot');\" ng-class=\"{selected: vm.activeTab === 'Sharebot'}\">\n"+"Sharebot\n"+"</div>\n"+"<div ng-if=\"vm.isAdmin\" ng-click=\"vm.changeTab('Switcher');\" ng-class=\"{selected: vm.activeTab === 'Switcher'}\">\n"+"Switch identity\n"+"</div>\n"+"</div>\n"+"<div class=\"content\">\n"+"<div ng-if=\"vm.activeTab === 'Likebot'\">\n"+"<div class=\"text\">\n"+"The likebot will add a designated count of likes to the current broadcast. The system will check if the amount of likes is possible and send you a response if it is. When not the system will send as much likes as possible.\n"+"</div>\n"+"<div class=\"label\">Amount:</div>\n"+"<div class=\"input\"><input ng-model=\"vm.likeAmount\" type=\"text\"></div>\n"+"<div class=\"notice\">The amount of likes to add.</div>\n"+"<div class=\"error\">{{vm.likeAmountError}}</div>\n"+"<div class=\"label\">Time:</div>\n"+"<div class=\"input\"><input ng-model=\"vm.likeTime\" type=\"text\"></div>\n"+"<div class=\"notice\">If left empty the likes will be sent as fast as possible.</div>\n"+"<div class=\"error\">{{vm.likeTimeError}}</div>\n"+"<div style=\"clear: both;\"></div>\n"+"<div class=\"submit\">\n"+"<button ng-click=\"vm.addLikesSubmit()\" class=\"btn btn-small btn-confirm\">\n"+"Add likes\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"vm.activeTab === 'Viewerbot'\">\n"+"<div class=\"text\">\n"+"The viewerbot will add viewers to the current broadcast. The system will send random users.\n"+"</div>\n"+"<div class=\"label\">Amount:</div>\n"+"<div class=\"input\"><input ng-model=\"vm.viewerAmount\" type=\"text\"></div>\n"+"<div class=\"notice\">The amount of viewers to add.</div>\n"+"<div class=\"error\">{{vm.viewerAmountError}}</div>\n"+"<div class=\"label\">Time:</div>\n"+"<div class=\"input\"><input ng-model=\"vm.viewerTime\" type=\"text\"></div>\n"+"<div class=\"notice\">The time the viewers should stay.</div>\n"+"<div class=\"error\">{{vm.viewerTimeError}}</div>\n"+"<div class=\"label\">Arrival time:</div>\n"+"<div class=\"input\"><input ng-model=\"vm.viewerArrival\" type=\"text\"></div>\n"+"<div class=\"notice\">Leave empty for smooth arrival.</div>\n"+"<div class=\"error\">{{vm.viewerArrivalError}}</div>\n"+"<div class=\"label\">Leave time:</div>\n"+"<div class=\"input\"><input ng-model=\"vm.viewerRemoval\" type=\"text\"></div>\n"+"<div class=\"notice\">Leave empty for smooth leaving.</div>\n"+"<div class=\"error\">{{vm.viewerRemovalError}}</div>\n"+"<div style=\"clear: both;\"></div>\n"+"<div class=\"submit\">\n"+"<button ng-click=\"vm.addViewersSubmit()\" class=\"btn btn-small btn-confirm\">\n"+"Add viewers\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"vm.activeTab === 'Fanbot'\">\n"+"<div class=\"text\">\n"+"You can remove and add fans with the fanbot. Just put in the desired amount to add or remove and click on the corresponding button.\n"+"</div>\n"+"<div class=\"label\">Amount:</div>\n"+"<div class=\"input\"><input ng-model=\"vm.fanAmount\" type=\"text\"></div>\n"+"<div class=\"notice\">The amount of fans to add or remove.</div>\n"+"<div class=\"error\">{{vm.fanAmountError}}</div>\n"+"<div class=\"label\">Time:</div>\n"+"<div class=\"input\"><input ng-model=\"vm.fanTime\" type=\"text\"></div>\n"+"<div class=\"notice\">The time desired to add or remove fans.</div>\n"+"<div class=\"error\">{{vm.fanTimeError}}</div>\n"+"<div style=\"clear: both;\"></div>\n"+"<div class=\"submit\">\n"+"<button ng-click=\"vm.addFansSubmit()\" class=\"btn btn-small btn-confirm\">\n"+"Add fans\n"+"</button>\n"+"<button ng-click=\"vm.removeFansSubmit()\" class=\"btn btn-small btn-confirm\">\n"+"Remove fans\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"vm.activeTab === 'Chatbot'\">\n"+"<div class=\"text\">\n"+"The chatbot will spam chat messages in the current broadcast. You can seperate the messages with a newline and they will be chosen randomly.\n"+"</div>\n"+"<div class=\"label\">Amount:</div>\n"+"<div class=\"input\"><input ng-model=\"vm.chatAmount\" type=\"text\"></div>\n"+"<div class=\"notice\">The amount of chat messages to spam.</div>\n"+"<div class=\"error\">{{vm.chatAmountError}}</div>\n"+"<div class=\"label\">Time:</div>\n"+"<div class=\"input\"><input ng-model=\"vm.chatTime\" type=\"text\"></div>\n"+"<div class=\"notice\">The time in which the spam should be sent.</div>\n"+"<div class=\"error\">{{vm.chatTimeError}}</div>\n"+"<div class=\"label\">Messages:</div>\n"+"<div class=\"input\"><textarea ng-model=\"vm.chatMessages\"></textarea></div>\n"+"<div class=\"notice\">The messages to spam</div>\n"+"<div class=\"error\">{{vm.chatMessagesError}}</div>\n"+"<div style=\"clear: both;\"></div>\n"+"<div class=\"label\">Replacement:</div>\n"+"<div class=\"input\">\n"+"<select ng-model=\"vm.replacementKey\">\n"+"<option value=\"none\">none</option>\n"+"<option ng-repeat=\"key in vm.replacementKeys\" value=\"{{key}}\">{{key}}</option>\n"+"</select>\n"+"</div>\n"+"<div style=\"clear: both;\"></div>\n"+"<div class=\"submit\">\n"+"<button ng-click=\"vm.chatSubmit()\" class=\"btn btn-small btn-confirm\">\n"+"Spam!\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"vm.activeTab === 'Giftbot'\">\n"+"</div>\n"+"<div ng-if=\"vm.activeTab === 'Sharebot'\">\n"+"<div class=\"text\">\n"+"The sharebot will invite fans of bots to this broadcast. Just enter the wanted amount and time in which they should invite. Please consider: Every bot can only invite once!\n"+"</div>\n"+"<div class=\"label\">Amount:</div>\n"+"<div class=\"input\"><input ng-model=\"vm.sharesAmount\" type=\"text\"></div>\n"+"<div class=\"notice\">The amount of shares to add.</div>\n"+"<div class=\"error\">{{vm.sharesAmountError}}</div>\n"+"<div class=\"label\">Time:</div>\n"+"<div class=\"input\"><input ng-model=\"vm.sharesTime\" type=\"text\"></div>\n"+"<div class=\"notice\">If left empty the shares will be sent as fast as possible.</div>\n"+"<div class=\"error\">{{vm.sharesTimeError}}</div>\n"+"<div style=\"clear: both;\"></div>\n"+"<div class=\"submit\">\n"+"<button ng-click=\"vm.addSharesSubmit()\" class=\"btn btn-small btn-confirm\">\n"+"Add shares\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"vm.activeTab === 'Switcher' && vm.isAdmin\">\n"+"<button ng-click=\"vm.refreshIdentities()\" class=\"btn btn-small btn-confirm\">\n"+"Refresh\n"+"</button>\n"+"<div class=\"identities\">\n"+"<div ng-repeat=\"identity in vm.identities\" ng-click=\"vm.changeIdentity(identity)\">\n"+"<img ng-src=\"{{identity.profilePicture}}\" />\n"+"<div class=\"name\"><span>{{identity.level}}</span><strong>{{identity.username}}</strong></div>\n"+"<div class=\"coins\"><i class=\"yncoin ynicon ynicon-coins\"></i><span>{{identity.coins}}</span></div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/video-player/player-header.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/video-player/player-header.tpl.html","<div id=\"playerheader\">\n"+"<a\n"+"class=\"thumb circle-thumb pull-left\"\n"+"ng-if=\"!vm.swf.settingUpBroadcast && !vm.swf.currentSession.isBroadcasting\"\n"+"ng-style=\"{ background: 'url(' + vm.thumb + '/' + vm.broadcast.broadcaster.userId + '/' + vm.broadcast.broadcaster.userId + '.jpg' + '), url({{vm.noThumb}}) no-repeat', 'background-size': 'cover' }\"\n"+"ng-href=\"/{{vm.broadcast.broadcaster.profile}}\" prevent-default\n"+"ng-click=\"vm.openBroadcasterProfile(vm.broadcast.broadcaster.userId)\">\n"+"<span class=\"ynbadge\" ng-if=\"vm.broadcast.broadcaster.isSubscribable && !vm.swf.settingUpBroadcast\">\n"+"<img ng-src=\"{{::vm.config.settings.BadgeBaseUrl}}/{{vm.broadcast.broadcaster.userId}}/1/badge@2x.png\" />\n"+"</span>\n"+"</a>\n"+"<a\n"+"class=\"thumb circle-thumb pull-left\"\n"+"ng-if=\"vm.swf.settingUpBroadcast || vm.swf.currentSession.isBroadcasting\"\n"+"ng-style=\"{ background: 'url(' + vm.thumb + '/' + vm.session.user.userId + '/' + vm.session.user.userId + '.jpg' + '), url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover' }\"\n"+"ng-href=\"/{{vm.session.user.profile}}\" prevent-default\n"+"ng-click=\"vm.openBroadcasterProfile(vm.session.user.userId)\">\n"+"<span class=\"ynbadge\" ng-if=\"vm.broadcast.broadcaster.isSubscribable && !vm.swf.settingUpBroadcast\">\n"+"<img ng-src=\"{{::vm.config.settings.BadgeBaseUrl}}/{{vm.broadcast.broadcaster.userId}}/1/badge@2x.png\" />\n"+"</span>\n"+"</a>\n"+"<!-- viewer view -->\n"+"<div class=\"broadcast-info transline-mid\" ng-if=\"!vm.swf.settingUpBroadcast && !vm.swf.currentSession.isBroadcasting && vm.broadcast.broadcaster.userId != vm.session.user.userId\">\n"+"<a\n"+"class=\"broadcaster-name ellipsify\"\n"+"ng-href=\"/{{vm.broadcast.broadcaster.profile}}\" prevent-default\n"+"ng-click=\"vm.openBroadcasterProfile(vm.broadcast.broadcaster.userId)\">\n"+"<i class=\"ynicon ynicon-level\"></i>\n"+"<span>{{vm.Math.floor(vm.broadcast.broadcaster.userlevel)}} {{vm.broadcast.broadcaster.username}}</span>\n"+"</a>\n"+"<div class=\"broadcaster-tag ellipsify transline-top\" ng-if=\"!vm.broadcast.broadcaster.isSubscribable || !vm.session.fanStatus[vm.broadcast.broadcaster.userId]\">\n"+"<span translate=\"_on\"></span>\n"+"<a\n"+"ng-href=\"/explore/{{vm.broadcast.broadcaster.tags[0]}}\" prevent-default\n"+"ng-click=\"vm.Api.goto('explore/' + vm.broadcast.broadcaster.tags[0])\">\n"+"#{{vm.broadcast.broadcaster.tags[0]}}\n"+"</a>\n"+"</div>\n"+"<div class=\"broadcaster-buttons\">\n"+"<div class=\"fan-button-placeholder\" track-source=\"BROADCAST\">\n"+"<div fan-button size=\"small\" channel=\"vm.broadcast.broadcaster.user\"></div>\n"+"</div>\n"+"<div class=\"fan-button-placeholder subscribe-button-placeholder\" track-source=\"BROADCAST\">\n"+"<div subscribe-button size=\"small\" channel=\"vm.broadcast.broadcaster.user\"></div>\n"+"</div>\n"+"</div>\n"+"<!--<div class=\"broadcaster-description line-clamp transline-top\">\n"+"\n"+"<span ng-bind-html=\"vm.broadcast.broadcaster.user.description\">\n"+"</span>\n"+"</div>-->\n"+"\n"+"</div>\n"+"<div class=\"broadcast-info\" ng-if=\"(vm.broadcast.broadcaster.userId==vm.session.user.userId) && !vm.swf.settingUpBroadcast\">\n"+"<!-- mode -->\n"+"<div class=\"broadcast-info submode\" ng-if=\"vm.broadcast.broadcaster.isSubscribable && !vm.newRank\">\n"+"<div class=\"top\">\n"+"<span class=\"stitle\" translate=\"golive_chatmode\"></span>\n"+"<span class=\"switch s{{ vm.broadcast.chatMode==1 ? 'on' : 'off' }}\" ng-click=\"vm.chatModeToggle()\">\n"+"<span class=\"sknob\"></span>\n"+"</span>\n"+"<span class=\"sinfo\">{{ (vm.broadcast.chatMode==1 ? 'turn_on' : 'turn_off') | translate }}</span>\n"+"</div>\n"+"<div class=\"bot\">\n"+"({{ vm.swf.broadcast.subscribersCount }} {{ (vm.swf.broadcast.subscribersCount!=1 ? 'subscribers' : 'subscriber') | translate }})\n"+"</div>\n"+"</div>\n"+"<!-- rank -->\n"+"<div class=\"broadcaster-setup-description\" ng-if=\"(!vm.broadcast.broadcaster.isSubscribable || vm.newRank)\">\n"+"<div class=\"short-text\">{{vm.session.user.fullName}}</div>\n"+"<span class=\"short-text\">,</span>\n"+"<span class=\"short-text user-rank\">{{'_you_are' | translate }} {{vm.broadcast.broadcaster.tagRank}} </span>\n"+"<span class=\"broadcaster-tags short-text\"> {{'_on' | translate }} </span>\n"+"<a\n"+"class=\"broadcaster-tags short-text\"\n"+"ng-repeat=\"tag in vm.broadcast.broadcaster.tags\"\n"+"ng-href=\"/explore/{{tag}}\" prevent-default\n"+"ng-click=\"vm.Api.goto('explore/' + tag)\">\n"+"#{{tag}}\n"+"</a>\n"+"</div>\n"+"\n"+"\n"+"</div>\n"+"<!-- END broadcaster view pre-EOB -->\n"+"\n"+"\n"+"<!-- broadcaster setup -->\n"+"<div class=\"broadcast-info\" ng-if=\"vm.swf.settingUpBroadcast\">\n"+"<div class=\"broadcaster-setup-description\">\n"+"<div class=\"short-text\">{{vm.session.user.fullName}}</div>\n"+"<span class=\"setup-copy short-text\">, {{'player_get_ready_for_your_broadcast' | translate }}</span>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<!--<div id=\"playersystem\">\n"+"<span class=\"sys-message\" ng-bind-html=\"vm.systemMessage.message.trustedMessage\"></span>\n"+"<a ng-if=\"vm.systemMessage.message.webButton.action\" ng-href=\"{{vm.systemMessage.message.webButton.action}}\" target=\"_blank\" class=\"cta-button\">{{vm.systemMessage.message.webButton.caption}}</a>\n"+"</div>-->\n");}]);angular.module("angularjsapp/src/app/components/video-player/player-overlay.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/video-player/player-overlay.tpl.html","<div class=\"transition-overlay\" ng-if=\"vm.swf.loadingBroadcasterState\">\n"+"<!-- dissapate dead broadcast -->\n"+"<div ng-if=\"vm.swf.loadingBroadcasterState === 'PREV' && !vm.swf.settingUpBroadcast \" class=\"thumbnail-pulse\">\n"+"<div class=\"thumb circle-thumb\" ng-style=\"{ background: 'url({{::vm.thumb}}' + '/' + vm.broadcast.broadcaster.userId + '/' +  vm.broadcast.broadcaster.userId + '.jpg' + ') no-repeat, url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover' }\"></div>\n"+"</div>\n"+"<!-- buffering new broadcast -->\n"+"<div ng-if=\"(vm.swf.playState === 'BUFFERING' || vm.swf.loadingBroadcasterState === 'NEXT') && !vm.swf.settingUpBroadcast\" class=\"thumbnail-pulse\" style=\"background: url({{::vm.pulseAnimation}}) no-repeat; background-position: center;\">\n"+"<div class=\"thumb circle-thumb\" ng-style=\"{ background: 'url({{::vm.thumb}}' + '/' + vm.broadcast.broadcaster.userId + '/' + vm.broadcast.broadcaster.userId + '.jpg' + ') no-repeat, url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover' }\"></div>\n"+"</div>\n"+"<!-- reconnect screen -->\n"+"<div ng-if=\"vm.swf.playState === 'RECONNECT' && !vm.swf.settingUpBroadcast\" class=\"thumbnail-pulse\" style=\"background: url({{::vm.pulseAnimation}}) no-repeat; background-position: center;\">\n"+"<div class=\"thumb circle-thumb\" ng-style=\"{ background: 'url({{::vm.thumb}}' + '/' + vm.broadcast.broadcaster.userId + '/' + vm.broadcast.broadcaster.userId + '.jpg' + ') no-repeat, url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover' }\"></div>\n"+"</div>\n"+"<!-- buffering your own broadcast -->\n"+"<div ng-if=\"vm.swf.settingUpBroadcast\" class=\"thumbnail-pulse\" style=\"background: url({{::vm.pulseAnimation}}) no-repeat; background-position: center;\">\n"+"<div class=\"thumb circle-thumb\" ng-style=\"{ background: 'url({{::vm.thumb}}' + '/' + vm.session.user.userId + '/' + vm.session.user.userId + '.jpg' + ') no-repeat, url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover' }\"></div>\n"+"</div>\n"+"<div class=\"user-info\" ng-if=\"vm.swf.settingUpBroadcast\"><i class=\"ynicon ynicon-level\"></i>{{::vm.session.user.level}} {{::vm.session.user.profile}}</div>\n"+"<div class=\"user-info\" ng-if=\"!vm.swf.settingUpBroadcast\"><i class=\"ynicon ynicon-level\"></i>{{vm.Math.floor(vm.broadcast.broadcaster.userlevel)}} {{vm.broadcast.broadcaster.profile}}</div>\n"+"<div class=\"transition-text\" ng-if=\"vm.swf.loadingBroadcasterState === 'NEXT' || vm.swf.loadingBroadcasterState === 'WAITING'\" translate=\"player_buffering\"></div>\n"+"<div class=\"transition-text\" ng-if=\"vm.swf.loadingBroadcasterState === 'RECONNECT'\" translate=\"player_reconnecting\"></div>\n"+"</div>\n"+"<div class=\"message-overlay\" ng-if=\"vm.swf.settingUpBroadcast\">\n"+"<!-- canceling the setup -->\n"+"<button class=\"cancel btn btn-important active\" ng-click=\"vm.cancelBroadcast()\" translate=\"_cancel\"></button>\n"+"\n"+"<!-- screen sharing -->\n"+"<screen-sharing-selector class=\"select-screen-settingup\"></screen-sharing-selector>\n"+"</div>\n"+"\n"+"<!-- dropping state -->\n"+"<div ng-if=\"vm.swf.broadcast.userId === vm.session.user.userId && !vm.swf.settingUpBroadcast\">\n"+"<!-- broadcaster -->\n"+"<div ng-if=\"vm.guestService.overlayStates.guest != 'connected' && vm.guestService.overlayStates.guest != 'dropping' && vm.guestService.overlayStates.guest != 'swapping'\">\n"+"<div class=\"live-text active\" translate=\"player_youarelive\"></div>\n"+"<button class=\"btn btn-important active\" ng-click=\"vm.dropBroadcast(true)\" translate=\"_end\"></button>\n"+"<div class=\"drop-broadcast-confirmation\" ng-class=\"{active: vm.dropBroadcastActive}\">\n"+"<div translate=\"player_areyousure\"></div>\n"+"<button class=\"btn btn-transparent\" ng-click=\"vm.dropBroadcast()\" translate=\"_yes\"></button>\n"+"<button class=\"btn btn-transparent\" ng-click=\"vm.dropBroadcast(false)\" translate=\"_no\"></button>\n"+"</div>\n"+"</div>\n"+"\n"+"<screen-sharing-selector class=\"select-screen\"></screen-sharing-selector>\n"+"\n"+"<!-- guest -->\n"+"<div ng-if=\"vm.guestService.overlayStates.guest == 'connected' && vm.guestService.overlayStates.guest != 'dropping' && vm.guestService.overlayStates.guest != 'swapping'\">\n"+"<div class=\"live-text-guest active short-text\">{{vm.guestService.guest.name}}</div>\n"+"<div class=\"guest-actions active\">\n"+"<button class=\"btn btn-primary\" ng-click=\"vm.randomGuest()\" ng-if=\"vm.guestService.guestListCount >= 5\">\n"+"<span translate=\"_random\"></span>\n"+"<i class=\"ynicon ynicon-bc-call\"></i>\n"+"</button>\n"+"<button class=\"btn btn-important\" ng-click=\"vm.dropGuestAsBroadcaster()\" translate=\"_drop\"></button>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- guest dropping state -->\n"+"<div ng-if=\"vm.guestService.guest.userId == vm.session.user.userId && !vm.swf.fullscreenActive\">\n"+"<div class=\"live-text-guest active\" translate=\"player_youarelive\"></div>\n"+"<button class=\"drop-guest btn btn-important active\" ng-click=\"vm.dropBroadcastActive = true\" translate=\"_end\"></button>\n"+"<div class=\"guest drop-broadcast-confirmation\" ng-class=\"{active: vm.dropBroadcastActive}\">\n"+"<div translate=\"player_areyousure\"></div>\n"+"<button class=\"btn btn-transparent\" ng-click=\"vm.dropGuestAsGuest()\" translate=\"_yes\"></button>\n"+"<button class=\"btn btn-transparent\" ng-click=\"vm.dropGuestAsGuestCancel()\" translate=\"_no\"></button>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- top -->\n"+"<div class=\"system-message\" collapse=\"!vm.systemMessage.hasMessage || vm.systemMessage.dismissed\" ng-if=\"!vm.swf.settingUpBroadcast\">\n"+"<span class=\"sys-message\" ng-bind-html=\"vm.systemMessage.message.trustedMessage\"></span>\n"+"<a ng-if=\"vm.systemMessage.message.webButton.action\" ng-href=\"{{vm.systemMessage.message.webButton.action}}\" target=\"_blank\" class=\"cta-button\">{{vm.systemMessage.message.webButton.caption}}</a>\n"+"<div class=\"close-button\" ng-click=\"vm.dismissSystemMessage()\"><i class=\"ynicon ynicon-close\"></i></div>\n"+"</div>\n"+"\n"+"<!-- gifts -->\n"+"<div class=\"premium-overlay\" ng-click=\"vm.captureMoment($event)\" ng-class=\"{'overlay-fade': vm.gift == false || vm.swf.settingUpBroadcast || vm.suppressGiftOverlays(), 'overlay-fade-in': vm.gift !== false && !vm.swf.settingUpBroadcast && !vm.suppressGiftOverlays(), 'premium-small': vm.swf.sharePanelOpen}\">\n"+"<div class=\"gift-overlay\" ng-class=\"{ 'subscription-gift-overlay' : vm.gift.info.itemGameType=='SUBSCRIPTION', 'tipbig' : (vm.gift.info.itemGameType=='TIP' && (vm.gift.value>1000)) }\">\n"+"\n"+"<!-- subscription -->\n"+"<div class=\"subscription-gift\" ng-if=\"vm.gift.info.itemGameType=='SUBSCRIPTION'\">\n"+"<span\n"+"class=\"gbroadcaster thumb\"\n"+"ng-style=\"{ background: 'url({{::vm.thumb}}' + '/' + vm.swf.broadcast.userId + '/' + vm.swf.broadcast.userId  + '.jpg' + '), url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover' }\">\n"+"<span class=\"ynbadge\">\n"+"<img ng-src=\"{{::vm.config.settings.BadgeBaseUrl}}/{{::vm.swf.broadcast.userId}}/1/badge@2x.png\" />\n"+"</span>\n"+"</span>\n"+"<span class=\"gspace thumb\" ng-class=\"{ 'animateSubs ' : vm.gift.animateSubs }\"></span>\n"+"<span\n"+"class=\"guser thumb\"\n"+"ng-style=\"{ background: 'url({{::vm.thumb}}' + '/' + vm.gift.userId + '/' + vm.gift.userId + '.jpg' + '), url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover' }\">\n"+"</span>\n"+"</div>\n"+"<!-- animation -->\n"+"<div class=\"premium-gift animation-gift\" ng-if=\"vm.gift.info.itemGameType=='ANIMATION'\">\n"+"<div class=\"thumb\" ng-style=\"{ background: 'url({{::vm.thumb}}' + '/' + vm.gift.userId + '/' + vm.gift.userId + '.jpg' + '), url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover' }\"></div>\n"+"<span class=\"gift-message\">{{vm.gift.comment}}</span>\n"+"<img ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{vm.swf.giftSkus[vm.gift.giftId]}}/web_animation.gif\">\n"+"</div>\n"+"<!-- tip-big -->\n"+"<div class=\"premium-gift\" ng-if=\"vm.gift.info.itemGameType=='TIP' && vm.gift.value>1000\">\n"+"<img ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{vm.swf.giftSkus[vm.gift.giftId]}}/web_animation{{vm.gift.globalSpenderRank>0 ? '_vip' : ''}}.gif\" style=\"width: auto;height: 230px;margin-left: -77px;margin-top: -94px;margin-bottom: -70px;\">\n"+"</div>\n"+"<!-- tip -->\n"+"<div class=\"premium-gift\" ng-if=\"vm.gift.info.itemGameType=='TIP' && vm.gift.value<=1000\">\n"+"<img ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{vm.swf.giftSkus[vm.gift.giftId]}}/web_overlay{{vm.gift.globalSpenderRank>0 ? '_vip' : ''}}.png\">\n"+"<div\n"+"class=\"thumb\"\n"+"ng-class=\"{ 'visibilityhidden' : !vm.isProposalGift(vm.gift.giftId) }\"\n"+"ng-style=\"{ background: 'url({{::vm.thumb}}' + '/' + vm.giftUserId_lastingValue + '/' + vm.giftUserId_lastingValue + '.jpg' + '), url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover' }\">\n"+"</div>\n"+"</div>\n"+"<!-- image == NOT subscription, animation, tip -->\n"+"<div class=\"premium-gift\" ng-if=\"!(vm.gift.info.itemGameType=='SUBSCRIPTION') && !(vm.gift.info.itemGameType=='ANIMATION') && !(vm.gift.info.itemGameType=='TIP')\">\n"+"<img ng-src=\"{{::vm.swf.giftsAssetsBaseUrl}}{{vm.swf.giftSkus[vm.gift.giftId]}}/web_overlay.png\">\n"+"<div\n"+"class=\"thumb\"\n"+"ng-class=\"{ 'visibilityhidden' : !vm.isProposalGift(vm.gift.giftId) }\"\n"+"ng-style=\"{ background: 'url({{::vm.thumb}}' + '/' + vm.giftUserId_lastingValue + '/' + vm.giftUserId_lastingValue + '.jpg' + '), url({{::vm.noThumb}}) no-repeat', 'background-size': 'cover' }\">\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- message -->\n"+"<span class=\"gift-message\" ng-if=\"vm.gift.info.itemGameType!='ANIMATION'\">{{vm.gift.comment}}</span>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- super messages -->\n"+"<div class=\"supermessage-container\" ng-if=\"(!vm.gift || vm.gift.value<1000) && !vm.swf.settingUpBroadcast\">\n"+"<div class=\"supermessage\" ng-repeat=\"superMessage in vm.superMessages\" ng-style=\"{animation: superMessage.animation}\" next-super-message on-animation-end=\"vm.superMessageRemoval(elem)\" ng-class=\"::{'fullscreen-supermessage': vm.swf.fullscreenActive}\">\n"+"<img class=\"thumb-large\" ng-src=\"{{::(vm.config.imageApis.thumb + '/' + superMessage.userId + '/' + superMessage.userId + '.jpg')}}\">\n"+"<div class=\"supermessage-text\">\n"+"<div class=\"supermessage-name\">\n"+"{{::superMessage.name}}\n"+"<span class=\"ynbadge\"><img ng-src=\"{{::vm.config.settings.BadgeBaseUrl}}/{{::vm.swf.broadcast.userId}}/1/badge@2x.png\" /><span>\n"+"</div>\n"+"<span class=\"message\">{{::superMessage.comment}}</span>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<!-- feature announcements -->\n"+"<!--<div ng-if=\"::vm.momentEducationOn\">\n"+"<div class=\"feature-announcement\" ng-if=\"vm.swf.broadcast.userId !== vm.session.user.userId && !vm.swf.settingUpBroadcast && vm.swf.thumbs.length>=4\">\n"+"<i class=\"ynicon ynicon-momentcreation\"></i>\n"+"<span class=\"feature-copy\" translate=\"moment_creation_education\"></span>\n"+"</div>\n"+"</div>-->\n"+"\n");}]);angular.module("angularjsapp/src/app/components/video-player/screen-sharing-selector.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/video-player/screen-sharing-selector.tpl.html","<div ng-if=\"::(vm.browserName === 'Electron')\" dropdown on-toggle=\"vm.onShareScreenToggle(open)\">\n"+"<button class=\"btn btn-confirm\" ng-click=\"vm.fetchScreens()\" dropdown-toggle>\n"+"<span translate=\"desktop_share_button\"></span>\n"+"<i class=\"ynicon ynicon-carrot-dwn\"></i>\n"+"</button>\n"+"<ul class=\"dropdown-menu mini-scroll\" role=\"menu\" only-scroll ng-if=\"vm.shareableOptions.screens\">\n"+"<li>\n"+"<a href ng-click=\"vm.shareScreen(vm.shareableOptions.none)\">\n"+"<i ng-if=\"::(vm.shareableOptions.none.enabled)\" class=\"ynicon ynicon-icon-check\"></i> {{::vm.shareableOptions.none.name}}\n"+"</a>\n"+"</li>\n"+"<li class=\"header\" ng-if=\"::(vm.osName !== 'Windows')\">\n"+"<a href ng-click=\"$event.stopPropagation()\" translate=\"desktop_section_ios\"></a>\n"+"</li>\n"+"<li ng-repeat=\"device in vm.shareableOptions.devices track by $id(device)\" ng-if=\"vm.shareableOptions.devices.length > 0\">\n"+"<a href ng-click=\"vm.shareScreen(device)\">\n"+"<i ng-if=\"::device.enabled\" class=\"ynicon ynicon-icon-check\"></i> {{::device.name}}\n"+"</a>\n"+"</li>\n"+"<li ng-if=\"vm.shareableOptions.devices.length === 0\">\n"+"<a href ng-click=\"$event.stopPropagation()\" translate=\"desktop_ios_suggestion\"></a>\n"+"</li>\n"+"<li class=\"header\">\n"+"<a href ng-click=\"$event.stopPropagation()\" translate=\"desktop_section_screens\"></a>\n"+"</li>\n"+"<li ng-repeat=\"screen in vm.shareableOptions.screens track by $id(screen)\">\n"+"<a href ng-click=\"vm.shareScreen(screen)\" tooltip-html-unsafe=\"<img src='{{::screen.thumbnail}}'>\" tooltip-placement=\"right\" tooltip-append-to-body=\"true\">\n"+"<i ng-if=\"::screen.enabled\" class=\"ynicon ynicon-icon-check\"></i> {{::screen.name}}\n"+"</a>\n"+"</li>\n"+"<li class=\"header\" ng-if=\"::(vm.shareableOptions.cameras.length > 0)\">\n"+"<a href ng-click=\"$event.stopPropagation()\" translate=\"desktop_section_cameras\"></a>\n"+"</li>\n"+"<li ng-repeat=\"camera in vm.shareableOptions.cameras track by $id(camera)\">\n"+"<a href ng-click=\"vm.shareScreen(camera)\" >\n"+"<i ng-if=\"::camera.enabled\" class=\"ynicon ynicon-icon-check\"></i> {{::camera.name}}\n"+"</a>\n"+"</li>\n"+"<li class=\"header\">\n"+"<a href ng-click=\"$event.stopPropagation()\" translate=\"desktop_section_webapps\"></a>\n"+"</li>\n"+"<li ng-repeat=\"launcher in vm.shareableOptions.launchers track by $id(launcher)\">\n"+"<a href ng-click=\"vm.shareScreen(launcher)\" >\n"+"<i ng-if=\"::launcher.enabled\" class=\"ynicon ynicon-icon-check\"></i> {{::launcher.name}}\n"+"</a>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/components/vip-modal/vip-welcome-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/vip-modal/vip-welcome-modal.tpl.html","<div class=\"modal-body\">\n"+"<h1>HELLO</h1>\n"+"<span ng-bind-html=\"::message\"></span>\n"+"</div>\n"+"<div class=\"modal-footer\">\n"+"<button class=\"confirm btn btn-primary\" type=\"button\" ng-click=\"$dismiss()\" translate=\"_OK\"></button>\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/components/vip-modal/welcome-modal.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/vip-modal/welcome-modal.tpl.html","<div class=\"modal-body\">\n"+"<!-- mvip stands for \"modal vip\" -->\n"+"<div class=\"mvip-heading\">\n"+"<img class=\"mvip-heading-shield\" ng-src=\"{{::vm.config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/vip/welcome/heading-shield.png\" />\n"+"<img class=\"mvip-heading-close\" ng-click=\"vm.closeModal();\" ng-src=\"{{::vm.config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/vip/welcome/close.png\" />\n"+"</div>\n"+"<div class=\"mvip-body\">\n"+"<div class=\"mvip-title\" translate=\"{{ vm.message=='welcomeBack' ? 'vip_welcome_back' : 'vip_welcome_title' }}\">\n"+"</div>\n"+"<div class=\"mvip-text\" translate=\"vip_welcome_subtitle\">\n"+"</div>\n"+"<div class=\"mvip-points\">\n"+"<div class=\"mvip-li\">\n"+"<div class=\"mvip-li-icon\"><img ng-src=\"{{::vm.config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/vip/welcome/bar.png\" /></div>\n"+"<div class=\"mvip-li-text\" translate=\"vip_welcome_1\"></div>\n"+"</div>\n"+"<div class=\"mvip-li\">\n"+"<div class=\"mvip-li-icon\"><img ng-src=\"{{::vm.config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/vip/welcome/coin.png\" /></div>\n"+"<div class=\"mvip-li-text\" translate=\"vip_welcome_2\"></div>\n"+"</div>\n"+"<div class=\"mvip-li\">\n"+"<div class=\"mvip-li-icon\"><img ng-src=\"{{::vm.config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/vip/welcome/red-crown.png\" /></div>\n"+"<div class=\"mvip-li-text\" translate=\"vip_welcome_3\"></div>\n"+"</div>\n"+"<div class=\"mvip-li\">\n"+"<div class=\"mvip-li-icon\"><img ng-src=\"{{::vm.config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/vip/welcome/green-star.png\" /></div>\n"+"<div class=\"mvip-li-text\" translate=\"vip_welcome_4\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"mvip-text\" translate=\"vip_welcome_plus\">\n"+"</div>\n"+"<form class=\"mvip-buttons\" name=\"vipEmail\" ng-submit=\"vm.submitEmail(vipEmail)\" novalidate>\n"+"<input  class=\"mvip-button mvip-input form-control\"\n"+"placeholder=\"Your email address\"\n"+"name=\"email\"\n"+"type=\"email\"\n"+"ng-validate\n"+"required\n"+"ng-model=\"vm.session.user.email\"\n"+"ng-pattern=\"emailRegex\"\n"+"tooltip=\"Please enter valid email\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-placement=\"top error\"\n"+"vip-validate />\n"+"<button class=\"mvip-button mvip-submit\" type=\"submit\" {{ vm.submitting ? 'disabled' : '' }} translate=\"_continue\"></div>\n"+"</form>\n"+"</div>\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/components/youtube-subscribe/youtube-subscribe.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/components/youtube-subscribe/youtube-subscribe.tpl.html","<div ng-attr-style=\"width:425px;background:url('{{base}}/images/back_pop_youtube.jpg') no-repeat;height:210px;text-align:center;border:0px;\">\n"+"\n"+"<!-- header //-->\n"+"<div style=\"height:30px;\"></div>\n"+"<!-- end header //-->\n"+"\n"+"<div style=\"height:55px;\">\n"+"</div>\n"+"\n"+"<div ng-if=\"channel\" class=\"g-ytsubscribe\" data-channel=\"{{channel}}\" data-layout=\"full\" data-count=\"default\" data-onytevent=\"onYtEvent\"></div>\n"+"<div ng-if=\"channelid\" class=\"g-ytsubscribe\" data-channelid=\"{{channelid}}\" data-layout=\"full\" data-count=\"default\" data-onytevent=\"onYtEvent\"></div>\n"+"\n"+"<div style=\"height:30px;\">\n"+"</div>\n"+"\n"+"</div>\n"+"<a id=\"fancybox-close\" ng-click=\"$dismiss()\"></a>\n");}]);angular.module("angularjsapp/src/app/states/about/about.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/about/about.tpl.html","<div ng-if=\"visible\" id=\"page_home\">\n"+"<link rel=\"stylesheet\" ng-href=\"{{::cdn.base}}/css/landing/flexslider.css\">\n"+"<!-- header -->\n"+"<header>\n"+"<div class=\"content\">\n"+"<a class=\"logo nav-logo pull-left\" ng-href=\"/\" ng-click=\"aboutClick('To site', 'YouNow Logo')\" mobile-hide>\n"+"<img ng-src=\"{{::cdn.base}}/angularjsapp/src/assets/images/logo/yn_white_logo.svg\" alt=\"Live Stream Video Chat\">\n"+"</a>\n"+"<a class=\"logo\" ng-href=\"/\" ng-click=\"aboutClick('To site', 'YouNow Logo')\" mobile-show>\n"+"<img ng-src=\"{{::cdn.base}}/angularjsapp/src/assets/images/logo/yn_white_logo.svg\" alt=\"Live Stream Video Chat\">\n"+"</a>\n"+"</div>\n"+"</header><!-- / header -->\n"+"\n"+"\n"+"<!-- intro -->\n"+"<section class=\"intro\">\n"+"\n"+"<!-- splashvideo -->\n"+"<video class=\"intro_video\" autoplay loop ng-attr-poster=\"{{::cdn.base}}/images/about/novideo.jpg\" id=\"video\">\n"+"<source ng-src=\"{{::trustedSrc(cdn.base+'/landing/video/younow_shade2.webmhd.webm')}}\" type=\"video/webm\">\n"+"<source ng-src=\"{{::trustedSrc(cdn.base+'/landing/video/younow_shade2.mp4')}}\" type=\"video/mp4\">\n"+"</video>\n"+"<div class=\"intro_photo\" ng-style=\"::{background: 'url({{::cdn.base}}/images/about/novideo2.jpg) center no-repeat'}\"></div>\n"+"\n"+"\n"+"<!-- splashtext -->\n"+"<div class=\"intro_content\">\n"+"<div class=\"content\">\n"+"\n"+"\n"+"<h1 class=\"intro_text1\">Express Yourself</h1>\n"+"<div class=\"intro_text2\">Broadcast to a live audience. Explore and engage with talented content creators. <br>Connect with our vibrant real-time community.</div>\n"+"\n"+"\n"+"<div class=\"lbuttons\">\n"+"<div class=\"lbuttons_buttons \">\n"+"<div class=\"x_apps\">\n"+"<a class=\"lbuttons_button\" ng-click=\"aboutClick('To App store', 'Android top')\" href=\"https://play.google.com/store/apps/details?id=younow.live&referrer=utm_source%3Dyounow.com%26utm_campaign%3Dapp-promo-android%26utm_medium%3Dreferral%26utm_content%3Dweb-about-1-btn1\" target=\"_blank\">\n"+"<img ng-src=\"{{::cdn.base}}/images/about/btn_googleplay.png\" width=\"204\" height=\"55\" name=\"googlebutton\" border=\"0\" />\n"+"</a>\n"+"<a class=\"lbuttons_button\" ng-click=\"aboutClick('To App store', 'iOS top')\" href=\"https://itunes.apple.com/app/apple-store/id471347413?mt=8&pt=669563&ct=web-about-1-btn1\" target=\"_blank\">\n"+"<img ng-src=\"{{::cdn.base}}/images/about/btn_ios.png\" width=\"204\" height=\"55\" name=\"iosbutton\" border=\"0\" />\n"+"</a>\n"+"</div>\n"+"<div class=\"x_apps x_large\">\n"+"<a class=\"lbuttons_button watchnow\" href ng-click=\"watchLiveNow($event,'Watch live top')\">\n"+"Watch Live Now\n"+"</a>\n"+"</div>\n"+"</div>\n"+"<div class=\"lbuttons_subtext\">\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div><!-- / splashtext -->\n"+"\n"+"\n"+"</section><!-- / intro -->\n"+"\n"+"\n"+"<!-- withyounow -->\n"+"<section class=\"wy\">\n"+"\n"+"<div class=\"content\">\n"+"\n"+"<h2 class=\"wy_heading\">\n"+"With YouNow You Can:\n"+"</h2>\n"+"\n"+"<div class=\"wy_columns\">\n"+"\n"+"<div class=\"wy_column\">\n"+"<div class=\"image\"><img ng-src=\"{{::cdn.base}}/images/about/with_broadcast.jpg\" width=\"222\" height=\"222\" alt=\"Broadcast Yourself\" /></div>\n"+"<div class=\"title\">Broadcast<br>Yourself</div>\n"+"<div class=\"text\">\n"+"Tap âGo Liveâ and youâre on!  Broadcast to a live audience, expand your social media  following, and grow your very own, loyal fanbase.\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"wy_column\">\n"+"<div class=\"image\"><img ng-src=\"{{::cdn.base}}/images/about/with_discover.jpg\" width=\"222\" height=\"222\" alt=\"Discover Great People\" /></div>\n"+"<div class=\"title\">Discover Great <br>People</div>\n"+"<div class=\"text\">\n"+"From live DJs & musicians to YouTubers & Viners, discover talented content creators  and promote your favorites to the top!\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"wy_column\">\n"+"<div class=\"image\"><img ng-src=\"{{::cdn.base}}/images/about/with_power.jpg\" width=\"222\" height=\"222\" alt=\"Uncover the Power of You\" /></div>\n"+"<div class=\"title\">Uncover the <br>Power of You</div>\n"+"<div class=\"text\">\n"+"Whether you are in front of the camera or behind it, join a friendly community of people who love spending time together, and make your mark!\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"</section><!-- / withyounow -->\n"+"\n"+"\n"+"<!-- promovideo -->\n"+"<section class=\"pv\" ng-style=\"::{'background-image': 'url({{::cdn.base}}/landing/novideo_promo_retina.jpg) no-repeat'}\">\n"+"<video class=\"pv_video\" id=\"pv_video\" ng-cloak ng-attr-poster=\"{{::cdn.base + '/landing/novideo_promo_retina.jpg'}}\" ng-click=\"aboutClick('Watch video', 'Pause')\"\n"+"onclick=\"\n"+"document.getElementById('pv_video').pause();\n"+"document.getElementById('pv_play').style.display='block';\n"+"\">\n"+"<source ng-src=\"{{::cdn.base + '/landing/video/younow_promo.mp4' }}\" type=\"video/mp4\">\n"+"Sorry, your browser does not support HTML5 video.\n"+"</video>\n"+"<div class=\"pv_play\"\n"+"id=\"pv_play\"\n"+"ng-style=\"::{'background': 'url({{::cdn.base}}/landing/btn_play_about.png) no-repeat'}\"\n"+"ng-click=\"aboutClick('Watch video', 'Play')\"\n"+"onclick=\" document.getElementById('pv_video').play(); document.getElementById('pv_play').style.display='none';\">\n"+"</div>\n"+"</section><!-- / promovideo -->\n"+"\n"+"<!-- community reviews -->\n"+"<section class=\"cr\" ng-style=\"::{background: '#f4f8ef url({{::cdn.base}}/images/about/back_quote.png) center no-repeat'}\">\n"+"\n"+"<div class=\"content\">\n"+"\n"+"<h2 class=\"cr_heading\">What our community is saying...</h2>\n"+"\n"+"<div class=\"cr_reviews\">\n"+"\n"+"<div class=\"cr_review\">\n"+"Once you start using it, you can't stop. You meet so many cool  people from all over the world. So many diverse talents: singers,  rappers, artists and performers of every type.\n"+"</div>\n"+"<div class=\"cr_signature\">\n"+"<img ng-src=\"{{::cdn.base}}/images/about/thumb_rev1.png\" width=\"40\" height=\"40\" />\n"+"<span>Gavin, London, UK</span>\n"+"</div>\n"+"\n"+"<div class=\"cr_review\">\n"+"I absolutely love this app! The people on here are so friendly. If you're in a bad mood, just get on YouNow - it always makes me smile.\n"+"</div>\n"+"<div class=\"cr_signature\">\n"+"<img ng-src=\"{{::cdn.base}}/images/about/thumb_rev2.png\" width=\"40\" height=\"40\">\n"+"<span>Cierra, Little Rock, AR</span>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"</section><!-- / reviews -->\n"+"`\n"+"\n"+"<!-- getapp -->\n"+"<section class=\"getapp\" >\n"+"\n"+"<div class=\"content\" >\n"+"\n"+"<h2 class=\"getapp_heading\">Get the YouNow App!</h2>\n"+"\n"+"<img class=\"getapp_image\" ng-src=\"{{::cdn.base}}/images/about/gettheapp3.jpg\" width=\"880\" height=\"426\" alt=\"Get the YouNow App for Android and iPhone\" />\n"+"\n"+"<!-- buttons - copied from above -->\n"+"<div class=\"lbuttons\">\n"+"<div class=\"lbuttons_buttons\" style=\"padding:25px 0 0 0;\">\n"+"<div class=\"x_apps x_dark\">\n"+"<a class=\"lbuttons_button\" ng-click=\"aboutClick('To App store', 'Android bottom')\" href=\"https://play.google.com/store/apps/details?id=younow.live&referrer=utm_source%3Dyounow.com%26utm_campaign%3Dapp-promo-android%26utm_medium%3Dreferral%26utm_content%3Dweb-about-1-btn2\" target=\"_blank\">\n"+"<img ng-src=\"{{::cdn.base}}/images/about/btn_googleplay.png\" width=\"204\" height=\"55\" name=\"googlebutton\" border=\"0\" />\n"+"</a>\n"+"<a class=\"lbuttons_button\" ng-click=\"aboutClick('To App store', 'iOS bottom')\" href=\"https://itunes.apple.com/app/apple-store/id471347413?mt=8&pt=669563&ct=web-about-1-btn2\" target=\"_blank\">\n"+"<img ng-src=\"{{::cdn.base}}/images/about/btn_ios.png\" width=\"204\" height=\"55\" name=\"iosbutton\" border=\"0\" />\n"+"</a>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"</div>\n"+"\n"+"</section><!-- / getapp -->\n"+"\n"+"\n"+"<!-- watchnow -->\n"+"<section class=\"watchnow\">\n"+"\n"+"<div class=\"content\" >\n"+"\n"+"<h2 class=\"watchnow_heading\">Want to see whatâs live now?</h2>\n"+"\n"+"<!-- buttons - copied from above -->\n"+"\n"+"<!-- logged IN -->\n"+"<div class=\"lbuttons\">\n"+"<div class=\"lbuttons_buttons\" style=\"padding:20px 0 0 0;\">\n"+"<div class=\"x_apps\">\n"+"<a class=\"lbuttons_button watchnow\" href=\"\" ng-click=\"watchLiveNow($event,'Enter site bottom')\">\n"+"Enter Site\n"+"</a>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"</section><!-- / watchnow -->\n"+"\n"+"\n"+"<!-- about -->\n"+"<section class=\"about\" >\n"+"\n"+"<div class=\"content\" >\n"+"\n"+"<a name=\"about\"></a>\n"+"<h2 class=\"about_heading\">About YouNow</h2>\n"+"\n"+"<div class=\"maincontent\">\n"+"<p>We believe in the unlimited potential of human creativity. In fact, itâs why we come to work every day - to create a powerful platform where anyone can broadcast and express themselves in front of a vast live audience.</p>\n"+"<p>In a moment when social media and TV are converging, weâre proud to provide a product that fuses the experience of broadcasting, gaming, performing and social networking, giving direct power to the people and enabling them to discover and create new kinds of interactive content in real-time.</p>\n"+"<p>\n"+"Long at the forefront of user-generated video, weâre a small and experienced team working from a sunny loft in Midtown Manhattan. And weâre backed by\n"+"<a href=\"http://techcrunch.com/2014/02/22/meet-oren-zeev-silicon-valleys-builder-investor/\" ng-click=\"aboutClick('About link', 'Oren')\" target=\"_blank\">Oren Zeev</a>, and VCs\n"+"<a href=\"http://venrock.com\" ng-click=\"aboutClick('About link', 'Venrock')\" target=\"_blank\">Venrock</a>,\n"+"<a href=\"http://usv.com\" ng-click=\"aboutClick('About link', 'USV')\" target=\"_blank\">Union Square Ventures</a>, and\n"+"<a href=\"http://comcastventures.com\" ng-click=\"aboutClick('About link', 'USV')\" target=\"_blank\">Comcast Ventures</a>.\n"+"</p>\n"+"<p>Want to learn more? Check out our <a href=\"/press\">Press page</a> or contact <a href=\"mailto:press@younow.com\">press@younow.com</a> with any inquiries.</p>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"\n"+"</section><!-- / about -->\n"+"\n"+"\n"+"<div data-footer></div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/bigsister/bigsister.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/bigsister/bigsister.tpl.html","<div data-header></div>\n"+"<div class=\"bigsister {{vars.size}}\">\n"+"<a class=\"queue-item thumb clickable\"\n"+"ng-repeat=\"broadcast in broadcasts\"\n"+"href=\"broadcastid/{{::broadcast.broadcastId}}\">\n"+"<img src=\"{{::thumb(broadcast.broadcastId,'BROADCAST_THUMB_DYNAMIC')}}\"\n"+"fallback-src=\"{{::thumb(broadcast.broadcastId,'BROADCAST_THUMB')}}\">\n"+"</a>\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/states/home/home.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/home/home.tpl.html","<div ng-if=\"vm.renderPage\" class=\"home-container\" scrolled-class=\"440\">\n"+"\n"+"<div id=\"old_navbar\" data-header></div>\n"+"\n"+"<section class=\"homeSection top-container\">\n"+"\n"+"<div class=\"search-top\">\n"+"<div class=\"gradient-accent\" ng-style=\"{'width': gradientProgress + '%', 'transition': 'width '+gradientProgress/150+'s linear'}\"></div>\n"+"<div class=\"container\">\n"+"<a href ui-sref=\"main.channel.detail\">\n"+"<img class=\"logo-image  pull-left\" ng-src=\"{{::cdn.base}}/angularjsapp/src/assets/images/logo/yn_white_logo.svg\" alt=\"Live Stream Video Chat\">\n"+"</a>\n"+"<div class=\"search-cta pull-right\">\n"+"<a href=\"#\" prevent-default ng-click=\"vm.openLoginModal('LOGIN')\" translate=\"header_login\"></a>\n"+"<button class=\"btn btn-outline\" ng-click=\"vm.openLoginModal('SIGNUP')\" translate=\"header_signup\"></button>\n"+"</div>\n"+"<yn-search-bar></yn-search-bar>\n"+"</div>\n"+"</div>\n"+"<div class=\"home-video-container\">\n"+"<video class=\"home-video\" autoplay=\"\" loop=\"\" ng-attr-poster=\"{{::vm.baseCDN +'/images/about/novideo.jpg'}}\" id=\"homeVideo\">\n"+"<source ng-src=\"{{::vm.baseCDN + '/landing/video/younow_shade2.webmhd.webm'}}\" type=\"video/webm\">\n"+"<source ng-src=\"{{::vm.baseCDN + '/landing/video/younow_shade2.mp4'}}\" type=\"video/mp4\">\n"+"</video>\n"+"</div>\n"+"<h1 class=\"homeTitle\" translate=\"home_tagline\"></h1>\n"+"<h4 class=\"homeSubtitle\" translate=\"home_tagline_subtext\"></h4>\n"+"\n"+"<div class=\"homeButtons\">\n"+"\n"+"<div class=\"btn-group-vertical\">\n"+"<div class=\"btn-group\">\n"+"<button class=\"btn btn-twitter btn-billboard\" ng-disabled=\"loggingIn.twitter\" ng-click=\"login('twitter')\">\n"+"<i class=\"ynicon ynicon-social-tw\"></i>\n"+"<div class=\"smicon-divider\"></div>\n"+"<span ng-if=\"!loggingIn.twitter\" class=\"transline\"><span translate=\"loginmodal_signinwith\"></span> <span>Twitter</span></span>\n"+"<div ng-if=\"loggingIn.twitter\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"<div class=\"btn-group\">\n"+"<button class=\"btn btn-facebook btn-billboard\" ng-disabled=\"loggingIn.facebook\" ng-click=\"login('facebook')\">\n"+"<i class=\"ynicon ynicon-social-fb\"></i>\n"+"<div class=\"smicon-divider\"></div>\n"+"<span ng-if=\"!loggingIn.facebook\" class=\"transline\"><span translate=\"loginmodal_signinwith\"></span> <span>Facebook</span></span>\n"+"<div ng-if=\"loggingIn.facebook\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"<div class=\"btn-group\">\n"+"<button class=\"btn btn-google btn-billboard\" ng-disabled=\"loggingIn.google\" ng-click=\"login('google')\">\n"+"<i class=\"ynicon ynicon-social-gp\"></i>\n"+"<div class=\"smicon-divider\"></div>\n"+"<span ng-if=\"!loggingIn.google\" class=\"transline\"><span translate=\"loginmodal_signinwith\"></span> <span>Google</span></span>\n"+"<div ng-if=\"loggingIn.google\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"btn-groups moreOptions\">\n"+"<div class=\"btn-group\">\n"+"<button class=\"btn btn-instagram btn-billboard\" ng-if=\"moreOptions\" ng-disabled=\"loggingIn.instagram\" ng-click=\"login('instagram')\">\n"+"<i class=\"ynicon ynicon-social-insta\"></i>\n"+"<div class=\"smicon-divider\"></div>\n"+"<span ng-if=\"!loggingIn.instagram\" class=\"transline\"><span translate=\"loginmodal_signinwith\"></span> <span>Instagram</span></span>\n"+"<div ng-if=\"loggingIn.instagram\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"<div class=\"btn-group\">\n"+"<div ng-if=\"!moreOptions\" ng-click=\"showMoreOptions()\" class=\"moreOptionsClick\" translate=\"homepage_other_option\"></div>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"<div class=\"topTermsLine\" translate=\"homepage_by_terms\" translate-values=\"{a_open:'<a href=\'/policy/en/terms\' target=\'_blank\'>',a_close:'</a>'}\">\n"+"</div>\n"+"\n"+"</section>\n"+"\n"+"<section class=\"homeSection\">\n"+"\n"+"<div class=\"trending_things\">\n"+"<div class=\"trending_topics\">\n"+"<h2 class=\"trending_title\" translate=\"topics_trending\"></h2>\n"+"<div class=\"tags_items\">\n"+"<a ng-repeat=\"tag in ::vm.liveTopics\"\n"+"class=\"tags_tag\"\n"+"ng-href=\"/explore/{{::tag.tagLink}}\" prevent-default\n"+"ng-click=\"vm.stateChange('main.explore', { 'tag': tag.tag })\"\n"+">{{::tag.tag}}</a>\n"+"</div>\n"+"<a class=\"trending_more\" ng-href=\"/explore/\" prevent-default ng-click=\"vm.stateChange('main.explore', undefined, true)\" prevent-default translate=\"topics_more\"></a>\n"+"</div>\n"+"\n"+"\n"+"\n"+"<div class=\"trending_broadcasters\">\n"+"<h2 class=\"trending_title\" translate=\"homepage_trending_now\"></h2>\n"+"<div class=\"trending_items clearfix\">\n"+"\n"+"<div class=\"trending_item\" ng-repeat=\"(k,bcst) in ::vm.dashboard.users | orderBy:'-userlevel'\" ng-if=\"k<9\">\n"+"<div class=\"trending_square\" ng-if=\"bcst.tags\">\n"+"<div class=\"trending_content\">\n"+"\n"+"<a class=\"trending_image\" ng-href=\"/{{::bcst.profile}}\" prevent-default ng-click=\"vm.stateChange('main.channel.detail', { 'profileUrlString': bcst.profile })\">\n"+"<div class=\"thumb-image\" ng-style=\"::{'background-image':'url('+vm.nothumb+')'}\">\n"+"<div class=\"thumb-image-wide\">\n"+"<img class=\"thumb-image-img\" ng-src=\"{{bcst.thumb}}\" ng-alt=\"Watch {{::bcst.profile}}'s broadcast\" />\n"+"</div>\n"+"<div class=\"thumb_viewers\">\n"+"<i class=\"ynicon ynicon-viewers\"></i>\n"+"{{::bcst.viewers}}\n"+"</div>\n"+"</div>\n"+"</a>\n"+"<div class=\"trending_info transline-mid\">\n"+"<a\n"+"class=\"trending_thumb thumb circle-thumb\"\n"+"ng-style=\"{ background: 'url(' + vm.thumb + '/' + bcst.userId + '/' + bcst.userId + '.jpg' + '), url(' + vm.nothumb + ') no-repeat', 'background-size': 'cover' }\"\n"+"ng-href=\"/{{::bcst.profile}}\" prevent-default\n"+"ng-click=\"vm.stateChange('main.channel.detail', { 'profileUrlString': bcst.profile })\">\n"+"</a>\n"+"<div class=\"trending_description clearfix\">\n"+"<span class=\"trend_right\" ng-if=\"bcst.totalFans\">\n"+"<i class=\"ynicon ynicon-user\"></i>{{::bcst.totalFans}}\n"+"</span>\n"+"<a class=\"trend_left short-text\" ng-href=\"/{{::bcst.profile}}\" prevent-default ng-click=\"vm.stateChange('main.channel.detail', { 'profileUrlString': bcst.profile })\" prevent-default>\n"+"{{::bcst.profile}}\n"+"</a>\n"+"<a class=\"trend_bottom short-text\" ng-href=\"/explore/{{::bcst.tags[0]}}\" prevent-default ng-click=\"vm.stateChange('main.explore', { 'tag': bcst.tags[0] })\">\n"+"#{{::bcst.tags[0]}}\n"+"</a>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"trending_square ad_square\" ng-if=\"!bcst.tags\" ng-click=\"vm.openLoginModal('EXPERIMENT')\">\n"+"<div class=\"trending_content\">\n"+"\n"+"<div class=\"title\" translate=\"homepage_see_friends\">\n"+"</div>\n"+"<div class=\"button\" translate=\"homepage_join\">\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"</div>\n"+"<div class=\"more-link-container\">\n"+"<a class=\"more-link\" href=\"/explore/\" prevent-default ng-click=\"vm.stateChange('main.explore')\" prevent-default><span translate=\"homepage_view_more\"></span> &raquo;</a>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"</section>\n"+"\n"+"<section class=\"homeSection experiment_connect\">\n"+"\n"+"<h2 id=\"homeSignIn\" translate=\"signin_to_younow\"></h2>\n"+"<div class=\"experiment_connect_title\" translate=\"home_tagline_subtext\">\n"+"</div>\n"+"\n"+"<div class=\"homeButtons\">\n"+"\n"+"<div class=\"btn-groups\">\n"+"<div class=\"btn-group\">\n"+"<button class=\"btn btn-facebook\" ng-disabled=\"loggingIn.facebook\" ng-click=\"login('facebook')\">\n"+"<i class=\"ynicon ynicon-social-fb\"></i>\n"+"<span ng-if=\"!loggingIn.facebook\" class=\"transline\"><span translate=\"loginmodal_signinwith\"></span> <span>Facebook</span></span>\n"+"<div ng-if=\"loggingIn.facebook\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"<div class=\"btn-group\">\n"+"<button class=\"btn btn-twitter\" ng-disabled=\"loggingIn.twitter\" ng-click=\"login('twitter')\">\n"+"<i class=\"ynicon ynicon-social-tw\"></i>\n"+"<span ng-if=\"!loggingIn.twitter\" class=\"transline\"><span translate=\"loginmodal_signinwith\"></span> <span>Twitter</span></span>\n"+"<div ng-if=\"loggingIn.twitter\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"<div class=\"btn-group\">\n"+"<button class=\"btn btn-google\" ng-disabled=\"loggingIn.google\" ng-click=\"login('google')\">\n"+"<i class=\"ynicon ynicon-social-gp\"></i>\n"+"<span ng-if=\"!loggingIn.google\" class=\"transline\"><span translate=\"loginmodal_signinwith\"></span> <span>Google</span></span>\n"+"<div ng-if=\"loggingIn.google\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"btn-groups moreOptions\">\n"+"<div class=\"btn-group\">\n"+"<button class=\"btn btn-instagram\" ng-if=\"moreOptions\" ng-disabled=\"loggingIn.instagram\" ng-click=\"login('instagram')\">\n"+"<i class=\"ynicon ynicon-social-insta\"></i>\n"+"<span ng-if=\"!loggingIn.instagram\" class=\"transline\"><span translate=\"loginmodal_signinwith\"></span> <span>Instagram</span></span>\n"+"<div ng-if=\"loggingIn.instagram\" class=\"loader-light\"></div>\n"+"</button>\n"+"</div>\n"+"<div class=\"btn-group\">\n"+"<div ng-if=\"!moreOptions\" ng-click=\"showMoreOptions()\" class=\"moreOptionsClick\" translate=\"homepage_other_option\"></div>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"<div class=\"experiment_terms\" translate=\"homepage_by_terms\" translate-values=\"{a_open:'<a href=\'/policy/en/terms\' target=\'_blank\'>',a_close:'</a>'}\">\n"+"</div>\n"+"\n"+"</section>\n"+"\n"+"<section class=\"homeSection experiment_app\">\n"+"<span class=\"the_text\">\n"+"<strong>DarkMode 2.0</strong><br />\n"+"Developed by SOULDR!NKER<br />\n"+"Brought to you by <strong>ASHTAR</strong>\n"+"</span>\n"+"</section>\n"+"\n"+"<section class=\"homeSection mobile-container\">\n"+"<div ng-include=\"'angularjsapp/src/app/components/mobile-download/mobile-download.tpl.html'\"></div>\n"+"</section>\n"+"\n"+"<div class=\"homeSection darkFooter\" data-footer></div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/info/info.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/info/info.tpl.html","<div data-header></div>\n"+"<div id=\"docs\" class=\"info-page\" ng-class=\"{'ready': ready, 'rtl': rtl}\">\n"+"<div id=\"doc-header\">{{docTitle}}</div>\n"+"<div id=\"doc-sidebar\">\n"+"<div ng-repeat=\"section in sections\" class=\"doc-section\" ng-click=\"scrollTo(section.offsetTop)\">{{section.innerText}}</div>\n"+"</div>\n"+"<div id=\"doc-content\" ng-bind-html=\"docContent\"></div>\n"+"</div>\n"+"<div data-footer ng-hide=\"$root.hideFooter\"></div>\n");}]);angular.module("angularjsapp/src/app/states/jobs/jobs.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/jobs/jobs.tpl.html","<div data-header></div>\n"+"<div id=\"docs\" class=\"jobs-page\">\n"+"<a id=\"doc-header\" href=\"/jobs\">YouNow Careers</a>\n"+"<div id=\"doc-content\">\n"+"<div id=\"grnhse_app\"></div>\n"+"</div>\n"+"</div>\n"+"<div data-footer ng-hide=\"$root.hideFooter\"></div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/lockout/lockout.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/lockout/lockout.tpl.html","<div class=\"lockout\">\n"+"<img src=\"/angularjsapp/src/assets/images/lockout/younow_agegate_2x.png\">\n"+"<div class=\"lockout-title\" translate=\"agegate_lockout_title\"></div>\n"+"<div class=\"lockout-message\" translate=\"agegate_lockout_message\"></div>\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/states/main/channel/async/async.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/channel/async/async.tpl.html","<div class=\"main-content main-async crazyD crazyX\" ng-class=\"session.user.userId===broadcasterService.channel.userId ? 'owner' : 'non-owner'\">\n"+"\n"+"<div class=\"main-content-left\">\n"+"<div class=\"user-summary \">\n"+"<div class=\"user-cover\" style=\"background-image:url({{cdn.channelImage(broadcasterService.broadcaster.userId, 'Cover', uploadedImageRefresh)}}), url({{::config.imageApis.nocover}});\">\n"+"<div ng-show=\"broadcasterService.channel.editingProfile\" class=\"upload-photo editing\">\n"+"<div class=\"upload-overlay\"></div>\n"+"<input accept=\"image/jpeg\" type=\"file\" upload-profile-image do-upload=\"doUpload\" upload-endpoint=\"updateCover\" upload-name=\"cover\" tooltip-trigger=\"show\" tooltip=\"This image should be at least 270x580px and smaller than 6MB\" tooltip-placement=\"bottom error\">\n"+"<i class=\"ynicon ynicon-camera\"></i>\n"+"</div>\n"+"</div>\n"+"<div class=\"user-description\" itemscope itemtype=\"http://schema.org/Person\">\n"+"<div\n"+"class=\"pull-left circle-thumb crop-thumb clickable\"\n"+"ng-href=\"/{{broadcasterService.broadcaster.profileUrlString}}\" prevent-default\n"+"ng-click=\"showProfileSummary(broadcasterService.broadcaster.userId)\">\n"+"<div class=\"thumb-image\">\n"+"<div class=\"thumb-image-wide\">\n"+"<img itemprop=\"image\" class=\"thumb-image-img\" ng-src=\"{{cdn.channelImage(broadcasterService.broadcaster.userId, 'Image', uploadedImageRefresh)}}\" alt=\"{{broadcasterService.broadcaster.profile}}\" fallback-src=\"{{::config.imageApis.nothumb}}\"/>\n"+"</div>\n"+"</div>\n"+"<span class=\"ynbadge\" ng-if=\"broadcasterService.channel.isSubscribable\">\n"+"<img ng-src=\"{{::config.settings.BadgeBaseUrl}}/{{ broadcasterService.broadcaster.userId}}/1/badge@2x.png\" />\n"+"</span>\n"+"</div>\n"+"<div ng-show=\"broadcasterService.channel.editingProfile\" class=\"upload-photo editing\">\n"+"<div class=\"upload-overlay\"></div>\n"+"<input accept=\"image/jpeg\" name=\"image\" type=\"file\" upload-profile-image do-upload=\"doUpload\" upload-endpoint=\"updateThumb\" upload-name=\"image\" tooltip-trigger=\"show\" tooltip=\"This image must be at least 80x80px and smaller than 6MB\" tooltip-placement=\"top error\">\n"+"<i class=\"ynicon ynicon-camera\"></i>\n"+"</div>\n"+"<div\n"+"class=\"name\"\n"+"ng-class=\"{'overflow':broadcasterService.channel.subscriptions_show_overflow}\"\n"+"prevent-default>\n"+"\n"+"<span class=\"short-text\">\n"+"<span class=\"crowns-container\">\n"+"<span class=\"user-crowns\">\n"+"<span ng-if=\"broadcasterService.channel.globalSpenderRank==1\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"</span>\n"+"<span ng-if=\"broadcasterService.channel.globalSpenderRank==2\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"</span>\n"+"<span ng-if=\"broadcasterService.channel.globalSpenderRank==3\">\n"+"<i class=\"ynicon ynicon-redcrownicon\"></i>\n"+"</span>\n"+"<span ng-if=\"!broadcasterService.channel.globalSpenderRank\">\n"+"<i class=\"ynicon ynicon-level\"></i>\n"+"</span>\n"+"</span>\n"+"</span>\n"+"<b\n"+"ng-href=\"/{{broadcasterService.broadcaster.profileUrlString}}\" prevent-default\n"+"ng-click=\"showProfileSummary(broadcasterService.broadcaster.userId)\">\n"+"{{broadcasterService.channel.level}}\n"+"<span itemprop=\"name\">{{broadcasterService.channel.fullName}}</span>\n"+"</b>\n"+"</span>\n"+"<span class=\"ynbadges\" ng-if=\"broadcasterService.channel.subscriptions\">\n"+"<a\n"+"class=\"ynbadge\"\n"+"ng-repeat=\"(key,sub) in broadcasterService.channel.subscriptions\"\n"+"ng-click=\"showProfileSummary(sub.userId)\"\n"+"ng-href=\"/{{::sub.userId}}/channel\"\n"+"prevent-default>\n"+"<img\n"+"ng-src=\"{{::config.settings.BadgeBaseUrl}}/{{sub.userId}}/{{sub.subscriptionType}}/badge@2x.png\"\n"+"tooltip=\"{{(sub.lastName ? sub.firstName+' '+sub.lastName : sub.profileUrlString)}}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-placement=\"top\"\n"+"tooltip-append-to-body=\"true\" />\n"+"</a>\n"+"<span class=\"ynbadge ynbadge-ellipsis\" ng-if=\"broadcasterService.channel.subscriptions_extras && broadcasterService.channel.subscriptions_extras.length>0\">\n"+"<i class=\"ynicon ynicon-icon-ellipsis\"></i>\n"+"<div class=\"dropup\">\n"+"<div class=\"dropdown-menu\" role=\"menu\">\n"+"<i class=\"ynicon ynicon-carrot-dwn\"></i>\n"+"<ul class=\"\" only-scroll>\n"+"<li ng-repeat=\"(k,s) in broadcasterService.channel.subscriptions_extras\">\n"+"<a\n"+"class=\"ynbadge\"\n"+"ng-click=\"showProfileSummary(s.userId)\"\n"+"ng-href=\"/{{s.userId}}/channel\"\n"+"prevent-default>\n"+"<img\n"+"ng-src=\"{{::config.settings.BadgeBaseUrl}}/{{s.userId}}/{{s.subscriptionType}}/badge@2x.png\"\n"+"tooltip=\"{{(s.lastName ? s.firstName+' '+s.lastName : s.profileUrlString)}}\"\n"+"tooltip-trigger=\"mouseenter\"\n"+"tooltip-placement=\"left\"\n"+"tooltip-append-to-body=\"true\" />\n"+"</a>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"</span>\n"+"\n"+"</span>\n"+"\n"+"<button class=\"btn btn-transparent flagging pull-right\" ng-if=\"broadcasterService.channel\" ng-click=\"showProfileSummary(undefined, '', undefined, { isFlagging: true })\">\n"+"<i class=\"ynicon ynicon-flag\"></i>\n"+"</button>\n"+"</div>\n"+"<div class=\"profile-actions\" track-source=\"PROFILE\">\n"+"<div class=\"pull-left btn-small\" ng-show=\"session.user.userId!==broadcasterService.channel.userId\" fan-button channel=\"broadcasterService.channel\"></div>\n"+"<div class=\"pull-left btn-small\" ng-show=\"session.user.userId!==broadcasterService.channel.userId\" subscribe-button channel=\"broadcasterService.channel\" source=\"PROFILE\"></div>\n"+"\n"+"<div ng-show=\"session.user.userId===broadcasterService.channel.userId\" class=\"pull-left editing-options\">\n"+"<button ng-if=\"!broadcasterService.channel.editingProfile\" ng-click=\"editProfile();\" class=\"btn btn-cancel edit-profile\" translate=\"profile_edit_profile\"></button>\n"+"<button ng-if=\"broadcasterService.channel.editingProfile\" ng-click=\"saveDescription();saveEdit();\" class=\"btn btn-confirm\" translate=\"_save\"></button>\n"+"<button ng-if=\"broadcasterService.channel.editingProfile\" ng-click=\"cancelEdit();\" class=\"btn btn-cancel\" translate=\"_cancel\"></button>\n"+"</div>\n"+"\n"+"<div class=\"profile-pill-container pull-right\">\n"+"<div class=\"total-views\" ng-if=\"broadcasterService.channel.totalViews\">\n"+"{{broadcasterService.channel.totalViews}} <span translate=\"_views\"></span>\n"+"</div>\n"+"<div class=\"ep-badge\" ng-if=\"broadcasterService.channel.isEp\">\n"+"<span class=\"tag short-text\">\n"+"<i class=\"ynicon ynicon-level\"></i> <span translate=\"_editors_choice\"></span><span ng-if=\"broadcasterService.channel.epTag.length > 0\">: #{{broadcasterService.channel.epTag}}</span>\n"+"</span>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"user-bio-section\">\n"+"\n"+"<div ng-if=\"!broadcasterService.channel.editingProfile\" class=\"user-bio\" ng-class=\"{'text-muted': broadcasterService.channel.description.length === 0 || !broadcasterService.channel.description}\">\n"+"<span itemprop=\"description\" ng-bind-html=\"broadcasterService.channel.displayDescription\"></span>\n"+"<span ng-if=\"broadcasterService.channel.altName\">\n"+"<span class=\"bullet\">â¢</span>\n"+"<span class=\"text-muted\" itemprop=\"alternateName\" ng-bind=\"broadcasterService.channel.altName\"></span>\n"+"</span>\n"+"</div>\n"+"<textarea ng-model=\"broadcasterService.channel.description\" ng-if=\"broadcasterService.channel.editingProfile\" class=\"user-bio editing\" maxlength=\"140\">{{::('profile_describe_yourself' | translate)}}</textarea>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div infinite-scroll=\"broadcasterService.getItems()\" can-load=\"!broadcasterService.channel.finished[broadcasterService.tab] && !settingUp\" threshold=\"300\" pagescroll=\"true\">\n"+"<tabset class=\"navigation\" type=\"pills\" ng-class=\"{ 'notSubscribable' : !broadcasterService.channel.isSubscribable }\" ng-if=\"broadcasterService.channel && broadcasterService.asyncTabs\">\n"+"<!-- moments -->\n"+"<tab heading=\"Moments\" ng-click=\"tabClick('moments', {records: 20, createdBefore: 0})\" active=\"broadcasterService.asyncTabs.moments\" select=\"showTab('moments', {records: 20, createdBefore: 0})\">\n"+"<div class=\"moments-tab\" ng-if=\"broadcasterService.asyncTabs.moments\">\n"+"<ul class=\"moments\">\n"+"<li ng-repeat=\"moment in broadcasterService.channel.moments track by $id(moment)\">\n"+"<div moment-card get-trending=\"goToTrendingMoments()\" delete=\"deleteMoment(moment)\" moment=\"{{::moment}}\" hide-collection=\"hideCollection(moment)\" ordinal-rank=\"{{::$index}}\"></div>\n"+"</li>\n"+"<div class=\"empty\" ng-if=\"broadcasterService.channel.moments.length === 0\">\n"+"<i class=\"ynicon ynicon-icon_moments\"></i>\n"+"<h4 class=\"primary-text\" translate=\"profile_user_no_moments_yet\"></h4>\n"+"<div class=\"empty-desc\" translate=\"profile_user_no_moments_desc\"></div>\n"+"</div>\n"+"</ul>\n"+"</div>\n"+"</tab>\n"+"\n"+"<!-- broadcasts -->\n"+"\n"+"<tab heading=\"replays\" ng-click=\"tabClick('broadcasts')\" active=\"broadcasterService.asyncTabs.broadcasts\" select=\"showTab('broadcasts')\">\n"+"<div class=\"broadcasts-tab\" ng-if=\"broadcasterService.asyncTabs.broadcasts\">\n"+"<div class=\"broadcasts\">\n"+"<div class=\"broadcasts-container\">\n"+"<ul class=\"broadcasts\">\n"+"<li ng-repeat=\"post in broadcasterService.channel.broadcasts track by $id(post)\" class=\"comment\">\n"+"<div data-younow-post></div>\n"+"</li>\n"+"</ul>\n"+"<div class=\"empty\" ng-if=\"broadcasterService.channel.broadcasts.length === 0\">\n"+"<i class=\"ynicon ynicon-bc-golive\"></i>\n"+"<h4 class=\"primary-text\" ng-if=\"broadcasterService.channel.broadcastsCount == 0\" translate=\"profile_no_broadcasters_yet\"></h4>\n"+"<h4 class=\"primary-text\" ng-if=\"broadcasterService.channel.broadcastsCount > 0\" translate=\"profile_user_no_public_broadcasts\"></h4>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</tab>\n"+"<!-- discussion comments -->\n"+"<tab heading=\"{{::('profile_discussion' | translate)}}\" id=\"post-tab\" ng-click=\"tabClick('posts')\" active=\"broadcasterService.asyncTabs.posts\" select=\"showTab('posts')\">\n"+"<div class=\"conversation-tab\" ng-if=\"broadcasterService.asyncTabs.posts\">\n"+"<div class=\"conversation-container\">\n"+"<div class=\"comment-box\">\n"+"<div class=\"comment-area form-control\" tooltip-trigger=\"mouseenter\" tooltip-html-unsafe=\"{{'profile_tip_mention_your_friends' | translate }}\">\n"+"<div contenteditable mentio\n"+"mentio-typed-term=\"typedTerm\"\n"+"mentio-require-leading-space=\"true\"\n"+"class=\"editor\"\n"+"id=\"textarea_\"\n"+"ng-model=\"comment.html\"\n"+"yn-enter=\"postComment(comment);\"\n"+"placeholder=\"{{ 'profile_write_something' | translate }}\">\n"+"</div>\n"+"<mentio-menu\n"+"mentio-for=\"'textarea_'\"\n"+"mentio-trigger-char=\"'@'\"\n"+"mentio-items=\"people\"\n"+"mentio-template-url=\"angularjsapp/src/app/components/mention/mention.tpl.html\"\n"+"mentio-search=\"searchPeople(term)\"\n"+"mentio-select=\"insertMention(item)\"\n"+"></mentio-menu>\n"+"<div class=\"upload-photo\">\n"+"<input class=\"pull-right\" accept=\"image/jpeg, image/png\" name=\"media\" type=\"file\" yn-on-change=\"showUploadPreview\" params=\"event,comment\" id=\"file_\" tooltip-trigger=\"show\" tooltip=\"this image must be at least 100x100px and not larger than 10MB\">\n"+"<i class=\"ynicon ynicon-camera pull-right\"></i>\n"+"</div>\n"+"<div ng-show=\"comment.preview\" class=\"upload-preview\">\n"+"<button ng-click=\"removeUpload(comment)\" aria-hidden=\"true\" class=\"close\" type=\"button\">Ã</button>\n"+"<img ng-src=\"{{comment.preview}}\" height=\"100\">\n"+"</div>\n"+"</div>\n"+"<div class=\"comment-actions\">\n"+"<button ng-disabled=\"posting\" ng-click=\"postComment(comment)\" class=\"btn btn-cancel\" translate=\"_post\"></button>\n"+"</div>\n"+"</div>\n"+"<ul class=\"comments\">\n"+"<li ng-repeat=\"post in broadcasterService.channel.posts track by $id(post)\" class=\"comment\" ng-class=\"{'new':broadcasterService.deeplinkId==post.id}\">\n"+"<div data-younow-post></div>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"</tab>\n"+"<!-- total fans -->\n"+"<tab ng-if=\"broadcasterService.channel.totalFans!=false && broadcasterService.channel.totalFans!='0'\" heading=\"{{ broadcasterService.channel.totalFansFormatted }} {{::('_fans' | translate)}}\" ng-click=\"tabClick('fans')\" active=\"broadcasterService.asyncTabs.fans\" select=\"showTab('fans')\">\n"+"<div class=\"fans-tab\" ng-if=\"broadcasterService.asyncTabs.fans\">\n"+"<ul>\n"+"<li ng-repeat=\"fan in broadcasterService.channel.fans track by $id(fan)\" class=\"fans-tab-fan\">\n"+"<a\n"+"ng-href=\"/{{fan.profileUrlString}}\" prevent-default\n"+"ng-click=\"showProfileSummary(fan.userId)\"\n"+"class=\"circle-thumb clickable pull-left\"\n"+"ng-style=\"::{'background':'url('+cdn.thumb + '/' + fan.userId + '/' + fan.userId + '.jpg' +'), url('+cdn.nothumb+') no-repeat', 'background-size': 'cover'}\">\n"+"</a>\n"+"<div class=\"pull-left\">\n"+"<a\n"+"class=\"name clickable short-text\"\n"+"ng-href=\"/{{fan.profileUrlString}}\" prevent-default\n"+"ng-click=\"showProfileSummary(fan.userId)\">\n"+"{{fullName(fan)}}\n"+"</a>\n"+"<div class=\"description short-text\">\n"+"{{fan.description}}\n"+"</div>\n"+"</div>\n"+"<div class=\"fan-button-placeholder pull-right\" track-source=\"PROFILE\">\n"+"<div fan-button channel=\"fan\"></div>\n"+"</div>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</tab>\n"+"<!-- fan of  -->\n"+"<tab ng-if=\"broadcasterService.channel.totalFansOf!=false && broadcasterService.channel.totalFansOf!='0'\"  heading=\"{{::('profile_fan_of' | translate)}} {{ broadcasterService.channel.totalFansOfFormatted }}\" ng-click=\"tabClick('fansof')\" active=\"broadcasterService.asyncTabs.fansof\" select=\"showTab('fansof')\">\n"+"<div class=\"fans-of-tab\" ng-if=\"broadcasterService.asyncTabs.fansof\">\n"+"<ul>\n"+"<li ng-repeat=\"fan in broadcasterService.channel.fansof track by $id(fan)\" class=\"fans-tab-fan\">\n"+"<a\n"+"ng-href=\"/{{fan.profileUrlString}}\" prevent-default\n"+"ng-click=\"showProfileSummary(fan.userId)\"\n"+"class=\"circle-thumb clickable pull-left\"\n"+"ng-style=\"::{'background':'url('+cdn.thumb + '/' + fan.userId + '/' + fan.userId + '.jpg'+'), url('+cdn.nothumb+') no-repeat', 'background-size': 'cover'}\">\n"+"</a>\n"+"<div class=\"pull-left\">\n"+"<a\n"+"class=\"name clickable short-text\"\n"+"ng-href=\"/{{ fan.profileUrlString}}\" prevent-default\n"+"ng-click=\"showProfileSummary(fan.userId)\"\n"+">\n"+"{{ fullName(fan)}}\n"+"</a>\n"+"<div class=\"description short-text\">\n"+"{{ fan.description}}\n"+"</div>\n"+"</div>\n"+"<div class=\"fan-button-placeholder pull-right\" track-source=\"PROFILE\">\n"+"<div fan-button channel=\"fan\"></div>\n"+"</div>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</tab>\n"+"<!-- subscribers -->\n"+"<tab ng-if=\"broadcasterService.channel.isSubscribable\" heading=\"{{ Api.squashedNumber(broadcasterService.channel.totalSubscribers, 4).toUpperCase() }} {{::('_subscribers' | translate)}}\" ng-click=\"tabClick('subscribers')\" active=\"broadcasterService.asyncTabs.subscribers\" select=\"showTab('subscribers')\">\n"+"<div class=\"fans-tab subscribers-tab\" ng-if=\"broadcasterService.asyncTabs.subscribers\">\n"+"<ul>\n"+"<li ng-repeat=\"fan in broadcasterService.channel.subscribers track by $id(fan)\" class=\"fans-tab-fan\">\n"+"<a\n"+"ng-href=\"/{{ fan.profileUrlString}}\" prevent-default\n"+"ng-click=\"showProfileSummary(fan.userId)\"\n"+"class=\"circle-thumb clickable pull-left\"\n"+"ng-style=\"{'background':'url('+cdn.thumb+ '/' +fan.userId + '/' + fan.userId + '.jpg' +'), url('+cdn.nothumb+') no-repeat', 'background-size': 'cover'}\">\n"+"</a>\n"+"<div class=\"pull-left\">\n"+"<a\n"+"class=\"name clickable short-text\"\n"+"ng-href=\"/{{ fan.profileUrlString}}\" prevent-default\n"+"ng-click=\"showProfileSummary(fan.userId)\">\n"+"{{ fullName(fan)}}\n"+"</a>\n"+"<div class=\"description short-text\">\n"+"{{ fan.description}}\n"+"</div>\n"+"</div>\n"+"<div class=\"fan-button-placeholder pull-right\" track-source=\"PROFILE\">\n"+"<div fan-button channel=\"fan\"></div>\n"+"</div>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</tab>\n"+"</tabset>\n"+"</div>\n"+"</div>\n"+"<div class=\"main-chat\" channel-chat></div>\n"+"<!--<div class=\"main-content-right\">\n"+"\n"+"\n"+"<mini-player ng-if=\"broadcasterService.broadcaster.broadcastId\" broadcast=\"broadcasterService.broadcaster\" show-broadcast=\"enterLiveChat()\"></mini-player>\n"+"\n"+"<div class=\"mini-player simple-text\" ng-if=\"broadcasterService.channel.preview=='prompt' && broadcasterService.broadcaster.userId == session.user.userId\">\n"+"<div class=\"text\">\n"+"<div class=\"title\" translate=\"profile_latest_broadcast\"></div>\n"+"<span class=\"owner\" translate=\"profile_connect_with_audience_broadcast\"></span>\n"+"</div>\n"+"<div class=\"actions\">\n"+"<button class=\"btn btn-primary owner\" ng-click=\"broadcasterService.goLive()\" translate=\"_golive\"></button>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"activity-panel social_links\" ng-if=\"broadcasterService.channel.snLinks\">\n"+"<div class=\"social_links_title primary-text\" translate=\"profile_social_title\"></div>\n"+"\n"+"<div class=\"connect-social-accounts\" ng-show=\"session.user.userId===broadcasterService.channel.userId\">\n"+"<p class=\"connect-body-text\" translate=\"profile_connect_social\"></p>\n"+"<a ng-click=\"openSettings('accounts')\" ng-href=\"/settings#accounts\" prevent-default=\"\" href=\"/settings#accounts\">\n"+"<button class=\"btn-confirm\"><i class=\"ynicon ynicon-settings\"></i>Connect</button>\n"+"</a>\n"+"</div>\n"+"\n"+"<div class=\"social_links_items\">\n"+"\n"+"<a class=\"social_link\" ng-repeat=\"(key,social) in broadcasterService.channel.snKeyWords\" ng-href=\"{{social.url}}\" target=\"_blank\" ng-style=\"{'background-image':'url(\'{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/social_profile/{{::key}}.png\')'}\" ng-if=\"key!='facebook' && key!='google'\">\n"+"<span class=\"social_title\">\n"+"{{social.nickname}} <span class=\"social_username\">{{social.username}}</span>\n"+"</span>\n"+"<span class=\"social_description\">{{social.description}}</span>\n"+"</a>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"activity-panel\" ng-if=\"broadcasterService.channel.biggestFans.length\">\n"+"<div class=\"online-fans-title\">\n"+"<span class=\"primary-text\" translate=\"profile_biggest_fans_last_thirty_days\"> </span>\n"+"</div>\n"+"<div class=\"activity-panel\">\n"+"<div class=\"panel-body\">\n"+"<div class=\"friends-list mini-scroll\" only-scroll ng-if=\"broadcasterService.channel.biggestFans.length > 0\">\n"+"<a\n"+"class=\"activity\"\n"+"ng-repeat=\"friend in broadcasterService.channel.biggestFans | filter:friendfilter | orderBy:'-bars'\"\n"+"ng-href=\"/{{::friend.profile}}\" prevent-default\n"+"ng-click=\"showProfileSummary(friend.userId)\">\n"+"<div class=\"profile-img thumb\" ng-style=\"::{'background': 'url('+(cdn.thumb+friend.userId)+'), url('+cdn.nothumb+') no-repeat'}\"></div>\n"+"<div class=\"status\">\n"+"<span class=\"name short-text\">{{::friend.name}}</span>\n"+"<div ng-if=\"friend.bars\" class=\"bars-text\">\n"+"<i class=\"ynbar ynicon ynicon-icon-bar\"></i> {{Api.squashedNumber(friend.bars) }}\n"+"</div>\n"+"\n"+"</div>\n"+"</a>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"column-list\" ng-if=\"broadcasterService.channel.moreBroadcasters.length\">\n"+"<div class=\"title  primary-text\" translate=\"profile_more_broadcasters\"></div>\n"+"<div class=\"column-scroll\">\n"+"<div ng-repeat=\"vip in ::broadcasterService.channel.moreBroadcasters\" class=\"list-item\">\n"+"<img class=\"circle-thumb\"\n"+"ng-src=\"{{::Api.generateDynamicApi('CHANNEL_IMAGE') + '/' + vip.userId + '/' + vip.userId + '.jpg'}}\"\n"+"fallback-src=\"{{::cdn.nothumb}}\"\n"+"ng-click=\"showProfileSummary(vip.userId)\" />\n"+"<div class=\"description short-text clickable\" ng-click=\"showProfileSummary(vip.userId)\">{{::vip.name}}</div>\n"+"<div class=\"fan-button-placeholder\" track-source=\"FANREC_SIDEBAR\" modelId=\"{{broadcasterService.channel.moreBroadcastersModelId}}\">\n"+"<div fan-button size=\"small\" channel=\"vip\"></div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"</div>-->\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/channel/channel.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/channel/channel.tpl.html","<div data-ui-view></div>\n"+"<div ng-show=\"broadcasterService.broadcaster.broadcastId || session.isBroadcasting\" ng-if=\"!broadcasterService.async && !swf.eob\" ng-include=\"'angularjsapp/src/app/states/main/channel/live/live.tpl.html'\"></div>\n"+"<div ng-if=\"broadcasterService.async\" ng-include=\"'angularjsapp/src/app/states/main/channel/async/async.tpl.html'\"></div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/channel/end-of-broadcast/end-of-broadcast.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/channel/end-of-broadcast/end-of-broadcast.tpl.html","<div class=\"end-of-broadcast-container\">\n"+"\n"+"<!-- HEADER -->\n"+"<div class=\"eob-header\">\n"+"<div class=\"broadcast-info\">\n"+"<a\n"+"class=\"thumb thumb-eob circle-thumb pull-left\"\n"+"ng-style=\"::{ background: 'url(' + vm.thumb +  '/' + vm.session.user.userId + '/' + vm.session.user.userId + '.jpg' + '), url({{vm.noThumb}}) no-repeat', 'background-size': 'cover' }\"\n"+"ng-href=\"/{{::vm.session.user.profile}}\" prevent-default\n"+"ng-click=\"vm.openBroadcasterProfile(vm.session.user.userId)\">\n"+"</a>\n"+"<div class=\"broadcaster-setup-description\">\n"+"<div class=\"short-text\" translate=\"eob_this_broadcast\"> - </div>&nbsp;\n"+"<span class=\"short-text bold\">{{::vm.swf.eob.duration}} </span>&nbsp;\n"+"<span class=\"short-text bold\">{{::vm.swf.eob.dropReason}} </span>&nbsp;\n"+"<span class=\"broadcaster-tags short-text bold\" translate=\"_on\"> </span> &nbsp;\n"+"<a\n"+"class=\"broadcaster-tags short-text bold link\"\n"+"ng-repeat=\"tag in vm.broadcast.broadcaster.tags\"\n"+"ng-href=\"/explore/{{tag}}\" prevent-default\n"+"ng-click=\"vm.goToTag(tag)\">\n"+"#{{tag}}\n"+"</a>\n"+"</div>\n"+"</div>\n"+"<button ng-if=\"vm.swf.eob !== undefined\" class=\"drop-broadcast btn btn-transparent active clear-eob\" ng-click=\"vm.goToMainState()\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"</div>\n"+"\n"+"\n"+"<!-- NON PARTNER STATS-->\n"+"<div ng-if=\"::(vm.swf.eob.partner!=1 && vm.swf.eob.partner!=2 && vm.swf.eob.partner!=6 && vm.swf.eob.partner!=7)\" class=\"stats-container\">\n"+"<div class=\"your-stats\">\n"+"<p translate=\"eob_your_stats\"></p>\n"+"</div>\n"+"<div class=\"details\">\n"+"<div class=\"detail-container\" ng-if=\"::vm.swf.eob.viewers >= 1\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-viewers\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\" >{{::vm.swf.eob.viewers}}</div>\n"+"<div class=\"title\" translate=\"_views\"></div>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"::vm.swf.eob.estimatedEarnings !== undefined\" class=\"detail-container earnings\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-user\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\">${{::vm.swf.eob.estimatedEarnings}}</div>\n"+"<div class=\"title\" translate=\"eob_premium_earnings\"></div>\n"+"<a href=\"/partners\" target=\"_blank\" translate=\"eob_apply_partner\"> </a>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"::vm.swf.eob.numMomentsCreated >= 1\" class=\"detail-container\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-broadcast\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\">{{::vm.swf.eob.numMomentsCreated}}</div>\n"+"<div ng-if=\"::vm.swf.eob.numMomentsCreated > 1\" class=\"title\" translate=\"eob_moments_created\"></div>\n"+"<div class=\"title\" ng-if=\"::vm.swf.eob.numMomentsCreated === 1\" translate=\"eob_moments_created_singular\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"detail-container\" ng-if=\"::vm.swf.eob.fansAdded >= 1\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-user\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\">{{::vm.swf.eob.fansAdded}}</div>\n"+"<div class=\"title\" translate=\"eob_newfans\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"detail-container\" ng-if=\"::vm.swf.eob.likes >= 1\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-thumb\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\">{{::vm.swf.eob.likes}}</div>\n"+"<div class=\"title\" translate=\"eob_likes\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"detail-container\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-level\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\">{{::vm.swf.eob.progress}}%</div>\n"+"<div class=\"title\" translate=\"eob_progress_to\" translate-values=\"{level:vm.swf.eob.nextLevel}\">{{::vm.swf.eob.nextLevel}}</div>\n"+"</div>\n"+"<div class=\"level-bar\">\n"+"<div class=\"total-progress pull-left\" ng-style=\"::{'width': vm.swf.eob.progress+'%'}\"></div>\n"+"<div class=\"last-progress pull-left\" ng-style=\"::{'width': vm.swf.eob.endLevel+'%'}\"></div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"<!-- PARTNER STATS-->\n"+"<div ng-if=\"::(vm.swf.eob.partner==1 || vm.swf.eob.partner==2 || vm.swf.eob.partner==6 || vm.swf.eob.partner==7)\" class=\"stats-container\">\n"+"<div class=\"your-stats\">\n"+"<p translate=\"eob_your_stats\"></p>\n"+"</div>\n"+"<div class=\"details\">\n"+"<div class=\"detail-container\" ng-if=\"::vm.swf.eob.viewers >= 1\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-viewers\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\" >{{::vm.swf.eob.viewers}}</div>\n"+"<div class=\"title\"translate=\"_views\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"detail-container earnings\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-user\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\">${{::vm.swf.eob.estimatedEarnings}}</div>\n"+"<div class=\"title\" translate=\"eob_premium_earnings\"></div>\n"+"\n"+"<div ng-if=\"vm.swf.eob.userId == vm.session.user.userId\">\n"+"<!-- apply to be a partner -->\n"+"<a class=\"short-text\" ng-if=\"::vm.swf.eob.partner==2\" href=\"/partners\" target=\"_blank\" translate=\"eob_apply_partner\"></a>\n"+"\n"+"<!-- accept update -->\n"+"<a class=\"short-text\" ng-if=\"::(vm.swf.eob.partner==6 || vm.swf.eob.partner==7)\" href=\"/partners\" target=\"_blank\" translate=\"eob_must_accept\"></a>\n"+"\n"+"<!-- has tipalti, view earnings -->\n"+"<a class=\"short-text\" ng-if=\"::(vm.swf.eob.partner==1 && vm.session.user.isTipaltiPayable)\" href=\"/partners/earnings\" target=\"_blank\"  translate=\"eob_view_monthly_earnings\"></a>\n"+"\n"+"<!-- doesn't have tipalti, update payment settings -->\n"+"<a class=\"short-text\" ng-if=\"::(vm.session.user.mcnTypeId !== '4' && vm.session.user.mcnTypeId !== '3' && vm.swf.eob.partner==1 && !vm.session.user.isTipaltiPayable)\" href=\"/partners/payment-settings\" target=\"_blank\"  translate=\"eob_tipalti\"></a>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"detail-container\" ng-if=\"::vm.swf.eob.subscriptionEarning >= 1\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-icon-subscribers\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\">\n"+"${{::vm.swf.eob.subscriptionEarnings ||0}}/mo\n"+"</div>\n"+"<div class=\"title\" translate=\"eob_sub_earnings\"></div>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"::vm.swf.eob.numMomentsCreated > 0\" class=\"detail-container\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-broadcast\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\">{{::vm.swf.eob.numMomentsCreated}}</div>\n"+"<div ng-if=\"::vm.swf.eob.numMomentsCreated > 1\" class=\"title\" translate=\"eob_moments_created\"></div>\n"+"<div class=\"title\" ng-if=\"::vm.swf.eob.numMomentsCreated === 1\" translate=\"eob_moments_created_singular\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"detail-container\" ng-if=\"::vm.swf.eob.fansAdded >= 1\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-user\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\">{{::vm.swf.eob.fansAdded}}</div>\n"+"<div class=\"title\" translate=\"eob_newfans\" ng-if=\"::vm.swf.eob.fansAdded > 1\"></div>\n"+"<div class=\"title\" translate=\"eob_newfan\" ng-if=\"::vm.swf.eob.fansAdded === 1\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"detail-container\" ng-if=\"::vm.swf.eob.subscribersAdded >= 1\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-icon-subscribers\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\">{{::vm.swf.eob.subscribersAdded}}</div>\n"+"<div class=\"title\" translate=\"ee_new_subs_count\" ng-if=\"::vm.swf.eob.subscribersAdded > 1\"></div>\n"+"<div class=\"title\" translate=\"ee_new_sub_count\" ng-if=\"::vm.swf.eob.subscribersAdded === 1\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"detail-container\" ng-if=\"::vm.swf.eob.likes >= 1\">\n"+"<div class=\"icon\">\n"+"<i class=\"ynicon ynicon-thumb\"></i>\n"+"</div>\n"+"<div class=\"info\">\n"+"<div class=\"stat\">{{::vm.swf.eob.likes}}</div>\n"+"<div class=\"title\" translate=\"eob_likes\"></div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- FAN LIST -->\n"+"\n"+"<div ng-if=\"vm.swf.eob.userId == vm.session.user.userId && vm.swf.eob.supportersCount > 0 && vm.sentThanks === false\"  class=\"supporter-container\">\n"+"<div class=\"title\">\n"+"\n"+"<p ng-if=\"::vm.swf.eob.supportersIncludesNewFans\" translate=\"eob_top_and_new_fans\"></p>\n"+"<p ng-if=\"::!vm.swf.eob.supportersIncludesNewFans\" translate=\"eob_top_fans\"></p>\n"+"<div ng-if=\"!vm.fanned\" class=\"fan-all-button\">\n"+"<p ng-click=\"vm.fanAll()\"class=\"fan-message\" translate=\"eob_fan_all\"></p>\n"+"<p class=\"plus\"> + </p>\n"+"</div>\n"+"<div ng-if=\"vm.fanned\" class=\"fan-all-button fanned\">\n"+"<p ng-click=\"vm.fanAll()\"class=\"fan-message\" translate=\"eob_all_fanned\"></p>\n"+"<p class=\"plus\"> + </p>\n"+"</div>\n"+"</div>\n"+"<div infinite-scroll=\"vm.loadMoreSupporters()\" class=\"supporter-list\">\n"+"<div class=\"supporter\" ng-repeat=\"supporter in vm.supporterList\" track-source=\"{{::(supporter.supporterType === 'fan' ? 'EOB_MANUAL_NEW' : 'EOB_MANUAL_TOP')}}\">\n"+"<a\n"+"class=\"thumb thumb-eob circle-thumb pull-left\"\n"+"ng-style=\"::{ background: 'url(' + vm.thumb + '/' + {{supporter.userId}}+ '/' + {{supporter.userId}} + '.jpg' + '), url({{vm.noThumb}}) no-repeat', 'background-size': 'cover' }\"\n"+"ng-href=\"/{{supporter.userId}}\" prevent-default\n"+"ng-click=\"vm.openBroadcasterProfile(supporter.userId)\">\n"+"</a>\n"+"<div class=\"center-block\">\n"+"<div class=\"top-line\">\n"+"<p class=\"profile short-text\">{{supporter.profile}}</p>\n"+"<user-badge class=\"user-badge\" role=\"{{::supporter.role}}\" level=\"{{::supporter.level}}\"></user-badge>\n"+"</div>\n"+"<!-- SPENDER Detail-->\n"+"<div ng-if=\"supporter.supporterType === 'spender'\" class=\"spender\">\n"+"<p class=\"detail\">#{{vm.supporterList.indexOf(supporter) - vm.swf.eob.subscribersAdded + 1}}</p>\n"+"<i class=\"ynbar ynicon ynicon-icon-bar\"></i>\n"+"</div>\n"+"\n"+"<!-- SUBSCRIBER Detail-->\n"+"<div ng-if=\"supporter.supporterType === 'subscriber'\" class=\"subscriber\">\n"+"<img ng-src=\"{{::vm.config.settings.BadgeBaseUrl}}/{{::vm.session.userId}}/1/badge@2x.png\">\n"+"<p class=\"detail\" translate=\"eob_new_subscriber\"></p>\n"+"</div>\n"+"\n"+"<!-- FAN Detail -->\n"+"<div ng-if=\"supporter.supporterType === 'fan'\" class=\"subscriber\">\n"+"<p class=\"detail\" translate=\"eob_fan_count\" translate-values=\"{count:supporter.extraData}\"></p>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"<div class=\"btn-small fan-button\" fan-button channel=\"supporter\" size=\"tiny\"></div>\n"+"</div>\n"+"\n"+"</div>\n"+"<!-- thanks box -->\n"+"<div class=\"thanks-container\">\n"+"\n"+"<h2 ng-if=\"::vm.swf.eob.supportersIncludesNewFans\" translate=\"eob_thanks_new\"></h2>\n"+"<h2 ng-if=\"::!vm.swf.eob.supportersIncludesNewFans\" translate=\"eob_thanks\"></h2>\n"+"\n"+"<p ng-if=\"::vm.swf.eob.supportersCount > 1\" translate=\"eob_send_thanks\" translate-values=\"{count:{{::vm.swf.eob.supportersCount}}}\"></p>\n"+"<p ng-if=\"::vm.swf.eob.supportersCount < 2\" translate=\"eob_send_thanks_singular\" translate-values=\"{count:{{::vm.swf.eob.supportersCount}}}\"></p>\n"+"\n"+"<div contenteditable\n"+"mentio=\"\"\n"+"mentio-typed-term=\"typedTerm\"\n"+"mentio-require-leading-space=\"true\"\n"+"class=\"editor form-control\"\n"+"style=\"display: block; margin: auto; height: 70px; width: 250px; text-align:left; padding-top: 6px; padding-left: 6px; line-height: 17px; overflow: scroll; font-size: 13px;\"\n"+"id=\"thanksComment\"\n"+"ng-model=\"thanksMessage.html\"\n"+"placeholder=\"{{'eob_thanks_placeholder' | translate }}\"\n"+"></div>\n"+"\n"+"<mentio-menu\n"+"mentio-for=\"'thanksComment'\"\n"+"mentio-trigger-char=\"'@'\"\n"+"mentio-items=\"vm.people\"\n"+"mentio-template-url=\"angularjsapp/src/app/components/mention/mention.tpl.html\"\n"+"></mentio-menu>\n"+"\n"+"<!-- attributes to be added above for mentions -->\n"+"<!-- mentio-search=\"vm.searchPeople(term)\"\n"+"mentio-select=\"vm.insertMention(item)\" -->\n"+"\n"+"<a ng-click=\"vm.thankAll()\"class=\"btn btn-blue\" translate=\"_post\"> </a>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- SOCIAL PANEL -->\n"+"<div ng-if=\"vm.swf.eob.userId == vm.session.user.userId && (vm.swf.eob.supportersCount < 1 || vm.sentThanks === true)\" class=\"social-panel\" ng-class=\"{'non-partner':vm.swf.eob.supportersCount < 1}\">\n"+"<div class=\"title\">\n"+"<p translate=\"eob_find_fans\"></p>\n"+"</div>\n"+"<h1 translate=\"eob_connect_to\"></h1>\n"+"\n"+"<!-- YOUTUBE -->\n"+"<div class=\"youtube-not-connected social-option\" ng-if=\"!vm.session.user.youTubeUserName\">\n"+"<div class=\"youtube-logo logo not-connected\">\n"+"<i class=\"ynicon ynicon-icon-social-yt2\"></i>\n"+"</div>\n"+"<div class=\"connect\">\n"+"<span ng-click=\"vm.session.connect('youtube','EOB', vm.session.user.userId)\" translate=\"_connect\"></span>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"youtube-connected social-option\" ng-if=\"vm.session.user.youTubeUserName\">\n"+"<div class=\"youtube-logo logo connected\">\n"+"<i class=\"ynicon ynicon-icon-social-yt2\"></i>\n"+"</div>\n"+"<div class=\"connect connected\">\n"+"<span translate=\"eob_connected\"></span>\n"+"<i class=\"ynicon ynicon-icon-check\"></i>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- TWITTER -->\n"+"<div class=\"twitter-not-connected social-option\" ng-if=\"!vm.session.user.twitterId\">\n"+"<div class=\"twitter-logo logo not-connected\">\n"+"<i class=\"ynicon ynicon-social-tw\"></i>\n"+"</div>\n"+"<div class=\"connect\">\n"+"<span ng-click=\"vm.session.connect('twitter','EOB', vm.session.user.userId)\" translate=\"_connect\"></span>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"twitter-connected social-option\"  ng-if=\"vm.session.user.twitterId\">\n"+"<div class=\"twitter-logo logo connected\">\n"+"<i class=\"ynicon ynicon-social-tw\"></i>\n"+"</div>\n"+"<div class=\"connect connected\">\n"+"<span translate=\"eob_connected\"></span>\n"+"<i class=\"ynicon ynicon-icon-check\"></i>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- INSTAGRAM -->\n"+"<div class=\"instagram-not-connected social-option\" ng-if=\"!vm.session.user.instagramId\">\n"+"<div class=\"instagram-logo logo not-connected\">\n"+"<i class=\"ynicon ynicon-social-insta\"></i>\n"+"</div>\n"+"<div class=\"connect\">\n"+"<span ng-click=\"vm.session.connect('instagram','EOB', vm.session.user.userId)\" translate=\"_connect\"></span>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"instagram-connected social-option\"  ng-if=\"vm.session.user.instagramId\">\n"+"<div class=\"instagram-logo logo connected\">\n"+"<i class=\"ynicon ynicon-social-insta\"></i>\n"+"</div>\n"+"<div class=\"connect connected\">\n"+"<span translate=\"eob_connected\"></span>\n"+"<i class=\"ynicon ynicon-icon-check\"></i>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- FACEBOOK -->\n"+"<div class=\"facebook-not-connected social-option\" ng-if=\"!vm.session.user.facebookId\">\n"+"<div class=\"facebook-logo logo not-connected\">\n"+"<i class=\"ynicon ynicon-social-fb\"></i>\n"+"</div>\n"+"<div class=\"connect\">\n"+"<span ng-click=\"vm.session.connect('facebook','EOB', vm.session.user.userId)\" translate=\"_connect\"></span>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"facebook-connected social-option\"  ng-if=\"vm.session.user.facebookId\">\n"+"<div class=\"facebook-logo logo connected\">\n"+"<i class=\"ynicon ynicon-social-fb\"></i>\n"+"</div>\n"+"<div class=\"connect connected\">\n"+"<span translate=\"eob_connected\"></span>\n"+"<i class=\"ynicon ynicon-icon-check\"></i>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- thanks confirmation -->\n"+"<div class=\"thanks-container\" ng-if=\"vm.sentThanks === true\">\n"+"<p ng-if=\"::vm.swf.eob.supportersCount > 1\" translate=\"eob_thanks_confirmation\" translate-values=\"{count:{{::vm.swf.eob.supportersCount}}}\"> </p>\n"+"<p ng-if=\"::vm.swf.eob.supportersCount < 2\" translate=\"eob_thanks_confirmation_singular\" translate-values=\"{count:{{::vm.swf.eob.supportersCount}}}\"></p>\n"+"\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/channel/live/live.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/channel/live/live.tpl.html","<div class=\"main-channel-detail fullscreen-{{fullscreenAspect}}\" ng-class=\"{ 'fullscreen': swf.fullscreenActive,'fullscreen-in': swf.fullscreenIn,'fullscreen-out': swf.fullscreenOut }\">\n"+"<div class=\"fullscreen-overlay\"></div>\n"+"<div class=\"main-player\">\n"+"<div class=\"player-header\" player-header></div>\n"+"<div class=\"player-overlay\" player-overlay></div>\n"+"<mini-overlay ng-if=\"guestService.guest && !swf.settingUpBroadcast\" type=\"broadcaster\"></mini-overlay>\n"+"<mini-overlay ng-if=\"(guestService.guest || guestService.pendingGuest) && !swf.settingUpBroadcast\" type=\"guest\"></mini-overlay>\n"+"<div class=\"player-main\" ng-class=\"{'dimmed': swf.dimmed===true}\">\n"+"<div class=\"player-error\" ng-if=\"show_noflash_message && !swf.ready && guestService.state == 'ready'\">\n"+"<img class=\"error-image\" ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/angularjsapp/src/assets/images/player/flash_player_icon_999.png\" />\n"+"<div class=\"error-title\">Adobe Flash Player</div>\n"+"<div class=\"error-subtitle\" translate=\"flashplayer_is_not_installed\"></div>\n"+"<a class=\"error-link\" target=\"_blank\" href=\"https://get2.adobe.com/flashplayer/\"><span translate=\"flashplayer_click_to_install_from\"></span> <br /><b>get2.adobe.com/flashplayer/</b></a>\n"+"</div>\n"+"\n"+"<div ng-if=\"(isViewer()) && !externalStreaming.streaming && !externalStreaming.active\">\n"+"<div class=\"moment-urge\" ng-if=\"swf.thumbs.length >= 4\" ng-click=\"captureMoment($event)\"></div>\n"+"<div id=\"flashObj1\" style=\"width:592px;height:444px;\" swfstudio></div>\n"+"</div>\n"+"<div ng-if=\"!isViewer() && isWebrtcBroadcast()\" ng-click=\"captureMoment($event)\" class=\"webrtcVideo\">\n"+"<div ng-if=\"::(!config.bootstrap.supportsCanvasStream)\">\n"+"<div ng-class=\"{'left-video-container': guestService.state != 'ready' && guestService.state != 'loading'}\">\n"+"<video id='bcVideo' camera-valid on-valid=\"validCamera()\" on-invalid=\"invalidCamera()\" broadcast-stream class=\"bcVideo\"></video>\n"+"</div>\n"+"<div ng-class=\"{'right-video-container': guestService.state != 'ready' && guestService.state != 'loading'}\">\n"+"<video id='guestVideo' guest-stream class=\"guestVideo\"></video>\n"+"</div>\n"+"</div>\n"+"<div ng-if=\"::(config.bootstrap.supportsCanvasStream)\" ng-class=\"::{'guest-stream': swf.broadcast.userId != session.user.userId && !swf.settingUpBroadcast}\" class=\"canvas-streaming\">\n"+"<div ng-class=\"{'left-video-container': guestService.state != 'ready' && guestService.state != 'loading'}\">\n"+"<canvas id=\"bcCanvas\" height=\"444\" width=\"592\" class=\"bcCanvas\"></canvas>\n"+"<video id='bcVideo' camera-valid on-valid=\"validCamera()\" on-invalid=\"invalidCamera()\" broadcast-stream class=\"bcVideo\"></video>\n"+"<video id=\"bcDesktop\" ng-src=\"{{streams.desktop}}\" class=\"bcDesktop\"></video>\n"+"</div>\n"+"<div ng-class=\"{'right-video-container': guestService.state != 'ready' && guestService.state != 'loading'}\">\n"+"<canvas id=\"guestCanvas\" height=\"444\" width=\"592\"  class=\"guestCanvas\"></canvas>\n"+"<video id=\"guestVideo\" guest-stream class=\"guestVideo\"></video>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"external-stream-info\" ng-class=\"{'page-1': externalStreaming.active, 'added': externalStreaming.added, 'page-2': externalStreaming.streaming }\">\n"+"<div class=\"info-page-1\">\n"+"<div class=\"info-title\">You can broadcast directly to YouNow using 3rd party video mixers and broadcasting tools.</div>\n"+"<ol>\n"+"<li>Download and install OBS (<a href=\"https://obsproject.com/\" target=\"_blank\">free download</a>) or another tool</li>\n"+"<li>Set the video size to 1280x720 (16:9) for best performance</li>\n"+"<li>Input your stream key into the tool as a \"Custom Streaming Server\"</li>\n"+"<label for=\"streamUrl\">Url:</label>\n"+"<input ng-model=\"externalStreaming.streamUrl\" name=\"streamUrl\" type=\"text\" autocomplete=\"off\" class=\"form-control\">\n"+"<label for=\"streamKey\">Key:</label>\n"+"<input ng-model=\"externalStreaming.streamKey\" name=\"streamKey\" type=\"text\" autocomplete=\"off\" class=\"form-control\">\n"+"<li>Pick a tag and description, then click \"Prepare Broadcast\"</li>\n"+"<li class=\"laststep\">Start streaming from your tool!\n"+"<div class=\"loader-light\"></div>\n"+"<span class=\"loading-text\">Checking...</span>\n"+"</li>\n"+"</ol>\n"+"<div>Click <a href=\"https://younow.zendesk.com/hc/en-us/articles/206439166-External-Streaming-Settings\" target=\"_blank\">here</a> for advanced instructions.</div>\n"+"</div>\n"+"<div class=\"info-page-2\" style=\"text-align: center;\">\n"+"<div class=\"info-title\">Your broadcast has begun!</div>\n"+"<div>Click <a ng-href=\"https://www.younow.com/{{::session.user.profile}}\" target=\"_blank\">here</a> to view it in a new tab (note: watching your own broadcast from the same computer can cause lag or echoing)</div>\n"+"<div class=\"externally-broadcasting animate-flicker\"><div></div></div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"player-footer\" player-footer></div>\n"+"</div>\n"+"<div class=\"main-chat\" channel-chat></div>\n"+"<div class=\"main-tags\">\n"+"<div class=\"desktop-promo\" ng-if=\"swf.settingUpBroadcast && Api.browser.name !== 'Electron'\">\n"+"<div class=\"desktop-promo-title\" translate=\"desktop_promo_title\"></div>\n"+"<div class=\"desktop-promo-subtitle\" translate=\"desktop_promo_subtitle\"></div>\n"+"<div class=\"desktop-promo-link\"><a href ng-click=\"downloadDesktop()\" translate=\"desktop_promo_link\"></a></div>\n"+"</div>\n"+"<div id=\"tag-queue\" ng-if=\"swf.queue.length && !swf.settingUpBroadcast\">\n"+"<div class=\"title\">\n"+"#<span translate=\"livebroadcast_of_broadcasters_on\" translate-values=\"{ count: broadcasterService.bcQueuePos, total: swf.queue.length, who: (swf.queue.length===1 ? 'broadcaster' : 'broadcasters') }\"></span>\n"+"<a\n"+"class=\"clickable primary-text\"\n"+"ng-href=\"/tag/{{broadcasterService.broadcaster.tags[0]}}\" prevent-default\n"+"ng-click=\"goIfNotBroadcasting(goto, 'explore/'+broadcasterService.broadcaster.tags[0])\">\n"+"#{{broadcasterService.broadcaster.tags[0]}}\n"+"</a>\n"+"<span ng-class=\"{'tag-queue-on': swf.showQueue}\">\n"+"<a class=\"clickable tag-link queue-on\" href ng-click=\"swf.toggleQueue(false)\" translate=\"_hide\"></a>\n"+"<a class=\"clickable tag-link queue-off\" href ng-click=\"swf.toggleQueue(true)\" translate=\"_show\"></a>\n"+"</span>\n"+"</div>\n"+"<div ng-if=\"swf.showQueue\">\n"+"<a class=\"queue-item thumb clickable\"\n"+"ng-repeat=\"person in swf.queue\"\n"+"ng-href=\"/{{person.profile}}\" prevent-default\n"+"ng-click=\"goIfNotBroadcasting(loadChannel, person.userId);trackBroadcaster();\"\n"+"tooltip-trigger=\"mouseenter\" tooltip-html-unsafe=\"{{::person.tooltip}}\">\n"+"<img class=\"thumb-image\"\n"+"ng-src=\"{{::person.thumb}}\"\n"+"fallback-src=\"{{::person.thumb_backup}}\" />\n"+"<div ng-if=\"::(broadcasterService.broadcaster.userId==person.userId||broadcasterService.broadcaster.userId==session.user.userId)\" class=\"thumb-label\">\n"+"<span ng-if=\"::(broadcasterService.broadcaster.userId==person.userId && person.userId!=session.user.userId)\" translate=\"_watching\"></span>\n"+"<span ng-if=\"::(person.userId==session.user.userId && swf.currentSession.isBroadcasting)\" translate=\"_you\"></span>\n"+"</div>\n"+"</a>\n"+"</div>\n"+"</div>\n"+"<promo-widget></promo-widget>\n"+"</div>\n"+"\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/channel/moment-collection/moment-collection-deeplink.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/channel/moment-collection/moment-collection-deeplink.tpl.html","<div class=\"deeplink-container\" ng-if=\"vm.moments\">\n"+"<div class=\"main-content-left\">\n"+"<div moment-card get-trending=\"vm.getTrending()\" delete=\"vm.deleteMoment()\" moment=\"{{::vm.moments}}\" update-on-fetch=\"vm.updateMoment(moment)\" ordinal-rank=\"0\"></div>\n"+"</div>\n"+"<div class=\"main-content-right\">\n"+"<div class=\"column-list\">\n"+"<div class=\"title primary-text\" translate=\"moment_deeplink_featuring\"></div>\n"+"<div class=\"column-scroll\">\n"+"<div class=\"list-item\">\n"+"<img class=\"circle-thumb\"\n"+"ng-src=\"{{::(vm.imageApis.thumb+vm.moments.broadcaster.userId)}}\"\n"+"fallback-src=\"{{::vm.imageApis.nothumb}}\"\n"+"ng-click=\"vm.openProfile(vm.moment.broadcaster.userId)\" />\n"+"<div class=\"description\">\n"+"<div class=\"short-text primary-text clickable\" ng-click=\"vm.openProfile(vm.moments.broadcaster.userId)\">\n"+"{{::vm.moments.broadcaster.name}}\n"+"</div>\n"+"<div class=\"short-text text-muted\" translate=\"_broadcaster\"></div>\n"+"</div>\n"+"<div track-source=\"MOMENT\" track-context=\"PROFILE\">\n"+"<div fan-button channel=\"vm.moments.broadcaster\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"list-item\">\n"+"<img class=\"circle-thumb\"\n"+"ng-src=\"{{(vm.imageApis.thumb+vm.currentMoment.owner.userId)}}\"\n"+"fallback-src=\"{{::vm.imageApis.nothumb}}\"\n"+"ng-click=\"vm.openProfile(vm.currentMoment.owner.userId)\"/>\n"+"<div class=\"description\">\n"+"<div class=\"short-text primary-text clickable\" ng-click=\"vm.openProfile(vm.currentMoment.owner.userId)\">\n"+"{{vm.currentMoment.owner.name}}\n"+"</div>\n"+"<div class=\"short-text text-muted\">{{vm.title}}</div>\n"+"</div>\n"+"<div track-source=\"MOMENT\" track-context=\"PROFILE\">\n"+"<div fan-button channel=\"vm.currentMoment.owner\"></div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/channel/moment/moment-deeplink.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/channel/moment/moment-deeplink.tpl.html","<div class=\"deeplink-container\" ng-if=\"vm.moment\">\n"+"<div class=\"main-content-left\">\n"+"<div moment-card get-trending=\"vm.getTrending()\" delete=\"vm.deleteMoment()\" moment=\"{{::vm.moment}}\" ordinal-rank=\"0\"></div>\n"+"</div>\n"+"<div class=\"main-content-right\">\n"+"<div class=\"column-list\">\n"+"<div class=\"title primary-text\" translate=\"moment_deeplink_featuring\"></div>\n"+"<div class=\"column-scroll\">\n"+"<div class=\"list-item\">\n"+"<img class=\"circle-thumb\"\n"+"ng-src=\"{{::(vm.imageApis.thumb+vm.moment.broadcaster.userId)}}\"\n"+"fallback-src=\"{{::vm.imageApis.nothumb}}\"\n"+"ng-click=\"vm.openProfile(vm.moment.broadcaster.userId)\" />\n"+"<div class=\"description\">\n"+"<div class=\"short-text primary-text clickable\" ng-click=\"vm.openProfile(vm.moment.broadcaster.userId)\">\n"+"{{::vm.moment.broadcaster.name}}\n"+"</div>\n"+"<div class=\"short-text text-muted\" translate=\"_broadcaster\"></div>\n"+"</div>\n"+"<div track-source=\"MOMENT\" track-context=\"PROFILE\">\n"+"<div fan-button channel=\"vm.moment.broadcaster\"></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"list-item\">\n"+"<img class=\"circle-thumb\"\n"+"ng-src=\"{{::(vm.imageApis.thumb+vm.moment.owner.userId)}}\"\n"+"fallback-src=\"{{::vm.imageApis.nothumb}}\"\n"+"ng-click=\"vm.openProfile(vm.moment.owner.userId)\"/>\n"+"<div class=\"description\">\n"+"<div class=\"short-text primary-text clickable\" ng-click=\"vm.openProfile(vm.moment.owner.userId)\">\n"+"{{::vm.moment.owner.name}}\n"+"</div>\n"+"<div class=\"short-text text-muted\">{{::vm.title}}</div>\n"+"</div>\n"+"<div track-source=\"MOMENT\" track-context=\"PROFILE\">\n"+"<div fan-button channel=\"vm.moment.owner\"></div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/channel/post.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/channel/post.tpl.html","\n");}]);angular.module("angularjsapp/src/app/states/main/desktop/desktop.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/desktop/desktop.tpl.html","<div class=\"desktop-downloaded\">\n"+"<b><span translate=\"desktop_download_success\">The YouNow Desktop App should now be downloading!</span></b><br><br>\n"+"<span translate=\"desktop_download_backup\">If not <a href=\"http://desktop.younow.com/download/version/latest\">click here</a> to download.</span><br><br>\n"+"<span translate=\"desktop_download_nextstep\">After installing, login and Go Live to use the screen sharing feature!</span>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/explore/explore.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/explore/explore.tpl.html","<div class=\"main-content explore-content clearfix live-thumbs\">\n"+"\n"+"<div class=\"main-content-left\"\n"+"ng-class=\"{'large': !showMiniplayer && !eps.list && query !== undefined}\"\n"+"infinite-scroll=\"getItems()\"\n"+"can-load=\"!finished\"\n"+"threshold=\"{{::(resultsView=='new' ? 0 : 200)}}\"\n"+"pagescroll=\"true\">\n"+"\n"+"\n"+"<!-- QUEUE (TAG) -->\n"+"<div class=\"explore_results\" ng-if=\"queue[0] && tag\">\n"+"<h3 class=\"explore_header\" translate=\"explore_tag_title_live\" translate-values=\"{tag:'#'+tag}\"></h3>\n"+"<div class=\"explore_items clearfix\">\n"+"<div ng-repeat=\"person in queue\" class=\"result\">\n"+"\n"+"<div\n"+"class=\"thumb box-thumb\"\n"+"ng-style=\"::{'background-image': 'url('+person.thumb+'), url('+cdn.nocover+')'}\"\n"+"ng-href=\"/{{::person.profile}}\"\n"+"ng-click=\"selectUser(person, false, true);trackBroadcaster();\"\n"+"prevent-default>\n"+"<a\n"+"ng-click=\"selectUser(person, false, true);trackBroadcaster();\"\n"+"ng-href=\"/{{::person.profile}}\"\n"+"prevent-default>\n"+"<img\n"+"alt=\"{{::person.profile}}\"\n"+"ng-src=\"{{::person.thumb}}\"\n"+"fallback-src={{::cdn.nothumb}}\n"+"class=\"user-profile\" >\n"+"</img>\n"+"</a>\n"+"<a\n"+"ng-click=\"showTag($event, tag)\"\n"+"ng-href=\"/explore/{{::tag}}\"\n"+"class=\"user-tag short-text\"\n"+"prevent-default>\n"+"#{{::tag}}\n"+"</a>\n"+"<div class=\"tag-fade\"></div>\n"+"</div>\n"+"<div class=\"result-text\">\n"+"<a\n"+"ng-href=\"/{{::person.profile}}\" prevent-default\n"+"ng-click=\"showProfileSummary(person.userId)\"\n"+"class=\"result-text text1 name short-text\">\n"+"<i class=\"ynicon ynicon-level\"></i>{{::person.level}} {{::person.fullName}}\n"+"</a>\n"+"<span>\n"+"<i class=\"ynicon ynicon-broadcast pull-left\"></i>\n"+"<span class=\"user-status pull-left\"> <span translate=\"_live\"></span> &#8226;</span>\n"+"</span>\n"+"<div ng-if=\"::person.viewers!=undefined\" class=\"user-viewers\">\n"+"<i class=\"ynicon ynicon-viewers\"></i> {{::person.viewers}}\n"+"</div>\n"+"<div ng-if=\"::person.viewers==undefined\" class=\"user-fans\">{{::person.totalFans || person.fans}} fans</div>\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"<div class=\"explore_more\" ng-if=\"queueMore\" ng-click=\"getQueue()\">\n"+"<span ng-if=\"getQueueLoading\">Loading...</span>\n"+"<span ng-if=\"!getQueueLoading\">View more</span>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- ITEMS (TAG) -->\n"+"<div class=\"explore_results\" ng-if=\"resultsView=='new' && results[0]\" ng-class=\"{tag:tag}\">\n"+"<h3 class=\"explore_header\" translate=\"explore_tag_title_best\" translate-values=\"{tag:tag}\"></h3>\n"+"<div class=\"explore_items clearfix\">\n"+"<div ng-repeat=\"person in results\" class=\"result\">\n"+"\n"+"<div\n"+"class=\"tagged-cover thumb box-thumb\"\n"+"ng-style=\"::{'background-image': 'url('+person.cover+'), url('+cdn.nocover+')'}\"\n"+"ng-href=\"/{{::person.profile}}\"\n"+"ng-click=\"selectUser(person, false, true);trackBroadcaster();\"\n"+"prevent-default>\n"+"</div>\n"+"<a\n"+"ng-click=\"selectUser(person, false, true);trackBroadcaster();\"\n"+"ng-href=\"/{{::person.profile}}\"\n"+"class=\"tagged-thumb\"\n"+"prevent-default>\n"+"<img\n"+"alt=\"{{::person.profile}}\"\n"+"ng-src=\"{{::person.thumb}}\"\n"+"fallback-src={{::cdn.nothumb}}\n"+"class=\"thumb circle-thumb\" >\n"+"</img>\n"+"</a>\n"+"<div class=\"tagged-text\">\n"+"<a\n"+"ng-href=\"/{{::person.profile}}\" prevent-default\n"+"ng-click=\"showProfileSummary(person.userId)\"\n"+"class=\"tagged-title name short-text\">\n"+"<i class=\"ynicon ynicon-level\"></i>{{::person.level}} {{::person.fullName}}\n"+"</a>\n"+"<div class=\"tagged-fans user-fans\">{{::person.totalFans || person.fans}} fans</div>\n"+"<div class=\"tagged-desc user-fans\">{{::person.desc}}</div>\n"+"</div>\n"+"\n"+"<div class=\"tagged-button wide_button_container\" fan-button channel=\"person\" classname=\"wide\"></div>\n"+"\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<!-- ITEMS (ALL or SEARCH) -->\n"+"<div class=\"explore_results\" ng-if=\"resultsView=='old'\">\n"+"<h3 class=\"explore_header\" ng-if=\"!tag\" translate=\"explore_header\"></h3>\n"+"<h3 class=\"explore_header\" ng-if=\"tag\" translate=\"explore_tag_title\" translate-values=\"{tag:tag}\"></h3>\n"+"<h3 class=\"explore_header\" ng-if=\"noresults\" translate=\"explore_no_user_found\"></h3>\n"+"<div ng-repeat=\"person in results\" class=\"result\">\n"+"<div\n"+"class=\"thumb box-thumb\"\n"+"ng-href=\"/{{::person.profile}}\"\n"+"ng-click=\"selectUser(person, false, true);trackBroadcaster();\"\n"+"prevent-default>\n"+"<img\n"+"alt=\"{{::person.profile}}\"\n"+"ng-src=\"{{::person.thumb}}\"\n"+"fallback-src=\"{{::person.thumb_backup}}\"\n"+"class=\"user-profile\" >\n"+"</img>\n"+"<a\n"+"ng-if=\"person.tag\"\n"+"ng-click=\"showTag($event, person.tag)\"\n"+"ng-href=\"/explore/{{::person.tag}}\"\n"+"class=\"user-tag short-text\"\n"+"prevent-default>\n"+"#{{::person.tag}}\n"+"</a>\n"+"<div class=\"tag-fade\"></div>\n"+"</div>\n"+"<a\n"+"ng-href=\"/{{::person.profile}}\" prevent-default\n"+"ng-click=\"showProfileSummary(person.userId)\"\n"+"class=\"result-text text1 name short-text\">\n"+"<i class=\"ynicon ynicon-level\"></i>{{::person.level}} {{::person.fullName}}\n"+"</a>\n"+"<div class=\"result-text text2\">\n"+"<span>\n"+"<i ng-if=\"::person.tag\" class=\"ynicon ynicon-broadcast pull-left\"></i>\n"+"<span ng-if=\"::person.tag\" class=\"user-status pull-left\"> <span translate=\"_live\"></span> &#8226;</span>\n"+"</span>\n"+"<div ng-if=\"::person.viewers!=undefined\" class=\"user-viewers\">\n"+"<i class=\"ynicon ynicon-viewers\"></i> {{::person.viewers}}\n"+"</div>\n"+"<div ng-if=\"::person.viewers==undefined\" class=\"user-fans\">{{::person.totalFans || person.fans}} fans</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"<div class=\"main-content-right\" ng-if=\"showMiniplayer || (eps.list && eps.list.length > 0) || !query\">\n"+"\n"+"<!-- MINI PLAYER -->\n"+"<mini-player ng-if=\"showMiniplayer && broadcasterService.exploreBroadcaster && broadcasterService.exploreBroadcaster.media\" broadcast=\"broadcasterService.exploreBroadcaster\" show-broadcast=\"showBroadcast()\"></mini-player>\n"+"\n"+"<!-- vip list -->\n"+"<div class=\"column-list\" ng-if=\"!query\" top-broadcasters-height>\n"+"<div class=\"title primary-text\" translate=\"explore_topbroadcasters\"></div>\n"+"<div class=\"column-scroll mini-scroll\">\n"+"<div ng-repeat=\"vip in ::vips.list\" class=\"list-item\">\n"+"<img class=\"circle-thumb\"\n"+"ng-src=\"{{::vip.thumbnail}}}\"\n"+"fallback-src=\"{{::cdn.nothumb}}\"\n"+"ng-click=\"showProfileSummary(vip.userId)\" />\n"+"<div class=\"description short-text clickable\" ng-click=\"showProfileSummary(vip.userId)\">{{::vip.name}}</div>\n"+"<div class=\"fan-button-placeholder\" track-source=\"EXPLORE_VIP\">\n"+"<div fan-button size=\"small\" channel=\"vip\"></div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<!-- ep list -->\n"+"<div class=\"column-list\" ng-if=\"eps.list && eps.list.length > 0\">\n"+"<div class=\"title\" translate=\"_editors_choice\"></div>\n"+"<div class=\"column-scroll mini-scroll\">\n"+"<div ng-repeat=\"ep in ::eps.list\" class=\"list-item\">\n"+"<img class=\"circle-thumb\"\n"+"ng-src=\"{{::cdn.thumb + '/' + ep.userId + '/' + ep.userId + '.jpg' }}\"\n"+"fallback-src=\"{{::cdn.nothumb}}\"\n"+"ng-click=\"showProfileSummary(ep.userId)\"/>\n"+"<div class=\"description short-text clickable\" ng-click=\"showProfileSummary(ep.userId)\">{{::ep.name}}</div>\n"+"<div class=\"fan-button-placeholder\" track-source=\"EXPLORE_EP\">\n"+"<div fan-button size=\"small\" channel=\"ep\"></div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/leaderboards/leaderboard-header.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/leaderboards/leaderboard-header.tpl.html","<div class=\"lb-heading\" id=\"lb-broadcasters\" ng-style=\"::{'border-bottom': '3px solid' + color}\">\n"+"<div class=\"icon-cat-container\" ng-style=\"::{'background-color': color}\">\n"+"<span class=\"ynicon {{::icon}}\"></span>\n"+"</div>\n"+"<h1 class=\"lb-title\" translate=\"{{::title}}\"></h1>\n"+"<h2 class=\"lb-time\" ng-if=\"time\">{{time.range}} hours</h2>\n"+"<h2 class=\"lb-time\" ng-if=\"!time\"translate=\"leaderboards_latest_picks\"></h2>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/leaderboards/leaderboard-single.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/leaderboards/leaderboard-single.tpl.html","<div class=\"lb-cell\" ng-repeat=\"cell in cells\">\n"+"<div class=\"lb-cell-inner\">\n"+"<span class=\"lb-position\" ng-if=\"::(target !== 'editors_choice')\">{{::cell.position}}</span>\n"+"<span class=\"ynicon ynicon-icon_editorschoice\" ng-if=\"::(target === 'editors_choice')\"></span>\n"+"<img class=\"lb-thumb\" ng-src=\"{{::cell.src}}\" ng-attr-alt=\"{{::cell.profile + ' thumbnail'}}\" fallback-src=\"{{nothumb}}\" ng-click=\"showProfileSummary(cell.userId)\"/>\n"+"<div class=\"lb-user-info\">\n"+"<span class=\"lb-username short-text\" ng-click=\"showProfileSummary(cell.userId)\">{{::cell.profile}}</span>\n"+"<span class=\"lb-likes short-text\" ng-if=\"::(target === 'editors_choice')\">{{::cell.totalFansSquashed}} <span translate=\"_fans\"></span></span>\n"+"<span class=\"lb-likes short-text\" ng-if=\"::(target === 'top_broadcasters' || target === 'moment_creators')\">{{::cell.likes }} <span translate=\"eob_likes\"></span></span>\n"+"<span class=\"lb-likes lb-fans short-text\" ng-if=\"::(target === 'top_fans')\"><span class=\"ynicon ynicon-icon-bar\"></span> {{::cell.fanList}} <span ng-if=\"::cell.moreFans\" translate=\"_more\"></span></span>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"fan-button-container\" track-source=\"{{::dataTracking[target]}}\" track-context=\"LEADBOARDS\">\n"+"<div fan-button channel=\"cell\" size=\"tiny\" track-source=\"{{::dataTracking[target]}}\"></div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/leaderboards/leaderboards.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/leaderboards/leaderboards.tpl.html","<div id=\"leaderboards\">\n"+"<div id=\"leaderboard-container\"> <!-- scroll on here -->\n"+"\n"+"<div class=\"leaderboard-headers\">\n"+"<div class=\"leaderboard\">\n"+"<leaderboard-header title=\"leaderboards_editors_choice\" icon=\"ynicon-icon_editorschoice\" time=\"vm.leaderboards.editorsChoice.time\"></leaderboard-header>\n"+"</div>\n"+"\n"+"<div class=\"leaderboard\">\n"+"<leaderboard-header title=\"leaderboards_top_broadcasters\" icon=\"ynicon-icon-topbroadcaster\" time=\"vm.leaderboards.topBroadcasters.time\"></leaderboard-header>\n"+"</div>\n"+"\n"+"<div class=\"leaderboard\">\n"+"<leaderboard-header title=\"leaderboards_top_fans\" icon=\"ynicon-icon-topfans\" time=\"vm.leaderboards.topFans.time\"></leaderboard-header>\n"+"</div>\n"+"\n"+"<div class=\"leaderboard\">\n"+"<leaderboard-header title=\"leaderboards_top_moment_create\" icon=\"ynicon-icon_moments\" time=\"vm.leaderboards.momentCreators.time\"></leaderboard-header>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"leaderboard-lists\">\n"+"<div class=\"leaderboard mini-scroll\" only-scroll infinite-scroll=\"vm.fetchMoreInLeaderBoard(vm.leaderboards.editorsChoice)\">\n"+"<leaderboard target=\"editors_choice\" list=\"vm.leaderboards.editorsChoice\"></leaderboard>\n"+"</div>\n"+"\n"+"<div class=\"leaderboard mini-scroll\" only-scroll infinite-scroll=\"vm.fetchMoreInLeaderBoard(vm.leaderboards.topBroadcasters)\">\n"+"<leaderboard target=\"top_broadcasters\" list=\"vm.leaderboards.topBroadcasters\"></leaderboard>\n"+"</div>\n"+"\n"+"<div class=\"leaderboard mini-scroll\" only-scroll infinite-scroll=\"vm.fetchMoreInLeaderBoard(vm.leaderboards.topFans)\">\n"+"<leaderboard target=\"top_fans\" list=\"vm.leaderboards.topFans\"></leaderboard>\n"+"</div>\n"+"\n"+"<div class=\"leaderboard mini-scroll\" only-scroll infinite-scroll=\"vm.fetchMoreInLeaderBoard(vm.leaderboards.momentCreators)\">\n"+"<leaderboard target=\"moment_creators\" list=\"vm.leaderboards.momentCreators\"></leaderboard>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/main.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/main.tpl.html","<div data-header></div>\n"+"\n"+"<div class=\"container\" id=\"main\" ng-class=\"{banned: session.user.banId !== 0, 'sticky-active': $root.notifications.sticky.active}\">\n"+"<div data-leftsidebar></div>\n"+"<div class=\"main-content\" data-ui-view></div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/missing/missing.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/missing/missing.tpl.html","<div style=\"width:800px;height:150px;margin-left:auto;margin-right:auto;text-align:center;font-family:Arial, Helvetica, sans-serif;font-size:26px;margin-top:20px;color:#555;text-align:center;margin-left:auto;margin-right:auto;background:#dcdcdc;text-align:center;vertical-align:middle;-moz-border-radius:15px;border-radius:15px;\">\n"+"<div style=\"position:relative;text-align:center;top:25px;\" translate=\"missing_user_doesnot_exist\" translate-values=\"{ value: '{{username}}' }\"></div>\n"+"<div style=\"position:relative;text-align:center;top:40px;\">\n"+"<a href=\"/\">\n"+"<img ng-src=\"{{::cdn.base}}/images/btn_watchlivebroadcasts.png\" name=\"watchbutton\" border=\"0\"></a>\n"+"</div>\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/states/main/moments-feed/moments-feed.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/moments-feed/moments-feed.tpl.html","<div class=\"moment-feed\">\n"+"<div class=\"main-content-left\">\n"+"<div class=\"header\">\n"+"<h3 translate = \"my_feed_title\" ng-class=\"{'active' : vm.currentFeed === 'MOMENT_FEED'}\" ng-click=\"vm.getItems()\"></h3>\n"+"<h3 translate=\"trending_moments_title\" ng-if=\"::vm.inExperiment\" ng-class=\"{'active' : vm.currentFeed === 'YOUNOW_LB_TRENDING_MOMENTS'}\" ng-click=\"vm.getTrendingMoments()\"></h3>\n"+"</div>\n"+"\n"+"<div infinite-scroll=\"vm.getMoreMoments()\" can-load=\"!vm.finished\" threshold=\"300\" pagescroll=\"true\">\n"+"<div ng-if=\"vm.moments\">\n"+"<ul class=\"moments\">\n"+"<li ng-repeat=\"moment in vm.moments track by $id(moment)\">\n"+"<div moment-card get-trending=\"vm.getTrendingMoments(vm.currentFeed)\" state=\"vm.currentFeed\" delete=\"vm.removeMoment(moment)\" moment=\"{{::moment}}\" hide-collection=\"vm.removeMoment(moment)\" ordinal-rank=\"{{::$index}}\"></div>\n"+"</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"main-content-right\">\n"+"<h4 class=\"primary-text\" translate=\"moment_feed_education\"></h4>\n"+"<div class=\"moment-education\" translate=\"moment_feed_desc\"></div>\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/main/settings/settings.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/main/settings/settings.tpl.html","<div class=\"settings-page\">\n"+"<div class=\"settings-for\" ng-if=\"session.administrator\">\n"+"ADMIN: Adjust settings for: <input type=\"text\" ng-model=\"onbehalf.userId\" ng-blur=\"onbehalf.update()\">\n"+"<a href=\"#\" ng-if=\"onbehalf.userId!=session.user.userId && onbehalf.userId!=0\" ng-click=\"onbehalf.reset()\">Reset (back to my settings)</a>\n"+"</div>\n"+"<div class=\"navigation\">\n"+"<div class=\"tab-header\" ng-class=\"{'active': page=='info'}\" ng-click=\"switchTab('info')\" translate=\"settings_tab_information\"></div>\n"+"<div class=\"tab-header\" ng-class=\"{'active': page=='notifications'}\" ng-click=\"switchTab('notifications')\" translate=\"settings_tab_notifications\"></div>\n"+"<div class=\"tab-header\" ng-class=\"{'active': page=='accounts'}\" ng-click=\"switchTab('accounts')\" translate=\"settings_tab_connected_accounts\"></div>\n"+"<div class=\"tab-header\" ng-class=\"{'active': page=='privacy'}\" ng-click=\"switchTab('privacy')\" translate=\"settings_tab_privacy\"></div>\n"+"<div class=\"tab-header\" ng-class=\"{'active': page=='subscriptions'}\" ng-click=\"switchTab('subscriptions')\" translate=\"settings_tab_subscriptions\"></div>\n"+"</div>\n"+"<div class=\"pages\" ng-show=\"settings\">\n"+"<div class=\"info-page\" ng-show=\"page=='info'\" ng-class=\"{'edit-mode':editing}\">\n"+"<form novalidate name=\"infoForm\">\n"+"<div class=\"form-horizontal\">\n"+"<a class=\"pull-right\" ng-click=\"startEdit()\" href=\"javascript:void(0)\" translate=\"_edit\"></a>\n"+"<div class=\"control-group control-nickname\">\n"+"<label class=\"control-label pull-left\" translate=\"settings_nickname\"></label>\n"+"<div class=\"controls pull-left\">\n"+"<div class=\"username editable\">\n"+"<span class=\"edit-hide profileUrlString\">{{settings.user.profile}}</span>\n"+"<div class=\"edit-field\">\n"+"<input placeholder=\"{{::('settings_nickname') | translate}}\"\n"+"type=\"text\"\n"+"maxlength=\"25\"\n"+"class=\"form-control\"\n"+"ng-model=\"settings.user.profile\"\n"+"ng-change=\"toEdit('profileUrlString', settings.user.profile)\">\n"+"</div>\n"+"</div>\n"+"<div class=\"url\">\n"+"<a ng-href=\"{{::config.settings.ServerHomeBaseUrl}}{{settings.user.profile}}\">{{::config.settings.ServerHomeBaseUrl}}{{settings.user.profile}}</a>\n"+"</div>\n"+"<div class=\"nickname-warning\">\n"+"{{ 'settings_nickname_warning' | translate }}\n"+"</div>\n"+"<div class=\"checkbox\">\n"+"<input type=\"checkbox\"\n"+"ng-model=\"settings.user.useprofile\"\n"+"ng-change=\"toEdit('useprofile', settings.user.useprofile)\"\n"+"ng-true-value=\"1\"\n"+"ng-false-value=\"0\"\n"+"ng-checked=\"settings.user.useprofile===1\"\n"+">\n"+"{{ 'settings_nickname_tooltip' | translate }}\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"control-group\">\n"+"<label class=\"control-label pull-left\" translate=\"settings_email\"></label>\n"+"<div class=\"controls pull-left\">\n"+"<div class=\"username editable\">\n"+"<span class=\"edit-hide emailAddress\">{{settings.user.email}}</span>\n"+"<div class=\"edit-field\">\n"+"<input placeholder=\"{{::('settings_email') | translate}}\"\n"+"name=\"info.email\"\n"+"class=\"form-control\"\n"+"type=\"text\"\n"+"ng-model=\"settings.user.email\"\n"+"ng-change=\"toEdit('emailAddress', settings.user.email)\"\n"+"ng-pattern=\"emailRegex\"\n"+"tooltip=\"Invalid email\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-placement=\"top error\"\n"+"yn-valid>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<i class=\"ynicon ynicon-icon-check isEmailConfirmed\" ng-if=\"session.user.isEmailConfirmed==1\"></i>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"control-group\">\n"+"<label class=\"control-label pull-left\" translate=\"settings_mailing_address\"></label>\n"+"<div class=\"controls pull-left\">\n"+"<div class=\"address editable\">\n"+"<span class=\"edit-hide address1\">{{settings.user.mailAddress1}}</span>\n"+"<br class=\"edit-hide\">\n"+"<span class=\"edit-hide address2\">{{settings.user.mailAddress2}}</span>\n"+"<div class=\"edit-field\">\n"+"<input placeholder=\"{{::('settings_mailing_address_placeholder1') | translate}}\"\n"+"name=\"info.adress1\"\n"+"class=\"form-control\"\n"+"type=\"text\"\n"+"ng-model=\"settings.user.mailAddress1\"\n"+"ng-change=\"toEdit('mailAddress1', settings.user.mailAddress1)\"\n"+"ng-maxlength=\"50\"\n"+"tooltip=\"Invalid address\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-position=\"top error\"\n"+"yn-valid><br>\n"+"<input placeholder=\"{{::('settings_mailing_address_placeholder2') | translate}}\"\n"+"name=\"info.address2\"\n"+"class=\"form-control\"\n"+"type=\"text\"\n"+"ng-model=\"settings.user.mailAddress2\"\n"+"ng-change=\"toEdit('mailAddress2', settings.user.mailAddress2)\"\n"+"ng-maxlength=\"50\"\n"+"tooltip=\"Invalid address\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-position=\"top error\"\n"+"yn-valid></div>\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"control-group\">\n"+"<label class=\"control-label pull-left\" translate=\"settings_city\"></label>\n"+"<div class=\"controls pull-left\">\n"+"<div class=\"city editable\">\n"+"<span class=\"edit-hide city\">{{settings.user.mailCity}}</span>\n"+"<div class=\"edit-field\">\n"+"<input placeholder=\"{{::('settings_city') | translate}}\"\n"+"name=\"info.city\"\n"+"type=\"text\"\n"+"class=\"form-control\"\n"+"ng-model=\"settings.user.mailCity\"\n"+"ng-change=\"toEdit('mailCity', settings.user.mailCity)\"\n"+"ng-pattern=\"'^[^!-&(-,.-@\[-`{-~]*$'\"\n"+"ng-maxlength=\"25\"\n"+"tooltip=\"Invalid city\"\n"+"tooltip-trigger=\"show\"\n"+"tooltip-append-to-body=\"true\"\n"+"tooltip-position=\"top error\"\n"+"yn-valid>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"control-group\">\n"+"<label class=\"control-label pull-left\" translate=\"settings_state\"></label>\n"+"<div class=\"controls pull-left\">\n"+"<div class=\"state editable\">\n"+"<span class=\"edit-hide stateCode\">{{select.state[settings.user.mailState]}}</span>\n"+"<div class=\"edit-field\">\n"+"<select id=\"stateCode\"\n"+"class=\"form-control\"\n"+"ng-model=\"settings.user.mailState\"\n"+"ng-change=\"toEdit('mailState', settings.user.mailState)\"\n"+"ng-options=\"option.code as option.name for option in state\">\n"+"</select>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"control-group\">\n"+"<label class=\"control-label pull-left\" translate=\"settings_country\"></label>\n"+"<div class=\"controls pull-left\">\n"+"<div class=\"country editable\">\n"+"<span class=\"edit-hide countryCode\">{{select.country[settings.user.mailCountry]}}</span>\n"+"<div class=\"edit-field\">\n"+"<select id=\"countryCode\"\n"+"class=\"form-control\"\n"+"ng-model=\"settings.user.mailCountry\"\n"+"ng-change=\"toEdit('mailCountry', settings.user.mailCountry)\"\n"+"ng-options=\"option.code as option.name for option in country\">\n"+"</select>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"control-group\">\n"+"<label class=\"control-label pull-left\" translate=\"settings_locale\"></label>\n"+"<div class=\"controls pull-left\">\n"+"<div class=\"locales editable\">\n"+"<span class=\"edit-hide localName\">{{select.locale[settings.user.locale]}}</span>\n"+"<div class=\"edit-field\">\n"+"<select id=\"locale\"\n"+"class=\"form-control\"\n"+"ng-model=\"settings.user.locale\"\n"+"ng-change=\"toEdit('locale', settings.user.locale)\"\n"+"ng-options=\"option.code as option.name for option in locale\">\n"+"</select>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"control-group\" ng-if=\"(settings.user.disabledGoodies!=undefined)\">\n"+"<label class=\"control-label pull-left\" translate=\"settings_gift_management\"></label>\n"+"<div class=\"controls\">\n"+"<div class=\"checkbox\">\n"+"<input type=\"checkbox\"\n"+"ng-model=\"settings.user.disabledGoodies.TIP\"\n"+"ng-change=\"toEditGoodies('TIP', settings.user.disabledGoodies.TIP)\"\n"+"ng-true-value=\"false\"\n"+"ng-false-value=\"true\"\n"+"ng-checked=\"!settings.user.disabledGoodies.TIP\"\n"+">\n"+"<span translate=\"settings_enable_tips\"></span>\n"+"</div>\n"+"<div class=\"text-muted\" translate=\"settings_enable_tips_info\">\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"control-group\">\n"+"<label class=\"control-label pull-left\" translate=\"settings_tshirt_size\"></label>\n"+"<div class=\"controls pull-left\">\n"+"<t-shirt-size class=\"editable\">\n"+"<span class=\"edit-hide tshirt\">{{select.tshirt[settings.user.tshirt]}}</span>\n"+"<div class=\"edit-field\">\n"+"<select id=\"tshirt\"\n"+"class=\"form-control\"\n"+"ng-model=\"settings.user.tshirt\"\n"+"ng-change=\"toEdit('tshirt', settings.user.tshirt)\"\n"+"ng-options=\"option.code as option.name for option in tshirt\">\n"+"</select>\n"+"</div>\n"+"</t-shirt-size>\n"+"<div class=\"text-muted\" translate=\"settings_tshirt_size_tooltip\">\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"control-group\">\n"+"<label class=\"control-label pull-left\" translate=\"settings_gender\"></label>\n"+"<div class=\"controls pull-left\">\n"+"<div class=\"editable\">\n"+"<span class=\"edit-hide gender\">{{select.gender[settings.user.gender]}}</span>\n"+"<div class=\"edit-field\">\n"+"<select id=\"gender\"\n"+"class=\"form-control\"\n"+"ng-model=\"settings.user.gender\"\n"+"ng-change=\"toEdit('gender', settings.user.gender)\"\n"+"ng-options=\"option.code as option.name for option in gender\">\n"+"</select>\n"+"</div>\n"+"</div>\n"+"<div class=\"text-muted\" translate=\"settings_gender_tooltip\">\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"control-group\">\n"+"<label class=\"control-label pull-left\">Stream URL</label>\n"+"<div class=\"controls pull-left\">\n"+"<div class=\"editable\">\n"+"<span class=\"streamurl\">\n"+"{{settings.directStreaming.url}}\n"+"</span>\n"+"</div>\n"+"<div class=\"text-muted\">\n"+"You can broadcast directly to YouNow using 3rd party video mixers and broadcasting tools like <a href=\"https://obsproject.com/\" target=\"_blank\">OBS</a>. Click <a href=\"https://younow.zendesk.com/hc/en-us/articles/206439166-External-Streaming-Settings\" target=\"_blank\">here</a> for advanced instructions.\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"control-group\">\n"+"<label class=\"control-label pull-left\">Stream Key</label>\n"+"<div class=\"controls pull-left\">\n"+"<div class=\"editable\">\n"+"<div class=\"streamkey\">\n"+"{{settings.directStreaming.stream}} - <a href=\"#\" ng-click=\"resetStreamKey()\">Reset</a>\n"+"</div>\n"+"</div>\n"+"<div class=\"text-muted\">\n"+"Use this unique key to log into 3rd party tools like OBS.\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"edit-actions\">\n"+"<button class=\"btn btn-primary\" type=\"button\" ng-click=\"saveChanges()\" translate=\"_save\"></button>\n"+"<button class=\"btn btn-cancel\" type=\"button\" ng-click=\"cancelEdit()\" translate=\"_cancel\"></button>\n"+"</div>\n"+"</div>\n"+"</form>\n"+"</div>\n"+"<div class=\"notifications-page\" ng-show=\"page=='notifications'\" ng-class=\"{'edit-mode':editing}\">\n"+"<div class=\"form-horizontal\" ng-if=\"pushEnabled\">\n"+"<fieldset class=\"parent-fieldset\">\n"+"<div class=\"push-settings\">\n"+"<legend translate=\"settings_desktop_push_heading\"></legend>\n"+"<div>\n"+"<input type=\"checkbox\"\n"+"ng-model=\"pushSubscribed\"\n"+"ng-change=\"togglePushSubscribed(pushSubscribed)\"\n"+"ng-true-value=\"1\"\n"+"ng-false-value=\"0\"\n"+"ng-checked=\"pushSubscribed===1\">\n"+"<span translate=\"settings_desktop_push_description\"></span>\n"+"</div>\n"+"</div>\n"+"</fieldset>\n"+"</div>\n"+"<div class=\"form-horizontal\" ng-if=\"settings.filterNotifications != undefined\">\n"+"<fieldset class=\"parent-fieldset\">\n"+"<div class=\"filter-settings\">\n"+"<legend translate=\"settings_filter_notifications_heading\"></legend>\n"+"<div>\n"+"<input type=\"checkbox\"\n"+"ng-model=\"settings.filterNotifications.state\"\n"+"ng-change=\"toEdit('option_'+settings.filterNotifications.optionValue, settings.filterNotifications.state)\"\n"+"ng-true-value=\"1\"\n"+"ng-false-value=\"0\"\n"+"ng-checked=\"settings.filterNotifications.state===1\">\n"+"<span translate=\"settings_filter_notifications_description\"></span>\n"+"</div>\n"+"</div>\n"+"</fieldset>\n"+"</div>\n"+"<div class=\"form-horizontal\">\n"+"<fieldset class=\"parent-fieldset\">\n"+"<div>\n"+"<legend translate=\"settings_notify_me_when\"></legend>\n"+"<div class=\"icons\">\n"+"<img class=\"push pull-right\" ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/images/settings/icon_set_notify_push.png\">\n"+"<img class=\"inapp pull-right\" ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/images/settings/icon_set_notify_yn.png\">\n"+"<img class=\"email pull-right\" ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/images/settings/icon_set_notify_email.png\">\n"+"</div>\n"+"<div class=\"icons-legend\">\n"+"<span class=\"push pull-right\" translate=\"settings_push\"></span>\n"+"<span class=\"inapp pull-right\" translate=\"settings_onyounow\"></span>\n"+"<span class=\"email pull-right\" translate=\"settings_email\"></span>\n"+"</div>\n"+"</div>\n"+"<fieldset class=\"form-group\" ng-repeat=\"notification in settings.notifications\">\n"+"<span class=\"control-label\">{{notification.description}}</span>\n"+"<div class=\"controls\">\n"+"<input ng-repeat=\"type in ['push','inapp','email']\"\n"+"type=\"checkbox\"\n"+"ng-class=\"type\"\n"+"ng-model=\"notification[type]\"\n"+"ng-change=\"toEdit('option_'+notification[type+'_value'], notification[type])\"\n"+"ng-true-value=\"1\"\n"+"ng-false-value=\"0\"\n"+"ng-checked=\"notification[type]===1\"\n"+"ng-disabled=\"notification[type]===-1\">\n"+"</fieldset>\n"+"<fieldset class=\"form-group\">\n"+"<span class=\"control-label\">{{settings.getUpdates.optionName}}</span>\n"+"<div class=\"controls\">\n"+"<input type=\"checkbox\" class=\"email\"\n"+"ng-model=\"settings.getUpdates.state\"\n"+"ng-change=\"toEdit('option_'+settings.getUpdates.optionValue, settings.getUpdates.state)\"\n"+"ng-true-value=\"1\"\n"+"ng-false-value=\"0\"\n"+"ng-checked=\"settings.getUpdates.state===1\"></div>\n"+"</fieldset>\n"+"</fieldset>\n"+"<div class=\"edit-actions\">\n"+"<button class=\"btn btn-primary\" type=\"button\" ng-click=\"saveChanges()\" translate=\"_save\"></button>\n"+"<button class=\"btn btn-cancel\" type=\"button\" ng-click=\"cancelEdit()\" translate=\"_cancel\"></button>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"connected-accounts-page\" ng-show=\"page=='accounts'\" ng-class=\"{'edit-mode':editing}\">\n"+"<div class=\"form-horizontal\">\n"+"<fieldset class=\"control-group\">\n"+"<div class=\"facebook-not-connected\" ng-hide=\"settings.user.facebookId\">\n"+"<div class=\"top\">\n"+"<div class=\"fb-logo logo not-connected pull-left\"><i class=\"ynicon ynicon-social-fb\"></i></div>\n"+"<legend class=\"pull-left\">Facebook</legend>\n"+"</div>\n"+"<div class=\"instructions\" translate=\"settings_connect_your_facebook\">\n"+"</div>\n"+"<div class=\"connect\">\n"+"<button class=\"btn btn-cancel\" ng-click=\"session.connect('facebook','SETTINGS', session.user.userId)\">\n"+"<i class=\"ynicon ynicon-refresh\"></i><span translate=\"_connect\"></span>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div class=\"facebook-connected\" ng-show=\"settings.user.facebookId\">\n"+"<div class=\"top\">\n"+"<div class=\"fb-logo logo connected pull-left\"><i class=\"ynicon ynicon-social-fb\"></i></div>\n"+"<legend class=\"pull-left\">\n"+"Facebook\n"+"<div class=\"pull-right\">\n"+"<span class=\"identity pull-left\" ng-bind=\"settings.user.firstName+' '+settings.user.lastName\"></span>\n"+"<span class=\"facebook-disconnect disconnect pull-left\">\n"+"(\n"+"<a href=\"javascript:void(0)\" ng-click=\"disconnect('facebook')\" translate=\"_disconnect\"></a>\n"+")\n"+"</span>\n"+"</div>\n"+"</legend>\n"+"</div>\n"+"<fieldset class=\"extra-fb pull-left\">\n"+"<div class=\"control-group fb-pages\">\n"+"<div class=\"control-label pull-left\"><span translate=\"settings_facebook_page\" class=\"inline\"></span>:</div>\n"+"<div class=\"controls pull-left\">\n"+"<a href class=\"fb-pages-cta pull-left\" ng-click=\"loadFbPages()\" ng-if=\"settings.user.facebookPageTitle.length === 0 && !fbPages.editing\" translate=\"settings_facebook_page_add\"></a>\n"+"<a class=\"pull-left\" ng-href=\"{{settings.user.websiteUrl}}\" ng-if=\"settings.user.facebookPageTitle.length > 0 && !fbPages.editing\" target=\"_blank\">{{settings.user.facebookPageTitle}}</a>\n"+"<select class=\"form-control pull-left\"\n"+"ng-model=\"fbPages.fbPageSelected\"\n"+"ng-change=\"updateFbPage()\"\n"+"ng-options=\"page.name for page in fbPages.pages\"\n"+"ng-if=\"fbPages.editing && fbPages.hasPages\">\n"+"</select>\n"+"<span ng-if=\"!fbPages.hasPages && fbPages.editing\" class=\"pull-left text-muted\" translate=\"settings_no_facebook_pages\"></span>\n"+"<span class=\"disconnect pull-left\" ng-if=\"settings.user.facebookPageTitle.length > 0 || fbPages.editing\">\n"+"( <a href=\"javascript:void(0)\" ng-if=\"fbPages.editing\" ng-click=\"changeFbState('cancel')\" translate=\"_cancel\"></a>\n"+"<a href=\"javascript:void(0)\" ng-if=\"settings.user.facebookPageTitle.length > 0 && !fbPages.editing\" ng-click=\"loadFbPages()\" translate=\"_change\"></a>\n"+"<span class=\"text-muted\" ng-if=\"settings.user.facebookPageTitle.length > 0 && !fbPages.editing\"> | </span>\n"+"<a href=\"javascript:void(0)\" ng-if=\"settings.user.facebookPageTitle.length > 0 && !fbPages.editing\" ng-click=\"changeFbState('disconnect')\" translate=\"_disconnect\"></a> )\n"+"</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"fb-connected\" ng-if=\"settings.user.facebookPageTitle.length > 0\">\n"+"<div class=\"checkbox\">\n"+"<input type=\"checkbox\"\n"+"ng-model=\"settings.pubFacebook.state\"\n"+"ng-change=\"toEdit('option_'+settings.pubFacebook.optionValue, settings.pubFacebook.state)\"\n"+"ng-true-value=\"1\"\n"+"ng-false-value=\"0\"\n"+"ng-checked=\"settings.pubFacebook.state===1\"\n"+">\n"+"<span translate=\"settings_share_on_my_page\"></span>\n"+"</div>\n"+"</div>\n"+"</fieldset>\n"+"</div>\n"+"</fieldset>\n"+"<fieldset class=\"control-group twitter\">\n"+"<div class=\"twitter-not-connected\" ng-hide=\"settings.user.twitterId\">\n"+"<div class=\"top\">\n"+"<div class=\"twitter-logo logo not-connected pull-left\"><i class=\"ynicon ynicon-social-tw\"></i></div>\n"+"<legend class=\"pull-left\" translate=\"\">Twitter</legend>\n"+"</div>\n"+"<div class=\"instructions\" translate=\"settings_connect_your_twitter\">\n"+"</div>\n"+"<div class=\"connect\">\n"+"<button class=\"btn btn-cancel\" ng-click=\"session.connect('twitter','SETTINGS', session.user.userId)\">\n"+"<i class=\"ynicon ynicon-refresh\"></i>\n"+"<span translate=\"_connect\"></span>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div class=\"twitter-connected\" ng-show=\"settings.user.twitterId\">\n"+"<div class=\"top \">\n"+"<div class=\"twitter-logo logo connected pull-left\"><i class=\"ynicon ynicon-social-tw\"></i></div>\n"+"<legend class=\"pull-left\">\n"+"<span translate=\"\">Twitter</span>\n"+"<div class=\"pull-right\">\n"+"<span class=\"identity pull-left\" ng-bind=\"settings.user.twitterHandle\"></span>\n"+"<span class=\"twitter-disconnect disconnect pull-left\">\n"+"(\n"+"<a href=\"javascript:void(0)\" ng-click=\"disconnect('twitter')\" translate=\"_disconnect\"></a>\n"+")\n"+"</span>\n"+"</div>\n"+"</legend>\n"+"</div>\n"+"<div class=\"checkbox\">\n"+"<input type=\"checkbox\"\n"+"ng-model=\"settings.pubTwitter.state\"\n"+"ng-change=\"toEdit('option_'+settings.pubTwitter.optionValue, settings.pubTwitter.state)\"\n"+"ng-true-value=\"1\"\n"+"ng-false-value=\"0\"\n"+"ng-checked=\"settings.pubTwitter.state===1\"\n"+">\n"+"<span translate=\"settings_notify_my_followers\"></span>\n"+"</div>\n"+"</div>\n"+"</fieldset>\n"+"<fieldset class=\"control-group\">\n"+"<div class=\"instagram-not-connected\" ng-hide=\"settings.user.instagramId\">\n"+"<div class=\"top \">\n"+"<div class=\"instagram-logo logo not-connected pull-left\"><i class=\"ynicon ynicon-social-insta\"></i></div>\n"+"<legend class=\"pull-left\" translate=\"\">Instagram</legend>\n"+"</div>\n"+"<div class=\"instructions \" translate=\"settings_connect_your_instagram\">\n"+"</div>\n"+"<div class=\"connect\">\n"+"<button class=\"btn btn-cancel\" ng-click=\"session.connect('instagram','SETTINGS', session.user.userId)\">\n"+"<i class=\"ynicon ynicon-refresh\"></i>\n"+"<span translate=\"_connect\"></span>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div class=\"instagram-connected\" ng-show=\"settings.user.instagramId\">\n"+"<div class=\"top \">\n"+"<div class=\"instagram-logo logo connected pull-left\"><i class=\"ynicon ynicon-social-insta\"></i></div>\n"+"<legend class=\"pull-left\">\n"+"<span translate=\"\">Instagram</span>\n"+"<div class=\"pull-right\">\n"+"<span class=\"identity pull-left\" ng-bind=\"settings.user.instagramHandle\"></span>\n"+"<span class=\"instagram-disconnect disconnect pull-left\">\n"+"(\n"+"<a href=\"javascript:void(0)\" ng-click=\"disconnect('instagram')\" translate=\"_disconnect\"></a>\n"+")\n"+"</span>\n"+"</div>\n"+"</legend>\n"+"</div>\n"+"</div>\n"+"</fieldset>\n"+"<fieldset class=\"control-group\">\n"+"<div class=\"google-not-connected\" ng-hide=\"settings.user.googleId\">\n"+"<div class=\"top \">\n"+"<div class=\"google-logo logo not-connected pull-left\"><i class=\"ynicon ynicon-social-gp\"></i></div>\n"+"<legend class=\"pull-left\" translate=\"\">Google+</legend>\n"+"</div>\n"+"<div class=\"instructions \" translate=\"settings_connect_your_google\">\n"+"</div>\n"+"<div class=\"connect\">\n"+"<button class=\"btn btn-cancel\" ng-click=\"session.connect('google','SETTINGS', session.user.userId)\">\n"+"<i class=\"ynicon ynicon-refresh\"></i>\n"+"<span translate=\"_connect\"></span>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div class=\"google-connected\" ng-show=\"settings.user.googleId\">\n"+"<div class=\"top \">\n"+"<div class=\"google-logo logo connected pull-left\"><i class=\"ynicon ynicon-social-gp\"></i></div>\n"+"<legend class=\"pull-left\">\n"+"<span translate=\"\">Google+</span>\n"+"<div class=\"pull-right\">\n"+"<span class=\"identity pull-left\" ng-bind=\"settings.user.googleHandle\"></span>\n"+"<span class=\"google-disconnect disconnect pull-left\">\n"+"(\n"+"<a href=\"javascript:void(0)\" ng-click=\"disconnect('google')\" translate=\"_disconnect\"></a>\n"+")\n"+"</span>\n"+"</div>\n"+"</legend>\n"+"</div>\n"+"</div>\n"+"</fieldset>\n"+"<fieldset class=\"control-group\">\n"+"<div class=\"youtube-not-connected\" ng-hide=\"settings.user.youTubeUserName\">\n"+"<div class=\"top\">\n"+"<div class=\"youtube-logo logo not-connected pull-left\">\n"+"<img ng-src=\"{{config.settings.ServerCDNBaseUrl}}/images/settings/icon_set_yt.png\"></div>\n"+"<legend class=\"pull-left\" translate=\"\">YouTube Channel</legend>\n"+"</div>\n"+"<div class=\"instructions\" translate=\"settings_connect_your_youtube\">\n"+"</div>\n"+"<div class=\"connect\">\n"+"<button class=\"btn btn-cancel\" ng-click=\"session.connect('youtube','SETTINGS', session.user.userId)\">\n"+"<i class=\"ynicon ynicon-refresh\"></i>\n"+"<span translate=\"_connect\"></span>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div class=\"youtube-connected\" ng-show=\"settings.user.youTubeUserName\">\n"+"<div class=\"top \">\n"+"<div class=\"youtube-logo logo connected pull-left\">\n"+"<img ng-src=\"{{config.settings.ServerCDNBaseUrl}}/images/settings/icon_set_yt.png\"></div>\n"+"<legend class=\"pull-left\">\n"+"<span translate=\"\">YouTube</span>\n"+"<div class=\"pull-right\">\n"+"<span class=\"identity pull-left\" ng-bind=\"settings.user.youTubeTitle\"></span>\n"+"<span class=\"youtube-disconnect disconnect pull-left\">\n"+"(\n"+"<a href=\"javascript:void(0)\" ng-click=\"disconnect('youtube')\" translate=\"_disconnect\"></a>\n"+")\n"+"</span>\n"+"</div>\n"+"</legend>\n"+"</div>\n"+"<div class=\"checkbox\" style=\"margin-left: 65px;\" ng-show=\"session.administrator || session.user.partner==1 || session.user.youTubeSubscriberCount>100000\">\n"+"<input type=\"checkbox\"\n"+"ng-model=\"settings.youtubeAnnotations.state\"\n"+"ng-change=\"toEdit('option_'+settings.youtubeAnnotations.optionValue, settings.youtubeAnnotations.state)\"\n"+"ng-true-value=\"1\"\n"+"ng-false-value=\"0\"\n"+"ng-checked=\"settings.youtubeAnnotations.state===1\"\n"+">\n"+"<span translate=\"settings_connect_youtube_info\"></span>\n"+"</div>\n"+"<div class=\"checkbox\" style=\"margin-left: 65px;\">\n"+"<input type=\"checkbox\"\n"+"ng-model=\"settings.youtubeSimulcast.state\"\n"+"ng-change=\"checkYoutube(settings.youtubeSimulcast.state); toEdit('option_'+settings.youtubeSimulcast.optionValue, settings.youtubeSimulcast.state)\"\n"+"ng-true-value=\"1\"\n"+"ng-false-value=\"0\"\n"+"ng-checked=\"settings.youtubeSimulcast.state===1\"\n"+">\n"+"<span translate=\"settings_connect_youtube_simulcast\"></span>\n"+"</div>\n"+"<div ng-hide=\"settings.youtubeSimulcast.state===0\">\n"+"<div class=\"checkbox\" style=\"margin-left: 65px;\">\n"+"<input type=\"checkbox\"\n"+"ng-model=\"settings.keepYoutube.state\"\n"+"ng-change=\"toEdit('option_'+settings.keepYoutube.optionValue, settings.keepYoutube.state)\"\n"+"ng-true-value=\"1\"\n"+"ng-false-value=\"0\"\n"+"ng-checked=\"settings.keepYoutube.state===1\"\n"+">\n"+"<span translate=\"settings_connect_youtube_keep\"></span>\n"+"<select id=\"youtubeLivePrivacyStatus\"\n"+"class=\"form-control youtube-privacy\"\n"+"ng-model=\"settings.user.youtubeLivePrivacyStatus\"\n"+"ng-change=\"toEdit('youtubeLivePrivacyStatus', settings.user.youtubeLivePrivacyStatus)\"\n"+"ng-options=\"option.code as option.name for option in youtubePrivacy\">\n"+"</select>\n"+"</div>\n"+"<div class=\"contentid-disclaimer\">\n"+"Please note, YouTube Content ID copyright will apply if simulcast replays are saved to your channel.\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</fieldset>\n"+"<fieldset class=\"control-group\">\n"+"<div class=\"tumblr-not-connected\" ng-hide=\"settings.user.tumblrId\">\n"+"<div class=\"top \">\n"+"<div class=\"tumblr-logo logo not-connected pull-left\"><i class=\"ynicon ynicon-social-tm\"></i></div>\n"+"<legend class=\"pull-left\" translate=\"\">Tumblr</legend>\n"+"</div>\n"+"<div class=\"instructions \">\n"+"Connect your Tumblr account to gain new followers and notify them when you go live.\n"+"</div>\n"+"<div class=\"connect\">\n"+"<button class=\"btn btn-cancel\" ng-click=\"session.connect('tumblr','SETTINGS', session.user.userId)\">\n"+"<i class=\"ynicon ynicon-refresh\"></i>\n"+"<span translate=\"_connect\"></span>\n"+"</button>\n"+"</div>\n"+"</div>\n"+"<div class=\"tumblr-connected\" ng-show=\"settings.user.tumblrId\">\n"+"<div class=\"top \">\n"+"<div class=\"tumblr-logo logo connected pull-left\"><i class=\"ynicon ynicon-social-tm\"></i></div>\n"+"<legend class=\"pull-left\">\n"+"<span translate=\"\">Tumblr</span>\n"+"<div class=\"pull-right\">\n"+"<span class=\"identity pull-left\" ng-bind=\"settings.user.tumblrBlogTitle\"></span>\n"+"<span class=\"tumblr-disconnect disconnect pull-left\">\n"+"(\n"+"<a href=\"javascript:void(0)\" ng-click=\"disconnect('tumblr')\" translate=\"_disconnect\"></a>\n"+")\n"+"</span>\n"+"</div>\n"+"</legend>\n"+"</div>\n"+"<div class=\"checkbox\">\n"+"<input type=\"checkbox\"\n"+"ng-model=\"settings.pubTumblr.state\"\n"+"ng-change=\"toEdit('option_'+settings.pubTumblr.optionValue, settings.pubTumblr.state)\"\n"+"ng-true-value=\"1\"\n"+"ng-false-value=\"0\"\n"+"ng-checked=\"settings.pubTumblr.state===1\"\n"+">\n"+"<span translate=\"settings_stream_on_tumblr\"></span>\n"+"</div>\n"+"</div>\n"+"</fieldset>\n"+"<div class=\"notice\">\n"+"<span translate=\"settings_to_terminate_visit\"></span>\n"+"<a href=\"javascript:void(0)\" ng-click=\"page='privacy'\" translate=\"settings_privacy_setting\"></a>\n"+"</div>\n"+"<div class=\"edit-actions\">\n"+"<button class=\"btn btn-primary\" type=\"button\" ng-click=\"saveChanges()\" translate=\"_save\"></button>\n"+"<button class=\"btn btn-cancel\" type=\"button\" ng-click=\"cancelEdit()\" translate=\"_cancel\"></button>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div class=\"privacy-page\" ng-show=\"page=='privacy'\" ng-class=\"{'edit-mode':editing}\">\n"+"<div class=\"form-horizontal\">\n"+"<fieldset>\n"+"<legend translate=\"settings_control_how_others_see_you\"></legend>\n"+"<div class=\"hide-my-city  control-group\">\n"+"<div class=\"control-label pull-left\">\n"+"<input type=\"checkbox\"\n"+"ng-model=\"settings.hideCity.state\"\n"+"ng-change=\"toEdit('option_'+settings.hideCity.optionValue, settings.hideCity.state)\"\n"+"ng-true-value=\"1\"\n"+"ng-false-value=\"0\"\n"+"ng-checked=\"settings.hideCity.state===1\"></div>\n"+"<div class=\"controls pull-left\">\n"+"<div translate=\"settings_hide_my_city\"></div>\n"+"<div class=\"text-muted\" translate=\"settings_when_selected_your_city_will_not_display\">\n"+"</div>\n"+"</div>\n"+"<div class=\"clear\"></div>\n"+"</div>\n"+"<div class=\"all-broadcasts-private control-group hidden\">\n"+"<div class=\"control-label\">\n"+"<input name=\"option_broadcastsPrivate\" type=\"checkbox\"></div>\n"+"<div class=\"controls\">\n"+"<span translate=\"settings_mark_all_broadcasts_private\"></span>\n"+"<span class=\"note\" translate=\"settings_means_broadcasts_only_viewed_by_you\"></span>\n"+"</div>\n"+"</div>\n"+"<div class=\"status-offline  control-group hidden\">\n"+"<div class=\"control-label\">\n"+"<input name=\"option_statusOffline\" type=\"checkbox\"></div>\n"+"<div class=\"controls\">\n"+"<span class=\"\" translate=\"settings_display_my_status_as_offline\"></span>\n"+"<span class=\"note \" translate=\"settings_when_offline_selected\">\n"+"</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"controls\">\n"+"<div class=\"deactivate\">\n"+"<button class=\"btn btn-important\" ng-click=\"terminating = true; editing = false;\" ng-hide=\"terminating\">\n"+"<span translate=\"settings_terminate_account\"></span>\n"+"</button>\n"+"<div ng-show=\"terminating\">\n"+"<span class=\"instructions  pull-left\" translate=\"settings_confirm_terminate_forever\">\n"+"</span>\n"+"<snap class=\"note  pull-left\" translate=\"settings_this_will_delete_everything\">\n"+"</snap>\n"+"<div class=\"pull-left\">\n"+"<btn-group>\n"+"<button class=\"btn btn-important\" ng-click=\"disconnect('deactivation')\"><span translate=\"settings_yes_terminate\"></span></button>\n"+"<button class=\"btn btn-cancel\" ng-click=\"terminating=false\"><span translate=\"_cancel\"></span></button>\n"+"</btn-group>\n"+"</div>\n"+"<input name=\"deactivation\" type=\"hidden\" value=\"\"></div>\n"+"</div>\n"+"<div class=\"edit-actions\">\n"+"<button class=\"btn btn-primary\" type=\"button\" ng-click=\"saveChanges()\" translate=\"_save\"></button>\n"+"<button class=\"btn btn-cancel\" type=\"button\" ng-click=\"cancelEdit()\" translate=\"_cancel\"></button>\n"+"</div>\n"+"</div>\n"+"</fieldset>\n"+"<div class=\"reactivate\" ng-show=\"terminated\">\n"+"<div class=\"instructions \">\n"+"<span translate=\"settings_your_account_has_been_closed\"></span>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"subscriptions-page\" ng-show=\"page=='subscriptions'\" ng-class=\"{'edit-mode':editing}\">\n"+"\n"+"<div class=\"form-horizontal\">\n"+"\n"+"<div class=\"nos\" ng-if=\"!subscriptions[0]\">\n"+"<div class=\"sthumbs\">\n"+"<img class=\"sthumbs_image\" ng-src=\"{{::cdn.base}}/angularjsapp/src/assets/images/subscriptions/settings_thumbs.png\" />\n"+"</div>\n"+"<div class=\"stitle\" translate=\"settings_subscription_title\"></div>\n"+"<div class=\"stext\">\n"+"<b translate=\"settings_subscription_subtitle\"></b>\n"+"<ul>\n"+"<li translate=\"settings_subscription_li1\"></li>\n"+"<li translate=\"settings_subscription_li2\"></li>\n"+"<li translate=\"settings_subscription_li3\"></li>\n"+"<li translate=\"settings_subscription_li4\"></li>\n"+"<li translate=\"settings_subscription_li5\"></li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"subscriptions\" ng-if=\"subscriptions\">\n"+"<h1 ng-if=\"::subscriptions.length > 0\" translate=\"manage_subs\"></h1>\n"+"<div class=\"sub\" ng-repeat=\"sub in subscriptions\">\n"+"\n"+"<div class=\"left\">\n"+"<div class=\"thumb circle-thumb\" ng-style=\"{'background-image':'url('+sub.channelThumb+'),url('+sub.channelNoThumb+')'}\">\n"+"<img class=\"ynbadge\" ng-src=\"{{ sub.channelBadge }}\" />\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"middle \">\n"+"\n"+"<!-- WHO -->\n"+"<p class=\"spay pay-profile primary-text\">{{ sub.channelName }}</p>\n"+"\n"+"<!-- HOW -->\n"+"<p>\n"+"<strong translate=\"purchased_on\"></strong>\n"+"<span ng-if=\"sub.subscriptionPlatform.name !== 'YouNow.com'\" translate=\"purchased_on_device\" translate-values=\"{type: sub.subscriptionPlatform.name}\"></span>\n"+"<span ng-if=\"sub.subscriptionPlatform.name == 'YouNow.com'\">YouNow.com</span>\n"+"</p>\n"+"\n"+"<!-- $$$  -->\n"+"<span class=\"spay pay-price\" translate=\"subscribe_monthly\" translate-values=\"{value:sub.subscriptionPrice}\"></span>\n"+"\n"+"<!-- EDIT -->\n"+"<span ng-if=\"(session.subStatus[ sub.channelId ] && sub.subscriptionState=='SUBSCRIPTION_PAST_DUE') || (session.subStatus[ sub.channelId ] && sub.subscriptionState=='SUBSCRIPTION_ACTIVE')\" class=\"spay pay-modify\">\n"+"<a class=\"update-link\" translate=\"update_info\" ng-click=\"modifySubscription( sub.channelId, sub );\"></a>\n"+"</span>\n"+"\n"+"</div>\n"+"\n"+"\n"+"<div class=\"middle offset\">\n"+"\n"+"<!-- VANILLA PAID THROUGH -->\n"+"<span ng-if=\"session.subStatus[ sub.channelId ] && sub.subscriptionState=='SUBSCRIPTION_ACTIVE'\" class=\"spay pay-due\"> <strong translate=\"paid_through\"></strong> {{sub.paidThroughDate}}\n"+"</span>\n"+"\n"+"<!-- SPICY PAYMENT PAST DUE -->\n"+"<span ng-if=\"session.subStatus[ sub.channelId ] && sub.subscriptionState=='SUBSCRIPTION_PAST_DUE'\" class=\"spay pay-due\">\n"+"<p class=\"warn bold\" translate=\"settings_subscription_pastdue\"></p>\n"+"<p class=\"warn\"> <span translate=\"benefits_exp\"> </span> {{sub.paidThroughDate}}</p>\n"+"</span>\n"+"\n"+"<!-- CANCELLED BUT STILL ACTIVE -->\n"+"<span ng-if=\"session.subStatus[ sub.channelId ]===false || ( session.subStatus[ sub.channelId ]===undefined && sub.subscriptionState=='SUBSCRIPTION_ACTIVE_TO_CANCEL' )\" class=\"spay pay-due pay-warn\">\n"+"<p class=\"warn bold\" translate=\"sub_cancelled\"></p>\n"+"<p class=\"warn\"><span translate=\"benefits_exp\"> </span> {{sub.paidThroughDate}}</p>\n"+"</span>\n"+"\n"+"<!--  ENDED -->\n"+"<p ng-if=\"session.subStatus[ sub.channelId ]===undefined && sub.subscriptionState=='SUBSCRIPTION_CANCELLED'\" class=\"warn bold\" translate=\"settings_subscription_ended\"></p>\n"+"\n"+"</div>\n"+"\n"+"\n"+"<div class=\"right offset\">\n"+"\n"+"<span ng-if=\"(session.subStatus[ sub.channelId ] && sub.subscriptionState=='SUBSCRIPTION_PAST_DUE') || (session.subStatus[ sub.channelId ] && sub.subscriptionState=='SUBSCRIPTION_ACTIVE')\" class=\"spay pay-modify\">\n"+"<!-- CANCEL BUTTON -->\n"+"<span class=\"btn btn-cancel\" ng-click=\"cancelSubscription( sub.channelId, sub );\" translate=\"cancel_sub\"></span>\n"+"</span>\n"+"\n"+"<span ng-if=\"!session.subStatus[ sub.channelId ] && sub.subscriptionState == 'SUBSCRIPTION_CANCELLED'\" class=\"spay pay-modify\">\n"+"<!-- RESUBSCRIBE -->\n"+"<span class=\"btn btn-small btn-resub\" ng-click=\"newSubscription( sub.channelId );\">\n"+"<span translate=\"renew_sub\"></span>\n"+"</span>\n"+"</span>\n"+"\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/partner/earnings.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/partner/earnings.tpl.html","<div data-header></div>\n"+"<div class=\"earnings-wrapper\">\n"+"\n"+"<div class=\"earnings-container\">\n"+"\n"+"<div class=\"earnings-banner\">\n"+"<h1 class=\"primary-text\">\n"+"<span translate=\"ee_last_days\" translate-values=\"{count: dayCount}\"></span> <span class=\"light\">(</span><span class=\"light\" translate=\"{{::months.thirtyDaysAgo.month}}\"></span> <span class=\"light\" translate=\"{{::months.thirtyDaysAgo.date}}\"></span> <span class=\"light\">-</span> <span class=\"light\" translate=\"{{::months.thisMonth.month}}\"></span> <span class=\"light\" translate=\"{{::months.thisMonth.date}}\"></span><span class=\"light\">,</span> <span class=\"light\" translate=\"{{::months.thisMonth.year}}\"></span><span class=\"light\">)</span>\n"+"</h1>\n"+"<div class=\"secondary-text\">\n"+"<span translate=\"ee_refresh_every\"></span>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"dummy-page\" ng-if=\"newPartner\">\n"+"<img ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/images/estimated_earnings/empty_state.png\" class=\"background\">\n"+"<div class=\"information\">\n"+"<img class=\"clock\" ng-src=\"{{::config.settings.ServerCDNBaseUrl}}/images/estimated_earnings/clock_refresh.svg\">\n"+"<p class=\"heading\" translate=\"ee_updating\"></p>\n"+"<p class=\"detail\" translate=\"ee_explanation\"></p>\n"+"</div>\n"+"</div>\n"+"\n"+"<div ng-if=\"!newPartner\">\n"+"<div ng-if=\"userOfInterest.userId == session.user.userId && (session.user.mcnTypeId !== '4' && session.user.mcnTypeId !== '3' && session.user.isTipaltiPayable === false)\" class=\"payment-settings-banner\">\n"+"<h2 class=\"primary-text\" translate=\"ee_update_settings\"></h2>\n"+"<p translate=\"ee_update_copy\"></p>\n"+"<a href=\"/partners/payment-settings\" target=\"_blank\" class=\"btn\"> <i class=\"ynicon ynicon-icon-paymentsettings\"></i><span translate=\"ee_update_settings_btn\"></span></a>\n"+"</div>\n"+"<div class=\"left-container\">\n"+"\n"+"\n"+"<div ng-if=\"::earningsMetaData.stats.length == undefined\" class=\"stats-container\">\n"+"\n"+"<div class=\"stat earnings\">\n"+"<i class=\"ynicon ynicon-icon-earnings\"></i>\n"+"<div class=\"stat-wrapper earnings\">\n"+"<h4 class=\"pay-amount\">{{::earningsMetaData.stats.last_30_earnings}}</h4>\n"+"<p translate=\"ee_est_earnings\" translate-values=\"{count: dayCount}\"></p>\n"+"<p ng-if=\"earningsMetaData.stats.all_subscriptions && earningsMetaData.stats.all_subscriptions !== '0'\">(<span translate=\"ee_including_sub\" translate-values=\"{count: earningsMetaData.stats.all_subscriptions, earnings: earningsMetaData.stats.total_subscription_earnings}\"></span>)</p>\n"+"</div>\n"+"</div>\n"+"\n"+"<div ng-if=\"earningsMetaData.stats.is_subscribable && earningsMetaData.stats.last_30_new_subscriptions > 0\" class=\"stat subscribable\">\n"+"<div class=\"badge-wrapper\">\n"+"<img ng-src=\"{{::config.settings.BadgeBaseUrl}}/{{userOfInterest.userId}}/1/badge@2x.png\">\n"+"</div>\n"+"<div class=\"stat-wrapper subs\">\n"+"<h4>{{::earningsMetaData.stats.last_30_new_subscriptions | number}}</h4>\n"+"<p translate=\"ee_new_subs\" translate-values=\"{count: dayCount}\" ng-if=\"earningsMetaData.stats.last_30_new_subscriptions > 1\"></p>\n"+"<p translate=\"ee_new_subs_singular\" translate-values=\"{count: dayCount}\" ng-if=\"earningsMetaData.stats.last_30_new_subscriptions == 1\"></p>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"<div ng-if=\"earningsMetaData.stats.new_fans > 0\" class=\"stat\">\n"+"<i class=\"ynicon ynicon-user\"></i>\n"+"<div class=\"stat-wrapper fans\">\n"+"<h4>{{::earningsMetaData.stats.new_fans | number}}</h4>\n"+"<p translate=\"ee_new_fans\" translate-values=\"{count: dayCount}\" ng-if=\"earningsMetaData.stats.new_fans > 1\"></p>\n"+"<p translate=\"ee_new_fans_singular\" translate-values=\"{count: dayCount}\" ng-if=\"earningsMetaData.stats.new_fans == 1\"></p>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"<div ng-if=\"!earningsMetaData.stats.is_subscribable || earningsMetaData.stats.last_30_new_subscriptions === 0\"class=\"stat\">\n"+"<i class=\"ynicon\n"+"ynicon-viewers\"></i>\n"+"<div class=\"stat-wrapper views\">\n"+"<h4>{{::earningsMetaData.stats.total_views | number}}</h4>\n"+"<p translate=\"_views\"></p>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"<div ng-if=\"earningsMetaData.payments.length == undefined\" class=\"payment-summary\">\n"+"<div class=\"title\">\n"+"<h3 translate=\"ee_monthly_summary\"></h3>\n"+"</div>\n"+"\n"+"<div ng-if=\"::earningsMetaData.payments.belowThreshold\" class=\"payout-progress\">\n"+"<p class=\"eligibility light\" translate=\"ee_eligibility\" translate-values=\"{value: earningsMetaData.payments.tilPayout}\"> </p>\n"+"<div class=\"level-bar-ee\">\n"+"<div class=\"total-progress pull-left\" ng-style=\"{'width': earningsMetaData.payments.progress+'%'}\"></div>\n"+"<div class=\"last-progress pull-left\" ng-style=\"{'width': 100 - earningsMetaData.payments.progress+'%'}\"></div>\n"+"<div class=\"endpoints\">\n"+"<div class=\"min-dollar\">$0</div>\n"+"<div class=\"max-dollar\">{{earningsMetaData.payments.threshold}}</div>\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"month\">\n"+"<div class=\"left\">\n"+"<p> <span translate=\"{{::months.thisMonth.month}}\"></span> 1 - <span translate=\"{{::months.thisMonth.month}}\"></span> <span translate=\"{{::months.thisMonth.date}}\"></span> </p>\n"+"<p class=\"light\"><span translate=\"ee_refresh_every\"></span></p>\n"+"</div>\n"+"<p class=\"total\"><strong> {{::earningsMetaData.payments.current_month}}</strong></p>\n"+"</div>\n"+"\n"+"<div ng-if=\"!earningsMetaData.payments.is_net_earnings\" class=\"month last\">\n"+"<div class=\"left\">\n"+"<p><span translate=\"{{::months.lastMonth.month}}\"></span> 1 - <span translate=\"{{::months.lastMonth.month}}\"></span> <span translate=\"{{::months.lastMonth.date}}\"></span></p>\n"+"<p class=\"light\"><span translate=\"ee_amount_payment\"></span></p>\n"+"</div>\n"+"<p class=\"total\"><strong> {{::earningsMetaData.payments.last_month_payment}}</strong></p>\n"+"</div>\n"+"\n"+"<div ng-if=\"earningsMetaData.payments.is_net_earnings\" class=\"month last\">\n"+"<div class=\"left\">\n"+"<p> <span translate=\"ee_last_payment\"></span>: {{::earningsMetaData.payments.last_month_paymentDate}}</p>\n"+"\n"+"</div>\n"+"<p class=\"total\"><strong> {{::earningsMetaData.payments.last_month_payment}}</strong></p>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"<div ng-if=\"topSpenders.length > 0\" class=\"top-spenders\">\n"+"<div class=\"title\">\n"+"<h3 translate=\"ee_top_spenders\" translate-values=\"{count: dayCount}\"></h3>\n"+"</div>\n"+"<div class=\"spenders\" infinite-scroll=\"getSpenders()\">\n"+"<div ng-repeat=\"spender in topSpenders track by $index\" class=\"spender\">\n"+"\n"+"<div ng-if=\"activeUserId != spender.userId\" class=\"info\">\n"+"<div class=\"left\">\n"+"<div class=\"circle-thumb clickable pull-left\" ng-style=\"::{ background: 'url(' + thumb + '/' + spender.userId + '/' + spender.userId + '.jpg), url(noThumb) no-repeat', 'background-size': 'cover' }\" ng-click=\"openBroadcasterProfile(spender.userId)\"></div>\n"+"<div class=\"left-detail-wrapper\">\n"+"<div class=\"top-line short-text\">\n"+"<p class=\"username short-text\"> {{::spender.profile}}</p>\n"+"<user-badge class=\"user-badge\" role=\"{{::spender.role}}\" level=\"{{::spender.level}}\"></user-badge>\n"+"</div>\n"+"<p class=\"rank\">#{{::topSpenders.indexOf(spender) + 1}}</p>\n"+"<i class=\"ynbar ynicon ynicon-icon-bar\"></i>\n"+"\n"+"<img ng-if=\"spender.isSubscriber\" class=\"subscriber-badge\" ng-src=\"{{::config.settings.BadgeBaseUrl}}/{{::userOfInterest.userId}}/1/badge@2x.png\">\n"+"\n"+"</div>\n"+"</div>\n"+"<div ng-mouseenter=\"showAction(spender.userId)\" ng-mouseleave=\"showAction()\" class=\"right\">\n"+"<div ng-if=\"spender.daysSinceLastPost !== -1 && sentTo.indexOf(spender.userId) == -1 && optionsId !== spender.userId\" class=\"messaged\">\n"+"<p class=\"when\" translate=\"ee_you_messaged\"></p>\n"+"<p ng-if=\"spender.daysSinceLastPost > 1\" class=\"when\" translate=\"ee_days_ago\" translate-values=\"{count: {{::spender.daysSinceLastPost}}}\"></p>\n"+"<p ng-if=\"spender.daysSinceLastPost == 1\" class=\"when\"> <span translate=\"ee_days_ago_singular\"></span></p>\n"+"<p ng-if=\"spender.daysSinceLastPost < 1 && spender.daysSinceLastPost > -1\" class=\"when\" translate=\"ee_today\"></p>\n"+"</div>\n"+"<div ng-if=\"sentTo.indexOf(spender.userId) != -1\" class=\"posted\">\n"+"<strong translate=\"ee_posted\"></strong>\n"+"</div>\n"+"<div ng-if=\"optionsId == spender.userId\" class=\"actions\">\n"+"<div ng-click=\"sendMessage(spender.userId)\" class='say-thanks'>\n"+"<p translate=\"ee_thanks\"></p>\n"+"</div>\n"+"<div class=\"btn-small fan-button\" channel=\"spender\" fan-button size=\"tiny\" ></div>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<!-- end info -->\n"+"\n"+"<div ng-if=\"activeUserId == spender.userId\" class=\"message-container\">\n"+"<div class=\"header\">\n"+"<div class=\"circle-thumb clickable pull-left\"  ng-style=\"::{ background: 'url(' + thumb + spender.userId + '), url(noThumb) no-repeat', 'background-size': 'cover' }\"></div>\n"+"<p class=\"direction\" translate=\"ee_send\"> </p>\n"+"<p class=\"recipient\"><strong>{{::spender.profile}}</strong>!</p>\n"+"</div>\n"+"<div class=\"comment-box\">\n"+"<div class=\"comment-area\">\n"+"\n"+"<div class=\"editor\" id=\"textarea_\" ng-model=\"comment.html\" ng-keydown=\"submitOnEnter($event, comment)\" placeholder=\"Write something...\" autocomplete=\"off\">\n"+"<div class=\"upload-photo\">\n"+"<input class=\"pull-right\" accept=\"image/jpeg, image/png\" name=\"media\" type=\"file\" yn-on-change=\"showUploadPreview\" params=\"event,postObject\" id=\"file_{{::spender.userId}}\" tooltip-trigger=\"mouseenter\" tooltip=\"this image must be at least 100x100px and not larger than 10MB\">\n"+"<i class=\"ynicon ynicon-camera pull-right\"></i>\n"+"</div>\n"+"<textarea ng-model=\"comment.text\" id=\"textbox_{{::spender.userId}}\" placeholder=\"{{::'ee_placeholder' | translate }}\" maxlength=\"215\"></textarea>\n"+"<br><br>\n"+"<img ng-if=\"comment.image\" ng-src=\"{{comment.image}}\">\n"+"<button ng-if=\"comment.image\" ng-click=\"comment.image = null\" aria-hidden=\"true\" class=\"close\" type=\"button\">Ã</button>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"comment-actions\">\n"+"<button ng-click=\"resetComment()\" class=\"btn btn-cancel\" translate=\"_cancel\"></button>\n"+"<button ng-click=\"postComment(spender.userId)\" class=\"btn btn-post\" translate=\"ee_post_to\"></button>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"</div>\n"+"<!-- end message container -->\n"+"\n"+"</div>\n"+"<!-- end spender container -->\n"+"</div>\n"+"<!-- end spenders container -->\n"+"</div>\n"+"<!-- end top spenders section -->\n"+"</div>\n"+"<!-- end left container -->\n"+"\n"+"<div class=\"right-container\">\n"+"<div class=\"chart-section\">\n"+"<div class=\"y-top\">\n"+"<p>{{::maxEarnings}}</p>\n"+"</div>\n"+"<div class=\"y-hours top\">\n"+"<p ng-if=\"maxTime.hours\">{{::maxTime.time}} <span translate=\"ee_hrs\"></span></p>\n"+"<p ng-if=\"!maxTime.hours\">{{::maxTime.time}} <span translate=\"ee_min\"></span> </p>\n"+"</div>\n"+"<div class=\"legend\">\n"+"<div class=\"label\">\n"+"<div class=\"color-swatch earnings\"></div>\n"+"<p class=\"title earnings\" translate=\"ee_est\"></p>\n"+"</div>\n"+"<div class=\"label\">\n"+"<div class=\"color-swatch hours\"></div>\n"+"<p class=\"title\" translate=\"ee_time\"></p>\n"+"</div>\n"+"</div>\n"+"<div class=\"another\">\n"+"<canvas id=\"earnings-chart\" class=\"chart chart-bar\"\n"+"chart-data=\"data\" chart-labels=\"labels\" chart-series=\"series\" chart-colours=\"colors\" chart-options=\"options\"></canvas>\n"+"</div>\n"+"<div class=\"tooltip\" id=\"chartjs-tooltip\">\n"+"<div class=\"info\">\n"+"<p class=\"date\" id=\"date\">{{tooltip.title}}</p>\n"+"<p ng-if=\"tooltip.time\" class=\"earnings\" id=\"value-of-broadcast\" translate=\"ee_tooltip_earnings\" translate-values=\"{count: tooltip.earnings}\"></p>\n"+"<div class=\"hours\" id=\"hours\">\n"+"<p ng-if=\"tooltip.time.hours\" translate=\"ee_tooltip_duration_hrs\" translate-values=\"{duration: tooltip.time.duration}\"> </p>\n"+"<p ng-if=\"!tooltip.time.hours\" translate=\"ee_tooltip_duration_min\" translate-values=\"{duration: tooltip.time.duration}\"> </p>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"<div class=\"y-bottom\">\n"+"<p>$0</p>\n"+"</div>\n"+"<div class=\"y-hours bottom\">\n"+"<p>0 <span translate=\"ee_hrs\"></span></p>\n"+"</div>\n"+"<div class=\"x-labels\">\n"+"\n"+"<div class=\"left\">\n"+"<span class=\"month\" translate=\"{{::months.thirtyDaysAgo.month}}\"> </span> <span>{{months.thirtyDaysAgo.date}}</span>\n"+"</div>\n"+"\n"+"<div class=\"right\">\n"+"<span class=\"month\" translate=\"{{::months.thisMonth.month}}\"></span> <span>{{::months.thisMonth.date}}</span>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<div ng-if=\"broadcasts.length > 0\" class=\"broadcast-archive\">\n"+"<div class=\"title\">\n"+"<h3 translate=\"ee_recent\"></h3>\n"+"</div>\n"+"<div id=\"broadcast-bucket\" class=\"details-wrapper\">\n"+"\n"+"<div ng-repeat=\"broadcast in broadcasts track by broadcast.broadcastid\" class=\"details\" ng-attr-id=\"{{broadcast.id}}\" ng-class=\"{'active': broadcast.id === tooltip.broadcastKey}\">\n"+"<div ng-class=\"{'active': broadcast.id === tooltip.broadcastKey}\" class=\"broadcast-header\">\n"+"\n"+"<strong> {{::broadcast.aired_timestamp}} </strong> <span translate=\"_on\"></span>  #{{::broadcast.hashtag}}\n"+"</div>\n"+"<div class=\"video-wrapper\">\n"+"<div ng-click=\"showMedia(broadcast.broadcastid, {source:'EE',start:0}, broadcast)\"\n"+"class=\"broadcast-thumb\"\n"+"ng-style=\"::{background: 'url({{broadcast.broadcast_thumbnail}}) no-repeat', 'background-size': 'cover'}\">\n"+"<img class=\"play-button\" ng-src=\"{{::cdn.base}}/images/profile/new/icon_play.png\">\n"+"<span class=\"broadcast-length\">{{::broadcast.broadcast_length}}</span>\n"+"</div>\n"+"</div>\n"+"<div class=\"left-section\">\n"+"<div class=\"curved\">\n"+"\n"+"\n"+"<p ng-if=\"broadcast.total_views !== '0'\"><strong>{{::broadcast.total_views | number}}</strong> <span translate=\"_views\"></span></p>\n"+"\n"+"</div>\n"+"\n"+"<div class=\"curved\">\n"+"<p ng-if=\"broadcast.total_earnings !== 0\"><strong>${{::broadcast.total_earnings}}</strong> <span translate=\"ee_est_short\"> </span></p>\n"+"</div>\n"+"\n"+"<div class=\"curved\">\n"+"<p ng-if=\"broadcast.gained_subscribers > 0\"><strong>{{::broadcast.gained_subscribers | number}}</strong> <span translate=\"ee_new_subs_count\"></span></p>\n"+"</div>\n"+"</div>\n"+"<div class=\"middle-section\">\n"+"<p ng-if=\"broadcast.likes !== 0\"><strong>{{::broadcast.likes | number}}</strong> <span translate=\"eob_likes\"></span> </p>\n"+"<p ng-if=\"broadcast.chats !== '0'\"><strong>{{::broadcast.chats | number}}</strong> <span translate=\"ee_comments\"></span> </p>\n"+"<p ng-if=\"broadcast.premium_gifts !== '0'\"><strong>{{::broadcast.premium_gifts | number}}</strong> <span translate=\"premium_gifts\"></span></p>\n"+"<p ng-if=\"broadcast.moments_created !== '0'\"><strong>{{::broadcast.moments_created | number}}</strong> <span translate=\"moments_created\"></span></p>\n"+"<p ng-if=\"broadcast.moments_views !== '0'\"><strong>{{::broadcast.moments_views | number}}</strong> <span translate=\"moment_views\"></span></p>\n"+"</div>\n"+"<div class=\"right-section\">\n"+"<p ng-if=\"broadcast.gained_fans !== '0'\"><strong>{{::broadcast.gained_fans | number}}</strong> <span translate=\"eob_newfans\"></span> </p>\n"+"<p ng-if=\"broadcast.shares !== '0'\"><strong>{{::broadcast.shares | number}}</strong> <span translate=\"eob_shares\"></span> </p>\n"+"<p ng-if=\"broadcast.queued !== '0'\"><strong>{{::broadcast.queued | number}}</strong> <span translate=\"guest_requests\"></span </p>\n"+"<p ng-if=\"broadcast.selfie_displayed !== '0'\"><strong>{{::broadcast.selfie_displayed | number}}</strong> <span translate=\"ee_selfies_on_screen\"></span> </p>\n"+"<p ng-if=\"broadcast.total_minutes_watched !== '0'\"><strong>{{::broadcast.total_minutes_watched | number}}</strong> <span translate=\"minutes_watched\"></span> </p>\n"+"\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<!-- end details wrapper -->\n"+"</div>\n"+"</div>\n"+"<!-- end right container -->\n"+"<p class=\"fine-print\" translate=\"ee_fine_print\" translate-values=\"{threshold: earningsMetaData.payments.threshold}\"></p>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"<div data-footer ng-hide=\"$root.hideFooter\"></div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/partner/faq.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/partner/faq.tpl.html","<div data-header></div>\n"+"<div class=\"notification\" ng-class=\"{active: $root.notificationActive, fixed: $root.notificationFixed}\">\n"+"<alert type=\"{{$root.notificationType}}\" ng-bind-html=\"$root.notificationMessage\"></alert>\n"+"<button class=\"close\" ng-click=\"closeNotification()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"</div>\n"+"<div id=\"partnersFaq\" class=\"partnersContent\">\n"+"\n"+"<div ng-class=\"{'ready': infoPartnersFaqReady, 'rtl': rtl}\">\n"+"<div class=\"container\">\n"+"<div class=\"content\" id=\"partnersFaqContent\" ng-bind-html=\"partnersFaqContent\">\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"<div data-footer ng-if=\"infoPartnersFaqReady\"></div>\n");}]);angular.module("angularjsapp/src/app/states/partner/partials/active.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/partner/partials/active.tpl.html","<div class=\"container\">\n"+"\n"+"<div class=\"userearningswelcome\">\n"+"<div class=\"userearningsowenothumb\">\n"+"<div class=\"userearningstitlecongrats\">Congrats {{vm.getUsername()}}</div>\n"+"<div class=\"userearningsowenumnothumb\">You're In!</div>\n"+"</div>\n"+"</div>\n"+"\n"+"<hr />\n"+"\n"+"<div class=\"body\">\n"+"<p>As a Partner you can now earn revenue by broadcasting.<br />Check your estimated earnings at anytime from the header!</p>\n"+"</div>\n"+"\n"+"<div class=\"image\">\n"+"<img ng-src=\"{{::vm.config.settings.ServerCDNBaseUrl}}/images/partners/image_welcome_menu.jpg\" width=\"438\" height=\"162\">\n"+"</div>\n"+"\n"+"\n"+"<div class=\"apply\">\n"+"<p><a href=\"/partners/earnings\" class=\"btn\" translate=\"earnings_goto\"></a></p>\n"+"</div>\n"+"\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/partner/partials/active_confirm.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/partner/partials/active_confirm.tpl.html","<div class=\"container\">\n"+"\n"+"<h9 class=\"title\">Updated Partner Agreement</h9>\n"+"<p>We update our terms of service to our partners from time to time. Please be sure to review and accept the updated Partner Agreement (shown bellow) before you proceed.</p>\n"+"<p>Our standard for signing up partners is high, so it is a testament to your talent that you are one of the very few in our selective program.</p>\n"+"<p>As a Partner you must agree to the following: </p>\n"+"\n"+"<ul>\n"+"<li>Treat all YouNow viewers/users with respect.</li>\n"+"<li>To receive payment, you are legally required to sign a W9 tax form or its international equivalent.</li>\n"+"<li>You will receive payment at the beginning of the month following your broadcasts, provided you have earned at least $100 that month. If you've earned less, money will be rolled over into the following month - assuming there is a minimum of $100.</li>\n"+"<li>We reserve the right to review your broadcasts and revoke earnings if they violate our <a href=\"/partner/agreement.php\" target=\"_blank\">Partner Agreement</a> or <a href=\"/partner/guidelines.html\" target=\"_blank\">Partner Guidelines</a>.</li>\n"+"</ul>\n"+"\n"+"<span class=\"message error\" ng-if=\"vm.agreeFormInvalid\">Please check the box below to confirm the Partner Agreement.</span>\n"+"<p>\n"+"<form id=\"aggreeForm\">\n"+"<input type=\"checkbox\" name=\"agree\" value=\"agree\" style=\"margin-right:10px;\" ng-model=\"vm.agreeFormChecked\">\n"+"I agree to the UPDATED <a href=\"/partner/agreement.php\" target=\"_blank\">Partner Agreement</a> and <a href=\"/terms.php\" target=\"_blank\">Terms and Conditions</a>.\n"+"</form>\n"+"</p>\n"+"<span class=\"message error\" ng-if=\"vm.agreeFormError\">Sorry. Something went wrong. Please refresh the page.</span>\n"+"\n"+"</div>\n"+"\n"+"<div class=\"apply\">\n"+"<p>\n"+"<button href=\"#\" class=\"btn btn-partner\" ng-click=\"vm.submitAgreeForm()\" ng-disabled=\"vm.agreeFormProcessing\">\n"+"{{ vm.agreeFormProcessing ? 'Sending...' : 'Yes, I agree' }}\n"+"</button>\n"+"</p>\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/states/partner/partials/application_pending.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/partner/partials/application_pending.tpl.html","<div ng-if=\"!vm.pendingForm\">\n"+"\n"+"<section class=\"intro\">\n"+"<div class=\"container\">\n"+"\n"+"<div class=\"info\">\n"+"<h1>Earning Revenue is Simple</h1>\n"+"<p class=\"text\">Our Partner Program rewards top talent on YouNow. Earn revenue based on audience participation â not someone else's ads.</p>\n"+"<p><a href=\"#\" class=\"btn btn-apply\" ng-click=\"vm.enablePendingForm()\">Apply</a></p>\n"+"</div>\n"+"\n"+"</div>\n"+"</section>\n"+"\n"+"<section class=\"body\">\n"+"<div class=\"container\">\n"+"\n"+"<div class=\"title\">\n"+"<h9>What you need to know</h9>\n"+"</div>\n"+"<div class=\"columns\">\n"+"\n"+"<div class=\"column column2\">\n"+"<h7>Audience Engagement, Not Ads</h7>\n"+"<p>\n"+"The more viewers, audience interaction and premium gifts, the more revenue you make! It's all about engagement, not ads.\n"+"</p>\n"+"</div>\n"+"<div class=\"column column2\">\n"+"<h7>Earn After Every Broadcast</h7>\n"+"<p>\n"+"At the end of each broadcast you see your estimated earnings, or check your earnings at anytime from your profile!\n"+"</p>\n"+"</div>\n"+"<div class=\"column column2\">\n"+"<h7>Payment is Easy</h7>\n"+"<p>\n"+"As a Partner, you earn revenue at the end of each broadcast, and get paid out once a month â no hassle!\n"+"</p>\n"+"</div>\n"+"<div class=\"column column2\">\n"+"<h7>What We Expect from Partners</h7>\n"+"<p>\n"+"We expect Partners to maintain average concurrent viewership of 500+, broadcast regularly (3x / week), and have content that conforms to our <a href=\"/partner/agreement.php\" target=\"_blank\">Terms of Service</a> and <a href=\"/partner/dmca.html\" target=\"_blank\">DMCA Guidelines</a>.\n"+"</p>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"<div class=\"apply\">\n"+"<a href=\"#\" class=\"btn\" ng-click=\"vm.enablePendingForm();\">Apply</a>\n"+"</div>\n"+"\n"+"</div>\n"+"</section>\n"+"\n"+"</div>\n"+"\n"+"<div class=\"partner\" id=\"partnerApply\" ng-if=\"vm.pendingForm\">\n"+"<div class=\"container\">\n"+"\n"+"<h9>Become a Partner</h9>\n"+"<hr />\n"+"<p>Apply today and start monetizing your broadcasts.</p>\n"+"<form name=\"pendingForm\" novalidate ng-submit=\"vm.submitPendingForm();\" ng-class=\"{'submitted':vm.pendingFormSubmitted}\">\n"+"<div class=\"input-row\">\n"+"Full Name*<br>\n"+"<input name=\"name\" type=\"text\" ng-model=\"vm.pendingForm.name\" required>\n"+"</div>\n"+"<div class=\"input-row\">\n"+"Email*<br>\n"+"<input name=\"email\" height=\"25\" type=\"text\" ng-model=\"vm.pendingForm.email\" required ng-pattern=\"/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/\">\n"+"</div>\n"+"<div class=\"input-row\">\n"+"Phone Number*<br>\n"+"<input name=\"phone\" height=\"25\" type=\"text\" ng-model=\"vm.pendingForm.phone\" required ng-pattern=\"/^\(?(\d{3})\)?[ .-]?(\d{3})[ .-]?(\d{4})$/\">\n"+"</div>\n"+"<div class=\"input-row\">\n"+"Social Links*<br>\n"+"<textarea rows=\"4\" placeholder=\"Ex. www.twitter.com/yourhandle, www,youtube.com/username, etc.\" ng-model=\"vm.pendingForm.social\" required></textarea>\n"+"</div>\n"+"<div class=\"input-row\">\n"+"Tell us more about you and your desire to become a YouNow Partner*\n"+"<textarea rows=\"4\" ng-model=\"vm.pendingForm.about\" required></textarea>\n"+"</div>\n"+"\n"+"<p class=\"message error\" ng-if=\"vm.pendingFormError\">Sorry. Something went wrong. Please refresh the page.</p>\n"+"\n"+"<div class=\"apply\">\n"+"<button type=\"submit\" class=\"btn\">Submit</button>\n"+"</div>\n"+"</form>\n"+"\n"+"</div>\n"+"\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/states/partner/partials/not.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/partner/partials/not.tpl.html","<div class=\"intro\">\n"+"<div class=\"container\">\n"+"\n"+"<div class=\"info\">\n"+"<h1 class=\"orange\">YouNow Partner Program</h1>\n"+"<p>Are you an exceptionally talented broadcaster, personality or influencer?\n"+"<br /> Interested in leveraging the YouNow platform to earn actual income?\n"+"<br /> With our Partner Program now you can!</p>\n"+"<p>\n"+"<br />Learn more below to see if you qualify.</p>\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"<div class=\"features\">\n"+"<div class=\"container\">\n"+"\n"+"<div class=\"preamble twelve columns offset-by-two\">\n"+"<h9>MAKING MONEY ON YOUNOW IS SIMPLE:\n"+"<br>\n"+"</h9>\n"+"</div>\n"+"\n"+"<div class=\"columns\">\n"+"<div class=\"column3 column\">\n"+"<img src=\"images/partners/simple1.png\">\n"+"<h5>CREATE ENGAGING CONTENT</h5>\n"+"<p>Make an impact with your live broadcasts! Be inspiring and interactive. Keep your audience wanting more.</p>\n"+"</div>\n"+"\n"+"<div class=\"column3 column\">\n"+"<img src=\"images/partners/simple2.png\">\n"+"<h5>BUILD YOUR FAN BASE</h5>\n"+"<p>Connect with your fans, grow a loyal audience, and get exposed to more and more new fans every day.</p>\n"+"</div>\n"+"\n"+"<div class=\"column3 column\">\n"+"<img src=\"images/partners/simple3.png\">\n"+"<h5>MAKE $$$</h5>\n"+"<p>Earn instantly during each broadcast! <br />Finally, it pays to be a top-of-the-line YouNower.</p>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"<div class=\"tour tour-easy\">\n"+"<div class=\"container\">\n"+"<div class=\"info\">\n"+"<h9>HOW DOES IT WORK? IT'S EASY!</h9>\n"+"<ul class=\"list-features\">\n"+"<li>Broadcast awesome live content on YouNow</li>\n"+"<li>Fans love you and engage with your broadcast</li>\n"+"<li>The more viewers, audience interaction and gifts you get, <br />the more revenue you earn!</li>\n"+"</ul>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"<div class=\"tour tour-anyone\">\n"+"<div class=\"container\">\n"+"<div class=\"info\">\n"+"<h9>CAN ANYONE BE A YOUNOW PARTNER?</h9>\n"+"<p>The YouNow Partner Program is geared exclusively to qualified content creators. To qualify as a YouNow Partner, we look for:</p>\n"+"<ul class=\"list-features\">\n"+"<li>Average concurrent viewership of 500+ </li>\n"+"<li>Content that conforms to our <a href=\"/policy/en/terms\" target=\"_blank\">Terms of Service</a> and <a href=\"/policy/en/dmca\" target=\"_blank\">DMCA Guidelines</a></li>\n"+"</ul>\n"+"<p>\n"+"Once you're a Partner, we ask that you follow our <a href=\"/policy/en/partners\" target=\"_blank\">Partner guidelines</a>.\n"+"</p>\n"+"<p>\n"+"If you create content elsewhere (for example, on YouTube, Vine, Twitter or Instagram) you should still apply! Multi-platform audiences will only serve to increase your earning potential. We look for:\n"+"</p>\n"+"<ul class=\"list-features\">\n"+"<li>Average views per video: 25,000+</li>\n"+"<li>Subscribers / Followers: 75,000+</li>\n"+"</ul>\n"+"<p>THE ABOVE REQUIREMENTS SERVE AS GENERAL GUIDELINES. WE MAY DENY ANY APPLICATION THAT CONFORMS TO THESE GUIDELINES, OR MAKE EXCEPTIONS FOR OUTSTANDING TALENT, AT OUR DISCRETION.\n"+"</p>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"\n"+"\n"+"<div class=\"apply\">\n"+"<a class=\"btn\" href=\"https://younow.wufoo.com/forms/younow-partner-program-application/\">Apply Now</a>\n"+"</div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/partner/partials/pending.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/partner/partials/pending.tpl.html","<section class=\"thankyou\">\n"+"<div class=\"container\">\n"+"<h9 class=\"title\">Thank You</h9>\n"+"<p>Awesome. We are excited you're interested in working with us. We will be in contact with you in the coming days.</p>\n"+"</div>\n"+"</section>\n");}]);angular.module("angularjsapp/src/app/states/partner/partials/pending_approved_confirm.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/partner/partials/pending_approved_confirm.tpl.html","<div class=\"container\">\n"+"\n"+"<h9 class=\"title\">Congrats {{vm.getUsername()}}!</h9>\n"+"<p>Our standard for signing up partners is high, so it is a testament to your talent that you are one of the very few in our selective program.</p>\n"+"<p>As a Partner you must agree to the following:</p>\n"+"\n"+"<ul>\n"+"<li>Treat all YouNow viewers/users with respect.</li>\n"+"<li>To receive payment, you are legally required to sign a W9 tax form or its international equivalent.</li>\n"+"<li>You will receive payment at the beginning of the month following your broadcasts, provided you have earned at least $100 that month. If you've earned less, money will be rolled over into the following month - assuming there is a minimum of $100.</li>\n"+"<li>We reserve the right to review your broadcasts and revoke earnings if they violate our <a href=\"/partner/agreement.php\" target=\"_blank\">Partner Agreement</a> or <a href=\"/partner/guidelines.html\" target=\"_blank\">Partner Guidelines</a>.</li>\n"+"</ul>\n"+"\n"+"<span class=\"message error\" ng-if=\"vm.agreeFormInvalid\">Please check the box below to confirm the Partner Agreement.</span>\n"+"<p>\n"+"<form id=\"aggreeForm\">\n"+"<input type=\"checkbox\" name=\"agree\" value=\"agree\" style=\"margin-right:10px;\" ng-model=\"vm.agreeFormChecked\">\n"+"I agree to the <a href=\"/partner/agreement.php\" target=\"_blank\">Partner Agreement</a> and <a href=\"/terms.php\" target=\"_blank\">Terms and Conditions</a>.\n"+"</form>\n"+"</p>\n"+"<span class=\"message error\" ng-if=\"vm.agreeFormError\">Sorry. Something went wrong. Please refresh the page.</span>\n"+"\n"+"</div>\n"+"\n"+"<div class=\"apply\">\n"+"<p>\n"+"<button href=\"#\" class=\"btn btn-partner\" ng-click=\"vm.submitAgreeForm()\" ng-disabled=\"vm.agreeFormProcessing\">\n"+"{{ vm.agreeFormProcessing ? 'Sending...' : 'Yes, I agree' }}\n"+"</button>\n"+"</p>\n"+"</div>\n");}]);angular.module("angularjsapp/src/app/states/partner/partner.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/partner/partner.tpl.html","<div data-header></div>\n"+"<div class=\"notification\" ng-class=\"{active: $root.notificationActive, fixed: $root.notificationFixed}\">\n"+"<alert type=\"{{$root.notificationType}}\" ng-bind-html=\"$root.notificationMessage\"></alert>\n"+"<button class=\"close\" ng-click=\"closeNotification()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"</div>\n"+"<div class=\"partnersContent\">\n"+"\n"+"<section class=\"xTemp homeSection search-container content-creator-container\">\n"+"\n"+"<div class=\"search-top\">\n"+"<a>\n"+"<img class=\"younow-logo\" ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/logo_younow_white.png\">\n"+"</a>\n"+"<a ng-href=\"https://younow.wufoo.com/forms/younow-partner-program-application/\">\n"+"<div class=\"get-partnered\" ng-if=\"vm.session.user.userId===0 || (vm.session.user.partner!==1 && vm.session.user.partner!==6 && vm.session.user.partner!==7)\">\n"+"<div class=\"call\">\n"+"<p>GET PARTNERED</p>\n"+"</div>\n"+"<div class=\"arrow\">\n"+"<img ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/right_arrow.png\">\n"+"</div>\n"+"</div>\n"+"</a>\n"+"</div>\n"+"\n"+"<!-- younow-home-app-promo -->\n"+"<div class=\"home-video-container\">\n"+"<video class=\"home-video\" autoplay=\"\" loop=\"\" ng-attr-poster=\"{{::vm.configSettings.ServerCDNBaseUrl +'/images/about/novideo.jpg'}}\" id=\"homeVideo\">\n"+"<source ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl + '/landing/video/younow_shade2.webmhd.webm'}}\" type=\"video/webm\">\n"+"<source \"{{::vm.configSettings.ServerCDNBaseUrl + '/landing/video/younow_shade2.mp4'}}\" type=\"video/mp4\">\n"+"</video>\n"+"<div ng-style=\"::{'background-image': 'url('+vm.configSettings.ServerCDNBaseUrl + '/images/bike_girl2.jpg'+')'}\" class=\"mobile-banner\"></div>\n"+"</div>\n"+"<h1>Go Live. Hang with Fans. Monetize.</h1>\n"+"</section>\n"+"\n"+"<div scrolled-class=\"385\" class=\"get-partnered-panel\" ng-click=\"vm.scrollToSignUp()\">\n"+"<div class=\"call-to-action\">\n"+"<p> GET PARTNERED</p>\n"+"</div>\n"+"<img ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/white_down_caret.png\">\n"+"</div>\n"+"\n"+"\n"+"<div class=\"benefits\">\n"+"<div class=\"guest\">\n"+"<h4 scrolled-class=\"385\" >Guest <br> Broadcasting</h4>\n"+"<img ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/Feature1_GuestBC.jpg\">\n"+"<p>Bring your audience in to broadcast with you.</p>\n"+"</div>\n"+"<div class=\"earn\">\n"+"<h4>Earn Money From Tips &amp; Gifts</h4>\n"+"<img ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/Feature2_Tips.jpg\">\n"+"<p>Viewers buy bars. Bars buy gifts. Gifts make YouNow Partners real money.</p>\n"+"</div>\n"+"<div class=\"audience\">\n"+"<h4>Expand Your Audience</h4>\n"+"<img ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/Feature3_Subscribe.jpg\">\n"+"<p>Fans can subscribe to your YouTube channel and follow you on Twitter directly from the app.</p>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"how-it-works\">\n"+"\n"+"<h2>\n"+"HOW DOES IT WORK?\n"+"</h2>\n"+"\n"+"<div class=\"tutorial-vid\">\n"+"<iframe src=\"https://player.vimeo.com/video/130339308\"  frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\n"+"</div>\n"+"\n"+"\n"+"<div class=\"benefits white\">\n"+"<div ng-class=\"{'visible': vm.selectedTestimonial === '1'}\" class=\"guest\">\n"+"\n"+"<img class=\"arrow left \" ng-click=\"vm.nextTestimonial('back') \"ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/next_arrow_left.png\">\n"+"<img class=\"headshot\" ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/testimonial_haileyknox.jpg\">\n"+"<img class=\"arrow right\" ng-click=\"vm.nextTestimonial('next') \"ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/next_arrow_right.png\">\n"+"\n"+"<p>\"YouNow has helped me to find my audience like no other platform could, and has opened opportunities for me to connect with fans in very real and meaningful way.\"</p>\n"+"\n"+"<p class=\"author\">- Hailey Knox</p>\n"+"</div>\n"+"<div ng-class=\"{'visible': vm.selectedTestimonial === '2'}\" class=\"audience\">\n"+"\n"+"<img class=\"arrow left\" ng-click=\"vm.nextTestimonial('back') \"ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/next_arrow_left.png\">\n"+"<img class=\"headshot\" ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/testimonial_twaimz.jpg\">\n"+"<img class=\"arrow right\" ng-click=\"vm.nextTestimonial('next') \"ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/next_arrow_right.png\">\n"+"\n"+"<p>\"I am OBSESSED with YouNow! Itâs a great way to connect with people I like to call my friends, not fans!\"</p>\n"+"\n"+"<p class=\"author\">- twaimz</p>\n"+"</div>\n"+"<div ng-class=\"{'visible': vm.selectedTestimonial === '3'}\" class=\"earn\">\n"+"\n"+"<img class=\"arrow left\" ng-click=\"vm.nextTestimonial('back') \"ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/next_arrow_left.png\">\n"+"<img class=\"headshot\" ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/testimonial_LABeast.jpg\">\n"+"<img class=\"arrow right\" ng-click=\"vm.nextTestimonial('next') \"ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/next_arrow_right.png\">\n"+"\n"+"<p>\"YouNow has given me the gift to have face to face conversations any time, 365 days of the year, worldwide with the people I care about the most â my loyal and dedicated fans.\"</p>\n"+"\n"+"<p class=\"author\">- L.A. Beast</p>\n"+"</div>\n"+"</div>\n"+"\n"+"<div class=\"featured-in\">\n"+"<p>ALSO FEATURED IN</p>\n"+"</div>\n"+"\n"+"<div class=\"logos\">\n"+"<div>\n"+"<a target=\"_blank\" ng-href=\" http://www.billboard.com/articles/business/6836149/younow-music-live-streaming-adi-sideman-hailey-knox\">\n"+"<img ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/logo_billboard.png\">\n"+"</a>\n"+"\n"+"<a target=\"_blank\" ng-href=\"http://variety.com/2015/digital/news/never-mind-periscope-or-meerkat-younow-has-already-paid-top-live-streamers-1-million-1201483789/\">\n"+"<img ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/logo_variety.png\">\n"+"</a>\n"+"\n"+"<a target=\"_blank\" ng-href=\"http://dailydot.com/entertainment/younow-livestreaming-platform/?tw=dd\">\n"+"<img ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/logo_dailydot.png\">\n"+"</a>\n"+"\n"+"<a target=\"_blank\" ng-href=\"http://www.slate.com/articles/technology/users/2015/12/younow_a_live_streaming_social_network_is_making_stars.2.html\">\n"+"<img id=\"scroll-point\" ng-src=\"{{::vm.configSettings.ServerCDNBaseUrl}}/images/logo_slate.png\">\n"+"</a>\n"+"</div>\n"+"\n"+"</div>\n"+"\n"+"\n"+"</div>\n"+"\n"+"<div class=\"action-container\">\n"+"<div class=\"action\" ng-if=\"vm.session.user.userId===0 || (vm.session.user.partner!==1 && vm.session.user.partner!==6 && vm.session.user.partner!==7)\">\n"+"<a class=\"btn\" ng-href=\"https://younow.wufoo.com/forms/younow-partner-program-application/\">Apply Now</a>\n"+"</div>\n"+"<div class=\"action\" ng-if=\"vm.session.user.partner===1 || vm.session.user.partner===6 || vm.session.user.partner===7\">\n"+"<a ng-href=\"/partners/earnings\" class=\"btn\" translate=\"earnings_goto\"></a>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"<div data-footer ng-hide=\"$root.hideFooter\"></div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/partner/payment-settings.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/partner/payment-settings.tpl.html","<div data-header></div>\n"+"<div class=\"notification\" ng-class=\"{active: $root.notificationActive, fixed: $root.notificationFixed}\">\n"+"<alert type=\"{{$root.notificationType}}\" ng-bind-html=\"$root.notificationMessage\"></alert>\n"+"<button class=\"close\" ng-click=\"closeNotification()\" type=\"button\">\n"+"<i class=\"ynicon ynicon-close\"></i>\n"+"</button>\n"+"</div>\n"+"\n"+"<!-- Desktop View Start -->\n"+"<div ng-if=\"::!vm.mobile\" id=\"partnersEarnings\" class=\"partnersContent\">\n"+"\n"+"<div class=\"userearnings\">\n"+"<div class=\"userearningsowenothumb\">\n"+"<div class=\"userearningstitle\" translate=\"tipalti_title\"></div>\n"+"<p class=\"caption\" translate=\"tipalti_caption\" translate-values=\"{a_open:'<a href=\'mailto:PartnerPayments@YouNow.com?Subject=Partner%Payments\' target=\'_blank\'>',a_close:'</a>'}\"></p>\n"+"</div>\n"+"</div>\n"+"\n"+"<hr>\n"+"\n"+"<div class=\"iframe-container\">\n"+"<tipalti-iframe class=\"tipalti-iframe\"> </tipalti-iframe>\n"+"</div>\n"+"\n"+"</div>\n"+"<!-- Desktop View End -->\n"+"\n"+"<!-- Mobile View Start -->\n"+"<div ng-if=\"::vm.mobile\" id=\"partnersEarnings\" class=\"partnersContent\">\n"+"\n"+"<div class=\"userearnings\">\n"+"<div class=\"userearningsowenothumb\" ng-init=\"\">\n"+"<div class=\"userearningstitle\" translate=\"tipalti_title_mobile\"></div>\n"+"<p class=\"caption\" translate=\"tipalti_caption_mobile\"></p>\n"+"</div>\n"+"</div>\n"+"\n"+"</div>\n"+"<!-- Mobile View End -->\n"+"\n"+"<div data-footer ng-hide=\"$root.hideFooter\"></div>\n"+"\n");}]);angular.module("angularjsapp/src/app/states/policy/policy.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/policy/policy.tpl.html","<div data-header></div>\n"+"<div id=\"docs\" ng-class=\"{'ready': ready, 'rtl': rtl}\">\n"+"<div id=\"doc-header\">{{docTitle}}</div>\n"+"<div id=\"doc-sidebar\">\n"+"<div ng-repeat=\"section in sections\" class=\"doc-section\" ng-click=\"scrollTo(section.offsetTop)\">{{section.innerText}}</div>\n"+"</div>\n"+"<div id=\"doc-content\" ng-bind-html=\"docContent\"></div>\n"+"</div>\n"+"<div data-footer ng-hide=\"$root.hideFooter\"></div>\n");}]);angular.module("angularjsapp/src/app/states/streetteam/streetteam.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("angularjsapp/src/app/states/streetteam/streetteam.tpl.html","<div data-header></div>\n"+"<div class=\"container\">\n"+"<div class=\"streetteam\" ng-if=\"vm.data.template\">\n"+"<div class=\"streetteam-title\" ng-bind=\"vm.data.template.title\"></div>\n"+"<div class=\"streetteam-container\">\n"+"<div class=\"streetteam-subtitle\" ng-bind=\"vm.data.template.subtitle\"></div>\n"+"<div class=\"streetteam-message\" ng-bind-html=\"vm.data.template.html\"></div>\n"+"<div class=\"streetteam-buttons\">\n"+"<button\n"+"class=\"btn\"\n"+"ng-if=\"vm.data.template.join\"\n"+"ng-bind=\"vm.data.template.join\"\n"+"ng-click=\"vm.toggle()\"\n"+"></button>\n"+"<button\n"+"class=\"btn\"\n"+"ng-if=\"vm.data.template.return\"\n"+"ng-bind=\"vm.data.template.return\"\n"+"ng-click=\"vm.goBack()\"\n"+"></button>\n"+"<button\n"+"class=\"btn optout\"\n"+"ng-if=\"vm.data.template.leave\"\n"+"ng-bind=\"vm.data.template.leave\"\n"+"ng-click=\"vm.toggle()\"\n"+"></button>\n"+"</div>\n"+"</div>\n"+"</div>\n"+"</div>\n");}]);
